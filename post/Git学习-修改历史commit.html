<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Mr.RS的个人博客-Git学习-修改历史commit</title><meta name="next-head-count" content="3"/><link rel="preload" href="/next-blog/_next/static/css/1bf96eec8dc413e7.css" as="style"/><link rel="stylesheet" href="/next-blog/_next/static/css/1bf96eec8dc413e7.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/next-blog/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/next-blog/_next/static/chunks/webpack-cf185e4b59cdddcf.js" defer=""></script><script src="/next-blog/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/next-blog/_next/static/chunks/main-1c9e93b8392c1bc9.js" defer=""></script><script src="/next-blog/_next/static/chunks/pages/_app-ca6aae25bc99a05f.js" defer=""></script><script src="/next-blog/_next/static/chunks/899-1cd3a59abdb8ea18.js" defer=""></script><script src="/next-blog/_next/static/chunks/pages/post/%5Btitle%5D-406bad804ceffd1d.js" defer=""></script><script src="/next-blog/_next/static/ZYBT_GVMR4rRyxQKNqnGG/_buildManifest.js" defer=""></script><script src="/next-blog/_next/static/ZYBT_GVMR4rRyxQKNqnGG/_ssgManifest.js" defer=""></script><script src="/next-blog/_next/static/ZYBT_GVMR4rRyxQKNqnGG/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><header class="fixed top-0 py-4 left-0 right-0 h-auto px-10 shadow bg-white z-50"><nav><ul class="flex w-auto"><li class="mr-4 hover:text-yellow"><a href="/next-blog">首页</a></li><li class="mx-4 hover:text-yellow"><a href="/next-blog/categories">分类</a></li><li class="mx-4 hover:text-yellow"><a href="/next-blog/tags">标签</a></li><li class="ml-4 hover:text-yellow"><a href="/next-blog/timeline">归档</a></li></ul></nav></header><main class="mt-20 mb-4 mx-auto justify-center w-2/3"><div class="mx-auto lg:max-w-5xl md:max-w-3xl"><article class="flex flex-col justify-around pb-16 px-4 mx-auto space-y-10 text-base"><div class="flex flex-col space-y-4"><h1 class="inline pt-10 text-4xl text-skin-primary">Git学习-修改历史commit</h1><div class="text-sm space-x-2 text-skin-muted"><span><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 inline-block mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>2022-04-17 20:42:00</span><span><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 inline-block mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>44</span></div></div><div class="mt-8 flex"><div class="w-full flex-auto custom-markdown-body"><div class="markdown-body" id="write"><p>有时候我们在提交代码时选错了git账号或者初始化仓库时没有配置git账号，恰好你也忽略掉了git的提示：</p>
<pre><code class="hljs language-shell">Your name and email address were configured automatically based
on your username and hostname. Please check that they are accurate.
You can suppress this message by setting them explicitly:

    git config --global user.name &quot;Your Name&quot;
    git config --global user.email you@example.com

After doing this, you may fix the identity used for this commit with:

    git commit --amend --reset-author
</code></pre>
<p>在这之后，你可能又进行了几次提交......</p>
<p>某一时刻你突然意识到好像有什么不对劲🤔</p>
<p><img src="https://mrrsblog.oss-cn-shanghai.aliyuncs.com/shiqingbingbujiandan.jpeg" alt="事情并不简单"></p>
<p>慌忙中执行了一下<code>git log</code></p>
<pre><code class="hljs language-shell">git log

commit b9955bf47f6437c2d72daf99e809737bbb79f2e1 (HEAD -&gt; master)
Author: echo &lt;echo@echodeMBP.lan&gt;
Date:   Sun Apr 17 20:49:01 2022 +0800

    fix: fix 1.1

commit ee0c985a1f158dcfe72b319727f401ae0742ed23
Author: echo &lt;echo@echodeMBP.lan&gt;
Date:   Sun Apr 17 20:48:44 2022 +0800

    fix: fix 1.0

commit f6bac54c00f6b869894e8214aae7b8aaacdec5d5
Author: echo &lt;echo@echodeMBP.lan&gt;
Date:   Sun Apr 17 20:47:23 2022 +0800

    feat: 1.0
</code></pre>
<p>寄了🙁</p>
<p><code>Author</code>全是另一个，假设刚好你的团队是按照 bug数/代码量 来进行代码质量评估的，那现在岂不是自己给自己挖坑，强行拉低分母</p>
<p><img src="https://mrrsblog.oss-cn-shanghai.aliyuncs.com/wtmlaji.jpeg" alt="我tm怎么这么垃圾"></p>
<p>稳住别慌，问题不大。git这么牛逼的东西怎么可能没想到我们这种傻瓜操作呢？接下来我会分几种不同的情况分别给出解决方案</p>
<p>首先，感谢祖师爷！</p>
<h2 id="只修改最后一次提交">只修改最后一次提交</h2>
<p>假如你只是提交了一次就发现不对劲，那么你可以很简单地挽救回来，执行以下命令即可：</p>
<pre><code class="hljs language-shell"><span class="hljs-meta"># </span><span class="language-bash">注意邮箱需包括&lt;&gt;尖括号</span>
git commit --amend --author=&quot;NewAuthor &lt;NewEmail@address.com&gt;&quot;
</code></pre>
<p>或者在项目目录下配置好git账号后执行：</p>
<pre><code class="hljs language-shell">git commit --amend --reset-author
</code></pre>
<p>此时<code>git log</code>长这样</p>
<pre><code class="hljs language-shell">git log

commit 8b7c9afb16d25a89cb2d8c3d864e8422c088966c (HEAD -&gt; master)
Author: mrrs878 &lt;mrrs878@foxmail.com&gt;
Date:   Sun Apr 17 20:49:01 2022 +0800

    fix: fix 1.1

commit ee0c985a1f158dcfe72b319727f401ae0742ed23
Author: echo &lt;echo@echodeMBP.lan&gt;
Date:   Sun Apr 17 20:48:44 2022 +0800

    fix: fix 1.0

commit f6bac54c00f6b869894e8214aae7b8aaacdec5d5
Author: echo &lt;echo@echodeMBP.lan&gt;
Date:   Sun Apr 17 20:47:23 2022 +0800

    feat: 1.0
</code></pre>
<p>好耶！🎉</p>
<p>那假如你是提交了好几次才记起来了呢</p>
<p><img src="https://mrrsblog.oss-cn-shanghai.aliyuncs.com/cangtianna.png" alt="苍天呐"></p>
<h2 id="修改历史提交">修改历史提交</h2>
<p>依旧稳住别慌，问题不大</p>
<p>此时就要祭出<code>git rebase</code>了</p>
<p>假如你的<code>git log</code>长这样</p>
<pre><code class="hljs language-shell">git log

commit 8b7c9afb16d25a89cb2d8c3d864e8422c088966c (HEAD -&gt; master)
Author: mrrs878 &lt;mrrs878@foxmail.com&gt;
Date:   Sun Apr 17 20:49:01 2022 +0800

    fix: fix 1.1

commit ee0c985a1f158dcfe72b319727f401ae0742ed23
Author: echo &lt;echo@echodeMBP.lan&gt;
Date:   Sun Apr 17 20:48:44 2022 +0800

    fix: fix 1.0

commit f6bac54c00f6b869894e8214aae7b8aaacdec5d5
Author: echo &lt;echo@echodeMBP.lan&gt;
Date:   Sun Apr 17 20:47:23 2022 +0800

    feat: 1.0
</code></pre>
<p>（没错，我还是拿的上面举例子👆）</p>
<p>假如你要修复<code>commit message</code>为<code>fix: fix 1.0</code>的这个<code>commit</code>，执行这个命令：</p>
<pre><code class="hljs language-shell"><span class="hljs-meta"># </span><span class="language-bash">-i 后面跟的是fix: fix1.0之前的一个commit的<span class="hljs-built_in">hash</span></span>
git rebase -i f6bac54c00f6b869894e8214aae7b8aaacdec5d5
</code></pre>
<p>或者这样:</p>
<pre><code class="hljs language-shell"><span class="hljs-meta"># </span><span class="language-bash">HEAD~2 表示后退两步</span>
git rebase -i HEAD~2
</code></pre>
<p>（推荐直接写hash值，当你的commit落后太多不好计算🤣）</p>
<p>此时你的终端大概率可能会变成这样：</p>
<pre><code class="hljs language-shell">echo@echodeMBP  ~/Frontend/test/git-commit-change  ➦ ee0c985 &gt;R&gt; 
</code></pre>
<p>这两个命令执行的结果都是一样的：</p>
<pre><code class="hljs language-shell">pick ee0c985 fix: fix 1.0
pick 8b7c9af fix: fix 1.1
<span class="hljs-meta">
# </span><span class="language-bash">Rebase f6bac54..8b7c9af onto f6bac54 (2 commands)</span>
<span class="hljs-meta">#</span><span class="language-bash">
<span class="hljs-comment"># Commands:</span></span>
<span class="hljs-meta"># </span><span class="language-bash">p, pick &lt;commit&gt; = use commit</span>
<span class="hljs-meta"># </span><span class="language-bash">r, reword &lt;commit&gt; = use commit, but edit the commit message</span>
<span class="hljs-meta"># </span><span class="language-bash">e, edit &lt;commit&gt; = use commit, but stop <span class="hljs-keyword">for</span> amending</span>
<span class="hljs-meta"># </span><span class="language-bash">s, squash &lt;commit&gt; = use commit, but meld into previous commit</span>
<span class="hljs-meta"># </span><span class="language-bash">f, fixup [-C | -c] &lt;commit&gt; = like <span class="hljs-string">&quot;squash&quot;</span> but keep only the previous</span>
<span class="hljs-meta"># </span><span class="language-bash">                   commit<span class="hljs-string">&#x27;s log message, unless -C is used, in which case</span></span>
<span class="hljs-meta"># </span><span class="language-bash"><span class="hljs-string">                   keep only this commit&#x27;</span>s message; -c is same as -C but</span>
<span class="hljs-meta"># </span><span class="language-bash">                   opens the editor</span>
<span class="hljs-meta"># </span><span class="language-bash">x, <span class="hljs-built_in">exec</span> &lt;<span class="hljs-built_in">command</span>&gt; = run <span class="hljs-built_in">command</span> (the rest of the line) using shell</span>
<span class="hljs-meta"># </span><span class="language-bash">b, <span class="hljs-built_in">break</span> = stop here (<span class="hljs-built_in">continue</span> rebase later with <span class="hljs-string">&#x27;git rebase --continue&#x27;</span>)</span>
<span class="hljs-meta"># </span><span class="language-bash">d, drop &lt;commit&gt; = remove commit</span>
<span class="hljs-meta"># </span><span class="language-bash">l, label &lt;label&gt; = label current HEAD with a name</span>
<span class="hljs-meta"># </span><span class="language-bash">t, reset &lt;label&gt; = reset HEAD to a label</span>
<span class="hljs-meta"># </span><span class="language-bash">m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [<span class="hljs-comment"># &lt;oneline&gt;]</span></span>
</code></pre>
<p>此时会进入命令行交互状态</p>
<p>光标移动到选择你要修改的那个<code>commit</code>，并将前方的<code>pick</code>改为<code>edit</code>，然后<code>:</code> + <code>wq</code>保存退出</p>
<p>此时终端会打印这个消息</p>
<pre><code class="hljs language-shell">Stopped at ee0c985...  fix: fix 1.0
You can amend the commit now, with

  git commit --amend 

Once you are satisfied with your changes, run

  git rebase --continue
</code></pre>
<p>接着执行这个命令：</p>
<pre><code class="hljs language-shell">git commit --amend --reset-author
</code></pre>
<p>或者最上面那个：</p>
<pre><code class="hljs language-shell">git commit --amend --author=&quot;NewAuthor &lt;NewEmail@address.com&gt;&quot;
</code></pre>
<p>此时又会进入命令行交互界面，类似于执行<code>git commit -m &quot;xxxx&quot;</code>时。由于我们什么都没改，因此可以<code>:</code> + <code>wq</code>退出即可</p>
<p>最后执行：</p>
<pre><code class="hljs language-shell">git rebase --continue
</code></pre>
<p>这时候再<code>git log</code>一下看看效果👀</p>
<pre><code class="hljs language-shell">commit 24ff96047eeb5531841b1d93242af992b6e54fcc (HEAD -&gt; master)
Author: mrrs878 &lt;mrrs878@foxmail.com&gt;
Date:   Sun Apr 17 20:49:01 2022 +0800

    fix: fix 1.1

commit 40074be6073f9f76817665d6de078143dbf6739d
Author: mrrs878 &lt;mrrs878@foxmail.com&gt;
Date:   Sun Apr 17 21:14:52 2022 +0800

    fix: fix 1.0

commit f6bac54c00f6b869894e8214aae7b8aaacdec5d5
Author: echo &lt;echo@echodeMBP.lan&gt;
Date:   Sun Apr 17 20:47:23 2022 +0800

    feat: 1.0
</code></pre>
<p>好耶！成功了 🎉</p>
<p>到这里可以解决大多数的人的问题了，那可能会有人问了，如果我一开始就是错的怎么办呢？</p>
<p><img src="https://mrrsblog.oss-cn-shanghai.aliyuncs.com/male.jpeg" alt="麻了"></p>
<h2 id="修改第一次提交">修改第一次提交</h2>
<p>依旧问题不大，将上面的</p>
<pre><code class="hljs language-shell">git rebase -i xxx
</code></pre>
<p>替换成</p>
<pre><code class="hljs language-shell">git rebase -i --root
</code></pre>
<p>这时你会发现可以修改第一次提交了</p>
<pre><code class="hljs language-shell">pick f6bac54 feat: 1.0
pick 40074be fix: fix 1.0
pick 24ff960 fix: fix 1.1
<span class="hljs-meta">
# </span><span class="language-bash">Rebase 24ff960 onto fba660d (3 commands)</span>
</code></pre>
<p>接下来的就不用我教你了吧</p>
<h2 id="总结">总结</h2>
<ul>
<li><p>如果是最后一次提交错误，可以简单地执行<code>git commit --amend --author=&quot;NewAuthor &lt;NewEmail@address.com&gt;&quot;</code>或<code>git commit --amend --reset-author</code>来修改信息</p>
</li>
<li><p>如果是某一次提交错误，可以通过<code>git rebase -i xxx</code> + 第一种的命令来修改信息</p>
</li>
<li><p>如果要修改第一次提交，可以将第二种的<code>git rebase -i xxx</code>替换成<code>git rebase -i --root</code>来修改信息</p>
</li>
</ul>
<p>结束！</p>
<h2 id="参考">参考</h2>
<p><a href="https://www.jianshu.com/p/51f5cbb81cae">Git修改提交历史中的作者及邮箱信息</a></p>
<p><a href="https://stackoverflow.com/questions/2246208/change-first-commit-of-project-with-git">Change first commit of project with Git?</a></p>
</div></div></div></article></div></main><footer class="flex flex-col items-center justify-center leading-8 text-sm w-full py-2 border-t text-skin-muted"><p>Designed &amp; developed by<a class="ml-1 text-yellow" target="_blank" href="https://github.com/mrrs878" rel="noreferrer">Mr.RS</a></p><p>©<!-- --> <!-- -->2022</p></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Git学习-修改历史commit","tags":["Git","rebase"],"categories":"Git","description":"有时候我们在提交代码时选错了git账号或者初始化仓库时没有配置git账号，恰好你也忽略掉了git的提示：\n\n``` shell\nYour name and email address were configured automatically based\non your username and hostname. Please check that they are accurate.\nYo","createDate":"2022-04-17 20:42:00","updateDate":"2022-04-17 21:35:28","body":"\u003cp\u003e有时候我们在提交代码时选错了git账号或者初始化仓库时没有配置git账号，恰好你也忽略掉了git的提示：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003eYour name and email address were configured automatically based\non your username and hostname. Please check that they are accurate.\nYou can suppress this message by setting them explicitly:\n\n    git config --global user.name \u0026quot;Your Name\u0026quot;\n    git config --global user.email you@example.com\n\nAfter doing this, you may fix the identity used for this commit with:\n\n    git commit --amend --reset-author\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e在这之后，你可能又进行了几次提交......\u003c/p\u003e\n\u003cp\u003e某一时刻你突然意识到好像有什么不对劲🤔\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/shiqingbingbujiandan.jpeg\" alt=\"事情并不简单\"\u003e\u003c/p\u003e\n\u003cp\u003e慌忙中执行了一下\u003ccode\u003egit log\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003egit log\n\ncommit b9955bf47f6437c2d72daf99e809737bbb79f2e1 (HEAD -\u0026gt; master)\nAuthor: echo \u0026lt;echo@echodeMBP.lan\u0026gt;\nDate:   Sun Apr 17 20:49:01 2022 +0800\n\n    fix: fix 1.1\n\ncommit ee0c985a1f158dcfe72b319727f401ae0742ed23\nAuthor: echo \u0026lt;echo@echodeMBP.lan\u0026gt;\nDate:   Sun Apr 17 20:48:44 2022 +0800\n\n    fix: fix 1.0\n\ncommit f6bac54c00f6b869894e8214aae7b8aaacdec5d5\nAuthor: echo \u0026lt;echo@echodeMBP.lan\u0026gt;\nDate:   Sun Apr 17 20:47:23 2022 +0800\n\n    feat: 1.0\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e寄了🙁\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eAuthor\u003c/code\u003e全是另一个，假设刚好你的团队是按照 bug数/代码量 来进行代码质量评估的，那现在岂不是自己给自己挖坑，强行拉低分母\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/wtmlaji.jpeg\" alt=\"我tm怎么这么垃圾\"\u003e\u003c/p\u003e\n\u003cp\u003e稳住别慌，问题不大。git这么牛逼的东西怎么可能没想到我们这种傻瓜操作呢？接下来我会分几种不同的情况分别给出解决方案\u003c/p\u003e\n\u003cp\u003e首先，感谢祖师爷！\u003c/p\u003e\n\u003ch2 id=\"只修改最后一次提交\"\u003e只修改最后一次提交\u003c/h2\u003e\n\u003cp\u003e假如你只是提交了一次就发现不对劲，那么你可以很简单地挽救回来，执行以下命令即可：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003e\u003cspan class=\"hljs-meta\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e注意邮箱需包括\u0026lt;\u0026gt;尖括号\u003c/span\u003e\ngit commit --amend --author=\u0026quot;NewAuthor \u0026lt;NewEmail@address.com\u0026gt;\u0026quot;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e或者在项目目录下配置好git账号后执行：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003egit commit --amend --reset-author\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e此时\u003ccode\u003egit log\u003c/code\u003e长这样\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003egit log\n\ncommit 8b7c9afb16d25a89cb2d8c3d864e8422c088966c (HEAD -\u0026gt; master)\nAuthor: mrrs878 \u0026lt;mrrs878@foxmail.com\u0026gt;\nDate:   Sun Apr 17 20:49:01 2022 +0800\n\n    fix: fix 1.1\n\ncommit ee0c985a1f158dcfe72b319727f401ae0742ed23\nAuthor: echo \u0026lt;echo@echodeMBP.lan\u0026gt;\nDate:   Sun Apr 17 20:48:44 2022 +0800\n\n    fix: fix 1.0\n\ncommit f6bac54c00f6b869894e8214aae7b8aaacdec5d5\nAuthor: echo \u0026lt;echo@echodeMBP.lan\u0026gt;\nDate:   Sun Apr 17 20:47:23 2022 +0800\n\n    feat: 1.0\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e好耶！🎉\u003c/p\u003e\n\u003cp\u003e那假如你是提交了好几次才记起来了呢\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/cangtianna.png\" alt=\"苍天呐\"\u003e\u003c/p\u003e\n\u003ch2 id=\"修改历史提交\"\u003e修改历史提交\u003c/h2\u003e\n\u003cp\u003e依旧稳住别慌，问题不大\u003c/p\u003e\n\u003cp\u003e此时就要祭出\u003ccode\u003egit rebase\u003c/code\u003e了\u003c/p\u003e\n\u003cp\u003e假如你的\u003ccode\u003egit log\u003c/code\u003e长这样\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003egit log\n\ncommit 8b7c9afb16d25a89cb2d8c3d864e8422c088966c (HEAD -\u0026gt; master)\nAuthor: mrrs878 \u0026lt;mrrs878@foxmail.com\u0026gt;\nDate:   Sun Apr 17 20:49:01 2022 +0800\n\n    fix: fix 1.1\n\ncommit ee0c985a1f158dcfe72b319727f401ae0742ed23\nAuthor: echo \u0026lt;echo@echodeMBP.lan\u0026gt;\nDate:   Sun Apr 17 20:48:44 2022 +0800\n\n    fix: fix 1.0\n\ncommit f6bac54c00f6b869894e8214aae7b8aaacdec5d5\nAuthor: echo \u0026lt;echo@echodeMBP.lan\u0026gt;\nDate:   Sun Apr 17 20:47:23 2022 +0800\n\n    feat: 1.0\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e（没错，我还是拿的上面举例子👆）\u003c/p\u003e\n\u003cp\u003e假如你要修复\u003ccode\u003ecommit message\u003c/code\u003e为\u003ccode\u003efix: fix 1.0\u003c/code\u003e的这个\u003ccode\u003ecommit\u003c/code\u003e，执行这个命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003e\u003cspan class=\"hljs-meta\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e-i 后面跟的是fix: fix1.0之前的一个commit的\u003cspan class=\"hljs-built_in\"\u003ehash\u003c/span\u003e\u003c/span\u003e\ngit rebase -i f6bac54c00f6b869894e8214aae7b8aaacdec5d5\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e或者这样:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003e\u003cspan class=\"hljs-meta\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003eHEAD~2 表示后退两步\u003c/span\u003e\ngit rebase -i HEAD~2\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e（推荐直接写hash值，当你的commit落后太多不好计算🤣）\u003c/p\u003e\n\u003cp\u003e此时你的终端大概率可能会变成这样：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003eecho@echodeMBP  ~/Frontend/test/git-commit-change  ➦ ee0c985 \u0026gt;R\u0026gt; \n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e这两个命令执行的结果都是一样的：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003epick ee0c985 fix: fix 1.0\npick 8b7c9af fix: fix 1.1\n\u003cspan class=\"hljs-meta\"\u003e\n# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003eRebase f6bac54..8b7c9af onto f6bac54 (2 commands)\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e#\u003c/span\u003e\u003cspan class=\"language-bash\"\u003e\n\u003cspan class=\"hljs-comment\"\u003e# Commands:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003ep, pick \u0026lt;commit\u0026gt; = use commit\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003er, reword \u0026lt;commit\u0026gt; = use commit, but edit the commit message\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003ee, edit \u0026lt;commit\u0026gt; = use commit, but stop \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e amending\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003es, squash \u0026lt;commit\u0026gt; = use commit, but meld into previous commit\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003ef, fixup [-C | -c] \u0026lt;commit\u0026gt; = like \u003cspan class=\"hljs-string\"\u003e\u0026quot;squash\u0026quot;\u003c/span\u003e but keep only the previous\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e                   commit\u003cspan class=\"hljs-string\"\u003e\u0026#x27;s log message, unless -C is used, in which case\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e\u003cspan class=\"hljs-string\"\u003e                   keep only this commit\u0026#x27;\u003c/span\u003es message; -c is same as -C but\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e                   opens the editor\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003ex, \u003cspan class=\"hljs-built_in\"\u003eexec\u003c/span\u003e \u0026lt;\u003cspan class=\"hljs-built_in\"\u003ecommand\u003c/span\u003e\u0026gt; = run \u003cspan class=\"hljs-built_in\"\u003ecommand\u003c/span\u003e (the rest of the line) using shell\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003eb, \u003cspan class=\"hljs-built_in\"\u003ebreak\u003c/span\u003e = stop here (\u003cspan class=\"hljs-built_in\"\u003econtinue\u003c/span\u003e rebase later with \u003cspan class=\"hljs-string\"\u003e\u0026#x27;git rebase --continue\u0026#x27;\u003c/span\u003e)\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003ed, drop \u0026lt;commit\u0026gt; = remove commit\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003el, label \u0026lt;label\u0026gt; = label current HEAD with a name\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003et, reset \u0026lt;label\u0026gt; = reset HEAD to a label\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003em, merge [-C \u0026lt;commit\u0026gt; | -c \u0026lt;commit\u0026gt;] \u0026lt;label\u0026gt; [\u003cspan class=\"hljs-comment\"\u003e# \u0026lt;oneline\u0026gt;]\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e此时会进入命令行交互状态\u003c/p\u003e\n\u003cp\u003e光标移动到选择你要修改的那个\u003ccode\u003ecommit\u003c/code\u003e，并将前方的\u003ccode\u003epick\u003c/code\u003e改为\u003ccode\u003eedit\u003c/code\u003e，然后\u003ccode\u003e:\u003c/code\u003e + \u003ccode\u003ewq\u003c/code\u003e保存退出\u003c/p\u003e\n\u003cp\u003e此时终端会打印这个消息\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003eStopped at ee0c985...  fix: fix 1.0\nYou can amend the commit now, with\n\n  git commit --amend \n\nOnce you are satisfied with your changes, run\n\n  git rebase --continue\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e接着执行这个命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003egit commit --amend --reset-author\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e或者最上面那个：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003egit commit --amend --author=\u0026quot;NewAuthor \u0026lt;NewEmail@address.com\u0026gt;\u0026quot;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e此时又会进入命令行交互界面，类似于执行\u003ccode\u003egit commit -m \u0026quot;xxxx\u0026quot;\u003c/code\u003e时。由于我们什么都没改，因此可以\u003ccode\u003e:\u003c/code\u003e + \u003ccode\u003ewq\u003c/code\u003e退出即可\u003c/p\u003e\n\u003cp\u003e最后执行：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003egit rebase --continue\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e这时候再\u003ccode\u003egit log\u003c/code\u003e一下看看效果👀\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003ecommit 24ff96047eeb5531841b1d93242af992b6e54fcc (HEAD -\u0026gt; master)\nAuthor: mrrs878 \u0026lt;mrrs878@foxmail.com\u0026gt;\nDate:   Sun Apr 17 20:49:01 2022 +0800\n\n    fix: fix 1.1\n\ncommit 40074be6073f9f76817665d6de078143dbf6739d\nAuthor: mrrs878 \u0026lt;mrrs878@foxmail.com\u0026gt;\nDate:   Sun Apr 17 21:14:52 2022 +0800\n\n    fix: fix 1.0\n\ncommit f6bac54c00f6b869894e8214aae7b8aaacdec5d5\nAuthor: echo \u0026lt;echo@echodeMBP.lan\u0026gt;\nDate:   Sun Apr 17 20:47:23 2022 +0800\n\n    feat: 1.0\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e好耶！成功了 🎉\u003c/p\u003e\n\u003cp\u003e到这里可以解决大多数的人的问题了，那可能会有人问了，如果我一开始就是错的怎么办呢？\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/male.jpeg\" alt=\"麻了\"\u003e\u003c/p\u003e\n\u003ch2 id=\"修改第一次提交\"\u003e修改第一次提交\u003c/h2\u003e\n\u003cp\u003e依旧问题不大，将上面的\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003egit rebase -i xxx\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e替换成\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003egit rebase -i --root\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e这时你会发现可以修改第一次提交了\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003epick f6bac54 feat: 1.0\npick 40074be fix: fix 1.0\npick 24ff960 fix: fix 1.1\n\u003cspan class=\"hljs-meta\"\u003e\n# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003eRebase 24ff960 onto fba660d (3 commands)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e接下来的就不用我教你了吧\u003c/p\u003e\n\u003ch2 id=\"总结\"\u003e总结\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003e如果是最后一次提交错误，可以简单地执行\u003ccode\u003egit commit --amend --author=\u0026quot;NewAuthor \u0026lt;NewEmail@address.com\u0026gt;\u0026quot;\u003c/code\u003e或\u003ccode\u003egit commit --amend --reset-author\u003c/code\u003e来修改信息\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e如果是某一次提交错误，可以通过\u003ccode\u003egit rebase -i xxx\u003c/code\u003e + 第一种的命令来修改信息\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e如果要修改第一次提交，可以将第二种的\u003ccode\u003egit rebase -i xxx\u003c/code\u003e替换成\u003ccode\u003egit rebase -i --root\u003c/code\u003e来修改信息\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e结束！\u003c/p\u003e\n\u003ch2 id=\"参考\"\u003e参考\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://www.jianshu.com/p/51f5cbb81cae\"\u003eGit修改提交历史中的作者及邮箱信息\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://stackoverflow.com/questions/2246208/change-first-commit-of-project-with-git\"\u003eChange first commit of project with Git?\u003c/a\u003e\u003c/p\u003e\n"}},"__N_SSG":true},"page":"/post/[title]","query":{"title":"Git学习-修改历史commit"},"buildId":"ZYBT_GVMR4rRyxQKNqnGG","assetPrefix":"/next-blog","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>