<!DOCTYPE html><html><head><link rel="icon" href="https://mrrsblog.oss-cn-shanghai.aliyuncs.com/avatar.jpg"/><script async="" src="/js/L2Dwidget.min.js"></script><script async="" src="/js/initL2D.js"></script><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Mr.RS的个人博客-VSCode插件开发-1-界面配置</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/15773988a510c3d3.css" as="style"/><link rel="stylesheet" href="/_next/static/css/15773988a510c3d3.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-b927671265afed5e.js" defer=""></script><script src="/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/_next/static/chunks/main-1e7421553b9673ee.js" defer=""></script><script src="/_next/static/chunks/pages/_app-ca6aae25bc99a05f.js" defer=""></script><script src="/_next/static/chunks/899-1cd3a59abdb8ea18.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Btitle%5D-d89e1712c82a34ac.js" defer=""></script><script src="/_next/static/q_bGDjg_wY_pJWECD3M4I/_buildManifest.js" defer=""></script><script src="/_next/static/q_bGDjg_wY_pJWECD3M4I/_ssgManifest.js" defer=""></script><script src="/_next/static/q_bGDjg_wY_pJWECD3M4I/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><header class="fixed top-0 py-4 left-0 right-0 h-auto px-10 shadow bg-white z-50"><nav><ul class="flex w-auto"><li class="mr-4 hover:text-yellow"><a href="/">首页</a></li><li class="mx-4 hover:text-yellow"><a href="/categories">分类</a></li><li class="mx-4 hover:text-yellow"><a href="/tags">标签</a></li><li class="ml-4 hover:text-yellow"><a href="/timeline">归档</a></li></ul></nav></header><main class="mt-20 mb-4 mx-auto justify-center w-2/3"><div class="mx-auto lg:max-w-5xl md:max-w-3xl"><article class="flex flex-col justify-around pb-16 px-4 mx-auto space-y-10 text-base"><div class="flex flex-col space-y-4"><h1 class="inline pt-10 text-4xl text-skin-primary">VSCode插件开发-1-界面配置</h1><div class="text-sm space-x-2 text-skin-muted grid grid-cols-5"><span class="flex align-middle"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 inline-block mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>2021-03-23 15:34:17</span><span class="flex align-middle"><svg class="w-5 h-5 inline-block mr-1" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1903" width="20" height="20"><path d="M257.7 752c2 0 4-0.2 6-0.5L431.9 722c2-0.4 3.9-1.3 5.3-2.8l423.9-423.9c3.9-3.9 3.9-10.2 0-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2c-1.9 11.1 1.5 21.9 9.4 29.8 6.6 6.4 14.9 9.9 23.8 9.9z m67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z" p-id="1904"></path></svg>2021-03-26 11:28:12</span></div></div><div class="mt-8 flex"><div class="w-full flex-auto custom-markdown-body"><div class="markdown-body" id="write">
      <h2>
        <span class="prefix"></span>
        <span class="content">简介</span>
        <span class="suffix"></span>
      </h2>
    <p>VSCode插件界面与package.json中的字段对应如图</p>
<p><img src="https://mrrsblog.oss-cn-shanghai.aliyuncs.com/vscodeExtensionView.png" alt="插件界面与package.json中的字段对应"></p>
<p>其中：</p>
<ul>
<li><p>activityBar是左侧边栏中的插件图标</p>
</li>
<li><p>&#39;公交线路&#39;(sidebar)相当于一级菜单，可通过packa.json中的<code>views.sidebar</code>配置</p>
</li>
<li><p>&#39;浦东25路/1117路&#39;相当于二级菜单，通过代码创建</p>
<pre><code class="hljs language-js">vscode.<span class="hljs-property">window</span>.<span class="hljs-title function_">registerTreeDataProvider</span>(<span class="hljs-string">&#x27;sidebar_id&#x27;</span>, <span class="hljs-title class_">TreeDataProvider</span>);
</code></pre>
</li>
<li><p>菜单项中的图标在<code>commands</code>和<code>menus</code>中配置，<code>view/title</code>对应的是一级菜单；<code>view/item/context</code>对应的是二级菜单</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// 1. 先添加command</span>
<span class="hljs-string">&quot;commands&quot;</span>: [
    {
        <span class="hljs-string">&quot;command&quot;</span>: <span class="hljs-string">&quot;realTimeBus.refreshLines&quot;</span>,
        <span class="hljs-string">&quot;icon&quot;</span>: <span class="hljs-string">&quot;$(refresh)&quot;</span>,
        <span class="hljs-string">&quot;title&quot;</span>: <span class="hljs-string">&quot;刷新线路&quot;</span>
    },
    {
        <span class="hljs-string">&quot;command&quot;</span>: <span class="hljs-string">&quot;realTimeBus.addLine&quot;</span>,
        <span class="hljs-string">&quot;icon&quot;</span>: <span class="hljs-string">&quot;$(add)&quot;</span>,
        <span class="hljs-string">&quot;title&quot;</span>: <span class="hljs-string">&quot;添加线路&quot;</span>
    },
    {
        <span class="hljs-string">&quot;command&quot;</span>: <span class="hljs-string">&quot;realTimeBus.removeLine&quot;</span>,
        <span class="hljs-string">&quot;icon&quot;</span>: <span class="hljs-string">&quot;$(remove)&quot;</span>,
        <span class="hljs-string">&quot;title&quot;</span>: <span class="hljs-string">&quot;删除线路&quot;</span>
    },
]

<span class="hljs-comment">// 2. 设置图标位置</span>
<span class="hljs-string">&quot;menus&quot;</span>: {
  <span class="hljs-string">&quot;view/title&quot;</span>: [
    {
      <span class="hljs-string">&quot;command&quot;</span>: <span class="hljs-string">&quot;realTimeBus.refreshLines&quot;</span>,
      <span class="hljs-string">&quot;group&quot;</span>: <span class="hljs-string">&quot;navigation&quot;</span>,  <span class="hljs-comment">// 和文字一行显示</span>
      <span class="hljs-string">&quot;when&quot;</span>: <span class="hljs-string">&quot;view == realTimeBusLine&quot;</span>
    }
  ],
  <span class="hljs-string">&quot;view/item/context&quot;</span>: [
    {
      <span class="hljs-string">&quot;command&quot;</span>: <span class="hljs-string">&quot;realTimeBus.revertLine&quot;</span>,
      <span class="hljs-string">&quot;group&quot;</span>: <span class="hljs-string">&quot;inline&quot;</span>,  <span class="hljs-comment">// 和文字一行显示</span>
      <span class="hljs-string">&quot;when&quot;</span>: <span class="hljs-string">&quot;view == realTimeBusLine &amp;&amp; viewItem == BusLineItem&quot;</span>
    }
  ]
}

<span class="hljs-comment">// 配置viewItem == BusLineItem后command回调函数可以接收到被点击的菜单项</span>
commands.<span class="hljs-title function_">registerCommand</span>(<span class="hljs-string">&#x27;realTimeBus.revertLine&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">params</span>) =&gt;</span> {
<span class="hljs-title class_">BusLineProvider</span>.<span class="hljs-title function_">revertLine</span>(params);
});
</code></pre>
</li>
</ul>

      <h2>
        <span class="prefix"></span>
        <span class="content">treeView</span>
        <span class="suffix"></span>
      </h2>
    <p>一级菜单可在<code>package.json</code>中配置，二级菜单需要使用<code>TreeDataProvider</code></p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BusLineProvider</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">TreeDataProvider</span>&lt;<span class="hljs-title class_">BusLineTreeItem</span>|<span class="hljs-title class_">BusStopTreeItem</span>&gt;{
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-attr">instance</span>: <span class="hljs-title class_">BusLineProvider</span>;

  <span class="hljs-keyword">private</span> <span class="hljs-attr">_onDidChangeTreeData</span>: <span class="hljs-title class_">EventEmitter</span>&lt;<span class="hljs-title class_">BusLineTreeItem</span> | <span class="hljs-literal">undefined</span> | <span class="hljs-built_in">void</span>&gt; 
    = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventEmitter</span>&lt;<span class="hljs-title class_">BusLineTreeItem</span> | <span class="hljs-literal">undefined</span> | <span class="hljs-built_in">void</span>&gt;();
    <span class="hljs-keyword">readonly</span> <span class="hljs-attr">onDidChangeTreeData</span>: <span class="hljs-title class_">Event</span>&lt;<span class="hljs-title class_">BusLineTreeItem</span> | <span class="hljs-literal">undefined</span> | <span class="hljs-built_in">void</span>&gt;
    = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_onDidChangeTreeData</span>.<span class="hljs-property">event</span>;
  
  <span class="hljs-title function_">getTreeItem</span>(<span class="hljs-params">element: BusLineTreeItem</span>) {
    <span class="hljs-keyword">return</span> element;
  }

  <span class="hljs-comment">// 核心方法</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getChildren</span>(<span class="hljs-params">item: BusLineTreeItem|BusStopTreeItem</span>) {
    <span class="hljs-keyword">return</span> [];
  }
  
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">getInstance</span>(): <span class="hljs-title class_">BusLineProvider</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">instance</span> || (<span class="hljs-variable language_">this</span>.<span class="hljs-property">instance</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BusLineProvider</span>());
  }
  
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">refreshLines</span>(<span class="hljs-params">action: () =&gt; <span class="hljs-built_in">void</span> = () =&gt; {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">instance</span>.<span class="hljs-property">_onDidChangeTreeData</span>.<span class="hljs-title function_">fire</span>();
  }
}
</code></pre>
<p>创建后注册即可<code>vscode.window.registerTreeDataProvider(&#39;realTimeBusLine&#39;, BusLineProvider.getInstance());</code></p>
<p>关键在于<code>getChildren</code>方法</p>
<p><code>getChildren</code>会在以下情形调用:</p>
<ol>
<li><p>调用<code>vscode.window.registerTreeDataProvider</code>注册TreeDataProvider时</p>
</li>
<li><p>调用<code>this.instance._onDidChangeTreeData.fire()</code>时</p>
</li>
<li><p>点击可折叠<code>TreeItem</code></p>
</li>
</ol>

      <h2>
        <span class="prefix"></span>
        <span class="content">可折叠菜单</span>
        <span class="suffix"></span>
      </h2>
    <p>设置<code>TreeItem</code>的<code>collapse</code>属性为<code>TreeItemCollapsibleState.Collapsed</code></p>
<p>点击该菜单时会调用<code>getChildren</code>，该菜单也回作为参数传递给<code>getChildren</code></p>
</div></div></div></article></div></main><footer class="flex flex-col items-center justify-center leading-8 text-sm w-full py-2 border-t text-skin-muted"><p>Designed &amp; developed by<a class="ml-1 text-yellow" target="_blank" href="https://github.com/mrrs878" rel="noreferrer">Mr.RS</a></p><p>©<!-- --> <!-- -->2024</p></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"VSCode插件开发-1-界面配置","tags":["VSCode插件"],"categories":"VSCode插件","description":"## 简介\n\nVSCode插件界面与package.json中的字段对应如图\n\n![插件界面与package.json中的字段对应](https://mrrsblog.oss-cn-shanghai.aliyuncs.com/vscodeExtensionView.png)\n\n其中：\n\n- activityBar是左侧边栏中的插件图标\n\n- '公交线路'(sidebar)相当于一级菜单，可通过","createDate":"2021-03-23 15:34:17","updateDate":"2021-03-26 11:28:12","body":"\n      \u003ch2\u003e\n        \u003cspan class=\"prefix\"\u003e\u003c/span\u003e\n        \u003cspan class=\"content\"\u003e简介\u003c/span\u003e\n        \u003cspan class=\"suffix\"\u003e\u003c/span\u003e\n      \u003c/h2\u003e\n    \u003cp\u003eVSCode插件界面与package.json中的字段对应如图\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/vscodeExtensionView.png\" alt=\"插件界面与package.json中的字段对应\"\u003e\u003c/p\u003e\n\u003cp\u003e其中：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003eactivityBar是左侧边栏中的插件图标\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u0026#39;公交线路\u0026#39;(sidebar)相当于一级菜单，可通过packa.json中的\u003ccode\u003eviews.sidebar\u003c/code\u003e配置\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u0026#39;浦东25路/1117路\u0026#39;相当于二级菜单，通过代码创建\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003evscode.\u003cspan class=\"hljs-property\"\u003ewindow\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eregisterTreeDataProvider\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;sidebar_id\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eTreeDataProvider\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e菜单项中的图标在\u003ccode\u003ecommands\u003c/code\u003e和\u003ccode\u003emenus\u003c/code\u003e中配置，\u003ccode\u003eview/title\u003c/code\u003e对应的是一级菜单；\u003ccode\u003eview/item/context\u003c/code\u003e对应的是二级菜单\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// 1. 先添加command\u003c/span\u003e\n\u003cspan class=\"hljs-string\"\u003e\u0026quot;commands\u0026quot;\u003c/span\u003e: [\n    {\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;command\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;realTimeBus.refreshLines\u0026quot;\u003c/span\u003e,\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;icon\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;$(refresh)\u0026quot;\u003c/span\u003e,\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;刷新线路\u0026quot;\u003c/span\u003e\n    },\n    {\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;command\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;realTimeBus.addLine\u0026quot;\u003c/span\u003e,\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;icon\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;$(add)\u0026quot;\u003c/span\u003e,\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;添加线路\u0026quot;\u003c/span\u003e\n    },\n    {\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;command\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;realTimeBus.removeLine\u0026quot;\u003c/span\u003e,\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;icon\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;$(remove)\u0026quot;\u003c/span\u003e,\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;删除线路\u0026quot;\u003c/span\u003e\n    },\n]\n\n\u003cspan class=\"hljs-comment\"\u003e// 2. 设置图标位置\u003c/span\u003e\n\u003cspan class=\"hljs-string\"\u003e\u0026quot;menus\u0026quot;\u003c/span\u003e: {\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;view/title\u0026quot;\u003c/span\u003e: [\n    {\n      \u003cspan class=\"hljs-string\"\u003e\u0026quot;command\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;realTimeBus.refreshLines\u0026quot;\u003c/span\u003e,\n      \u003cspan class=\"hljs-string\"\u003e\u0026quot;group\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;navigation\u0026quot;\u003c/span\u003e,  \u003cspan class=\"hljs-comment\"\u003e// 和文字一行显示\u003c/span\u003e\n      \u003cspan class=\"hljs-string\"\u003e\u0026quot;when\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;view == realTimeBusLine\u0026quot;\u003c/span\u003e\n    }\n  ],\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;view/item/context\u0026quot;\u003c/span\u003e: [\n    {\n      \u003cspan class=\"hljs-string\"\u003e\u0026quot;command\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;realTimeBus.revertLine\u0026quot;\u003c/span\u003e,\n      \u003cspan class=\"hljs-string\"\u003e\u0026quot;group\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;inline\u0026quot;\u003c/span\u003e,  \u003cspan class=\"hljs-comment\"\u003e// 和文字一行显示\u003c/span\u003e\n      \u003cspan class=\"hljs-string\"\u003e\u0026quot;when\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;view == realTimeBusLine \u0026amp;\u0026amp; viewItem == BusLineItem\u0026quot;\u003c/span\u003e\n    }\n  ]\n}\n\n\u003cspan class=\"hljs-comment\"\u003e// 配置viewItem == BusLineItem后command回调函数可以接收到被点击的菜单项\u003c/span\u003e\ncommands.\u003cspan class=\"hljs-title function_\"\u003eregisterCommand\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;realTimeBus.revertLine\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eparams\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n\u003cspan class=\"hljs-title class_\"\u003eBusLineProvider\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003erevertLine\u003c/span\u003e(params);\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n      \u003ch2\u003e\n        \u003cspan class=\"prefix\"\u003e\u003c/span\u003e\n        \u003cspan class=\"content\"\u003etreeView\u003c/span\u003e\n        \u003cspan class=\"suffix\"\u003e\u003c/span\u003e\n      \u003c/h2\u003e\n    \u003cp\u003e一级菜单可在\u003ccode\u003epackage.json\u003c/code\u003e中配置，二级菜单需要使用\u003ccode\u003eTreeDataProvider\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ts\"\u003e\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eBusLineProvider\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eimplements\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eTreeDataProvider\u003c/span\u003e\u0026lt;\u003cspan class=\"hljs-title class_\"\u003eBusLineTreeItem\u003c/span\u003e|\u003cspan class=\"hljs-title class_\"\u003eBusStopTreeItem\u003c/span\u003e\u0026gt;{\n  \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003einstance\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eBusLineProvider\u003c/span\u003e;\n\n  \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003e_onDidChangeTreeData\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eEventEmitter\u003c/span\u003e\u0026lt;\u003cspan class=\"hljs-title class_\"\u003eBusLineTreeItem\u003c/span\u003e | \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e | \u003cspan class=\"hljs-built_in\"\u003evoid\u003c/span\u003e\u0026gt; \n    = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEventEmitter\u003c/span\u003e\u0026lt;\u003cspan class=\"hljs-title class_\"\u003eBusLineTreeItem\u003c/span\u003e | \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e | \u003cspan class=\"hljs-built_in\"\u003evoid\u003c/span\u003e\u0026gt;();\n    \u003cspan class=\"hljs-keyword\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eonDidChangeTreeData\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eEvent\u003c/span\u003e\u0026lt;\u003cspan class=\"hljs-title class_\"\u003eBusLineTreeItem\u003c/span\u003e | \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e | \u003cspan class=\"hljs-built_in\"\u003evoid\u003c/span\u003e\u0026gt;\n    = \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_onDidChangeTreeData\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eevent\u003c/span\u003e;\n  \n  \u003cspan class=\"hljs-title function_\"\u003egetTreeItem\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eelement: BusLineTreeItem\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e element;\n  }\n\n  \u003cspan class=\"hljs-comment\"\u003e// 核心方法\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003egetChildren\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eitem: BusLineTreeItem|BusStopTreeItem\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e [];\n  }\n  \n  \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003egetInstance\u003c/span\u003e(): \u003cspan class=\"hljs-title class_\"\u003eBusLineProvider\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003einstance\u003c/span\u003e || (\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003einstance\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eBusLineProvider\u003c/span\u003e());\n  }\n  \n  \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003erefreshLines\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eaction: () =\u0026gt; \u003cspan class=\"hljs-built_in\"\u003evoid\u003c/span\u003e = () =\u0026gt; {}\u003c/span\u003e) {\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003einstance\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_onDidChangeTreeData\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efire\u003c/span\u003e();\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e创建后注册即可\u003ccode\u003evscode.window.registerTreeDataProvider(\u0026#39;realTimeBusLine\u0026#39;, BusLineProvider.getInstance());\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e关键在于\u003ccode\u003egetChildren\u003c/code\u003e方法\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003egetChildren\u003c/code\u003e会在以下情形调用:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cp\u003e调用\u003ccode\u003evscode.window.registerTreeDataProvider\u003c/code\u003e注册TreeDataProvider时\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e调用\u003ccode\u003ethis.instance._onDidChangeTreeData.fire()\u003c/code\u003e时\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e点击可折叠\u003ccode\u003eTreeItem\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\n      \u003ch2\u003e\n        \u003cspan class=\"prefix\"\u003e\u003c/span\u003e\n        \u003cspan class=\"content\"\u003e可折叠菜单\u003c/span\u003e\n        \u003cspan class=\"suffix\"\u003e\u003c/span\u003e\n      \u003c/h2\u003e\n    \u003cp\u003e设置\u003ccode\u003eTreeItem\u003c/code\u003e的\u003ccode\u003ecollapse\u003c/code\u003e属性为\u003ccode\u003eTreeItemCollapsibleState.Collapsed\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e点击该菜单时会调用\u003ccode\u003egetChildren\u003c/code\u003e，该菜单也回作为参数传递给\u003ccode\u003egetChildren\u003c/code\u003e\u003c/p\u003e\n"}},"__N_SSG":true},"page":"/post/[title]","query":{"title":"VSCode插件开发-1-界面配置"},"buildId":"q_bGDjg_wY_pJWECD3M4I","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>