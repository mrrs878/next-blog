<!DOCTYPE html><html><head><link rel="icon" href="https://mrrsblog.oss-cn-shanghai.aliyuncs.com/avatar.jpg"/><script async="" src="/js/L2Dwidget.min.js"></script><script async="" src="/js/initL2D.js"></script><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Mr.RSçš„ä¸ªäººåšå®¢-JavaScriptå¤ä¹ -Promise</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/15773988a510c3d3.css" as="style"/><link rel="stylesheet" href="/_next/static/css/15773988a510c3d3.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-b927671265afed5e.js" defer=""></script><script src="/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/_next/static/chunks/main-1e7421553b9673ee.js" defer=""></script><script src="/_next/static/chunks/pages/_app-ca6aae25bc99a05f.js" defer=""></script><script src="/_next/static/chunks/899-3eff910f6206cfe7.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Btitle%5D-d89e1712c82a34ac.js" defer=""></script><script src="/_next/static/kGKGnEKTTx-YamcqDzr48/_buildManifest.js" defer=""></script><script src="/_next/static/kGKGnEKTTx-YamcqDzr48/_ssgManifest.js" defer=""></script><script src="/_next/static/kGKGnEKTTx-YamcqDzr48/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><header class="fixed top-0 py-4 left-0 right-0 h-auto px-10 shadow bg-white z-50"><nav><ul class="flex w-auto"><li class="mr-4 hover:text-yellow"><a href="/">é¦–é¡µ</a></li><li class="mx-4 hover:text-yellow"><a href="/categories">åˆ†ç±»</a></li><li class="mx-4 hover:text-yellow"><a href="/tags">æ ‡ç­¾</a></li><li class="ml-4 hover:text-yellow"><a href="/timeline">å½’æ¡£</a></li></ul></nav></header><main class="mt-20 mb-4 mx-auto justify-center w-2/3"><div class="mx-auto lg:max-w-5xl md:max-w-3xl"><article class="flex flex-col justify-around pb-16 px-4 mx-auto space-y-10 text-base"><div class="flex flex-col space-y-4"><h1 class="inline pt-10 text-4xl text-skin-primary">JavaScriptå¤ä¹ -Promise</h1><div class="text-sm space-x-2 text-skin-muted grid grid-cols-5"><span class="flex align-middle"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 inline-block mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>2024-04-07 19:38:54</span><span class="flex align-middle"><svg class="w-5 h-5 inline-block mr-1" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1903" width="20" height="20"><path d="M257.7 752c2 0 4-0.2 6-0.5L431.9 722c2-0.4 3.9-1.3 5.3-2.8l423.9-423.9c3.9-3.9 3.9-10.2 0-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2c-1.9 11.1 1.5 21.9 9.4 29.8 6.6 6.4 14.9 9.9 23.8 9.9z m67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z" p-id="1904"></path></svg>2024-04-09 10:30:28</span></div></div><div class="mt-8 flex"><div class="w-full flex-auto custom-markdown-body"><div class="markdown-body" id="write"><p>æ·±å…¥ç ”ç©¶ä¸€ä¸‹ <code>Promise</code></p>
<p>ğŸ¤”</p>

      <h2>
        <span class="prefix"></span>
        <span class="content">ä»¤äººç–‘æƒ‘çš„æ‰§è¡Œé¡ºåº</span>
        <span class="suffix"></span>
      </h2>
    <p>è§‚å¯Ÿä»¥ä¸‹ä»£ç ç‰‡æ®µ</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;promise1 resolve&#x27;</span>);
  <span class="hljs-title function_">resolve</span>();
}).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;promise1 then1&#x27;</span>);
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;promise2 resolve&#x27;</span>);
    <span class="hljs-title function_">resolve</span>();
  }).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;promise2 then1&#x27;</span>);
  }).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;promise2 then2&#x27;</span>);
  })
}).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;promise1 then2&#x27;</span>);
})
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;hello Promise&#x27;</span>);

<span class="hljs-comment">// promise1 resolve</span>
<span class="hljs-comment">// hello Promise</span>
<span class="hljs-comment">// promise1 then1</span>
<span class="hljs-comment">// promise2 resolve</span>
<span class="hljs-comment">// promise2 then1</span>
<span class="hljs-comment">// promise1 then2</span>
<span class="hljs-comment">// promise2 then2</span>
</code></pre>
<p>Q1: ä¸ºä»€ä¹ˆ <code>hello Promise</code> åœ¨è¾ƒå‰æ‰“å°ï¼Ÿ</p>
<p>A1: å› ä¸º <strong>éé‡å…¥æœŸçº¦æ–¹æ³•</strong> æœºåˆ¶ï¼Œå³ï¼š å½“ <code>Promise</code> è¿›å…¥ <code>Settled</code> çŠ¶æ€æ—¶ï¼Œä¸è¯¥çŠ¶æ€ç›¸å…³çš„å¤„ç†ç¨‹åºä»…ä»…ä¼šè¢«æ’æœŸï¼ˆè¿›å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼‰ï¼Œè€Œéç«‹å³æ‰§è¡Œã€‚è·Ÿåœ¨æ·»åŠ è¿™ä¸ªå¤„ç†ç¨‹åºçš„ä»£ç ä¹‹åçš„åŒæ­¥ä»£ç ä¸€å®šä¼šåœ¨å¤„ç†ç¨‹åºä¹‹å‰æ‰§è¡Œã€‚ <code>new Promise</code> ä¸­çš„ä»£ç æ˜¯åŒæ­¥çš„ï¼Œ <code>then</code> æ–¹æ³•ä¸­çš„å¤„ç†ç¨‹åºæ˜¯æ‰æ˜¯å¼‚æ­¥çš„ã€‚</p>
<p>Q2: ä¸ºä»€ä¹ˆ <code>promise2 then1</code> åœ¨ <code>promise1 then2</code> å‰æ‰“å°</p>
<p>A2: å½“æ‰“å° <code>promise2 resolve</code> åï¼Œæ­¤æ—¶ <code>promise2</code> è¿›å…¥ <code>Settled</code> çŠ¶æ€ï¼Œæ­¤æ—¶ä¼šå°† <code>promise2-then1</code> æ·»åŠ è¿›å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ³¨æ„æ­¤æ—¶ä»åœ¨<strong>æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­</strong>çš„ä»»åŠ¡ä¸­ï¼Œå› æ­¤ï¼Œæ¥ä¸‹æ¥ä¼šæ‰“å° <code>promise2 then1</code> ã€‚</p>
<p>Q3: ä¸ºä»€ä¹ˆ <code>promise1 then2</code> åœ¨ <code>promise2 then2</code> å‰æ‰“å°</p>
<p>A3: å½“æ‰“å°å®Œ <code>promise2 then1</code> æ—¶ï¼ŒæŒ‰ç†è¯´åº”è¯¥æ³¨å†Œ <code>promise2-then2</code> å›è°ƒï¼Œä½†ç¼–è¯‘å™¨ä¼šä¼˜åŒ–ï¼Œé˜²æ­¢ä¸€ä¸ª <code>Promise</code> å æ®è¿‡å¤šæ—¶é—´ã€‚å³<strong>å¦‚æœæœ‰å¤šä¸ªfulfilledçš„Promiseå®ä¾‹ï¼ŒåŒæ—¶æ‰§è¡Œthené“¾å¼è°ƒç”¨ï¼Œthenä¼šäº¤æ›¿æ‰§è¡Œã€‚</strong></p>

      <h2>
        <span class="prefix"></span>
        <span class="content">ä¸ºä»€ä¹ˆ Promise çŠ¶æ€ä¸å¯é€†</span>
        <span class="suffix"></span>
      </h2>
    <p>ç¡®ä¿ <code>Promise</code> çš„è¡Œä¸ºæ˜¯å¯é¢„æµ‹å’Œå¯é çš„ã€‚è¿™ä¸ªè®¾è®¡å†³å®šä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªåŸå› :</p>
<ul>
<li><p>ä¿è¯å¼‚æ­¥æ‰§è¡Œç»“æœçš„å¯é æ€§:ä¸€æ—¦ <code>Promise</code> çš„çŠ¶æ€è¢«æ”¹å˜( <code>fulfilled</code> æˆ– <code>rejected</code> ),å°±ä¸ä¼šå†å‘ç”Ÿå˜åŒ–ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿å¼‚æ­¥æ“ä½œçš„ç»“æœä¸€å®šä¼šè¢«å¯é åœ°ä¼ é€’ç»™åç»­çš„ then æˆ– catch å›è°ƒå‡½æ•°ã€‚</p>
</li>
<li><p>ç®€åŒ–é”™è¯¯å¤„ç†: <code>Promise</code> çš„çŠ¶æ€ä¸€æ—¦æ”¹å˜å°±ä¸å¯é€†,è¿™æ„å‘³ç€ä¸€ä¸ª <code>Promise</code> å¯¹è±¡åªä¼šè§¦å‘ä¸€æ¬¡ <code>then</code> æˆ– <code>catch</code> å›è°ƒã€‚è¿™ç®€åŒ–äº†é”™è¯¯å¤„ç†çš„é€»è¾‘,å¼€å‘è€…ä¸éœ€è¦æ‹…å¿ƒçŠ¶æ€å†æ¬¡æ”¹å˜è€Œå¼•å‘æ–°çš„é”™è¯¯ã€‚</p>
</li>
<li><p>é¿å…ç«æ€æ¡ä»¶: å¦‚æœ <code>Promise</code> çŠ¶æ€å¯é€†,å°±å¯èƒ½å‡ºç°ç«æ€æ¡ä»¶,å³å¤šä¸ªå¼‚æ­¥æ“ä½œåŒæ—¶ä¿®æ”¹ <code>Promise</code> çŠ¶æ€,å¯¼è‡´ç»“æœä¸å¯é¢„æµ‹ã€‚çŠ¶æ€ä¸å¯é€†å¯ä»¥é¿å…è¿™ç§æƒ…å†µçš„å‘ç”Ÿã€‚</p>
</li>
<li><p>æ›´å¥½çš„å¹¶è¡Œå’Œä¸²è¡Œç»„åˆ: <code>Promise</code> çš„çŠ¶æ€ä¸å¯é€†ä½¿å¾—å¤šä¸ª <code>Promise</code> çš„å¹¶è¡Œå’Œä¸²è¡Œç»„åˆå˜å¾—æ›´åŠ ç®€å•å’Œå¯é ã€‚å¼€å‘è€…å¯ä»¥æ”¾å¿ƒåœ°ä½¿ç”¨ <code>Promise.all</code> ã€ <code>Promise.race</code> ç­‰æ–¹æ³•,ä¸å¿…æ‹…å¿ƒçŠ¶æ€çš„å˜åŒ–ä¼šå½±å“ç»“æœã€‚</p>
</li>
</ul>
<p>æ€»ä¹‹, <code>Promise</code> çŠ¶æ€ä¸å¯é€†æ˜¯ä¸ºäº†ç¡®ä¿å¼‚æ­¥ç¼–ç¨‹ä¸­çš„å¯é æ€§å’Œå¯é¢„æµ‹æ€§,è¿™æ˜¯ <code>Promise</code> è®¾è®¡çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ã€‚è™½ç„¶æœ‰æ—¶ä¼šç»™å¼€å‘å¸¦æ¥ä¸€äº›é™åˆ¶,ä½†æ€»çš„æ¥è¯´è¿™æ˜¯ä¸€ä¸ªåˆç†çš„è®¾è®¡å†³å®šã€‚</p>

      <h2>
        <span class="prefix"></span>
        <span class="content">ä¸ºä»€ä¹ˆ try/catch æ— æ³•æ•è· Promise.reject</span>
        <span class="suffix"></span>
      </h2>
    <p>å¦‚ä¸‹æ‰€ç¤º</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">try</span> {
  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;foo&quot;</span>));
} <span class="hljs-keyword">catch</span> (e) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e);
}

<span class="hljs-comment">// Uncaught (in promise) Error: foo</span>
</code></pre>
<p><code>Promise.reject</code> å¹¶æ²¡æœ‰æŠ›åˆ°æ‰§è¡ŒåŒæ­¥ä»£ç çš„çº¿ç¨‹é‡Œï¼Œè€Œæ˜¯é€šè¿‡æµè§ˆå™¨å¼‚æ­¥æ¶ˆæ¯é˜Ÿåˆ—æ¥å¤„ç†çš„ã€‚å› æ­¤ï¼Œä»£ç ä¸€æ—¦ä»¥å¼‚æ­¥æ¨¡å¼æ‰§è¡Œï¼Œåˆ™å”¯ä¸€ä¸ä¹‹äº¤äº’çš„æ–¹å¼å°±æ˜¯ä½¿ç”¨å¼‚æ­¥ç»“æ„--æ›´å…·ä½“åœ°è¯´ï¼Œå°±æ˜¯ <code>Promise</code> çš„æ–¹æ³•</p>

      <h2>
        <span class="prefix"></span>
        <span class="content">ä¸ºä»€ä¹ˆ Promise ä¸å¯å–æ¶ˆ</span>
        <span class="suffix"></span>
      </h2>
    <blockquote>
<p>æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°æœŸçº¦æ­£åœ¨å¤„ç†è¿‡ç¨‹ä¸­ï¼Œç¨‹åºå´ä¸å†éœ€è¦å…¶ç»“æœçš„æƒ…å½¢ã€‚è¿™æ—¶å€™å¦‚æœèƒ½å¤Ÿå–æ¶ˆæœŸçº¦å°±å¥½äº†ã€‚æŸäº›ç¬¬ä¸‰æ–¹åº“ï¼Œæ¯”å¦‚Bluebirdï¼Œå°±æä¾›äº†è¿™ä¸ªç‰¹æ€§ã€‚å®é™…ä¸Šï¼ŒTC39 å§”å‘˜ä¼šä¹Ÿæ›¾å‡†å¤‡å¢åŠ è¿™ä¸ªç‰¹æ€§ï¼Œä½†ç›¸å…³ææ¡ˆæœ€ç»ˆè¢«æ’¤å›äº†ã€‚ç»“æœï¼ŒES6æœŸçº¦è¢«è®¤ä¸ºæ˜¯â€œæ¿€è¿›çš„â€: åªè¦æœŸçº¦çš„é€»è¾‘å¼€å§‹æ‰§è¡Œï¼Œå°±æ²¡æœ‰åŠæ³•é˜»æ­¢å®ƒæ‰§è¡Œåˆ°å®Œæˆ --JSé«˜ç¨‹4</p>
</blockquote>

      <h2>
        <span class="prefix"></span>
        <span class="content">ä¸€ä¸ª Promise ä¸€ç›´æ²¡æœ‰è¢« resolve æˆ– reject ä¼šé€ æˆå†…å­˜æ³„æ¼å—</span>
        <span class="suffix"></span>
      </h2>
    <p>åˆ†æƒ…å†µï¼Œ <code>Promise</code> å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼Œä¹Ÿéµå¾ªåƒåœ¾å›æ”¶æœºåˆ¶ï¼Œå½“æ²¡æœ‰å¼•ç”¨æ—¶ï¼Œåœ¨åˆé€‚çš„æ—¶æœºå³è¢«å›æ”¶ã€‚ä½†ä¸€äº›ä¸è§„èŒƒçš„å†™æ³•ä¼šé€ æˆå†…å­˜æ³„æ¼ï¼Œä½†å´ä¸æ˜¯ <code>Promise</code> å¼•èµ·çš„ï¼Œæ¯”å¦‚ä¸‹é¢çš„ğŸŒ°</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
  <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">100000000</span>, <span class="hljs-literal">null</span>);
});
</code></pre>
<p>è¿™ä¸ª <code>Promise</code> å®ä¾‹å¯èƒ½ä¼šé•¿æ—¶é—´ä¸ä¼šè¢«å›æ”¶ä»è€Œé€ æˆå†…å­˜æ³„æ¼ï¼Œä½†æœ¬è´¨åŸå› åœ¨äº <code>setTimeout</code> å†…éƒ¨å¼•ç”¨äº† <code>resolve</code> å¯¼è‡´ <code>Promise</code> æ— æ³•è¢«å›æ”¶</p>

      <h2>
        <span class="prefix"></span>
        <span class="content">å‚è€ƒ</span>
        <span class="suffix"></span>
      </h2>
    <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Using_promises#%E6%97%B6%E5%BA%8F">MDN-ä½¿ç”¨Promise-æ—¶åº</a></p>
</div></div></div></article></div></main><footer class="flex flex-col items-center justify-center leading-8 text-sm w-full py-2 border-t text-skin-muted"><p>Designed &amp; developed by<a class="ml-1 text-yellow" target="_blank" href="https://github.com/mrrs878" rel="noreferrer">Mr.RS</a></p><p>2024</p></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"JavaScriptå¤ä¹ -Promise","tags":["JavaScript","Promise","Generator","Promise"],"categories":"2024å¤ä¹ ","description":"æ·±å…¥ç ”ç©¶ä¸€ä¸‹ `Promise`\n\nğŸ¤”\n\n## ä»¤äººç–‘æƒ‘çš„æ‰§è¡Œé¡ºåº\n\nè§‚å¯Ÿä»¥ä¸‹ä»£ç ç‰‡æ®µ\n\n``` js\nnew Promise((resolve) =\u003e {\n  console.log('promise1 resolve');\n  resolve();\n}).then(() =\u003e {\n  console.log('promise1 then1');\n  new Promise((resolve","createDate":"2024-04-07 19:38:54","updateDate":"2024-04-09 10:30:28","body":"\u003cp\u003eæ·±å…¥ç ”ç©¶ä¸€ä¸‹ \u003ccode\u003ePromise\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eğŸ¤”\u003c/p\u003e\n\n      \u003ch2\u003e\n        \u003cspan class=\"prefix\"\u003e\u003c/span\u003e\n        \u003cspan class=\"content\"\u003eä»¤äººç–‘æƒ‘çš„æ‰§è¡Œé¡ºåº\u003c/span\u003e\n        \u003cspan class=\"suffix\"\u003e\u003c/span\u003e\n      \u003c/h2\u003e\n    \u003cp\u003eè§‚å¯Ÿä»¥ä¸‹ä»£ç ç‰‡æ®µ\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eresolve\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;promise1 resolve\u0026#x27;\u003c/span\u003e);\n  \u003cspan class=\"hljs-title function_\"\u003eresolve\u003c/span\u003e();\n}).\u003cspan class=\"hljs-title function_\"\u003ethen\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e() =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;promise1 then1\u0026#x27;\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eresolve\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;promise2 resolve\u0026#x27;\u003c/span\u003e);\n    \u003cspan class=\"hljs-title function_\"\u003eresolve\u003c/span\u003e();\n  }).\u003cspan class=\"hljs-title function_\"\u003ethen\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;promise2 then1\u0026#x27;\u003c/span\u003e);\n  }).\u003cspan class=\"hljs-title function_\"\u003ethen\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;promise2 then2\u0026#x27;\u003c/span\u003e);\n  })\n}).\u003cspan class=\"hljs-title function_\"\u003ethen\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e() =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;promise1 then2\u0026#x27;\u003c/span\u003e);\n})\n\u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;hello Promise\u0026#x27;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// promise1 resolve\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// hello Promise\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// promise1 then1\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// promise2 resolve\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// promise2 then1\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// promise1 then2\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// promise2 then2\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eQ1: ä¸ºä»€ä¹ˆ \u003ccode\u003ehello Promise\u003c/code\u003e åœ¨è¾ƒå‰æ‰“å°ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eA1: å› ä¸º \u003cstrong\u003eéé‡å…¥æœŸçº¦æ–¹æ³•\u003c/strong\u003e æœºåˆ¶ï¼Œå³ï¼š å½“ \u003ccode\u003ePromise\u003c/code\u003e è¿›å…¥ \u003ccode\u003eSettled\u003c/code\u003e çŠ¶æ€æ—¶ï¼Œä¸è¯¥çŠ¶æ€ç›¸å…³çš„å¤„ç†ç¨‹åºä»…ä»…ä¼šè¢«æ’æœŸï¼ˆè¿›å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼‰ï¼Œè€Œéç«‹å³æ‰§è¡Œã€‚è·Ÿåœ¨æ·»åŠ è¿™ä¸ªå¤„ç†ç¨‹åºçš„ä»£ç ä¹‹åçš„åŒæ­¥ä»£ç ä¸€å®šä¼šåœ¨å¤„ç†ç¨‹åºä¹‹å‰æ‰§è¡Œã€‚ \u003ccode\u003enew Promise\u003c/code\u003e ä¸­çš„ä»£ç æ˜¯åŒæ­¥çš„ï¼Œ \u003ccode\u003ethen\u003c/code\u003e æ–¹æ³•ä¸­çš„å¤„ç†ç¨‹åºæ˜¯æ‰æ˜¯å¼‚æ­¥çš„ã€‚\u003c/p\u003e\n\u003cp\u003eQ2: ä¸ºä»€ä¹ˆ \u003ccode\u003epromise2 then1\u003c/code\u003e åœ¨ \u003ccode\u003epromise1 then2\u003c/code\u003e å‰æ‰“å°\u003c/p\u003e\n\u003cp\u003eA2: å½“æ‰“å° \u003ccode\u003epromise2 resolve\u003c/code\u003e åï¼Œæ­¤æ—¶ \u003ccode\u003epromise2\u003c/code\u003e è¿›å…¥ \u003ccode\u003eSettled\u003c/code\u003e çŠ¶æ€ï¼Œæ­¤æ—¶ä¼šå°† \u003ccode\u003epromise2-then1\u003c/code\u003e æ·»åŠ è¿›å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ³¨æ„æ­¤æ—¶ä»åœ¨\u003cstrong\u003eæ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­\u003c/strong\u003eçš„ä»»åŠ¡ä¸­ï¼Œå› æ­¤ï¼Œæ¥ä¸‹æ¥ä¼šæ‰“å° \u003ccode\u003epromise2 then1\u003c/code\u003e ã€‚\u003c/p\u003e\n\u003cp\u003eQ3: ä¸ºä»€ä¹ˆ \u003ccode\u003epromise1 then2\u003c/code\u003e åœ¨ \u003ccode\u003epromise2 then2\u003c/code\u003e å‰æ‰“å°\u003c/p\u003e\n\u003cp\u003eA3: å½“æ‰“å°å®Œ \u003ccode\u003epromise2 then1\u003c/code\u003e æ—¶ï¼ŒæŒ‰ç†è¯´åº”è¯¥æ³¨å†Œ \u003ccode\u003epromise2-then2\u003c/code\u003e å›è°ƒï¼Œä½†ç¼–è¯‘å™¨ä¼šä¼˜åŒ–ï¼Œé˜²æ­¢ä¸€ä¸ª \u003ccode\u003ePromise\u003c/code\u003e å æ®è¿‡å¤šæ—¶é—´ã€‚å³\u003cstrong\u003eå¦‚æœæœ‰å¤šä¸ªfulfilledçš„Promiseå®ä¾‹ï¼ŒåŒæ—¶æ‰§è¡Œthené“¾å¼è°ƒç”¨ï¼Œthenä¼šäº¤æ›¿æ‰§è¡Œã€‚\u003c/strong\u003e\u003c/p\u003e\n\n      \u003ch2\u003e\n        \u003cspan class=\"prefix\"\u003e\u003c/span\u003e\n        \u003cspan class=\"content\"\u003eä¸ºä»€ä¹ˆ Promise çŠ¶æ€ä¸å¯é€†\u003c/span\u003e\n        \u003cspan class=\"suffix\"\u003e\u003c/span\u003e\n      \u003c/h2\u003e\n    \u003cp\u003eç¡®ä¿ \u003ccode\u003ePromise\u003c/code\u003e çš„è¡Œä¸ºæ˜¯å¯é¢„æµ‹å’Œå¯é çš„ã€‚è¿™ä¸ªè®¾è®¡å†³å®šä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªåŸå› :\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003eä¿è¯å¼‚æ­¥æ‰§è¡Œç»“æœçš„å¯é æ€§:ä¸€æ—¦ \u003ccode\u003ePromise\u003c/code\u003e çš„çŠ¶æ€è¢«æ”¹å˜( \u003ccode\u003efulfilled\u003c/code\u003e æˆ– \u003ccode\u003erejected\u003c/code\u003e ),å°±ä¸ä¼šå†å‘ç”Ÿå˜åŒ–ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿å¼‚æ­¥æ“ä½œçš„ç»“æœä¸€å®šä¼šè¢«å¯é åœ°ä¼ é€’ç»™åç»­çš„ then æˆ– catch å›è°ƒå‡½æ•°ã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eç®€åŒ–é”™è¯¯å¤„ç†: \u003ccode\u003ePromise\u003c/code\u003e çš„çŠ¶æ€ä¸€æ—¦æ”¹å˜å°±ä¸å¯é€†,è¿™æ„å‘³ç€ä¸€ä¸ª \u003ccode\u003ePromise\u003c/code\u003e å¯¹è±¡åªä¼šè§¦å‘ä¸€æ¬¡ \u003ccode\u003ethen\u003c/code\u003e æˆ– \u003ccode\u003ecatch\u003c/code\u003e å›è°ƒã€‚è¿™ç®€åŒ–äº†é”™è¯¯å¤„ç†çš„é€»è¾‘,å¼€å‘è€…ä¸éœ€è¦æ‹…å¿ƒçŠ¶æ€å†æ¬¡æ”¹å˜è€Œå¼•å‘æ–°çš„é”™è¯¯ã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eé¿å…ç«æ€æ¡ä»¶: å¦‚æœ \u003ccode\u003ePromise\u003c/code\u003e çŠ¶æ€å¯é€†,å°±å¯èƒ½å‡ºç°ç«æ€æ¡ä»¶,å³å¤šä¸ªå¼‚æ­¥æ“ä½œåŒæ—¶ä¿®æ”¹ \u003ccode\u003ePromise\u003c/code\u003e çŠ¶æ€,å¯¼è‡´ç»“æœä¸å¯é¢„æµ‹ã€‚çŠ¶æ€ä¸å¯é€†å¯ä»¥é¿å…è¿™ç§æƒ…å†µçš„å‘ç”Ÿã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eæ›´å¥½çš„å¹¶è¡Œå’Œä¸²è¡Œç»„åˆ: \u003ccode\u003ePromise\u003c/code\u003e çš„çŠ¶æ€ä¸å¯é€†ä½¿å¾—å¤šä¸ª \u003ccode\u003ePromise\u003c/code\u003e çš„å¹¶è¡Œå’Œä¸²è¡Œç»„åˆå˜å¾—æ›´åŠ ç®€å•å’Œå¯é ã€‚å¼€å‘è€…å¯ä»¥æ”¾å¿ƒåœ°ä½¿ç”¨ \u003ccode\u003ePromise.all\u003c/code\u003e ã€ \u003ccode\u003ePromise.race\u003c/code\u003e ç­‰æ–¹æ³•,ä¸å¿…æ‹…å¿ƒçŠ¶æ€çš„å˜åŒ–ä¼šå½±å“ç»“æœã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eæ€»ä¹‹, \u003ccode\u003ePromise\u003c/code\u003e çŠ¶æ€ä¸å¯é€†æ˜¯ä¸ºäº†ç¡®ä¿å¼‚æ­¥ç¼–ç¨‹ä¸­çš„å¯é æ€§å’Œå¯é¢„æµ‹æ€§,è¿™æ˜¯ \u003ccode\u003ePromise\u003c/code\u003e è®¾è®¡çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ã€‚è™½ç„¶æœ‰æ—¶ä¼šç»™å¼€å‘å¸¦æ¥ä¸€äº›é™åˆ¶,ä½†æ€»çš„æ¥è¯´è¿™æ˜¯ä¸€ä¸ªåˆç†çš„è®¾è®¡å†³å®šã€‚\u003c/p\u003e\n\n      \u003ch2\u003e\n        \u003cspan class=\"prefix\"\u003e\u003c/span\u003e\n        \u003cspan class=\"content\"\u003eä¸ºä»€ä¹ˆ try/catch æ— æ³•æ•è· Promise.reject\u003c/span\u003e\n        \u003cspan class=\"suffix\"\u003e\u003c/span\u003e\n      \u003c/h2\u003e\n    \u003cp\u003eå¦‚ä¸‹æ‰€ç¤º\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n  \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ereject\u003c/span\u003e(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eError\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;foo\u0026quot;\u003c/span\u003e));\n} \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (e) {\n  \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(e);\n}\n\n\u003cspan class=\"hljs-comment\"\u003e// Uncaught (in promise) Error: foo\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003ePromise.reject\u003c/code\u003e å¹¶æ²¡æœ‰æŠ›åˆ°æ‰§è¡ŒåŒæ­¥ä»£ç çš„çº¿ç¨‹é‡Œï¼Œè€Œæ˜¯é€šè¿‡æµè§ˆå™¨å¼‚æ­¥æ¶ˆæ¯é˜Ÿåˆ—æ¥å¤„ç†çš„ã€‚å› æ­¤ï¼Œä»£ç ä¸€æ—¦ä»¥å¼‚æ­¥æ¨¡å¼æ‰§è¡Œï¼Œåˆ™å”¯ä¸€ä¸ä¹‹äº¤äº’çš„æ–¹å¼å°±æ˜¯ä½¿ç”¨å¼‚æ­¥ç»“æ„--æ›´å…·ä½“åœ°è¯´ï¼Œå°±æ˜¯ \u003ccode\u003ePromise\u003c/code\u003e çš„æ–¹æ³•\u003c/p\u003e\n\n      \u003ch2\u003e\n        \u003cspan class=\"prefix\"\u003e\u003c/span\u003e\n        \u003cspan class=\"content\"\u003eä¸ºä»€ä¹ˆ Promise ä¸å¯å–æ¶ˆ\u003c/span\u003e\n        \u003cspan class=\"suffix\"\u003e\u003c/span\u003e\n      \u003c/h2\u003e\n    \u003cblockquote\u003e\n\u003cp\u003eæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°æœŸçº¦æ­£åœ¨å¤„ç†è¿‡ç¨‹ä¸­ï¼Œç¨‹åºå´ä¸å†éœ€è¦å…¶ç»“æœçš„æƒ…å½¢ã€‚è¿™æ—¶å€™å¦‚æœèƒ½å¤Ÿå–æ¶ˆæœŸçº¦å°±å¥½äº†ã€‚æŸäº›ç¬¬ä¸‰æ–¹åº“ï¼Œæ¯”å¦‚Bluebirdï¼Œå°±æä¾›äº†è¿™ä¸ªç‰¹æ€§ã€‚å®é™…ä¸Šï¼ŒTC39 å§”å‘˜ä¼šä¹Ÿæ›¾å‡†å¤‡å¢åŠ è¿™ä¸ªç‰¹æ€§ï¼Œä½†ç›¸å…³ææ¡ˆæœ€ç»ˆè¢«æ’¤å›äº†ã€‚ç»“æœï¼ŒES6æœŸçº¦è¢«è®¤ä¸ºæ˜¯â€œæ¿€è¿›çš„â€: åªè¦æœŸçº¦çš„é€»è¾‘å¼€å§‹æ‰§è¡Œï¼Œå°±æ²¡æœ‰åŠæ³•é˜»æ­¢å®ƒæ‰§è¡Œåˆ°å®Œæˆ --JSé«˜ç¨‹4\u003c/p\u003e\n\u003c/blockquote\u003e\n\n      \u003ch2\u003e\n        \u003cspan class=\"prefix\"\u003e\u003c/span\u003e\n        \u003cspan class=\"content\"\u003eä¸€ä¸ª Promise ä¸€ç›´æ²¡æœ‰è¢« resolve æˆ– reject ä¼šé€ æˆå†…å­˜æ³„æ¼å—\u003c/span\u003e\n        \u003cspan class=\"suffix\"\u003e\u003c/span\u003e\n      \u003c/h2\u003e\n    \u003cp\u003eåˆ†æƒ…å†µï¼Œ \u003ccode\u003ePromise\u003c/code\u003e å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼Œä¹Ÿéµå¾ªåƒåœ¾å›æ”¶æœºåˆ¶ï¼Œå½“æ²¡æœ‰å¼•ç”¨æ—¶ï¼Œåœ¨åˆé€‚çš„æ—¶æœºå³è¢«å›æ”¶ã€‚ä½†ä¸€äº›ä¸è§„èŒƒçš„å†™æ³•ä¼šé€ æˆå†…å­˜æ³„æ¼ï¼Œä½†å´ä¸æ˜¯ \u003ccode\u003ePromise\u003c/code\u003e å¼•èµ·çš„ï¼Œæ¯”å¦‚ä¸‹é¢çš„ğŸŒ°\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e p = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eresolve\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-built_in\"\u003esetTimeout\u003c/span\u003e(resolve, \u003cspan class=\"hljs-number\"\u003e100000000\u003c/span\u003e, \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e);\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eè¿™ä¸ª \u003ccode\u003ePromise\u003c/code\u003e å®ä¾‹å¯èƒ½ä¼šé•¿æ—¶é—´ä¸ä¼šè¢«å›æ”¶ä»è€Œé€ æˆå†…å­˜æ³„æ¼ï¼Œä½†æœ¬è´¨åŸå› åœ¨äº \u003ccode\u003esetTimeout\u003c/code\u003e å†…éƒ¨å¼•ç”¨äº† \u003ccode\u003eresolve\u003c/code\u003e å¯¼è‡´ \u003ccode\u003ePromise\u003c/code\u003e æ— æ³•è¢«å›æ”¶\u003c/p\u003e\n\n      \u003ch2\u003e\n        \u003cspan class=\"prefix\"\u003e\u003c/span\u003e\n        \u003cspan class=\"content\"\u003eå‚è€ƒ\u003c/span\u003e\n        \u003cspan class=\"suffix\"\u003e\u003c/span\u003e\n      \u003c/h2\u003e\n    \u003cp\u003e\u003ca href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Using_promises#%E6%97%B6%E5%BA%8F\"\u003eMDN-ä½¿ç”¨Promise-æ—¶åº\u003c/a\u003e\u003c/p\u003e\n"}},"__N_SSG":true},"page":"/post/[title]","query":{"title":"JavaScriptå¤ä¹ -Promise"},"buildId":"kGKGnEKTTx-YamcqDzr48","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>