<!DOCTYPE html><html><head><link rel="icon" href="https://mrrsblog.oss-cn-shanghai.aliyuncs.com/avatar.jpg"/><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Mr.RS的个人博客-go-gin-基础</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/c8fbe853cdba47e0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c8fbe853cdba47e0.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-b927671265afed5e.js" defer=""></script><script src="/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/_next/static/chunks/main-1e7421553b9673ee.js" defer=""></script><script src="/_next/static/chunks/pages/_app-ca6aae25bc99a05f.js" defer=""></script><script src="/_next/static/chunks/899-1cd3a59abdb8ea18.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Btitle%5D-216eae5ddb3b6d26.js" defer=""></script><script src="/_next/static/0rgYVWUn35NqgQTZKSNOn/_buildManifest.js" defer=""></script><script src="/_next/static/0rgYVWUn35NqgQTZKSNOn/_ssgManifest.js" defer=""></script><script src="/_next/static/0rgYVWUn35NqgQTZKSNOn/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><header class="fixed top-0 py-4 left-0 right-0 h-auto px-10 shadow bg-white z-50"><nav><ul class="flex w-auto"><li class="mr-4 hover:text-yellow"><a href="/">首页</a></li><li class="mx-4 hover:text-yellow"><a href="/categories">分类</a></li><li class="mx-4 hover:text-yellow"><a href="/tags">标签</a></li><li class="ml-4 hover:text-yellow"><a href="/timeline">归档</a></li></ul></nav></header><main class="mt-20 mb-4 mx-auto justify-center w-2/3"><div class="mx-auto lg:max-w-5xl md:max-w-3xl"><article class="flex flex-col justify-around pb-16 px-4 mx-auto space-y-10 text-base"><div class="flex flex-col space-y-4"><h1 class="inline pt-10 text-4xl text-skin-primary">go-gin-基础</h1><div class="text-sm space-x-2 text-skin-muted grid grid-cols-5"><span class="flex align-middle"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 inline-block mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>2020-01-14 14:05:44</span><span class="flex align-middle"><svg class="w-5 h-5 inline-block mr-1" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1903" width="20" height="20"><path d="M257.7 752c2 0 4-0.2 6-0.5L431.9 722c2-0.4 3.9-1.3 5.3-2.8l423.9-423.9c3.9-3.9 3.9-10.2 0-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2c-1.9 11.1 1.5 21.9 9.4 29.8 6.6 6.4 14.9 9.9 23.8 9.9z m67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z" p-id="1904"></path></svg>10/1/2021, 3:34:43 AM</span><span class="flex align-middle"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 inline-block mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>44</span></div></div><div class="mt-8 flex"><div class="w-full flex-auto custom-markdown-body"><div class="markdown-body" id="write"><h1 id="获取get-path参数">获取<code>GET</code> <code>path</code>参数</h1>
<pre><code class="hljs language-go">  <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    r := gin.Default()
    r.GET(<span class="hljs-string">&quot;/index/:id&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(context *gin.Context)</span></span>{
      r.JOSN(http.StatusOK, gin.H{
        <span class="hljs-string">&quot;id&quot;</span>: context.Param(<span class="hljs-string">&quot;id&quot;</span>),
      })
    })
  }
</code></pre>
<h1 id="获取post-raw-json参数">获取<code>POST</code> <code>raw json</code>参数</h1>
<ol>
<li>定义一个公用<code>struct</code>，用于标准返回数据格式<pre><code class="hljs language-go">  <span class="hljs-keyword">type</span> ResBodyS <span class="hljs-keyword">struct</span> {
 ErrCode <span class="hljs-type">int</span> <span class="hljs-string">`json:&quot;errCode&quot;`</span>
 Desc <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;description&quot; binding:&quot;required&quot;`</span> <span class="hljs-comment">//参数存在性校验</span>
  }
</code></pre>
</li>
<li>定义针对于特定接口的<code>struct</code><pre><code class="hljs language-go">  <span class="hljs-keyword">type</span> IndexReqBodyS <span class="hljs-keyword">struct</span> {
 ResBodyS
 Data <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;index&quot;`</span>
  }
</code></pre>
</li>
<li>使用<code>context.BindJSON()</code>解析请求中的body参数<pre><code class="hljs language-go">  <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
 r := gin,Default()
 r.POST(<span class="hljs-string">&quot;/index&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(context *gin.Context)</span></span>{
   <span class="hljs-keyword">var</span> reqInfo IndexReqBodyS
   err := context.BindJSON(&amp;reqInfo)
   <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
     fmt.PrintFln(<span class="hljs-string">&quot;parse json data error! err:&quot;</span>, err)
     <span class="hljs-keyword">return</span>
   }
   context.JSON(http.StatusOK, reqInfo)
 })
 r.Run(<span class="hljs-string">&quot;:9090&quot;</span>)
  }
</code></pre>
</li>
</ol>
<h1 id="捕获异常">捕获异常</h1>
<p>在 Go 中异常就是<code>panic</code>，它是在程序运行的时候抛出的，当<code>panic</code>抛出之后，如果在程序里没有添加任何保护措施的话，控制台就会在打印出<code>panic</code>的详细情况，然后终止运行。
当程序发生<code>panic</code>后，在<code>defer</code>(延迟函数) 内部可以调用<code>recover</code>进行捕获。</p>
<pre><code class="hljs language-go">  <span class="hljs-keyword">defer</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
    err := <span class="hljs-built_in">recover</span>();
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
      fmp.Println(err)
    }
  }
</code></pre>
<h1 id="单元测试">单元测试</h1>
<p>使用<code>net/http/httptest</code>包
与原生测试相比，使用<code>gin.Engine.ServeHTTP</code>发送请求(原生使用<code>http.HandlerFunc.ServeHTTP</code>)</p>
<pre><code class="hljs language-go"><span class="hljs-keyword">var</span> engine *gin.Engine

<span class="hljs-keyword">const</span> accessToken = <span class="hljs-string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1ODA5OTE1NTUsInVzZXJfaWQiOjE4LCJuYW1lIjoidGVzdDEifQ.900X9t3qveW0NGn3_FhYxHXlgsLAdl1BkjfKxNlBNyE&quot;</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">CreateRequest</span><span class="hljs-params">(method constant.HttpRequestMethod, url <span class="hljs-type">string</span>, params <span class="hljs-keyword">interface</span>{})</span></span> (status constant.ResultCode, resBody *util.ResS, returnError <span class="hljs-type">error</span>) {
    <span class="hljs-keyword">if</span> engine == <span class="hljs-literal">nil</span> {
        gin.SetMode(gin.ReleaseMode)
        engine = gin.New()
        database.SetUpDatabase()
        controller.SetupRouter(engine)
    }

    <span class="hljs-keyword">var</span> (
        rr        = httptest.NewRecorder()
        req       = <span class="hljs-built_in">new</span>(http.Request)
        err <span class="hljs-type">error</span> = <span class="hljs-literal">nil</span>
    )
    <span class="hljs-keyword">if</span> params != <span class="hljs-literal">nil</span> {
        tmp, err := json.Encode(params)
        <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
            <span class="hljs-keyword">return</span> constant.FAILED, <span class="hljs-literal">nil</span>, err
        }
        req, err = http.NewRequest(<span class="hljs-type">string</span>(method), url, bytes.NewBuffer([]<span class="hljs-type">byte</span>(tmp)))
    } <span class="hljs-keyword">else</span> {
        req, err = http.NewRequest(<span class="hljs-type">string</span>(method), url, <span class="hljs-literal">nil</span>)
    }
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> constant.FAILED, <span class="hljs-literal">nil</span>, err
    }

    req.Header.Add(<span class="hljs-string">&quot;Authorization&quot;</span>, fmt.Sprintf(<span class="hljs-string">&quot;Bear %s&quot;</span>, accessToken))
    engine.ServeHTTP(rr, req)

    formatRes := util.ResS{}
    err = json.Decode(rr.Body.Bytes(), &amp;formatRes)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> constant.FAILED, <span class="hljs-literal">nil</span>, err
    }
    <span class="hljs-keyword">return</span> constant.SUCCESS, &amp;formatRes, <span class="hljs-literal">nil</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">CreateTest</span><span class="hljs-params">(t *testing.T, method constant.HttpRequestMethod, url <span class="hljs-type">string</span>, params <span class="hljs-keyword">interface</span>{})</span></span> {
    _, resBody, err := CreateRequest(method, url, params)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        t.Errorf(<span class="hljs-string">&quot;got error: %s&quot;</span>, err.Error())
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-keyword">if</span> resBody != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">if</span> resBody.Code != constant.SUCCESS {
            t.Errorf(<span class="hljs-string">&quot;GetInfo test failed, got: %v, info: %s&quot;</span>, resBody.Data, resBody.Message)
        }
    }
}
</code></pre>
</div></div></div></article></div></main><footer class="flex flex-col items-center justify-center leading-8 text-sm w-full py-2 border-t text-skin-muted"><p>Designed &amp; developed by<a class="ml-1 text-yellow" target="_blank" href="https://github.com/mrrs878" rel="noreferrer">Mr.RS</a></p><p>©<!-- --> <!-- -->2022</p></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"go-gin-基础","tags":["go","gin"],"categories":"go","description":"# 获取`GET` `path`参数\n``` go\n  func main() {\n    r := gin.Default()\n    r.GET(\"/index/:id\", func(context *gin.Context){\n      r.JOSN(http.StatusOK, gin.H{\n        \"id\": context.Param(\"id\"),\n      })","createDate":"2020-01-14 14:05:44","updateDate":"10/1/2021, 3:34:43 AM","body":"\u003ch1 id=\"获取get-path参数\"\u003e获取\u003ccode\u003eGET\u003c/code\u003e \u003ccode\u003epath\u003c/code\u003e参数\u003c/h1\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-go\"\u003e  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003emain\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e\u003c/span\u003e {\n    r := gin.Default()\n    r.GET(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/index/:id\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunc\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(context *gin.Context)\u003c/span\u003e\u003c/span\u003e{\n      r.JOSN(http.StatusOK, gin.H{\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;id\u0026quot;\u003c/span\u003e: context.Param(\u003cspan class=\"hljs-string\"\u003e\u0026quot;id\u0026quot;\u003c/span\u003e),\n      })\n    })\n  }\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1 id=\"获取post-raw-json参数\"\u003e获取\u003ccode\u003ePOST\u003c/code\u003e \u003ccode\u003eraw json\u003c/code\u003e参数\u003c/h1\u003e\n\u003col\u003e\n\u003cli\u003e定义一个公用\u003ccode\u003estruct\u003c/code\u003e，用于标准返回数据格式\u003cpre\u003e\u003ccode class=\"hljs language-go\"\u003e  \u003cspan class=\"hljs-keyword\"\u003etype\u003c/span\u003e ResBodyS \u003cspan class=\"hljs-keyword\"\u003estruct\u003c/span\u003e {\n ErrCode \u003cspan class=\"hljs-type\"\u003eint\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e`json:\u0026quot;errCode\u0026quot;`\u003c/span\u003e\n Desc \u003cspan class=\"hljs-type\"\u003estring\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e`json:\u0026quot;description\u0026quot; binding:\u0026quot;required\u0026quot;`\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e//参数存在性校验\u003c/span\u003e\n  }\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e定义针对于特定接口的\u003ccode\u003estruct\u003c/code\u003e\u003cpre\u003e\u003ccode class=\"hljs language-go\"\u003e  \u003cspan class=\"hljs-keyword\"\u003etype\u003c/span\u003e IndexReqBodyS \u003cspan class=\"hljs-keyword\"\u003estruct\u003c/span\u003e {\n ResBodyS\n Data \u003cspan class=\"hljs-type\"\u003estring\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e`json:\u0026quot;index\u0026quot;`\u003c/span\u003e\n  }\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e使用\u003ccode\u003econtext.BindJSON()\u003c/code\u003e解析请求中的body参数\u003cpre\u003e\u003ccode class=\"hljs language-go\"\u003e  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003emain\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e\u003c/span\u003e {\n r := gin,Default()\n r.POST(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/index\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunc\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(context *gin.Context)\u003c/span\u003e\u003c/span\u003e{\n   \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e reqInfo IndexReqBodyS\n   err := context.BindJSON(\u0026amp;reqInfo)\n   \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e err != \u003cspan class=\"hljs-literal\"\u003enil\u003c/span\u003e {\n     fmt.PrintFln(\u003cspan class=\"hljs-string\"\u003e\u0026quot;parse json data error! err:\u0026quot;\u003c/span\u003e, err)\n     \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e\n   }\n   context.JSON(http.StatusOK, reqInfo)\n })\n r.Run(\u003cspan class=\"hljs-string\"\u003e\u0026quot;:9090\u0026quot;\u003c/span\u003e)\n  }\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch1 id=\"捕获异常\"\u003e捕获异常\u003c/h1\u003e\n\u003cp\u003e在 Go 中异常就是\u003ccode\u003epanic\u003c/code\u003e，它是在程序运行的时候抛出的，当\u003ccode\u003epanic\u003c/code\u003e抛出之后，如果在程序里没有添加任何保护措施的话，控制台就会在打印出\u003ccode\u003epanic\u003c/code\u003e的详细情况，然后终止运行。\n当程序发生\u003ccode\u003epanic\u003c/code\u003e后，在\u003ccode\u003edefer\u003c/code\u003e(延迟函数) 内部可以调用\u003ccode\u003erecover\u003c/code\u003e进行捕获。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-go\"\u003e  \u003cspan class=\"hljs-keyword\"\u003edefer\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunc\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e\u003c/span\u003e {\n    err := \u003cspan class=\"hljs-built_in\"\u003erecover\u003c/span\u003e();\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e err != \u003cspan class=\"hljs-literal\"\u003enil\u003c/span\u003e {\n      fmp.Println(err)\n    }\n  }\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1 id=\"单元测试\"\u003e单元测试\u003c/h1\u003e\n\u003cp\u003e使用\u003ccode\u003enet/http/httptest\u003c/code\u003e包\n与原生测试相比，使用\u003ccode\u003egin.Engine.ServeHTTP\u003c/code\u003e发送请求(原生使用\u003ccode\u003ehttp.HandlerFunc.ServeHTTP\u003c/code\u003e)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-go\"\u003e\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e engine *gin.Engine\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e accessToken = \u003cspan class=\"hljs-string\"\u003e\u0026quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1ODA5OTE1NTUsInVzZXJfaWQiOjE4LCJuYW1lIjoidGVzdDEifQ.900X9t3qveW0NGn3_FhYxHXlgsLAdl1BkjfKxNlBNyE\u0026quot;\u003c/span\u003e\n\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eCreateRequest\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(method constant.HttpRequestMethod, url \u003cspan class=\"hljs-type\"\u003estring\u003c/span\u003e, params \u003cspan class=\"hljs-keyword\"\u003einterface\u003c/span\u003e{})\u003c/span\u003e\u003c/span\u003e (status constant.ResultCode, resBody *util.ResS, returnError \u003cspan class=\"hljs-type\"\u003eerror\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e engine == \u003cspan class=\"hljs-literal\"\u003enil\u003c/span\u003e {\n        gin.SetMode(gin.ReleaseMode)\n        engine = gin.New()\n        database.SetUpDatabase()\n        controller.SetupRouter(engine)\n    }\n\n    \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e (\n        rr        = httptest.NewRecorder()\n        req       = \u003cspan class=\"hljs-built_in\"\u003enew\u003c/span\u003e(http.Request)\n        err \u003cspan class=\"hljs-type\"\u003eerror\u003c/span\u003e = \u003cspan class=\"hljs-literal\"\u003enil\u003c/span\u003e\n    )\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e params != \u003cspan class=\"hljs-literal\"\u003enil\u003c/span\u003e {\n        tmp, err := json.Encode(params)\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e err != \u003cspan class=\"hljs-literal\"\u003enil\u003c/span\u003e {\n            \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e constant.FAILED, \u003cspan class=\"hljs-literal\"\u003enil\u003c/span\u003e, err\n        }\n        req, err = http.NewRequest(\u003cspan class=\"hljs-type\"\u003estring\u003c/span\u003e(method), url, bytes.NewBuffer([]\u003cspan class=\"hljs-type\"\u003ebyte\u003c/span\u003e(tmp)))\n    } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n        req, err = http.NewRequest(\u003cspan class=\"hljs-type\"\u003estring\u003c/span\u003e(method), url, \u003cspan class=\"hljs-literal\"\u003enil\u003c/span\u003e)\n    }\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e err != \u003cspan class=\"hljs-literal\"\u003enil\u003c/span\u003e {\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e constant.FAILED, \u003cspan class=\"hljs-literal\"\u003enil\u003c/span\u003e, err\n    }\n\n    req.Header.Add(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Authorization\u0026quot;\u003c/span\u003e, fmt.Sprintf(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Bear %s\u0026quot;\u003c/span\u003e, accessToken))\n    engine.ServeHTTP(rr, req)\n\n    formatRes := util.ResS{}\n    err = json.Decode(rr.Body.Bytes(), \u0026amp;formatRes)\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e err != \u003cspan class=\"hljs-literal\"\u003enil\u003c/span\u003e {\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e constant.FAILED, \u003cspan class=\"hljs-literal\"\u003enil\u003c/span\u003e, err\n    }\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e constant.SUCCESS, \u0026amp;formatRes, \u003cspan class=\"hljs-literal\"\u003enil\u003c/span\u003e\n}\n\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eCreateTest\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(t *testing.T, method constant.HttpRequestMethod, url \u003cspan class=\"hljs-type\"\u003estring\u003c/span\u003e, params \u003cspan class=\"hljs-keyword\"\u003einterface\u003c/span\u003e{})\u003c/span\u003e\u003c/span\u003e {\n    _, resBody, err := CreateRequest(method, url, params)\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e err != \u003cspan class=\"hljs-literal\"\u003enil\u003c/span\u003e {\n        t.Errorf(\u003cspan class=\"hljs-string\"\u003e\u0026quot;got error: %s\u0026quot;\u003c/span\u003e, err.Error())\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e\n    }\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e resBody != \u003cspan class=\"hljs-literal\"\u003enil\u003c/span\u003e {\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e resBody.Code != constant.SUCCESS {\n            t.Errorf(\u003cspan class=\"hljs-string\"\u003e\u0026quot;GetInfo test failed, got: %v, info: %s\u0026quot;\u003c/span\u003e, resBody.Data, resBody.Message)\n        }\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\n"}},"__N_SSG":true},"page":"/post/[title]","query":{"title":"go-gin-基础"},"buildId":"0rgYVWUn35NqgQTZKSNOn","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>