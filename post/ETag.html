<!DOCTYPE html><html><head><link rel="icon" href="https://mrrsblog.oss-cn-shanghai.aliyuncs.com/avatar.jpg"/><script async="" src="/js/L2Dwidget.min.js"></script><script async="" src="/js/initL2D.js"></script><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Mr.RSçš„ä¸ªäººåšå®¢-ETag</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/15773988a510c3d3.css" as="style"/><link rel="stylesheet" href="/_next/static/css/15773988a510c3d3.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-b927671265afed5e.js" defer=""></script><script src="/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/_next/static/chunks/main-1e7421553b9673ee.js" defer=""></script><script src="/_next/static/chunks/pages/_app-ca6aae25bc99a05f.js" defer=""></script><script src="/_next/static/chunks/899-3eff910f6206cfe7.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Btitle%5D-d89e1712c82a34ac.js" defer=""></script><script src="/_next/static/u5NNrq-HkfgxOKm0Xg3Yp/_buildManifest.js" defer=""></script><script src="/_next/static/u5NNrq-HkfgxOKm0Xg3Yp/_ssgManifest.js" defer=""></script><script src="/_next/static/u5NNrq-HkfgxOKm0Xg3Yp/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><header class="fixed top-0 py-4 left-0 right-0 h-auto px-10 shadow bg-white z-50"><nav><ul class="flex w-auto"><li class="mr-4 hover:text-yellow"><a href="/">é¦–é¡µ</a></li><li class="mx-4 hover:text-yellow"><a href="/categories">åˆ†ç±»</a></li><li class="mx-4 hover:text-yellow"><a href="/tags">æ ‡ç­¾</a></li><li class="ml-4 hover:text-yellow"><a href="/timeline">å½’æ¡£</a></li></ul></nav></header><main class="mt-20 mb-4 mx-auto justify-center w-2/3"><div class="mx-auto lg:max-w-5xl md:max-w-3xl"><article class="flex flex-col justify-around pb-16 px-4 mx-auto space-y-10 text-base"><div class="flex flex-col space-y-4"><h1 class="inline pt-10 text-4xl text-skin-primary">ETag</h1><div class="text-sm space-x-2 text-skin-muted grid grid-cols-5"><span class="flex align-middle"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 inline-block mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>2022-11-09 21:13:46</span><span class="flex align-middle"><svg class="w-5 h-5 inline-block mr-1" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1903" width="20" height="20"><path d="M257.7 752c2 0 4-0.2 6-0.5L431.9 722c2-0.4 3.9-1.3 5.3-2.8l423.9-423.9c3.9-3.9 3.9-10.2 0-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2c-1.9 11.1 1.5 21.9 9.4 29.8 6.6 6.4 14.9 9.9 23.8 9.9z m67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z" p-id="1904"></path></svg>2022-11-09 21:36:41</span></div></div><div class="mt-8 flex"><div class="w-full flex-auto custom-markdown-body"><div class="markdown-body" id="write"><p><img src="/img/etag.png" alt="ç¼–è¯‘"></p>

      <h2>
        <span class="prefix"></span>
        <span class="content">ä»€ä¹ˆæ˜¯ETag</span>
        <span class="suffix"></span>
      </h2>
    <p>httpå“åº”å¤´ï¼ŒæœåŠ¡ç«¯æ ¹æ®è¿”å›çš„èµ„æºç”Ÿæˆï¼Œæœ‰ä¸¤ç§è¯­æ³•â€”å¼º/å¼±</p>
<p>æœ‰ä¸¤ç§ç”¨é€”: ç¼“å­˜ã€ä¹è§‚å¹¶å‘æ§åˆ¶</p>

      <h2>
        <span class="prefix"></span>
        <span class="content">ç¼“å­˜</span>
        <span class="suffix"></span>
      </h2>
    <p>å¯ç”¨æ¥å®ç°åå•†ç¼“å­˜ï¼Œå¤§è‡´æµç¨‹å¦‚ä¸‹</p>
<p><img src="/img/etag-1.png" alt="åå•†ç¼“å­˜"></p>
<ol>
<li><p>æµè§ˆå™¨é¦–æ¬¡è®¿é—®æ—¶ï¼ŒæœåŠ¡ç«¯åŸºäºè¿”å›çš„æ•°æ®ï¼Œæ ¹æ®ã€Œåˆé€‚çš„ç®—æ³•ã€è®¡ç®—å‡ºä¸€ä¸ªhashä¸² ï¼Œå¹¶åœ¨å“åº”å¤´ä¸­æºå¸¦è¿› <code>ETag</code> å¤´éƒ¨</p>
</li>
<li><p>æµè§ˆå™¨ã€Œæ ¹æ®æƒ…å†µã€é€‚å½“ç¼“å­˜å“åº”æ•°æ®</p>
</li>
<li><p>æµè§ˆå™¨å†æ¬¡è®¿é—®æ—¶ï¼Œè¯·æ±‚å¤´ä¸­æºå¸¦ <code>If-None-Match</code> ï¼ŒæœåŠ¡ç«¯ä¼šåˆ¤æ–­è¯¥å€¼æ˜¯å¦æ˜¯æœ€æ–°çš„ï¼Œå¦‚æœæ˜¯ï¼ŒæœåŠ¡å™¨åˆ™è¿”å›304çŠ¶æ€ç ï¼Œæµè§ˆå™¨ç›´æ¥ä½¿ç”¨æœ¬æ¬¡å·²ç¼“å­˜çš„æ•°æ®ï¼›å¦åˆ™è¿”å›200å’Œæœ€æ–°çš„ <code>ETag</code></p>
</li>
</ol>

      <h2>
        <span class="prefix"></span>
        <span class="content">å®ç°ä¹è§‚å¹¶å‘æ§åˆ¶</span>
        <span class="suffix"></span>
      </h2>
    <blockquote>
<p>åœ¨å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿé‡Œï¼Œä¹è§‚å¹¶å‘æ§åˆ¶ï¼ˆåˆåâ€œä¹è§‚é”â€ï¼ŒOptimistic Concurrency Controlï¼Œç¼©å†™â€œOCCâ€ï¼‰æ˜¯ä¸€ç§å¹¶å‘æ§åˆ¶çš„æ–¹æ³•ã€‚å®ƒå‡è®¾å¤šç”¨æˆ·å¹¶å‘çš„äº‹åŠ¡åœ¨å¤„ç†æ—¶ä¸ä¼šå½¼æ­¤äº’ç›¸å½±å“ï¼Œå„äº‹åŠ¡èƒ½å¤Ÿåœ¨ä¸äº§ç”Ÿé”çš„æƒ…å†µä¸‹å¤„ç†å„è‡ªå½±å“çš„é‚£éƒ¨åˆ†æ•°æ®ã€‚åœ¨æäº¤æ•°æ®æ›´æ–°ä¹‹å‰ï¼Œæ¯ä¸ªäº‹åŠ¡ä¼šå…ˆæ£€æŸ¥åœ¨è¯¥äº‹åŠ¡è¯»å–æ•°æ®åï¼Œæœ‰æ²¡æœ‰å…¶ä»–äº‹åŠ¡åˆä¿®æ”¹äº†è¯¥æ•°æ®ã€‚å¦‚æœå…¶ä»–äº‹åŠ¡æœ‰æ›´æ–°çš„è¯ï¼Œæ­£åœ¨æäº¤çš„äº‹åŠ¡ä¼šè¿›è¡Œå›æ»šã€‚ä¹è§‚äº‹åŠ¡æ§åˆ¶æœ€æ—©æ˜¯ç”±å­”ç¥¥é‡ï¼ˆH.T.Kungï¼‰æ•™æˆæå‡ºã€‚ä¹è§‚å¹¶å‘æ§åˆ¶å¤šæ•°ç”¨äºæ•°æ®ç«äº‰(data race)ä¸å¤§ã€å†²çªè¾ƒå°‘çš„ç¯å¢ƒä¸­ï¼Œè¿™ç§ç¯å¢ƒä¸­ï¼Œå¶å°”å›æ»šäº‹åŠ¡çš„æˆæœ¬ä¼šä½äºè¯»å–æ•°æ®æ—¶é”å®šæ•°æ®çš„æˆæœ¬ï¼Œå› æ­¤å¯ä»¥è·å¾—æ¯”å…¶ä»–å¹¶å‘æ§åˆ¶æ–¹æ³•æ›´é«˜çš„ååé‡ã€‚    -- wiki</p>
</blockquote>
<p>ç®€å•æ¥è®²å°±æ˜¯å¯¹äº§ç”Ÿå†²çªçš„æƒ…å†µæŒä¸€ç§ã€Œä¹è§‚ã€çš„æ€åº¦ï¼Œä¹è§‚å¹¶å‘æ§åˆ¶å°†é‡ç‚¹æ”¾åœ¨äº‹åŠ¡æäº¤<strong>å†²çªæ£€æŸ¥</strong>ä¸Šï¼Œè€Œä¸æ˜¯ç›´æ¥é”ä½æ•°æ®ä¸è®©è®¿é—®</p>
<p>å®ç°åŸç†: æäº¤æ—¶å¸¦ä¸Š <code>If-Match</code> å¤´éƒ¨ï¼Œå€¼ä¸ºè·å–èµ„æºæ¥å£å“åº”å¤´ä¸­çš„<code>ETag</code> ï¼ŒæœåŠ¡ç«¯åˆ¤æ–­å¦‚æœè¯¥å€¼æ˜¯å¦ä¸ºæœ€æ–°çš„ï¼Œå¦‚æœä¸åŒ¹é…ï¼Œåˆ™æ„å‘³ç€æ•°æ®å·²ç»è¢«ä¿®æ”¹ï¼ŒæŠ›å‡º <code>412</code> å‰ææ¡ä»¶å¤±è´¥é”™è¯¯</p>

      <h2>
        <span class="prefix"></span>
        <span class="content">Q&amp;A</span>
        <span class="suffix"></span>
      </h2>
    <p>åœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæœ‰ä»¥ä¸‹æ”¶è·/è¸©è¿‡ä»¥ä¸‹å‘</p>

      <h3>
        <span class="prefix"></span>
        <span class="content">å¼º/å¼±ä¸¤ç§è¯­æ³•åˆ°åº•æ„å‘³ç€ä»€ä¹ˆ</span>
        <span class="suffix"></span>
      </h3>
    <p>ç°åœ¨è¿˜æ˜¯ä¸çŸ¥é“ ğŸ¤·â€â™‚ï¸</p>

      <h3>
        <span class="prefix"></span>
        <span class="content">ETagå¦‚ä½•è®¡ç®—/ç”Ÿæˆ</span>
        <span class="suffix"></span>
      </h3>
    <p>å¹¶æœªè§„å®šç®—æ³•ï¼Œå„webæœåŠ¡å™¨å®ç°æ–¹å¼ä¸ä¸€ï¼Œä»¥ä¸‹ä¸º Node.js çš„å®ç° <a href="https://github.com/jshttp/etag#readme">etag</a></p>
<ul>
<li>èµ„æºæ–‡ä»¶</li>
</ul>
<p><img src="/img/etag-3.png" alt="stattag"></p>
<p>ä½¿ç”¨æ–‡ä»¶é•¿åº¦+mtime</p>
<ul>
<li>string/Buffer</li>
</ul>
<p><img src="/img/etag-2.png" alt="stattag"></p>
<p>å†…å®¹é•¿åº¦+å†…å®¹hash</p>
<p>ps: mtime(modified time, æŒ‡æ–‡ä»¶å†…å®¹æ”¹å˜çš„æ—¶é—´æˆ³)</p>

      <h3>
        <span class="prefix"></span>
        <span class="content">ETagæ”¹å˜ï¼Œæ˜¯å¦æ„å‘³ç€èµ„æºä¸€å®šå‘ç”Ÿå˜åŠ¨</span>
        <span class="suffix"></span>
      </h3>
    <p>ä¸ã€‚å½“ç¼–è¾‘æ–‡ä»¶å´æœªæ›´æ”¹æ–‡ä»¶å†…å®¹æ—¶ï¼Œæˆ–è€…Â touch fileï¼ŒmtimeÂ ä¹Ÿä¼šæ”¹å˜ï¼Œæ­¤æ—¶Â etagÂ ä¼šå‘ç”Ÿæ”¹å˜ï¼Œä½†æ˜¯æ–‡ä»¶å†…å®¹æ²¡æœ‰æ›´æ”¹</p>

      <h3>
        <span class="prefix"></span>
        <span class="content">ETagä»£è¡¨çš„åå•†ç¼“å­˜åœ¨POSTè¯·æ±‚ä¸­èƒ½ä½¿ç”¨å—</span>
        <span class="suffix"></span>
      </h3>
    <p>ä¸å¯ä»¥ã€‚å°½ç®¡rfcè§„å®šåœ¨è®¾ç½®åˆé€‚çš„å“åº”å¤´(<code>content-location</code>)åæˆ–åˆé€‚çš„æ“ä½œ(å…ˆPOSTåGETï¼Œæ­¤æ—¶GETä¼šä½¿ç”¨ç¼“å­˜çš„POSTæ•°æ®)ï¼Œæµè§ˆå™¨å¯ä»¥ç¼“å­˜POSTè¯·æ±‚ï¼Œä½†å®éªŒè¯æ˜æµè§ˆå™¨å¹¶æ²¡æœ‰å®ç°è¯¥ç‰¹æ€§ï¼›å¹¶ä¸”ï¼Œå¯¹äºç›¸åŒçš„urlï¼ŒPOSTè¯·æ±‚ä¼šä½¿GETè¯·æ±‚çš„ç¼“å­˜å¤±æ•ˆ</p>

      <h2>
        <span class="prefix"></span>
        <span class="content">å‚è€ƒ</span>
        <span class="suffix"></span>
      </h2>
    <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/ETag">ETag</a></p>
<p><a href="https://zh.m.wikipedia.org/zh-hans/%E4%B9%90%E8%A7%82%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6">ä¹è§‚å¹¶å‘æ§åˆ¶</a></p>
<p><a href="https://stackoverflow.com/a/59569451/12241567">Is it possible to cache POST methods in HTTP?</a></p>
</div></div></div></article></div></main><footer class="flex flex-col items-center justify-center leading-8 text-sm w-full py-2 border-t text-skin-muted"><p>Designed &amp; developed by<a class="ml-1 text-yellow" target="_blank" href="https://github.com/mrrs878" rel="noreferrer">Mr.RS</a></p><p>2024</p></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"ETag","tags":["ETag"],"categories":"ç½‘ç»œ","description":"![ç¼–è¯‘](/img/etag.png)\n\n## ä»€ä¹ˆæ˜¯ETag\n\nhttpå“åº”å¤´ï¼ŒæœåŠ¡ç«¯æ ¹æ®è¿”å›çš„èµ„æºç”Ÿæˆï¼Œæœ‰ä¸¤ç§è¯­æ³•â€”å¼º/å¼±\n\næœ‰ä¸¤ç§ç”¨é€”: ç¼“å­˜ã€ä¹è§‚å¹¶å‘æ§åˆ¶\n\n## ç¼“å­˜\n\nå¯ç”¨æ¥å®ç°åå•†ç¼“å­˜ï¼Œå¤§è‡´æµç¨‹å¦‚ä¸‹\n\n![åå•†ç¼“å­˜](/img/etag-1.png)\n\n1. æµè§ˆå™¨é¦–æ¬¡è®¿é—®æ—¶ï¼ŒæœåŠ¡ç«¯åŸºäºè¿”å›çš„æ•°æ®ï¼Œæ ¹æ®ã€Œåˆé€‚çš„ç®—æ³•ã€è®¡ç®—å‡ºä¸€ä¸ªhashä¸² ï¼Œå¹¶åœ¨å“åº”å¤´ä¸­æºå¸¦è¿› `ETag` å¤´éƒ¨","createDate":"2022-11-09 21:13:46","updateDate":"2022-11-09 21:36:41","body":"\u003cp\u003e\u003cimg src=\"/img/etag.png\" alt=\"ç¼–è¯‘\"\u003e\u003c/p\u003e\n\n      \u003ch2\u003e\n        \u003cspan class=\"prefix\"\u003e\u003c/span\u003e\n        \u003cspan class=\"content\"\u003eä»€ä¹ˆæ˜¯ETag\u003c/span\u003e\n        \u003cspan class=\"suffix\"\u003e\u003c/span\u003e\n      \u003c/h2\u003e\n    \u003cp\u003ehttpå“åº”å¤´ï¼ŒæœåŠ¡ç«¯æ ¹æ®è¿”å›çš„èµ„æºç”Ÿæˆï¼Œæœ‰ä¸¤ç§è¯­æ³•â€”å¼º/å¼±\u003c/p\u003e\n\u003cp\u003eæœ‰ä¸¤ç§ç”¨é€”: ç¼“å­˜ã€ä¹è§‚å¹¶å‘æ§åˆ¶\u003c/p\u003e\n\n      \u003ch2\u003e\n        \u003cspan class=\"prefix\"\u003e\u003c/span\u003e\n        \u003cspan class=\"content\"\u003eç¼“å­˜\u003c/span\u003e\n        \u003cspan class=\"suffix\"\u003e\u003c/span\u003e\n      \u003c/h2\u003e\n    \u003cp\u003eå¯ç”¨æ¥å®ç°åå•†ç¼“å­˜ï¼Œå¤§è‡´æµç¨‹å¦‚ä¸‹\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/img/etag-1.png\" alt=\"åå•†ç¼“å­˜\"\u003e\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cp\u003eæµè§ˆå™¨é¦–æ¬¡è®¿é—®æ—¶ï¼ŒæœåŠ¡ç«¯åŸºäºè¿”å›çš„æ•°æ®ï¼Œæ ¹æ®ã€Œåˆé€‚çš„ç®—æ³•ã€è®¡ç®—å‡ºä¸€ä¸ªhashä¸² ï¼Œå¹¶åœ¨å“åº”å¤´ä¸­æºå¸¦è¿› \u003ccode\u003eETag\u003c/code\u003e å¤´éƒ¨\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eæµè§ˆå™¨ã€Œæ ¹æ®æƒ…å†µã€é€‚å½“ç¼“å­˜å“åº”æ•°æ®\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eæµè§ˆå™¨å†æ¬¡è®¿é—®æ—¶ï¼Œè¯·æ±‚å¤´ä¸­æºå¸¦ \u003ccode\u003eIf-None-Match\u003c/code\u003e ï¼ŒæœåŠ¡ç«¯ä¼šåˆ¤æ–­è¯¥å€¼æ˜¯å¦æ˜¯æœ€æ–°çš„ï¼Œå¦‚æœæ˜¯ï¼ŒæœåŠ¡å™¨åˆ™è¿”å›304çŠ¶æ€ç ï¼Œæµè§ˆå™¨ç›´æ¥ä½¿ç”¨æœ¬æ¬¡å·²ç¼“å­˜çš„æ•°æ®ï¼›å¦åˆ™è¿”å›200å’Œæœ€æ–°çš„ \u003ccode\u003eETag\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\n      \u003ch2\u003e\n        \u003cspan class=\"prefix\"\u003e\u003c/span\u003e\n        \u003cspan class=\"content\"\u003eå®ç°ä¹è§‚å¹¶å‘æ§åˆ¶\u003c/span\u003e\n        \u003cspan class=\"suffix\"\u003e\u003c/span\u003e\n      \u003c/h2\u003e\n    \u003cblockquote\u003e\n\u003cp\u003eåœ¨å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿé‡Œï¼Œä¹è§‚å¹¶å‘æ§åˆ¶ï¼ˆåˆåâ€œä¹è§‚é”â€ï¼ŒOptimistic Concurrency Controlï¼Œç¼©å†™â€œOCCâ€ï¼‰æ˜¯ä¸€ç§å¹¶å‘æ§åˆ¶çš„æ–¹æ³•ã€‚å®ƒå‡è®¾å¤šç”¨æˆ·å¹¶å‘çš„äº‹åŠ¡åœ¨å¤„ç†æ—¶ä¸ä¼šå½¼æ­¤äº’ç›¸å½±å“ï¼Œå„äº‹åŠ¡èƒ½å¤Ÿåœ¨ä¸äº§ç”Ÿé”çš„æƒ…å†µä¸‹å¤„ç†å„è‡ªå½±å“çš„é‚£éƒ¨åˆ†æ•°æ®ã€‚åœ¨æäº¤æ•°æ®æ›´æ–°ä¹‹å‰ï¼Œæ¯ä¸ªäº‹åŠ¡ä¼šå…ˆæ£€æŸ¥åœ¨è¯¥äº‹åŠ¡è¯»å–æ•°æ®åï¼Œæœ‰æ²¡æœ‰å…¶ä»–äº‹åŠ¡åˆä¿®æ”¹äº†è¯¥æ•°æ®ã€‚å¦‚æœå…¶ä»–äº‹åŠ¡æœ‰æ›´æ–°çš„è¯ï¼Œæ­£åœ¨æäº¤çš„äº‹åŠ¡ä¼šè¿›è¡Œå›æ»šã€‚ä¹è§‚äº‹åŠ¡æ§åˆ¶æœ€æ—©æ˜¯ç”±å­”ç¥¥é‡ï¼ˆH.T.Kungï¼‰æ•™æˆæå‡ºã€‚ä¹è§‚å¹¶å‘æ§åˆ¶å¤šæ•°ç”¨äºæ•°æ®ç«äº‰(data race)ä¸å¤§ã€å†²çªè¾ƒå°‘çš„ç¯å¢ƒä¸­ï¼Œè¿™ç§ç¯å¢ƒä¸­ï¼Œå¶å°”å›æ»šäº‹åŠ¡çš„æˆæœ¬ä¼šä½äºè¯»å–æ•°æ®æ—¶é”å®šæ•°æ®çš„æˆæœ¬ï¼Œå› æ­¤å¯ä»¥è·å¾—æ¯”å…¶ä»–å¹¶å‘æ§åˆ¶æ–¹æ³•æ›´é«˜çš„ååé‡ã€‚    -- wiki\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eç®€å•æ¥è®²å°±æ˜¯å¯¹äº§ç”Ÿå†²çªçš„æƒ…å†µæŒä¸€ç§ã€Œä¹è§‚ã€çš„æ€åº¦ï¼Œä¹è§‚å¹¶å‘æ§åˆ¶å°†é‡ç‚¹æ”¾åœ¨äº‹åŠ¡æäº¤\u003cstrong\u003eå†²çªæ£€æŸ¥\u003c/strong\u003eä¸Šï¼Œè€Œä¸æ˜¯ç›´æ¥é”ä½æ•°æ®ä¸è®©è®¿é—®\u003c/p\u003e\n\u003cp\u003eå®ç°åŸç†: æäº¤æ—¶å¸¦ä¸Š \u003ccode\u003eIf-Match\u003c/code\u003e å¤´éƒ¨ï¼Œå€¼ä¸ºè·å–èµ„æºæ¥å£å“åº”å¤´ä¸­çš„\u003ccode\u003eETag\u003c/code\u003e ï¼ŒæœåŠ¡ç«¯åˆ¤æ–­å¦‚æœè¯¥å€¼æ˜¯å¦ä¸ºæœ€æ–°çš„ï¼Œå¦‚æœä¸åŒ¹é…ï¼Œåˆ™æ„å‘³ç€æ•°æ®å·²ç»è¢«ä¿®æ”¹ï¼ŒæŠ›å‡º \u003ccode\u003e412\u003c/code\u003e å‰ææ¡ä»¶å¤±è´¥é”™è¯¯\u003c/p\u003e\n\n      \u003ch2\u003e\n        \u003cspan class=\"prefix\"\u003e\u003c/span\u003e\n        \u003cspan class=\"content\"\u003eQ\u0026amp;A\u003c/span\u003e\n        \u003cspan class=\"suffix\"\u003e\u003c/span\u003e\n      \u003c/h2\u003e\n    \u003cp\u003eåœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæœ‰ä»¥ä¸‹æ”¶è·/è¸©è¿‡ä»¥ä¸‹å‘\u003c/p\u003e\n\n      \u003ch3\u003e\n        \u003cspan class=\"prefix\"\u003e\u003c/span\u003e\n        \u003cspan class=\"content\"\u003eå¼º/å¼±ä¸¤ç§è¯­æ³•åˆ°åº•æ„å‘³ç€ä»€ä¹ˆ\u003c/span\u003e\n        \u003cspan class=\"suffix\"\u003e\u003c/span\u003e\n      \u003c/h3\u003e\n    \u003cp\u003eç°åœ¨è¿˜æ˜¯ä¸çŸ¥é“ ğŸ¤·â€â™‚ï¸\u003c/p\u003e\n\n      \u003ch3\u003e\n        \u003cspan class=\"prefix\"\u003e\u003c/span\u003e\n        \u003cspan class=\"content\"\u003eETagå¦‚ä½•è®¡ç®—/ç”Ÿæˆ\u003c/span\u003e\n        \u003cspan class=\"suffix\"\u003e\u003c/span\u003e\n      \u003c/h3\u003e\n    \u003cp\u003eå¹¶æœªè§„å®šç®—æ³•ï¼Œå„webæœåŠ¡å™¨å®ç°æ–¹å¼ä¸ä¸€ï¼Œä»¥ä¸‹ä¸º Node.js çš„å®ç° \u003ca href=\"https://github.com/jshttp/etag#readme\"\u003eetag\u003c/a\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eèµ„æºæ–‡ä»¶\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"/img/etag-3.png\" alt=\"stattag\"\u003e\u003c/p\u003e\n\u003cp\u003eä½¿ç”¨æ–‡ä»¶é•¿åº¦+mtime\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003estring/Buffer\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"/img/etag-2.png\" alt=\"stattag\"\u003e\u003c/p\u003e\n\u003cp\u003eå†…å®¹é•¿åº¦+å†…å®¹hash\u003c/p\u003e\n\u003cp\u003eps: mtime(modified time, æŒ‡æ–‡ä»¶å†…å®¹æ”¹å˜çš„æ—¶é—´æˆ³)\u003c/p\u003e\n\n      \u003ch3\u003e\n        \u003cspan class=\"prefix\"\u003e\u003c/span\u003e\n        \u003cspan class=\"content\"\u003eETagæ”¹å˜ï¼Œæ˜¯å¦æ„å‘³ç€èµ„æºä¸€å®šå‘ç”Ÿå˜åŠ¨\u003c/span\u003e\n        \u003cspan class=\"suffix\"\u003e\u003c/span\u003e\n      \u003c/h3\u003e\n    \u003cp\u003eä¸ã€‚å½“ç¼–è¾‘æ–‡ä»¶å´æœªæ›´æ”¹æ–‡ä»¶å†…å®¹æ—¶ï¼Œæˆ–è€…Â touch fileï¼ŒmtimeÂ ä¹Ÿä¼šæ”¹å˜ï¼Œæ­¤æ—¶Â etagÂ ä¼šå‘ç”Ÿæ”¹å˜ï¼Œä½†æ˜¯æ–‡ä»¶å†…å®¹æ²¡æœ‰æ›´æ”¹\u003c/p\u003e\n\n      \u003ch3\u003e\n        \u003cspan class=\"prefix\"\u003e\u003c/span\u003e\n        \u003cspan class=\"content\"\u003eETagä»£è¡¨çš„åå•†ç¼“å­˜åœ¨POSTè¯·æ±‚ä¸­èƒ½ä½¿ç”¨å—\u003c/span\u003e\n        \u003cspan class=\"suffix\"\u003e\u003c/span\u003e\n      \u003c/h3\u003e\n    \u003cp\u003eä¸å¯ä»¥ã€‚å°½ç®¡rfcè§„å®šåœ¨è®¾ç½®åˆé€‚çš„å“åº”å¤´(\u003ccode\u003econtent-location\u003c/code\u003e)åæˆ–åˆé€‚çš„æ“ä½œ(å…ˆPOSTåGETï¼Œæ­¤æ—¶GETä¼šä½¿ç”¨ç¼“å­˜çš„POSTæ•°æ®)ï¼Œæµè§ˆå™¨å¯ä»¥ç¼“å­˜POSTè¯·æ±‚ï¼Œä½†å®éªŒè¯æ˜æµè§ˆå™¨å¹¶æ²¡æœ‰å®ç°è¯¥ç‰¹æ€§ï¼›å¹¶ä¸”ï¼Œå¯¹äºç›¸åŒçš„urlï¼ŒPOSTè¯·æ±‚ä¼šä½¿GETè¯·æ±‚çš„ç¼“å­˜å¤±æ•ˆ\u003c/p\u003e\n\n      \u003ch2\u003e\n        \u003cspan class=\"prefix\"\u003e\u003c/span\u003e\n        \u003cspan class=\"content\"\u003eå‚è€ƒ\u003c/span\u003e\n        \u003cspan class=\"suffix\"\u003e\u003c/span\u003e\n      \u003c/h2\u003e\n    \u003cp\u003e\u003ca href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/ETag\"\u003eETag\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://zh.m.wikipedia.org/zh-hans/%E4%B9%90%E8%A7%82%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6\"\u003eä¹è§‚å¹¶å‘æ§åˆ¶\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://stackoverflow.com/a/59569451/12241567\"\u003eIs it possible to cache POST methods in HTTP?\u003c/a\u003e\u003c/p\u003e\n"}},"__N_SSG":true},"page":"/post/[title]","query":{"title":"ETag"},"buildId":"u5NNrq-HkfgxOKm0Xg3Yp","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>