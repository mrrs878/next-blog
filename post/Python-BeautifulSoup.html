<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Mr.RS的个人博客-Python-BeautifulSoup</title><meta name="next-head-count" content="3"/><link rel="preload" href="/next-blog/_next/static/css/d3bd3b56eb8829d9.css" as="style"/><link rel="stylesheet" href="/next-blog/_next/static/css/d3bd3b56eb8829d9.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/next-blog/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/next-blog/_next/static/chunks/webpack-cf185e4b59cdddcf.js" defer=""></script><script src="/next-blog/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/next-blog/_next/static/chunks/main-1c9e93b8392c1bc9.js" defer=""></script><script src="/next-blog/_next/static/chunks/pages/_app-ca6aae25bc99a05f.js" defer=""></script><script src="/next-blog/_next/static/chunks/899-1cd3a59abdb8ea18.js" defer=""></script><script src="/next-blog/_next/static/chunks/pages/post/%5Btitle%5D-216eae5ddb3b6d26.js" defer=""></script><script src="/next-blog/_next/static/fBox-3zLUcpga4_Do-7MJ/_buildManifest.js" defer=""></script><script src="/next-blog/_next/static/fBox-3zLUcpga4_Do-7MJ/_ssgManifest.js" defer=""></script><script src="/next-blog/_next/static/fBox-3zLUcpga4_Do-7MJ/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><header class="fixed top-0 py-4 left-0 right-0 h-auto px-10 shadow bg-white z-50"><nav><ul class="flex w-auto"><li class="mr-4 hover:text-yellow"><a href="/next-blog">首页</a></li><li class="mx-4 hover:text-yellow"><a href="/next-blog/categories">分类</a></li><li class="mx-4 hover:text-yellow"><a href="/next-blog/tags">标签</a></li><li class="ml-4 hover:text-yellow"><a href="/next-blog/timeline">归档</a></li></ul></nav></header><main class="mt-20 mb-4 mx-auto justify-center w-2/3"><div class="mx-auto lg:max-w-5xl md:max-w-3xl"><article class="flex flex-col justify-around pb-16 px-4 mx-auto space-y-10 text-base"><div class="flex flex-col space-y-4"><h1 class="inline pt-10 text-4xl text-skin-primary">Python-BeautifulSoup</h1><div class="text-sm space-x-2 text-skin-muted grid grid-cols-5"><span class="flex align-middle"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 inline-block mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>2018-11-16 14:50:41</span><span class="flex align-middle"><svg class="w-5 h-5 inline-block mr-1" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1903" width="20" height="20"><path d="M257.7 752c2 0 4-0.2 6-0.5L431.9 722c2-0.4 3.9-1.3 5.3-2.8l423.9-423.9c3.9-3.9 3.9-10.2 0-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2c-1.9 11.1 1.5 21.9 9.4 29.8 6.6 6.4 14.9 9.9 23.8 9.9z m67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z" p-id="1904"></path></svg>2021-02-20 17:20:24</span><span class="flex align-middle"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 inline-block mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>44</span></div></div><div class="mt-8 flex"><div class="w-full flex-auto custom-markdown-body"><div class="markdown-body" id="write"><h1 id="python-beautifulsoup的使用">Python-BeautifulSoup的使用</h1>
<p>BeautiSoup，是借助网页的结构和属性等特性来解析网页的工具，有了它我们不用再去写一些复杂的正则，只需要简单的几条语句就可以完成网页中某个元素的提取。</p>
<h2 id="beautifulsoup简介">BeautifulSoup简介</h2>
<p>官方解释如下：
BeautifulSoup提供一些简单的、Python式的函数用来处理导航、搜索、修改分析树等功能。它是一个工具箱，通过解析文档为用户提供需要抓取的数据，因为简单，所以不需要多少代码就可以写出一个完整的应用程序。 BeautifulSoup 自动将输入文档转换为 Unicode 编码，输出文档转换为 utf-8 编码。你不需要考虑编码方式，除非文档没有指定一个编码方式，这时你仅仅需要说明一下原始编码方式就可以了。 BeautifulSoup 已成为和 lxml、html6lib 一样出色的 Python 解释器，为用户灵活地提供不同的解析策略或强劲的速度。</p>
<h2 id="解析器">解析器</h2>
<p>BeautifulSoup 在解析的时候实际上是依赖于解析器的，它除了支持 Python 标准库中的 HTML 解析器，还支持一些第三方的解析器比如 LXML，下面我们对 BeautifulSoup 支持的解析器及它们的一些优缺点做一个简单的对比。
<img src="https://t1.picb.cc/uploads/2018/11/16/JXuhZc.png" alt="enter image description here"></p>
<h2 id="基本使用">基本使用</h2>
<pre><code class="hljs language-python"><span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup

html = <span class="hljs-string">&#x27;&#x27;&#x27;
&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
&lt;p class=&quot;title&quot; name=&quot;dromouse&quot;&gt;&lt;b&gt;The Dormouse&#x27;s story&lt;/b&gt;&lt;/p&gt;
&lt;p class=&quot;story&quot;&gt;Once upon a time there were three little sisters; and their names were
&lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&gt;&lt;!-- Elsie --&gt;&lt;/a&gt;,
&lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; and
&lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;;
and they lived at the bottom of a well.&lt;/p&gt;
&lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;
&#x27;&#x27;&#x27;</span>

soup = BeautifulSoup(html, <span class="hljs-string">&#x27;lxml&#x27;</span>) 
<span class="hljs-built_in">print</span>(soup.prettify())  <span class="hljs-comment"># 把要解析的字符串以标准的缩进格式输出(自动更正格式)</span>
<span class="hljs-built_in">print</span>(soup.title.string)


<span class="hljs-comment"># 输出</span>
&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt;
   The Dormouse<span class="hljs-string">&#x27;s story
  &lt;/title&gt;
 &lt;/head&gt;
 &lt;body&gt;
  &lt;p class=&quot;title&quot; name=&quot;dromouse&quot;&gt;
   &lt;b&gt;
    The Dormouse&#x27;</span>s story
   &lt;/b&gt;
  &lt;/p&gt;
  &lt;p <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;story&quot;</span>&gt;
   Once upon a time there were three little sisters; <span class="hljs-keyword">and</span> their names were
   &lt;a <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;sister&quot;</span> href=<span class="hljs-string">&quot;http://example.com/elsie&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;link1&quot;</span>&gt;
    &lt;!-- Elsie --&gt;
   &lt;/a&gt;
   ,
   &lt;a <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;sister&quot;</span> href=<span class="hljs-string">&quot;http://example.com/lacie&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;link2&quot;</span>&gt;
    Lacie
   &lt;/a&gt;
   <span class="hljs-keyword">and</span>
   &lt;a <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;sister&quot;</span> href=<span class="hljs-string">&quot;http://example.com/tillie&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;link3&quot;</span>&gt;
    Tillie
   &lt;/a&gt;
   ;
<span class="hljs-keyword">and</span> they lived at the bottom of a well.
  &lt;/p&gt;
  &lt;p <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;story&quot;</span>&gt;
   ...
  &lt;/p&gt;
 &lt;/body&gt;
&lt;/html&gt;
The Dormouse<span class="hljs-string">&#x27;s story</span>
</code></pre>
<h2 id="节点选择器">节点选择器</h2>
<h3 id="选择元素">选择元素</h3>
<pre><code class="hljs language-python">soup = BeautifulSoup(html, <span class="hljs-string">&#x27;lxml&#x27;</span>)
<span class="hljs-built_in">print</span>(soup.title)
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(soup.title.string))
<span class="hljs-built_in">print</span>(soup.title.string)
<span class="hljs-built_in">print</span>(soup.head)
<span class="hljs-built_in">print</span>(soup.p)  <span class="hljs-comment"># 只选择第一个出现的p标签</span>


<span class="hljs-comment"># 输出</span>
&lt;title&gt;The Dormouse<span class="hljs-string">&#x27;s story&lt;/title&gt;
&lt;class &#x27;</span>bs4.element.NavigableString<span class="hljs-string">&#x27;&gt;
The Dormouse&#x27;</span>s story
&lt;head&gt;&lt;title&gt;The Dormouse<span class="hljs-string">&#x27;s story&lt;/title&gt;&lt;/head&gt;
&lt;p class=&quot;title&quot; name=&quot;dromouse&quot;&gt;&lt;b&gt;The Dormouse&#x27;</span>s story&lt;/b&gt;&lt;/p&gt;
</code></pre>
<h2 id="提取信息">提取信息</h2>
<h4 id="获取名称">获取名称</h4>
<p>可以利用 name 属性来获取节点的名称。还是以上面的文本为例，我们选取 title 节点，然后调用 name 属性就可以得到节点名称。</p>
<pre><code class="hljs language-python"><span class="hljs-built_in">print</span>(soup.title.name)

<span class="hljs-comment"># 输出</span>
title
</code></pre>
<h4 id="获取属性">获取属性</h4>
<p>每个节点可能有多个属性，比如 id，class 等等，我们选择到这个节点元素之后，可以调用 attrs 获取所有属性。</p>
<pre><code class="hljs language-python"><span class="hljs-built_in">print</span>(soup.p.attrs)
<span class="hljs-built_in">print</span>(soup.p.attrs[<span class="hljs-string">&#x27;name&#x27;</span>])
<span class="hljs-comment">#更加简便的写法</span>
<span class="hljs-built_in">print</span>(soup.p[<span class="hljs-string">&#x27;name&#x27;</span>])
<span class="hljs-built_in">print</span>(soup.p[<span class="hljs-string">&#x27;class&#x27;</span>])

<span class="hljs-comment"># 输出</span>
{<span class="hljs-string">&#x27;class&#x27;</span>: [<span class="hljs-string">&#x27;title&#x27;</span>], <span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;dromouse&#x27;</span>}
dromouse
dromouse
[<span class="hljs-string">&#x27;title&#x27;</span>]
</code></pre>
<h4 id="获取内容">获取内容</h4>
<p>可以利用 string 属性获取节点元素包含的文本内容。</p>
<pre><code class="hljs language-python"><span class="hljs-built_in">print</span>(soup.p.string)

<span class="hljs-comment"># 输出</span>
The Dormouse<span class="hljs-string">&#x27;s story</span>
</code></pre>
<h3 id="嵌套选择">嵌套选择</h3>
<p>在上面的例子中我们知道每一个返回结果都是 bs4.element.Tag 类型，它同样可以继续调用节点进行下一步的选择，比如我们获取了 head 节点元素，我们可以继续调用 head 来选取其内部的 head 节点元素。</p>
<pre><code class="hljs language-python">html = <span class="hljs-string">&quot;&quot;&quot;
&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
&quot;&quot;&quot;</span>

<span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup
soup = BeautifulSoup(html, <span class="hljs-string">&#x27;lxml&#x27;</span>)
<span class="hljs-built_in">print</span>(soup.head.title)
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(soup.head.title))
<span class="hljs-built_in">print</span>(soup.head.title.string)


<span class="hljs-comment"># 输出</span>
&lt;title&gt;The Dormouse<span class="hljs-string">&#x27;s story&lt;/title&gt;
&lt;class &#x27;</span>bs4.element.Tag<span class="hljs-string">&#x27;&gt;
The Dormouse&#x27;</span>s story
</code></pre>
<h3 id="关联选择">关联选择</h3>
<p>我们在做选择的时候有时候不能做到一步就可以选择到想要的节点元素，有时候在选择的时候需要先选中某一个节点元素，然后以它为基准再选择它的子节点、父节点、兄弟节点等等。</p>
<h4 id="子节点和子孙节点">子节点和子孙节点</h4>
<p>选取到了一个节点元素之后，如果想要获取它的<strong>直接子节点</strong>可以调用 contents 属性。 contents 返回的是列表类型， children 返回的是生成器类型。</p>
<pre><code class="hljs language-python"><span class="hljs-built_in">print</span>(soup.p.contents)
<span class="hljs-built_in">print</span>(soup.p.children)
<span class="hljs-built_in">print</span>(soup.p.contents)

<span class="hljs-built_in">print</span>(soup.p.children)
<span class="hljs-keyword">for</span> i, child <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(soup.p.children):
    <span class="hljs-built_in">print</span>(i, child)


<span class="hljs-comment"># 输出</span>
[<span class="hljs-string">&#x27;Once upon a time there were three little sisters; and their names were\n&#x27;</span>, &lt;a <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;sister&quot;</span> href=<span class="hljs-string">&quot;http://example.com/elsie&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;link1&quot;</span>&gt;&lt;!-- Elsie --&gt;&lt;/a&gt;, <span class="hljs-string">&#x27;,\n&#x27;</span>, &lt;a <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;sister&quot;</span> href=<span class="hljs-string">&quot;http://example.com/lacie&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;link2&quot;</span>&gt;Lacie&lt;/a&gt;, <span class="hljs-string">&#x27; and\n&#x27;</span>, &lt;a <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;sister&quot;</span> href=<span class="hljs-string">&quot;http://example.com/tillie&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;link3&quot;</span>&gt;Tillie&lt;/a&gt;, <span class="hljs-string">&#x27;;\nand they lived at the bottom of a well.&#x27;</span>]

<span class="hljs-number">0</span> Once upon a time there were three little sisters; <span class="hljs-keyword">and</span> their names were

<span class="hljs-number">1</span> &lt;a <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;sister&quot;</span> href=<span class="hljs-string">&quot;http://example.com/elsie&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;link1&quot;</span>&gt;&lt;!-- Elsie --&gt;&lt;/a&gt;
<span class="hljs-number">2</span> ,

<span class="hljs-number">3</span> &lt;a <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;sister&quot;</span> href=<span class="hljs-string">&quot;http://example.com/lacie&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;link2&quot;</span>&gt;Lacie&lt;/a&gt;
<span class="hljs-number">4</span>  <span class="hljs-keyword">and</span>

<span class="hljs-number">5</span> &lt;a <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;sister&quot;</span> href=<span class="hljs-string">&quot;http://example.com/tillie&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;link3&quot;</span>&gt;Tillie&lt;/a&gt;
<span class="hljs-number">6</span> ;
<span class="hljs-keyword">and</span> they lived at the bottom of a well.
</code></pre>
<h4 id="父节点和祖先节点">父节点和祖先节点</h4>
<p>如果要获取某个节点元素的直接父节点，可以调用 parent 属性，要想获取所有的祖先节点，可以调用 parents 。</p>
<pre><code class="hljs language-python"><span class="hljs-built_in">print</span>(soup.a.parent)
<span class="hljs-built_in">print</span>(soup.a.parents)

<span class="hljs-comment"># 输出</span>
&lt;p <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;story&quot;</span>&gt;Once upon a time there were three little sisters; <span class="hljs-keyword">and</span> their names were
&lt;a <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;sister&quot;</span> href=<span class="hljs-string">&quot;http://example.com/elsie&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;link1&quot;</span>&gt;&lt;!-- Elsie --&gt;&lt;/a&gt;,
&lt;a <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;sister&quot;</span> href=<span class="hljs-string">&quot;http://example.com/lacie&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;link2&quot;</span>&gt;Lacie&lt;/a&gt; <span class="hljs-keyword">and</span>
&lt;a <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;sister&quot;</span> href=<span class="hljs-string">&quot;http://example.com/tillie&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;link3&quot;</span>&gt;Tillie&lt;/a&gt;;
<span class="hljs-keyword">and</span> they lived at the bottom of a well.&lt;/p&gt;

[(<span class="hljs-number">0</span>, &lt;p <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;story&quot;</span>&gt;Once upon a time there were three little sisters; <span class="hljs-keyword">and</span> their names were
&lt;a <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;sister&quot;</span> href=<span class="hljs-string">&quot;http://example.com/elsie&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;link1&quot;</span>&gt;&lt;!-- Elsie --&gt;&lt;/a&gt;,
&lt;a <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;sister&quot;</span> href=<span class="hljs-string">&quot;http://example.com/lacie&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;link2&quot;</span>&gt;Lacie&lt;/a&gt; <span class="hljs-keyword">and</span>
&lt;a <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;sister&quot;</span> href=<span class="hljs-string">&quot;http://example.com/tillie&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;link3&quot;</span>&gt;Tillie&lt;/a&gt;;
<span class="hljs-keyword">and</span> they lived at the bottom of a well.&lt;/p&gt;), (<span class="hljs-number">1</span>, &lt;body&gt;
&lt;p <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;story&quot;</span>&gt;Once upon a time there were three little sisters; <span class="hljs-keyword">and</span> their names were
&lt;a <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;sister&quot;</span> href=<span class="hljs-string">&quot;http://example.com/elsie&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;link1&quot;</span>&gt;&lt;!-- Elsie --&gt;&lt;/a&gt;,
&lt;a <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;sister&quot;</span> href=<span class="hljs-string">&quot;http://example.com/lacie&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;link2&quot;</span>&gt;Lacie&lt;/a&gt; <span class="hljs-keyword">and</span>
&lt;a <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;sister&quot;</span> href=<span class="hljs-string">&quot;http://example.com/tillie&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;link3&quot;</span>&gt;Tillie&lt;/a&gt;;
<span class="hljs-keyword">and</span> they lived at the bottom of a well.&lt;/p&gt;
&lt;p <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;story&quot;</span>&gt;...&lt;/p&gt;
&lt;/body&gt;), (<span class="hljs-number">2</span>, &lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse<span class="hljs-string">&#x27;s story&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
&lt;p class=&quot;story&quot;&gt;Once upon a time there were three little sisters; and their names were
&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;&lt;!-- Elsie --&gt;&lt;/a&gt;,
&lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; and
&lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;;
and they lived at the bottom of a well.&lt;/p&gt;
&lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;
&lt;/body&gt;&lt;/html&gt;), (3, &lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse&#x27;</span>s story&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
&lt;p <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;story&quot;</span>&gt;Once upon a time there were three little sisters; <span class="hljs-keyword">and</span> their names were
&lt;a <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;sister&quot;</span> href=<span class="hljs-string">&quot;http://example.com/elsie&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;link1&quot;</span>&gt;&lt;!-- Elsie --&gt;&lt;/a&gt;,
&lt;a <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;sister&quot;</span> href=<span class="hljs-string">&quot;http://example.com/lacie&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;link2&quot;</span>&gt;Lacie&lt;/a&gt; <span class="hljs-keyword">and</span>
&lt;a <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;sister&quot;</span> href=<span class="hljs-string">&quot;http://example.com/tillie&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;link3&quot;</span>&gt;Tillie&lt;/a&gt;;
<span class="hljs-keyword">and</span> they lived at the bottom of a well.&lt;/p&gt;
&lt;p <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;story&quot;</span>&gt;...&lt;/p&gt;
&lt;/body&gt;&lt;/html&gt;)]
</code></pre>
<h4 id="兄弟节点">兄弟节点</h4>
<pre><code class="hljs language-python"><span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup
html = <span class="hljs-string">&quot;&quot;&quot;
&lt;html&gt;
    &lt;body&gt;
        &lt;p class=&quot;story&quot;&gt;
            Once upon a time there were three little sisters; and their names were
            &lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&gt;
                &lt;span&gt;Elsie&lt;/span&gt;
            &lt;/a&gt;
            Hello
            &lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; 
            and
            &lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;
            and they lived at the bottom of a well.
        &lt;/p&gt;
&quot;&quot;&quot;</span>
soup = BeautifulSoup(html, <span class="hljs-string">&#x27;lxml&#x27;</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;next_sibling&#x27;</span>, soup.a.next_sibling)
<span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;prev_sibling&#x27;</span>, soup.a.previous_sibling)
<span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;next_siblings&#x27;</span>, <span class="hljs-built_in">list</span>(<span class="hljs-built_in">enumerate</span>(soup.a.next_sibling)))
<span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;prev_siblings&#x27;</span>, <span class="hljs-built_in">list</span>(<span class="hljs-built_in">enumerate</span>(soup.a.previous_sibling)))


<span class="hljs-comment"># 输出</span>
next_sibling 
            Hello
            
prev_sibling 
            Once upon a time there were three little sisters; <span class="hljs-keyword">and</span> their names were
            
next_siblings [(<span class="hljs-number">0</span>, <span class="hljs-string">&#x27;\n            Hello\n            &#x27;</span>), (<span class="hljs-number">1</span>, &lt;a <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;sister&quot;</span> href=<span class="hljs-string">&quot;http://example.com/lacie&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;link2&quot;</span>&gt;Lacie&lt;/a&gt;), (<span class="hljs-number">2</span>, <span class="hljs-string">&#x27; \n            and\n            &#x27;</span>), (<span class="hljs-number">3</span>, &lt;a <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;sister&quot;</span> href=<span class="hljs-string">&quot;http://example.com/tillie&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;link3&quot;</span>&gt;Tillie&lt;/a&gt;), (<span class="hljs-number">4</span>, <span class="hljs-string">&#x27;\n            and they lived at the bottom of a well.\n        &#x27;</span>)]
prev_siblings [(<span class="hljs-number">0</span>, <span class="hljs-string">&#x27;\n            Once upon a time there were three little sisters; and their names were\n            &#x27;</span>)]
</code></pre>
<h2 id="方法选择器">方法选择器</h2>
<p>前面讲的选择方法都是通过属性来选择元素的，这种选择方法非常快，但是如果要进行比较复杂的选择的话则会比较繁琐，不够灵活。所以 BeautifulSoup 还提供了一些查询的方法，比如 find_all()、find() 等方法，我们可以调用方法然后传入相应等参数就可以灵活地进行查询。</p>
<h3 id="find_all--查找所有符合条件的元素">find_all--查找所有符合条件的元素</h3>
<pre><code class="hljs language-python"><span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup
html=<span class="hljs-string">&#x27;&#x27;&#x27;
&lt;div class=&quot;panel&quot;&gt;
    &lt;div class=&quot;panel-heading&quot;&gt;
        &lt;h4&gt;Hello&lt;/h4&gt;
    &lt;/div&gt;
    &lt;div class=&quot;panel-body&quot;&gt;
        &lt;ul class=&quot;list&quot; id=&quot;list-1&quot;&gt;
            &lt;li class=&quot;element&quot;&gt;Foo&lt;/li&gt;
            &lt;li class=&quot;element&quot;&gt;Bar&lt;/li&gt;
            &lt;li class=&quot;element&quot;&gt;Jay&lt;/li&gt;
        &lt;/ul&gt;
        &lt;ul class=&quot;list list-small&quot; id=&quot;list-2&quot;&gt;
            &lt;li class=&quot;element&quot;&gt;Foo&lt;/li&gt;
            &lt;li class=&quot;element&quot;&gt;Bar&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
&lt;/div&gt;
&#x27;&#x27;&#x27;</span>
soup = BeautifulSoup(html, <span class="hljs-string">&#x27;lxml&#x27;</span>)
<span class="hljs-built_in">print</span>(soup.find_all(name = <span class="hljs-string">&#x27;ul&#x27;</span>))
<span class="hljs-keyword">for</span> ul <span class="hljs-keyword">in</span> soup.find_all(name = <span class="hljs-string">&#x27;ul&#x27;</span>):
    <span class="hljs-built_in">print</span>(ul.find_all(name = <span class="hljs-string">&#x27;li&#x27;</span>))
    <span class="hljs-keyword">for</span> li <span class="hljs-keyword">in</span> ul.find_all(name = <span class="hljs-string">&#x27;li&#x27;</span>):
        <span class="hljs-built_in">print</span>(li.string)

<span class="hljs-comment"># 输出</span>
[&lt;ul <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;list&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;list-1&quot;</span>&gt;
&lt;li <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;element&quot;</span>&gt;Foo&lt;/li&gt;
&lt;li <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;element&quot;</span>&gt;Bar&lt;/li&gt;
&lt;li <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;element&quot;</span>&gt;Jay&lt;/li&gt;
&lt;/ul&gt;, &lt;ul <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;list list-small&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;list-2&quot;</span>&gt;
&lt;li <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;element&quot;</span>&gt;Foo&lt;/li&gt;
&lt;li <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;element&quot;</span>&gt;Bar&lt;/li&gt;
&lt;/ul&gt;]
[&lt;li <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;element&quot;</span>&gt;Foo&lt;/li&gt;, &lt;li <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;element&quot;</span>&gt;Bar&lt;/li&gt;, &lt;li <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;element&quot;</span>&gt;Jay&lt;/li&gt;]
Foo
Bar
Jay
[&lt;li <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;element&quot;</span>&gt;Foo&lt;/li&gt;, &lt;li <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;element&quot;</span>&gt;Bar&lt;/li&gt;]
Foo
Bar
</code></pre>
<h3 id="attrs">attrs</h3>
<p>根据属性进行查询</p>
<pre><code class="hljs language-python"><span class="hljs-built_in">print</span>(soup.find_all(attrs = {<span class="hljs-string">&#x27;id&#x27;</span>: <span class="hljs-string">&#x27;list-1&#x27;</span>}))

<span class="hljs-comment"># 输出</span>
[&lt;ul <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;list&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;list-1&quot;</span>&gt;
&lt;li <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;element&quot;</span>&gt;Foo&lt;/li&gt;
&lt;li <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;element&quot;</span>&gt;Bar&lt;/li&gt;
&lt;li <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;element&quot;</span>&gt;Jay&lt;/li&gt;
&lt;/ul&gt;]
</code></pre>
<h3 id="text">text</h3>
<p>text 参数可以用来匹配节点的文本，传入的形式可以是字符串，可以是正则表达式对象。</p>
<pre><code class="hljs language-python"><span class="hljs-keyword">import</span> re
html=<span class="hljs-string">&#x27;&#x27;&#x27;
&lt;div class=&quot;panel&quot;&gt;
    &lt;div class=&quot;panel-body&quot;&gt;
        &lt;a&gt;Hello, this is a link&lt;/a&gt;
        &lt;a&gt;Hello, this is a link, too&lt;/a&gt;
    &lt;/div&gt;
&lt;/div&gt;
&#x27;&#x27;&#x27;</span>
<span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup
soup = BeautifulSoup(html, <span class="hljs-string">&#x27;lxml&#x27;</span>)
<span class="hljs-built_in">print</span>(soup.find_all(text=re.<span class="hljs-built_in">compile</span>(<span class="hljs-string">&#x27;link&#x27;</span>)))

<span class="hljs-comment"># 输出</span>
[<span class="hljs-string">&#x27;Hello, this is a link&#x27;</span>, <span class="hljs-string">&#x27;Hello, this is a link, too&#x27;</span>]
</code></pre>
<h3 id="find">find()</h3>
<p>find方法和find_all类似，只是返回的是第一个匹配的元素</p>
<h3 id="othres-api">othres API</h3>
<ul>
<li><p>find_parents() find_parent()
find_parents() 返回所有祖先节点，find_parent() 返回直接父节点。</p>
</li>
<li><p>find_next_siblings() find_next_sibling()
find_next_siblings() 返回后面所有兄弟节点，find_next_sibling() 返回后面第一个兄弟节点。</p>
</li>
<li><p>find_previous_siblings() find_previous_sibling()
find_previous_siblings() 返回前面所有兄弟节点，find_previous_sibling() 返回前面第一个兄弟节点。</p>
</li>
<li><p>find_all_next() find_next()
find_all_next() 返回节点后所有符合条件的节点, find_next() 返回第一个符合条件的节点。</p>
</li>
<li><p>find_all_previous() 和 find_previous()
find_all_previous() 返回节点后所有符合条件的节点, find_previous() 返回第一个符合条件的节点</p>
</li>
</ul>
<h2 id="css选择器">CSS选择器</h2>
<p>BeautifulSoup 还提供了另外一种选择器，那就是 CSS 选择器。使用 CSS 选择器，只需要调用 select() 方法，传入相应的 CSS 选择器即可。</p>
<pre><code class="hljs language-python"><span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup
html=<span class="hljs-string">&#x27;&#x27;&#x27;
&lt;div class=&quot;panel&quot;&gt;
    &lt;div class=&quot;panel-heading&quot;&gt;
        &lt;h4&gt;Hello&lt;/h4&gt;
    &lt;/div&gt;
    &lt;div class=&quot;panel-body&quot;&gt;
        &lt;ul class=&quot;list&quot; id=&quot;list-1&quot;&gt;
            &lt;li class=&quot;element&quot;&gt;Foo&lt;/li&gt;
            &lt;li class=&quot;element&quot;&gt;Bar&lt;/li&gt;
            &lt;li class=&quot;element&quot;&gt;Jay&lt;/li&gt;
        &lt;/ul&gt;
        &lt;ul class=&quot;list list-small&quot; id=&quot;list-2&quot;&gt;
            &lt;li class=&quot;element&quot;&gt;Foo&lt;/li&gt;
            &lt;li class=&quot;element&quot;&gt;Bar&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
&lt;/div&gt;
&#x27;&#x27;&#x27;</span>
soup = BeautifulSoup(html, <span class="hljs-string">&#x27;lxml&#x27;</span>)
<span class="hljs-built_in">print</span>(soup.select(<span class="hljs-string">&#x27;.panel .panel-heading&#x27;</span>))
<span class="hljs-built_in">print</span>(soup.select(<span class="hljs-string">&#x27;ul li&#x27;</span>))
<span class="hljs-built_in">print</span>(soup.select(<span class="hljs-string">&#x27;#list-2 .element&#x27;</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(soup.select(<span class="hljs-string">&#x27;ul&#x27;</span>)[<span class="hljs-number">0</span>]))


<span class="hljs-comment"># 输出</span>
[&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;panel-heading&quot;</span>&gt;
&lt;h4&gt;Hello&lt;/h4&gt;
&lt;/div&gt;]
[&lt;li <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;element&quot;</span>&gt;Foo&lt;/li&gt;, &lt;li <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;element&quot;</span>&gt;Bar&lt;/li&gt;, &lt;li <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;element&quot;</span>&gt;Jay&lt;/li&gt;, &lt;li <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;element&quot;</span>&gt;Foo&lt;/li&gt;, &lt;li <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;element&quot;</span>&gt;Bar&lt;/li&gt;]
[&lt;li <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;element&quot;</span>&gt;Foo&lt;/li&gt;, &lt;li <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;element&quot;</span>&gt;Bar&lt;/li&gt;]
&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;bs4.element.Tag&#x27;</span>&gt;
</code></pre>
<h3 id="嵌套选择-1">嵌套选择</h3>
<p>select() 方法同样支持嵌套选择，例如我们先选择所有 ul 节点，再遍历每个 ul 节点选择其 li 节点。</p>
<pre><code class="hljs language-python"><span class="hljs-keyword">for</span> ul <span class="hljs-keyword">in</span> soup.select(<span class="hljs-string">&#x27;ul&#x27;</span>):
    <span class="hljs-built_in">print</span>(ul.select(<span class="hljs-string">&#x27;li&#x27;</span>))

<span class="hljs-comment"># 输出</span>
[&lt;li <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;element&quot;</span>&gt;Foo&lt;/li&gt;, &lt;li <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;element&quot;</span>&gt;Bar&lt;/li&gt;, &lt;li <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;element&quot;</span>&gt;Jay&lt;/li&gt;]
[&lt;li <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;element&quot;</span>&gt;Foo&lt;/li&gt;, &lt;li <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;element&quot;</span>&gt;Bar&lt;/li&gt;]
</code></pre>
<h3 id="获取属性-1">获取属性</h3>
<pre><code class="hljs language-python"><span class="hljs-keyword">for</span> ul <span class="hljs-keyword">in</span> soup.select(<span class="hljs-string">&#x27;ul&#x27;</span>):
    <span class="hljs-built_in">print</span>(ul[<span class="hljs-string">&#x27;id&#x27;</span>])
    <span class="hljs-built_in">print</span>(ul.attrs[<span class="hljs-string">&#x27;id&#x27;</span>])

<span class="hljs-comment"># 输出</span>
<span class="hljs-built_in">list</span>-<span class="hljs-number">1</span>
<span class="hljs-built_in">list</span>-<span class="hljs-number">1</span>
<span class="hljs-built_in">list</span>-<span class="hljs-number">2</span>
<span class="hljs-built_in">list</span>-<span class="hljs-number">2</span>
</code></pre>
<h3 id="获取文本">获取文本</h3>
<p>获取文本可以用前面所讲的 string 属性，还有一个方法那就是 get_text()。</p>
<pre><code class="hljs language-python"><span class="hljs-keyword">for</span> li <span class="hljs-keyword">in</span> soup.select(<span class="hljs-string">&#x27;li&#x27;</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Get Text:&#x27;</span>, li.get_text())
    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;String:&#x27;</span>, li.string)

<span class="hljs-comment"># 输出</span>
Get Text: Foo
String: Foo
Get Text: Bar
String: Bar
Get Text: Jay
String: Jay
Get Text: Foo
String: Foo
Get Text: Bar
String: Bar
</code></pre>
</div></div></div></article></div></main><footer class="flex flex-col items-center justify-center leading-8 text-sm w-full py-2 border-t text-skin-muted"><p>Designed &amp; developed by<a class="ml-1 text-yellow" target="_blank" href="https://github.com/mrrs878" rel="noreferrer">Mr.RS</a></p><p>©<!-- --> <!-- -->2022</p></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Python-BeautifulSoup","tags":["Python","BeautifulSoup"],"categories":"Python","description":"# Python-BeautifulSoup的使用\nBeautiSoup，是借助网页的结构和属性等特性来解析网页的工具，有了它我们不用再去写一些复杂的正则，只需要简单的几条语句就可以完成网页中某个元素的提取。\n## BeautifulSoup简介\n官方解释如下：\nBeautifulSoup提供一些简单的、Python式的函数用来处理导航、搜索、修改分析树等功能。它是一个工具箱，通过解析文档为用户","createDate":"2018-11-16 14:50:41","updateDate":"2021-02-20 17:20:24","body":"\u003ch1 id=\"python-beautifulsoup的使用\"\u003ePython-BeautifulSoup的使用\u003c/h1\u003e\n\u003cp\u003eBeautiSoup，是借助网页的结构和属性等特性来解析网页的工具，有了它我们不用再去写一些复杂的正则，只需要简单的几条语句就可以完成网页中某个元素的提取。\u003c/p\u003e\n\u003ch2 id=\"beautifulsoup简介\"\u003eBeautifulSoup简介\u003c/h2\u003e\n\u003cp\u003e官方解释如下：\nBeautifulSoup提供一些简单的、Python式的函数用来处理导航、搜索、修改分析树等功能。它是一个工具箱，通过解析文档为用户提供需要抓取的数据，因为简单，所以不需要多少代码就可以写出一个完整的应用程序。 BeautifulSoup 自动将输入文档转换为 Unicode 编码，输出文档转换为 utf-8 编码。你不需要考虑编码方式，除非文档没有指定一个编码方式，这时你仅仅需要说明一下原始编码方式就可以了。 BeautifulSoup 已成为和 lxml、html6lib 一样出色的 Python 解释器，为用户灵活地提供不同的解析策略或强劲的速度。\u003c/p\u003e\n\u003ch2 id=\"解析器\"\u003e解析器\u003c/h2\u003e\n\u003cp\u003eBeautifulSoup 在解析的时候实际上是依赖于解析器的，它除了支持 Python 标准库中的 HTML 解析器，还支持一些第三方的解析器比如 LXML，下面我们对 BeautifulSoup 支持的解析器及它们的一些优缺点做一个简单的对比。\n\u003cimg src=\"https://t1.picb.cc/uploads/2018/11/16/JXuhZc.png\" alt=\"enter image description here\"\u003e\u003c/p\u003e\n\u003ch2 id=\"基本使用\"\u003e基本使用\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e bs4 \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e BeautifulSoup\n\nhtml = \u003cspan class=\"hljs-string\"\u003e\u0026#x27;\u0026#x27;\u0026#x27;\n\u0026lt;html\u0026gt;\u0026lt;head\u0026gt;\u0026lt;title\u0026gt;The Dormouse\u0026#x27;s story\u0026lt;/title\u0026gt;\u0026lt;/head\u0026gt;\n\u0026lt;body\u0026gt;\n\u0026lt;p class=\u0026quot;title\u0026quot; name=\u0026quot;dromouse\u0026quot;\u0026gt;\u0026lt;b\u0026gt;The Dormouse\u0026#x27;s story\u0026lt;/b\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p class=\u0026quot;story\u0026quot;\u0026gt;Once upon a time there were three little sisters; and their names were\n\u0026lt;a href=\u0026quot;http://example.com/elsie\u0026quot; class=\u0026quot;sister\u0026quot; id=\u0026quot;link1\u0026quot;\u0026gt;\u0026lt;!-- Elsie --\u0026gt;\u0026lt;/a\u0026gt;,\n\u0026lt;a href=\u0026quot;http://example.com/lacie\u0026quot; class=\u0026quot;sister\u0026quot; id=\u0026quot;link2\u0026quot;\u0026gt;Lacie\u0026lt;/a\u0026gt; and\n\u0026lt;a href=\u0026quot;http://example.com/tillie\u0026quot; class=\u0026quot;sister\u0026quot; id=\u0026quot;link3\u0026quot;\u0026gt;Tillie\u0026lt;/a\u0026gt;;\nand they lived at the bottom of a well.\u0026lt;/p\u0026gt;\n\u0026lt;p class=\u0026quot;story\u0026quot;\u0026gt;...\u0026lt;/p\u0026gt;\n\u0026#x27;\u0026#x27;\u0026#x27;\u003c/span\u003e\n\nsoup = BeautifulSoup(html, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;lxml\u0026#x27;\u003c/span\u003e) \n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(soup.prettify())  \u003cspan class=\"hljs-comment\"\u003e# 把要解析的字符串以标准的缩进格式输出(自动更正格式)\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(soup.title.string)\n\n\n\u003cspan class=\"hljs-comment\"\u003e# 输出\u003c/span\u003e\n\u0026lt;html\u0026gt;\n \u0026lt;head\u0026gt;\n  \u0026lt;title\u0026gt;\n   The Dormouse\u003cspan class=\"hljs-string\"\u003e\u0026#x27;s story\n  \u0026lt;/title\u0026gt;\n \u0026lt;/head\u0026gt;\n \u0026lt;body\u0026gt;\n  \u0026lt;p class=\u0026quot;title\u0026quot; name=\u0026quot;dromouse\u0026quot;\u0026gt;\n   \u0026lt;b\u0026gt;\n    The Dormouse\u0026#x27;\u003c/span\u003es story\n   \u0026lt;/b\u0026gt;\n  \u0026lt;/p\u0026gt;\n  \u0026lt;p \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;story\u0026quot;\u003c/span\u003e\u0026gt;\n   Once upon a time there were three little sisters; \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e their names were\n   \u0026lt;a \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;sister\u0026quot;\u003c/span\u003e href=\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://example.com/elsie\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;link1\u0026quot;\u003c/span\u003e\u0026gt;\n    \u0026lt;!-- Elsie --\u0026gt;\n   \u0026lt;/a\u0026gt;\n   ,\n   \u0026lt;a \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;sister\u0026quot;\u003c/span\u003e href=\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://example.com/lacie\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;link2\u0026quot;\u003c/span\u003e\u0026gt;\n    Lacie\n   \u0026lt;/a\u0026gt;\n   \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e\n   \u0026lt;a \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;sister\u0026quot;\u003c/span\u003e href=\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://example.com/tillie\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;link3\u0026quot;\u003c/span\u003e\u0026gt;\n    Tillie\n   \u0026lt;/a\u0026gt;\n   ;\n\u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e they lived at the bottom of a well.\n  \u0026lt;/p\u0026gt;\n  \u0026lt;p \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;story\u0026quot;\u003c/span\u003e\u0026gt;\n   ...\n  \u0026lt;/p\u0026gt;\n \u0026lt;/body\u0026gt;\n\u0026lt;/html\u0026gt;\nThe Dormouse\u003cspan class=\"hljs-string\"\u003e\u0026#x27;s story\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"节点选择器\"\u003e节点选择器\u003c/h2\u003e\n\u003ch3 id=\"选择元素\"\u003e选择元素\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003esoup = BeautifulSoup(html, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;lxml\u0026#x27;\u003c/span\u003e)\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(soup.title)\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e(soup.title.string))\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(soup.title.string)\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(soup.head)\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(soup.p)  \u003cspan class=\"hljs-comment\"\u003e# 只选择第一个出现的p标签\u003c/span\u003e\n\n\n\u003cspan class=\"hljs-comment\"\u003e# 输出\u003c/span\u003e\n\u0026lt;title\u0026gt;The Dormouse\u003cspan class=\"hljs-string\"\u003e\u0026#x27;s story\u0026lt;/title\u0026gt;\n\u0026lt;class \u0026#x27;\u003c/span\u003ebs4.element.NavigableString\u003cspan class=\"hljs-string\"\u003e\u0026#x27;\u0026gt;\nThe Dormouse\u0026#x27;\u003c/span\u003es story\n\u0026lt;head\u0026gt;\u0026lt;title\u0026gt;The Dormouse\u003cspan class=\"hljs-string\"\u003e\u0026#x27;s story\u0026lt;/title\u0026gt;\u0026lt;/head\u0026gt;\n\u0026lt;p class=\u0026quot;title\u0026quot; name=\u0026quot;dromouse\u0026quot;\u0026gt;\u0026lt;b\u0026gt;The Dormouse\u0026#x27;\u003c/span\u003es story\u0026lt;/b\u0026gt;\u0026lt;/p\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"提取信息\"\u003e提取信息\u003c/h2\u003e\n\u003ch4 id=\"获取名称\"\u003e获取名称\u003c/h4\u003e\n\u003cp\u003e可以利用 name 属性来获取节点的名称。还是以上面的文本为例，我们选取 title 节点，然后调用 name 属性就可以得到节点名称。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(soup.title.name)\n\n\u003cspan class=\"hljs-comment\"\u003e# 输出\u003c/span\u003e\ntitle\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4 id=\"获取属性\"\u003e获取属性\u003c/h4\u003e\n\u003cp\u003e每个节点可能有多个属性，比如 id，class 等等，我们选择到这个节点元素之后，可以调用 attrs 获取所有属性。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(soup.p.attrs)\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(soup.p.attrs[\u003cspan class=\"hljs-string\"\u003e\u0026#x27;name\u0026#x27;\u003c/span\u003e])\n\u003cspan class=\"hljs-comment\"\u003e#更加简便的写法\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(soup.p[\u003cspan class=\"hljs-string\"\u003e\u0026#x27;name\u0026#x27;\u003c/span\u003e])\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(soup.p[\u003cspan class=\"hljs-string\"\u003e\u0026#x27;class\u0026#x27;\u003c/span\u003e])\n\n\u003cspan class=\"hljs-comment\"\u003e# 输出\u003c/span\u003e\n{\u003cspan class=\"hljs-string\"\u003e\u0026#x27;class\u0026#x27;\u003c/span\u003e: [\u003cspan class=\"hljs-string\"\u003e\u0026#x27;title\u0026#x27;\u003c/span\u003e], \u003cspan class=\"hljs-string\"\u003e\u0026#x27;name\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026#x27;dromouse\u0026#x27;\u003c/span\u003e}\ndromouse\ndromouse\n[\u003cspan class=\"hljs-string\"\u003e\u0026#x27;title\u0026#x27;\u003c/span\u003e]\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4 id=\"获取内容\"\u003e获取内容\u003c/h4\u003e\n\u003cp\u003e可以利用 string 属性获取节点元素包含的文本内容。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(soup.p.string)\n\n\u003cspan class=\"hljs-comment\"\u003e# 输出\u003c/span\u003e\nThe Dormouse\u003cspan class=\"hljs-string\"\u003e\u0026#x27;s story\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"嵌套选择\"\u003e嵌套选择\u003c/h3\u003e\n\u003cp\u003e在上面的例子中我们知道每一个返回结果都是 bs4.element.Tag 类型，它同样可以继续调用节点进行下一步的选择，比如我们获取了 head 节点元素，我们可以继续调用 head 来选取其内部的 head 节点元素。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003ehtml = \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026quot;\u0026quot;\n\u0026lt;html\u0026gt;\u0026lt;head\u0026gt;\u0026lt;title\u0026gt;The Dormouse\u0026#x27;s story\u0026lt;/title\u0026gt;\u0026lt;/head\u0026gt;\n\u0026lt;body\u0026gt;\n\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e bs4 \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e BeautifulSoup\nsoup = BeautifulSoup(html, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;lxml\u0026#x27;\u003c/span\u003e)\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(soup.head.title)\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e(soup.head.title))\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(soup.head.title.string)\n\n\n\u003cspan class=\"hljs-comment\"\u003e# 输出\u003c/span\u003e\n\u0026lt;title\u0026gt;The Dormouse\u003cspan class=\"hljs-string\"\u003e\u0026#x27;s story\u0026lt;/title\u0026gt;\n\u0026lt;class \u0026#x27;\u003c/span\u003ebs4.element.Tag\u003cspan class=\"hljs-string\"\u003e\u0026#x27;\u0026gt;\nThe Dormouse\u0026#x27;\u003c/span\u003es story\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"关联选择\"\u003e关联选择\u003c/h3\u003e\n\u003cp\u003e我们在做选择的时候有时候不能做到一步就可以选择到想要的节点元素，有时候在选择的时候需要先选中某一个节点元素，然后以它为基准再选择它的子节点、父节点、兄弟节点等等。\u003c/p\u003e\n\u003ch4 id=\"子节点和子孙节点\"\u003e子节点和子孙节点\u003c/h4\u003e\n\u003cp\u003e选取到了一个节点元素之后，如果想要获取它的\u003cstrong\u003e直接子节点\u003c/strong\u003e可以调用 contents 属性。 contents 返回的是列表类型， children 返回的是生成器类型。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(soup.p.contents)\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(soup.p.children)\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(soup.p.contents)\n\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(soup.p.children)\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e i, child \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eenumerate\u003c/span\u003e(soup.p.children):\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(i, child)\n\n\n\u003cspan class=\"hljs-comment\"\u003e# 输出\u003c/span\u003e\n[\u003cspan class=\"hljs-string\"\u003e\u0026#x27;Once upon a time there were three little sisters; and their names were\\n\u0026#x27;\u003c/span\u003e, \u0026lt;a \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;sister\u0026quot;\u003c/span\u003e href=\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://example.com/elsie\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;link1\u0026quot;\u003c/span\u003e\u0026gt;\u0026lt;!-- Elsie --\u0026gt;\u0026lt;/a\u0026gt;, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;,\\n\u0026#x27;\u003c/span\u003e, \u0026lt;a \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;sister\u0026quot;\u003c/span\u003e href=\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://example.com/lacie\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;link2\u0026quot;\u003c/span\u003e\u0026gt;Lacie\u0026lt;/a\u0026gt;, \u003cspan class=\"hljs-string\"\u003e\u0026#x27; and\\n\u0026#x27;\u003c/span\u003e, \u0026lt;a \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;sister\u0026quot;\u003c/span\u003e href=\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://example.com/tillie\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;link3\u0026quot;\u003c/span\u003e\u0026gt;Tillie\u0026lt;/a\u0026gt;, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;;\\nand they lived at the bottom of a well.\u0026#x27;\u003c/span\u003e]\n\n\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e Once upon a time there were three little sisters; \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e their names were\n\n\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e \u0026lt;a \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;sister\u0026quot;\u003c/span\u003e href=\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://example.com/elsie\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;link1\u0026quot;\u003c/span\u003e\u0026gt;\u0026lt;!-- Elsie --\u0026gt;\u0026lt;/a\u0026gt;\n\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e ,\n\n\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e \u0026lt;a \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;sister\u0026quot;\u003c/span\u003e href=\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://example.com/lacie\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;link2\u0026quot;\u003c/span\u003e\u0026gt;Lacie\u0026lt;/a\u0026gt;\n\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e\n\n\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e \u0026lt;a \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;sister\u0026quot;\u003c/span\u003e href=\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://example.com/tillie\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;link3\u0026quot;\u003c/span\u003e\u0026gt;Tillie\u0026lt;/a\u0026gt;\n\u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e ;\n\u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e they lived at the bottom of a well.\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4 id=\"父节点和祖先节点\"\u003e父节点和祖先节点\u003c/h4\u003e\n\u003cp\u003e如果要获取某个节点元素的直接父节点，可以调用 parent 属性，要想获取所有的祖先节点，可以调用 parents 。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(soup.a.parent)\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(soup.a.parents)\n\n\u003cspan class=\"hljs-comment\"\u003e# 输出\u003c/span\u003e\n\u0026lt;p \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;story\u0026quot;\u003c/span\u003e\u0026gt;Once upon a time there were three little sisters; \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e their names were\n\u0026lt;a \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;sister\u0026quot;\u003c/span\u003e href=\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://example.com/elsie\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;link1\u0026quot;\u003c/span\u003e\u0026gt;\u0026lt;!-- Elsie --\u0026gt;\u0026lt;/a\u0026gt;,\n\u0026lt;a \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;sister\u0026quot;\u003c/span\u003e href=\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://example.com/lacie\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;link2\u0026quot;\u003c/span\u003e\u0026gt;Lacie\u0026lt;/a\u0026gt; \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e\n\u0026lt;a \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;sister\u0026quot;\u003c/span\u003e href=\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://example.com/tillie\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;link3\u0026quot;\u003c/span\u003e\u0026gt;Tillie\u0026lt;/a\u0026gt;;\n\u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e they lived at the bottom of a well.\u0026lt;/p\u0026gt;\n\n[(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u0026lt;p \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;story\u0026quot;\u003c/span\u003e\u0026gt;Once upon a time there were three little sisters; \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e their names were\n\u0026lt;a \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;sister\u0026quot;\u003c/span\u003e href=\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://example.com/elsie\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;link1\u0026quot;\u003c/span\u003e\u0026gt;\u0026lt;!-- Elsie --\u0026gt;\u0026lt;/a\u0026gt;,\n\u0026lt;a \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;sister\u0026quot;\u003c/span\u003e href=\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://example.com/lacie\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;link2\u0026quot;\u003c/span\u003e\u0026gt;Lacie\u0026lt;/a\u0026gt; \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e\n\u0026lt;a \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;sister\u0026quot;\u003c/span\u003e href=\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://example.com/tillie\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;link3\u0026quot;\u003c/span\u003e\u0026gt;Tillie\u0026lt;/a\u0026gt;;\n\u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e they lived at the bottom of a well.\u0026lt;/p\u0026gt;), (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u0026lt;body\u0026gt;\n\u0026lt;p \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;story\u0026quot;\u003c/span\u003e\u0026gt;Once upon a time there were three little sisters; \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e their names were\n\u0026lt;a \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;sister\u0026quot;\u003c/span\u003e href=\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://example.com/elsie\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;link1\u0026quot;\u003c/span\u003e\u0026gt;\u0026lt;!-- Elsie --\u0026gt;\u0026lt;/a\u0026gt;,\n\u0026lt;a \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;sister\u0026quot;\u003c/span\u003e href=\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://example.com/lacie\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;link2\u0026quot;\u003c/span\u003e\u0026gt;Lacie\u0026lt;/a\u0026gt; \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e\n\u0026lt;a \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;sister\u0026quot;\u003c/span\u003e href=\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://example.com/tillie\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;link3\u0026quot;\u003c/span\u003e\u0026gt;Tillie\u0026lt;/a\u0026gt;;\n\u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e they lived at the bottom of a well.\u0026lt;/p\u0026gt;\n\u0026lt;p \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;story\u0026quot;\u003c/span\u003e\u0026gt;...\u0026lt;/p\u0026gt;\n\u0026lt;/body\u0026gt;), (\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u0026lt;html\u0026gt;\u0026lt;head\u0026gt;\u0026lt;title\u0026gt;The Dormouse\u003cspan class=\"hljs-string\"\u003e\u0026#x27;s story\u0026lt;/title\u0026gt;\u0026lt;/head\u0026gt;\n\u0026lt;body\u0026gt;\n\u0026lt;p class=\u0026quot;story\u0026quot;\u0026gt;Once upon a time there were three little sisters; and their names were\n\u0026lt;a class=\u0026quot;sister\u0026quot; href=\u0026quot;http://example.com/elsie\u0026quot; id=\u0026quot;link1\u0026quot;\u0026gt;\u0026lt;!-- Elsie --\u0026gt;\u0026lt;/a\u0026gt;,\n\u0026lt;a class=\u0026quot;sister\u0026quot; href=\u0026quot;http://example.com/lacie\u0026quot; id=\u0026quot;link2\u0026quot;\u0026gt;Lacie\u0026lt;/a\u0026gt; and\n\u0026lt;a class=\u0026quot;sister\u0026quot; href=\u0026quot;http://example.com/tillie\u0026quot; id=\u0026quot;link3\u0026quot;\u0026gt;Tillie\u0026lt;/a\u0026gt;;\nand they lived at the bottom of a well.\u0026lt;/p\u0026gt;\n\u0026lt;p class=\u0026quot;story\u0026quot;\u0026gt;...\u0026lt;/p\u0026gt;\n\u0026lt;/body\u0026gt;\u0026lt;/html\u0026gt;), (3, \u0026lt;html\u0026gt;\u0026lt;head\u0026gt;\u0026lt;title\u0026gt;The Dormouse\u0026#x27;\u003c/span\u003es story\u0026lt;/title\u0026gt;\u0026lt;/head\u0026gt;\n\u0026lt;body\u0026gt;\n\u0026lt;p \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;story\u0026quot;\u003c/span\u003e\u0026gt;Once upon a time there were three little sisters; \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e their names were\n\u0026lt;a \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;sister\u0026quot;\u003c/span\u003e href=\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://example.com/elsie\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;link1\u0026quot;\u003c/span\u003e\u0026gt;\u0026lt;!-- Elsie --\u0026gt;\u0026lt;/a\u0026gt;,\n\u0026lt;a \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;sister\u0026quot;\u003c/span\u003e href=\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://example.com/lacie\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;link2\u0026quot;\u003c/span\u003e\u0026gt;Lacie\u0026lt;/a\u0026gt; \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e\n\u0026lt;a \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;sister\u0026quot;\u003c/span\u003e href=\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://example.com/tillie\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;link3\u0026quot;\u003c/span\u003e\u0026gt;Tillie\u0026lt;/a\u0026gt;;\n\u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e they lived at the bottom of a well.\u0026lt;/p\u0026gt;\n\u0026lt;p \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;story\u0026quot;\u003c/span\u003e\u0026gt;...\u0026lt;/p\u0026gt;\n\u0026lt;/body\u0026gt;\u0026lt;/html\u0026gt;)]\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4 id=\"兄弟节点\"\u003e兄弟节点\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e bs4 \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e BeautifulSoup\nhtml = \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026quot;\u0026quot;\n\u0026lt;html\u0026gt;\n    \u0026lt;body\u0026gt;\n        \u0026lt;p class=\u0026quot;story\u0026quot;\u0026gt;\n            Once upon a time there were three little sisters; and their names were\n            \u0026lt;a href=\u0026quot;http://example.com/elsie\u0026quot; class=\u0026quot;sister\u0026quot; id=\u0026quot;link1\u0026quot;\u0026gt;\n                \u0026lt;span\u0026gt;Elsie\u0026lt;/span\u0026gt;\n            \u0026lt;/a\u0026gt;\n            Hello\n            \u0026lt;a href=\u0026quot;http://example.com/lacie\u0026quot; class=\u0026quot;sister\u0026quot; id=\u0026quot;link2\u0026quot;\u0026gt;Lacie\u0026lt;/a\u0026gt; \n            and\n            \u0026lt;a href=\u0026quot;http://example.com/tillie\u0026quot; class=\u0026quot;sister\u0026quot; id=\u0026quot;link3\u0026quot;\u0026gt;Tillie\u0026lt;/a\u0026gt;\n            and they lived at the bottom of a well.\n        \u0026lt;/p\u0026gt;\n\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e\nsoup = BeautifulSoup(html, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;lxml\u0026#x27;\u003c/span\u003e)\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;next_sibling\u0026#x27;\u003c/span\u003e, soup.a.next_sibling)\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;prev_sibling\u0026#x27;\u003c/span\u003e, soup.a.previous_sibling)\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;next_siblings\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-built_in\"\u003elist\u003c/span\u003e(\u003cspan class=\"hljs-built_in\"\u003eenumerate\u003c/span\u003e(soup.a.next_sibling)))\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;prev_siblings\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-built_in\"\u003elist\u003c/span\u003e(\u003cspan class=\"hljs-built_in\"\u003eenumerate\u003c/span\u003e(soup.a.previous_sibling)))\n\n\n\u003cspan class=\"hljs-comment\"\u003e# 输出\u003c/span\u003e\nnext_sibling \n            Hello\n            \nprev_sibling \n            Once upon a time there were three little sisters; \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e their names were\n            \nnext_siblings [(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;\\n            Hello\\n            \u0026#x27;\u003c/span\u003e), (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u0026lt;a \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;sister\u0026quot;\u003c/span\u003e href=\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://example.com/lacie\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;link2\u0026quot;\u003c/span\u003e\u0026gt;Lacie\u0026lt;/a\u0026gt;), (\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27; \\n            and\\n            \u0026#x27;\u003c/span\u003e), (\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u0026lt;a \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;sister\u0026quot;\u003c/span\u003e href=\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://example.com/tillie\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;link3\u0026quot;\u003c/span\u003e\u0026gt;Tillie\u0026lt;/a\u0026gt;), (\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;\\n            and they lived at the bottom of a well.\\n        \u0026#x27;\u003c/span\u003e)]\nprev_siblings [(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;\\n            Once upon a time there were three little sisters; and their names were\\n            \u0026#x27;\u003c/span\u003e)]\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"方法选择器\"\u003e方法选择器\u003c/h2\u003e\n\u003cp\u003e前面讲的选择方法都是通过属性来选择元素的，这种选择方法非常快，但是如果要进行比较复杂的选择的话则会比较繁琐，不够灵活。所以 BeautifulSoup 还提供了一些查询的方法，比如 find_all()、find() 等方法，我们可以调用方法然后传入相应等参数就可以灵活地进行查询。\u003c/p\u003e\n\u003ch3 id=\"find_all--查找所有符合条件的元素\"\u003efind_all--查找所有符合条件的元素\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e bs4 \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e BeautifulSoup\nhtml=\u003cspan class=\"hljs-string\"\u003e\u0026#x27;\u0026#x27;\u0026#x27;\n\u0026lt;div class=\u0026quot;panel\u0026quot;\u0026gt;\n    \u0026lt;div class=\u0026quot;panel-heading\u0026quot;\u0026gt;\n        \u0026lt;h4\u0026gt;Hello\u0026lt;/h4\u0026gt;\n    \u0026lt;/div\u0026gt;\n    \u0026lt;div class=\u0026quot;panel-body\u0026quot;\u0026gt;\n        \u0026lt;ul class=\u0026quot;list\u0026quot; id=\u0026quot;list-1\u0026quot;\u0026gt;\n            \u0026lt;li class=\u0026quot;element\u0026quot;\u0026gt;Foo\u0026lt;/li\u0026gt;\n            \u0026lt;li class=\u0026quot;element\u0026quot;\u0026gt;Bar\u0026lt;/li\u0026gt;\n            \u0026lt;li class=\u0026quot;element\u0026quot;\u0026gt;Jay\u0026lt;/li\u0026gt;\n        \u0026lt;/ul\u0026gt;\n        \u0026lt;ul class=\u0026quot;list list-small\u0026quot; id=\u0026quot;list-2\u0026quot;\u0026gt;\n            \u0026lt;li class=\u0026quot;element\u0026quot;\u0026gt;Foo\u0026lt;/li\u0026gt;\n            \u0026lt;li class=\u0026quot;element\u0026quot;\u0026gt;Bar\u0026lt;/li\u0026gt;\n        \u0026lt;/ul\u0026gt;\n    \u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u0026#x27;\u0026#x27;\u0026#x27;\u003c/span\u003e\nsoup = BeautifulSoup(html, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;lxml\u0026#x27;\u003c/span\u003e)\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(soup.find_all(name = \u003cspan class=\"hljs-string\"\u003e\u0026#x27;ul\u0026#x27;\u003c/span\u003e))\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e ul \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e soup.find_all(name = \u003cspan class=\"hljs-string\"\u003e\u0026#x27;ul\u0026#x27;\u003c/span\u003e):\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(ul.find_all(name = \u003cspan class=\"hljs-string\"\u003e\u0026#x27;li\u0026#x27;\u003c/span\u003e))\n    \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e li \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e ul.find_all(name = \u003cspan class=\"hljs-string\"\u003e\u0026#x27;li\u0026#x27;\u003c/span\u003e):\n        \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(li.string)\n\n\u003cspan class=\"hljs-comment\"\u003e# 输出\u003c/span\u003e\n[\u0026lt;ul \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;list\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;list-1\u0026quot;\u003c/span\u003e\u0026gt;\n\u0026lt;li \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;element\u0026quot;\u003c/span\u003e\u0026gt;Foo\u0026lt;/li\u0026gt;\n\u0026lt;li \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;element\u0026quot;\u003c/span\u003e\u0026gt;Bar\u0026lt;/li\u0026gt;\n\u0026lt;li \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;element\u0026quot;\u003c/span\u003e\u0026gt;Jay\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;, \u0026lt;ul \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;list list-small\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;list-2\u0026quot;\u003c/span\u003e\u0026gt;\n\u0026lt;li \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;element\u0026quot;\u003c/span\u003e\u0026gt;Foo\u0026lt;/li\u0026gt;\n\u0026lt;li \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;element\u0026quot;\u003c/span\u003e\u0026gt;Bar\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;]\n[\u0026lt;li \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;element\u0026quot;\u003c/span\u003e\u0026gt;Foo\u0026lt;/li\u0026gt;, \u0026lt;li \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;element\u0026quot;\u003c/span\u003e\u0026gt;Bar\u0026lt;/li\u0026gt;, \u0026lt;li \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;element\u0026quot;\u003c/span\u003e\u0026gt;Jay\u0026lt;/li\u0026gt;]\nFoo\nBar\nJay\n[\u0026lt;li \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;element\u0026quot;\u003c/span\u003e\u0026gt;Foo\u0026lt;/li\u0026gt;, \u0026lt;li \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;element\u0026quot;\u003c/span\u003e\u0026gt;Bar\u0026lt;/li\u0026gt;]\nFoo\nBar\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"attrs\"\u003eattrs\u003c/h3\u003e\n\u003cp\u003e根据属性进行查询\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(soup.find_all(attrs = {\u003cspan class=\"hljs-string\"\u003e\u0026#x27;id\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026#x27;list-1\u0026#x27;\u003c/span\u003e}))\n\n\u003cspan class=\"hljs-comment\"\u003e# 输出\u003c/span\u003e\n[\u0026lt;ul \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;list\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;list-1\u0026quot;\u003c/span\u003e\u0026gt;\n\u0026lt;li \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;element\u0026quot;\u003c/span\u003e\u0026gt;Foo\u0026lt;/li\u0026gt;\n\u0026lt;li \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;element\u0026quot;\u003c/span\u003e\u0026gt;Bar\u0026lt;/li\u0026gt;\n\u0026lt;li \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;element\u0026quot;\u003c/span\u003e\u0026gt;Jay\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;]\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"text\"\u003etext\u003c/h3\u003e\n\u003cp\u003etext 参数可以用来匹配节点的文本，传入的形式可以是字符串，可以是正则表达式对象。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e re\nhtml=\u003cspan class=\"hljs-string\"\u003e\u0026#x27;\u0026#x27;\u0026#x27;\n\u0026lt;div class=\u0026quot;panel\u0026quot;\u0026gt;\n    \u0026lt;div class=\u0026quot;panel-body\u0026quot;\u0026gt;\n        \u0026lt;a\u0026gt;Hello, this is a link\u0026lt;/a\u0026gt;\n        \u0026lt;a\u0026gt;Hello, this is a link, too\u0026lt;/a\u0026gt;\n    \u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u0026#x27;\u0026#x27;\u0026#x27;\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e bs4 \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e BeautifulSoup\nsoup = BeautifulSoup(html, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;lxml\u0026#x27;\u003c/span\u003e)\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(soup.find_all(text=re.\u003cspan class=\"hljs-built_in\"\u003ecompile\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;link\u0026#x27;\u003c/span\u003e)))\n\n\u003cspan class=\"hljs-comment\"\u003e# 输出\u003c/span\u003e\n[\u003cspan class=\"hljs-string\"\u003e\u0026#x27;Hello, this is a link\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;Hello, this is a link, too\u0026#x27;\u003c/span\u003e]\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"find\"\u003efind()\u003c/h3\u003e\n\u003cp\u003efind方法和find_all类似，只是返回的是第一个匹配的元素\u003c/p\u003e\n\u003ch3 id=\"othres-api\"\u003eothres API\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003efind_parents() find_parent()\nfind_parents() 返回所有祖先节点，find_parent() 返回直接父节点。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003efind_next_siblings() find_next_sibling()\nfind_next_siblings() 返回后面所有兄弟节点，find_next_sibling() 返回后面第一个兄弟节点。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003efind_previous_siblings() find_previous_sibling()\nfind_previous_siblings() 返回前面所有兄弟节点，find_previous_sibling() 返回前面第一个兄弟节点。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003efind_all_next() find_next()\nfind_all_next() 返回节点后所有符合条件的节点, find_next() 返回第一个符合条件的节点。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003efind_all_previous() 和 find_previous()\nfind_all_previous() 返回节点后所有符合条件的节点, find_previous() 返回第一个符合条件的节点\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"css选择器\"\u003eCSS选择器\u003c/h2\u003e\n\u003cp\u003eBeautifulSoup 还提供了另外一种选择器，那就是 CSS 选择器。使用 CSS 选择器，只需要调用 select() 方法，传入相应的 CSS 选择器即可。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e bs4 \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e BeautifulSoup\nhtml=\u003cspan class=\"hljs-string\"\u003e\u0026#x27;\u0026#x27;\u0026#x27;\n\u0026lt;div class=\u0026quot;panel\u0026quot;\u0026gt;\n    \u0026lt;div class=\u0026quot;panel-heading\u0026quot;\u0026gt;\n        \u0026lt;h4\u0026gt;Hello\u0026lt;/h4\u0026gt;\n    \u0026lt;/div\u0026gt;\n    \u0026lt;div class=\u0026quot;panel-body\u0026quot;\u0026gt;\n        \u0026lt;ul class=\u0026quot;list\u0026quot; id=\u0026quot;list-1\u0026quot;\u0026gt;\n            \u0026lt;li class=\u0026quot;element\u0026quot;\u0026gt;Foo\u0026lt;/li\u0026gt;\n            \u0026lt;li class=\u0026quot;element\u0026quot;\u0026gt;Bar\u0026lt;/li\u0026gt;\n            \u0026lt;li class=\u0026quot;element\u0026quot;\u0026gt;Jay\u0026lt;/li\u0026gt;\n        \u0026lt;/ul\u0026gt;\n        \u0026lt;ul class=\u0026quot;list list-small\u0026quot; id=\u0026quot;list-2\u0026quot;\u0026gt;\n            \u0026lt;li class=\u0026quot;element\u0026quot;\u0026gt;Foo\u0026lt;/li\u0026gt;\n            \u0026lt;li class=\u0026quot;element\u0026quot;\u0026gt;Bar\u0026lt;/li\u0026gt;\n        \u0026lt;/ul\u0026gt;\n    \u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u0026#x27;\u0026#x27;\u0026#x27;\u003c/span\u003e\nsoup = BeautifulSoup(html, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;lxml\u0026#x27;\u003c/span\u003e)\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(soup.select(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;.panel .panel-heading\u0026#x27;\u003c/span\u003e))\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(soup.select(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;ul li\u0026#x27;\u003c/span\u003e))\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(soup.select(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;#list-2 .element\u0026#x27;\u003c/span\u003e))\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e(soup.select(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;ul\u0026#x27;\u003c/span\u003e)[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e]))\n\n\n\u003cspan class=\"hljs-comment\"\u003e# 输出\u003c/span\u003e\n[\u0026lt;div \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;panel-heading\u0026quot;\u003c/span\u003e\u0026gt;\n\u0026lt;h4\u0026gt;Hello\u0026lt;/h4\u0026gt;\n\u0026lt;/div\u0026gt;]\n[\u0026lt;li \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;element\u0026quot;\u003c/span\u003e\u0026gt;Foo\u0026lt;/li\u0026gt;, \u0026lt;li \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;element\u0026quot;\u003c/span\u003e\u0026gt;Bar\u0026lt;/li\u0026gt;, \u0026lt;li \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;element\u0026quot;\u003c/span\u003e\u0026gt;Jay\u0026lt;/li\u0026gt;, \u0026lt;li \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;element\u0026quot;\u003c/span\u003e\u0026gt;Foo\u0026lt;/li\u0026gt;, \u0026lt;li \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;element\u0026quot;\u003c/span\u003e\u0026gt;Bar\u0026lt;/li\u0026gt;]\n[\u0026lt;li \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;element\u0026quot;\u003c/span\u003e\u0026gt;Foo\u0026lt;/li\u0026gt;, \u0026lt;li \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;element\u0026quot;\u003c/span\u003e\u0026gt;Bar\u0026lt;/li\u0026gt;]\n\u0026lt;\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;bs4.element.Tag\u0026#x27;\u003c/span\u003e\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"嵌套选择-1\"\u003e嵌套选择\u003c/h3\u003e\n\u003cp\u003eselect() 方法同样支持嵌套选择，例如我们先选择所有 ul 节点，再遍历每个 ul 节点选择其 li 节点。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e ul \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e soup.select(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;ul\u0026#x27;\u003c/span\u003e):\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(ul.select(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;li\u0026#x27;\u003c/span\u003e))\n\n\u003cspan class=\"hljs-comment\"\u003e# 输出\u003c/span\u003e\n[\u0026lt;li \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;element\u0026quot;\u003c/span\u003e\u0026gt;Foo\u0026lt;/li\u0026gt;, \u0026lt;li \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;element\u0026quot;\u003c/span\u003e\u0026gt;Bar\u0026lt;/li\u0026gt;, \u0026lt;li \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;element\u0026quot;\u003c/span\u003e\u0026gt;Jay\u0026lt;/li\u0026gt;]\n[\u0026lt;li \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;element\u0026quot;\u003c/span\u003e\u0026gt;Foo\u0026lt;/li\u0026gt;, \u0026lt;li \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;element\u0026quot;\u003c/span\u003e\u0026gt;Bar\u0026lt;/li\u0026gt;]\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"获取属性-1\"\u003e获取属性\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e ul \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e soup.select(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;ul\u0026#x27;\u003c/span\u003e):\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(ul[\u003cspan class=\"hljs-string\"\u003e\u0026#x27;id\u0026#x27;\u003c/span\u003e])\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(ul.attrs[\u003cspan class=\"hljs-string\"\u003e\u0026#x27;id\u0026#x27;\u003c/span\u003e])\n\n\u003cspan class=\"hljs-comment\"\u003e# 输出\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003elist\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003elist\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003elist\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003elist\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"获取文本\"\u003e获取文本\u003c/h3\u003e\n\u003cp\u003e获取文本可以用前面所讲的 string 属性，还有一个方法那就是 get_text()。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e li \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e soup.select(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;li\u0026#x27;\u003c/span\u003e):\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;Get Text:\u0026#x27;\u003c/span\u003e, li.get_text())\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;String:\u0026#x27;\u003c/span\u003e, li.string)\n\n\u003cspan class=\"hljs-comment\"\u003e# 输出\u003c/span\u003e\nGet Text: Foo\nString: Foo\nGet Text: Bar\nString: Bar\nGet Text: Jay\nString: Jay\nGet Text: Foo\nString: Foo\nGet Text: Bar\nString: Bar\n\u003c/code\u003e\u003c/pre\u003e\n"}},"__N_SSG":true},"page":"/post/[title]","query":{"title":"Python-BeautifulSoup"},"buildId":"fBox-3zLUcpga4_Do-7MJ","assetPrefix":"/next-blog","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>