<!DOCTYPE html><html><head><link rel="icon" href="https://mrrsblog.oss-cn-shanghai.aliyuncs.com/avatar.jpg"/><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Mr.RSçš„ä¸ªäººåšå®¢-Web Component-è‡ªå®šä¹‰å…ƒç´ çš„ç”Ÿå‘½å‘¨æœŸ</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/d3bd3b56eb8829d9.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d3bd3b56eb8829d9.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-514908bffb652963.js" defer=""></script><script src="/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/_next/static/chunks/main-1e7421553b9673ee.js" defer=""></script><script src="/_next/static/chunks/pages/_app-ca6aae25bc99a05f.js" defer=""></script><script src="/_next/static/chunks/899-1cd3a59abdb8ea18.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Btitle%5D-216eae5ddb3b6d26.js" defer=""></script><script src="/_next/static/OgI6Xyd2y4cH2beo6SuyV/_buildManifest.js" defer=""></script><script src="/_next/static/OgI6Xyd2y4cH2beo6SuyV/_ssgManifest.js" defer=""></script><script src="/_next/static/OgI6Xyd2y4cH2beo6SuyV/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><header class="fixed top-0 py-4 left-0 right-0 h-auto px-10 shadow bg-white z-50"><nav><ul class="flex w-auto"><li class="mr-4 hover:text-yellow"><a href="/">é¦–é¡µ</a></li><li class="mx-4 hover:text-yellow"><a href="/categories">åˆ†ç±»</a></li><li class="mx-4 hover:text-yellow"><a href="/tags">æ ‡ç­¾</a></li><li class="ml-4 hover:text-yellow"><a href="/timeline">å½’æ¡£</a></li></ul></nav></header><main class="mt-20 mb-4 mx-auto justify-center w-2/3"><div class="mx-auto lg:max-w-5xl md:max-w-3xl"><article class="flex flex-col justify-around pb-16 px-4 mx-auto space-y-10 text-base"><div class="flex flex-col space-y-4"><h1 class="inline pt-10 text-4xl text-skin-primary">Web Component-è‡ªå®šä¹‰å…ƒç´ çš„ç”Ÿå‘½å‘¨æœŸ</h1><div class="text-sm space-x-2 text-skin-muted grid grid-cols-5"><span class="flex align-middle"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 inline-block mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>2022-04-21 21:06:23</span><span class="flex align-middle"><svg class="w-5 h-5 inline-block mr-1" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1903" width="20" height="20"><path d="M257.7 752c2 0 4-0.2 6-0.5L431.9 722c2-0.4 3.9-1.3 5.3-2.8l423.9-423.9c3.9-3.9 3.9-10.2 0-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2c-1.9 11.1 1.5 21.9 9.4 29.8 6.6 6.4 14.9 9.9 23.8 9.9z m67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z" p-id="1904"></path></svg>2022-01-08 22:40:37</span><span class="flex align-middle"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 inline-block mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>44</span></div></div><div class="mt-8 flex"><div class="w-full flex-auto custom-markdown-body"><div class="markdown-body" id="write"><p>åœ¨ä¹‹å‰å¤§æ¦‚äº†è§£äº† Web Componentï¼ŒçŸ¥é“æ˜¯æ€ä¹ˆç©çš„ï¼Œä¸è¿‡åœ¨æŸ¥é˜…èµ„æ–™åå‘ç°ä¹‹å‰æœ‰äº›é”™è¯¯</p>
<h2 id="nodeclonenode-çš„å±€é™æ€§">Node.cloneNode çš„å±€é™æ€§</h2>
<p>åœ¨ä¹‹å‰ï¼Œä½¿ç”¨çš„æ˜¯<code>template.content.cloneNode(true);</code>æ¥åˆ›å»ºå‡ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œè¿™ç§æ–¹æ³•æœ‰ä¸€äº›å±€é™æ€§ï¼šä¼šå¤åˆ¶åŸèŠ‚ç‚¹çš„æ‰€æœ‰å±æ€§åŠå±æ€§å€¼ï¼Œå…¶ä¸­å°±åŒ…æ‹¬<code>id</code>ï¼Œè¿™æ ·é¡µé¢ä¸­å°±æœ‰å¤šä¸ª<code>id</code>ä¸€æ ·çš„å…ƒç´ äº†</p>
<blockquote>
<p>æ‹·è´å®ƒæ‰€æœ‰çš„å±æ€§ä»¥åŠå±æ€§å€¼,å½“ç„¶ä¹Ÿå°±åŒ…æ‹¬äº†å±æ€§ä¸Šç»‘å®šçš„äº‹ä»¶(æ¯”å¦‚ onclick=&quot;alert(1)&quot;),ä½†ä¸ä¼šæ‹·è´é‚£äº›ä½¿ç”¨ addEventListener()æ–¹æ³•æˆ–è€… node.onclick = fn è¿™ç§ç”¨ JavaScript åŠ¨æ€ç»‘å®šçš„äº‹ä»¶. --mdn</p>
</blockquote>
<p>MDN åŒæ ·ä¹Ÿç»™å‡ºè­¦å‘Š</p>
<blockquote>
<p>æ³¨æ„:ä¸ºäº†é˜²æ­¢ä¸€ä¸ªæ–‡æ¡£ä¸­å‡ºç°ä¸¤ä¸ª ID é‡å¤çš„å…ƒç´ ,ä½¿ç”¨ cloneNode()æ–¹æ³•å…‹éš†çš„èŠ‚ç‚¹åœ¨éœ€è¦æ—¶åº”è¯¥æŒ‡å®šå¦å¤–ä¸€ä¸ªä¸åŸ ID å€¼ä¸åŒçš„ ID</p>
</blockquote>
<p>è€Œä¸”ï¼Œç”Ÿæˆçš„èŠ‚ç‚¹çš„<code>ownerDocument</code>ä»ç„¶æŒ‡å‘æºèŠ‚ç‚¹çš„<code>ownerDocument</code></p>
<p>æ—¢ç„¶è¿™ä¸ªæ–¹æ³•æœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ³•å‘¢ï¼Ÿæœ‰çš„ï¼</p>
<h2 id="documentimportnode">document.importNode</h2>
<blockquote>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/importNode">document.importNode</a>å°†å¤–éƒ¨æ–‡æ¡£çš„ä¸€ä¸ªèŠ‚ç‚¹æ‹·è´ä¸€ä»½,ç„¶åå¯ä»¥æŠŠè¿™ä¸ªæ‹·è´çš„èŠ‚ç‚¹æ’å…¥åˆ°å½“å‰æ–‡æ¡£ä¸­</p>
</blockquote>
<p>ä½¿ç”¨æ–¹å¼</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// deepå‚æ•°è¡¨ç¤ºæ˜¯å¦é€’å½’å¤åˆ¶æºèŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹</span>
<span class="hljs-keyword">const</span> node = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">importNode</span>(externalNode, deep);
</code></pre>
<p>æ³¨æ„ï¼š</p>
<p>æ–°ç”ŸæˆèŠ‚ç‚¹çš„ <code>parentNode</code> æ˜¯ <code>null</code>ï¼Œå› ä¸ºå®ƒè¿˜æ²¡æœ‰æ’å…¥å½“å‰æ–‡æ¡£çš„æ–‡æ¡£æ ‘ä¸­ï¼Œ<strong>å±äºæ¸¸ç¦»çŠ¶æ€</strong>ï¼Œå› æ­¤æ— æ³•å¯¹å…¶è¿›è¡Œæ“ä½œ</p>
<p>è¿™æ ·çš„è¯æˆ‘ä»¬å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä¿®æ”¹æ–°èŠ‚ç‚¹çš„<code>ownerDocument</code>ï¼ˆåœ¨<code>append</code>ä¹‹åè‡ªåŠ¨æŒ‡å‘å½“å‰<code>document</code>ï¼‰</p>
<p>è¯•è¯•æ–°çš„ api æ¥åˆ›å»º<em>ç»„ä»¶</em></p>
<pre><code class="hljs language-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
  <span class="hljs-keyword">class</span> <span class="hljs-title class_">MHeader</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">HTMLElement</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
      <span class="hljs-variable language_">super</span>();
      <span class="hljs-comment">// ...</span>
      <span class="hljs-keyword">const</span> content = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">importNode</span>(template.<span class="hljs-property">content</span>, <span class="hljs-literal">true</span>);
      <span class="hljs-comment">/**
       * æ³¨æ„ï¼Œè¦å…ˆå°†èŠ‚ç‚¹æ’å…¥åˆ°shadowRootåæ‰èƒ½å¯¹å…¶è¿›è¡Œæ“ä½œ
       */</span>
      shadowRoot.<span class="hljs-title function_">appendChild</span>(content);
      <span class="hljs-comment">// ...</span>
    }
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 id="htmlelement-çš„ç”Ÿå‘½å‘¨æœŸ">HTMLElement çš„ç”Ÿå‘½å‘¨æœŸ</h2>
<p>åœ¨ä¹‹å‰ï¼Œæˆ‘ä»¬éƒ½æ˜¯å°†å„ç§æ“ä½œç›´æ¥å†™åœ¨æ„é€ å‡½æ•°é‡Œï¼Œè¿™æ˜¾ç„¶æœ‰äº›è‡ƒè‚¿ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€äº›åŠæ³•å¯ä»¥å°†è¿™äº›é€»è¾‘åˆ†å‘å‡ºå»å‘¢ï¼Ÿæœ‰çš„ï¼</p>
<p>åœ¨<code>HTMLElement</code>å†…ï¼Œæœ‰ä¸€äº›<a href="https://developer.mozilla.org/zh-CN/docs/Web/Web_Components/Using_custom_elements#%E4%BD%BF%E7%94%A8%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0">ç”Ÿå‘½å‘¨æœŸ</a></p>
<ul>
<li><p><code>connectedCallback</code>ï¼Œå½“ <code>custom element</code> é¦–æ¬¡è¢«æ’å…¥æ–‡æ¡£ DOM æ—¶è¢«è°ƒç”¨</p>
</li>
<li><p><code>disconnectedCallback</code>ï¼Œå½“ <code>custom element</code>ä»æ–‡æ¡£ DOM ä¸­åˆ é™¤æ—¶è¢«è°ƒç”¨</p>
</li>
<li><p><code>adoptedCallback</code>ï¼Œ å½“ <code>custom element</code>è¢«ç§»åŠ¨åˆ°æ–°çš„æ–‡æ¡£æ—¶è¢«è°ƒç”¨</p>
</li>
<li><p><code>attributeChangedCallback</code>ï¼Œå½“ <code>custom element</code>å¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹è‡ªèº«å±æ€§æ—¶è¢«è°ƒç”¨</p>
</li>
</ul>
<p>æ®æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é‡æ„ä¸€ä¸‹ä¹‹å‰çš„<em>ç»„ä»¶</em></p>
<pre><code class="hljs language-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
  <span class="hljs-keyword">class</span> <span class="hljs-title class_">MHeader</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">HTMLElement</span> {
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> <span class="hljs-title function_">observedAttributes</span>() {
      <span class="hljs-keyword">return</span> [<span class="hljs-string">&quot;title&quot;</span>];
    }
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
      <span class="hljs-variable language_">super</span>();
      <span class="hljs-comment">// ä¼šè‡ªåŠ¨å‘thisä¸ŠæŒ‚è½½ä¸€ä¸ªshadowRoot</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">attachShadow</span>({ <span class="hljs-attr">mode</span>: <span class="hljs-string">&quot;open&quot;</span> });
      <span class="hljs-keyword">const</span> template = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;#mHeaderTemplate&quot;</span>);
      <span class="hljs-comment">// const content = template.content.cloneNode(true);</span>
      <span class="hljs-keyword">const</span> content = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">importNode</span>(template.<span class="hljs-property">content</span>, <span class="hljs-literal">true</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">shadowRoot</span>.<span class="hljs-title function_">appendChild</span>(content);
    }

    <span class="hljs-title function_">connectedCallback</span>(<span class="hljs-params"></span>) {
      <span class="hljs-keyword">const</span> loginBtn = <span class="hljs-variable language_">this</span>.<span class="hljs-property">shadowRoot</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;#login&quot;</span>);
      loginBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&quot;title&quot;</span>, <span class="hljs-string">&quot;ç™»å½•æˆåŠŸ&quot;</span>);
      });
    }

    <span class="hljs-title function_">attributeChangedCallback</span>(<span class="hljs-params">name, oldValue, newValue</span>) {
      <span class="hljs-keyword">if</span> (name === <span class="hljs-string">&quot;title&quot;</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">shadowRoot</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;#content&quot;</span>).<span class="hljs-property">innerText</span> = newValue;
      }
    }
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨<code>attributeChangedCallback</code>æ¥ç›‘å¬<em>ç»„ä»¶</em>å±æ€§å˜åŒ–ï¼Œåœ¨<code>title</code>å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ›´æ–°å…ƒç´ çš„å€¼ã€‚è¯¥å›è°ƒä¼šè¿”å›ä¸‰ä¸ªå‚æ•°ï¼š</p>
<ul>
<li><p><code>name</code>ï¼Œå˜åŒ–çš„å±æ€§çš„åå­—</p>
</li>
<li><p><code>oldValue</code>ï¼Œå±æ€§ä¹‹å‰çš„å€¼</p>
</li>
<li><p><code>newValue</code>ï¼Œè¦è®¾ç½®çš„å€¼</p>
</li>
</ul>
<p>ï¼ˆreact å†™çš„å¤šäº†ï¼Œæœ‰ç‚¹æ¢¦å› vue çš„æ„Ÿè§‰ ğŸ¤”ï¼‰</p>
<p>æ­¤å¤–æœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼š</p>
<p>éœ€è¦åœ¨<code>static get observedAttributes</code>å‡½æ•°é‡Œå£°æ˜ä¸€ä¸‹è¦ç›‘å¬çš„å±æ€§å</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> <span class="hljs-title function_">observedAttributes</span>() {
  <span class="hljs-keyword">return</span> [<span class="hljs-string">&quot;title&quot;</span>];
}
</code></pre>
<p>å®Œæ•´ä»£ç </p>
<pre><code class="hljs language-html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;mHeaderTemplate&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css">
        <span class="hljs-selector-pseudo">:host</span> {
          <span class="hljs-attribute">font-size</span>: <span class="hljs-number">32px</span>;
        }

        <span class="hljs-selector-class">.content</span> {
          <span class="hljs-attribute">color</span>: <span class="hljs-number">#f00</span>;
        }
      </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span>æˆ‘æ˜¯å¤´éƒ¨<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;login&quot;</span>&gt;</span>login<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">m-header</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;mHeader&quot;</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;hello&quot;</span> /&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
      <span class="hljs-keyword">class</span> <span class="hljs-title class_">MHeader</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">HTMLElement</span> {
        <span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> <span class="hljs-title function_">observedAttributes</span>() {
          <span class="hljs-keyword">return</span> [<span class="hljs-string">&quot;title&quot;</span>];
        }
        <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
          <span class="hljs-variable language_">super</span>();
          <span class="hljs-comment">// ä¼šè‡ªåŠ¨å‘thisä¸ŠæŒ‚è½½ä¸€ä¸ªshadowRoot</span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">attachShadow</span>({ <span class="hljs-attr">mode</span>: <span class="hljs-string">&quot;open&quot;</span> });
          <span class="hljs-keyword">const</span> template = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;#mHeaderTemplate&quot;</span>);
          <span class="hljs-comment">// const content = template.content.cloneNode(true);</span>
          <span class="hljs-keyword">const</span> content = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">importNode</span>(template.<span class="hljs-property">content</span>, <span class="hljs-literal">true</span>);
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">shadowRoot</span>.<span class="hljs-title function_">appendChild</span>(content);
        }

        <span class="hljs-title function_">connectedCallback</span>(<span class="hljs-params"></span>) {
          <span class="hljs-keyword">const</span> loginBtn = <span class="hljs-variable language_">this</span>.<span class="hljs-property">shadowRoot</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;#login&quot;</span>);
          loginBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function">() =&gt;</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&quot;title&quot;</span>, <span class="hljs-string">&quot;ç™»å½•æˆåŠŸ&quot;</span>);
          });
        }

        <span class="hljs-title function_">attributeChangedCallback</span>(<span class="hljs-params">name, oldValue, newValue</span>) {
          <span class="hljs-keyword">if</span> (name === <span class="hljs-string">&quot;title&quot;</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">shadowRoot</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;#content&quot;</span>).<span class="hljs-property">innerText</span> = newValue;
          }
        }
      }

      <span class="hljs-variable language_">window</span>.<span class="hljs-property">customElements</span>.<span class="hljs-title function_">define</span>(<span class="hljs-string">&quot;m-header&quot;</span>, <span class="hljs-title class_">MHeader</span>);

      <span class="hljs-keyword">const</span> mHeader = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;#mHeader&quot;</span>);
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>ç”±äº<code>Node.cloneNode</code>ä»é»˜è®¤ä¿ç•™æ–°èŠ‚ç‚¹çš„<code>ownerDocument</code>ï¼Œå› æ­¤ä½¿ç”¨èµ·æ¥æ²¡æ³•æ”¾å¼€ï¼Œæœ‰äº›éœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚ä¸è¿‡æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>document.importNode</code>æ¥å®ç°ç›¸åŒçš„åŠŸèƒ½ï¼Œè¯¥APIåˆ›å»ºçš„èŠ‚ç‚¹å¤„äºæ¸¸ç¦»çŠ¶æ€ï¼Œåœ¨è¿›è¡Œ<code>append</code>æ“ä½œåä¼šè‡ªåŠ¨ä¿®æ­£<code>ownerDocument</code>çš„æŒ‡å‘</p>
<p>é€šè¿‡ä½¿ç”¨<code>custom elements</code>æä¾›çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ç›‘å¬å±æ€§å˜åŒ–æ¥åšä¸€äº›é€»è¾‘ï¼Œä½†è¿˜æ˜¯é‚£å¥è¯ä¹¦å†™èµ·æ¥æœ‰äº›ä¸å¤Ÿä¾¿æ·ï¼Œéœ€è¦ç”¨åˆ°åŸç”Ÿ dom æ“ä½œ apiï¼Œæ²¡å‡† jQuery ä¼šå€Ÿç€ Web Components å†é‡æ–°æ´»è·ƒèµ·æ¥</p>
<h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Web_Components">MDN-Web Components</a></p>
<p><a href="https://github.com/mdn/web-components-examples">MDN/web-components-examples</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/cloneNode">Node.cloneNode(deep)</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/importNode">document.importNode</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Web_Components/Using_custom_elements#%E4%BD%BF%E7%94%A8%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0">ä½¿ç”¨ custom elements</a></p>
</div></div></div></article></div></main><footer class="flex flex-col items-center justify-center leading-8 text-sm w-full py-2 border-t text-skin-muted"><p>Designed &amp; developed by<a class="ml-1 text-yellow" target="_blank" href="https://github.com/mrrs878" rel="noreferrer">Mr.RS</a></p><p>Â©<!-- --> <!-- -->2022</p></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Web Component-è‡ªå®šä¹‰å…ƒç´ çš„ç”Ÿå‘½å‘¨æœŸ","tags":["å¾®å‰ç«¯","WebComponent"],"categories":"å¾®å‰ç«¯","description":"åœ¨ä¹‹å‰å¤§æ¦‚äº†è§£äº† Web Componentï¼ŒçŸ¥é“æ˜¯æ€ä¹ˆç©çš„ï¼Œä¸è¿‡åœ¨æŸ¥é˜…èµ„æ–™åå‘ç°ä¹‹å‰æœ‰äº›é”™è¯¯\n\n## Node.cloneNode çš„å±€é™æ€§\n\nåœ¨ä¹‹å‰ï¼Œä½¿ç”¨çš„æ˜¯`template.content.cloneNode(true);`æ¥åˆ›å»ºå‡ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œè¿™ç§æ–¹æ³•æœ‰ä¸€äº›å±€é™æ€§ï¼šä¼šå¤åˆ¶åŸèŠ‚ç‚¹çš„æ‰€æœ‰å±æ€§åŠå±æ€§å€¼ï¼Œå…¶ä¸­å°±åŒ…æ‹¬`id`ï¼Œè¿™æ ·é¡µé¢ä¸­å°±æœ‰å¤šä¸ª`id`ä¸€æ ·çš„å…ƒç´ äº†\n\n\u003e æ‹·è´å®ƒæ‰€æœ‰çš„å±æ€§ä»¥åŠå±æ€§","createDate":"2022-04-21 21:06:23","updateDate":"2022-01-08 22:40:37","body":"\u003cp\u003eåœ¨ä¹‹å‰å¤§æ¦‚äº†è§£äº† Web Componentï¼ŒçŸ¥é“æ˜¯æ€ä¹ˆç©çš„ï¼Œä¸è¿‡åœ¨æŸ¥é˜…èµ„æ–™åå‘ç°ä¹‹å‰æœ‰äº›é”™è¯¯\u003c/p\u003e\n\u003ch2 id=\"nodeclonenode-çš„å±€é™æ€§\"\u003eNode.cloneNode çš„å±€é™æ€§\u003c/h2\u003e\n\u003cp\u003eåœ¨ä¹‹å‰ï¼Œä½¿ç”¨çš„æ˜¯\u003ccode\u003etemplate.content.cloneNode(true);\u003c/code\u003eæ¥åˆ›å»ºå‡ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œè¿™ç§æ–¹æ³•æœ‰ä¸€äº›å±€é™æ€§ï¼šä¼šå¤åˆ¶åŸèŠ‚ç‚¹çš„æ‰€æœ‰å±æ€§åŠå±æ€§å€¼ï¼Œå…¶ä¸­å°±åŒ…æ‹¬\u003ccode\u003eid\u003c/code\u003eï¼Œè¿™æ ·é¡µé¢ä¸­å°±æœ‰å¤šä¸ª\u003ccode\u003eid\u003c/code\u003eä¸€æ ·çš„å…ƒç´ äº†\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eæ‹·è´å®ƒæ‰€æœ‰çš„å±æ€§ä»¥åŠå±æ€§å€¼,å½“ç„¶ä¹Ÿå°±åŒ…æ‹¬äº†å±æ€§ä¸Šç»‘å®šçš„äº‹ä»¶(æ¯”å¦‚ onclick=\u0026quot;alert(1)\u0026quot;),ä½†ä¸ä¼šæ‹·è´é‚£äº›ä½¿ç”¨ addEventListener()æ–¹æ³•æˆ–è€… node.onclick = fn è¿™ç§ç”¨ JavaScript åŠ¨æ€ç»‘å®šçš„äº‹ä»¶. --mdn\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eMDN åŒæ ·ä¹Ÿç»™å‡ºè­¦å‘Š\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eæ³¨æ„:ä¸ºäº†é˜²æ­¢ä¸€ä¸ªæ–‡æ¡£ä¸­å‡ºç°ä¸¤ä¸ª ID é‡å¤çš„å…ƒç´ ,ä½¿ç”¨ cloneNode()æ–¹æ³•å…‹éš†çš„èŠ‚ç‚¹åœ¨éœ€è¦æ—¶åº”è¯¥æŒ‡å®šå¦å¤–ä¸€ä¸ªä¸åŸ ID å€¼ä¸åŒçš„ ID\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eè€Œä¸”ï¼Œç”Ÿæˆçš„èŠ‚ç‚¹çš„\u003ccode\u003eownerDocument\u003c/code\u003eä»ç„¶æŒ‡å‘æºèŠ‚ç‚¹çš„\u003ccode\u003eownerDocument\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eæ—¢ç„¶è¿™ä¸ªæ–¹æ³•æœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ³•å‘¢ï¼Ÿæœ‰çš„ï¼\u003c/p\u003e\n\u003ch2 id=\"documentimportnode\"\u003edocument.importNode\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Document/importNode\"\u003edocument.importNode\u003c/a\u003eå°†å¤–éƒ¨æ–‡æ¡£çš„ä¸€ä¸ªèŠ‚ç‚¹æ‹·è´ä¸€ä»½,ç„¶åå¯ä»¥æŠŠè¿™ä¸ªæ‹·è´çš„èŠ‚ç‚¹æ’å…¥åˆ°å½“å‰æ–‡æ¡£ä¸­\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eä½¿ç”¨æ–¹å¼\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// deepå‚æ•°è¡¨ç¤ºæ˜¯å¦é€’å½’å¤åˆ¶æºèŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e node = \u003cspan class=\"hljs-variable language_\"\u003edocument\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eimportNode\u003c/span\u003e(externalNode, deep);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eæ³¨æ„ï¼š\u003c/p\u003e\n\u003cp\u003eæ–°ç”ŸæˆèŠ‚ç‚¹çš„ \u003ccode\u003eparentNode\u003c/code\u003e æ˜¯ \u003ccode\u003enull\u003c/code\u003eï¼Œå› ä¸ºå®ƒè¿˜æ²¡æœ‰æ’å…¥å½“å‰æ–‡æ¡£çš„æ–‡æ¡£æ ‘ä¸­ï¼Œ\u003cstrong\u003eå±äºæ¸¸ç¦»çŠ¶æ€\u003c/strong\u003eï¼Œå› æ­¤æ— æ³•å¯¹å…¶è¿›è¡Œæ“ä½œ\u003c/p\u003e\n\u003cp\u003eè¿™æ ·çš„è¯æˆ‘ä»¬å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä¿®æ”¹æ–°èŠ‚ç‚¹çš„\u003ccode\u003eownerDocument\u003c/code\u003eï¼ˆåœ¨\u003ccode\u003eappend\u003c/code\u003eä¹‹åè‡ªåŠ¨æŒ‡å‘å½“å‰\u003ccode\u003edocument\u003c/code\u003eï¼‰\u003c/p\u003e\n\u003cp\u003eè¯•è¯•æ–°çš„ api æ¥åˆ›å»º\u003cem\u003eç»„ä»¶\u003c/em\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-html\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"language-javascript\"\u003e\n  \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eMHeader\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title class_ inherited__\"\u003eHTMLElement\u003c/span\u003e {\n    \u003cspan class=\"hljs-title function_\"\u003econstructor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n      \u003cspan class=\"hljs-variable language_\"\u003esuper\u003c/span\u003e();\n      \u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e content = \u003cspan class=\"hljs-variable language_\"\u003edocument\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eimportNode\u003c/span\u003e(template.\u003cspan class=\"hljs-property\"\u003econtent\u003c/span\u003e, \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e);\n      \u003cspan class=\"hljs-comment\"\u003e/**\n       * æ³¨æ„ï¼Œè¦å…ˆå°†èŠ‚ç‚¹æ’å…¥åˆ°shadowRootåæ‰èƒ½å¯¹å…¶è¿›è¡Œæ“ä½œ\n       */\u003c/span\u003e\n      shadowRoot.\u003cspan class=\"hljs-title function_\"\u003eappendChild\u003c/span\u003e(content);\n      \u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\n    }\n  }\n\u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"htmlelement-çš„ç”Ÿå‘½å‘¨æœŸ\"\u003eHTMLElement çš„ç”Ÿå‘½å‘¨æœŸ\u003c/h2\u003e\n\u003cp\u003eåœ¨ä¹‹å‰ï¼Œæˆ‘ä»¬éƒ½æ˜¯å°†å„ç§æ“ä½œç›´æ¥å†™åœ¨æ„é€ å‡½æ•°é‡Œï¼Œè¿™æ˜¾ç„¶æœ‰äº›è‡ƒè‚¿ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€äº›åŠæ³•å¯ä»¥å°†è¿™äº›é€»è¾‘åˆ†å‘å‡ºå»å‘¢ï¼Ÿæœ‰çš„ï¼\u003c/p\u003e\n\u003cp\u003eåœ¨\u003ccode\u003eHTMLElement\u003c/code\u003eå†…ï¼Œæœ‰ä¸€äº›\u003ca href=\"https://developer.mozilla.org/zh-CN/docs/Web/Web_Components/Using_custom_elements#%E4%BD%BF%E7%94%A8%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0\"\u003eç”Ÿå‘½å‘¨æœŸ\u003c/a\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode\u003econnectedCallback\u003c/code\u003eï¼Œå½“ \u003ccode\u003ecustom element\u003c/code\u003e é¦–æ¬¡è¢«æ’å…¥æ–‡æ¡£ DOM æ—¶è¢«è°ƒç”¨\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode\u003edisconnectedCallback\u003c/code\u003eï¼Œå½“ \u003ccode\u003ecustom element\u003c/code\u003eä»æ–‡æ¡£ DOM ä¸­åˆ é™¤æ—¶è¢«è°ƒç”¨\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode\u003eadoptedCallback\u003c/code\u003eï¼Œ å½“ \u003ccode\u003ecustom element\u003c/code\u003eè¢«ç§»åŠ¨åˆ°æ–°çš„æ–‡æ¡£æ—¶è¢«è°ƒç”¨\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode\u003eattributeChangedCallback\u003c/code\u003eï¼Œå½“ \u003ccode\u003ecustom element\u003c/code\u003eå¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹è‡ªèº«å±æ€§æ—¶è¢«è°ƒç”¨\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eæ®æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é‡æ„ä¸€ä¸‹ä¹‹å‰çš„\u003cem\u003eç»„ä»¶\u003c/em\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-html\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"language-javascript\"\u003e\n  \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eMHeader\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title class_ inherited__\"\u003eHTMLElement\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eget\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eobservedAttributes\u003c/span\u003e() {\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e [\u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e];\n    }\n    \u003cspan class=\"hljs-title function_\"\u003econstructor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n      \u003cspan class=\"hljs-variable language_\"\u003esuper\u003c/span\u003e();\n      \u003cspan class=\"hljs-comment\"\u003e// ä¼šè‡ªåŠ¨å‘thisä¸ŠæŒ‚è½½ä¸€ä¸ªshadowRoot\u003c/span\u003e\n      \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eattachShadow\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003emode\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;open\u0026quot;\u003c/span\u003e });\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e template = \u003cspan class=\"hljs-variable language_\"\u003edocument\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003equerySelector\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;#mHeaderTemplate\u0026quot;\u003c/span\u003e);\n      \u003cspan class=\"hljs-comment\"\u003e// const content = template.content.cloneNode(true);\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e content = \u003cspan class=\"hljs-variable language_\"\u003edocument\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eimportNode\u003c/span\u003e(template.\u003cspan class=\"hljs-property\"\u003econtent\u003c/span\u003e, \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e);\n      \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eshadowRoot\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eappendChild\u003c/span\u003e(content);\n    }\n\n    \u003cspan class=\"hljs-title function_\"\u003econnectedCallback\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e loginBtn = \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eshadowRoot\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003equerySelector\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;#login\u0026quot;\u003c/span\u003e);\n      loginBtn.\u003cspan class=\"hljs-title function_\"\u003eaddEventListener\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;click\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u0026gt;\u003c/span\u003e {\n        \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003esetAttribute\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;ç™»å½•æˆåŠŸ\u0026quot;\u003c/span\u003e);\n      });\n    }\n\n    \u003cspan class=\"hljs-title function_\"\u003eattributeChangedCallback\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ename, oldValue, newValue\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (name === \u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e) {\n        \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eshadowRoot\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003equerySelector\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;#content\u0026quot;\u003c/span\u003e).\u003cspan class=\"hljs-property\"\u003einnerText\u003c/span\u003e = newValue;\n      }\n    }\n  }\n\u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨\u003ccode\u003eattributeChangedCallback\u003c/code\u003eæ¥ç›‘å¬\u003cem\u003eç»„ä»¶\u003c/em\u003eå±æ€§å˜åŒ–ï¼Œåœ¨\u003ccode\u003etitle\u003c/code\u003eå±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ›´æ–°å…ƒç´ çš„å€¼ã€‚è¯¥å›è°ƒä¼šè¿”å›ä¸‰ä¸ªå‚æ•°ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode\u003ename\u003c/code\u003eï¼Œå˜åŒ–çš„å±æ€§çš„åå­—\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode\u003eoldValue\u003c/code\u003eï¼Œå±æ€§ä¹‹å‰çš„å€¼\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode\u003enewValue\u003c/code\u003eï¼Œè¦è®¾ç½®çš„å€¼\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eï¼ˆreact å†™çš„å¤šäº†ï¼Œæœ‰ç‚¹æ¢¦å› vue çš„æ„Ÿè§‰ ğŸ¤”ï¼‰\u003c/p\u003e\n\u003cp\u003eæ­¤å¤–æœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼š\u003c/p\u003e\n\u003cp\u003eéœ€è¦åœ¨\u003ccode\u003estatic get observedAttributes\u003c/code\u003eå‡½æ•°é‡Œå£°æ˜ä¸€ä¸‹è¦ç›‘å¬çš„å±æ€§å\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eget\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eobservedAttributes\u003c/span\u003e() {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e [\u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e];\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eå®Œæ•´ä»£ç \u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-html\"\u003e\u003cspan class=\"hljs-meta\"\u003e\u0026lt;!DOCTYPE \u003cspan class=\"hljs-keyword\"\u003ehtml\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ehtml\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003elang\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;en\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ehead\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003emeta\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003echarset\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;UTF-8\u0026quot;\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003emeta\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ehttp-equiv\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;X-UA-Compatible\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003econtent\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;IE=edge\u0026quot;\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003emeta\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;viewport\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003econtent\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;width=device-width, initial-scale=1.0\u0026quot;\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003etitle\u003c/span\u003e\u0026gt;\u003c/span\u003eDocument\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003etitle\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ehead\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ebody\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003etemplate\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;mHeaderTemplate\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003estyle\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"language-css\"\u003e\n        \u003cspan class=\"hljs-selector-pseudo\"\u003e:host\u003c/span\u003e {\n          \u003cspan class=\"hljs-attribute\"\u003efont-size\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e32px\u003c/span\u003e;\n        }\n\n        \u003cspan class=\"hljs-selector-class\"\u003e.content\u003c/span\u003e {\n          \u003cspan class=\"hljs-attribute\"\u003ecolor\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e#f00\u003c/span\u003e;\n        }\n      \u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003estyle\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;content\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;content\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003eæˆ‘æ˜¯å¤´éƒ¨\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;login\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003elogin\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003etemplate\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003em-header\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;mHeader\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etitle\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;hello\u0026quot;\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"language-javascript\"\u003e\n      \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eMHeader\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title class_ inherited__\"\u003eHTMLElement\u003c/span\u003e {\n        \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eget\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eobservedAttributes\u003c/span\u003e() {\n          \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e [\u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e];\n        }\n        \u003cspan class=\"hljs-title function_\"\u003econstructor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n          \u003cspan class=\"hljs-variable language_\"\u003esuper\u003c/span\u003e();\n          \u003cspan class=\"hljs-comment\"\u003e// ä¼šè‡ªåŠ¨å‘thisä¸ŠæŒ‚è½½ä¸€ä¸ªshadowRoot\u003c/span\u003e\n          \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eattachShadow\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003emode\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;open\u0026quot;\u003c/span\u003e });\n          \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e template = \u003cspan class=\"hljs-variable language_\"\u003edocument\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003equerySelector\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;#mHeaderTemplate\u0026quot;\u003c/span\u003e);\n          \u003cspan class=\"hljs-comment\"\u003e// const content = template.content.cloneNode(true);\u003c/span\u003e\n          \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e content = \u003cspan class=\"hljs-variable language_\"\u003edocument\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eimportNode\u003c/span\u003e(template.\u003cspan class=\"hljs-property\"\u003econtent\u003c/span\u003e, \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e);\n          \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eshadowRoot\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eappendChild\u003c/span\u003e(content);\n        }\n\n        \u003cspan class=\"hljs-title function_\"\u003econnectedCallback\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n          \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e loginBtn = \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eshadowRoot\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003equerySelector\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;#login\u0026quot;\u003c/span\u003e);\n          loginBtn.\u003cspan class=\"hljs-title function_\"\u003eaddEventListener\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;click\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u0026gt;\u003c/span\u003e {\n            \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003esetAttribute\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;ç™»å½•æˆåŠŸ\u0026quot;\u003c/span\u003e);\n          });\n        }\n\n        \u003cspan class=\"hljs-title function_\"\u003eattributeChangedCallback\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ename, oldValue, newValue\u003c/span\u003e) {\n          \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (name === \u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e) {\n            \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eshadowRoot\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003equerySelector\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;#content\u0026quot;\u003c/span\u003e).\u003cspan class=\"hljs-property\"\u003einnerText\u003c/span\u003e = newValue;\n          }\n        }\n      }\n\n      \u003cspan class=\"hljs-variable language_\"\u003ewindow\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ecustomElements\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003edefine\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;m-header\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eMHeader\u003c/span\u003e);\n\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e mHeader = \u003cspan class=\"hljs-variable language_\"\u003edocument\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003equerySelector\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;#mHeader\u0026quot;\u003c/span\u003e);\n    \u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ebody\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ehtml\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"æ€»ç»“\"\u003eæ€»ç»“\u003c/h2\u003e\n\u003cp\u003eç”±äº\u003ccode\u003eNode.cloneNode\u003c/code\u003eä»é»˜è®¤ä¿ç•™æ–°èŠ‚ç‚¹çš„\u003ccode\u003eownerDocument\u003c/code\u003eï¼Œå› æ­¤ä½¿ç”¨èµ·æ¥æ²¡æ³•æ”¾å¼€ï¼Œæœ‰äº›éœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚ä¸è¿‡æˆ‘ä»¬å¯ä»¥ä½¿ç”¨\u003ccode\u003edocument.importNode\u003c/code\u003eæ¥å®ç°ç›¸åŒçš„åŠŸèƒ½ï¼Œè¯¥APIåˆ›å»ºçš„èŠ‚ç‚¹å¤„äºæ¸¸ç¦»çŠ¶æ€ï¼Œåœ¨è¿›è¡Œ\u003ccode\u003eappend\u003c/code\u003eæ“ä½œåä¼šè‡ªåŠ¨ä¿®æ­£\u003ccode\u003eownerDocument\u003c/code\u003eçš„æŒ‡å‘\u003c/p\u003e\n\u003cp\u003eé€šè¿‡ä½¿ç”¨\u003ccode\u003ecustom elements\u003c/code\u003eæä¾›çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ç›‘å¬å±æ€§å˜åŒ–æ¥åšä¸€äº›é€»è¾‘ï¼Œä½†è¿˜æ˜¯é‚£å¥è¯ä¹¦å†™èµ·æ¥æœ‰äº›ä¸å¤Ÿä¾¿æ·ï¼Œéœ€è¦ç”¨åˆ°åŸç”Ÿ dom æ“ä½œ apiï¼Œæ²¡å‡† jQuery ä¼šå€Ÿç€ Web Components å†é‡æ–°æ´»è·ƒèµ·æ¥\u003c/p\u003e\n\u003ch2 id=\"å‚è€ƒ\"\u003eå‚è€ƒ\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://developer.mozilla.org/zh-CN/docs/Web/Web_Components\"\u003eMDN-Web Components\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/mdn/web-components-examples\"\u003eMDN/web-components-examples\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Node/cloneNode\"\u003eNode.cloneNode(deep)\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Document/importNode\"\u003edocument.importNode\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://developer.mozilla.org/zh-CN/docs/Web/Web_Components/Using_custom_elements#%E4%BD%BF%E7%94%A8%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0\"\u003eä½¿ç”¨ custom elements\u003c/a\u003e\u003c/p\u003e\n"}},"__N_SSG":true},"page":"/post/[title]","query":{"title":"Web Component-è‡ªå®šä¹‰å…ƒç´ çš„ç”Ÿå‘½å‘¨æœŸ"},"buildId":"OgI6Xyd2y4cH2beo6SuyV","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>