{"pageProps":{"post":{"title":"Web Component-è‡ªå®šä¹‰å…ƒç´ çš„ç”Ÿå‘½å‘¨æœŸ","tags":["å¾®å‰ç«¯","WebComponent"],"categories":"å¾®å‰ç«¯","description":"åœ¨ä¹‹å‰å¤§æ¦‚äº†è§£äº† Web Componentï¼ŒçŸ¥é“æ˜¯æ€ä¹ˆç©çš„ï¼Œä¸è¿‡åœ¨æŸ¥é˜…èµ„æ–™åå‘ç°ä¹‹å‰æœ‰äº›é”™è¯¯\n\n## Node.cloneNode çš„å±€é™æ€§\n\nåœ¨ä¹‹å‰ï¼Œä½¿ç”¨çš„æ˜¯`template.content.cloneNode(true);`æ¥åˆ›å»ºå‡ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œè¿™ç§æ–¹æ³•æœ‰ä¸€äº›å±€é™æ€§ï¼šä¼šå¤åˆ¶åŸèŠ‚ç‚¹çš„æ‰€æœ‰å±æ€§åŠå±æ€§å€¼ï¼Œå…¶ä¸­å°±åŒ…æ‹¬`id`ï¼Œè¿™æ ·é¡µé¢ä¸­å°±æœ‰å¤šä¸ª`id`ä¸€æ ·çš„å…ƒç´ äº†\n\n> æ‹·è´å®ƒæ‰€æœ‰çš„å±æ€§ä»¥åŠå±æ€§","createDate":"2022-04-21 21:06:23","updateDate":"2022-01-08 22:40:37","body":"<p>åœ¨ä¹‹å‰å¤§æ¦‚äº†è§£äº† Web Componentï¼ŒçŸ¥é“æ˜¯æ€ä¹ˆç©çš„ï¼Œä¸è¿‡åœ¨æŸ¥é˜…èµ„æ–™åå‘ç°ä¹‹å‰æœ‰äº›é”™è¯¯</p>\n<h2 id=\"nodeclonenode-çš„å±€é™æ€§\">Node.cloneNode çš„å±€é™æ€§</h2>\n<p>åœ¨ä¹‹å‰ï¼Œä½¿ç”¨çš„æ˜¯<code>template.content.cloneNode(true);</code>æ¥åˆ›å»ºå‡ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œè¿™ç§æ–¹æ³•æœ‰ä¸€äº›å±€é™æ€§ï¼šä¼šå¤åˆ¶åŸèŠ‚ç‚¹çš„æ‰€æœ‰å±æ€§åŠå±æ€§å€¼ï¼Œå…¶ä¸­å°±åŒ…æ‹¬<code>id</code>ï¼Œè¿™æ ·é¡µé¢ä¸­å°±æœ‰å¤šä¸ª<code>id</code>ä¸€æ ·çš„å…ƒç´ äº†</p>\n<blockquote>\n<p>æ‹·è´å®ƒæ‰€æœ‰çš„å±æ€§ä»¥åŠå±æ€§å€¼,å½“ç„¶ä¹Ÿå°±åŒ…æ‹¬äº†å±æ€§ä¸Šç»‘å®šçš„äº‹ä»¶(æ¯”å¦‚ onclick=&quot;alert(1)&quot;),ä½†ä¸ä¼šæ‹·è´é‚£äº›ä½¿ç”¨ addEventListener()æ–¹æ³•æˆ–è€… node.onclick = fn è¿™ç§ç”¨ JavaScript åŠ¨æ€ç»‘å®šçš„äº‹ä»¶. --mdn</p>\n</blockquote>\n<p>MDN åŒæ ·ä¹Ÿç»™å‡ºè­¦å‘Š</p>\n<blockquote>\n<p>æ³¨æ„:ä¸ºäº†é˜²æ­¢ä¸€ä¸ªæ–‡æ¡£ä¸­å‡ºç°ä¸¤ä¸ª ID é‡å¤çš„å…ƒç´ ,ä½¿ç”¨ cloneNode()æ–¹æ³•å…‹éš†çš„èŠ‚ç‚¹åœ¨éœ€è¦æ—¶åº”è¯¥æŒ‡å®šå¦å¤–ä¸€ä¸ªä¸åŸ ID å€¼ä¸åŒçš„ ID</p>\n</blockquote>\n<p>è€Œä¸”ï¼Œç”Ÿæˆçš„èŠ‚ç‚¹çš„<code>ownerDocument</code>ä»ç„¶æŒ‡å‘æºèŠ‚ç‚¹çš„<code>ownerDocument</code></p>\n<p>æ—¢ç„¶è¿™ä¸ªæ–¹æ³•æœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ³•å‘¢ï¼Ÿæœ‰çš„ï¼</p>\n<h2 id=\"documentimportnode\">document.importNode</h2>\n<blockquote>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Document/importNode\">document.importNode</a>å°†å¤–éƒ¨æ–‡æ¡£çš„ä¸€ä¸ªèŠ‚ç‚¹æ‹·è´ä¸€ä»½,ç„¶åå¯ä»¥æŠŠè¿™ä¸ªæ‹·è´çš„èŠ‚ç‚¹æ’å…¥åˆ°å½“å‰æ–‡æ¡£ä¸­</p>\n</blockquote>\n<p>ä½¿ç”¨æ–¹å¼</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// deepå‚æ•°è¡¨ç¤ºæ˜¯å¦é€’å½’å¤åˆ¶æºèŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹</span>\n<span class=\"hljs-keyword\">const</span> node = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">importNode</span>(externalNode, deep);\n</code></pre>\n<p>æ³¨æ„ï¼š</p>\n<p>æ–°ç”ŸæˆèŠ‚ç‚¹çš„ <code>parentNode</code> æ˜¯ <code>null</code>ï¼Œå› ä¸ºå®ƒè¿˜æ²¡æœ‰æ’å…¥å½“å‰æ–‡æ¡£çš„æ–‡æ¡£æ ‘ä¸­ï¼Œ<strong>å±äºæ¸¸ç¦»çŠ¶æ€</strong>ï¼Œå› æ­¤æ— æ³•å¯¹å…¶è¿›è¡Œæ“ä½œ</p>\n<p>è¿™æ ·çš„è¯æˆ‘ä»¬å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä¿®æ”¹æ–°èŠ‚ç‚¹çš„<code>ownerDocument</code>ï¼ˆåœ¨<code>append</code>ä¹‹åè‡ªåŠ¨æŒ‡å‘å½“å‰<code>document</code>ï¼‰</p>\n<p>è¯•è¯•æ–°çš„ api æ¥åˆ›å»º<em>ç»„ä»¶</em></p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n  <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MHeader</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">HTMLElement</span> {\n    <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\"></span>) {\n      <span class=\"hljs-variable language_\">super</span>();\n      <span class=\"hljs-comment\">// ...</span>\n      <span class=\"hljs-keyword\">const</span> content = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">importNode</span>(template.<span class=\"hljs-property\">content</span>, <span class=\"hljs-literal\">true</span>);\n      <span class=\"hljs-comment\">/**\n       * æ³¨æ„ï¼Œè¦å…ˆå°†èŠ‚ç‚¹æ’å…¥åˆ°shadowRootåæ‰èƒ½å¯¹å…¶è¿›è¡Œæ“ä½œ\n       */</span>\n      shadowRoot.<span class=\"hljs-title function_\">appendChild</span>(content);\n      <span class=\"hljs-comment\">// ...</span>\n    }\n  }\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n</code></pre>\n<h2 id=\"htmlelement-çš„ç”Ÿå‘½å‘¨æœŸ\">HTMLElement çš„ç”Ÿå‘½å‘¨æœŸ</h2>\n<p>åœ¨ä¹‹å‰ï¼Œæˆ‘ä»¬éƒ½æ˜¯å°†å„ç§æ“ä½œç›´æ¥å†™åœ¨æ„é€ å‡½æ•°é‡Œï¼Œè¿™æ˜¾ç„¶æœ‰äº›è‡ƒè‚¿ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€äº›åŠæ³•å¯ä»¥å°†è¿™äº›é€»è¾‘åˆ†å‘å‡ºå»å‘¢ï¼Ÿæœ‰çš„ï¼</p>\n<p>åœ¨<code>HTMLElement</code>å†…ï¼Œæœ‰ä¸€äº›<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/Web_Components/Using_custom_elements#%E4%BD%BF%E7%94%A8%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0\">ç”Ÿå‘½å‘¨æœŸ</a></p>\n<ul>\n<li><p><code>connectedCallback</code>ï¼Œå½“ <code>custom element</code> é¦–æ¬¡è¢«æ’å…¥æ–‡æ¡£ DOM æ—¶è¢«è°ƒç”¨</p>\n</li>\n<li><p><code>disconnectedCallback</code>ï¼Œå½“ <code>custom element</code>ä»æ–‡æ¡£ DOM ä¸­åˆ é™¤æ—¶è¢«è°ƒç”¨</p>\n</li>\n<li><p><code>adoptedCallback</code>ï¼Œ å½“ <code>custom element</code>è¢«ç§»åŠ¨åˆ°æ–°çš„æ–‡æ¡£æ—¶è¢«è°ƒç”¨</p>\n</li>\n<li><p><code>attributeChangedCallback</code>ï¼Œå½“ <code>custom element</code>å¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹è‡ªèº«å±æ€§æ—¶è¢«è°ƒç”¨</p>\n</li>\n</ul>\n<p>æ®æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é‡æ„ä¸€ä¸‹ä¹‹å‰çš„<em>ç»„ä»¶</em></p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n  <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MHeader</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">HTMLElement</span> {\n    <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">get</span> <span class=\"hljs-title function_\">observedAttributes</span>() {\n      <span class=\"hljs-keyword\">return</span> [<span class=\"hljs-string\">&quot;title&quot;</span>];\n    }\n    <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\"></span>) {\n      <span class=\"hljs-variable language_\">super</span>();\n      <span class=\"hljs-comment\">// ä¼šè‡ªåŠ¨å‘thisä¸ŠæŒ‚è½½ä¸€ä¸ªshadowRoot</span>\n      <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">attachShadow</span>({ <span class=\"hljs-attr\">mode</span>: <span class=\"hljs-string\">&quot;open&quot;</span> });\n      <span class=\"hljs-keyword\">const</span> template = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#mHeaderTemplate&quot;</span>);\n      <span class=\"hljs-comment\">// const content = template.content.cloneNode(true);</span>\n      <span class=\"hljs-keyword\">const</span> content = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">importNode</span>(template.<span class=\"hljs-property\">content</span>, <span class=\"hljs-literal\">true</span>);\n      <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">shadowRoot</span>.<span class=\"hljs-title function_\">appendChild</span>(content);\n    }\n\n    <span class=\"hljs-title function_\">connectedCallback</span>(<span class=\"hljs-params\"></span>) {\n      <span class=\"hljs-keyword\">const</span> loginBtn = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">shadowRoot</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#login&quot;</span>);\n      loginBtn.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&quot;click&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">setAttribute</span>(<span class=\"hljs-string\">&quot;title&quot;</span>, <span class=\"hljs-string\">&quot;ç™»å½•æˆåŠŸ&quot;</span>);\n      });\n    }\n\n    <span class=\"hljs-title function_\">attributeChangedCallback</span>(<span class=\"hljs-params\">name, oldValue, newValue</span>) {\n      <span class=\"hljs-keyword\">if</span> (name === <span class=\"hljs-string\">&quot;title&quot;</span>) {\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">shadowRoot</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#content&quot;</span>).<span class=\"hljs-property\">innerText</span> = newValue;\n      }\n    }\n  }\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n</code></pre>\n<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨<code>attributeChangedCallback</code>æ¥ç›‘å¬<em>ç»„ä»¶</em>å±æ€§å˜åŒ–ï¼Œåœ¨<code>title</code>å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ›´æ–°å…ƒç´ çš„å€¼ã€‚è¯¥å›è°ƒä¼šè¿”å›ä¸‰ä¸ªå‚æ•°ï¼š</p>\n<ul>\n<li><p><code>name</code>ï¼Œå˜åŒ–çš„å±æ€§çš„åå­—</p>\n</li>\n<li><p><code>oldValue</code>ï¼Œå±æ€§ä¹‹å‰çš„å€¼</p>\n</li>\n<li><p><code>newValue</code>ï¼Œè¦è®¾ç½®çš„å€¼</p>\n</li>\n</ul>\n<p>ï¼ˆreact å†™çš„å¤šäº†ï¼Œæœ‰ç‚¹æ¢¦å› vue çš„æ„Ÿè§‰ ğŸ¤”ï¼‰</p>\n<p>æ­¤å¤–æœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼š</p>\n<p>éœ€è¦åœ¨<code>static get observedAttributes</code>å‡½æ•°é‡Œå£°æ˜ä¸€ä¸‹è¦ç›‘å¬çš„å±æ€§å</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">get</span> <span class=\"hljs-title function_\">observedAttributes</span>() {\n  <span class=\"hljs-keyword\">return</span> [<span class=\"hljs-string\">&quot;title&quot;</span>];\n}\n</code></pre>\n<p>å®Œæ•´ä»£ç </p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-keyword\">html</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">&quot;en&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">charset</span>=<span class=\"hljs-string\">&quot;UTF-8&quot;</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">http-equiv</span>=<span class=\"hljs-string\">&quot;X-UA-Compatible&quot;</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">&quot;IE=edge&quot;</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;viewport&quot;</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>Document<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;mHeaderTemplate&quot;</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">style</span>&gt;</span><span class=\"language-css\">\n        <span class=\"hljs-selector-pseudo\">:host</span> {\n          <span class=\"hljs-attribute\">font-size</span>: <span class=\"hljs-number\">32px</span>;\n        }\n\n        <span class=\"hljs-selector-class\">.content</span> {\n          <span class=\"hljs-attribute\">color</span>: <span class=\"hljs-number\">#f00</span>;\n        }\n      </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">style</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;content&quot;</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;content&quot;</span>&gt;</span>æˆ‘æ˜¯å¤´éƒ¨<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;login&quot;</span>&gt;</span>login<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">m-header</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;mHeader&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;hello&quot;</span> /&gt;</span>\n\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n      <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MHeader</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">HTMLElement</span> {\n        <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">get</span> <span class=\"hljs-title function_\">observedAttributes</span>() {\n          <span class=\"hljs-keyword\">return</span> [<span class=\"hljs-string\">&quot;title&quot;</span>];\n        }\n        <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\"></span>) {\n          <span class=\"hljs-variable language_\">super</span>();\n          <span class=\"hljs-comment\">// ä¼šè‡ªåŠ¨å‘thisä¸ŠæŒ‚è½½ä¸€ä¸ªshadowRoot</span>\n          <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">attachShadow</span>({ <span class=\"hljs-attr\">mode</span>: <span class=\"hljs-string\">&quot;open&quot;</span> });\n          <span class=\"hljs-keyword\">const</span> template = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#mHeaderTemplate&quot;</span>);\n          <span class=\"hljs-comment\">// const content = template.content.cloneNode(true);</span>\n          <span class=\"hljs-keyword\">const</span> content = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">importNode</span>(template.<span class=\"hljs-property\">content</span>, <span class=\"hljs-literal\">true</span>);\n          <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">shadowRoot</span>.<span class=\"hljs-title function_\">appendChild</span>(content);\n        }\n\n        <span class=\"hljs-title function_\">connectedCallback</span>(<span class=\"hljs-params\"></span>) {\n          <span class=\"hljs-keyword\">const</span> loginBtn = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">shadowRoot</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#login&quot;</span>);\n          loginBtn.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&quot;click&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n            <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">setAttribute</span>(<span class=\"hljs-string\">&quot;title&quot;</span>, <span class=\"hljs-string\">&quot;ç™»å½•æˆåŠŸ&quot;</span>);\n          });\n        }\n\n        <span class=\"hljs-title function_\">attributeChangedCallback</span>(<span class=\"hljs-params\">name, oldValue, newValue</span>) {\n          <span class=\"hljs-keyword\">if</span> (name === <span class=\"hljs-string\">&quot;title&quot;</span>) {\n            <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">shadowRoot</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#content&quot;</span>).<span class=\"hljs-property\">innerText</span> = newValue;\n          }\n        }\n      }\n\n      <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">customElements</span>.<span class=\"hljs-title function_\">define</span>(<span class=\"hljs-string\">&quot;m-header&quot;</span>, <span class=\"hljs-title class_\">MHeader</span>);\n\n      <span class=\"hljs-keyword\">const</span> mHeader = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#mHeader&quot;</span>);\n    </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n</code></pre>\n<h2 id=\"æ€»ç»“\">æ€»ç»“</h2>\n<p>ç”±äº<code>Node.cloneNode</code>ä»é»˜è®¤ä¿ç•™æ–°èŠ‚ç‚¹çš„<code>ownerDocument</code>ï¼Œå› æ­¤ä½¿ç”¨èµ·æ¥æ²¡æ³•æ”¾å¼€ï¼Œæœ‰äº›éœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚ä¸è¿‡æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>document.importNode</code>æ¥å®ç°ç›¸åŒçš„åŠŸèƒ½ï¼Œè¯¥APIåˆ›å»ºçš„èŠ‚ç‚¹å¤„äºæ¸¸ç¦»çŠ¶æ€ï¼Œåœ¨è¿›è¡Œ<code>append</code>æ“ä½œåä¼šè‡ªåŠ¨ä¿®æ­£<code>ownerDocument</code>çš„æŒ‡å‘</p>\n<p>é€šè¿‡ä½¿ç”¨<code>custom elements</code>æä¾›çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ç›‘å¬å±æ€§å˜åŒ–æ¥åšä¸€äº›é€»è¾‘ï¼Œä½†è¿˜æ˜¯é‚£å¥è¯ä¹¦å†™èµ·æ¥æœ‰äº›ä¸å¤Ÿä¾¿æ·ï¼Œéœ€è¦ç”¨åˆ°åŸç”Ÿ dom æ“ä½œ apiï¼Œæ²¡å‡† jQuery ä¼šå€Ÿç€ Web Components å†é‡æ–°æ´»è·ƒèµ·æ¥</p>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/Web_Components\">MDN-Web Components</a></p>\n<p><a href=\"https://github.com/mdn/web-components-examples\">MDN/web-components-examples</a></p>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Node/cloneNode\">Node.cloneNode(deep)</a></p>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Document/importNode\">document.importNode</a></p>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/Web_Components/Using_custom_elements#%E4%BD%BF%E7%94%A8%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0\">ä½¿ç”¨ custom elements</a></p>\n"}},"__N_SSG":true}