{"pageProps":{"post":{"title":"Web Component-Lit-2","tags":["å¾®å‰ç«¯","WebComponent","Lit"],"categories":"å¾®å‰ç«¯","description":"åœ¨æ˜¨å¤©ï¼Œæˆ‘ä»¬ä½¿ç”¨ Lit é‡æ„äº†`Reply`ç»„ä»¶\n\nåŠŸèƒ½æ˜¯å®Œæˆäº†ï¼Œä¸è¿‡æœ€åæ€»ç»“çš„æ—¶å€™æœ‰äº›è®¸åæ§½ï¼Œäº‹åæƒ³èµ·æ¥è²Œä¼¼æ˜¯è‡ªå·±ä½¿ç”¨å§¿åŠ¿ä¸å¯¹ ğŸ¤” ï¼Œå› æ­¤ä»Šå¤©åŸºäº typescript + webpack + Lit æ¥é‡æ–°å¼€å‘ï¼Œæœç„¶ä½“éªŒä¸€ä¸‹å°±ä¸Šå»äº†ï¼š\n\n1. typescriptã€‚æœ‰äº† typescript çš„åŠ æŒï¼Œå°‘å†™äº†ä¸å°‘æ¨¡ç‰ˆä»£ç \n\n2. VS Code æ’ä»¶ã€‚æˆ‘ä»¬åœ¨ä¸Šä¸€ç¯‡å¤„ç†ä¸­åæ§½æ²¡æœ‰è¯­æ³•æç¤ºï¼Œä»Š","createDate":"2022-04-27 22:25:56","updateDate":"2022-05-07 22:54:37","body":"<p>åœ¨æ˜¨å¤©ï¼Œæˆ‘ä»¬ä½¿ç”¨ Lit é‡æ„äº†<code>Reply</code>ç»„ä»¶</p>\n<p>åŠŸèƒ½æ˜¯å®Œæˆäº†ï¼Œä¸è¿‡æœ€åæ€»ç»“çš„æ—¶å€™æœ‰äº›è®¸åæ§½ï¼Œäº‹åæƒ³èµ·æ¥è²Œä¼¼æ˜¯è‡ªå·±ä½¿ç”¨å§¿åŠ¿ä¸å¯¹ ğŸ¤” ï¼Œå› æ­¤ä»Šå¤©åŸºäº typescript + webpack + Lit æ¥é‡æ–°å¼€å‘ï¼Œæœç„¶ä½“éªŒä¸€ä¸‹å°±ä¸Šå»äº†ï¼š</p>\n<ol>\n<li><p>typescriptã€‚æœ‰äº† typescript çš„åŠ æŒï¼Œå°‘å†™äº†ä¸å°‘æ¨¡ç‰ˆä»£ç </p>\n</li>\n<li><p>VS Code æ’ä»¶ã€‚æˆ‘ä»¬åœ¨ä¸Šä¸€ç¯‡å¤„ç†ä¸­åæ§½æ²¡æœ‰è¯­æ³•æç¤ºï¼Œä»Šå¤©å‘ç° VS Code æœ‰ä¸€ä¸ªæ’ä»¶å¯ä»¥åšåˆ°è¯¥åŠŸèƒ½ï¼Œå—¯ï¼Œä½“éªŒåˆé«˜äº†ä¸€çº§</p>\n</li>\n</ol>\n<p>æ¥ä¸‹æ¥å°±å¼€å§‹ä»‹ç»æˆ‘çš„æ¢ç´¢ä¹‹æ—…</p>\n\n      <h2>\n        <span class=\"prefix\"></span>\n        <span class=\"content\">é…ç½®å¼€å‘ç¯å¢ƒ</span>\n        <span class=\"suffix\"></span>\n      </h2>\n    <p>ä¸»è¦æ˜¯å®‰è£… package + é…ç½® webpack + å®‰è£…æ’ä»¶</p>\n<ol>\n<li>å®‰è£…å¿…è¦çš„ package</li>\n</ol>\n<pre><code class=\"hljs language-json\"><span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">&quot;dependencies&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;lit&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;^2.2.2&quot;</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;typescript&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;^4.6.3&quot;</span>\n  <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">&quot;devDependencies&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;html-webpack-plugin&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;^5.5.0&quot;</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;ts-loader&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;^9.2.9&quot;</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;webpack&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;^5.72.0&quot;</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;webpack-cli&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;^4.9.2&quot;</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;webpack-dev-server&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;^4.8.1&quot;</span>\n  <span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n<ol start=\"2\">\n<li>é…ç½® webpack</li>\n</ol>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title class_\">HtmlWebpackPlugin</span> = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;html-webpack-plugin&quot;</span>);\n\n<span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {\n  <span class=\"hljs-attr\">mode</span>: <span class=\"hljs-string\">&quot;development&quot;</span>,\n  <span class=\"hljs-attr\">entry</span>: <span class=\"hljs-string\">&quot;./src/index.ts&quot;</span>,\n  <span class=\"hljs-attr\">module</span>: {\n    <span class=\"hljs-attr\">rules</span>: [\n      {\n        <span class=\"hljs-attr\">test</span>: <span class=\"hljs-regexp\">/\\.ts$/</span>,\n        <span class=\"hljs-attr\">use</span>: [<span class=\"hljs-string\">&quot;ts-loader&quot;</span>],\n      },\n    ],\n  },\n  <span class=\"hljs-attr\">devtool</span>: <span class=\"hljs-string\">&quot;source-map&quot;</span>,\n  <span class=\"hljs-attr\">plugins</span>: [<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">HtmlWebpackPlugin</span>()],\n};\n</code></pre>\n<ol start=\"3\">\n<li>æ·»åŠ å¯åŠ¨å‘½ä»¤</li>\n</ol>\n<pre><code class=\"hljs language-json\"><span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">&quot;scripts&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;dev:lit&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;webpack serve&quot;</span>\n  <span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n<ol start=\"4\">\n<li>å®‰è£… VS Code æ’ä»¶</li>\n</ol>\n<p>VS Code æ’ä»¶æ ä¸­æœç´¢<strong>lit-plugin</strong>ï¼Œç„¶åå®‰è£…å³å¯ï¼Œå®‰è£…å¥½ä¹‹å<code>html</code>å’Œ<code>css</code>é‡Œçš„ä»£ç å°±æœ‰é«˜äº®å’Œè¯­æ³•æç¤ºäº†ï¼ˆæ²¡æœ‰çš„è¯é‡æ–°æ‰“å¼€æ–‡ä»¶è¯•è¯•ï¼Œå†ä¸è¡Œå°±é‡å¯å¤§æ³•å¥½ï¼‰ï¼Œè€Œä¸”ç‚¹å‡»ç»„ä»¶è¿˜å¯ä»¥è·³è½¬äº†</p>\n<p>è‡³æ­¤ï¼Œå¼€å‘ç¯å¢ƒé…ç½®å®Œæ¯•</p>\n\n      <h2>\n        <span class=\"prefix\"></span>\n        <span class=\"content\">ä½¿ç”¨ typescript é‡æ„ä»£ç </span>\n        <span class=\"suffix\"></span>\n      </h2>\n    <p>ä¿—è¯è¯´å¾—å¥½ï¼Œç£¨åˆ€ä¸è¯¯ç æŸ´å·¥ï¼Œå…ˆè§„åˆ’å¥½è¦åšä»€ä¹ˆ</p>\n<ol>\n<li><p>é‡æ„ Reply ç»„ä»¶</p>\n</li>\n<li><p>ä½¿ç”¨ typescript å¼€å‘</p>\n</li>\n<li><p>ä½¿ç”¨ webpack ğŸ“¦</p>\n</li>\n</ol>\n<p>é‚£ä¹ˆæ—¢ç„¶ç”¨åˆ° webpack äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æŒ‰ç…§é€šå¸¸çš„é¡¹ç›®æ¥è®¾è®¡äº†</p>\n<pre><code class=\"hljs language-sh\">.\nâ”œâ”€â”€ package.json\nâ”œâ”€â”€ src\nâ”‚   â”œâ”€â”€ components\nâ”‚   â”‚   â”œâ”€â”€ Comment.ts <span class=\"hljs-comment\"># è¯„è®ºç»„ä»¶</span>\nâ”‚   â”‚   â””â”€â”€ Reply.ts   <span class=\"hljs-comment\"># å›å¤ç»„ä»¶</span>\nâ”‚   â””â”€â”€ index.ts       <span class=\"hljs-comment\"># å…¥å£æ–‡ä»¶ï¼ŒåŒæ—¶ä¼šåˆ›å»ºä¸€ä¸ªAppç»„ä»¶</span>\nâ”œâ”€â”€ tsconfig.json\nâ”œâ”€â”€ webpack.config.js\nâ””â”€â”€ yarn.lock\n</code></pre>\n<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åˆ†åˆ«å°†ä¸åŒçš„ç»„ä»¶æŠ½ç¦»åˆ°ä¸åŒçš„æ–‡ä»¶ä¸­ï¼Œè¿™æ ·é€»è¾‘æ›´æ¸…æ™°ï¼Œç»´æŠ¤èµ·æ¥ä¹Ÿæ›´æ–¹ä¾¿</p>\n<p>å¥½äº†ï¼Œæ¥ä¸‹æ¥å¼€å§‹ç¼–ç </p>\n<p>ï¼ˆä»£ç å’Œä¹‹å‰çš„å·®ä¸å¤šï¼Œæˆ‘ç›´æ¥æ•²é‡ç‚¹ï¼‰</p>\n<p>ä» js è¿ç§»åˆ° ts å¼€å§‹å¾ˆæ–¹ä¾¿å¿«æ·çš„ï¼Œä¸»è¦ä¿®æ”¹çš„é€»è¾‘åŒ…å«ä¸‹é¢å‡ é¡¹</p>\n<ol>\n<li><p>å»é™¤ä¹‹å‰çš„<code>window.customElements.define(&#39;m-comment&#39;, Comment);</code>ï¼Œåœ¨<code>class</code>æœ€ä¸Šé¢æ·»åŠ æ³¨è§£<code>@customElement(&quot;m-comment&quot;)</code></p>\n</li>\n<li><p>å±æ€§å£°æ˜ä¹Ÿå¯ä»¥ä½¿ç”¨æ³¨è§£äº†</p>\n</li>\n</ol>\n<pre><code class=\"hljs language-ts\">  <span class=\"hljs-meta\">@property</span>({ <span class=\"hljs-attr\">type</span>: <span class=\"hljs-title class_\">String</span> })\n  avatar = <span class=\"hljs-string\">&#x27;&#x27;</span>\n</code></pre>\n<ol start=\"3\">\n<li>ç»„ä»¶ä¸­çš„<code>this.shadowRoot.querySelector(&#39;#input&#39;)</code>éœ€è¦ä¿®æ”¹ä¸€ä¸‹</li>\n</ol>\n<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>!</code>æ¥å¼ºåˆ¶å£°æ˜<code>this.shadowRoot</code>æ˜¯ä¸€å®šå­˜åœ¨çš„ï¼Œæˆ–è€…æ·»åŠ ä¸€ä¸ª<code>if</code>åˆ¤æ–­</p>\n<pre><code class=\"hljs language-ts\"><span class=\"hljs-title function_\">onSubmit</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">const</span> <span class=\"hljs-attr\">comment</span>: <span class=\"hljs-title class_\">HTMLInputElement</span>|<span class=\"hljs-literal\">null</span> = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">shadowRoot</span>!.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&#x27;#input&#x27;</span>);\n    <span class=\"hljs-keyword\">const</span> res = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">dispatchEvent</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">CustomEvent</span>(<span class=\"hljs-string\">&#x27;submit-comment&#x27;</span>, {\n      <span class=\"hljs-attr\">detail</span>: comment!.<span class=\"hljs-property\">value</span>,\n    }));\n    comment!.<span class=\"hljs-property\">value</span> = <span class=\"hljs-string\">&quot;&quot;</span>;\n  }\n</code></pre>\n<ol start=\"4\">\n<li>å®Œæˆ</li>\n</ol>\n<p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/611ad4cbcda94373a63fb5b2b22bd715~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"lit-ts-js\"></p>\n<p>å¯ä»¥çœ‹åˆ°ï¼Œæœ‰äº† typescript çš„åŠ æŒï¼Œä»£ç æ˜æ˜¾æ¸…çˆ½è®¸å¤šï¼Œè€Œä¸”å¼€å‘ä½“éªŒä¹Ÿæ›´å¥½äº†</p>\n<p>å®Œæ•´ä»£ç åœ¨<a href=\"https://github.com/mrrs878/web-components\">è¿™é‡Œ</a></p>\n\n      <h2>\n        <span class=\"prefix\"></span>\n        <span class=\"content\">æ€»ç»“</span>\n        <span class=\"suffix\"></span>\n      </h2>\n    <p>typescript ç‰›é€¼ï¼Œå¼€å‘æ’ä»¶çš„å¤§ä½¬ç‰›é€¼</p>\n\n      <h2>\n        <span class=\"prefix\"></span>\n        <span class=\"content\">å‚è€ƒ</span>\n        <span class=\"suffix\"></span>\n      </h2>\n    <p><a href=\"https://lit.dev/docs/\">Lit</a></p>\n"}},"__N_SSG":true}