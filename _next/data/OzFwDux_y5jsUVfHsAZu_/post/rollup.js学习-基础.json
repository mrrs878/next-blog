{"pageProps":{"post":{"title":"rollup.js学习-基础","tags":["打包","rollup.js"],"categories":"rollup.js","description":"## WHAT\n\n一款打包工具\n\n## WHY\n\n- 轻量，适合打包库\n\n- 支持输出esm\n\n## HOW\n\n> 打包 typescript，单入口，多输出格式\n\n###  安装\n\n- `rollup`\n\n- `rollup-plugin-typescript2`\n\n- `@rollup/plugin-node-resolve`\n\n- `@rollup/plugin-commonjs`\n\n-","createDate":"2020-12-11 03:43:07","updateDate":"2020-12-11 11:02:22","body":"\n      <h2>\n        <span class=\"prefix\"></span>\n        <span class=\"content\">WHAT</span>\n        <span class=\"suffix\"></span>\n      </h2>\n    <p>一款打包工具</p>\n\n      <h2>\n        <span class=\"prefix\"></span>\n        <span class=\"content\">WHY</span>\n        <span class=\"suffix\"></span>\n      </h2>\n    <ul>\n<li><p>轻量，适合打包库</p>\n</li>\n<li><p>支持输出esm</p>\n</li>\n</ul>\n\n      <h2>\n        <span class=\"prefix\"></span>\n        <span class=\"content\">HOW</span>\n        <span class=\"suffix\"></span>\n      </h2>\n    <blockquote>\n<p>打包 typescript，单入口，多输出格式</p>\n</blockquote>\n\n      <h3>\n        <span class=\"prefix\"></span>\n        <span class=\"content\">安装</span>\n        <span class=\"suffix\"></span>\n      </h3>\n    <ul>\n<li><p><code>rollup</code></p>\n</li>\n<li><p><code>rollup-plugin-typescript2</code></p>\n</li>\n<li><p><code>@rollup/plugin-node-resolve</code></p>\n</li>\n<li><p><code>@rollup/plugin-commonjs</code></p>\n</li>\n<li><p><code>rollup-plugin-cleaner</code></p>\n</li>\n</ul>\n\n      <h3>\n        <span class=\"prefix\"></span>\n        <span class=\"content\">配置</span>\n        <span class=\"suffix\"></span>\n      </h3>\n    <pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> resolve <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@rollup/plugin-node-resolve&#x27;</span>;\n<span class=\"hljs-keyword\">import</span> commonjs <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@rollup/plugin-commonjs&#x27;</span>;\n<span class=\"hljs-keyword\">import</span> path <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;path&#x27;</span>;\n<span class=\"hljs-keyword\">import</span> ts <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;rollup-plugin-typescript2&#x27;</span>;\n<span class=\"hljs-keyword\">import</span> cleaner <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;rollup-plugin-cleaner&#x27;</span>;\n\n<span class=\"hljs-keyword\">const</span> extensions = [<span class=\"hljs-string\">&#x27;.ts&#x27;</span>, <span class=\"hljs-string\">&#x27;.tsx&#x27;</span>, <span class=\"hljs-string\">&#x27;.js&#x27;</span>, <span class=\"hljs-string\">&#x27;.jsx&#x27;</span>];\n<span class=\"hljs-keyword\">const</span> tsconfig = path.<span class=\"hljs-title function_\">resolve</span>(__dirname, <span class=\"hljs-string\">&#x27;tsconfig.json&#x27;</span>);\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> [\n  {\n    <span class=\"hljs-attr\">input</span>: <span class=\"hljs-string\">&#x27;./src/index.ts&#x27;</span>,\n    <span class=\"hljs-attr\">output</span>: {\n      <span class=\"hljs-attr\">dir</span>: <span class=\"hljs-string\">&#x27;dist/esm&#x27;</span>,\n      <span class=\"hljs-attr\">format</span>: <span class=\"hljs-string\">&#x27;esm&#x27;</span>,\n    },\n    <span class=\"hljs-attr\">plugins</span>: [\n      <span class=\"hljs-title function_\">cleaner</span>({ <span class=\"hljs-attr\">targets</span>: [<span class=\"hljs-string\">&#x27;./dist/&#x27;</span>] }),\n      <span class=\"hljs-title function_\">resolve</span>({ extensions }),\n      <span class=\"hljs-title function_\">commonjs</span>(),\n      <span class=\"hljs-title function_\">ts</span>({ tsconfig }),\n    ],\n    <span class=\"hljs-attr\">external</span>: [<span class=\"hljs-string\">&#x27;react&#x27;</span>]\n  },\n  {\n    <span class=\"hljs-attr\">input</span>: <span class=\"hljs-string\">&#x27;./src/index.ts&#x27;</span>,\n    <span class=\"hljs-attr\">output</span>: {\n      <span class=\"hljs-attr\">dir</span>: <span class=\"hljs-string\">&#x27;dist/umd&#x27;</span>,\n      <span class=\"hljs-attr\">format</span>: <span class=\"hljs-string\">&#x27;umd&#x27;</span>,\n      <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&#x27;MJSLibrary&#x27;</span>,\n      <span class=\"hljs-attr\">globals</span>: {\n        <span class=\"hljs-attr\">react</span>: <span class=\"hljs-string\">&#x27;React&#x27;</span>\n      }\n    },\n    <span class=\"hljs-attr\">plugins</span>: [\n      <span class=\"hljs-title function_\">resolve</span>({ \n        extensions\n      }),\n      <span class=\"hljs-title function_\">commonjs</span>(),\n      <span class=\"hljs-title function_\">ts</span>({ \n        <span class=\"hljs-attr\">tsconfigOverride</span>: { <span class=\"hljs-attr\">compilerOptions</span>: { <span class=\"hljs-attr\">declaration</span>: <span class=\"hljs-literal\">false</span> } }, \n        tsconfig\n      }),\n    ],\n    <span class=\"hljs-attr\">external</span>: [<span class=\"hljs-string\">&#x27;react&#x27;</span>]\n  }\n]\n</code></pre>\n\n      <h3>\n        <span class=\"prefix\"></span>\n        <span class=\"content\">打包</span>\n        <span class=\"suffix\"></span>\n      </h3>\n    <pre><code class=\"hljs language-json\"><span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;scripts&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n        <span class=\"hljs-attr\">&quot;build&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;rollup -c&quot;</span>\n    <span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n"}},"__N_SSG":true}