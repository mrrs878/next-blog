{"pageProps":{"posts":[{"title":"å¾®å‰ç«¯-æŠ€æœ¯è°ƒç ”","tags":["å¾®å‰ç«¯"],"categories":"å¾®å‰ç«¯","description":"å¾®å‰ç«¯æ˜¯è¿‘ä¸¤å¹´æ¯”è¾ƒç«çƒ­çš„è¯é¢˜ï¼Œä»å›½å¤–çš„ single-spa åˆ°é˜¿é‡Œçš„ qiankunï¼Œä»äº¬ä¸œçš„ micro-app åˆ°æ¬¢èšæ—¶ä»£çš„ emp ï¼Œå„å®¶å¤§å‚ä½¿å°½æµ‘èº«è§£æ•°æ¨å‡ºè‡ªå®¶çš„å¾®å‰ç«¯æ¡†æ¶ï¼Œé‚£ä¹ˆå¾®å‰ç«¯åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢\n\n## ä»€ä¹ˆæ˜¯å¾®å‰ç«¯\n\nç½‘ä¸Šçœ‹åˆ°ä¸€å¥è¯å¯¹å…¶æ€»ç»“çš„é­è¾Ÿå…¥é‡Œ\n\n> â€œå¾®å‰ç«¯æ˜¯ä¸€ç§æ¶æ„é£æ ¼ï¼Œå…¶ä¸­ä¼—å¤šç‹¬ç«‹äº¤ä»˜çš„å‰ç«¯åº”ç”¨ç»„åˆæˆä¸€ä¸ªå¤§å‹æ•´ä½“ã€‚â€\n\nå¾®å‰ç«¯çš„æ¦‚å¿µæœ€æ—©åœ¨ 2016 å¹´åº•è¢«[æå‡º](ht","createDate":"2022-04-28 22:12:20","updateDate":"2022-05-12 22:57:34","body":"<p>å¾®å‰ç«¯æ˜¯è¿‘ä¸¤å¹´æ¯”è¾ƒç«çƒ­çš„è¯é¢˜ï¼Œä»å›½å¤–çš„ single-spa åˆ°é˜¿é‡Œçš„ qiankunï¼Œä»äº¬ä¸œçš„ micro-app åˆ°æ¬¢èšæ—¶ä»£çš„ emp ï¼Œå„å®¶å¤§å‚ä½¿å°½æµ‘èº«è§£æ•°æ¨å‡ºè‡ªå®¶çš„å¾®å‰ç«¯æ¡†æ¶ï¼Œé‚£ä¹ˆå¾®å‰ç«¯åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢</p>\n<h2 id=\"ä»€ä¹ˆæ˜¯å¾®å‰ç«¯\">ä»€ä¹ˆæ˜¯å¾®å‰ç«¯</h2>\n<p>ç½‘ä¸Šçœ‹åˆ°ä¸€å¥è¯å¯¹å…¶æ€»ç»“çš„é­è¾Ÿå…¥é‡Œ</p>\n<blockquote>\n<p>â€œå¾®å‰ç«¯æ˜¯ä¸€ç§æ¶æ„é£æ ¼ï¼Œå…¶ä¸­ä¼—å¤šç‹¬ç«‹äº¤ä»˜çš„å‰ç«¯åº”ç”¨ç»„åˆæˆä¸€ä¸ªå¤§å‹æ•´ä½“ã€‚â€</p>\n</blockquote>\n<p>å¾®å‰ç«¯çš„æ¦‚å¿µæœ€æ—©åœ¨ 2016 å¹´åº•è¢«<a href=\"https://www.thoughtworks.com/radar/techniques/micro-frontends\">æå‡º</a>ï¼Œ<strong>å¾®å‰ç«¯ä¸æ˜¯å•çº¯çš„å‰ç«¯æ¡†æ¶æˆ–è€…å·¥å…·ï¼Œè€Œæ˜¯ä¸€å¥—æ¶æ„ä½“ç³»</strong>ï¼Œå®ƒå°†å¾®æœåŠ¡çš„æ¦‚å¿µæ‰©å±•åˆ°å‰ç«¯ä¸–ç•Œã€‚åœ¨è¯¥æŠ€æœ¯æ¶æ„ä¸‹ï¼Œæ–°çš„/æ”¹é€ å¥½ä¹‹åçš„å‰ç«¯åº”ç”¨å¯ç”±å¤šä¸ªå­åº”ç”¨æ„æˆï¼Œè¿™äº›å­åº”ç”¨é—´ç‹¬ç«‹å¼€å‘ã€ç‹¬ç«‹éƒ¨ç½²ã€ç‹¬ç«‹è¿è¡Œæ—¶ã€æŠ€æœ¯æ ˆæ— å…³</p>\n<p>å¾®å‰ç«¯æœ‰å¦‚ä¸‹ç‰¹æ€§ï¼š</p>\n<ol>\n<li><p>æŠ€æœ¯æ ˆæ— å…³</p>\n</li>\n<li><p>ç‹¬ç«‹å¼€å‘/éƒ¨ç½²</p>\n</li>\n<li><p>å¢é‡å‡çº§</p>\n</li>\n</ol>\n<p>æ—¢ç„¶å¾®å‰ç«¯è¿™ä¹ˆå¥½ï¼Œä¸ºä»€ä¹ˆç›´åˆ° 16 å¹´æ‰è¢«æå‡ºæ¥å‘¢</p>\n<p>å…¶å®æ—©åœ¨ä¸Šå¤æ—¶ä»£ï¼Œ<code>iframe</code>å°±å¯ç§°ä¸ºå¾®å‰ç«¯ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Œå› ä¸º<code>iframe</code>å¯ä»¥åšåˆ°å®Œç¾éš”ç¦» javascript/css ï¼Œå¹¶ä¸”å¯é€‚ç”¨ url å¿«é€Ÿæ¥å…¥ã€‚é‚£æ—¢ç„¶è¿™ä¹ˆç®€å•ï¼Œä¸ºå•¥æ²¡æœ‰æµè¡Œèµ·æ¥å‘¢ï¼ˆåœ¨å¾®å‰ç«¯é¢†åŸŸï¼‰ï¼Ÿå› ä¸º<code>iframe</code>ç¼ºç‚¹åŒæ ·æ˜æ˜¾ï¼šéš”ç¦»è¿‡äºç®€å•ç²—æš´ï¼Œå¯¼è‡´åº”ç”¨é—´æ•°æ®äº¤äº’å›°éš¾ï¼›æ•´ä¸ªåº”ç”¨å…¨é‡åŠ è½½ï¼Œæ€§èƒ½è¾ƒå·®ï¼›å¼¹çª—ç±»ä¸šåŠ¡æ— æ³•æ­£å¸¸æ–½å±•ã€‚ã€‚ã€‚</p>\n<h2 id=\"ä¸ºä»€ä¹ˆè¦åšå¾®å‰ç«¯\">ä¸ºä»€ä¹ˆè¦åšå¾®å‰ç«¯</h2>\n<p>å¾®å‰ç«¯æ—¢å¯å°†å¤šä¸ªåº”ç”¨/é¡¹ç›®æ•´åˆåˆ°ä¸€èµ·ï¼Œåˆå¯å‡å°å„åº”ç”¨é—´çš„è€¦åˆæ€§ï¼Œæé«˜é¡¹ç›®çš„å¯æ‰©å±•æ€§</p>\n<h2 id=\"å®ç°å¾®å‰ç«¯æœ‰å“ªäº›æ–¹æ¡ˆ\">å®ç°å¾®å‰ç«¯æœ‰å“ªäº›æ–¹æ¡ˆ</h2>\n<p>ä»é›†æˆæ–¹å¼å‡ºå‘å¯ä»¥å¤§è‡´åˆ†ä¸ºæ„å»ºæ—¶é›†æˆã€è¿è¡Œæ—¶é›†æˆ</p>\n<h3 id=\"æ„å»ºæ—¶é›†æˆ\">æ„å»ºæ—¶é›†æˆ</h3>\n<p>æœ€å¸¸è§çš„æ˜¯å°†å­åº”ç”¨ç‹¬ç«‹å¼€å‘ä¸ºä¸€ä¸ªå•ç‹¬çš„å¯å‘å¸ƒçš„ Javascript åŒ…ï¼Œåœ¨ä¸»åº”ç”¨ä¸­å¼•ç”¨å¹¶åŠ è½½ã€‚ä½†æ˜¯ï¼Œè¿™ç§æ–¹æ³•æ„å‘³ç€æˆ‘ä»¬å¿…é¡»é‡æ–°ç¼–è¯‘å¹¶å‘å¸ƒæ¯ä¸ªå¾®å‰ç«¯ï¼Œæ‰èƒ½å‘å¸ƒå¯¹äº§å“ä»»ä½•å•ä¸ªéƒ¨åˆ†çš„æ›´æ”¹</p>\n<h3 id=\"è¿è¡Œæ—¶é›†æˆ\">è¿è¡Œæ—¶é›†æˆ</h3>\n<p>å’Œæ„å»ºæ—¶é›†æˆç›¸åï¼Œåœ¨è¿è¡Œæ—¶åŠ¨æ€åŠ è½½å„åº”ç”¨</p>\n<p>æœ€ç®€å•çš„äº‹é€šè¿‡ nginx æ¥åˆ†å‘</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">&quot;en&quot;</span> <span class=\"hljs-attr\">dir</span>=<span class=\"hljs-string\">&quot;ltr&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">charset</span>=<span class=\"hljs-string\">&quot;utf-8&quot;</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>Feed me<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span>&gt;</span>Feed me<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span>\n    <span class=\"hljs-comment\">&lt;!--# include file=&quot;$PAGE.html&quot; --&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n</code></pre>\n<pre><code class=\"hljs language-sh\">server {\n    listen 8080;\n    server_name localhost;\n\n    root /usr/share/nginx/html;\n    index index.html;\n    ssi on;\n\n    <span class=\"hljs-comment\"># Redirect / to /browse</span>\n    rewrite ^/$ http://localhost:8080/browse redirect;\n\n    <span class=\"hljs-comment\"># Decide which HTML fragment to insert based on the URL</span>\n    location /browse {\n      <span class=\"hljs-built_in\">set</span> <span class=\"hljs-variable\">$PAGE</span> <span class=\"hljs-string\">&#x27;browse&#x27;</span>;\n    }\n    location /order {\n      <span class=\"hljs-built_in\">set</span> <span class=\"hljs-variable\">$PAGE</span> <span class=\"hljs-string\">&#x27;order&#x27;</span>;\n    }\n    location /profile {\n      <span class=\"hljs-built_in\">set</span> <span class=\"hljs-variable\">$PAGE</span> <span class=\"hljs-string\">&#x27;profile&#x27;</span>\n    }\n\n    <span class=\"hljs-comment\"># All locations should render through index.html</span>\n    error_page 404 /index.html;\n}\n</code></pre>\n<p>è¿™ç§æ–¹å¼ä¹Ÿå¯å‹‰å¼ºç§°ä¸º<em>å¾®å‰ç«¯</em>ï¼Œå› ä¸ºæˆ‘ä»¬å°†æ¯ä¸ªä¸šåŠ¡éƒ½æ‹†åˆ†åˆ°ä¸€ä¸ªç‹¬ç«‹çš„åº”ç”¨ä¸­ï¼Œå¯ä»¥äº¤ç”±ç‹¬ç«‹çš„å›¢é˜Ÿç»´æŠ¤ã€‚é™¤äº†è¿™ç§æœåŠ¡ç«¯é›†æˆï¼Œåœ¨å®¢æˆ·ç«¯ä¹Ÿå¯ä»¥é€šè¿‡ä¸€å®šçš„æ‰‹æ®µæ‹†åˆ†-é›†æˆ</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>Feed me!<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span>&gt;</span>Welcome to Feed me!<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span>\n\n    <span class=\"hljs-comment\">&lt;!-- These scripts don&#x27;t render anything immediately --&gt;</span>\n    <span class=\"hljs-comment\">&lt;!-- Instead they attach entry-point functions to `window` --&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://browse.example.com/bundle.js&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://order.example.com/bundle.js&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://profile.example.com/bundle.js&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;micro-frontend-root&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"language-javascript\">\n      <span class=\"hljs-comment\">// These global functions are attached to window by the above scripts</span>\n      <span class=\"hljs-keyword\">const</span> microFrontendsByRoute = {\n        <span class=\"hljs-string\">&quot;/&quot;</span>: <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">renderBrowseRestaurants</span>,\n        <span class=\"hljs-string\">&quot;/order-food&quot;</span>: <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">renderOrderFood</span>,\n        <span class=\"hljs-string\">&quot;/user-profile&quot;</span>: <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">renderUserProfile</span>,\n      };\n      <span class=\"hljs-keyword\">const</span> renderFunction = microFrontendsByRoute[<span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">location</span>.<span class=\"hljs-property\">pathname</span>];\n\n      <span class=\"hljs-comment\">// Having determined the entry-point function, we now call it,</span>\n      <span class=\"hljs-comment\">// giving it the ID of the element where it should render itself</span>\n      <span class=\"hljs-title function_\">renderFunction</span>(<span class=\"hljs-string\">&quot;micro-frontend-root&quot;</span>);\n    </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n</code></pre>\n<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†æ¯ä¸ªåº”ç”¨æ‰“åŒ…æˆä¸€ä¸ª javascript æ–‡ä»¶ï¼Œåœ¨åŒ¹é…åˆ° URL åæ‰§è¡Œå¯¹åº”çš„ä»£ç ï¼Œæ¸²æŸ“é¡µé¢ã€‚</p>\n<p>é™¤äº†ä½¿ç”¨ javascript ï¼Œè¿˜å¯ä½¿ç”¨å¼€ç¯‡æåˆ°çš„ iframe é›†æˆï¼Œä½† iframe ç¼ºç‚¹è¿‡äºæ˜æ˜¾å°±ä¸è®¨è®ºã€‚æ­¤å¤–ï¼Œè¿˜å¯ä½¿ç”¨ web components æ¥å®ç°ï¼Œå…¶ä¹Ÿå±äº javascript å› æ­¤ä¸å¦åˆ—</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>Feed me!<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span>&gt;</span>Welcome to Feed me!<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span>\n\n    <span class=\"hljs-comment\">&lt;!-- These scripts don&#x27;t render anything immediately --&gt;</span>\n    <span class=\"hljs-comment\">&lt;!-- Instead they each define a custom element type --&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://browse.example.com/bundle.js&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://order.example.com/bundle.js&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://profile.example.com/bundle.js&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;micro-frontend-root&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"language-javascript\">\n      <span class=\"hljs-comment\">// These element types are defined by the above scripts</span>\n      <span class=\"hljs-keyword\">const</span> webComponentsByRoute = {\n        <span class=\"hljs-string\">&quot;/&quot;</span>: <span class=\"hljs-string\">&quot;micro-frontend-browse-restaurants&quot;</span>,\n        <span class=\"hljs-string\">&quot;/order-food&quot;</span>: <span class=\"hljs-string\">&quot;micro-frontend-order-food&quot;</span>,\n        <span class=\"hljs-string\">&quot;/user-profile&quot;</span>: <span class=\"hljs-string\">&quot;micro-frontend-user-profile&quot;</span>,\n      };\n      <span class=\"hljs-keyword\">const</span> webComponentType = webComponentsByRoute[<span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">location</span>.<span class=\"hljs-property\">pathname</span>];\n\n      <span class=\"hljs-comment\">// Having determined the right web component custom element type,</span>\n      <span class=\"hljs-comment\">// we now create an instance of it and attach it to the document</span>\n      <span class=\"hljs-keyword\">const</span> root = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&quot;micro-frontend-root&quot;</span>);\n      <span class=\"hljs-keyword\">const</span> webComponent = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createElement</span>(webComponentType);\n      root.<span class=\"hljs-title function_\">appendChild</span>(webComponent);\n    </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n</code></pre>\n<p>é™¤äº†è¿™ä¸¤ç§åˆ†ç±»ï¼Œè¿˜å¯ä»æ‹†åˆ†ç²’åº¦æ¥åˆ†ç±»</p>\n<h3 id=\"åŸºäºè·¯ç”±åˆ†å‘\">åŸºäºè·¯ç”±åˆ†å‘</h3>\n<p>ä¸Šé¢ä»‹ç»çš„åŸºæœ¬éƒ½æ˜¯ä¸€ä¸ªé¡µé¢ä¸€ä¸ªåº”ç”¨ï¼Œé‚£ä¹ˆè¿˜æœ‰æ²¡æœ‰ç²’åº¦æ›´ç»†ä¸€ç‚¹çš„ï¼šæƒ³åœ¨ä¸€ä¸ªé¡µé¢åŠ è½½å¤šä¸ªåº”ç”¨ï¼ŸğŸ¤”</p>\n<h3 id=\"å‰ç«¯å¾®æœåŠ¡åŒ–\">å‰ç«¯å¾®æœåŠ¡åŒ–</h3>\n<p>æ¯ä¸ªå‰ç«¯åº”ç”¨éƒ½æ˜¯ç‹¬ç«‹çš„ã€è‡ªä¸»è¿è¡Œçš„ï¼Œæœ€åé€šè¿‡æ¨¡å—åŒ–çš„æ–¹å¼ç»„åˆå‡ºå®Œæ•´çš„å‰ç«¯åº”ç”¨</p>\n<p>æ¯”å¦‚å€ŸåŠ©ä¸Šé¢çš„ Web Components å®ç°</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>Feed me!<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span>&gt;</span>Welcome to Feed me!<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span>\n\n    <span class=\"hljs-comment\">&lt;!-- These scripts don&#x27;t render anything immediately --&gt;</span>\n    <span class=\"hljs-comment\">&lt;!-- Instead they each define a custom element type --&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://browse.example.com/bundle.js&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://order.example.com/bundle.js&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://profile.example.com/bundle.js&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;micro-frontend-root&quot;</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">micro-frontend-browse-restaurants</span> /&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">micro-frontend-order-food</span> /&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">micro-frontend-user-profile</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n</code></pre>\n<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åŠ è½½çš„ js èµ„æºå¯ä»¥æ˜¯ä»»ä½•å€ŸåŠ©æ¡†æ¶æ„å»ºåç”Ÿæˆçš„ web component ç»„ä»¶æ–‡ä»¶</p>\n<h2 id=\"æ€»ç»“\">æ€»ç»“</h2>\n<p>å¾®å‰ç«¯æ˜¯ä¸€ç§æ¶æ„é£æ ¼ï¼Œå…¶ä¸­ä¼—å¤šç‹¬ç«‹äº¤ä»˜çš„å‰ç«¯åº”ç”¨ç»„åˆæˆä¸€ä¸ªå¤§å‹æ•´ä½“ã€‚</p>\n<p>å¾®å‰ç«¯æŠ€æœ¯æ–¹æ¡ˆå¯åˆ†ä¸ºè¿è¡Œæ—¶é›†æˆ/æ„å»ºæ—¶é›†æˆï¼Œæˆ–è€…æŒ‰ç…§æ‹†åˆ†ç²’åº¦åˆ’åˆ†ä¸ºè·¯ç”±åˆ†å‘å¼å’Œå¾®æœåŠ¡åŒ–</p>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://www.icode9.com/content-4-946879.html\">è¯¦è§£å¾®å‰ç«¯</a></p>\n"},{"title":"React.jså­¦ä¹ -ä½¿ç”¨å†…ç½®hook","tags":["React.jså­¦ä¹ ","hook"],"categories":"React.js","description":"# ä»€ä¹ˆæ˜¯ hook\n\nç»„ä»¶è‡ªèº«èƒ½å¤Ÿé€šè¿‡æŸç§æœºåˆ¶å†è§¦å‘çŠ¶æ€çš„å˜æ›´å¹¶ä¸”å¼•èµ·**re-render**ï¼Œè€Œè¿™ç§â€œæœºåˆ¶â€å°±æ˜¯ Hooksï¼\n\n# useEffect\n\n- é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“ä¹‹åå’Œæ¯æ¬¡æ›´æ–°ä¹‹åéƒ½ä¼šæ‰§è¡Œã€‚React ç¡®ä¿äº†æ¯æ¬¡è¿è¡Œ`effect`çš„åŒæ—¶ï¼ŒDOM éƒ½å·²ç»æ›´æ–°å®Œæ¯•\n\n- æ¯æ¬¡é‡æ–°æ¸²æŸ“ï¼Œéƒ½ä¼šç”Ÿæˆæ–°çš„`effect`ï¼Œæ›¿æ¢æ‰ä¹‹å‰çš„ã€‚æŸç§æ„ä¹‰ä¸Šè®²ï¼Œ`effect`æ›´åƒæ˜¯æ¸²æŸ“","createDate":"2020-09-07 10:48:54","updateDate":"2022-05-11 22:19:50","body":"<h1 id=\"ä»€ä¹ˆæ˜¯-hook\">ä»€ä¹ˆæ˜¯ hook</h1>\n<p>ç»„ä»¶è‡ªèº«èƒ½å¤Ÿé€šè¿‡æŸç§æœºåˆ¶å†è§¦å‘çŠ¶æ€çš„å˜æ›´å¹¶ä¸”å¼•èµ·<strong>re-render</strong>ï¼Œè€Œè¿™ç§â€œæœºåˆ¶â€å°±æ˜¯ Hooksï¼</p>\n<h1 id=\"useeffect\">useEffect</h1>\n<ul>\n<li><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“ä¹‹åå’Œæ¯æ¬¡æ›´æ–°ä¹‹åéƒ½ä¼šæ‰§è¡Œã€‚React ç¡®ä¿äº†æ¯æ¬¡è¿è¡Œ<code>effect</code>çš„åŒæ—¶ï¼ŒDOM éƒ½å·²ç»æ›´æ–°å®Œæ¯•</p>\n</li>\n<li><p>æ¯æ¬¡é‡æ–°æ¸²æŸ“ï¼Œéƒ½ä¼šç”Ÿæˆæ–°çš„<code>effect</code>ï¼Œæ›¿æ¢æ‰ä¹‹å‰çš„ã€‚æŸç§æ„ä¹‰ä¸Šè®²ï¼Œ<code>effect</code>æ›´åƒæ˜¯æ¸²æŸ“ç»“æœçš„ä¸€éƒ¨åˆ† â€”â€” æ¯ä¸ª<code>effect</code> â€œå±äºâ€ä¸€æ¬¡ç‰¹å®šçš„æ¸²æŸ“ã€‚</p>\n</li>\n<li><p>æ¯ä¸ª<code>effect</code>éƒ½å¯ä»¥è¿”å›ä¸€ä¸ªæ¸…é™¤å‡½æ•°ã€‚å¦‚æ­¤å¯ä»¥å°†æ·»åŠ å’Œç§»é™¤è®¢é˜…çš„é€»è¾‘æ”¾åœ¨ä¸€èµ·ã€‚ä»–ä»¬éƒ½å±äº<code>effect</code>çš„ä¸€éƒ¨åˆ†</p>\n</li>\n</ul>\n<h1 id=\"è‡ªå®šä¹‰-hook-çš„-state-æ˜¯å¦å…±äº«\">è‡ªå®šä¹‰ hook çš„ state æ˜¯å¦å…±äº«</h1>\n<p>åœ¨ä¸¤ä¸ªç»„ä»¶ä¸­ä½¿ç”¨ç›¸åŒçš„<code>hook</code>ä¸ä¼šå…±äº«<code>state</code>ï¼Œè‡ªå®šä¹‰<code>hook</code>æ˜¯ä¸€ç§é‡ç”¨çŠ¶æ€é€»è¾‘çš„æœºåˆ¶ï¼Œæ‰€ä»¥æ¯æ¬¡ä½¿ç”¨è‡ªå®šä¹‰<code>hook</code>æ—¶å…¶ä¸­çš„æ‰€æœ‰<code>state</code>å’Œå‰¯ä½œç”¨æ˜¯å®Œå…¨éš”ç¦»çš„</p>\n<h1 id=\"hook-åŸç†\">hook åŸç†</h1>\n<p>åˆæ¬¡æ¸²æŸ“çš„æ—¶å€™ï¼ŒæŒ‰ç…§ useStateï¼ŒuseEffect ç­‰ hook çš„é¡ºåºï¼ŒæŠŠ stateï¼Œdeps ç­‰æŒ‰é¡ºåºå¡åˆ° memoizedState æ•°ç»„ä¸­ã€‚</p>\n<p>æ›´æ–°çš„æ—¶å€™ï¼ŒæŒ‰ç…§é¡ºåºï¼Œä» memoizedState ä¸­æŠŠä¸Šæ¬¡è®°å½•çš„å€¼æ‹¿å‡ºæ¥ã€‚</p>\n<h1 id=\"state-å’Œ-usestate-çš„å¯¹åº”å…³ç³»\">state å’Œ useState çš„å¯¹åº”å…³ç³»</h1>\n<p><code>React</code>é <code>hook</code>çš„è°ƒç”¨é¡ºåºæ¥çŸ¥é“<code>state</code>å’Œ<code>useState</code>çš„å¯¹åº”å…³ç³»ï¼Œæ‰€ä»¥ä¸èƒ½åœ¨æ¡ä»¶/å¾ªç¯ä¸­è°ƒç”¨<code>hook</code></p>\n<h1 id=\"useeffect-çš„æ‰§è¡Œæ—¶æœº\">useEffect çš„æ‰§è¡Œæ—¶æœº</h1>\n<p><code>useEffect</code>ä¼šåœ¨æµè§ˆå™¨ç»˜åˆ¶åå»¶è¿Ÿæ‰§è¡Œï¼Œä½†ä¼šä¿è¯åœ¨ä»»ä½•æ–°çš„æ¸²æŸ“å‰æ‰§è¡Œ</p>\n<h1 id=\"usecallback-å’Œ-usememo\">useCallback å’Œ useMemo</h1>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-title function_\">useCallback</span>(fn, deps) == <span class=\"hljs-title function_\">useMemo</span>(<span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-title function_\">fn</span>(), deps);\n</code></pre>\n<h1 id=\"ä½¿ç”¨è¿‡å¤š-hook-åæ€§èƒ½é—®é¢˜\">ä½¿ç”¨è¿‡å¤š hook åæ€§èƒ½é—®é¢˜</h1>\n<p>hook ä¸ä¼šå› ä¸ºåœ¨æ¸²æŸ“æ—¶åˆ›å»ºå‡½æ•°è€Œå˜æ…¢ï¼Œåœ¨ç°ä»£æµè§ˆå™¨ä¸­é—­åŒ…å’Œç±»çš„åŸå§‹æ€§èƒ½åªæœ‰åœ¨æç«¯åœºæ™¯ä¸‹æ‰ä¼šæœ‰æ˜æ˜¾çš„å·®åˆ«</p>\n<h1 id=\"usestate-æƒ°æ€§æ±‚å€¼\">useState æƒ°æ€§æ±‚å€¼</h1>\n<p>å¦‚æœåˆå§‹åŒ–<code>state</code>éœ€è¦é€šè¿‡å¤æ‚è®¡ç®—è·å¾—ï¼Œé‚£ä¹ˆå¯ä»¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨å‡½æ•°ä¸­è®¡ç®—å¹¶è¿”å›åˆå§‹çš„<code>state</code>ï¼Œæ­¤å‡½æ•°åªåœ¨åˆå§‹æ¸²æŸ“æ—¶è¢«è°ƒç”¨</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> [count, setCount] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-title function_\">calState</span>());\n</code></pre>\n<h1 id=\"hook-ä½¿ç”¨å¿…é¡»è¦éµå¾ªçš„è§„åˆ™\">hook ä½¿ç”¨å¿…é¡»è¦éµå¾ªçš„è§„åˆ™</h1>\n<p>åœ¨å‡½æ•°å€¼ç»„ä»¶ä¸»ä½“å†…ï¼ˆæŒ‡ React æ¸²æŸ“é˜¶æ®µï¼‰æ”¹å˜<code>DOM</code>ã€æ·»åŠ è®¢é˜…ã€è®¾ç½®å®šæ—¶å™¨ã€è®°å½•æ—¥å¿—ä»¥åŠæ‰§è¡Œå…¶ä»–åŒ…å«å‰¯ä½œç”¨çš„æ“ä½œéƒ½æ˜¯ä¸è¢«å…è®¸çš„ï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šäº§ç”Ÿè«åå…¶å¦™çš„ bug å¹¶ç ´å UI çš„ä¸€è‡´æ€§ã€‚ä½¿ç”¨<code>useEffect</code>å®Œæˆå‰¯ä½œç”¨æ“ä½œèµ‹å€¼ç»™<code>useEffect</code>çš„å‡½æ•°ä¼šåœ¨ç»„ä»¶æ¸²æŸ“åˆ°å±å¹•åæ‰§è¡Œã€‚</p>\n<h1 id=\"useref\">useRef</h1>\n<p>é€šè¿‡<code>useRef</code>æ¥æ‹¥æœ‰ä¸€ä¸ªåœ¨<strong>æ‰€æœ‰å¸§</strong>ä¸­<strong>å…±äº«</strong>çš„å˜é‡</p>\n<h1 id=\"usereducer\">useReducer</h1>\n<ul>\n<li><p>state é€»è¾‘è¾ƒå¤æ‚ä¸”åŒ…å«å¤šä¸ªå­å€¼</p>\n</li>\n<li><p>ä¸‹ä¸€ä¸ª state ä¾èµ–äºä¹‹å‰çš„ state</p>\n</li>\n</ul>\n<h1 id=\"useimperativehandle\">useImperativeHandle</h1>\n<p>ç®€å•æ¥è®²: useImperativeHandle èµ‹äºˆå‡½æ•°å¼ç»„ä»¶ä½¿ç”¨ ref çš„ç‰¹æƒ, é€šå¸¸å’Œ forwardRef æˆå¯¹å‡ºç°,</p>\n<p>ä½¿ç”¨æ–¹å¼:</p>\n<pre><code class=\"hljs language-jsx\"><span class=\"hljs-keyword\">const</span> { useImperativeHandle, forwardRef, useRef } = <span class=\"hljs-title class_\">React</span>;\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title class_\">Modal</span> = <span class=\"hljs-title function_\">forwardRef</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">props, ref</span>) =&gt;</span> {\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">open</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;open&quot;</span>);\n  };\n  <span class=\"hljs-title function_\">useImperativeHandle</span>(ref, <span class=\"hljs-function\">() =&gt;</span> ({\n    open,\n  }));\n\n  <span class=\"hljs-keyword\">return</span> <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span>&gt;</span>modal<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span></span>;\n});\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">App</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-keyword\">const</span> modalRef = <span class=\"hljs-title function_\">useRef</span>(<span class=\"hljs-literal\">null</span>);\n\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Modal</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">{modalRef}</span> /&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{()</span> =&gt;</span> modalRef.current.open()}&gt;click me<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n  );\n};\n\n<span class=\"hljs-keyword\">const</span> root = <span class=\"hljs-title class_\">ReactDOM</span>.<span class=\"hljs-title function_\">createRoot</span>(<span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#app&quot;</span>));\nroot.<span class=\"hljs-title function_\">render</span>(<span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">App</span> /&gt;</span></span>);\n</code></pre>\n"},{"title":"React.js-useEffect vs useLayoutEffect","tags":["React.js","useEffect","useLayoutEffect"],"categories":"React.js","description":"å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¸éœ€è¦æ˜ç¡®åŒºåˆ† `useEffect` å’Œ `useLayoutEffect`\n\nï¼ˆè‡³å°‘æˆ‘è¿˜æ²¡é‡åˆ°è¿‡ ğŸ˜‚ï¼Œä¸è¿‡æœ‰å¿…è¦äº†è§£ä¸€ä¸‹ï¼Œæ²¡å‡†å“ªå¤©å°±é‡åˆ°äº†ï¼‰\n\nä¸¤è€…å”¯ä¸€çš„åŒºåˆ«åœ¨äºæ‰§è¡Œæ—¶æœºçš„ä¸åŒ\n\n## useEffect\n\nä¸€èˆ¬çœ‹æ¥ï¼Œå¯¹äº `useEffect` ï¼Œä¸ºäº†é˜²æ­¢æµè§ˆå™¨æ¸²æŸ“å¡é¡¿ï¼Œå…¶å›è°ƒå‡½æ•°ä¼šåœ¨æµè§ˆå™¨ `paint` ä¹‹åæ‰§è¡Œï¼Œè¿™çœ‹èµ·æ¥å¾ˆæ­£å¸¸ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªæ­£å¸¸çš„ç»„ä»¶æ¸²æŸ“æµç¨‹ï¼š\n\n1. åš","createDate":"2022-05-10 21:49:31","updateDate":"2022-05-10 22:49:31","body":"<p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¸éœ€è¦æ˜ç¡®åŒºåˆ† <code>useEffect</code> å’Œ <code>useLayoutEffect</code></p>\n<p>ï¼ˆè‡³å°‘æˆ‘è¿˜æ²¡é‡åˆ°è¿‡ ğŸ˜‚ï¼Œä¸è¿‡æœ‰å¿…è¦äº†è§£ä¸€ä¸‹ï¼Œæ²¡å‡†å“ªå¤©å°±é‡åˆ°äº†ï¼‰</p>\n<p>ä¸¤è€…å”¯ä¸€çš„åŒºåˆ«åœ¨äºæ‰§è¡Œæ—¶æœºçš„ä¸åŒ</p>\n<h2 id=\"useeffect\">useEffect</h2>\n<p>ä¸€èˆ¬çœ‹æ¥ï¼Œå¯¹äº <code>useEffect</code> ï¼Œä¸ºäº†é˜²æ­¢æµè§ˆå™¨æ¸²æŸ“å¡é¡¿ï¼Œå…¶å›è°ƒå‡½æ•°ä¼šåœ¨æµè§ˆå™¨ <code>paint</code> ä¹‹åæ‰§è¡Œï¼Œè¿™çœ‹èµ·æ¥å¾ˆæ­£å¸¸ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªæ­£å¸¸çš„ç»„ä»¶æ¸²æŸ“æµç¨‹ï¼š</p>\n<ol>\n<li><p>åšä¸€äº›å‡†å¤‡å·¥ä½œï¼ˆæ¸²æŸ“ <code>VDOM</code> ã€è°ƒåº¦ <code>effects</code> ç­‰ï¼‰</p>\n</li>\n<li><p>React å°†æ§åˆ¶æƒäº¤ç”±æµè§ˆå™¨ä»¥ <code>paint</code></p>\n</li>\n<li><p>æ‰§è¡Œ <code>useEffect</code> å›è°ƒ</p>\n</li>\n</ol>\n<p>ç¡®å®ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹æ˜¯è¿™æ ·ï¼Œåªä¸è¿‡å‡¡äº‹éƒ½æœ‰ä¾‹å¤–ï¼Œä¸”çœ‹å®˜ç½‘çš„æè¿°:</p>\n<blockquote>\n<p>è™½ç„¶ <code>useEffect</code> ä¼šåœ¨æµè§ˆå™¨ç»˜åˆ¶åå»¶è¿Ÿæ‰§è¡Œï¼Œä½†ä¼šä¿è¯åœ¨ä»»ä½•æ–°çš„æ¸²æŸ“å‰æ‰§è¡Œã€‚åœ¨å¼€å§‹æ–°çš„æ›´æ–°å‰ï¼ŒReact æ€»ä¼šå…ˆæ¸…é™¤ä¸Šä¸€è½®æ¸²æŸ“çš„ <code>effect</code> ã€‚</p>\n</blockquote>\n<p>å®˜ç½‘çš„ä»‹ç»<strong>ä¼šä¿è¯åœ¨ä»»ä½•æ–°çš„æ¸²æŸ“å‰æ‰§è¡Œ</strong>ï¼Œå¹¶æ²¡æœ‰è¯´ä¸€å®šä¼šåœ¨æµè§ˆå™¨ <code>paint</code> ä¹‹åæ‰§è¡Œï¼Œå› æ­¤æ˜¯ä¸æ˜¯æœ‰ä¸€äº›åœºæ™¯ <code>effect</code> ä¼šåœ¨ <code>paint</code> ä¹‹å‰æ‰§è¡Œï¼ŸğŸ¤”</p>\n<p>å¦‚æœåœ¨ <code>useEffect</code> çš„å›è°ƒè§¦å‘ä¹‹å‰ï¼ŒReact ç»„ä»¶åˆè¿›è¡Œäº†ä¸€æ¬¡çŠ¶æ€æ›´æ–°ï¼ŒReact ä¼šå…ˆå°†ä¹‹å‰çš„ Passive Effect éƒ½å¤„ç†æ‰ã€‚ä¾‹å¦‚åœ¨ <code>useLayoutEffect</code> ä¸­æ›´æ–°çŠ¶æ€ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>useEffect</code>çš„å›è°ƒ ä¼šåœ¨ paint ä¹‹å‰æ‰§è¡Œ</p>\n<p><img src=\"https://blog.thoughtspile.tech/images/forced-le-flush-chart-5dc51705d5854315a6fa5e0be1464f7d.png\" alt=\"useLayoutEffect-useEffect\"></p>\n<h2 id=\"uselayouteffect\">useLayoutEffect</h2>\n<p>å’Œ <code>useEffect</code> çš„å”¯ä¸€åŒºåˆ«åœ¨äº<strong>æ‰§è¡Œæ—¶æœºä¸åŒ</strong>ï¼Œ <code>useLayoutEffect</code> ä¸€å®šä¼šä¿è¯å›è°ƒå‡½æ•°ä¼šåœ¨ paint ä¹‹å‰æ‰§è¡Œï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªæ­£å¸¸çš„ç»„ä»¶æ¸²æŸ“æµç¨‹ï¼š</p>\n<ol>\n<li><p>åšä¸€äº›å‡†å¤‡å·¥ä½œï¼ˆæ¸²æŸ“ <code>VDOM</code> ã€è°ƒåº¦ <code>effects</code> ç­‰ï¼‰</p>\n</li>\n<li><p>æ‰§è¡Œ <code>useLayoutEffect</code> å›è°ƒ</p>\n</li>\n<li><p>React å°†æ§åˆ¶æƒäº¤ç”±æµè§ˆå™¨ä»¥ <code>paint</code></p>\n</li>\n<li><p>æ‰§è¡Œ <code>useEffect</code> å›è°ƒ</p>\n</li>\n</ol>\n<p>è¿™ä¸ªåŒºåˆ«çš„ä½“ç°åœºæ™¯åœ¨äºä½¿ç”¨ useEffect æ›´æ–°æ•°æ®æ—¶ï¼Œç•Œé¢ä¼šé—ªçƒä¸€ä¸‹</p>\n<pre><code class=\"hljs language-tsx\"><span class=\"hljs-keyword\">const</span> { useState, useEffect, useLayoutEffect } = <span class=\"hljs-title class_\">React</span>;\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">App</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-keyword\">const</span> [value, setValue] = <span class=\"hljs-title function_\">useState</span>(-<span class=\"hljs-number\">1</span>);\n\n  <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>;\n    <span class=\"hljs-keyword\">while</span> (i &lt;= <span class=\"hljs-number\">900000000</span>) {\n      i++;\n    }\n    <span class=\"hljs-keyword\">if</span> (value === <span class=\"hljs-number\">0</span>) {\n      <span class=\"hljs-keyword\">const</span> tmp = <span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">random</span>() * <span class=\"hljs-number\">100</span>;\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;setValue&quot;</span>, tmp);\n      <span class=\"hljs-title function_\">setValue</span>(<span class=\"hljs-function\">() =&gt;</span> tmp);\n    }\n  }, [value]);\n\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;render&quot;</span>, value, <span class=\"hljs-title class_\">Date</span>.<span class=\"hljs-title function_\">now</span>());\n\n  <span class=\"hljs-keyword\">return</span> <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{()</span> =&gt;</span> setValue(0)}&gt;{value}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>;\n};\n</code></pre>\n<p>å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªæ˜æ˜¾çš„é—ªçƒ</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/useEffect-%20blink.gif\" alt=\"useEffect-blink\"></p>\n<p>æ”¹ç”¨ <code>useLayoutEffect</code> åå°±ä¸ä¼šå‡ºç°è¿™ç§æƒ…å†µäº†</p>\n"},{"title":"JavaScript-å¼‚æ­¥å¹¶å‘","tags":["å¼‚æ­¥","å¹¶å‘","é˜Ÿåˆ—","Promise.all"],"categories":"JavaScript","description":"æ¥æºäºä¸€é“é¢è¯•é¢˜\n\n_è¯·å®ç°å¦‚ä¸‹çš„å‡½æ•°ï¼šå¯ä»¥æ‰¹é‡è¯·æ±‚æ•°æ®ï¼Œæ‰€æœ‰çš„ URL åœ°å€åœ¨ urls å‚æ•°ä¸­ï¼ŒåŒæ—¶å¯ä»¥é€šè¿‡ max å‚æ•°æ§åˆ¶è¯·æ±‚çš„å¹¶å‘åº¦ï¼Œå½“æ‰€æœ‰è¯·æ±‚ç»“æŸåï¼Œéœ€è¦æ‰§è¡Œ callback å›è°ƒå‡½æ•°ã€‚å‘é€è¯·æ±‚çš„å‡½æ•°ç›´æ¥ä½¿ç”¨ fetch å³å¯_\n\nåˆ’å‡ºé‡ç‚¹ï¼šè¯·æ±‚æ•°æ®ã€æ§åˆ¶è¯·æ±‚çš„å¹¶å‘åº¦\n\n## Promise.all\n\nç¬¬ä¸€çœ¼æƒ³åˆ° `Promise.all` å®ç°ï¼Œäºæ˜¯å¼€å†™ï¼Œä½†å†™ç€å†™ç€å‘ç°ä¸å¯¹åŠ²ï¼Œè¿™","createDate":"2022-05-08 21:58:54","updateDate":"2022-05-08 22:39:51","body":"<p>æ¥æºäºä¸€é“é¢è¯•é¢˜</p>\n<p><em>è¯·å®ç°å¦‚ä¸‹çš„å‡½æ•°ï¼šå¯ä»¥æ‰¹é‡è¯·æ±‚æ•°æ®ï¼Œæ‰€æœ‰çš„ URL åœ°å€åœ¨ urls å‚æ•°ä¸­ï¼ŒåŒæ—¶å¯ä»¥é€šè¿‡ max å‚æ•°æ§åˆ¶è¯·æ±‚çš„å¹¶å‘åº¦ï¼Œå½“æ‰€æœ‰è¯·æ±‚ç»“æŸåï¼Œéœ€è¦æ‰§è¡Œ callback å›è°ƒå‡½æ•°ã€‚å‘é€è¯·æ±‚çš„å‡½æ•°ç›´æ¥ä½¿ç”¨ fetch å³å¯</em></p>\n<p>åˆ’å‡ºé‡ç‚¹ï¼šè¯·æ±‚æ•°æ®ã€æ§åˆ¶è¯·æ±‚çš„å¹¶å‘åº¦</p>\n<h2 id=\"promiseall\">Promise.all</h2>\n<p>ç¬¬ä¸€çœ¼æƒ³åˆ° <code>Promise.all</code> å®ç°ï¼Œäºæ˜¯å¼€å†™ï¼Œä½†å†™ç€å†™ç€å‘ç°ä¸å¯¹åŠ²ï¼Œè¿™æ ·è²Œä¼¼ä¸ç®—å¹¶å‘ï¼Œæˆ–è€…è¯´æ²¡æœ‰è¾¾åˆ°è¦æ±‚çš„å¹¶å‘åº¦æ§åˆ¶: <code>Promise.all</code>åªèƒ½åœ¨å½“å‰æ‰€æœ‰<code>promises</code>è¯·æ±‚å®Œæ¯•åæ‰èƒ½å¼€å¯ä¸‹ä¸€æ¬¡è¯·æ±‚ï¼Œè¿™æ ·å¹¶ä¸èƒ½åƒæ»¡ <code>max</code> å¹¶å‘åº¦ï¼Œéœ€è¦å˜æ¢ç­–ç•¥</p>\n<h2 id=\"é—­åŒ…--å¾ªç¯--é€’å½’\">é—­åŒ… + å¾ªç¯ + é€’å½’</h2>\n<p>å¯ä»¥ä½¿ç”¨é—­åŒ…+å¾ªç¯+é€’å½’æ¥è§£å†³ï¼šå¾ªç¯æ§åˆ¶å¹¶å‘åº¦ï¼Œé€’å½’æ¥å‘é€æ‰€æœ‰è¯·æ±‚</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">request</span> = (<span class=\"hljs-params\">...args</span>) =&gt; <span class=\"hljs-title function_\">fetch</span>(...args).<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">res</span>) =&gt;</span> res.<span class=\"hljs-title function_\">json</span>());\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">minIn2</span> = (<span class=\"hljs-params\">a, b</span>) =&gt; (a &gt; b ? b : a);\n\n<span class=\"hljs-keyword\">const</span> macAddresses = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Array</span>(<span class=\"hljs-number\">10</span>)\n  .<span class=\"hljs-title function_\">fill</span>(<span class=\"hljs-string\">&quot;&quot;</span>)\n  .<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">_, index</span>) =&gt;</span> <span class=\"hljs-string\">`http://localhost:8080/<span class=\"hljs-subst\">${index}</span>`</span>);\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">sendRequest</span>(<span class=\"hljs-params\">urls, max, callback</span>) {\n  <span class=\"hljs-keyword\">const</span> res = [];\n  <span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>;\n\n  <span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">doRequest</span>(<span class=\"hljs-params\">url</span>) {\n    <span class=\"hljs-keyword\">try</span> {\n      <span class=\"hljs-keyword\">const</span> r = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">request</span>(url);\n      res.<span class=\"hljs-title function_\">push</span>(r);\n    } <span class=\"hljs-keyword\">catch</span> (e) {\n      res.<span class=\"hljs-title function_\">push</span>(e);\n    } <span class=\"hljs-keyword\">finally</span> {\n      <span class=\"hljs-keyword\">if</span> (res.<span class=\"hljs-property\">length</span> === urls.<span class=\"hljs-property\">length</span>) {\n        <span class=\"hljs-title function_\">callback</span>(res);\n      }\n      <span class=\"hljs-keyword\">if</span> (i === urls.<span class=\"hljs-property\">length</span>) {\n        <span class=\"hljs-keyword\">return</span>;\n      }\n      <span class=\"hljs-title function_\">doRequest</span>(urls[i++]);\n    }\n  }\n\n  <span class=\"hljs-keyword\">for</span> (; i &lt; <span class=\"hljs-title function_\">minIn2</span>(max, urls.<span class=\"hljs-property\">length</span>); i += <span class=\"hljs-number\">1</span>) {\n    <span class=\"hljs-title function_\">doRequest</span>(urls[i]);\n  }\n}\n\n<span class=\"hljs-title function_\">sendRequest</span>(macAddresses, <span class=\"hljs-number\">3</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">res</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(res);\n});\n</code></pre>\n<p>è¿™é‡Œé¢æœ‰ä¸ªå…³é”®çš„å˜é‡<code>i</code>ï¼Œè¯¥å˜é‡ç»´æŠ¤äº†å½“å‰å®Œæˆåˆ°å“ªä¸ªè¯·æ±‚</p>\n<p>è¿™ä¸ªå›ç­”åœ¨é¢è¯•æ—¶åº”è¯¥å¯ä»¥åº”ä»˜ç¬¬ä¸€æ³¢æ”»åŠ¿ï¼Œä½†å¦‚æœå¯¹æ–¹è¿›ä¸€æ­¥å‘é—®ï¼Œå¦‚æœæˆ‘çš„ urls ä¸æ˜¯é¢„å…ˆåˆ¶å®šå¥½çš„ï¼Œæˆ‘å¯ä»¥é€šè¿‡è°ƒç”¨å¤šæ¬¡ <code>sendRequest</code> æ¥å‘é€è¯·æ±‚ï¼Œé‚£è¿™åº”è¯¥æ€ä¹ˆå®ç°å‘¢</p>\n<h2 id=\"é˜Ÿåˆ—\">é˜Ÿåˆ—</h2>\n<p>é’ˆå¯¹äºè¿›ä¸€æ­¥å‘é—®ï¼Œè¿™æ—¶å€™å°±æ²¡æœ‰é‚£ä¹ˆç®€å•äº†ï¼Œå› ä¸ºæˆ‘ä»¬åŒæ—¶è¿˜è¦ç»´æŠ¤æ‰€æœ‰urlsï¼Œè¿™æ ·çš„è¯æˆ‘ä»¬å¯ä»¥å¼•å…¥é˜Ÿåˆ—æ¥è§£å†³ï¼Œå³ï¼šç›¸è¾ƒäºä¸Šé¢çš„<code>i</code>ï¼Œè¿™é‡Œä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—æ¥ç»´æŠ¤å½“å‰å®Œæˆåˆ°å“ªä¸ªè¯·æ±‚</p>\n<ol>\n<li><p>ä½¿ç”¨ä¸€ä¸ª<code>queue</code>æ¥ä¿å­˜æ‰€æœ‰çš„è¯·æ±‚</p>\n</li>\n<li><p>å…¥é˜Ÿåç«‹å³å‡ºé˜Ÿ</p>\n</li>\n<li><p>åœ¨å‡ºé˜Ÿè¿‡ç¨‹ä¸­å…ˆåˆ¤æ–­æœ‰æ²¡æœ‰è¾¾åˆ°æœ€å¤§å¹¶å‘åº¦ï¼Œå¦‚æœæœ‰ç›´æ¥é€€å‡ºå‡ºé˜Ÿé€»è¾‘ï¼Œè‹¥æ²¡æœ‰ï¼Œåˆ™æ‰§è¡Œå½“å‰èŠ‚ç‚¹ï¼Œå®Œæ¯•åç»§ç»­å‡ºé˜Ÿå³é‡å¤å½“å‰é€»è¾‘</p>\n</li>\n</ol>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Queue</span> {\n  <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\">{ concurrency = <span class=\"hljs-number\">1</span>, onCompleted } = {}</span>) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">queue</span> = [];\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">pendingPromises</span> = [];\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">concurrency</span> = concurrency;\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">onCompleted</span> = onCompleted;\n  }\n\n  <span class=\"hljs-title function_\">enqueue</span>(<span class=\"hljs-params\">promise</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve, reject</span>) =&gt;</span> {\n      <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">queue</span>.<span class=\"hljs-title function_\">push</span>({\n        promise,\n        resolve,\n        reject,\n      });\n      <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">dequeue</span>();\n    });\n  }\n\n  <span class=\"hljs-title function_\">dequeue</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">pendingPromises</span>.<span class=\"hljs-property\">length</span> === <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">concurrency</span>) {\n      <span class=\"hljs-keyword\">return</span>;\n    }\n\n    <span class=\"hljs-keyword\">const</span> item = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">queue</span>.<span class=\"hljs-title function_\">shift</span>();\n    <span class=\"hljs-keyword\">if</span> (!item) {\n      <span class=\"hljs-keyword\">return</span>;\n    }\n\n    <span class=\"hljs-keyword\">try</span> {\n      <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">pendingPromises</span>.<span class=\"hljs-title function_\">push</span>(item.<span class=\"hljs-property\">promise</span>);\n      item\n        .<span class=\"hljs-title function_\">promise</span>()\n        .<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">value</span>) =&gt;</span> {\n          <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">pendingPromises</span>.<span class=\"hljs-title function_\">shift</span>();\n          item.<span class=\"hljs-title function_\">resolve</span>(value);\n          <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">dequeue</span>();\n        })\n        .<span class=\"hljs-title function_\">catch</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">e</span>) =&gt;</span> {\n          <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">pendingPromises</span>.<span class=\"hljs-title function_\">shift</span>();\n          item.<span class=\"hljs-title function_\">reject</span>(e);\n          <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">dequeue</span>();\n        });\n    } <span class=\"hljs-keyword\">catch</span> (e) {\n      <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">pendingPromises</span>.<span class=\"hljs-title function_\">shift</span>();\n      item.<span class=\"hljs-title function_\">reject</span>(e);\n      <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">dequeue</span>();\n    }\n  }\n}\n</code></pre>\n<p>è¯¥é˜Ÿåˆ—æ¯ä¸ªèŠ‚ç‚¹ä¸ºä¸€ä¸ªè¿”å› Promise çš„å‡½æ•°ï¼Œå› æ­¤ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ä¸€ä¸‹</p>\n<p>ä½¿ç”¨çš„è¯å¯ä»¥è¿™æ ·ï¼š</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">request</span> = (<span class=\"hljs-params\">...args</span>) =&gt; <span class=\"hljs-title function_\">fetch</span>(...args).<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">res</span>) =&gt;</span> res.<span class=\"hljs-title function_\">json</span>());\n\n<span class=\"hljs-keyword\">const</span> macAddresses = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Array</span>(<span class=\"hljs-number\">10</span>)\n  .<span class=\"hljs-title function_\">fill</span>(<span class=\"hljs-string\">&quot;&quot;</span>)\n  .<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">_, index</span>) =&gt;</span> <span class=\"hljs-string\">`http://localhost:8080/<span class=\"hljs-subst\">${index}</span>`</span>);\n\n<span class=\"hljs-keyword\">const</span> queue = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Queue</span>({\n  <span class=\"hljs-attr\">concurrency</span>: <span class=\"hljs-number\">3</span>,\n  <span class=\"hljs-attr\">onCompleted</span>: <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;completed&quot;</span>);\n  },\n});\n\nmacAddresses.<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">address</span>) =&gt;</span> {\n  queue.<span class=\"hljs-title function_\">enqueue</span>(<span class=\"hljs-keyword\">async</span> () =&gt; {\n    <span class=\"hljs-keyword\">const</span> res = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">request</span>(address);\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(address, res);\n  });\n});\n</code></pre>\n<h2 id=\"p-queue\">p-queue</h2>\n<p>ä¸Šé¢å®ç°çš„ Queue è¿˜ä¸å¤Ÿå®Œå–„ï¼Œnpm ä¸Šæœ‰ä¸ªéå¸¸å®Œå–„çš„åº“<a href=\"https://www.npmjs.com/package/p-queue\">p-queue</a></p>\n"},{"title":"Web Component-Lit-2","tags":["å¾®å‰ç«¯","WebComponent","Lit"],"categories":"å¾®å‰ç«¯","description":"åœ¨æ˜¨å¤©ï¼Œæˆ‘ä»¬ä½¿ç”¨ Lit é‡æ„äº†`Reply`ç»„ä»¶\n\nåŠŸèƒ½æ˜¯å®Œæˆäº†ï¼Œä¸è¿‡æœ€åæ€»ç»“çš„æ—¶å€™æœ‰äº›è®¸åæ§½ï¼Œäº‹åæƒ³èµ·æ¥è²Œä¼¼æ˜¯è‡ªå·±ä½¿ç”¨å§¿åŠ¿ä¸å¯¹ ğŸ¤” ï¼Œå› æ­¤ä»Šå¤©åŸºäº typescript + webpack + Lit æ¥é‡æ–°å¼€å‘ï¼Œæœç„¶ä½“éªŒä¸€ä¸‹å°±ä¸Šå»äº†ï¼š\n\n1. typescriptã€‚æœ‰äº† typescript çš„åŠ æŒï¼Œå°‘å†™äº†ä¸å°‘æ¨¡ç‰ˆä»£ç \n\n2. VS Code æ’ä»¶ã€‚æˆ‘ä»¬åœ¨ä¸Šä¸€ç¯‡å¤„ç†ä¸­åæ§½æ²¡æœ‰è¯­æ³•æç¤ºï¼Œä»Š","createDate":"2022-04-27 22:25:56","updateDate":"2022-05-07 22:54:37","body":"<p>åœ¨æ˜¨å¤©ï¼Œæˆ‘ä»¬ä½¿ç”¨ Lit é‡æ„äº†<code>Reply</code>ç»„ä»¶</p>\n<p>åŠŸèƒ½æ˜¯å®Œæˆäº†ï¼Œä¸è¿‡æœ€åæ€»ç»“çš„æ—¶å€™æœ‰äº›è®¸åæ§½ï¼Œäº‹åæƒ³èµ·æ¥è²Œä¼¼æ˜¯è‡ªå·±ä½¿ç”¨å§¿åŠ¿ä¸å¯¹ ğŸ¤” ï¼Œå› æ­¤ä»Šå¤©åŸºäº typescript + webpack + Lit æ¥é‡æ–°å¼€å‘ï¼Œæœç„¶ä½“éªŒä¸€ä¸‹å°±ä¸Šå»äº†ï¼š</p>\n<ol>\n<li><p>typescriptã€‚æœ‰äº† typescript çš„åŠ æŒï¼Œå°‘å†™äº†ä¸å°‘æ¨¡ç‰ˆä»£ç </p>\n</li>\n<li><p>VS Code æ’ä»¶ã€‚æˆ‘ä»¬åœ¨ä¸Šä¸€ç¯‡å¤„ç†ä¸­åæ§½æ²¡æœ‰è¯­æ³•æç¤ºï¼Œä»Šå¤©å‘ç° VS Code æœ‰ä¸€ä¸ªæ’ä»¶å¯ä»¥åšåˆ°è¯¥åŠŸèƒ½ï¼Œå—¯ï¼Œä½“éªŒåˆé«˜äº†ä¸€çº§</p>\n</li>\n</ol>\n<p>æ¥ä¸‹æ¥å°±å¼€å§‹ä»‹ç»æˆ‘çš„æ¢ç´¢ä¹‹æ—…</p>\n<h2 id=\"é…ç½®å¼€å‘ç¯å¢ƒ\">é…ç½®å¼€å‘ç¯å¢ƒ</h2>\n<p>ä¸»è¦æ˜¯å®‰è£… package + é…ç½® webpack + å®‰è£…æ’ä»¶</p>\n<ol>\n<li>å®‰è£…å¿…è¦çš„ package</li>\n</ol>\n<pre><code class=\"hljs language-json\"><span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">&quot;dependencies&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;lit&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;^2.2.2&quot;</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;typescript&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;^4.6.3&quot;</span>\n  <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">&quot;devDependencies&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;html-webpack-plugin&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;^5.5.0&quot;</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;ts-loader&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;^9.2.9&quot;</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;webpack&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;^5.72.0&quot;</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;webpack-cli&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;^4.9.2&quot;</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;webpack-dev-server&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;^4.8.1&quot;</span>\n  <span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n<ol start=\"2\">\n<li>é…ç½® webpack</li>\n</ol>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title class_\">HtmlWebpackPlugin</span> = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;html-webpack-plugin&quot;</span>);\n\n<span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {\n  <span class=\"hljs-attr\">mode</span>: <span class=\"hljs-string\">&quot;development&quot;</span>,\n  <span class=\"hljs-attr\">entry</span>: <span class=\"hljs-string\">&quot;./src/index.ts&quot;</span>,\n  <span class=\"hljs-attr\">module</span>: {\n    <span class=\"hljs-attr\">rules</span>: [\n      {\n        <span class=\"hljs-attr\">test</span>: <span class=\"hljs-regexp\">/\\.ts$/</span>,\n        <span class=\"hljs-attr\">use</span>: [<span class=\"hljs-string\">&quot;ts-loader&quot;</span>],\n      },\n    ],\n  },\n  <span class=\"hljs-attr\">devtool</span>: <span class=\"hljs-string\">&quot;source-map&quot;</span>,\n  <span class=\"hljs-attr\">plugins</span>: [<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">HtmlWebpackPlugin</span>()],\n};\n</code></pre>\n<ol start=\"3\">\n<li>æ·»åŠ å¯åŠ¨å‘½ä»¤</li>\n</ol>\n<pre><code class=\"hljs language-json\"><span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">&quot;scripts&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;dev:lit&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;webpack serve&quot;</span>\n  <span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n<ol start=\"4\">\n<li>å®‰è£… VS Code æ’ä»¶</li>\n</ol>\n<p>VS Code æ’ä»¶æ ä¸­æœç´¢<strong>lit-plugin</strong>ï¼Œç„¶åå®‰è£…å³å¯ï¼Œå®‰è£…å¥½ä¹‹å<code>html</code>å’Œ<code>css</code>é‡Œçš„ä»£ç å°±æœ‰é«˜äº®å’Œè¯­æ³•æç¤ºäº†ï¼ˆæ²¡æœ‰çš„è¯é‡æ–°æ‰“å¼€æ–‡ä»¶è¯•è¯•ï¼Œå†ä¸è¡Œå°±é‡å¯å¤§æ³•å¥½ï¼‰ï¼Œè€Œä¸”ç‚¹å‡»ç»„ä»¶è¿˜å¯ä»¥è·³è½¬äº†</p>\n<p>è‡³æ­¤ï¼Œå¼€å‘ç¯å¢ƒé…ç½®å®Œæ¯•</p>\n<h2 id=\"ä½¿ç”¨-typescript-é‡æ„ä»£ç \">ä½¿ç”¨ typescript é‡æ„ä»£ç </h2>\n<p>ä¿—è¯è¯´å¾—å¥½ï¼Œç£¨åˆ€ä¸è¯¯ç æŸ´å·¥ï¼Œå…ˆè§„åˆ’å¥½è¦åšä»€ä¹ˆ</p>\n<ol>\n<li><p>é‡æ„ Reply ç»„ä»¶</p>\n</li>\n<li><p>ä½¿ç”¨ typescript å¼€å‘</p>\n</li>\n<li><p>ä½¿ç”¨ webpack ğŸ“¦</p>\n</li>\n</ol>\n<p>é‚£ä¹ˆæ—¢ç„¶ç”¨åˆ° webpack äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æŒ‰ç…§é€šå¸¸çš„é¡¹ç›®æ¥è®¾è®¡äº†</p>\n<pre><code class=\"hljs language-sh\">.\nâ”œâ”€â”€ package.json\nâ”œâ”€â”€ src\nâ”‚   â”œâ”€â”€ components\nâ”‚   â”‚   â”œâ”€â”€ Comment.ts <span class=\"hljs-comment\"># è¯„è®ºç»„ä»¶</span>\nâ”‚   â”‚   â””â”€â”€ Reply.ts   <span class=\"hljs-comment\"># å›å¤ç»„ä»¶</span>\nâ”‚   â””â”€â”€ index.ts       <span class=\"hljs-comment\"># å…¥å£æ–‡ä»¶ï¼ŒåŒæ—¶ä¼šåˆ›å»ºä¸€ä¸ªAppç»„ä»¶</span>\nâ”œâ”€â”€ tsconfig.json\nâ”œâ”€â”€ webpack.config.js\nâ””â”€â”€ yarn.lock\n</code></pre>\n<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åˆ†åˆ«å°†ä¸åŒçš„ç»„ä»¶æŠ½ç¦»åˆ°ä¸åŒçš„æ–‡ä»¶ä¸­ï¼Œè¿™æ ·é€»è¾‘æ›´æ¸…æ™°ï¼Œç»´æŠ¤èµ·æ¥ä¹Ÿæ›´æ–¹ä¾¿</p>\n<p>å¥½äº†ï¼Œæ¥ä¸‹æ¥å¼€å§‹ç¼–ç </p>\n<p>ï¼ˆä»£ç å’Œä¹‹å‰çš„å·®ä¸å¤šï¼Œæˆ‘ç›´æ¥æ•²é‡ç‚¹ï¼‰</p>\n<p>ä» js è¿ç§»åˆ° ts å¼€å§‹å¾ˆæ–¹ä¾¿å¿«æ·çš„ï¼Œä¸»è¦ä¿®æ”¹çš„é€»è¾‘åŒ…å«ä¸‹é¢å‡ é¡¹</p>\n<ol>\n<li><p>å»é™¤ä¹‹å‰çš„<code>window.customElements.define(&#39;m-comment&#39;, Comment);</code>ï¼Œåœ¨<code>class</code>æœ€ä¸Šé¢æ·»åŠ æ³¨è§£<code>@customElement(&quot;m-comment&quot;)</code></p>\n</li>\n<li><p>å±æ€§å£°æ˜ä¹Ÿå¯ä»¥ä½¿ç”¨æ³¨è§£äº†</p>\n</li>\n</ol>\n<pre><code class=\"hljs language-ts\">  <span class=\"hljs-meta\">@property</span>({ <span class=\"hljs-attr\">type</span>: <span class=\"hljs-title class_\">String</span> })\n  avatar = <span class=\"hljs-string\">&#x27;&#x27;</span>\n</code></pre>\n<ol start=\"3\">\n<li>ç»„ä»¶ä¸­çš„<code>this.shadowRoot.querySelector(&#39;#input&#39;)</code>éœ€è¦ä¿®æ”¹ä¸€ä¸‹</li>\n</ol>\n<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>!</code>æ¥å¼ºåˆ¶å£°æ˜<code>this.shadowRoot</code>æ˜¯ä¸€å®šå­˜åœ¨çš„ï¼Œæˆ–è€…æ·»åŠ ä¸€ä¸ª<code>if</code>åˆ¤æ–­</p>\n<pre><code class=\"hljs language-ts\"><span class=\"hljs-title function_\">onSubmit</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">const</span> <span class=\"hljs-attr\">comment</span>: <span class=\"hljs-title class_\">HTMLInputElement</span>|<span class=\"hljs-literal\">null</span> = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">shadowRoot</span>!.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&#x27;#input&#x27;</span>);\n    <span class=\"hljs-keyword\">const</span> res = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">dispatchEvent</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">CustomEvent</span>(<span class=\"hljs-string\">&#x27;submit-comment&#x27;</span>, {\n      <span class=\"hljs-attr\">detail</span>: comment!.<span class=\"hljs-property\">value</span>,\n    }));\n    comment!.<span class=\"hljs-property\">value</span> = <span class=\"hljs-string\">&quot;&quot;</span>;\n  }\n</code></pre>\n<ol start=\"4\">\n<li>å®Œæˆ</li>\n</ol>\n<p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/611ad4cbcda94373a63fb5b2b22bd715~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"lit-ts-js\"></p>\n<p>å¯ä»¥çœ‹åˆ°ï¼Œæœ‰äº† typescript çš„åŠ æŒï¼Œä»£ç æ˜æ˜¾æ¸…çˆ½è®¸å¤šï¼Œè€Œä¸”å¼€å‘ä½“éªŒä¹Ÿæ›´å¥½äº†</p>\n<p>å®Œæ•´ä»£ç åœ¨<a href=\"https://github.com/mrrs878/web-components\">è¿™é‡Œ</a></p>\n<h2 id=\"æ€»ç»“\">æ€»ç»“</h2>\n<p>typescript ç‰›é€¼ï¼Œå¼€å‘æ’ä»¶çš„å¤§ä½¬ç‰›é€¼</p>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://lit.dev/docs/\">Lit</a></p>\n"},{"title":"Web Component-Lit","tags":["å¾®å‰ç«¯","WebComponent","Lit"],"categories":"å¾®å‰ç«¯","description":"åœ¨å‰å‡ ç¯‡ä¸­ï¼Œæˆ‘ä»¬åŸºäºåŸç”Ÿçš„ Web Components å¼€å‘äº†ä¸€ä¸ª`Reply`ç»„ä»¶ï¼Œå¤§æ¦‚é•¿è¿™æ ·\n\n![web component reply](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2fa68a485f5242f5b5e1eb75dfc801c1~tplv-k3u1fbpfcp-zoom-1.image)\n\nåŠŸèƒ½æ˜¯å®Œæˆäº†ï¼Œä¸è¿‡è¿™äº›","createDate":"2022-04-26 20:49:40","updateDate":"2022-04-26 22:54:37","body":"<p>åœ¨å‰å‡ ç¯‡ä¸­ï¼Œæˆ‘ä»¬åŸºäºåŸç”Ÿçš„ Web Components å¼€å‘äº†ä¸€ä¸ª<code>Reply</code>ç»„ä»¶ï¼Œå¤§æ¦‚é•¿è¿™æ ·</p>\n<p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2fa68a485f5242f5b5e1eb75dfc801c1~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"web component reply\"></p>\n<p>åŠŸèƒ½æ˜¯å®Œæˆäº†ï¼Œä¸è¿‡è¿™äº›éƒ½æ˜¯è£¸ç”¨ Web Componentsï¼Œæœ‰ä¸å°‘ç¼ºé™·ï¼š</p>\n<ol>\n<li><p>æ€§èƒ½é—®é¢˜ã€‚ç”±äºæˆ‘ä»¬æ²¡æœ‰ä»»ä½• dom diff çš„æ“ä½œï¼Œæ¥æ”¶åˆ°æ•°æ®åç›´æ¥æ¸²æŸ“ä¸€ä¸ªèŠ‚ç‚¹åŠå…¶å­èŠ‚ç‚¹ï¼Œè¿‡äºç®€å•ç²—æš´</p>\n</li>\n<li><p>æ•°æ®ä¼ è¾“é—®é¢˜ã€‚æˆ‘ä»¬åœ¨ä¸Šä¸€ç¯‡å¤„ç†æ•°æ®ä¸­æåˆ°ä½¿ç”¨<code>property</code>æ¥å¤„ç†çˆ¶å­ç»„ä»¶äº¤äº’é—®é¢˜ï¼Œä½†è¿™æ ·å°±æ²¡æ³•ç»™å­ç»„ä»¶ä¼ é€’åˆå§‹å±æ€§</p>\n</li>\n<li><p>æ•ˆç‡ã€‚å¯ä»¥çœ‹åˆ°ï¼Œä»…ä»…æ˜¯ä¸€ä¸ªç®€å•çš„<code>Reply</code>ç»„ä»¶ï¼Œå°±å†™äº†å¾ˆå¤šçç¢çš„ dom æ“ä½œï¼Œå¦‚æœç»„ä»¶å¤æ‚ä¸€ç‚¹ï¼Œä»£ç é‡è‚¯å®šä¼šæ¿€å¢</p>\n</li>\n<li><p>and so on</p>\n</li>\n</ol>\n<p>å¥½åœ¨ç°åœ¨æœ‰ä¸€ä¸ªåº“ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£å†³è¿™äº›åŸºç¡€é—®é¢˜ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥ä¸“æ³¨äºå¤„ç†ä¸šåŠ¡éœ€æ±‚</p>\n<p><a href=\"https://lit.dev/\">Lit</a></p>\n<h2 id=\"lit-æ˜¯ä»€ä¹ˆ\">Lit æ˜¯ä»€ä¹ˆ</h2>\n<blockquote>\n<p>Lit is a simple library for building fast, lightweight web components.</p>\n</blockquote>\n<p>å¥¥ï¼Œç”¨æ¥åˆ›å»º Web Components çš„ä¸€ä¸ªåº“</p>\n<p>å®˜ç½‘ä¸Šéå¸¸é†’ç›®åœ°è¡¨è¾¾å‡ºå…¶ç‰¹ç‚¹ï¼šSimpleã€Fastã€Web Componentsï¼Œè€Œä¸”è¿˜å¯¹è¿™ä¸‰ä¸ªç‰¹ç‚¹åšäº†è¯´æ˜</p>\n<p>Simpleï¼šåŸºäºåŸç”Ÿ Web Componentsï¼Œæ·»åŠ äº†ä¸€äº›å“åº”å¼ã€å£°æ˜å¼æ¨¡ç‰ˆè¯­æ³•å’Œå…¶å®ƒä¸€äº›ç‰¹æ€§</p>\n<p>Fastï¼šæ„å»ºåä½“ç§¯éå¸¸å°ï¼Œ5KBï¼Œè€Œä¸”æ²¡æœ‰è™šæ‹ŸDOM\\å¢é‡æ›´æ–°</p>\n<p>Web Componentsï¼šåŸºäºåŸç”Ÿ Web Componentsï¼Œå¯ä»¥å’Œå„ç§æ¡†æ¶ã€å¹³å°æ— ç¼è¡”æ¥</p>\n<p>çœ‹èµ·æ¥è¿˜æ˜¯æŒºæœ‰æ„æ€çš„ï¼Œå¯ä»¥è¯•ç”¨ä¸€ä¸‹</p>\n<p>è¿™æ˜¯å®˜ç½‘ç»™å‡ºçš„ç¤ºä¾‹</p>\n<pre><code class=\"hljs language-jsx\"><span class=\"hljs-keyword\">import</span> { html, css, <span class=\"hljs-title class_\">LitElement</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;lit&quot;</span>;\n<span class=\"hljs-keyword\">import</span> { customElement, property } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;lit/decorators.js&quot;</span>;\n\n@<span class=\"hljs-title function_\">customElement</span>(<span class=\"hljs-string\">&quot;simple-greeting&quot;</span>)\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">SimpleGreeting</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">LitElement</span> {\n  <span class=\"hljs-keyword\">static</span> styles = css`<span class=\"language-css\">\n    <span class=\"hljs-selector-tag\">p</span> {\n      <span class=\"hljs-attribute\">color</span>: blue;\n    }\n  `</span>;\n\n  @<span class=\"hljs-title function_\">property</span>()\n  name = <span class=\"hljs-string\">&quot;Somebody&quot;</span>;\n\n  <span class=\"hljs-title function_\">render</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">return</span> html`<span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>Hello, </span><span class=\"hljs-subst\">${<span class=\"hljs-variable language_\">this</span>.name}</span><span class=\"language-xml\">!<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>`</span>;\n  }\n}\n\n&lt;simple-greeting name=<span class=\"hljs-string\">&quot;World&quot;</span>&gt;&lt;/simple-greeting&gt;;\n</code></pre>\n<p>å¼€èµ·æ¥è¿˜æ˜¯æŒºç®€å•çš„ï¼Œé‚£ä¹ˆå°±å…ˆè¯•ç”¨ä¸€ä¸‹ï¼Œä½¿ç”¨ Lit æ¥é‡æ„ Reply ç»„ä»¶</p>\n<h2 id=\"ä½¿ç”¨-lit-é‡æ„-reply-ç»„ä»¶\">ä½¿ç”¨ Lit é‡æ„ Reply ç»„ä»¶</h2>\n<p>é…ç½®å¼€å‘ç¯å¢ƒçš„è¿‡ç¨‹å°±ç•¥è¿‡äº†ï¼Œç›´æ¥è¿›å…¥ç¼–ç ç¯èŠ‚</p>\n<p>å…ˆå°†ç›®å…‰ç§»åˆ°ä¸Šè¿°çš„ç¤ºä¾‹ï¼Œè¯¥ç¤ºä¾‹åˆ›å»ºäº†ä¸€ä¸ª<code>simple-greeting</code>ç»„ä»¶</p>\n<p>é¦–å…ˆï¼Œä½¿ç”¨<code>customElement</code>æ³¨è§£ï¼Œå®šä¹‰äº†ä¸€ä¸ªç»„ä»¶<code>simple-greeting</code>ï¼Œè¿™ä¸ªå¯¹æ ‡<code>customElements.define</code></p>\n<p>æ¥ç€ï¼Œä½¿ç”¨<code>css</code>å‡½æ•°åˆ›å»ºæ ·å¼ï¼Œè¿™ä¸ªå¯¹æ ‡<code>template&gt;style</code></p>\n<p>ç„¶åï¼Œä½¿ç”¨<code>property</code>å£°æ˜äº†ä¸€ä¸ªå±æ€§ï¼Œè¿™ä¸ªå¯¹æ ‡åŸç”Ÿçš„<code>setAttribute/getAttribute</code></p>\n<p>æœ€åï¼Œä½¿ç”¨<code>html</code>å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ª dom æ¨¡ç‰ˆ</p>\n<p>æŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤ï¼Œå¯ä»¥å¾ˆç®€å•åœ°ä¿®æ”¹æˆ‘ä»¬çš„ä»£ç </p>\n<pre><code class=\"hljs language-jsx\"><span class=\"hljs-keyword\">import</span> {\n  <span class=\"hljs-title class_\">LitElement</span>,\n  css,\n  html,\n} <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;https://cdn.jsdelivr.net/gh/lit/dist@2.2.2/all/lit-all.min.js&quot;</span>;\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Reply</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">LitElement</span> {\n  <span class=\"hljs-keyword\">static</span> styles = css`<span class=\"language-css\">`</span>;\n\n  <span class=\"hljs-keyword\">static</span> properties = {\n    <span class=\"hljs-attr\">placeholder</span>: { <span class=\"hljs-attr\">type</span>: <span class=\"hljs-title class_\">String</span> },\n  };\n\n  <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-variable language_\">super</span>();\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">avatar</span> = <span class=\"hljs-string\">&quot;https://joeschmoe.io/api/v1/random&quot;</span>;\n  }\n\n  <span class=\"hljs-title function_\">onSubmit</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">const</span> comment = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">shadowRoot</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#input&quot;</span>);\n    <span class=\"hljs-keyword\">const</span> res = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">dispatchEvent</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">CustomEvent</span>(<span class=\"hljs-string\">&quot;submit-comment&quot;</span>));\n  }\n\n  <span class=\"hljs-title function_\">render</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">return</span> html`<span class=\"language-xml\">\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;reply-c&quot;</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;comments-c&quot;</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;commentsContainer&quot;</span>&gt;</span>\n          </span><span class=\"hljs-subst\">${<span class=\"hljs-variable language_\">this</span>.comments.map(\n            (comment) =&gt;\n              html`<span class=\"language-xml\">\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">m-comment</span>\n                  <span class=\"hljs-attr\">.avatar</span>=<span class=\"hljs-string\">&quot;</span></span></span><span class=\"hljs-subst\">${comment.avatar}</span><span class=\"language-xml\"><span class=\"hljs-tag\"><span class=\"hljs-string\">&quot;</span>\n                  <span class=\"hljs-attr\">.nickName</span>=<span class=\"hljs-string\">&quot;</span></span></span><span class=\"hljs-subst\">${comment.nickName}</span><span class=\"language-xml\"><span class=\"hljs-tag\"><span class=\"hljs-string\">&quot;</span>\n                  <span class=\"hljs-attr\">.comment</span>=<span class=\"hljs-string\">&quot;</span></span></span><span class=\"hljs-subst\">${comment.comment}</span><span class=\"language-xml\"><span class=\"hljs-tag\"><span class=\"hljs-string\">&quot;</span>\n                /&gt;</span>\n              `</span>\n          )}</span><span class=\"language-xml\">\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n    `</span>;\n  }\n}\n</code></pre>\n<p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ä»£ç é‡Œå·²ç»æ²¡æœ‰ç›‘å¬<code>comments</code>çš„é€»è¾‘ï¼ŒLit ä¼šå¸®æˆ‘ä»¬åšç›‘å¬ï¼Œå˜åŒ–æ—¶è‡ªåŠ¨é‡æ¸²</p>\n<p>æ€»ä½“æ”¹é€ èµ·æ¥è¿˜æ˜¯æŒºé¡ºåˆ©çš„ï¼Œæœ‰ç‚¹ React + Vue ç»„åˆèµ·æ¥çš„æ„Ÿè§‰ï¼Œåªæ˜¯åœ¨<code>App</code>é‡Œå‘<code>Reply</code>ç»„ä»¶ä¼ é€’<code>comments</code>å±æ€§æ—¶è€—è´¹ç‚¹æ—¶é—´ï¼Œç”±äºæ²¡çœ‹æ¸…å®˜ç½‘çš„æ–‡æ¡£ï¼Œä¸€ç›´ä½¿ç”¨çš„æ˜¯<code>&lt;m-reply comments=${comments} /&gt;</code>æ¥ä¼ é€’ï¼Œå¯¼è‡´<code>Reply</code>ç»„ä»¶ä¸€ç›´æ¥å—ä¸åˆ°å€¼ï¼Œæœ€åç¿»çœ‹å®˜ç½‘çš„ç¤ºä¾‹ï¼Œå‘ç°ä¼ é€’å¤æ‚ç±»å‹çš„å€¼æ—¶éœ€è¦åœ¨å‰é¢åŠ ä¸€ä¸ª<code>.</code>ï¼ˆæœ‰ç‚¹å‘ï¼Œæ•´ä¸ªæ”¹é€ æ—¶é—´æœ‰å°†è¿‘ä¸€åŠæ—¶é—´å¡åœ¨è¿™é‡Œ ğŸ˜­ï¼‰</p>\n<p>å¼€å‘ä½“éªŒä¸€èˆ¬ï¼Œæ¬ ç¼ºä¸€äº›æ²¡æœ‰è¯­æ³•æç¤ºå’Œé«˜äº®</p>\n<p>å®Œæ•´ä»£ç åœ¨<a href=\"https://github.com/mrrs878/web-components/blob/main/reply-lit.html\">è¿™é‡Œ</a>ï¼ˆåœ¨è¿™é‡Œï¼Œä¸ºäº†æ›´è¿›ä¸€æ­¥ä½“ç°ç»„ä»¶åŒ–çš„æ€æƒ³ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸‰ä¸ªç»„ä»¶<code>App</code>ã€<code>Reply</code>ã€<code>Comment</code>ã€‚<code>App</code>æ˜¯æ ¹ç»„ä»¶ï¼Œç”¨æ¥åˆ›å»ºé¡µé¢ï¼Œå¹¶å°†ä¹‹å‰çš„<code>Reply</code>ç»„ä»¶æ‹†åˆ†ä¸º<code>Reply</code> + <code>Comment</code>ï¼‰</p>\n<h2 id=\"æ€»ç»“\">æ€»ç»“</h2>\n<p>ä½¿ç”¨èµ·æ¥æœ‰åˆ©æœ‰å¼Šï¼Œæ€§èƒ½è¾ƒè£¸å†™è‚¯å®šæœ‰æå‡ï¼Œä½†å¼€å‘ä½“éªŒè¿˜å¾…æé«˜ï¼Œå€¼å¾—å°è¯•ä¸€ä¸‹</p>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://lit.dev/docs/\">Lit</a></p>\n"},{"title":"Web Component-å¤„ç†æ•°æ®","tags":["å¾®å‰ç«¯","WebComponent","Attribute","Property"],"categories":"å¾®å‰ç«¯","description":"åœ¨å‰ä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ª`Reply`ç»„ä»¶ï¼Œå¤§æ¦‚é•¿è¿™æ ·\n\n![web component reply](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2fa68a485f5242f5b5e1eb75dfc801c1~tplv-k3u1fbpfcp-zoom-1.image)\n\nåŠŸèƒ½æ˜¯å®Œæˆäº†ï¼Œä¸è¿‡ä»Šå¤©æµè§ˆçœ‹åˆ°ä¸€ç¯‡æ–‡ç« [Handling dat","createDate":"2022-04-24 22:00:47","updateDate":"2022-04-23 22:54:37","body":"<p>åœ¨å‰ä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ª<code>Reply</code>ç»„ä»¶ï¼Œå¤§æ¦‚é•¿è¿™æ ·</p>\n<p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2fa68a485f5242f5b5e1eb75dfc801c1~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"web component reply\"></p>\n<p>åŠŸèƒ½æ˜¯å®Œæˆäº†ï¼Œä¸è¿‡ä»Šå¤©æµè§ˆçœ‹åˆ°ä¸€ç¯‡æ–‡ç« <a href=\"https://itnext.io/handling-data-with-web-components-9e7e4a452e6e\">Handling data with Web Components</a>ï¼Œå¤§æ¦‚æ˜¯ä»‹ç»äº† Web Component ä¸­æ•°æ®äº¤äº’çš„å‡ ç§æ–¹å¼ï¼Œæœ‰ä¸å°‘æ”¶è·ï¼Œç‰¹æ­¤æ€»ç»“è®°å½•ä¸€ä¸‹</p>\n<h2 id=\"attribute-vs-property\">attribute VS property</h2>\n<p>é¦–å…ˆæ˜¯<code>attribute</code>å’Œ<code>property</code>ï¼Œæˆ‘ä»¬ä¹‹å‰çš„ä»£ç ä¸­ä½¿ç”¨çš„æ˜¯<code>attribute</code>æ¥å°†<code>comments</code>ä¼ é€’åˆ°ç»„ä»¶ä¸­ï¼Œç»„ä»¶æ‹¿åˆ°åå¼€å§‹æ¸²æŸ“æ•°æ®ã€‚è¿™ç§æ–¹æ¡ˆæœ‰ä¸€ä¸ªå¼Šç«¯ï¼š<code>attribute</code>åªæ¥æ”¶å­—ç¬¦ä¸²ç±»å‹çš„æ•°æ®ï¼Œç”±äº<code>comments</code>æ˜¯ä¸€ä¸ªæ•°ç»„ç±»å‹ï¼Œå› æ­¤æˆ‘ä»¬åœ¨ä¼ é€’ä¹‹å‰éœ€è¦ä½¿ç”¨<code>JSON.stringify</code>ä¸€ä¸‹ä»¥åŠä½¿ç”¨æ•°æ®æ—¶éœ€è¦<code>JSON.parse</code>ä¸€ä¸‹ï¼Œä½¿ç”¨èµ·æ¥æœ‰ä¸€äº›ä¸å¤Ÿæ–¹ä¾¿</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// æ›´æ–°commentsæ—¶éœ€è¦å¤„ç†æˆå­—ç¬¦ä¸²</span>\nreply.<span class=\"hljs-title function_\">setAttribute</span>(<span class=\"hljs-string\">&quot;comments&quot;</span>, <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">stringify</span>(comments));\n\n<span class=\"hljs-comment\">// ä½¿ç”¨æ—¶éœ€è¦è§£ææˆæ•°ç»„</span>\n<span class=\"hljs-keyword\">if</span> (name === <span class=\"hljs-string\">&quot;comments&quot;</span>) {\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">renderComments</span>(<span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">parse</span>(newValue));\n}\n</code></pre>\n<p>é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§æ›´å¥½çš„æ–¹å¼æ¥å–ä»£è¿™ç§æ–¹å¼å‘¢ï¼Ÿæœ‰çš„ï¼Œå¯ä»¥ä½¿ç”¨<code>property</code>æ¥ä¼ é€’æ•°æ®</p>\n<p><code>property</code>å’Œ<code>attribute</code>ä¸­æ–‡ç¿»è¯‘è¿‡æ¥æ„æ€å¾ˆæ¥è¿‘ï¼Œä½†å®é™…ä¸Šæ˜¯æœ‰ä¸å°çš„åŒºåˆ«</p>\n<p>è€ƒè™‘ä¸‹é¢è¿™ä¸€è¡Œä»£ç </p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;text&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;Age:&quot;</span> /&gt;</span>\n</code></pre>\n<p><code>type</code>å’Œ<code>value</code>å°±æ˜¯<code>input</code>æ ‡ç­¾çš„<em>attribute</em></p>\n<p>å½“æµè§ˆå™¨ç¼–è¯‘å®Œ HTML ä»£ç ï¼Œä¼šç”Ÿæˆä¸ä¹‹å¯¹åº”çš„ä¸€ä¸ªä¸ª DOM èŠ‚ç‚¹ï¼Œæ¯ä¸ª DOM èŠ‚ç‚¹æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ­¤æ—¶å®ƒåˆæ‹¥æœ‰å¾ˆå¤š<em>property</em>ï¼Œä¾‹å¦‚<code>height</code>ã€<code>alt</code>ã€<code>checked</code>ç­‰</p>\n<p>å¯¹äºä¸€ä¸ª DOM èŠ‚ç‚¹å¯¹è±¡æ¥è®²ï¼Œ<code>property</code>å°±æ˜¯è¿™ä¸ªå¯¹è±¡ä¸Šçš„å±æ€§ï¼›<code>attribute</code>æ˜¯è¯¥å¯¹è±¡å¯¹åº”çš„ HTML æ ‡ç­¾å…ƒç´ ä¸Šçš„å±æ€§</p>\n<p><code>property</code>å’Œ<code>attribute</code>å¤§è‡´ä¸Šä¸€ä¸€å¯¹åº”ï¼Œä½†ä¹Ÿæœ‰äº›ç‰¹ä¾‹ï¼Œæ¯”å¦‚ä¸Šè¿°<code>input</code>æ ‡ç­¾çš„<code>value</code>ã€‚DOM èŠ‚ç‚¹å¯¹è±¡ä¸Šçš„<code>value</code>ä¼šåœ¨è¾“å…¥ä¹‹åå‘ç”Ÿå˜åŒ–ï¼Œå‡å¦‚ç”¨æˆ·è¾“å…¥çš„æ˜¯<code>John</code>ï¼Œé‚£ä¹ˆæ­¤æ—¶<code>Input.value</code>çš„è¿”å›å€¼æ˜¯<code>John</code>ï¼Œè€Œ<code>Input.getAttribute(&#39;value&#39;)</code>çš„è¿”å›å€¼åˆ™æ˜¯<code>Name:</code>ã€‚æ­¤å¤–è¿˜æœ‰å…¶ä»–çš„ä¸€äº›ç‰¹ä¾‹ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å»è¿™é‡Œ<a href=\"https://stackoverflow.com/questions/6003819/what-is-the-difference-between-properties-and-attributes-in-html/6004028#6004028\">What is the difference between properties and attributes in HTML</a>çœ‹çœ‹åŸæ–‡</p>\n<p>æ—¢ç„¶<code>property</code>æ˜¯å¯¹è±¡ä¸Šçš„ä¸€ä¸ªå±æ€§ï¼Œé‚£ä¸ªè‚¯å®šä¹Ÿå¯ä»¥ç»™å®ƒèµ‹ä¸€ä¸ªå¯¹è±¡ç±»å‹çš„å€¼ï¼æ¥ä¸‹æ¥å°±ä½¿ç”¨<code>property</code>æ¥é‡æ„<code>Reply</code>ç»„ä»¶</p>\n<h2 id=\"ä½¿ç”¨-property-é‡æ„ç»„ä»¶\">ä½¿ç”¨ property é‡æ„ç»„ä»¶</h2>\n<p>å…¶å®ä¿®æ”¹èµ·æ¥éå¸¸æ–¹ä¾¿ï¼Œä»£ç æ”¹åŠ¨è¿˜æ˜¯æ¯”è¾ƒå°‘çš„</p>\n<p>é¦–å…ˆæ˜¯æœ€ä¸‹é¢ç»™ç»„ä»¶æ›´æ–°å€¼çš„ä»£ç éœ€è¦å˜åŠ¨ï¼šä¸å†ä½¿ç”¨<code>setAttribute</code>ï¼Œè€Œæ˜¯ç›´æ¥è®¾ç½®<code>comments</code>å±æ€§</p>\n<pre><code class=\"hljs language-js\">reply.<span class=\"hljs-title function_\">setAttribute</span>(<span class=\"hljs-string\">&quot;comments&quot;</span>, <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">stringify</span>(comments));\n\n<span class=\"hljs-comment\">// ä¿®æ”¹ä¸º â¬‡ï¸</span>\n\nreply.<span class=\"hljs-property\">comments</span> = comments;\n</code></pre>\n<p>å…¶æ¬¡ï¼Œæˆ‘ä»¬éœ€è¦ä¸€å¯¹<code>getter</code>å’Œ<code>setter</code>æ¥ç›‘å¬æ•°æ®å˜åŒ–ä»è€Œæ¸²æŸ“æ–°çš„å€¼</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Reply</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">HTMLElement</span> {\n  <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-comment\">// åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨_commentsæ¥ä¿å­˜commentsæ•°æ®</span>\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">_comments</span> = [];\n  }\n  <span class=\"hljs-keyword\">get</span> <span class=\"hljs-title function_\">comments</span>() {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">_comments</span>;\n  }\n\n  <span class=\"hljs-keyword\">set</span> <span class=\"hljs-title function_\">comments</span>(<span class=\"hljs-params\">newValue</span>) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">_comments</span> = newValue;\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">renderComments</span>(newValue);\n  }\n}\n</code></pre>\n<p>åŒæ—¶ï¼Œåˆ é™¤ç›‘å¬<code>comments</code>å±æ€§ç›¸å…³çš„ä»£ç ï¼Œå› ä¸ºæˆ‘ä»¬è¿™ä¸ªå·²ç»é€šè¿‡<code>setter</code>å®ç°æ•°æ®ç›‘å¬äº†</p>\n<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»å®Œæˆé‡æ„ï¼Œå®ç°ç»„ä»¶çš„åŸæœ¬åŠŸèƒ½äº†</p>\n<p>ä¸è¿‡æˆ‘ä»¬è¦æ›´æ–°ä¸€æ­¥ï¼</p>\n<p>æ—¢ç„¶æˆ‘ä»¬éƒ½èƒ½ä¼ é€’æ•°ç»„è¿›å»äº†ï¼Œé‚£ä¹ˆåœ¨å¤§èƒ†ç‚¹ï¼Œå¯ä¸å¯ä»¥ä¼ é€’ä¸€ä¸ªå‡½æ•°å‘¢ï¼Ÿ</p>\n<p>å½“ç„¶å¯ä»¥ï¼ï¼ï¼</p>\n<p>æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨<code>reply</code>ä¸ŠæŒ‚è½½ä¸€ä¸ª<code>onSubmitComment</code>å‡½æ•°ï¼Œåœ¨<code>Reply</code>å†…éƒ¨æŒ‰é’®ç‚¹å‡»æ—¶è°ƒç”¨è¯¥å›è°ƒï¼Œå¹¶å°†æ•°æ®ä¼ é€’å‡ºæ¥</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// ç›´æ¥åœ¨ç»„ä»¶å®ä¾‹ä¸ŠæŒ‚è½½ä¸€ä¸ªå›è°ƒå‡½æ•°</span>\nreply.<span class=\"hljs-property\">onSubmitComment</span> = <span class=\"hljs-function\">(<span class=\"hljs-params\">e</span>) =&gt;</span> {\n  comments.<span class=\"hljs-title function_\">push</span>({\n    <span class=\"hljs-attr\">comment</span>: e,\n    nickName,\n    avatar,\n  });\n  reply.<span class=\"hljs-property\">comments</span> = comments;\n};\n\n<span class=\"hljs-comment\">// ç»„ä»¶å†…éƒ¨ï¼Œç‚¹å‡»æŒ‰é’®æ—¶è°ƒç”¨è¯¥å‡½æ•°</span>\nsubmitBtn.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&quot;click&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">onSubmitComment</span>?.(commentInput.<span class=\"hljs-property\">value</span>);\n  commentInput.<span class=\"hljs-property\">value</span> = <span class=\"hljs-string\">&quot;&quot;</span>;\n});\n</code></pre>\n<p>èŠœæ¹–ï½ ğŸ‰</p>\n<p>å®Œæ•´ä»£ç <a href=\"https://github.com/mrrs878/web-components/blob/main/reply-property.html\">åœ¨è¿™é‡Œ</a></p>\n<h2 id=\"æ€»ç»“\">æ€»ç»“</h2>\n<p><code>attribute</code>åªèƒ½ä¼ é€’å­—ç¬¦ä¸²æ•°æ®ï¼Œ<code>property</code>ç”±äºæ˜¯ DOM å¯¹è±¡ä¸Šçš„å±æ€§ï¼Œå› æ­¤å¯ä»¥ä¼ é€’è¯¸å¦‚å¯¹è±¡ã€å‡½æ•°ç­‰å¤æ‚ç±»å‹çš„æ•°æ®ã€‚</p>\n<p>æ®æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>property</code>æ¥å°†æ•°æ®ç›´æ¥è®¾ç½®åˆ°ç»„ä»¶å®ä¾‹ä¸Šï¼Œç»„ä»¶å†…éƒ¨æ–°å¢ä¸€å¯¹<code>getter</code>å’Œ<code>setter</code>æ¥æ¥æ”¶æ•°æ®ï¼Œè€Œä¸”æˆ‘ä»¬è¿˜å¯ä»¥ç›´æ¥åœ¨ç»„ä»¶å®ä¾‹ä¸ŠæŒ‚è½½ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œåœ¨ç»„ä»¶å†…éƒ¨å¯ä»¥ç›´æ¥è°ƒç”¨è¯¥å›è°ƒã€‚</p>\n<p>æ­¤å¤–åœ¨å¤„ç†ç±»ä¼¼äº<code>disable</code>è¿™ç§ç±»å‹çš„<code>attribute</code>æ—¶ä¹Ÿå¯ä»¥ä½¿ç”¨<code>property</code>+<code>getter</code>å’Œ<code>setter</code>æ¥å®ç°å¸ƒå°”ç±»å‹å±æ€§çš„è®¾ç½®</p>\n<p>æ€»ä¹‹ï¼Œ<code>attribute</code>å’Œ<code>property</code>æ­é…ä½¿ç”¨å°†æå¤§æé«˜å¼€å‘æ•ˆç‡</p>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://stackoverflow.com/questions/6003819/what-is-the-difference-between-properties-and-attributes-in-html/6004028#6004028\">What is the difference between properties and attributes in HTML</a></p>\n<p><a href=\"https://itnext.io/handling-data-with-web-components-9e7e4a452e6e\"># Handling data with Web Components</a></p>\n"},{"title":"Web Component-å¼€å‘ç»„ä»¶","tags":["å¾®å‰ç«¯","WebComponent"],"categories":"å¾®å‰ç«¯","description":"ç»è¿‡å‰ä¸¤å¤©çš„å­¦ä¹ ï¼Œå·²ç»åŸºæœ¬å…¥é—¨ Web Component ï¼Œé‚£ä¹ˆå°±å¼€å§‹å®æˆ˜ï¼Œå¼€å‘ç¬¬ä¸€ä¸ªç»„ä»¶\n\nä¸è¿‡åœ¨æ­¤ä¹‹å‰ï¼Œè¿˜è¦ä»‹ç»å¦ä¸€ä¸ªç‰¹æ€§\n\n## slot\n\n> slot ç”±å…¶ name å±æ€§æ ‡è¯†ï¼Œå¹¶ä¸”å…è®¸æ‚¨åœ¨æ¨¡æ¿ä¸­å®šä¹‰å ä½ç¬¦ï¼Œå½“åœ¨æ ‡è®°ä¸­ä½¿ç”¨è¯¥å…ƒç´ æ—¶ï¼Œè¯¥å ä½ç¬¦å¯ä»¥å¡«å……æ‰€éœ€çš„ä»»ä½• HTML æ ‡è®°ç‰‡æ®µã€‚--MDN\n\næ¯”å¦‚æˆ‘ä»¬çš„`template`æ˜¯è¿™æ ·çš„ï¼šåœ¨éœ€è¦çš„åœ°æ–¹æ”¾ç½®ä¸€ä¸ªæŒ‡å®š`name`å±æ€§çš„`slot","createDate":"2022-04-22 09:51:39","updateDate":"2022-04-23 20:40:37","body":"<p>ç»è¿‡å‰ä¸¤å¤©çš„å­¦ä¹ ï¼Œå·²ç»åŸºæœ¬å…¥é—¨ Web Component ï¼Œé‚£ä¹ˆå°±å¼€å§‹å®æˆ˜ï¼Œå¼€å‘ç¬¬ä¸€ä¸ªç»„ä»¶</p>\n<p>ä¸è¿‡åœ¨æ­¤ä¹‹å‰ï¼Œè¿˜è¦ä»‹ç»å¦ä¸€ä¸ªç‰¹æ€§</p>\n<h2 id=\"slot\">slot</h2>\n<blockquote>\n<p>slot ç”±å…¶ name å±æ€§æ ‡è¯†ï¼Œå¹¶ä¸”å…è®¸æ‚¨åœ¨æ¨¡æ¿ä¸­å®šä¹‰å ä½ç¬¦ï¼Œå½“åœ¨æ ‡è®°ä¸­ä½¿ç”¨è¯¥å…ƒç´ æ—¶ï¼Œè¯¥å ä½ç¬¦å¯ä»¥å¡«å……æ‰€éœ€çš„ä»»ä½• HTML æ ‡è®°ç‰‡æ®µã€‚--MDN</p>\n</blockquote>\n<p>æ¯”å¦‚æˆ‘ä»¬çš„<code>template</code>æ˜¯è¿™æ ·çš„ï¼šåœ¨éœ€è¦çš„åœ°æ–¹æ”¾ç½®ä¸€ä¸ªæŒ‡å®š<code>name</code>å±æ€§çš„<code>slot</code></p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;mHeaderTemplate&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">slot</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;my-text&quot;</span>&gt;</span>My default text<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">slot</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n</code></pre>\n<p>åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œå¯ä»¥è¿™æ ·ç©ï¼šç»™å…ƒç´ è®¾ç½®ä¸€ä¸ª<code>slot</code>å±æ€§ï¼Œå€¼ä¸º<code>template</code>é‡Œ<code>slot</code>çš„<code>name</code></p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">m-header</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;mHeader&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;hello&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span> <span class=\"hljs-attr\">slot</span>=<span class=\"hljs-string\">&quot;my-text&quot;</span>&gt;</span>Let&#x27;s have some different text!<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">m-header</span>&gt;</span>\n</code></pre>\n<p>è¿™æ ·<code>span</code>ä¼šæ›¿æ¢<code>template</code>é‡Œçš„<code>slot</code>ã€‚ä½¿ç”¨èµ·æ¥è¿˜æ˜¯æŒºç®€å•çš„</p>\n<p>ç‰¹æ€§ä»‹ç»å®Œæ¯•ï¼Œæ¥ä¸‹æ¥è¿›è¡Œä»Šå¤©çš„ä¸»é¢˜ï¼šç»„ä»¶å¼€å‘å®æˆ˜</p>\n<h2 id=\"reply-ç»„ä»¶\">Reply ç»„ä»¶</h2>\n<p>æœ¬æ¬¡æ¥å¤åˆ¶ Ant Design çš„ <code>Card</code> ç»„ä»¶</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/reply.png\" alt=\"reply\"></p>\n<p>å…ˆè§‚å¯Ÿç»„ä»¶</p>\n<ol>\n<li><p>é»˜è®¤æƒ…å†µä¸‹æœ‰ä¸€ä¸ªå¤´åƒã€è¾“å…¥æ¡†ã€æäº¤æŒ‰é’®</p>\n</li>\n<li><p>åœ¨è¾“å…¥å€¼ç‚¹å‡»æäº¤æŒ‰é’®åï¼Œè¾“å…¥æ¡†ä¸Šæ–¹ä¼šå‡ºç°æ¯ä¸€æ¡çš„è¯„è®ºï¼ŒåŒ…æ‹¬è¯„è®ºäººå¤´åƒã€æ˜µç§°ã€è¯„è®ºçš„å†…å®¹</p>\n</li>\n</ol>\n<p>é’ˆå¯¹ä¸Šè¿°åŠŸèƒ½ï¼Œç®€å•çš„å®ç°æ€è·¯ï¼ˆè‚¯å®šæœ‰æ›´å¥½ã€æ›´ä¼˜é›…çš„ ğŸ˜¬ï¼‰ï¼š</p>\n<ol>\n<li><p><code>m-reply</code>ä¸ºå—æ§ç»„ä»¶ï¼Œåªè´Ÿè´£æäº¤ã€æ¸²æŸ“æ•°æ®ï¼Œå› æ­¤éœ€è¦ä¸€ä¸ª<code>comments</code>å±æ€§ï¼ŒæŒ‡ä»£å¾…æ¸²æŸ“çš„è¯„è®º</p>\n</li>\n<li><p>åœ¨è¾“å…¥æ¡†è¾“å…¥æ•°æ®åï¼Œç‚¹å‡»æäº¤ï¼Œç»„ä»¶ä¼šå‘çˆ¶ç»„ä»¶å‘é€ä¸€ä¸ªæ¶ˆæ¯ï¼ˆè‡ªå®šä¹‰äº‹ä»¶ï¼‰ï¼Œå¹¶å°†è¾“å…¥æ¡†çš„å†…å®¹ä¼ é€’å‡ºå»ï¼Œå› æ­¤çˆ¶å®¹å™¨éœ€è¦ç›‘å¬è¯¥äº‹ä»¶ï¼Œçˆ¶ç»„ä»¶åœ¨åœ¨å¤„ç†å¥½æ•°æ®åæ›´æ–°<code>comments</code>ï¼Œ<code>m-reply</code>ä¼šè‡ªåŠ¨æ¸²æŸ“æœ€æ–°çš„æ•°æ®</p>\n</li>\n<li><p>å¯¹äº<code>comments</code>ï¼Œè¯¥å±æ€§æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ¯ä¸€é¡¹åŒ…å«ä¸‰é¡¹æ•°æ®ï¼šè¯„è®ºå†…å®¹<code>comment</code>ã€è¯„è®ºäººå¤´åƒ<code>avatar</code>ã€è¯„è®ºäººæ˜µç§°<code>nickName</code></p>\n</li>\n</ol>\n<p>åœ¨è®¾è®¡å¥½æ€è·¯åï¼Œå¼€å¹²ï¼</p>\n<p>å…ˆå®Œæˆæäº¤è¯„è®ºçš„åŠŸèƒ½ï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬é€‰æ‹©è‡ªå®šä¹‰äº‹ä»¶çš„æ–¹æ³•æ¥å®ç°ç»„ä»¶é—´é€šä¿¡ï¼Œåœ¨ç‚¹å‡»æäº¤æŒ‰é’®æ—¶è§¦å‘ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶<code>submitComment</code>ï¼Œå¹¶å°†è¯„è®ºå†…å®¹ä¼ é€’å‡ºå»</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-title function_\">connectedCallback</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">const</span> submitBtn = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">shadowRoot</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&#x27;#submitBtn&#x27;</span>);\n  <span class=\"hljs-keyword\">const</span> commentInput = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">shadowRoot</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&#x27;#input&#x27;</span>);\n  submitBtn.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&#x27;click&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-comment\">// æ³¨æ„1ï¼šè§¦å‘äº‹ä»¶çš„æ˜¯this</span>\n    <span class=\"hljs-keyword\">const</span> res = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">dispatchEvent</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">CustomEvent</span>(<span class=\"hljs-string\">&#x27;submitComment&#x27;</span>, {\n      <span class=\"hljs-comment\">// æ³¨æ„2ï¼šéœ€è¦å°†æ•°æ®æ”¾åœ¨detailå±æ€§ä¸Š</span>\n      <span class=\"hljs-attr\">detail</span>: commentInput.<span class=\"hljs-property\">value</span>,\n    }));\n  });\n}\n</code></pre>\n<p>æœ‰ä¸¤ä¸ªæ³¨æ„ç‚¹æ³¨æ„ï¼š</p>\n<ol>\n<li><p>è§¦å‘äº‹ä»¶çš„æ˜¯<code>this</code>ï¼Œå³å½“å‰ç»„ä»¶</p>\n</li>\n<li><p>æ•°æ®éœ€è¦æ”¾ç½®åœ¨è‡ªå®šä¹‰äº‹ä»¶çš„<code>detail</code>å±æ€§ä¸Šï¼Œç›´æ¥ä¼ é€’æ•°æ®æˆ–è€…æ”¾åœ¨å…¶ä»–å±æ€§ä¸Šä¼šæ¥æ”¶ä¸åˆ°</p>\n</li>\n</ol>\n<p>ğŸš©</p>\n<p>æ¥ç€æ˜¯çˆ¶ç»„ä»¶ç›‘å¬è¯¥äº‹ä»¶å¹¶å¤„ç†æ•°æ®</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// æ³¨æ„1ï¼šéœ€è¦å…ˆè·å–å½“å‰ç»„ä»¶ï¼Œç„¶åæ·»åŠ ç›‘å¬</span>\n<span class=\"hljs-keyword\">const</span> reply = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#reply&quot;</span>);\nreply.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&quot;submitComment&quot;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">e</span>) =&gt;</span> {\n  comments.<span class=\"hljs-title function_\">push</span>({\n    <span class=\"hljs-attr\">comment</span>: e.<span class=\"hljs-property\">detail</span>,\n    nickName,\n    avatar,\n  });\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;comments&quot;</span>, comments);\n  <span class=\"hljs-comment\">// æ³¨æ„2ï¼šè®¾ç½®çš„å±æ€§ä¼šè‡ªåŠ¨è½¬ä¸ºå­—ç¬¦ä¸²ï¼Œå¯¼è‡´ç»„ä»¶æ— æ³•è§£ææ•°æ®ï¼Œå› æ­¤éœ€è¦JSON.stringify</span>\n  reply.<span class=\"hljs-title function_\">setAttribute</span>(<span class=\"hljs-string\">&quot;comments&quot;</span>, <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">stringify</span>(comments));\n});\n</code></pre>\n<p>åŒæ ·æœ‰ä¸¤ä¸ªæ³¨æ„ç‚¹ï¼š</p>\n<ol>\n<li><p>éœ€è¦å…ˆè·å–å½“å‰ç»„ä»¶ï¼Œç„¶å<strong>åœ¨å½“å‰ç»„ä»¶ä¸Šæ·»åŠ ç›‘å¬</strong></p>\n</li>\n<li><p>ç»„ä»¶çš„å±æ€§ä¼šè‡ªåŠ¨å°†è®¾ç½®çš„å€¼è½¬ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼Œå› æ­¤éœ€è¦å…ˆ<code>JSON.stringify</code></p>\n</li>\n</ol>\n<p>æœ€åï¼Œå®Œæˆæ¸²æŸ“æ¯ä¸€æ¡è¯„è®ºçš„ä»£ç </p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-title function_\">renderComments</span>(<span class=\"hljs-params\">comments</span>) {\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Comment</span> = (<span class=\"hljs-params\">{ avatar, nickName, comment }</span>) =&gt; (<span class=\"hljs-string\">`\n    ...\n  `</span>);\n  <span class=\"hljs-keyword\">const</span> commentsContainer = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">shadowRoot</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&#x27;#commentsContainer&#x27;</span>);\n  commentsContainer.<span class=\"hljs-property\">innerHTML</span> = comments.<span class=\"hljs-title function_\">reduce</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">acc, cur</span>) =&gt;</span> <span class=\"hljs-string\">`<span class=\"hljs-subst\">${acc}</span><span class=\"hljs-subst\">${Comment(cur)}</span>`</span>, <span class=\"hljs-string\">&#x27;&#x27;</span>);\n}\n</code></pre>\n<p>è¯¥å‡½æ•°ä¼šåœ¨<code>attributeChangedCallback</code>ç›‘å¬åˆ°<code>comments</code>å˜åŒ–æ—¶è°ƒç”¨ï¼Œæ¸²æŸ“å‡ºæœ€æ–°çš„è¯„è®º</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-title function_\">attributeChangedCallback</span>(<span class=\"hljs-params\">name, oldValue, newValue</span>) {\n  <span class=\"hljs-keyword\">if</span> (name === <span class=\"hljs-string\">&#x27;comments&#x27;</span>) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">renderComments</span>(<span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">parse</span>(newValue));\n  }\n}\n</code></pre>\n<p>æœ€åçš„æ•ˆæœ</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/reply.gif\" alt=\"web component reply\"></p>\n<p>ğŸ‰</p>\n<p>psï¼šè¯¥ç»„ä»¶è¿˜æœ‰ä¸å°‘å¾…å®Œå–„çš„åœ°æ–¹ï¼šæäº¤æŒ‰é’®æ²¡æœ‰<code>loading</code>ã€æ²¡æœ‰æ ¡éªŒè¾“å…¥å€¼ï¼Œæ•°æ®å®‰å…¨æ€§è¾ƒä½ï¼Œå­˜åœ¨ XSS æ”»å‡»çš„éšæ‚£ã€å†™æ­»æäº¤æ—¶é—´ç­‰ï¼Œè¿™äº›éƒ½ä¼šåœ¨åé¢æ…¢æ…¢å®Œå–„</p>\n<p>å®Œæ•´ä»£ç <a href=\"https://github.com/mrrs878/web-components/blob/main/reply.html\">åœ¨è¿™é‡Œ</a></p>\n<h2 id=\"æ€»ç»“\">æ€»ç»“</h2>\n<p>Web Component å¯ç”¨æ¥å¼€å‘è·¨æ¡†æ¶ç»„ä»¶ï¼Œç‰¹æ€§åŸºæœ¬å¤Ÿç”¨ï¼Œä½¿ç”¨èµ·æ¥ä¹ŸæŒºæ–¹ä¾¿ï¼Œåªæ˜¯å¼€å‘ä½“éªŒæœ‰å¾…æé«˜ï¼Œéœ€è¦ä¸åœåœ°ä½¿ç”¨åŸç”Ÿ api æ“ä½œ domï¼›å…¶æ¬¡ï¼Œä½¿ç”¨è‡ªå®šä¹‰äº‹ä»¶æ¥å®ç°ç»„ä»¶é—´é€šä¿¡ï¼Œä»£ç é‡æœ‰ç‚¹å¤šï¼ˆå¯èƒ½è¿˜æœ‰æ›´å¥½çš„æ–¹æ³•æˆ‘æ²¡æ‰¾åˆ° ğŸ¤”ï¼‰ã€‚</p>\n<p>æ€»ä½“æ¥è¯´ï¼Œä½¿ç”¨ Web Component æ¥å¼€å‘ä¸€å¥—ç»„ä»¶åº“ä¹Ÿæ˜¯ä¸€ç§æ–°çš„çš„æ€è·¯ï¼Œæ–°çš„é€‰æ‹©ï¼Œå€¼å¾—å°è¯•</p>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/Web_Components\">MDN-Web Components</a></p>\n<p><a href=\"https://github.com/mdn/web-components-examples\">MDN/web-components-examples</a></p>\n"},{"title":"æ£€æµ‹è‡ªå®šä¹‰å­—ä½“æ˜¯å¦åŠ è½½","tags":["web-font","åçˆ¬è™«","å®‰å…¨"],"categories":"åçˆ¬è™«","description":"æˆ‘ä»¬å¯ä»¥é€šè¿‡åŠ è½½è‡ªå®šä¹‰å­—ä½“æ¥å®ç°å­—ä½“åçˆ¬è™«ï¼Œé‚£ä¹ˆå¦‚ä½•æ£€æµ‹å­—ä½“æ˜¯å¦æ­£å¸¸åŠ è½½å‘¢ï¼Ÿ\n\næœ‰å‡ ä¸ªç»´åº¦çš„æ£€æµ‹ï¼š\n\n1. æ£€æµ‹å­—ä½“æ˜¯å¦åŠ è½½æˆåŠŸ\n\n2. æ£€æµ‹å†…å®¹æ˜¯å¦æ­£å¸¸æ¸²æŸ“\n\n## æ£€æµ‹å­—ä½“æ˜¯å¦åŠ è½½\n\næœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨æµè§ˆå™¨æä¾›çš„[FontFaceSet API](https://developer.mozilla.org/zh-CN/docs/Web/API/FontFaceSet)æ¥æ£€æµ‹ï¼Œå…¶ä¸­è¦ç”¨åˆ°çš„","createDate":"2022-04-18 20:52:22","updateDate":"2022-04-18 21:32:33","body":"<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡åŠ è½½è‡ªå®šä¹‰å­—ä½“æ¥å®ç°å­—ä½“åçˆ¬è™«ï¼Œé‚£ä¹ˆå¦‚ä½•æ£€æµ‹å­—ä½“æ˜¯å¦æ­£å¸¸åŠ è½½å‘¢ï¼Ÿ</p>\n<p>æœ‰å‡ ä¸ªç»´åº¦çš„æ£€æµ‹ï¼š</p>\n<ol>\n<li><p>æ£€æµ‹å­—ä½“æ˜¯å¦åŠ è½½æˆåŠŸ</p>\n</li>\n<li><p>æ£€æµ‹å†…å®¹æ˜¯å¦æ­£å¸¸æ¸²æŸ“</p>\n</li>\n</ol>\n<h2 id=\"æ£€æµ‹å­—ä½“æ˜¯å¦åŠ è½½\">æ£€æµ‹å­—ä½“æ˜¯å¦åŠ è½½</h2>\n<p>æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨æµè§ˆå™¨æä¾›çš„<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/FontFaceSet\">FontFaceSet API</a>æ¥æ£€æµ‹ï¼Œå…¶ä¸­è¦ç”¨åˆ°çš„æ˜¯<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/FontFaceSet/check\">FontFaceSet.check()</a></p>\n<blockquote>\n<p>FontFaceSet çš„check()æ–¹æ³•ä¼šè¿”å›æ˜¯å¦åœ¨ç»™å®šçš„å­—ä½“åˆ—è¡¨ä¸­çš„æ‰€æœ‰å­—ä½“å·²ç»è¢«åŠ è½½å¹¶å¯ç”¨ã€‚--MDN</p>\n</blockquote>\n<p>ç¤ºä¾‹ï¼š</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">fonts</span>.<span class=\"hljs-title function_\">check</span>(<span class=\"hljs-string\">&quot;12px courier&quot;</span>);\n\n<span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">fonts</span>.<span class=\"hljs-title function_\">check</span>(<span class=\"hljs-string\">&quot;12px MyFont&quot;</span>ï¼Œ<span class=\"hljs-string\">&quot;ÃŸ&quot;</span>); <span class=\"hljs-comment\">// å¦‚æœå­—ä½“â€œMyFontâ€å…·æœ‰ÃŸå­—ç¬¦ï¼Œåˆ™è¿”å›trueã€‚</span>\n</code></pre>\n<p>ä½†è¿™ä¸ªæ£€æµ‹è¾ƒä¸ºç®€é™‹ï¼Œæ— æ³•æ£€æµ‹å­—ä½“é”™è¯¯çš„æƒ…å†µï¼ˆå­—ä½“æ­£å¸¸åŠ è½½ï¼Œä½†ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œé¡µé¢ä¸Šæ˜¾ç¤ºä¹±ç ï¼‰</p>\n<h2 id=\"æ£€æµ‹å†…å®¹æ˜¯å¦æ­£å¸¸æ¸²æŸ“\">æ£€æµ‹å†…å®¹æ˜¯å¦æ­£å¸¸æ¸²æŸ“</h2>\n<p>é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€äº›æ¯”è¾ƒéªšçš„æ“ä½œï¼š</p>\n<ol>\n<li><p>åˆ›å»ºä¸€ä¸ªspanæ ‡ç­¾</p>\n</li>\n<li><p>ç»™æ ‡ç­¾æ·»åŠ ç‰¹å®šå­—ç¬¦</p>\n</li>\n<li><p>é‡ç½®å­—ä½“æ ·å¼</p>\n</li>\n<li><p>åˆ†åˆ«æµ‹é‡åœ¨æ·»<code>font-family</code>å‰åæ ‡ç­¾å¤§å°</p>\n</li>\n<li><p>å¤§å°ä¸€è‡´ ? å­—ä½“åŠ è½½å¤±è´¥ : å­—ä½“åŠ è½½æˆåŠŸ</p>\n</li>\n</ol>\n<p>ï¼ˆè¿™é‡Œè¦åˆ›å»º<code>span</code>æ ‡ç­¾ï¼Œå¦‚æœæ˜¯<code>div</code>çš„è¯å®½åº¦é»˜è®¤å æ»¡ï¼Œæ— æ³•æµ‹é‡çœŸå®çš„å¤§å°ï¼‰</p>\n<p>ä½¿ç”¨ä»£ç è¡¨ç¤ºå°±æ˜¯ï¼š</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">/**\n * æ£€æµ‹å­—ä½“æ˜¯å¦æ­£å¸¸æ¸²æŸ“\n * <span class=\"hljs-doctag\">@param</span> {<span class=\"hljs-type\">string</span>} font å­—ä½“åç§°\n * <span class=\"hljs-doctag\">@param</span> {<span class=\"hljs-type\">Array&lt;string&gt;</span>} phrase å¾…åŒ¹é…çš„å­—ç¬¦\n * <span class=\"hljs-doctag\">@return</span> {<span class=\"hljs-type\">boolean</span>} æ˜¯å¦å­˜åœ¨è¯¥å­—ä½“\n */</span>\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">checkFont</span>(<span class=\"hljs-params\">font, phrase</span>) {\n\n  <span class=\"hljs-comment\">/**\n   * å¯ä»¥ä½¿ç”¨ä¸Šè¿°çš„ FontFaceSet API ä½œç®€è¦çš„åˆ¤æ–­ï¼Œå¦‚æœå­—ä½“éƒ½ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆè‚¯å®šæ¸²æŸ“å¤±è´¥\n   */</span>\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">fonts</span>) {\n    <span class=\"hljs-keyword\">const</span> fonts = [...<span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">fonts</span>];\n    <span class=\"hljs-keyword\">if</span> (fonts.<span class=\"hljs-title function_\">findIndex</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">f</span>) =&gt;</span> f.<span class=\"hljs-property\">family</span> === font) === -<span class=\"hljs-number\">1</span>) {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;font dose not exist&#x27;</span>);\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n    }\n  }\n\n  <span class=\"hljs-comment\">// åˆ›å»ºä¸€ä¸ªç©ºçš„ span æ ‡ç­¾æ¥å¡«å……å†…å®¹</span>\n  <span class=\"hljs-keyword\">let</span> node = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createElement</span>(<span class=\"hljs-string\">&quot;span&quot;</span>);\n\n  <span class=\"hljs-comment\">// å› ä¸ºå¯ä»¥åŒæ—¶æ£€æµ‹å¤šä¸ªå­—ç¬¦ï¼Œå› æ­¤éœ€è¦å­˜å‚¨ä¸€ä¸‹å„ä¸ªå­—ç¬¦çš„å¤§å°</span>\n  <span class=\"hljs-keyword\">const</span> sizes = [];\n\n  <span class=\"hljs-comment\">/**\n   * è®¡ç®—å•ä¸ªå­—ç¬¦çš„å°ºå¯¸\n   * <span class=\"hljs-doctag\">@param</span> {<span class=\"hljs-type\">string</span>} char å¾…è®¡ç®—çš„å­—ç¬¦\n   */</span>\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">checkChar</span>(<span class=\"hljs-params\">char</span>) {\n    <span class=\"hljs-comment\">// é‡ç½®å­—ä½“</span>\n    node.<span class=\"hljs-property\">style</span>.<span class=\"hljs-property\">fontFamily</span> = <span class=\"hljs-string\">&quot;sans-serif&quot;</span>;\n    \n    <span class=\"hljs-comment\">// å¡«å……å†…å®¹</span>\n    node.<span class=\"hljs-property\">innerHTML</span> = char;\n\n    <span class=\"hljs-keyword\">const</span> size = {};\n\n    <span class=\"hljs-comment\">// å…ˆä¿å­˜æœªè®¾ç½®å­—ä½“æ—¶çš„å°ºå¯¸</span>\n    size.<span class=\"hljs-property\">withoutFont</span> = {\n      <span class=\"hljs-attr\">width</span>: node.<span class=\"hljs-property\">offsetWidth</span>,\n      <span class=\"hljs-attr\">height</span>: node.<span class=\"hljs-property\">offsetHeight</span>,\n    };\n\n    <span class=\"hljs-comment\">// è®¾ç½®å¾…æ£€æµ‹çš„å­—ä½“</span>\n    node.<span class=\"hljs-property\">style</span>.<span class=\"hljs-property\">fontFamily</span> = font + <span class=\"hljs-string\">&quot;, sans-serif&quot;</span>;\n\n    <span class=\"hljs-comment\">// ä¿å­˜è®¾ç½®å­—ä½“åçš„å°ºå¯¸</span>\n    size.<span class=\"hljs-property\">withFont</span> = {\n      <span class=\"hljs-attr\">width</span>: node.<span class=\"hljs-property\">offsetWidth</span>,\n      <span class=\"hljs-attr\">height</span>: node.<span class=\"hljs-property\">offsetHeight</span>,\n    };\n\n    <span class=\"hljs-comment\">// ä¿å­˜è¯¥å­—ç¬¦è®¾ç½®å­—ä½“/æœªè®¾ç½®å­—ä½“æ—¶çš„å°ºå¯¸ï¼Œå¾…å­—ç¬¦è®¡ç®—å®Œæ¯•åç»Ÿä¸€è®¡ç®—</span>\n    sizes.<span class=\"hljs-title function_\">push</span>(size);\n  }\n\n  <span class=\"hljs-comment\">// éšè—è¯¥ span æ ‡ç­¾</span>\n  node.<span class=\"hljs-property\">style</span>.<span class=\"hljs-property\">position</span> = <span class=\"hljs-string\">&quot;absolute&quot;</span>;\n  node.<span class=\"hljs-property\">style</span>.<span class=\"hljs-property\">left</span> = <span class=\"hljs-string\">&quot;-10000px&quot;</span>;\n  node.<span class=\"hljs-property\">style</span>.<span class=\"hljs-property\">top</span> = <span class=\"hljs-string\">&quot;-10000px&quot;</span>;\n\n  <span class=\"hljs-comment\">// å­—ä½“å¤§å°è®¾ç½®å¤§äº›è¯¯å·®å°ï¼ˆoffsetWidthå’ŒoffsetHeightä¼šå››èˆäº”å…¥ï¼‰</span>\n  node.<span class=\"hljs-property\">style</span>.<span class=\"hljs-property\">fontSize</span> = <span class=\"hljs-string\">&quot;300px&quot;</span>;\n\n  <span class=\"hljs-comment\">// é‡ç½®å­—ä½“æ ·å¼</span>\n  node.<span class=\"hljs-property\">style</span>.<span class=\"hljs-property\">fontFamily</span> = <span class=\"hljs-string\">&quot;sans-serif&quot;</span>;\n  node.<span class=\"hljs-property\">style</span>.<span class=\"hljs-property\">fontVariant</span> = <span class=\"hljs-string\">&quot;normal&quot;</span>;\n  node.<span class=\"hljs-property\">style</span>.<span class=\"hljs-property\">fontStyle</span> = <span class=\"hljs-string\">&quot;normal&quot;</span>;\n  node.<span class=\"hljs-property\">style</span>.<span class=\"hljs-property\">fontWeight</span> = <span class=\"hljs-string\">&quot;normal&quot;</span>;\n  node.<span class=\"hljs-property\">style</span>.<span class=\"hljs-property\">letterSpacing</span> = <span class=\"hljs-string\">&quot;0&quot;</span>;\n\n  <span class=\"hljs-comment\">// æ’å…¥é¡µé¢ä¸­æ‰ä¼šæœ‰ offsetWidth å’Œ offsetHeight</span>\n  <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">body</span>.<span class=\"hljs-title function_\">appendChild</span>(node);\n\n  <span class=\"hljs-comment\">// è®¡ç®—æ¯ä¸€ä¸ªå­—ç¬¦çš„å°ºå¯¸</span>\n  phrase.<span class=\"hljs-title function_\">forEach</span>(checkChar);\n\n  <span class=\"hljs-comment\">/**\n   * 1. å½“ offsetWidth å’Œ offsetHeight å‡ä¸ç›¸åŒæ—¶è¯´æ˜å­—ä½“å­˜åœ¨\n   * 2. æœ‰ä¸€ä¸ªå­—ç¬¦çš„å°ºå¯¸ç›¸åŒå°±è¯´æ˜å­—ä½“æœ‰è¯¯\n   */</span>\n  <span class=\"hljs-keyword\">const</span> res =\n    node &amp;&amp;\n    sizes.<span class=\"hljs-title function_\">reduce</span>(\n      <span class=\"hljs-function\">(<span class=\"hljs-params\">acc, cur</span>) =&gt;</span>\n        acc &amp;&amp;\n        (cur.<span class=\"hljs-property\">withFont</span>.<span class=\"hljs-property\">width</span> !== cur.<span class=\"hljs-property\">withoutFont</span>.<span class=\"hljs-property\">width</span> ||\n          cur.<span class=\"hljs-property\">withFont</span>.<span class=\"hljs-property\">height</span> !== cur.<span class=\"hljs-property\">withoutFont</span>.<span class=\"hljs-property\">height</span>),\n      <span class=\"hljs-literal\">true</span>\n    );\n\n  <span class=\"hljs-comment\">// åšä¸€äº›å–„åå·¥ä½œ</span>\n  node.<span class=\"hljs-property\">parentNode</span>.<span class=\"hljs-title function_\">removeChild</span>(node);\n  node = <span class=\"hljs-literal\">null</span>;\n\n  <span class=\"hljs-keyword\">return</span> res;\n}\n</code></pre>\n<h2 id=\"æŒ‡æ•°é€€é¿ç®—æ³•æ£€æµ‹å†…å®¹æ˜¯å¦æ­£å¸¸æ¸²æŸ“\">æŒ‡æ•°é€€é¿ç®—æ³•æ£€æµ‹å†…å®¹æ˜¯å¦æ­£å¸¸æ¸²æŸ“</h2>\n<p>ç”±äºç½‘ç»œå­—ä½“çš„åŠ è½½éœ€è¦æ—¶é—´ï¼Œæˆ‘ä»¬å¯é€šè¿‡ç®€å•åœ°è®¾ç½®ä¸€ä¸ªå»¶æ—¶è°ƒç”¨ä¸Šè¿°çš„<code>checkFont</code>ï¼Œä½†å¯èƒ½æœ‰æ›´å¥½çš„æ–¹å¼æ¥å®ç°ï¼š<a href=\"https://cloud.google.com/memorystore/docs/redis/exponential-backoff?hl=zh-cn\">æŒ‡æ•°é€€é¿ç®—æ³•</a></p>\n<p>ï¼ˆè‡ªå·±ç†è§£ï¼‰ç®€å•æ¥è®²å°±æ˜¯åœ¨ä¸è¶…è¿‡æ‰€è®¾ç½®çš„æ—¶é—´èŒƒå›´å†…ï¼Œä»¥æŒ‡æ•°çº§è¶…å¸‚æ—¶é—´å®šæœŸé‡è¯•</p>\n<p>ç¤ºä¾‹ï¼š</p>\n<ol>\n<li><p>å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚</p>\n</li>\n<li><p>å¤±è´¥ï¼Ÿç­‰å¾…1ç§’åé‡è¯•</p>\n</li>\n<li><p>å¤±è´¥ï¼Ÿç­‰å¾…2ç§’åé‡è¯•</p>\n</li>\n<li><p>å¤±è´¥ï¼Ÿç­‰å¾…4ç§’åé‡è¯•</p>\n</li>\n<li><p>å¤±è´¥ï¼Ÿç­‰å¾…8ç§’åé‡è¯•</p>\n</li>\n<li><p>ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°è¾¾åˆ°è¶…æ—¶æ—¶é—´</p>\n</li>\n</ol>\n<p>åœ¨æ£€æµ‹å­—ä½“æ˜¯å¦æ­£å¸¸åŠ è½½æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨è¯¥ç®—æ³•æ¥æ›´å¥½åœ°æ£€æµ‹</p>\n<p>ï¼ˆä¹Ÿå¯ä½¿ç”¨<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/FontFaceSet/loadingdone_event\">FontFaceSet: loadingdone event</a>æ¥ä½œä¸ºæ—¶é—´ç‚¹æ£€æµ‹ï¼‰</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">check</span> = (<span class=\"hljs-params\">phrase, options = { timeout: <span class=\"hljs-number\">8192</span> }</span>) =&gt; {\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">doCheck</span>(<span class=\"hljs-params\">t</span>) {\n    <span class=\"hljs-keyword\">let</span> tid = <span class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-function\">() =&gt;</span> {\n      <span class=\"hljs-built_in\">clearTimeout</span>(tid);\n      tid = <span class=\"hljs-literal\">null</span>;\n      <span class=\"hljs-keyword\">const</span> res = <span class=\"hljs-title function_\">checkFont</span>(<span class=\"hljs-string\">&quot;m-font&quot;</span>, phrase);\n      <span class=\"hljs-keyword\">if</span> (res) {\n        <span class=\"hljs-comment\">// success!</span>\n      }\n      <span class=\"hljs-keyword\">if</span> (!res &amp;&amp; (t &lt;&lt; <span class=\"hljs-number\">1</span> &lt; options.<span class=\"hljs-property\">timeout</span>)) {\n        <span class=\"hljs-title function_\">doCheck</span>(t &lt;&lt; <span class=\"hljs-number\">1</span>);\n      }\n      <span class=\"hljs-keyword\">if</span> (!res &amp;&amp; (t &lt;&lt; <span class=\"hljs-number\">1</span>) &gt;= options.<span class=\"hljs-property\">timeout</span>) {\n        <span class=\"hljs-comment\">// parse error!</span>\n      }\n    }, t);\n  }\n\n  <span class=\"hljs-comment\">// æˆ‘ä»¬å¯ä»¥ä»¥64msä¸ºèµ·å§‹æ—¶é—´ç‚¹</span>\n  <span class=\"hljs-title function_\">doCheck</span>(<span class=\"hljs-number\">2</span> &lt;&lt; <span class=\"hljs-number\">5</span>);\n};\n</code></pre>\n<h2 id=\"æ€»ç»“\">æ€»ç»“</h2>\n<ol>\n<li><p>å¯ä½¿ç”¨<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/FontFaceSet\">FontFaceSet API</a>æ¥åšç®€å•çš„å­—ä½“æ˜¯å¦åŠ è½½åˆ¤æ–­ï¼Œä½†æ— æ³•æ£€æµ‹å­—ä½“æ˜¯å¦æ­£å¸¸æ¸²æŸ“</p>\n</li>\n<li><p>ä¸åŒå­—ä½“ä¸‹ï¼Œå¤§æ¦‚ç‡å„ä¸ªå­—ç¬¦çš„å¤§å°æ˜¯ä¸ä¸€æ ·çš„ï¼Œå¯ä¾æ¬¡æ¥æ£€æµ‹å­—ä½“æ˜¯å¦æ­£å¸¸æ¸²æŸ“</p>\n</li>\n</ol>\n<p>ç»“æŸï¼</p>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/FontFaceSet\">FontFaceSet API</a></p>\n<p><a href=\"https://stackoverflow.com/questions/65095157/how-can-i-detect-when-a-font-is-downloaded-via-csss-unicode-range-descriptor\">How can I detect when a font is downloaded via CSS&#39;s &quot;unicode-range&quot; descriptor? </a></p>\n<p><a href=\"https://cloud.google.com/memorystore/docs/redis/exponential-backoff?hl=zh-cn\">æŒ‡æ•°é€€é¿ç®—æ³•</a></p>\n"},{"title":"Gitå­¦ä¹ -ä¿®æ”¹å†å²commit","tags":["Git","rebase"],"categories":"Git","description":"æœ‰æ—¶å€™æˆ‘ä»¬åœ¨æäº¤ä»£ç æ—¶é€‰é”™äº†gitè´¦å·æˆ–è€…åˆå§‹åŒ–ä»“åº“æ—¶æ²¡æœ‰é…ç½®gitè´¦å·ï¼Œæ°å¥½ä½ ä¹Ÿå¿½ç•¥æ‰äº†gitçš„æç¤ºï¼š\n\n``` shell\nYour name and email address were configured automatically based\non your username and hostname. Please check that they are accurate.\nYo","createDate":"2022-04-17 20:42:00","updateDate":"2022-04-17 21:35:28","body":"<p>æœ‰æ—¶å€™æˆ‘ä»¬åœ¨æäº¤ä»£ç æ—¶é€‰é”™äº†gitè´¦å·æˆ–è€…åˆå§‹åŒ–ä»“åº“æ—¶æ²¡æœ‰é…ç½®gitè´¦å·ï¼Œæ°å¥½ä½ ä¹Ÿå¿½ç•¥æ‰äº†gitçš„æç¤ºï¼š</p>\n<pre><code class=\"hljs language-shell\">Your name and email address were configured automatically based\non your username and hostname. Please check that they are accurate.\nYou can suppress this message by setting them explicitly:\n\n    git config --global user.name &quot;Your Name&quot;\n    git config --global user.email you@example.com\n\nAfter doing this, you may fix the identity used for this commit with:\n\n    git commit --amend --reset-author\n</code></pre>\n<p>åœ¨è¿™ä¹‹åï¼Œä½ å¯èƒ½åˆè¿›è¡Œäº†å‡ æ¬¡æäº¤......</p>\n<p>æŸä¸€æ—¶åˆ»ä½ çªç„¶æ„è¯†åˆ°å¥½åƒæœ‰ä»€ä¹ˆä¸å¯¹åŠ²ğŸ¤”</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/shiqingbingbujiandan.jpeg\" alt=\"äº‹æƒ…å¹¶ä¸ç®€å•\"></p>\n<p>æ…Œå¿™ä¸­æ‰§è¡Œäº†ä¸€ä¸‹<code>git log</code></p>\n<pre><code class=\"hljs language-shell\">git log\n\ncommit b9955bf47f6437c2d72daf99e809737bbb79f2e1 (HEAD -&gt; master)\nAuthor: echo &lt;echo@echodeMBP.lan&gt;\nDate:   Sun Apr 17 20:49:01 2022 +0800\n\n    fix: fix 1.1\n\ncommit ee0c985a1f158dcfe72b319727f401ae0742ed23\nAuthor: echo &lt;echo@echodeMBP.lan&gt;\nDate:   Sun Apr 17 20:48:44 2022 +0800\n\n    fix: fix 1.0\n\ncommit f6bac54c00f6b869894e8214aae7b8aaacdec5d5\nAuthor: echo &lt;echo@echodeMBP.lan&gt;\nDate:   Sun Apr 17 20:47:23 2022 +0800\n\n    feat: 1.0\n</code></pre>\n<p>å¯„äº†ğŸ™</p>\n<p><code>Author</code>å…¨æ˜¯å¦ä¸€ä¸ªï¼Œå‡è®¾åˆšå¥½ä½ çš„å›¢é˜Ÿæ˜¯æŒ‰ç…§ bugæ•°/ä»£ç é‡ æ¥è¿›è¡Œä»£ç è´¨é‡è¯„ä¼°çš„ï¼Œé‚£ç°åœ¨å²‚ä¸æ˜¯è‡ªå·±ç»™è‡ªå·±æŒ–å‘ï¼Œå¼ºè¡Œæ‹‰ä½åˆ†æ¯</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/wtmlaji.jpeg\" alt=\"æˆ‘tmæ€ä¹ˆè¿™ä¹ˆåƒåœ¾\"></p>\n<p>ç¨³ä½åˆ«æ…Œï¼Œé—®é¢˜ä¸å¤§ã€‚gitè¿™ä¹ˆç‰›é€¼çš„ä¸œè¥¿æ€ä¹ˆå¯èƒ½æ²¡æƒ³åˆ°æˆ‘ä»¬è¿™ç§å‚»ç“œæ“ä½œå‘¢ï¼Ÿæ¥ä¸‹æ¥æˆ‘ä¼šåˆ†å‡ ç§ä¸åŒçš„æƒ…å†µåˆ†åˆ«ç»™å‡ºè§£å†³æ–¹æ¡ˆ</p>\n<p>é¦–å…ˆï¼Œæ„Ÿè°¢ç¥–å¸ˆçˆ·ï¼</p>\n<h2 id=\"åªä¿®æ”¹æœ€åä¸€æ¬¡æäº¤\">åªä¿®æ”¹æœ€åä¸€æ¬¡æäº¤</h2>\n<p>å‡å¦‚ä½ åªæ˜¯æäº¤äº†ä¸€æ¬¡å°±å‘ç°ä¸å¯¹åŠ²ï¼Œé‚£ä¹ˆä½ å¯ä»¥å¾ˆç®€å•åœ°æŒ½æ•‘å›æ¥ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ï¼š</p>\n<pre><code class=\"hljs language-shell\"><span class=\"hljs-meta\"># </span><span class=\"language-bash\">æ³¨æ„é‚®ç®±éœ€åŒ…æ‹¬&lt;&gt;å°–æ‹¬å·</span>\ngit commit --amend --author=&quot;NewAuthor &lt;NewEmail@address.com&gt;&quot;\n</code></pre>\n<p>æˆ–è€…åœ¨é¡¹ç›®ç›®å½•ä¸‹é…ç½®å¥½gitè´¦å·åæ‰§è¡Œï¼š</p>\n<pre><code class=\"hljs language-shell\">git commit --amend --reset-author\n</code></pre>\n<p>æ­¤æ—¶<code>git log</code>é•¿è¿™æ ·</p>\n<pre><code class=\"hljs language-shell\">git log\n\ncommit 8b7c9afb16d25a89cb2d8c3d864e8422c088966c (HEAD -&gt; master)\nAuthor: mrrs878 &lt;mrrs878@foxmail.com&gt;\nDate:   Sun Apr 17 20:49:01 2022 +0800\n\n    fix: fix 1.1\n\ncommit ee0c985a1f158dcfe72b319727f401ae0742ed23\nAuthor: echo &lt;echo@echodeMBP.lan&gt;\nDate:   Sun Apr 17 20:48:44 2022 +0800\n\n    fix: fix 1.0\n\ncommit f6bac54c00f6b869894e8214aae7b8aaacdec5d5\nAuthor: echo &lt;echo@echodeMBP.lan&gt;\nDate:   Sun Apr 17 20:47:23 2022 +0800\n\n    feat: 1.0\n</code></pre>\n<p>å¥½è€¶ï¼ğŸ‰</p>\n<p>é‚£å‡å¦‚ä½ æ˜¯æäº¤äº†å¥½å‡ æ¬¡æ‰è®°èµ·æ¥äº†å‘¢</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/cangtianna.png\" alt=\"è‹å¤©å‘\"></p>\n<h2 id=\"ä¿®æ”¹å†å²æäº¤\">ä¿®æ”¹å†å²æäº¤</h2>\n<p>ä¾æ—§ç¨³ä½åˆ«æ…Œï¼Œé—®é¢˜ä¸å¤§</p>\n<p>æ­¤æ—¶å°±è¦ç¥­å‡º<code>git rebase</code>äº†</p>\n<p>å‡å¦‚ä½ çš„<code>git log</code>é•¿è¿™æ ·</p>\n<pre><code class=\"hljs language-shell\">git log\n\ncommit 8b7c9afb16d25a89cb2d8c3d864e8422c088966c (HEAD -&gt; master)\nAuthor: mrrs878 &lt;mrrs878@foxmail.com&gt;\nDate:   Sun Apr 17 20:49:01 2022 +0800\n\n    fix: fix 1.1\n\ncommit ee0c985a1f158dcfe72b319727f401ae0742ed23\nAuthor: echo &lt;echo@echodeMBP.lan&gt;\nDate:   Sun Apr 17 20:48:44 2022 +0800\n\n    fix: fix 1.0\n\ncommit f6bac54c00f6b869894e8214aae7b8aaacdec5d5\nAuthor: echo &lt;echo@echodeMBP.lan&gt;\nDate:   Sun Apr 17 20:47:23 2022 +0800\n\n    feat: 1.0\n</code></pre>\n<p>ï¼ˆæ²¡é”™ï¼Œæˆ‘è¿˜æ˜¯æ‹¿çš„ä¸Šé¢ä¸¾ä¾‹å­ğŸ‘†ï¼‰</p>\n<p>å‡å¦‚ä½ è¦ä¿®å¤<code>commit message</code>ä¸º<code>fix: fix 1.0</code>çš„è¿™ä¸ª<code>commit</code>ï¼Œæ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼š</p>\n<pre><code class=\"hljs language-shell\"><span class=\"hljs-meta\"># </span><span class=\"language-bash\">-i åé¢è·Ÿçš„æ˜¯fix: fix1.0ä¹‹å‰çš„ä¸€ä¸ªcommitçš„<span class=\"hljs-built_in\">hash</span></span>\ngit rebase -i f6bac54c00f6b869894e8214aae7b8aaacdec5d5\n</code></pre>\n<p>æˆ–è€…è¿™æ ·:</p>\n<pre><code class=\"hljs language-shell\"><span class=\"hljs-meta\"># </span><span class=\"language-bash\">HEAD~2 è¡¨ç¤ºåé€€ä¸¤æ­¥</span>\ngit rebase -i HEAD~2\n</code></pre>\n<p>ï¼ˆæ¨èç›´æ¥å†™hashå€¼ï¼Œå½“ä½ çš„commitè½åå¤ªå¤šä¸å¥½è®¡ç®—ğŸ¤£ï¼‰</p>\n<p>æ­¤æ—¶ä½ çš„ç»ˆç«¯å¤§æ¦‚ç‡å¯èƒ½ä¼šå˜æˆè¿™æ ·ï¼š</p>\n<pre><code class=\"hljs language-shell\">echo@echodeMBP î‚° ~/Frontend/test/git-commit-change î‚° â¦ ee0c985 &gt;R&gt; î‚°\n</code></pre>\n<p>è¿™ä¸¤ä¸ªå‘½ä»¤æ‰§è¡Œçš„ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ï¼š</p>\n<pre><code class=\"hljs language-shell\">pick ee0c985 fix: fix 1.0\npick 8b7c9af fix: fix 1.1\n<span class=\"hljs-meta\">\n# </span><span class=\"language-bash\">Rebase f6bac54..8b7c9af onto f6bac54 (2 commands)</span>\n<span class=\"hljs-meta\">#</span><span class=\"language-bash\">\n<span class=\"hljs-comment\"># Commands:</span></span>\n<span class=\"hljs-meta\"># </span><span class=\"language-bash\">p, pick &lt;commit&gt; = use commit</span>\n<span class=\"hljs-meta\"># </span><span class=\"language-bash\">r, reword &lt;commit&gt; = use commit, but edit the commit message</span>\n<span class=\"hljs-meta\"># </span><span class=\"language-bash\">e, edit &lt;commit&gt; = use commit, but stop <span class=\"hljs-keyword\">for</span> amending</span>\n<span class=\"hljs-meta\"># </span><span class=\"language-bash\">s, squash &lt;commit&gt; = use commit, but meld into previous commit</span>\n<span class=\"hljs-meta\"># </span><span class=\"language-bash\">f, fixup [-C | -c] &lt;commit&gt; = like <span class=\"hljs-string\">&quot;squash&quot;</span> but keep only the previous</span>\n<span class=\"hljs-meta\"># </span><span class=\"language-bash\">                   commit<span class=\"hljs-string\">&#x27;s log message, unless -C is used, in which case</span></span>\n<span class=\"hljs-meta\"># </span><span class=\"language-bash\"><span class=\"hljs-string\">                   keep only this commit&#x27;</span>s message; -c is same as -C but</span>\n<span class=\"hljs-meta\"># </span><span class=\"language-bash\">                   opens the editor</span>\n<span class=\"hljs-meta\"># </span><span class=\"language-bash\">x, <span class=\"hljs-built_in\">exec</span> &lt;<span class=\"hljs-built_in\">command</span>&gt; = run <span class=\"hljs-built_in\">command</span> (the rest of the line) using shell</span>\n<span class=\"hljs-meta\"># </span><span class=\"language-bash\">b, <span class=\"hljs-built_in\">break</span> = stop here (<span class=\"hljs-built_in\">continue</span> rebase later with <span class=\"hljs-string\">&#x27;git rebase --continue&#x27;</span>)</span>\n<span class=\"hljs-meta\"># </span><span class=\"language-bash\">d, drop &lt;commit&gt; = remove commit</span>\n<span class=\"hljs-meta\"># </span><span class=\"language-bash\">l, label &lt;label&gt; = label current HEAD with a name</span>\n<span class=\"hljs-meta\"># </span><span class=\"language-bash\">t, reset &lt;label&gt; = reset HEAD to a label</span>\n<span class=\"hljs-meta\"># </span><span class=\"language-bash\">m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [<span class=\"hljs-comment\"># &lt;oneline&gt;]</span></span>\n</code></pre>\n<p>æ­¤æ—¶ä¼šè¿›å…¥å‘½ä»¤è¡Œäº¤äº’çŠ¶æ€</p>\n<p>å…‰æ ‡ç§»åŠ¨åˆ°é€‰æ‹©ä½ è¦ä¿®æ”¹çš„é‚£ä¸ª<code>commit</code>ï¼Œå¹¶å°†å‰æ–¹çš„<code>pick</code>æ”¹ä¸º<code>edit</code>ï¼Œç„¶å<code>:</code> + <code>wq</code>ä¿å­˜é€€å‡º</p>\n<p>æ­¤æ—¶ç»ˆç«¯ä¼šæ‰“å°è¿™ä¸ªæ¶ˆæ¯</p>\n<pre><code class=\"hljs language-shell\">Stopped at ee0c985...  fix: fix 1.0\nYou can amend the commit now, with\n\n  git commit --amend \n\nOnce you are satisfied with your changes, run\n\n  git rebase --continue\n</code></pre>\n<p>æ¥ç€æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼š</p>\n<pre><code class=\"hljs language-shell\">git commit --amend --reset-author\n</code></pre>\n<p>æˆ–è€…æœ€ä¸Šé¢é‚£ä¸ªï¼š</p>\n<pre><code class=\"hljs language-shell\">git commit --amend --author=&quot;NewAuthor &lt;NewEmail@address.com&gt;&quot;\n</code></pre>\n<p>æ­¤æ—¶åˆä¼šè¿›å…¥å‘½ä»¤è¡Œäº¤äº’ç•Œé¢ï¼Œç±»ä¼¼äºæ‰§è¡Œ<code>git commit -m &quot;xxxx&quot;</code>æ—¶ã€‚ç”±äºæˆ‘ä»¬ä»€ä¹ˆéƒ½æ²¡æ”¹ï¼Œå› æ­¤å¯ä»¥<code>:</code> + <code>wq</code>é€€å‡ºå³å¯</p>\n<p>æœ€åæ‰§è¡Œï¼š</p>\n<pre><code class=\"hljs language-shell\">git rebase --continue\n</code></pre>\n<p>è¿™æ—¶å€™å†<code>git log</code>ä¸€ä¸‹çœ‹çœ‹æ•ˆæœğŸ‘€</p>\n<pre><code class=\"hljs language-shell\">commit 24ff96047eeb5531841b1d93242af992b6e54fcc (HEAD -&gt; master)\nAuthor: mrrs878 &lt;mrrs878@foxmail.com&gt;\nDate:   Sun Apr 17 20:49:01 2022 +0800\n\n    fix: fix 1.1\n\ncommit 40074be6073f9f76817665d6de078143dbf6739d\nAuthor: mrrs878 &lt;mrrs878@foxmail.com&gt;\nDate:   Sun Apr 17 21:14:52 2022 +0800\n\n    fix: fix 1.0\n\ncommit f6bac54c00f6b869894e8214aae7b8aaacdec5d5\nAuthor: echo &lt;echo@echodeMBP.lan&gt;\nDate:   Sun Apr 17 20:47:23 2022 +0800\n\n    feat: 1.0\n</code></pre>\n<p>å¥½è€¶ï¼æˆåŠŸäº† ğŸ‰</p>\n<p>åˆ°è¿™é‡Œå¯ä»¥è§£å†³å¤§å¤šæ•°çš„äººçš„é—®é¢˜äº†ï¼Œé‚£å¯èƒ½ä¼šæœ‰äººé—®äº†ï¼Œå¦‚æœæˆ‘ä¸€å¼€å§‹å°±æ˜¯é”™çš„æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/male.jpeg\" alt=\"éº»äº†\"></p>\n<h2 id=\"ä¿®æ”¹ç¬¬ä¸€æ¬¡æäº¤\">ä¿®æ”¹ç¬¬ä¸€æ¬¡æäº¤</h2>\n<p>ä¾æ—§é—®é¢˜ä¸å¤§ï¼Œå°†ä¸Šé¢çš„</p>\n<pre><code class=\"hljs language-shell\">git rebase -i xxx\n</code></pre>\n<p>æ›¿æ¢æˆ</p>\n<pre><code class=\"hljs language-shell\">git rebase -i --root\n</code></pre>\n<p>è¿™æ—¶ä½ ä¼šå‘ç°å¯ä»¥ä¿®æ”¹ç¬¬ä¸€æ¬¡æäº¤äº†</p>\n<pre><code class=\"hljs language-shell\">pick f6bac54 feat: 1.0\npick 40074be fix: fix 1.0\npick 24ff960 fix: fix 1.1\n<span class=\"hljs-meta\">\n# </span><span class=\"language-bash\">Rebase 24ff960 onto fba660d (3 commands)</span>\n</code></pre>\n<p>æ¥ä¸‹æ¥çš„å°±ä¸ç”¨æˆ‘æ•™ä½ äº†å§</p>\n<h2 id=\"æ€»ç»“\">æ€»ç»“</h2>\n<ul>\n<li><p>å¦‚æœæ˜¯æœ€åä¸€æ¬¡æäº¤é”™è¯¯ï¼Œå¯ä»¥ç®€å•åœ°æ‰§è¡Œ<code>git commit --amend --author=&quot;NewAuthor &lt;NewEmail@address.com&gt;&quot;</code>æˆ–<code>git commit --amend --reset-author</code>æ¥ä¿®æ”¹ä¿¡æ¯</p>\n</li>\n<li><p>å¦‚æœæ˜¯æŸä¸€æ¬¡æäº¤é”™è¯¯ï¼Œå¯ä»¥é€šè¿‡<code>git rebase -i xxx</code> + ç¬¬ä¸€ç§çš„å‘½ä»¤æ¥ä¿®æ”¹ä¿¡æ¯</p>\n</li>\n<li><p>å¦‚æœè¦ä¿®æ”¹ç¬¬ä¸€æ¬¡æäº¤ï¼Œå¯ä»¥å°†ç¬¬äºŒç§çš„<code>git rebase -i xxx</code>æ›¿æ¢æˆ<code>git rebase -i --root</code>æ¥ä¿®æ”¹ä¿¡æ¯</p>\n</li>\n</ul>\n<p>ç»“æŸï¼</p>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://www.jianshu.com/p/51f5cbb81cae\">Gitä¿®æ”¹æäº¤å†å²ä¸­çš„ä½œè€…åŠé‚®ç®±ä¿¡æ¯</a></p>\n<p><a href=\"https://stackoverflow.com/questions/2246208/change-first-commit-of-project-with-git\">Change first commit of project with Git?</a></p>\n"},{"title":"webpackå­¦ä¹ -source-map","tags":["webpackä¼˜åŒ–","source-map"],"categories":"webpack","description":"## WHAT\n\næä¾›æ„å»ºåä»£ç åˆ°æºä»£ç çš„æ˜ å°„\n\næ¥æ”¶ä»¥ä¸‹å€¼ï¼š`[inline-|hidden-|eval-][nosources-][cheap-[module-]]source-map`\n\n- `source-map`: å¤–éƒ¨\n\n  é”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯ å’Œ æºä»£ç çš„é”™è¯¯ä½ç½®\n\n- `inline-source-map`: å†…è”\n\n  åªç”Ÿæˆ-ä¸ªå†…è”`source-map`\n\n  é”™è¯¯ä»£ç å‡†ç¡®ä¿¡","createDate":"2022-02-10 21:01:15","updateDate":"2022-02-10 21:56:03","body":"<h2 id=\"what\">WHAT</h2>\n<p>æä¾›æ„å»ºåä»£ç åˆ°æºä»£ç çš„æ˜ å°„</p>\n<p>æ¥æ”¶ä»¥ä¸‹å€¼ï¼š<code>[inline-|hidden-|eval-][nosources-][cheap-[module-]]source-map</code></p>\n<ul>\n<li><p><code>source-map</code>: å¤–éƒ¨</p>\n<p>é”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯ å’Œ æºä»£ç çš„é”™è¯¯ä½ç½®</p>\n</li>\n<li><p><code>inline-source-map</code>: å†…è”</p>\n<p>åªç”Ÿæˆ-ä¸ªå†…è”<code>source-map</code></p>\n<p>é”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯ å’Œ æºä»£ç çš„é”™è¯¯ä½ç½®</p>\n</li>\n<li><p><code>hidden-source-map</code>: å¤–éƒ¨</p>\n<p>é”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯</p>\n<p>ä¸èƒ½è¿½è¸ªæºä»£ç é”™è¯¯ï¼Œåªèƒ½æç¤ºåˆ°æ„å»ºåä»£ç çš„é”™è¯¯ä½ç½®</p>\n</li>\n<li><p><code>eval-source-map</code>: å†…è”</p>\n<p>æ¯ä¸€ä¸ªæ–‡ä»¶éƒ½ç”Ÿæˆå¯¹åº”çš„<code>source-map</code>, éƒ½åœ¨<code>eval</code>å‡½æ•°å†…</p>\n<p>é”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯ å’Œ æºä»£ç çš„é”™è¯¯ä½ç½®</p>\n</li>\n<li><p><code>nosources-source-map</code>: å¤–éƒ¨</p>\n<p>é”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯</p>\n</li>\n<li><p><code>cheap-source-map</code>: å¤–éƒ¨</p>\n<p>é”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯ å’Œ æºä»£ç çš„é”™è¯¯ä½ç½®</p>\n<p>åªèƒ½ç²¾ç¡®çš„è¡Œ</p>\n</li>\n</ul>\n<p>å†…è”å’Œå¤–éƒ¨çš„åŒºåˆ«: </p>\n<ol>\n<li>å¤–éƒ¨ç”Ÿæˆäº†æ–‡ä»¶ï¼Œå†…è”æ²¡æœ‰</li>\n<li>å†…è”æ„å»ºé€Ÿåº¦æ›´å¿«</li>\n</ol>\n<h2 id=\"why\">WHY</h2>\n<p>æ–¹ä¾¿è°ƒè¯•ã€å®šä½é”™è¯¯ä½ç½®</p>\n<h2 id=\"how\">HOW</h2>\n<p>åœ¨é…ç½®æ–‡ä»¶<code>webpack.config.js</code>ä¸­æ·»åŠ <code>devtool</code>é…ç½®</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// webpack.config.js</span>\n\n<span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {\n  <span class=\"hljs-attr\">devtool</span>: <span class=\"hljs-string\">&#x27;source-map&#x27;</span>,\n}\n</code></pre>\n<p>ç”Ÿäº§ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒæœ‰ä¸åŒçš„é…ç½®</p>\n<p>å¼€å‘ç¯å¢ƒ: é€Ÿåº¦å¿«ï¼Œè°ƒè¯•æ›´å‹å¥½</p>\n<ul>\n<li><p>é€Ÿåº¦å¿«(<code>eval</code> &gt; <code>inline</code> &gt; <code>cheap</code> &gt; <code>...</code>)</p>\n<ul>\n<li><p><code>eval-cheap-source-map</code></p>\n</li>\n<li><p><code>eval-source-map</code></p>\n</li>\n</ul>\n</li>\n<li><p>è°ƒè¯•æ›´å‹å¥½</p>\n<ul>\n<li><p><code>source-map</code></p>\n</li>\n<li><p><code>cheap-module-source-map</code></p>\n</li>\n<li><p><code>cheap-source-map</code></p>\n</li>\n</ul>\n</li>\n</ul>\n<p>  --&gt; <code>eval-source-map</code> / <code>eval-cheap-module-source-map</code></p>\n<p>ç”Ÿäº§ç¯å¢ƒ: æºä»£ç è¦ä¸è¦éšè—? è°ƒè¯•è¦ä¸è¦æ›´å‹å¥½?</p>\n"},{"title":"webpackå­¦ä¹ -HMR","tags":["webpackä¼˜åŒ–","HMR"],"categories":"webpack","description":"## WHAT\n\nHMR: (hot module replacement)çƒ­æ¨¡å—æ›¿æ¢/æ¨¡å—çƒ­æ›¿æ¢ï¼Œè§åæ€æ„ï¼Œå³æ— éœ€åˆ·æ–°åœ¨å†…å­˜ç¯å¢ƒä¸­å³å¯æ›¿æ¢æ‰è¿‡æ—§æ¨¡å—ã€‚ä¸ Live Reload ç›¸å¯¹åº”\n\n> PS: Live Reloadï¼Œå½“ä»£ç è¿›è¡Œæ›´æ–°åï¼Œåœ¨æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°ä»¥è·å–æœ€æ–°å‰ç«¯ä»£ç \n\n`*.css`: å¯ä»¥ä½¿ç”¨HMRåŠŸèƒ½ï¼Œå› ä¸º`style-loader`å†…éƒ¨å®ç°äº†\n\n`*.js`: é»˜è®¤ä¸èƒ½ä½¿ç”¨H","createDate":"2022-02-09 20:41:29","updateDate":"2022-02-09 21:03:52","body":"<h2 id=\"what\">WHAT</h2>\n<p>HMR: (hot module replacement)çƒ­æ¨¡å—æ›¿æ¢/æ¨¡å—çƒ­æ›¿æ¢ï¼Œè§åæ€æ„ï¼Œå³æ— éœ€åˆ·æ–°åœ¨å†…å­˜ç¯å¢ƒä¸­å³å¯æ›¿æ¢æ‰è¿‡æ—§æ¨¡å—ã€‚ä¸ Live Reload ç›¸å¯¹åº”</p>\n<blockquote>\n<p>PS: Live Reloadï¼Œå½“ä»£ç è¿›è¡Œæ›´æ–°åï¼Œåœ¨æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°ä»¥è·å–æœ€æ–°å‰ç«¯ä»£ç </p>\n</blockquote>\n<p><code>*.css</code>: å¯ä»¥ä½¿ç”¨HMRåŠŸèƒ½ï¼Œå› ä¸º<code>style-loader</code>å†…éƒ¨å®ç°äº†</p>\n<p><code>*.js</code>: é»˜è®¤ä¸èƒ½ä½¿ç”¨HMRåŠŸèƒ½ --&gt; éœ€è¦ä¿®æ”¹jsä»£ç ï¼Œæ·»åŠ æ”¯æŒHMRåŠŸèƒ½çš„ä»£ç \n    æ³¨æ„: HMRåŠŸèƒ½å¯¹<code>js</code>çš„å¤„ç†ï¼Œåªèƒ½å¤„ç†éå…¥å£<code>js</code>æ–‡ä»¶çš„å…¶ä»–æ–‡ä»¶</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// jsæ–‡ä»¶å¼€å¯HMR</span>\n<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">hot</span>) {\n    <span class=\"hljs-comment\">// éœ€è¦æ£€æµ‹çš„æ–‡ä»¶</span>\n    <span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">hot</span>.<span class=\"hljs-title function_\">accept</span>(<span class=\"hljs-string\">&#x27;path/to/HMRFile.js&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n        <span class=\"hljs-comment\">/*\n         * HMRFileæ–‡ä»¶å…³é”®é€»è¾‘\n        */</span> \n    })\n}\n</code></pre>\n<p><code>*.html</code>: é»˜è®¤ä¸èƒ½ä½¿ç”¨HMRåŠŸèƒ½ã€‚åŒæ—¶ä¼šå¯¼è‡´é—®é¢˜: <code>html</code>æ–‡ä»¶ä¸èƒ½çƒ­æ›´æ–°äº† (<strong>æ²¡å¿…è¦åšHMRåŠŸèƒ½</strong>)\n    è§£å†³:ä¿®æ”¹<code>entry</code>å…¥å£ï¼Œ å°†<code>html</code>æ–‡ä»¶å¼•å…¥</p>\n<h2 id=\"why\">WHY</h2>\n<p>ä¸€ä¸ªæ¨¡å—å‘ç”Ÿå˜åŒ–ï¼Œåªä¼šé‡æ–°æ‰“åŒ…è¿™ä¸€ä¸ªæ¨¡å—(è€Œä¸æ˜¯æ‰“åŒ…æ‰€æœ‰æ¨¡å—)æå¤§æå‡æ„å»ºé€Ÿåº¦</p>\n<h2 id=\"how\">HOW</h2>\n<p>åœ¨<code>webpackçš„</code>è¿è¡Œæ—¶ä¸­<code>__webpack__modules__</code>ç”¨ä»¥ç»´æŠ¤æ‰€æœ‰çš„æ¨¡å—</p>\n<p>è€Œçƒ­æ¨¡å—æ›¿æ¢çš„åŸç†ï¼Œå³é€šè¿‡<code>chunk</code>çš„æ–¹å¼åŠ è½½æœ€æ–°çš„<code>modules</code>ï¼Œæ‰¾åˆ°<code>__webpack__modules__</code>ä¸­å¯¹åº”çš„æ¨¡å—é€ä¸€æ›¿æ¢ï¼Œå¹¶åˆ é™¤å…¶ä¸Šä¸‹ç¼“å­˜ã€‚</p>\n<p>å…¶ç²¾ç®€æ•°æ®ç»“æ„ç”¨ä»¥ä¸‹ä»£ç è¡¨ç¤º:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// webpack è¿è¡Œæ—¶ä»£ç </span>\n<span class=\"hljs-keyword\">const</span> __webpack_modules = [\n  <span class=\"hljs-function\">(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">module</span>, <span class=\"hljs-built_in\">exports</span>, __webpack_require__</span>) =&gt;</span> {\n    <span class=\"hljs-title function_\">__webpack_require__</span>(<span class=\"hljs-number\">0</span>);\n  },\n  <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;è¿™æ˜¯ä¸€å·æ¨¡å—&quot;</span>);\n  },\n];\n\n<span class=\"hljs-comment\">// HMR Chunk ä»£ç </span>\n<span class=\"hljs-comment\">// JSONP å¼‚æ­¥åŠ è½½çš„æ‰€éœ€è¦æ›´æ–°çš„ modulesï¼Œå¹¶åœ¨ __webpack_modules__ ä¸­è¿›è¡Œæ›¿æ¢</span>\nself[<span class=\"hljs-string\">&quot;webpackHotUpdate&quot;</span>](<span class=\"hljs-number\">0</span>, {\n  <span class=\"hljs-number\">1</span>: <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;è¿™æ˜¯æœ€æ–°çš„ä¸€å·æ¨¡å—&quot;</span>);\n  },\n});\n</code></pre>\n<p>å…¶ä¸‹ä¸ºæ›´å…·ä½“æ›´å®Œæ•´çš„æµç¨‹ï¼Œæ¯ä¸€æ­¥éƒ½æ¶‰åŠä¼—å¤šï¼Œæœ‰å…´è¶£çš„å¯é˜…è¯»<code>webpack-dev-server</code>åŠå¼€å‘ç¯å¢ƒ<code>webpack</code>è¿è¡Œæ—¶çš„æºç ã€‚</p>\n<ol>\n<li><p><code>webpack-dev-server</code>å°†æ‰“åŒ…è¾“å‡º<code>bundle</code>ä½¿ç”¨å†…å­˜å‹æ–‡ä»¶ç³»ç»Ÿæ§åˆ¶ï¼Œè€ŒéçœŸå®çš„æ–‡ä»¶ç³»ç»Ÿã€‚æ­¤æ—¶ä½¿ç”¨çš„æ˜¯<a href=\"https://github.com/streamich/memfs\">memfs</a>æ¨¡æ‹Ÿnode.js fs API</p>\n</li>\n<li><p>æ¯å½“æ–‡ä»¶å‘ç”Ÿå˜æ›´æ—¶ï¼Œ<code>webpack</code>å°†ä¼šé‡æ–°ç¼–è¯‘ï¼Œ<code>webpack-dev-server</code>å°†ä¼šç›‘æ§åˆ°æ­¤æ—¶æ–‡ä»¶å˜æ›´äº‹ä»¶ï¼Œå¹¶æ‰¾åˆ°å…¶å¯¹åº”çš„<code>module</code>ã€‚æ­¤æ—¶ä½¿ç”¨çš„æ˜¯<a href=\"https://github.com/paulmillr/chokidar\">chokidar</a>ç›‘æ§æ–‡ä»¶å˜æ›´</p>\n</li>\n<li><p><code>webpack-dev-server</code>å°†ä¼šæŠŠå˜æ›´æ¨¡å—é€šçŸ¥åˆ°æµè§ˆå™¨ç«¯ï¼Œæ­¤æ—¶ä½¿ç”¨<code>websocket</code>ä¸æµè§ˆå™¨è¿›è¡Œäº¤æµã€‚æ­¤æ—¶ä½¿ç”¨çš„æ˜¯<a href=\"https://github.com/websockets/ws\">ws</a></p>\n</li>\n<li><p>æµè§ˆå™¨æ ¹æ®<code>websocket</code>æ¥æ”¶åˆ°<code>hash</code>ï¼Œå¹¶é€šè¿‡<code>hash</code>ä»¥<a href=\"https://en.wikipedia.org/wiki/JSONP\">JSONP</a>çš„æ–¹å¼è¯·æ±‚æ›´æ–°æ¨¡å—çš„<code>chunk</code></p>\n</li>\n<li><p>æµè§ˆå™¨åŠ è½½<code>chunk</code>ï¼Œå¹¶ä½¿ç”¨æ–°çš„æ¨¡å—å¯¹æ—§æ¨¡å—è¿›è¡Œçƒ­æ›¿æ¢ï¼Œå¹¶åˆ é™¤å…¶ç¼“å­˜</p>\n</li>\n</ol>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://github.com/shfshanyue/Daily-Question/issues/79\">ã€Q078ã€‘webpack ä¸­ä»€ä¹ˆæ˜¯ HMRï¼ŒåŸç†æ˜¯ä»€ä¹ˆ #79</a></p>\n"},{"title":"HTMLç›¸å…³-scriptæ ‡ç­¾ä¸­çš„asyncå’Œdefer","tags":["async","defer"],"categories":"HTML","description":"scriptæ ‡ç­¾ç”¨äºåŠ è½½è„šæœ¬ä¸æ‰§è¡Œè„šæœ¬ï¼Œç›´æ¥ä½¿ç”¨scriptè„šæœ¬çš„è¯ï¼Œæµè§ˆå™¨ä¼šæŒ‰ç…§é¡ºåºæ¥åŠ è½½å¹¶æ‰§è¡Œè„šæœ¬ï¼Œåœ¨è„šæœ¬åŠ è½½&æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¼šé˜»å¡åç»­çš„DOMæ¸²æŸ“ã€‚å¥½åœ¨scriptæä¾›äº†ä¸¤ç§æ–¹å¼æ¥è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œasyncå’Œdeferï¼Œè¿™ä¸¤ä¸ªå±æ€§ä½¿å¾—scriptéƒ½ä¸ä¼šé˜»å¡DOMçš„æ¸²æŸ“","createDate":"2022-01-24 20:25:33","updateDate":"2022-01-24 22:01:46","body":"<p><code>script</code>æ ‡ç­¾ç”¨äºåŠ è½½è„šæœ¬ä¸æ‰§è¡Œè„šæœ¬ï¼Œç›´æ¥ä½¿ç”¨<code>script</code>è„šæœ¬çš„è¯ï¼Œæµè§ˆå™¨ä¼šæŒ‰ç…§é¡ºåºæ¥åŠ è½½å¹¶æ‰§è¡Œè„šæœ¬ï¼Œåœ¨è„šæœ¬åŠ è½½&amp;æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¼šé˜»å¡åç»­çš„<code>DOM</code>æ¸²æŸ“</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/defer-0.png\" alt=\"é»˜è®¤scriptåŠ è½½é¡ºåº\"></p>\n<p>å¥½åœ¨<code>script</code>æä¾›äº†ä¸¤ç§æ–¹å¼æ¥è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œ<code>async</code>å’Œ<code>defer</code>ï¼Œè¿™ä¸¤ä¸ªå±æ€§ä½¿å¾—<code>script</code><strong>éƒ½ä¸ä¼šé˜»å¡DOMçš„æ¸²æŸ“</strong>ã€‚\nä½†æ—¢ç„¶ä¼šå­˜åœ¨ä¸¤ä¸ªå±æ€§ï¼Œé‚£ä¹ˆå°±è¯´æ˜ï¼Œè¿™ä¸¤ä¸ªå±æ€§ä¹‹é—´è‚¯å®šæ˜¯æœ‰å·®å¼‚çš„ã€‚</p>\n<h2 id=\"defer\">defer</h2>\n<p>ç”¨æ¥é€šçŸ¥æµè§ˆå™¨è¯¥è„šæœ¬å°†åœ¨æ–‡æ¡£å®Œæˆè§£æåï¼Œè§¦å‘<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Window/DOMContentLoaded_event\">DOMContentLoaded</a>äº‹ä»¶å‰æ‰§è¡Œ</p>\n<p>æœ‰<code>defer</code>å±æ€§çš„è„šæœ¬ä¼šé˜»æ­¢<code>DOMContentLoaded</code>äº‹ä»¶ï¼Œç›´åˆ°è„šæœ¬è¢«åŠ è½½å¹¶ä¸”è§£æå®Œæˆ</p>\n<p>å¦‚æœæœ‰å¤šä¸ªè®¾ç½®äº†<code>defer</code>çš„<code>script</code>æ ‡ç­¾å­˜åœ¨ï¼Œåˆ™ä¼šæŒ‰ç…§é¡ºåºæ‰§è¡Œæ‰€æœ‰çš„<code>script</code></p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/defer-1.png\" alt=\"defer\"></p>\n<p>è™½ç„¶<code>script3</code>åŠ è½½å¿«äº<code>script2</code>ï¼Œä½†ç”±äº<code>defer</code>å­˜åœ¨ï¼Œå› æ­¤<code>script3</code>åªèƒ½ç­‰<code>script2</code>æ‰§è¡Œå®Œæ¯•åå†æ‰§è¡Œ</p>\n<h2 id=\"async\">async</h2>\n<p>å¯¹äºæ™®é€šè„šæœ¬ï¼Œå¦‚æœå­˜åœ¨<code>async</code>å±æ€§ï¼Œé‚£ä¹ˆæ™®é€šè„šæœ¬ä¼šè¢«å¹¶è¡Œè¯·æ±‚ï¼Œå¹¶å°½å¿«è§£æå’Œæ‰§è¡Œ</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/defer-2.png\" alt=\"async\"></p>\n<p><code>script3</code>åŠ è½½å¿«äº<code>script2</code>ï¼Œå› æ­¤<code>script3</code>æ—©äº<code>script2</code>æ‰§è¡Œ</p>\n<h2 id=\"å›¾ç¤º\">å›¾ç¤º</h2>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/defer-async.png\" alt=\"defer-asyncå›¾ç¤º\"></p>\n<h2 id=\"æ¨èçš„åº”ç”¨åœºæ™¯\">æ¨èçš„åº”ç”¨åœºæ™¯</h2>\n<h3 id=\"defer-1\">defer</h3>\n<p>å¦‚æœä½ çš„è„šæœ¬ä»£ç ä¾èµ–äºé¡µé¢ä¸­çš„DOMå…ƒç´ ï¼ˆæ–‡æ¡£æ˜¯å¦è§£æå®Œæ¯•ï¼‰ï¼Œæˆ–è€…è¢«å…¶ä»–è„šæœ¬æ–‡ä»¶ä¾èµ–ã€‚\nä¾‹ï¼š</p>\n<ul>\n<li>è¯„è®ºæ¡†</li>\n<li>ä»£ç è¯­æ³•é«˜äº®</li>\n<li>polyfill.js</li>\n</ul>\n<h3 id=\"async-1\">async</h3>\n<p>å¦‚æœä½ çš„è„šæœ¬å¹¶ä¸å…³å¿ƒé¡µé¢ä¸­çš„DOMå…ƒç´ ï¼ˆæ–‡æ¡£æ˜¯å¦è§£æå®Œæ¯•ï¼‰ï¼Œå¹¶ä¸”ä¹Ÿä¸ä¼šäº§ç”Ÿå…¶ä»–è„šæœ¬éœ€è¦çš„æ•°æ®ã€‚\nä¾‹ï¼š</p>\n<ul>\n<li>ç™¾åº¦ç»Ÿè®¡</li>\n</ul>\n<p>å¦‚æœä¸å¤ªèƒ½ç¡®å®šçš„è¯ï¼Œç”¨deferæ€»æ˜¯ä¼šæ¯”asyncç¨³å®šã€‚ã€‚ã€‚</p>\n"},{"title":"Web Component-åˆè¯†","tags":["å¾®å‰ç«¯","WebComponent"],"categories":"å¾®å‰ç«¯","description":"Web Component æœ‰ç‚¹ä¸œè¥¿\n\n## ä»€ä¹ˆæ˜¯ Web Component\n\n> Web Components æ˜¯ä¸€å¥—ä¸åŒçš„æŠ€æœ¯ï¼Œå…è®¸æ‚¨åˆ›å»ºå¯é‡ç”¨çš„å®šåˆ¶å…ƒç´ ï¼ˆå®ƒä»¬çš„åŠŸèƒ½å°è£…åœ¨æ‚¨çš„ä»£ç ä¹‹å¤–ï¼‰å¹¶ä¸”åœ¨æ‚¨çš„ web åº”ç”¨ä¸­ä½¿ç”¨å®ƒä»¬ã€‚--MDN\n\nç®€å•æ¥è®²å°±æ˜¯æµè§ˆå™¨æä¾›çš„åŸç”Ÿ**ç»„ä»¶å¤ç”¨**æ–¹æ¡ˆã€‚ä¸»è¦ç”±ä¸‰ç§æŠ€æœ¯æ–¹æ¡ˆå®ç°ï¼š\n\n- Custom elementsï¼ˆè‡ªå®šä¹‰å…ƒç´ ï¼‰ã€‚å¯ä»¥ç”¨æ¥å®šä¹‰æ ‡ç­¾ï¼ˆå…ƒç´ ï¼‰","createDate":"2022-04-20 21:16:56","updateDate":"2022-01-08 22:40:37","body":"<p>Web Component æœ‰ç‚¹ä¸œè¥¿</p>\n<h2 id=\"ä»€ä¹ˆæ˜¯-web-component\">ä»€ä¹ˆæ˜¯ Web Component</h2>\n<blockquote>\n<p>Web Components æ˜¯ä¸€å¥—ä¸åŒçš„æŠ€æœ¯ï¼Œå…è®¸æ‚¨åˆ›å»ºå¯é‡ç”¨çš„å®šåˆ¶å…ƒç´ ï¼ˆå®ƒä»¬çš„åŠŸèƒ½å°è£…åœ¨æ‚¨çš„ä»£ç ä¹‹å¤–ï¼‰å¹¶ä¸”åœ¨æ‚¨çš„ web åº”ç”¨ä¸­ä½¿ç”¨å®ƒä»¬ã€‚--MDN</p>\n</blockquote>\n<p>ç®€å•æ¥è®²å°±æ˜¯æµè§ˆå™¨æä¾›çš„åŸç”Ÿ<strong>ç»„ä»¶å¤ç”¨</strong>æ–¹æ¡ˆã€‚ä¸»è¦ç”±ä¸‰ç§æŠ€æœ¯æ–¹æ¡ˆå®ç°ï¼š</p>\n<ul>\n<li><p>Custom elementsï¼ˆè‡ªå®šä¹‰å…ƒç´ ï¼‰ã€‚å¯ä»¥ç”¨æ¥å®šä¹‰æ ‡ç­¾ï¼ˆå…ƒç´ ï¼‰</p>\n</li>\n<li><p>Shadow DOMï¼ˆå½±å­ DOMï¼‰ã€‚å¯ä»¥ç”¨æ¥åšæ ·å¼éš”ç¦»</p>\n</li>\n<li><p>HTML templatesï¼ˆHTML æ¨¡æ¿ï¼‰ã€‚å¯ä»¥ç”¨æ¥å®šä¹‰ä¸€ä¸ªåŸºç¡€çš„ç»„ä»¶çš„domç»“æ„</p>\n</li>\n</ul>\n<h2 id=\"æ€ä¹ˆç”¨-web-component\">æ€ä¹ˆç”¨ Web Component</h2>\n<p>å®ç° Web Component çš„<strong>æœ€åŸºæœ¬</strong>æµç¨‹ï¼š</p>\n<ol>\n<li>ä½¿ç”¨<code>template</code>æ¥å®šä¹‰ä¸€ä¸ª<em>ç»„ä»¶</em>çš„dom</li>\n</ol>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;mHeader&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;content&quot;</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;content&quot;</span>&gt;</span>æˆ‘æ˜¯å¤´éƒ¨<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n</code></pre>\n<ol start=\"2\">\n<li>æ¥ç€åŸºäºğŸ‘†åˆ›å»ºçš„<code>template</code>åˆ›å»ºä¸€ä¸ª<em>ç±»ç»„ä»¶</em></li>\n</ol>\n<pre><code class=\"hljs language-jsx\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MHeader</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">HTMLElement</span> {\n  <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-variable language_\">super</span>();\n    <span class=\"hljs-comment\">// attachShadow() æ–¹æ³•æ¥å°†ä¸€ä¸ª shadow root é™„åŠ åˆ°ä»»ä½•ä¸€ä¸ªå…ƒç´ ä¸Šï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ª shadow root ã€‚</span>\n    <span class=\"hljs-keyword\">const</span> shadowRoot = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">attachShadow</span>({ <span class=\"hljs-attr\">mode</span>: <span class=\"hljs-string\">&quot;closed&quot;</span> });\n    <span class=\"hljs-keyword\">const</span> template = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#mHeader&quot;</span>);\n    <span class=\"hljs-keyword\">const</span> content = template.<span class=\"hljs-property\">content</span>.<span class=\"hljs-title function_\">cloneNode</span>(<span class=\"hljs-literal\">true</span>);\n    shadowRoot.<span class=\"hljs-title function_\">appendChild</span>(content);\n  }\n}\n</code></pre>\n<ol start=\"3\">\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/CustomElementRegistry/define\">CustomElementRegistry.define()</a> æ–¹æ³•æ³¨å†Œè‡ªå®šä¹‰æ ‡ç­¾ï¼ˆå…ƒç´ ï¼‰</li>\n</ol>\n<pre><code class=\"hljs language-jsx\"><span class=\"hljs-comment\">/**\n * æ³¨æ„ï¼Œç»„ä»¶åæ˜¯æœ‰é™åˆ¶çš„ï¼ŒMHeaderã€header1ç­‰éƒ½æ˜¯ä¸èƒ½ç”¨çš„ï¼Œæµè§ˆå™¨ä¼šæŠ¥é”™\n * \n * web-component.html:33 Uncaught DOMException: Failed to execute &#x27;define&#x27; on &#x27;CustomElementRegistry&#x27;: &quot;header1&quot; is not a valid custom element name\n    at file:///Users/echo/Desktop/web-component.html:33:27\n */</span>\n<span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">customElements</span>.<span class=\"hljs-title function_\">define</span>(<span class=\"hljs-string\">&quot;m-header&quot;</span>, <span class=\"hljs-title class_\">MHeader</span>);\n</code></pre>\n<ol start=\"4\">\n<li>ä½¿ç”¨è¯¥<em>ç»„ä»¶</em></li>\n</ol>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-comment\">&lt;!-- ä½¿ç”¨çš„åœ°æ–¹æ²¡æœ‰é™åˆ¶ï¼Œè‡ªé—­åˆä¹Ÿæ˜¯å¯ä»¥çš„ --&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">m-header</span> /&gt;</span>\n</code></pre>\n<ol start=\"5\">\n<li>ç»™ç»„ä»¶åŠ ç‚¹æ ·å¼</li>\n</ol>\n<p>å¯ä»¥ç›´æ¥åœ¨<code>template</code>é‡Œæ·»åŠ <code>style</code>æ ‡ç­¾ï¼Œåœ¨é‡Œé¢å¯ä»¥æ·»åŠ åªåœ¨è¯¥<code>template</code>ä¸‹ç”Ÿæ•ˆçš„æ ·å¼</p>\n<p><code>:host</code>é€‰æ‹©å™¨å¯ä»¥é€‰æ‹©ç»„ä»¶çš„æ ¹å…ƒç´ </p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;mHeader&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">style</span>&gt;</span><span class=\"language-css\">\n    <span class=\"hljs-selector-pseudo\">:host</span> {\n      <span class=\"hljs-attribute\">font-size</span>: <span class=\"hljs-number\">32px</span>;\n    }\n    <span class=\"hljs-selector-class\">.content</span> {\n      <span class=\"hljs-attribute\">color</span>: <span class=\"hljs-number\">#f00</span>;\n    }\n  </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">style</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;content&quot;</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;content&quot;</span>&gt;</span>æˆ‘æ˜¯å¤´éƒ¨<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n</code></pre>\n<ol start=\"6\">\n<li>åŠ ç‚¹å±æ€§è¯•è¯• ğŸ¤”</li>\n</ol>\n<p>éœ€è¦åœ¨ç¬¬ 2 æ­¥åœ¨å®šä¹‰ç»„ä»¶æ—¶ç”¨åˆ°<code>this.getAttribute</code>æ¥è·å–ä¼ å…¥çš„å±æ€§</p>\n<pre><code class=\"hljs language-jsx\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MHeader</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">HTMLElement</span> {\n  <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-comment\">// ...</span>\n    <span class=\"hljs-keyword\">const</span> title = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">getAttribute</span>(<span class=\"hljs-string\">&quot;title&quot;</span>);\n    <span class=\"hljs-keyword\">if</span> (title) {\n      content.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#content&quot;</span>).<span class=\"hljs-property\">innerText</span> = title;\n    }\n    <span class=\"hljs-comment\">// ...</span>\n  }\n}\n\n&lt;m-header title=<span class=\"hljs-string\">&quot;hello&quot;</span> /&gt;;\n</code></pre>\n<ol start=\"7\">\n<li>æ·»åŠ ä¸€äº›äº¤äº’</li>\n</ol>\n<p>å¯ä»¥ä½¿ç”¨<code>querySelector</code>è·å–åˆ°<code>template</code>å†…éƒ¨çš„ä¸€äº›å…ƒç´ æ¥æ·»åŠ äº‹ä»¶</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;mHeader&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n    <span class=\"hljs-comment\">&lt;!-- ... --&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;login&quot;</span>&gt;</span>login<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n</code></pre>\n<p>æ¥ç€ç»‘å®šäº‹ä»¶</p>\n<pre><code class=\"hljs language-jsx\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MHeader</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">HTMLElement</span> {\n  <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-comment\">// ...</span>\n    content.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#login&quot;</span>).<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&quot;click&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n      <span class=\"hljs-title function_\">alert</span>(<span class=\"hljs-string\">&quot;login&quot;</span>);\n    });\n    <span class=\"hljs-comment\">// ...</span>\n  }\n}\n</code></pre>\n<ol start=\"8\">\n<li>ä¸çˆ¶ç»„ä»¶çš„é€šä¿¡</li>\n</ol>\n<p>é€šè¿‡<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/CustomEvent\">CustomEvent</a>æ¥è¿›è¡Œé€šä¿¡</p>\n<p>å®Œæ•´ä»£ç </p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-keyword\">html</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">&quot;en&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">charset</span>=<span class=\"hljs-string\">&quot;UTF-8&quot;</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">http-equiv</span>=<span class=\"hljs-string\">&quot;X-UA-Compatible&quot;</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">&quot;IE=edge&quot;</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;viewport&quot;</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>Document<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;mHeader&quot;</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">style</span>&gt;</span><span class=\"language-css\">\n        <span class=\"hljs-selector-pseudo\">:host</span> {\n          <span class=\"hljs-attribute\">font-size</span>: <span class=\"hljs-number\">32px</span>;\n        }\n\n        <span class=\"hljs-selector-class\">.content</span> {\n          <span class=\"hljs-attribute\">color</span>: <span class=\"hljs-number\">#f00</span>;\n        }\n      </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">style</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;content&quot;</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;content&quot;</span>&gt;</span>æˆ‘æ˜¯å¤´éƒ¨<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;login&quot;</span>&gt;</span>login<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">m-header</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;mHeader&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;hello&quot;</span> /&gt;</span>\n\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n      <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MHeader</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">HTMLElement</span> {\n        <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\"></span>) {\n          <span class=\"hljs-variable language_\">super</span>();\n          <span class=\"hljs-keyword\">const</span> shadowRoot = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">attachShadow</span>({ <span class=\"hljs-attr\">mode</span>: <span class=\"hljs-string\">&quot;closed&quot;</span> });\n          <span class=\"hljs-keyword\">const</span> template = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#mHeader&quot;</span>);\n          <span class=\"hljs-keyword\">const</span> content = template.<span class=\"hljs-property\">content</span>.<span class=\"hljs-title function_\">cloneNode</span>(<span class=\"hljs-literal\">true</span>);\n          <span class=\"hljs-keyword\">const</span> title = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">getAttribute</span>(<span class=\"hljs-string\">&quot;title&quot;</span>);\n          <span class=\"hljs-keyword\">if</span> (title) {\n            content.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#content&quot;</span>).<span class=\"hljs-property\">innerText</span> = title;\n          }\n          <span class=\"hljs-keyword\">const</span> myEvent = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">CustomEvent</span>(<span class=\"hljs-string\">&quot;login&quot;</span>, {\n            <span class=\"hljs-attr\">detail</span>: <span class=\"hljs-string\">&quot;è¿™æ˜¯å­ç»„ä»¶ä¼ è¿‡æ¥çš„æ¶ˆæ¯&quot;</span>,\n          });\n          <span class=\"hljs-keyword\">const</span> loginBtn = content.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#login&quot;</span>);\n          loginBtn.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&quot;click&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n            <span class=\"hljs-title function_\">alert</span>(<span class=\"hljs-string\">&quot;login&quot;</span>);\n          });\n          shadowRoot.<span class=\"hljs-title function_\">appendChild</span>(content);\n        }\n      }\n\n      <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">customElements</span>.<span class=\"hljs-title function_\">define</span>(<span class=\"hljs-string\">&quot;m-header&quot;</span>, <span class=\"hljs-title class_\">MHeader</span>);\n    </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n</code></pre>\n<p>æœªå®Œå¾…ç»­</p>\n<p>to be continued...</p>\n<h2 id=\"åŸºäº-web-component-çš„è½åœ°åº”ç”¨\">åŸºäº Web Component çš„è½åœ°åº”ç”¨</h2>\n<p>GitHubã€‚GitHubæ˜¯åŸºäº Web Components æ¥å¼€å‘çš„</p>\n<p><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6309ad13b5b24d23aaf42e426923d4c4~tplv-k3u1fbpfcp-watermark.image?\" alt=\"image.png\"></p>\n<p>å…¶æ¬¡ï¼ŒVue.jså’Œå¾®ä¿¡å°ç¨‹åºä¹Ÿæ˜¯åŸºäº Web Components æ¥åšç»„ä»¶åŒ–çš„</p>\n<h2 id=\"æ€»ç»“\">æ€»ç»“</h2>\n<p>Web Component æ˜¯æµè§ˆå™¨æä¾›çš„å¯ä»¥ç”¨äºç»„ä»¶å¤ç”¨çš„æ–¹æ¡ˆï¼Œå¯ä»¥å®ç°æ ·å¼éš”ç¦»ï¼Œè‡ªå®šä¹‰å±æ€§ã€çˆ¶å­ç»„ä»¶é€šä¿¡ç­‰åŠŸèƒ½ï¼Œæœ‰ä¸å°‘åº”ç”¨/æ¡†æ¶éƒ½æ˜¯åŸºäºWeb Componentæ¥è¿›è¡Œå¼€å‘çš„ï¼Œå‰æ™¯å¹¿é˜”ã€‚ä½†Web Componentä¹¦å†™èµ·æ¥è¿˜æ˜¯æœ‰äº›ä¸å¤Ÿä¾¿æ·ï¼Œéœ€è¦ç”¨åˆ°åŸç”Ÿ dom æ“ä½œ api</p>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/Web_Components\">MDN-Web Components</a></p>\n<p><a href=\"https://github.com/mdn/web-components-examples\">MDN/web-components-examples</a></p>\n"},{"title":"Web Component-è‡ªå®šä¹‰å…ƒç´ çš„ç”Ÿå‘½å‘¨æœŸ","tags":["å¾®å‰ç«¯","WebComponent"],"categories":"å¾®å‰ç«¯","description":"åœ¨ä¹‹å‰å¤§æ¦‚äº†è§£äº† Web Componentï¼ŒçŸ¥é“æ˜¯æ€ä¹ˆç©çš„ï¼Œä¸è¿‡åœ¨æŸ¥é˜…èµ„æ–™åå‘ç°ä¹‹å‰æœ‰äº›é”™è¯¯\n\n## Node.cloneNode çš„å±€é™æ€§\n\nåœ¨ä¹‹å‰ï¼Œä½¿ç”¨çš„æ˜¯`template.content.cloneNode(true);`æ¥åˆ›å»ºå‡ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œè¿™ç§æ–¹æ³•æœ‰ä¸€äº›å±€é™æ€§ï¼šä¼šå¤åˆ¶åŸèŠ‚ç‚¹çš„æ‰€æœ‰å±æ€§åŠå±æ€§å€¼ï¼Œå…¶ä¸­å°±åŒ…æ‹¬`id`ï¼Œè¿™æ ·é¡µé¢ä¸­å°±æœ‰å¤šä¸ª`id`ä¸€æ ·çš„å…ƒç´ äº†\n\n> æ‹·è´å®ƒæ‰€æœ‰çš„å±æ€§ä»¥åŠå±æ€§","createDate":"2022-04-21 21:06:23","updateDate":"2022-01-08 22:40:37","body":"<p>åœ¨ä¹‹å‰å¤§æ¦‚äº†è§£äº† Web Componentï¼ŒçŸ¥é“æ˜¯æ€ä¹ˆç©çš„ï¼Œä¸è¿‡åœ¨æŸ¥é˜…èµ„æ–™åå‘ç°ä¹‹å‰æœ‰äº›é”™è¯¯</p>\n<h2 id=\"nodeclonenode-çš„å±€é™æ€§\">Node.cloneNode çš„å±€é™æ€§</h2>\n<p>åœ¨ä¹‹å‰ï¼Œä½¿ç”¨çš„æ˜¯<code>template.content.cloneNode(true);</code>æ¥åˆ›å»ºå‡ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œè¿™ç§æ–¹æ³•æœ‰ä¸€äº›å±€é™æ€§ï¼šä¼šå¤åˆ¶åŸèŠ‚ç‚¹çš„æ‰€æœ‰å±æ€§åŠå±æ€§å€¼ï¼Œå…¶ä¸­å°±åŒ…æ‹¬<code>id</code>ï¼Œè¿™æ ·é¡µé¢ä¸­å°±æœ‰å¤šä¸ª<code>id</code>ä¸€æ ·çš„å…ƒç´ äº†</p>\n<blockquote>\n<p>æ‹·è´å®ƒæ‰€æœ‰çš„å±æ€§ä»¥åŠå±æ€§å€¼,å½“ç„¶ä¹Ÿå°±åŒ…æ‹¬äº†å±æ€§ä¸Šç»‘å®šçš„äº‹ä»¶(æ¯”å¦‚ onclick=&quot;alert(1)&quot;),ä½†ä¸ä¼šæ‹·è´é‚£äº›ä½¿ç”¨ addEventListener()æ–¹æ³•æˆ–è€… node.onclick = fn è¿™ç§ç”¨ JavaScript åŠ¨æ€ç»‘å®šçš„äº‹ä»¶. --mdn</p>\n</blockquote>\n<p>MDN åŒæ ·ä¹Ÿç»™å‡ºè­¦å‘Š</p>\n<blockquote>\n<p>æ³¨æ„:ä¸ºäº†é˜²æ­¢ä¸€ä¸ªæ–‡æ¡£ä¸­å‡ºç°ä¸¤ä¸ª ID é‡å¤çš„å…ƒç´ ,ä½¿ç”¨ cloneNode()æ–¹æ³•å…‹éš†çš„èŠ‚ç‚¹åœ¨éœ€è¦æ—¶åº”è¯¥æŒ‡å®šå¦å¤–ä¸€ä¸ªä¸åŸ ID å€¼ä¸åŒçš„ ID</p>\n</blockquote>\n<p>è€Œä¸”ï¼Œç”Ÿæˆçš„èŠ‚ç‚¹çš„<code>ownerDocument</code>ä»ç„¶æŒ‡å‘æºèŠ‚ç‚¹çš„<code>ownerDocument</code></p>\n<p>æ—¢ç„¶è¿™ä¸ªæ–¹æ³•æœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ³•å‘¢ï¼Ÿæœ‰çš„ï¼</p>\n<h2 id=\"documentimportnode\">document.importNode</h2>\n<blockquote>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Document/importNode\">document.importNode</a>å°†å¤–éƒ¨æ–‡æ¡£çš„ä¸€ä¸ªèŠ‚ç‚¹æ‹·è´ä¸€ä»½,ç„¶åå¯ä»¥æŠŠè¿™ä¸ªæ‹·è´çš„èŠ‚ç‚¹æ’å…¥åˆ°å½“å‰æ–‡æ¡£ä¸­</p>\n</blockquote>\n<p>ä½¿ç”¨æ–¹å¼</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// deepå‚æ•°è¡¨ç¤ºæ˜¯å¦é€’å½’å¤åˆ¶æºèŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹</span>\n<span class=\"hljs-keyword\">const</span> node = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">importNode</span>(externalNode, deep);\n</code></pre>\n<p>æ³¨æ„ï¼š</p>\n<p>æ–°ç”ŸæˆèŠ‚ç‚¹çš„ <code>parentNode</code> æ˜¯ <code>null</code>ï¼Œå› ä¸ºå®ƒè¿˜æ²¡æœ‰æ’å…¥å½“å‰æ–‡æ¡£çš„æ–‡æ¡£æ ‘ä¸­ï¼Œ<strong>å±äºæ¸¸ç¦»çŠ¶æ€</strong>ï¼Œå› æ­¤æ— æ³•å¯¹å…¶è¿›è¡Œæ“ä½œ</p>\n<p>è¿™æ ·çš„è¯æˆ‘ä»¬å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä¿®æ”¹æ–°èŠ‚ç‚¹çš„<code>ownerDocument</code>ï¼ˆåœ¨<code>append</code>ä¹‹åè‡ªåŠ¨æŒ‡å‘å½“å‰<code>document</code>ï¼‰</p>\n<p>è¯•è¯•æ–°çš„ api æ¥åˆ›å»º<em>ç»„ä»¶</em></p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n  <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MHeader</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">HTMLElement</span> {\n    <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\"></span>) {\n      <span class=\"hljs-variable language_\">super</span>();\n      <span class=\"hljs-comment\">// ...</span>\n      <span class=\"hljs-keyword\">const</span> content = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">importNode</span>(template.<span class=\"hljs-property\">content</span>, <span class=\"hljs-literal\">true</span>);\n      <span class=\"hljs-comment\">/**\n       * æ³¨æ„ï¼Œè¦å…ˆå°†èŠ‚ç‚¹æ’å…¥åˆ°shadowRootåæ‰èƒ½å¯¹å…¶è¿›è¡Œæ“ä½œ\n       */</span>\n      shadowRoot.<span class=\"hljs-title function_\">appendChild</span>(content);\n      <span class=\"hljs-comment\">// ...</span>\n    }\n  }\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n</code></pre>\n<h2 id=\"htmlelement-çš„ç”Ÿå‘½å‘¨æœŸ\">HTMLElement çš„ç”Ÿå‘½å‘¨æœŸ</h2>\n<p>åœ¨ä¹‹å‰ï¼Œæˆ‘ä»¬éƒ½æ˜¯å°†å„ç§æ“ä½œç›´æ¥å†™åœ¨æ„é€ å‡½æ•°é‡Œï¼Œè¿™æ˜¾ç„¶æœ‰äº›è‡ƒè‚¿ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€äº›åŠæ³•å¯ä»¥å°†è¿™äº›é€»è¾‘åˆ†å‘å‡ºå»å‘¢ï¼Ÿæœ‰çš„ï¼</p>\n<p>åœ¨<code>HTMLElement</code>å†…ï¼Œæœ‰ä¸€äº›<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/Web_Components/Using_custom_elements#%E4%BD%BF%E7%94%A8%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0\">ç”Ÿå‘½å‘¨æœŸ</a></p>\n<ul>\n<li><p><code>connectedCallback</code>ï¼Œå½“ <code>custom element</code> é¦–æ¬¡è¢«æ’å…¥æ–‡æ¡£ DOM æ—¶è¢«è°ƒç”¨</p>\n</li>\n<li><p><code>disconnectedCallback</code>ï¼Œå½“ <code>custom element</code>ä»æ–‡æ¡£ DOM ä¸­åˆ é™¤æ—¶è¢«è°ƒç”¨</p>\n</li>\n<li><p><code>adoptedCallback</code>ï¼Œ å½“ <code>custom element</code>è¢«ç§»åŠ¨åˆ°æ–°çš„æ–‡æ¡£æ—¶è¢«è°ƒç”¨</p>\n</li>\n<li><p><code>attributeChangedCallback</code>ï¼Œå½“ <code>custom element</code>å¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹è‡ªèº«å±æ€§æ—¶è¢«è°ƒç”¨</p>\n</li>\n</ul>\n<p>æ®æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é‡æ„ä¸€ä¸‹ä¹‹å‰çš„<em>ç»„ä»¶</em></p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n  <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MHeader</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">HTMLElement</span> {\n    <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">get</span> <span class=\"hljs-title function_\">observedAttributes</span>() {\n      <span class=\"hljs-keyword\">return</span> [<span class=\"hljs-string\">&quot;title&quot;</span>];\n    }\n    <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\"></span>) {\n      <span class=\"hljs-variable language_\">super</span>();\n      <span class=\"hljs-comment\">// ä¼šè‡ªåŠ¨å‘thisä¸ŠæŒ‚è½½ä¸€ä¸ªshadowRoot</span>\n      <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">attachShadow</span>({ <span class=\"hljs-attr\">mode</span>: <span class=\"hljs-string\">&quot;open&quot;</span> });\n      <span class=\"hljs-keyword\">const</span> template = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#mHeaderTemplate&quot;</span>);\n      <span class=\"hljs-comment\">// const content = template.content.cloneNode(true);</span>\n      <span class=\"hljs-keyword\">const</span> content = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">importNode</span>(template.<span class=\"hljs-property\">content</span>, <span class=\"hljs-literal\">true</span>);\n      <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">shadowRoot</span>.<span class=\"hljs-title function_\">appendChild</span>(content);\n    }\n\n    <span class=\"hljs-title function_\">connectedCallback</span>(<span class=\"hljs-params\"></span>) {\n      <span class=\"hljs-keyword\">const</span> loginBtn = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">shadowRoot</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#login&quot;</span>);\n      loginBtn.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&quot;click&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">setAttribute</span>(<span class=\"hljs-string\">&quot;title&quot;</span>, <span class=\"hljs-string\">&quot;ç™»å½•æˆåŠŸ&quot;</span>);\n      });\n    }\n\n    <span class=\"hljs-title function_\">attributeChangedCallback</span>(<span class=\"hljs-params\">name, oldValue, newValue</span>) {\n      <span class=\"hljs-keyword\">if</span> (name === <span class=\"hljs-string\">&quot;title&quot;</span>) {\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">shadowRoot</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#content&quot;</span>).<span class=\"hljs-property\">innerText</span> = newValue;\n      }\n    }\n  }\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n</code></pre>\n<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨<code>attributeChangedCallback</code>æ¥ç›‘å¬<em>ç»„ä»¶</em>å±æ€§å˜åŒ–ï¼Œåœ¨<code>title</code>å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ›´æ–°å…ƒç´ çš„å€¼ã€‚è¯¥å›è°ƒä¼šè¿”å›ä¸‰ä¸ªå‚æ•°ï¼š</p>\n<ul>\n<li><p><code>name</code>ï¼Œå˜åŒ–çš„å±æ€§çš„åå­—</p>\n</li>\n<li><p><code>oldValue</code>ï¼Œå±æ€§ä¹‹å‰çš„å€¼</p>\n</li>\n<li><p><code>newValue</code>ï¼Œè¦è®¾ç½®çš„å€¼</p>\n</li>\n</ul>\n<p>ï¼ˆreact å†™çš„å¤šäº†ï¼Œæœ‰ç‚¹æ¢¦å› vue çš„æ„Ÿè§‰ ğŸ¤”ï¼‰</p>\n<p>æ­¤å¤–æœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼š</p>\n<p>éœ€è¦åœ¨<code>static get observedAttributes</code>å‡½æ•°é‡Œå£°æ˜ä¸€ä¸‹è¦ç›‘å¬çš„å±æ€§å</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">get</span> <span class=\"hljs-title function_\">observedAttributes</span>() {\n  <span class=\"hljs-keyword\">return</span> [<span class=\"hljs-string\">&quot;title&quot;</span>];\n}\n</code></pre>\n<p>å®Œæ•´ä»£ç </p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-keyword\">html</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">&quot;en&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">charset</span>=<span class=\"hljs-string\">&quot;UTF-8&quot;</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">http-equiv</span>=<span class=\"hljs-string\">&quot;X-UA-Compatible&quot;</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">&quot;IE=edge&quot;</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;viewport&quot;</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>Document<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;mHeaderTemplate&quot;</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">style</span>&gt;</span><span class=\"language-css\">\n        <span class=\"hljs-selector-pseudo\">:host</span> {\n          <span class=\"hljs-attribute\">font-size</span>: <span class=\"hljs-number\">32px</span>;\n        }\n\n        <span class=\"hljs-selector-class\">.content</span> {\n          <span class=\"hljs-attribute\">color</span>: <span class=\"hljs-number\">#f00</span>;\n        }\n      </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">style</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;content&quot;</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;content&quot;</span>&gt;</span>æˆ‘æ˜¯å¤´éƒ¨<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;login&quot;</span>&gt;</span>login<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">m-header</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;mHeader&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;hello&quot;</span> /&gt;</span>\n\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n      <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MHeader</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">HTMLElement</span> {\n        <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">get</span> <span class=\"hljs-title function_\">observedAttributes</span>() {\n          <span class=\"hljs-keyword\">return</span> [<span class=\"hljs-string\">&quot;title&quot;</span>];\n        }\n        <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\"></span>) {\n          <span class=\"hljs-variable language_\">super</span>();\n          <span class=\"hljs-comment\">// ä¼šè‡ªåŠ¨å‘thisä¸ŠæŒ‚è½½ä¸€ä¸ªshadowRoot</span>\n          <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">attachShadow</span>({ <span class=\"hljs-attr\">mode</span>: <span class=\"hljs-string\">&quot;open&quot;</span> });\n          <span class=\"hljs-keyword\">const</span> template = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#mHeaderTemplate&quot;</span>);\n          <span class=\"hljs-comment\">// const content = template.content.cloneNode(true);</span>\n          <span class=\"hljs-keyword\">const</span> content = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">importNode</span>(template.<span class=\"hljs-property\">content</span>, <span class=\"hljs-literal\">true</span>);\n          <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">shadowRoot</span>.<span class=\"hljs-title function_\">appendChild</span>(content);\n        }\n\n        <span class=\"hljs-title function_\">connectedCallback</span>(<span class=\"hljs-params\"></span>) {\n          <span class=\"hljs-keyword\">const</span> loginBtn = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">shadowRoot</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#login&quot;</span>);\n          loginBtn.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&quot;click&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n            <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">setAttribute</span>(<span class=\"hljs-string\">&quot;title&quot;</span>, <span class=\"hljs-string\">&quot;ç™»å½•æˆåŠŸ&quot;</span>);\n          });\n        }\n\n        <span class=\"hljs-title function_\">attributeChangedCallback</span>(<span class=\"hljs-params\">name, oldValue, newValue</span>) {\n          <span class=\"hljs-keyword\">if</span> (name === <span class=\"hljs-string\">&quot;title&quot;</span>) {\n            <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">shadowRoot</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#content&quot;</span>).<span class=\"hljs-property\">innerText</span> = newValue;\n          }\n        }\n      }\n\n      <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">customElements</span>.<span class=\"hljs-title function_\">define</span>(<span class=\"hljs-string\">&quot;m-header&quot;</span>, <span class=\"hljs-title class_\">MHeader</span>);\n\n      <span class=\"hljs-keyword\">const</span> mHeader = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#mHeader&quot;</span>);\n    </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n</code></pre>\n<h2 id=\"æ€»ç»“\">æ€»ç»“</h2>\n<p>ç”±äº<code>Node.cloneNode</code>ä»é»˜è®¤ä¿ç•™æ–°èŠ‚ç‚¹çš„<code>ownerDocument</code>ï¼Œå› æ­¤ä½¿ç”¨èµ·æ¥æ²¡æ³•æ”¾å¼€ï¼Œæœ‰äº›éœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚ä¸è¿‡æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>document.importNode</code>æ¥å®ç°ç›¸åŒçš„åŠŸèƒ½ï¼Œè¯¥APIåˆ›å»ºçš„èŠ‚ç‚¹å¤„äºæ¸¸ç¦»çŠ¶æ€ï¼Œåœ¨è¿›è¡Œ<code>append</code>æ“ä½œåä¼šè‡ªåŠ¨ä¿®æ­£<code>ownerDocument</code>çš„æŒ‡å‘</p>\n<p>é€šè¿‡ä½¿ç”¨<code>custom elements</code>æä¾›çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ç›‘å¬å±æ€§å˜åŒ–æ¥åšä¸€äº›é€»è¾‘ï¼Œä½†è¿˜æ˜¯é‚£å¥è¯ä¹¦å†™èµ·æ¥æœ‰äº›ä¸å¤Ÿä¾¿æ·ï¼Œéœ€è¦ç”¨åˆ°åŸç”Ÿ dom æ“ä½œ apiï¼Œæ²¡å‡† jQuery ä¼šå€Ÿç€ Web Components å†é‡æ–°æ´»è·ƒèµ·æ¥</p>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/Web_Components\">MDN-Web Components</a></p>\n<p><a href=\"https://github.com/mdn/web-components-examples\">MDN/web-components-examples</a></p>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Node/cloneNode\">Node.cloneNode(deep)</a></p>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Document/importNode\">document.importNode</a></p>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/Web_Components/Using_custom_elements#%E4%BD%BF%E7%94%A8%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0\">ä½¿ç”¨ custom elements</a></p>\n"},{"title":"ç”Ÿæˆè‡ªå®šä¹‰ï¼ˆunicodeã€å­—å½¢ï¼‰å­—ä½“","tags":["åçˆ¬è™«","å­—ä½“","å®‰å…¨"],"categories":"åçˆ¬è™«","description":"è¦æƒ³å®ç°å­—ä½“åçˆ¬è™«ï¼Œé¦–å…ˆè¦æœ‰å­—ä½“ï¼Œé‚£ä¹ˆå¦‚ä½•åˆ¶ä½œå­—ä½“å‘¢\n\n## åŸç†\n\nä¸€å¥—å­—ä½“æ˜¯ç”±å¤šä¸ªå­—ç¬¦ç»„æˆï¼Œæ¯ä¸ªå­—ç¬¦éƒ½æœ‰å¯¹åº”çš„å­—å½¢ï¼Œå­—å½¢æ˜¯ç”±ä¸€ç³»åˆ—`command`ï¼ˆç±»ä¼¼svgï¼‰\n\n![åˆ¶ä½œå­—ä½“](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d1b9fa3afe7d47dca17108785cc87800~tplv-k3u1fbpfcp-zoom-1.","createDate":"2022-01-08 09:38:17","updateDate":"2022-01-08 18:05:37","body":"<p>è¦æƒ³å®ç°å­—ä½“åçˆ¬è™«ï¼Œé¦–å…ˆè¦æœ‰å­—ä½“ï¼Œé‚£ä¹ˆå¦‚ä½•åˆ¶ä½œå­—ä½“å‘¢</p>\n<h2 id=\"åŸç†\">åŸç†</h2>\n<p>ä¸€å¥—å­—ä½“æ˜¯ç”±å¤šä¸ªå­—ç¬¦ç»„æˆï¼Œæ¯ä¸ªå­—ç¬¦éƒ½æœ‰å¯¹åº”çš„å­—å½¢ï¼Œå­—å½¢æ˜¯ç”±ä¸€ç³»åˆ—<code>command</code>ï¼ˆç±»ä¼¼svgï¼‰</p>\n<p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d1b9fa3afe7d47dca17108785cc87800~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"åˆ¶ä½œå­—ä½“\"></p>\n<p>æˆ‘ä»¬è¦åšçš„å°±æ˜¯åŸºäºæºå­—ä½“ï¼Œæå–å‡ºç‰¹å®šçš„å­—ç¬¦ï¼Œè°ƒæ•´è¯¥å­—ç¬¦å¯¹åº”çš„å­—å½¢ï¼ˆè°ƒæ•´<code>command</code>çš„å‚æ•°ï¼‰ï¼Œæœ€åå¯¼å‡ºä¸€å¥—æ–°çš„å­—ä½“</p>\n<p>å˜æ¢è§„åˆ™ï¼šæ ¹æ®<code>strength</code>å’Œ<code>distance</code>è°ƒæ•´<code>glyph.path.command</code>çš„åæ ‡ç‚¹</p>\n<p>åŸºäº<a href=\"https://opentype.js.org\">opentype.js</a></p>\n<h2 id=\"ä»£ç å®ç°\">ä»£ç å®ç°</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> opentype <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;opentype.js&#x27;</span>; \n<span class=\"hljs-keyword\">import</span> { clone } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;ramda&#x27;</span>\n<span class=\"hljs-keyword\">import</span> fs <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;fs&quot;</span>;\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">Chance</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;chance&quot;</span>;\n\n<span class=\"hljs-keyword\">const</span> snapX = <span class=\"hljs-number\">0</span>;\n<span class=\"hljs-keyword\">const</span> snapY = <span class=\"hljs-number\">0</span>;\n<span class=\"hljs-keyword\">const</span> snapDistance = <span class=\"hljs-number\">2</span>;\n\n<span class=\"hljs-comment\">// éšæœºæ•°ç”Ÿæˆå™¨</span>\n<span class=\"hljs-keyword\">const</span> chance = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Chance</span>();\n\n<span class=\"hljs-comment\">// è°ƒæ•´pathç‚¹</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">snap</span>(<span class=\"hljs-params\">v, distance, strength</span>) {\n    <span class=\"hljs-keyword\">return</span> (v * (<span class=\"hljs-number\">1.0</span> - strength)) + (strength * <span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">round</span>(v / distance) * distance);\n}\n\n<span class=\"hljs-comment\">// å¯¹æ¯ä¸ªå­—ç¬¦çš„å­—å½¢åšè°ƒæ•´</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">doSnap</span>(<span class=\"hljs-params\">sourcePath, options</span>) {\n    <span class=\"hljs-keyword\">const</span> { snapStrength, snapDistance, snapPathCmdCnt } = options;\n    <span class=\"hljs-keyword\">const</span> path = <span class=\"hljs-title function_\">clone</span>(sourcePath);\n    <span class=\"hljs-keyword\">if</span> (!path?.<span class=\"hljs-property\">commands</span>) <span class=\"hljs-keyword\">return</span> path;\n\n    <span class=\"hljs-keyword\">const</span> cursorLeft = chance.<span class=\"hljs-title function_\">integer</span>({ <span class=\"hljs-attr\">min</span>: <span class=\"hljs-number\">0</span>, <span class=\"hljs-attr\">max</span>: path.<span class=\"hljs-property\">commands</span>.<span class=\"hljs-property\">length</span> - snapPathCmdCnt });\n    <span class=\"hljs-keyword\">const</span> cursorRight = chance.<span class=\"hljs-title function_\">integer</span>({ <span class=\"hljs-attr\">min</span>: cursorLeft, <span class=\"hljs-attr\">max</span>: cursorLeft + snapPathCmdCnt });\n\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = cursorLeft; i &lt; cursorRight; i += <span class=\"hljs-number\">1</span>) {\n        <span class=\"hljs-keyword\">const</span> cmd = path?.<span class=\"hljs-property\">commands</span>?.[i];\n        <span class=\"hljs-keyword\">if</span> (cmd.<span class=\"hljs-property\">type</span> !== <span class=\"hljs-string\">&#x27;Z&#x27;</span>) {\n            cmd.<span class=\"hljs-property\">x</span> = <span class=\"hljs-title function_\">snap</span>(cmd.<span class=\"hljs-property\">x</span> + snapX, snapDistance, snapStrength) - snapX;\n            cmd.<span class=\"hljs-property\">y</span> = <span class=\"hljs-title function_\">snap</span>(cmd.<span class=\"hljs-property\">y</span> + snapY, snapDistance, snapStrength) - snapY;\n        }\n        <span class=\"hljs-keyword\">if</span> (cmd.<span class=\"hljs-property\">type</span> === <span class=\"hljs-string\">&#x27;Q&#x27;</span> || cmd.<span class=\"hljs-property\">type</span> === <span class=\"hljs-string\">&#x27;C&#x27;</span>) {\n            cmd.<span class=\"hljs-property\">x1</span> = <span class=\"hljs-title function_\">snap</span>(cmd.<span class=\"hljs-property\">x1</span> + snapX, snapDistance, snapStrength) - snapX;\n            cmd.<span class=\"hljs-property\">y1</span> = <span class=\"hljs-title function_\">snap</span>(cmd.<span class=\"hljs-property\">y1</span> + snapY, snapDistance, snapStrength) - snapY;\n        }\n        <span class=\"hljs-keyword\">if</span> (cmd.<span class=\"hljs-property\">type</span> === <span class=\"hljs-string\">&#x27;C&#x27;</span>) {\n            cmd.<span class=\"hljs-property\">x2</span> = <span class=\"hljs-title function_\">snap</span>(cmd.<span class=\"hljs-property\">x2</span> + snapX, snapDistance, snapStrength) - snapX;\n            cmd.<span class=\"hljs-property\">y2</span> = <span class=\"hljs-title function_\">snap</span>(cmd.<span class=\"hljs-property\">y2</span> + snapY, snapDistance, snapStrength) - snapY;\n        }\n    }\n\n    <span class=\"hljs-keyword\">return</span> path;\n}\n\n<span class=\"hljs-comment\">/**\n * <span class=\"hljs-doctag\">@description</span>: TTFå˜ç ï¼ŒåŸºäºä¸€ç§å­—ä½“ï¼Œç”Ÿæˆå¦ä¸€ç§æ–°å­—ä½“\n * <span class=\"hljs-doctag\">@param</span> {<span class=\"hljs-type\">string</span>} sourceFontPath æºå­—ä½“\n * <span class=\"hljs-doctag\">@param</span> {<span class=\"hljs-type\">string</span>} words è¦è½¬æ¢çš„å­—\n * <span class=\"hljs-doctag\">@param</span> {<span class=\"hljs-type\">string|Array&lt;string&gt;</span>} newFontPath è½¬æ¢åçš„å­—ä½“\n * <span class=\"hljs-doctag\">@param</span> {<span class=\"hljs-type\">SnapConfiguration</span>} snapConfig å­—å½¢å˜åŒ–é…ç½®\n * <span class=\"hljs-doctag\">@return</span> {<span class=\"hljs-type\">object</span>} è½¬æ¢è§„åˆ™(æ˜ å°„è¡¨)\n */</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">generateFont</span>(<span class=\"hljs-params\">sourceFontPath, words, newFontPath, snapConfig</span>) {\n    <span class=\"hljs-comment\">// ä¿å­˜å­—ç¬¦å’Œunicodeçš„æ˜ å°„å…³ç³»</span>\n    <span class=\"hljs-keyword\">const</span> result = {};\n    <span class=\"hljs-keyword\">const</span> sourceFont = opentype.<span class=\"hljs-title function_\">loadSync</span>(sourceFontPath);\n\n    <span class=\"hljs-keyword\">const</span> notdefGlyph = <span class=\"hljs-keyword\">new</span> opentype.<span class=\"hljs-title class_\">Glyph</span>({\n        <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&#x27;.notdef&#x27;</span>,\n        <span class=\"hljs-attr\">advanceWidth</span>: sourceFont.<span class=\"hljs-title function_\">getAdvanceWidth</span>(<span class=\"hljs-string\">&#x27;.&#x27;</span>),\n        <span class=\"hljs-attr\">path</span>: <span class=\"hljs-keyword\">new</span> opentype.<span class=\"hljs-title class_\">Path</span>(),\n    });\n\n    <span class=\"hljs-keyword\">const</span> snapStrength = chance.<span class=\"hljs-title function_\">integer</span>({ <span class=\"hljs-attr\">min</span>: <span class=\"hljs-number\">1</span>, <span class=\"hljs-attr\">max</span>: <span class=\"hljs-number\">10</span> });\n\n    <span class=\"hljs-comment\">// ç”Ÿæˆæ–°çš„å­—å½¢</span>\n    <span class=\"hljs-comment\">// sourceFont.stringToGlyphs(words) æå–å‡ºè¦è½¬æ¢çš„å­—ç¬¦çš„å­—å½¢</span>\n    <span class=\"hljs-keyword\">const</span> subGlyphs = sourceFont.<span class=\"hljs-title function_\">stringToGlyphs</span>(words).<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">glyph, index</span>) =&gt;</span> {\n        <span class=\"hljs-keyword\">const</span> word = words[index];\n        <span class=\"hljs-comment\">// é’ˆå¯¹åçˆ¬è™«éœ€æ±‚ï¼Œæ¯ä¸ªå­—ç¬¦éœ€è¦ç”Ÿæˆæ–°çš„unicode</span>\n        <span class=\"hljs-keyword\">const</span> unicode = chance.<span class=\"hljs-title function_\">integer</span>({ <span class=\"hljs-attr\">min</span>: <span class=\"hljs-number\">255</span>, <span class=\"hljs-attr\">max</span>: <span class=\"hljs-number\">65535</span> });\n        <span class=\"hljs-keyword\">const</span> { consistent, isSnap, snapPathCmdCnt } = snapConfig;\n        <span class=\"hljs-keyword\">let</span> path = glyph.<span class=\"hljs-property\">path</span>;\n        \n        <span class=\"hljs-keyword\">if</span> (isSnap) {\n            <span class=\"hljs-comment\">// æ¯ä¸ªå­—ç¬¦å…±ç”¨ä¸€å¥—å­—å½¢å˜æ¢é…ç½®orç›¸äº’ç‹¬ç«‹</span>\n            <span class=\"hljs-keyword\">const</span> snapConfiguration = consistent\n                ?   {   \n                        snapDistance,\n                        snapStrength,\n                        snapPathCmdCnt,\n                    }\n                :   { \n                        snapPathCmdCnt,\n                        snapDistance,\n                        <span class=\"hljs-attr\">snapStrength</span>: chance.<span class=\"hljs-title function_\">integer</span>({ <span class=\"hljs-attr\">min</span>: <span class=\"hljs-number\">1</span>, <span class=\"hljs-attr\">max</span>: <span class=\"hljs-number\">10</span> }),\n                    }\n            path = <span class=\"hljs-title function_\">doSnap</span>(glyph.<span class=\"hljs-property\">path</span>, snapConfiguration);\n        }\n        \n        <span class=\"hljs-comment\">// ä¿å­˜æ˜ å°„å…³ç³»</span>\n        result[word] = <span class=\"hljs-string\">`&amp;#x<span class=\"hljs-subst\">${<span class=\"hljs-built_in\">Number</span>(unicode).toString(<span class=\"hljs-number\">16</span>)}</span>;`</span>;\n\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> opentype.<span class=\"hljs-title class_\">Glyph</span>({\n            <span class=\"hljs-attr\">index</span>: index + <span class=\"hljs-number\">1</span>,\n            unicode,\n            <span class=\"hljs-attr\">name</span>: word,\n            path,\n            <span class=\"hljs-attr\">advanceWidth</span>: glyph.<span class=\"hljs-property\">advanceWidth</span>,\n        });\n    });\n\n    <span class=\"hljs-keyword\">const</span> { unitsPerEm, ascender, descender } = sourceFont;\n\n    <span class=\"hljs-comment\">// ç”Ÿæˆæ–°çš„å­—ä½“æ–‡ä»¶</span>\n    <span class=\"hljs-keyword\">const</span> res = <span class=\"hljs-keyword\">new</span> opentype.<span class=\"hljs-title class_\">Font</span>({\n        <span class=\"hljs-attr\">familyName</span>: <span class=\"hljs-string\">&#x27;yqn-font&#x27;</span>,\n        <span class=\"hljs-attr\">styleName</span>: <span class=\"hljs-string\">&#x27;Medium&#x27;</span>,\n        unitsPerEm,\n        ascender,\n        descender,\n        <span class=\"hljs-attr\">glyphs</span>: [notdefGlyph, ...subGlyphs],\n    });\n\n    <span class=\"hljs-comment\">// å¯èƒ½éœ€è¦ä¿å­˜å¤šä»½å­—ä½“æ–‡ä»¶ï¼ˆä¸åŒæ ¼å¼ï¼Œåšæµè§ˆå™¨å…¼å®¹ï¼‰</span>\n    <span class=\"hljs-keyword\">const</span> outputPath = [newFontPath].<span class=\"hljs-title function_\">flat</span>();\n    outputPath?.<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">path</span>) =&gt;</span> {\n        res.<span class=\"hljs-title function_\">download</span>(path);\n    });\n\n    <span class=\"hljs-keyword\">return</span> result;\n}\n\n<span class=\"hljs-comment\">// è¾“å‡ºæ˜ å°„å…³ç³»åˆ°å•ç‹¬çš„æ–‡ä»¶ä¸­</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">saveRule</span>(<span class=\"hljs-params\">rule</span>) {\n    fs.<span class=\"hljs-title function_\">writeFileSync</span>(<span class=\"hljs-string\">&#x27;rule.json&#x27;</span>, <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">stringify</span>(rule, <span class=\"hljs-literal\">null</span>, <span class=\"hljs-number\">4</span>));\n}\n\n<span class=\"hljs-keyword\">export</span> { generateFont, saveRule };\n</code></pre>\n<h2 id=\"æ³¨æ„ç‚¹\">æ³¨æ„ç‚¹</h2>\n<p>æœ‰ä¸€äº›éœ€è¦æ³¨æ„çš„åœ°æ–¹</p>\n<h3 id=\"unicodeå€¼\">unicodeå€¼</h3>\n<p>ä¸€äº›èµ„æ–™ä¸­è¡¨è¿°ï¼šåœ¨é‡‡ç”¨NCRæ—¶ï¼Œæ•°å­—å–å€¼ä¸º8192-8303ï¼ˆåå…­è¿›åˆ¶ä¸º<code>2000</code>-<code>206F</code>ï¼‰ï¼Œä½†å®æµ‹255-65535å‡å¯ä»¥ä½¿ç”¨</p>\n<h3 id=\"æ— æ³•å¤ç”¨æ—§çš„glyph\">æ— æ³•å¤ç”¨æ—§çš„Glyph</h3>\n<p>åœ¨ä¸Šè¿°ä»£ç ä¸­</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// ...</span>\n<span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> opentype.<span class=\"hljs-title class_\">Glyph</span>({\n    <span class=\"hljs-attr\">index</span>: index + <span class=\"hljs-number\">1</span>,\n    unicode,\n    <span class=\"hljs-attr\">name</span>: word,\n    path,\n    <span class=\"hljs-attr\">advanceWidth</span>: glyph.<span class=\"hljs-property\">advanceWidth</span>,\n});\n<span class=\"hljs-comment\">// ...</span>\n</code></pre>\n<p>éœ€è¦æ–°ç”Ÿæˆä¸€ä¸ª<code>Glyph</code>ï¼Œåªèƒ½å¤ç”¨è€çš„<code>Glyph</code>çš„ä¸€äº›å‚æ•°</p>\n<h2 id=\"æ€»ç»“\">æ€»ç»“</h2>\n<p>å­—ä½“éƒ½æ˜¯ç”±ä¸€ä¸ªä¸ªå­—ç¬¦ç»„æˆï¼Œæ¯ä¸ªå­—ç¬¦éƒ½æœ‰è‡ªå·±å¯¹åº”çš„å­—å½¢å‚æ•°ã€‚æˆ‘ä»¬å¯ä»¥åŸºäºæºå­—ä½“ï¼Œæå–å‡ºç‰¹å®šçš„å­—ç¬¦ï¼Œè°ƒæ•´è¯¥å­—ç¬¦å¯¹åº”çš„å­—å½¢ï¼Œæœ€åç”Ÿæˆä¸€å¥—æ–°çš„å­—ä½“</p>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://opentype.js.org/\">opentype</a></p>\n"},{"title":"CSSå­¦ä¹ -clip path","tags":["clip:path()"],"categories":"CSS","description":"## WHAT\n\nä¸€ä¸ªCSSå±æ€§\n\nä½¿ç”¨è£å‰ªæ–¹å¼åˆ›å»ºå…ƒç´ çš„å¯æ˜¾ç¤ºåŒºåŸŸã€‚åŒºåŸŸå†…çš„éƒ¨åˆ†æ˜¾ç¤ºï¼ŒåŒºåŸŸå¤–çš„éšè—\n\nèµ·åˆæ˜¯SVGé‡Œçš„ï¼ŒåæŒªç”¨åˆ°CSS\n\n``` css\n/* Keyword values */\nclip-path: none;\n\n/* <clip-source> values */\nclip-path: url(resources.svg);\n\n/* <basic-shape> value","createDate":"2021-12-30 13:52:25","updateDate":"2021-12-30 21:53:08","body":"<h2 id=\"what\">WHAT</h2>\n<p>ä¸€ä¸ªCSSå±æ€§</p>\n<p>ä½¿ç”¨è£å‰ªæ–¹å¼åˆ›å»ºå…ƒç´ çš„å¯æ˜¾ç¤ºåŒºåŸŸã€‚åŒºåŸŸå†…çš„éƒ¨åˆ†æ˜¾ç¤ºï¼ŒåŒºåŸŸå¤–çš„éšè—</p>\n<p>èµ·åˆæ˜¯SVGé‡Œçš„ï¼ŒåæŒªç”¨åˆ°CSS</p>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-comment\">/* Keyword values */</span>\n<span class=\"hljs-attribute\">clip-path</span>: none;\n\n<span class=\"hljs-comment\">/* &lt;clip-source&gt; values */</span>\n<span class=\"hljs-attribute\">clip-path</span>: <span class=\"hljs-built_in\">url</span>(<span class=\"hljs-string\">resources.svg</span>);\n\n<span class=\"hljs-comment\">/* &lt;basic-shape&gt; values */</span>\n<span class=\"hljs-attribute\">clip-path</span>: <span class=\"hljs-built_in\">inset</span>(<span class=\"hljs-number\">100px</span> <span class=\"hljs-number\">50px</span>);\n<span class=\"hljs-attribute\">clip-path</span>: <span class=\"hljs-built_in\">circle</span>(<span class=\"hljs-number\">50px</span> at <span class=\"hljs-number\">0</span> <span class=\"hljs-number\">100px</span>);\n<span class=\"hljs-attribute\">clip-path</span>: <span class=\"hljs-built_in\">polygon</span>(<span class=\"hljs-number\">50%</span> <span class=\"hljs-number\">0%</span>, <span class=\"hljs-number\">100%</span> <span class=\"hljs-number\">50%</span>, <span class=\"hljs-number\">50%</span> <span class=\"hljs-number\">100%</span>, <span class=\"hljs-number\">0%</span> <span class=\"hljs-number\">50%</span>);\n<span class=\"hljs-attribute\">clip-path</span>: <span class=\"hljs-built_in\">path</span>(<span class=\"hljs-string\">&#x27;M0.5,1 C0.5,1,0,0.7,0,0.3 A0.25,0.25,1,1,1,0.5,0.3 A0.25,0.25,1,1,1,1,0.3 C1,0.7,0.5,1,0.5,1 Z&#x27;</span>);\n</code></pre>\n<h2 id=\"why\">WHY</h2>\n<p>æ–¹ä¾¿åˆ›å»ºä¸€äº›ä¸è§„åˆ™çš„å›¾å½¢ï¼Œå¦‚åˆ‡è§’ã€å†…åˆ‡åœ†è§’ã€ç®­å¤´ç­‰</p>\n<h2 id=\"how\">HOW</h2>\n<p>DEMOä½¿ç”¨<code>clip-path: path()</code>æ¥åˆ›å»º</p>\n<p><code>path</code>ç±»ä¼¼äºsvgçš„<code>path</code>æ ‡ç­¾ï¼Œä½¿ç”¨ä¸€ç³»åˆ— å‘½ä»¤+å‚æ•° çš„åºåˆ—æ¥åˆ›å»ºå½¢çŠ¶</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/path.png\" alt=\"SVG-PATH\"></p>\n<p><a href=\"https://yqnn.github.io/svg-path-editor/\">å¯è§†åŒ–ç¼–è¾‘</a></p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-keyword\">html</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">&quot;en&quot;</span>&gt;</span>\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">charset</span>=<span class=\"hljs-string\">&quot;UTF-8&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">http-equiv</span>=<span class=\"hljs-string\">&quot;X-UA-Compatible&quot;</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">&quot;IE=edge&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;viewport&quot;</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>Document<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">style</span>&gt;</span><span class=\"language-css\">\n    <span class=\"hljs-selector-class\">.img</span> {\n      <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">140px</span>;\n      <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">280px</span>;\n      <span class=\"hljs-attribute\">background</span>: <span class=\"hljs-built_in\">linear-gradient</span>(<span class=\"hljs-number\">90deg</span>, <span class=\"hljs-number\">#be0f2d</span>, <span class=\"hljs-number\">#cb364a</span>, <span class=\"hljs-number\">#f5abb7</span>);\n    }\n\n    <span class=\"hljs-selector-class\">.popover</span> {\n      <span class=\"hljs-attribute\">clip-path</span>: <span class=\"hljs-built_in\">polygon</span>(<span class=\"hljs-number\">0%</span> <span class=\"hljs-number\">0%</span>, <span class=\"hljs-number\">100%</span> <span class=\"hljs-number\">0%</span>, <span class=\"hljs-number\">100%</span> <span class=\"hljs-number\">75%</span>, <span class=\"hljs-number\">75%</span> <span class=\"hljs-number\">75%</span>, <span class=\"hljs-number\">50%</span> <span class=\"hljs-number\">100%</span>, <span class=\"hljs-number\">25%</span> <span class=\"hljs-number\">75%</span>, <span class=\"hljs-number\">0%</span> <span class=\"hljs-number\">75%</span>);\n    }\n\n    <span class=\"hljs-selector-class\">.message</span> {\n      <span class=\"hljs-attribute\">clip-path</span>: <span class=\"hljs-built_in\">path</span>(<span class=\"hljs-string\">&#x27;M 20 0 L 260 0 A 20 20 90 0 1 280 20 L 280 100 A 20 20 90 0 1 260 120 L 220 120 L 240 140 L 180 120 L 20 120 A 20 20 90 0 1 0 100 L 0 20 A 20 20 90 0 1 20 0&#x27;</span>);\n    }\n\n    <span class=\"hljs-selector-class\">.coupon</span> {\n      <span class=\"hljs-attribute\">clip-path</span>: <span class=\"hljs-built_in\">path</span>(<span class=\"hljs-string\">&#x27;M 20 0 L 260 0 A 20 20 0 0 0 280 20 L 280 120 A 20 20 0 0 0 260 140 L 20 140 A 20 20 0 0 0 0 120 L 0 20 A 20 20 0 0 0 20 0&#x27;</span>);\n    }\n\n    <span class=\"hljs-selector-class\">.notching</span> {\n      <span class=\"hljs-attribute\">clip-path</span>: <span class=\"hljs-built_in\">path</span>(<span class=\"hljs-string\">&#x27;M 40 0 L 280 0 L 280 100 L 240 140 L 0 140 L 0 40 L 40 0&#x27;</span>);\n    }\n\n    <span class=\"hljs-selector-class\">.outside-circle</span> {\n      <span class=\"hljs-attribute\">clip-path</span>: <span class=\"hljs-built_in\">path</span>(<span class=\"hljs-string\">&#x27;M 40 0 L 240 0 A 20 20 90 0 1 260 20 L 260 120 A 20 20 90 0 0 280 140 L 0 140 A 20 20 90 0 0 20 120 L 20 20 A 20 20 90 0 1 40 0&#x27;</span>);\n    }\n  </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">style</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://bennettfeely.com/clippy/pics/pittsburgh.jpg&quot;</span> <span class=\"hljs-attr\">alt</span>=<span class=\"hljs-string\">&quot;&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;img popover&quot;</span> <span class=\"hljs-attr\">srcset</span>=<span class=\"hljs-string\">&quot;&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">br</span> /&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">br</span> /&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://bennettfeely.com/clippy/pics/pittsburgh.jpg&quot;</span> <span class=\"hljs-attr\">alt</span>=<span class=\"hljs-string\">&quot;&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;img message&quot;</span> <span class=\"hljs-attr\">srcset</span>=<span class=\"hljs-string\">&quot;&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">br</span> /&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">br</span> /&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://bennettfeely.com/clippy/pics/pittsburgh.jpg&quot;</span> <span class=\"hljs-attr\">alt</span>=<span class=\"hljs-string\">&quot;&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;img coupon&quot;</span> <span class=\"hljs-attr\">srcset</span>=<span class=\"hljs-string\">&quot;&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">br</span> /&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">br</span> /&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://bennettfeely.com/clippy/pics/pittsburgh.jpg&quot;</span> <span class=\"hljs-attr\">alt</span>=<span class=\"hljs-string\">&quot;&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;img notching&quot;</span> <span class=\"hljs-attr\">srcset</span>=<span class=\"hljs-string\">&quot;&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">br</span> /&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">br</span> /&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://bennettfeely.com/clippy/pics/pittsburgh.jpg&quot;</span> <span class=\"hljs-attr\">alt</span>=<span class=\"hljs-string\">&quot;&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;img outside-circle&quot;</span> <span class=\"hljs-attr\">srcset</span>=<span class=\"hljs-string\">&quot;&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n</code></pre>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/clip-path.png\" alt=\"clip-path\"></p>\n"},{"title":"React.jså­¦ä¹ -hooksåŸç†ç®€æ","tags":["hooks"],"categories":"React.js","description":"è®©æˆ‘ä»¬ä»å®ç°ä¸¤ä¸ªç®€å•çš„hookå…¥æ‰‹æ¥æ¢ç©¶hooksåŸç†\n\n> [ç¤ºä¾‹ä»£ç ](https://github.com/mrrs878/review)\n\n## useState\n\n`useState`ç”¨äºåœ¨å‡½æ•°å¼ç»„ä»¶ä¸­å£°æ˜å¹¶ä¿å­˜ä¸€ä¸ªå˜é‡ï¼Œ`useState`çš„ä½¿ç”¨æ˜¯è¿™æ ·çš„ï¼š\n\n``` ts\nconst [count, setCount] = useState(0);\n\nconsole.log(cou","createDate":"2021-12-23 11:25:20","updateDate":"2021-12-23 21:56:54","body":"<p>è®©æˆ‘ä»¬ä»å®ç°ä¸¤ä¸ªç®€å•çš„hookå…¥æ‰‹æ¥æ¢ç©¶hooksåŸç†</p>\n<blockquote>\n<p><a href=\"https://github.com/mrrs878/review\">ç¤ºä¾‹ä»£ç </a></p>\n</blockquote>\n<h2 id=\"usestate\">useState</h2>\n<p><code>useState</code>ç”¨äºåœ¨å‡½æ•°å¼ç»„ä»¶ä¸­å£°æ˜å¹¶ä¿å­˜ä¸€ä¸ªå˜é‡ï¼Œ<code>useState</code>çš„ä½¿ç”¨æ˜¯è¿™æ ·çš„ï¼š</p>\n<pre><code class=\"hljs language-ts\"><span class=\"hljs-keyword\">const</span> [count, setCount] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-number\">0</span>);\n\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(count);\n\n<span class=\"hljs-title function_\">setCount</span>(<span class=\"hljs-number\">1</span>);\n\n<span class=\"hljs-title function_\">setCount</span>((pre) + pre + <span class=\"hljs-number\">1</span>);\n</code></pre>\n<p>æœ‰å‡ ä¸ªç‰¹ç‚¹ï¼š</p>\n<ol>\n<li>æ¥å—ä¸€ä¸ªå‡½æ•°æˆ–å€¼ä½œä¸ºå˜é‡çš„åˆå§‹å€¼</li>\n<li>è¿”å›ä¸€ä¸ªæ•°ç»„(å…ƒç»„)ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å˜é‡å€¼ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¯ç”¨æ¥æ›´æ–°å˜é‡å€¼</li>\n<li>è¿”å›çš„æ›´æ–°å‡½æ•°æ”¯æŒä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œæ”¹å‡½æ•°çš„å‚æ•°æ˜¯å½“å‰çš„å˜é‡å€¼</li>\n</ol>\n<p>æ®æ­¤ï¼Œå¯ä»¥å®ç°ä¸€ç‰ˆç®€å•çš„<code>useState</code></p>\n<pre><code class=\"hljs language-ts\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-params\">initialState</span>) {\n    <span class=\"hljs-comment\">// æ²¡æœ‰è€ƒè™‘ä¼ å…¥ä¸€ä¸ªå‡½æ•°çš„æƒ…å†µ</span>\n    <span class=\"hljs-keyword\">let</span> state = initialState;\n    \n    <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">setState</span> = (<span class=\"hljs-params\">newState</span>) =&gt; {\n        state = newState;\n    }\n    \n    <span class=\"hljs-keyword\">return</span> [state, setState];\n}\n</code></pre>\n<p>ä½†åœ¨ä½¿ç”¨çš„æ—¶å€™ä¼šå‘ç°ï¼Œå½“è°ƒç”¨<code>setCount</code>çš„æ—¶å€™ï¼Œ<code>count</code> å¹¶ä¸ä¼šå˜åŒ–ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰å­˜å‚¨<code>state</code>ï¼Œå¯¼è‡´æ¯æ¬¡æ¸²æŸ“ç»„ä»¶çš„æ—¶å€™ï¼Œ<code>state</code>éƒ½ä¼šé‡æ–°è®¾ç½®</p>\n<p>ä¸ºè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¼šè‡ªç„¶è€Œç„¶åœ°æƒ³åˆ°ï¼ŒæŠŠ<code>state</code>æå–å‡ºæ¥ï¼Œå­˜åœ¨<code>useState</code>å¤–é¢ï¼š</p>\n<pre><code class=\"hljs language-ts\"><span class=\"hljs-keyword\">let</span> _state;\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-params\">initialState</span>) {\n  _state = _state || initialState;\n\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">setState</span> = (<span class=\"hljs-params\">newState</span>) =&gt; {\n    _state = <span class=\"hljs-keyword\">typeof</span> newState === <span class=\"hljs-string\">&#x27;function&#x27;</span> ? <span class=\"hljs-title function_\">newState</span>(_state) : newState;\n  };\n\n  <span class=\"hljs-keyword\">return</span> [\n    _state,\n    setState,\n  ];\n}\n</code></pre>\n<p>æµ‹è¯•ç”¨ä¾‹</p>\n<pre><code class=\"hljs language-ts\"><span class=\"hljs-keyword\">import</span> { renderHook, act } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@testing-library/react-hooks&#x27;</span>;\n<span class=\"hljs-keyword\">import</span> { useState } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;./useState_simple&#x27;</span>;\n\n<span class=\"hljs-title function_\">describe</span>(<span class=\"hljs-string\">&#x27;useState_simple&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&#x27;useState should be defined&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title function_\">expect</span>(useState).<span class=\"hljs-title function_\">toBeDefined</span>();\n  });\n\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&#x27;When the update function is called, the data is updated normally&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> { result, rerender } = <span class=\"hljs-title function_\">renderHook</span>(<span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-number\">1</span>));\n\n    <span class=\"hljs-keyword\">const</span> [, setState] = result.<span class=\"hljs-property\">current</span>;\n\n    <span class=\"hljs-title function_\">act</span>(<span class=\"hljs-function\">() =&gt;</span> {\n      <span class=\"hljs-title function_\">setState</span>(<span class=\"hljs-number\">2</span>);\n      <span class=\"hljs-title function_\">rerender</span>();\n    });\n\n    <span class=\"hljs-keyword\">const</span> [state] = result.<span class=\"hljs-property\">current</span>;\n\n    <span class=\"hljs-title function_\">expect</span>(state).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-number\">2</span>);\n  });\n});\n</code></pre>\n<p>è‡³æ­¤ï¼Œå®ç°äº†ä¸€ä¸ªç®€å•çš„<code>useState</code>ï¼Œåè¾¹ä¼šè¿›ä¸€æ­¥å®Œå–„</p>\n<h2 id=\"useeffect\">useEffect</h2>\n<p><code>useEffect</code>çš„ä½¿ç”¨æ˜¯è¿™æ ·çš„</p>\n<pre><code class=\"hljs language-ts\"><span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-comment\">// do something</span>\n});\n\n<span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-comment\">// do something</span>\n}, [])\n\n<span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-comment\">// do something</span>\n}, [deps])\n</code></pre>\n<p><code>useEffect</code>çš„ä½¿ç”¨æœ‰å‡ ä¸ªç‰¹ç‚¹ï¼š</p>\n<ol>\n<li>æœ‰ä¸¤ä¸ªå‚æ•°<code>callback</code>å’Œ<code>deps</code>æ•°ç»„</li>\n<li>å¦‚æœ<code>deps</code>ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆ<code>callback</code>åœ¨æ¯æ¬¡<code>render</code>æ—¶éƒ½ä¼šæ‰§è¡Œ</li>\n<li>å¦‚æœ<code>deps</code>å­˜åœ¨ï¼Œåªæœ‰å½“å®ƒå‘ç”Ÿäº†å˜åŒ–ï¼Œ<code>callback</code>æ‰ä¼šæ‰§è¡Œ</li>\n</ol>\n<p>æ ¹æ®ä½¿ç”¨æ–¹æ³•å’Œç‰¹ç‚¹ï¼Œå¯ä»¥åšä¸€ä¸ªç®€å•åœ°å®ç°ï¼š</p>\n<pre><code class=\"hljs language-tsx\"><span class=\"hljs-keyword\">let</span> _deps;\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-params\">callback, deps</span>) {\n  <span class=\"hljs-keyword\">const</span> hasNoDeps = !deps;\n  <span class=\"hljs-keyword\">const</span> hasChangeDeps = _deps\n    ? !deps?.<span class=\"hljs-title function_\">every</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">dep, index</span>) =&gt;</span> _deps[index] === dep)\n    : <span class=\"hljs-literal\">true</span>;\n\n  <span class=\"hljs-keyword\">if</span> (hasNoDeps || hasChangeDeps) {\n    <span class=\"hljs-title function_\">callback</span>();\n    _deps = deps;\n  }\n}\n</code></pre>\n<p>æµ‹è¯•ç”¨ä¾‹</p>\n<pre><code class=\"hljs language-ts\"><span class=\"hljs-keyword\">import</span> { renderHook, act } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@testing-library/react-hooks&#x27;</span>;\n<span class=\"hljs-keyword\">import</span> { useEffect } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;./useEffect_simple&#x27;</span>;\n\n<span class=\"hljs-title function_\">describe</span>(<span class=\"hljs-string\">&#x27;useEffect_simple&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&#x27;useEffect should be defined&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title function_\">expect</span>(useEffect).<span class=\"hljs-title function_\">toBeDefined</span>();\n  });\n\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&#x27;When deps is empty, every rendering callback should be executed&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> callback = jest.<span class=\"hljs-title function_\">fn</span>();\n    <span class=\"hljs-keyword\">const</span> { rerender } = <span class=\"hljs-title function_\">renderHook</span>(<span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-title function_\">useEffect</span>(callback));\n\n    <span class=\"hljs-title function_\">expect</span>(callback).<span class=\"hljs-title function_\">toBeCalledTimes</span>(<span class=\"hljs-number\">1</span>);\n\n    <span class=\"hljs-title function_\">act</span>(<span class=\"hljs-function\">() =&gt;</span> {\n      <span class=\"hljs-title function_\">rerender</span>();\n    });\n\n    <span class=\"hljs-title function_\">expect</span>(callback).<span class=\"hljs-title function_\">toBeCalledTimes</span>(<span class=\"hljs-number\">2</span>);\n  });\n\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&#x27;When deps is an empty array, render multiple times but callback should only be called once&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> callback = jest.<span class=\"hljs-title function_\">fn</span>();\n    <span class=\"hljs-keyword\">const</span> { rerender } = <span class=\"hljs-title function_\">renderHook</span>(<span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-title function_\">useEffect</span>(callback, []));\n\n    <span class=\"hljs-title function_\">expect</span>(callback).<span class=\"hljs-title function_\">toBeCalledTimes</span>(<span class=\"hljs-number\">1</span>);\n\n    <span class=\"hljs-title function_\">act</span>(<span class=\"hljs-function\">() =&gt;</span> {\n      <span class=\"hljs-title function_\">rerender</span>();\n    });\n\n    <span class=\"hljs-title function_\">expect</span>(callback).<span class=\"hljs-title function_\">toBeCalledTimes</span>(<span class=\"hljs-number\">1</span>);\n  });\n\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&#x27;When deps is changed, callback should be called&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> callback = jest.<span class=\"hljs-title function_\">fn</span>();\n    <span class=\"hljs-keyword\">const</span> { rerender } = <span class=\"hljs-title function_\">renderHook</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">{ name }</span>) =&gt;</span> <span class=\"hljs-title function_\">useEffect</span>(callback, [name]), {\n      <span class=\"hljs-attr\">initialProps</span>: {\n        <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&#x27;tom&#x27;</span>,\n      },\n    });\n\n    <span class=\"hljs-title function_\">expect</span>(callback).<span class=\"hljs-title function_\">toBeCalledTimes</span>(<span class=\"hljs-number\">1</span>);\n\n    <span class=\"hljs-title function_\">act</span>(<span class=\"hljs-function\">() =&gt;</span> {\n      <span class=\"hljs-title function_\">rerender</span>({\n        <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&#x27;jerry&#x27;</span>,\n      });\n    });\n\n    <span class=\"hljs-title function_\">expect</span>(callback).<span class=\"hljs-title function_\">toBeCalledTimes</span>(<span class=\"hljs-number\">2</span>);\n  });\n});\n</code></pre>\n<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬åˆå®ç°äº†ä¸€ä¸ªå¯ä»¥å·¥ä½œçš„ä¸ç‰ˆ<code>useEffect</code>ï¼Œhookè²Œä¼¼æ²¡æœ‰é‚£ä¹ˆéš¾</p>\n<h2 id=\"ä¼˜åŒ–\">ä¼˜åŒ–</h2>\n<p>æˆ‘ä»¬ä¸Šè¾¹å®ç°çš„ä¸¤ä¸ªç®€å•çš„hookå­˜åœ¨ä¸€ä¸ªè‡´å‘½ç¼ºç‚¹ï¼Œåœ¨ä¸€ä¸ªç»„ä»¶å†…åªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œå¯¹æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†<code>_state</code>å’Œ<code>_deps</code>ä¿å­˜è‡³ä¸€ä¸ªå…¨å±€æ•°ç»„<code>memoizedState </code>ä¸­ï¼Œå¹¶ç”¨ä¸€ä¸ªå˜é‡å­˜å‚¨å½“å‰<code>memoizedState</code>ä¸‹æ ‡</p>\n<pre><code class=\"hljs language-ts\"><span class=\"hljs-keyword\">let</span> memoizedStates = []; <span class=\"hljs-comment\">// hookså­˜æ”¾åœ¨è¿™ä¸ªæ•°ç»„</span>\n<span class=\"hljs-keyword\">let</span> cursor = <span class=\"hljs-number\">0</span>; <span class=\"hljs-comment\">// å½“å‰memoizedStateä¸‹æ ‡</span>\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-params\">initialState</span>) {\n  memoizedStates[cursor] = memoizedStates[cursor] || initialState;\n\n  <span class=\"hljs-keyword\">const</span> currentCursor = cursor;\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">setState</span> = (<span class=\"hljs-params\">newState</span>) =&gt; {\n    memoizedStates[currentCursor] = <span class=\"hljs-keyword\">typeof</span> newState === <span class=\"hljs-string\">&#x27;function&#x27;</span>\n      ? <span class=\"hljs-title function_\">newState</span>(memoizedStates[currentCursor])\n      : newState;\n  };\n\n  <span class=\"hljs-keyword\">const</span> res = [memoizedStates[cursor], setState];\n  cursor += <span class=\"hljs-number\">1</span>;\n\n  <span class=\"hljs-keyword\">return</span> res;\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-params\">callback, deps</span>) {\n  <span class=\"hljs-keyword\">const</span> hasNoDeps = deps === <span class=\"hljs-literal\">undefined</span>;\n  <span class=\"hljs-keyword\">const</span> preDeps = memoizedStates[cursor];\n  <span class=\"hljs-keyword\">const</span> hasChangedDeps = preDeps\n    ? !deps.<span class=\"hljs-title function_\">every</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">dep, index</span>) =&gt;</span> dep === preDeps[index])\n    : <span class=\"hljs-literal\">true</span>;\n\n  <span class=\"hljs-keyword\">if</span> (hasNoDeps || hasChangedDeps) {\n    <span class=\"hljs-title function_\">callback</span>();\n    memoizedStates[cursor] = deps;\n  }\n\n  cursor += <span class=\"hljs-number\">1</span>;\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">resetCursor</span>(<span class=\"hljs-params\"></span>) {\n  cursor = <span class=\"hljs-number\">0</span>;\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">resetMemoizedStates</span>(<span class=\"hljs-params\"></span>) {\n  memoizedStates = [];\n}\n</code></pre>\n<p><strong>Not Magic, just Arrays</strong></p>\n<p>æµ‹è¯•ç”¨ä¾‹</p>\n<pre><code class=\"hljs language-ts\"><span class=\"hljs-keyword\">import</span> { act, renderHook } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@testing-library/react-hooks&#x27;</span>;\n<span class=\"hljs-keyword\">import</span> {\n  resetCursor, useEffect, useState, resetMemoizedStates,\n} <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;./useState_useEffect&#x27;</span>;\n<span class=\"hljs-title function_\">describe</span>(<span class=\"hljs-string\">&#x27;useState_simple&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&#x27;useState should be defined&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title function_\">expect</span>(useState).<span class=\"hljs-title function_\">toBeDefined</span>();\n  });\n\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&#x27;When the update function is called, the data is updated normally&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">usePeople</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n      <span class=\"hljs-keyword\">const</span> [age, setAge] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-number\">1</span>);\n      <span class=\"hljs-keyword\">const</span> [name, setName] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-string\">&#x27;tom&#x27;</span>);\n\n      <span class=\"hljs-keyword\">return</span> [age, setAge, name, setName];\n    };\n    <span class=\"hljs-keyword\">const</span> { result, rerender } = <span class=\"hljs-title function_\">renderHook</span>(<span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-title function_\">usePeople</span>());\n\n    <span class=\"hljs-title function_\">expect</span>(result.<span class=\"hljs-property\">current</span>[<span class=\"hljs-number\">0</span>]).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-number\">1</span>);\n    <span class=\"hljs-title function_\">expect</span>(result.<span class=\"hljs-property\">current</span>[<span class=\"hljs-number\">2</span>]).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-string\">&#x27;tom&#x27;</span>);\n\n    <span class=\"hljs-title function_\">act</span>(<span class=\"hljs-function\">() =&gt;</span> {\n      result.<span class=\"hljs-property\">current</span>[<span class=\"hljs-number\">1</span>](<span class=\"hljs-function\">(<span class=\"hljs-params\">pre</span>) =&gt;</span> pre + <span class=\"hljs-number\">1</span>);\n      <span class=\"hljs-title function_\">resetCursor</span>();\n      <span class=\"hljs-title function_\">rerender</span>();\n    });\n\n    <span class=\"hljs-title function_\">expect</span>(result.<span class=\"hljs-property\">current</span>[<span class=\"hljs-number\">0</span>]).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-number\">2</span>);\n    <span class=\"hljs-title function_\">expect</span>(result.<span class=\"hljs-property\">current</span>[<span class=\"hljs-number\">2</span>]).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-string\">&#x27;tom&#x27;</span>);\n\n    <span class=\"hljs-title function_\">act</span>(<span class=\"hljs-function\">() =&gt;</span> {\n      result.<span class=\"hljs-property\">current</span>[<span class=\"hljs-number\">3</span>](<span class=\"hljs-string\">&#x27;tom&amp;jerry&#x27;</span>);\n      <span class=\"hljs-title function_\">resetCursor</span>();\n      <span class=\"hljs-title function_\">rerender</span>();\n    });\n\n    <span class=\"hljs-title function_\">expect</span>(result.<span class=\"hljs-property\">current</span>[<span class=\"hljs-number\">0</span>]).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-number\">2</span>);\n    <span class=\"hljs-title function_\">expect</span>(result.<span class=\"hljs-property\">current</span>[<span class=\"hljs-number\">2</span>]).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-string\">&#x27;tom&amp;jerry&#x27;</span>);\n  });\n});\n\n<span class=\"hljs-title function_\">describe</span>(<span class=\"hljs-string\">&#x27;useEffect_simple&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-title function_\">beforeEach</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title function_\">resetCursor</span>();\n    <span class=\"hljs-title function_\">resetMemoizedStates</span>();\n  });\n\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&#x27;useEffect should be defined&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title function_\">expect</span>(useEffect).<span class=\"hljs-title function_\">toBeDefined</span>();\n  });\n\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&#x27;Different DEPs, Callback calls should also be differentcalls should also be different&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> callbackWithNoDeps = jest.<span class=\"hljs-title function_\">fn</span>();\n    <span class=\"hljs-keyword\">const</span> callbackWithEmptyDeps = jest.<span class=\"hljs-title function_\">fn</span>();\n    <span class=\"hljs-keyword\">const</span> callbackWithChangingDeps = jest.<span class=\"hljs-title function_\">fn</span>();\n\n    <span class=\"hljs-keyword\">let</span> name = <span class=\"hljs-string\">&#x27;tom&#x27;</span>;\n\n    <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">useProple</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n      <span class=\"hljs-title function_\">useEffect</span>(callbackWithNoDeps);\n      <span class=\"hljs-title function_\">useEffect</span>(callbackWithEmptyDeps, []);\n      <span class=\"hljs-title function_\">useEffect</span>(callbackWithChangingDeps, [name]);\n    };\n\n    <span class=\"hljs-keyword\">const</span> { rerender } = <span class=\"hljs-title function_\">renderHook</span>(<span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-title function_\">useProple</span>());\n\n    <span class=\"hljs-title function_\">expect</span>(callbackWithNoDeps).<span class=\"hljs-title function_\">toBeCalledTimes</span>(<span class=\"hljs-number\">1</span>);\n    <span class=\"hljs-title function_\">expect</span>(callbackWithEmptyDeps).<span class=\"hljs-title function_\">toBeCalledTimes</span>(<span class=\"hljs-number\">1</span>);\n    <span class=\"hljs-title function_\">expect</span>(callbackWithChangingDeps).<span class=\"hljs-title function_\">toBeCalledTimes</span>(<span class=\"hljs-number\">1</span>);\n\n    <span class=\"hljs-title function_\">act</span>(<span class=\"hljs-function\">() =&gt;</span> {\n      name = <span class=\"hljs-string\">&#x27;tom&amp;jerry&#x27;</span>;\n      <span class=\"hljs-title function_\">resetCursor</span>();\n      <span class=\"hljs-title function_\">rerender</span>();\n    });\n\n    <span class=\"hljs-title function_\">expect</span>(callbackWithNoDeps).<span class=\"hljs-title function_\">toBeCalledTimes</span>(<span class=\"hljs-number\">2</span>);\n    <span class=\"hljs-title function_\">expect</span>(callbackWithEmptyDeps).<span class=\"hljs-title function_\">toBeCalledTimes</span>(<span class=\"hljs-number\">1</span>);\n    <span class=\"hljs-title function_\">expect</span>(callbackWithChangingDeps).<span class=\"hljs-title function_\">toBeCalledTimes</span>(<span class=\"hljs-number\">2</span>);\n\n    <span class=\"hljs-title function_\">act</span>(<span class=\"hljs-function\">() =&gt;</span> {\n      <span class=\"hljs-title function_\">resetCursor</span>();\n      <span class=\"hljs-title function_\">rerender</span>();\n    });\n\n    <span class=\"hljs-title function_\">expect</span>(callbackWithNoDeps).<span class=\"hljs-title function_\">toBeCalledTimes</span>(<span class=\"hljs-number\">3</span>);\n    <span class=\"hljs-title function_\">expect</span>(callbackWithEmptyDeps).<span class=\"hljs-title function_\">toBeCalledTimes</span>(<span class=\"hljs-number\">1</span>);\n    <span class=\"hljs-title function_\">expect</span>(callbackWithChangingDeps).<span class=\"hljs-title function_\">toBeCalledTimes</span>(<span class=\"hljs-number\">2</span>);\n  });\n});\n</code></pre>\n<h2 id=\"çœŸæ­£çš„reactå®ç°\">çœŸæ­£çš„Reactå®ç°</h2>\n<p>è™½ç„¶æˆ‘ä»¬ç”¨æ•°ç»„åŸºæœ¬å®ç°äº†ä¸€ä¸ªå¯ç”¨çš„Hooksï¼Œäº†è§£äº†Hooksçš„åŸç†ï¼Œä½†åœ¨Reactä¸­ï¼Œå®ç°æ–¹å¼å´æœ‰ä¸€äº›å·®å¼‚çš„ã€‚</p>\n<ol>\n<li>Reactä¸­æ˜¯é€šè¿‡ç±»ä¼¼å•é“¾è¡¨çš„å½¢å¼æ¥ä»£æ›¿æ•°ç»„çš„ã€‚é€šè¿‡<code>next</code>æŒ‰é¡ºåºä¸²è”æ‰€æœ‰çš„<code>hook</code></li>\n<li><code>memoizedState</code>ï¼Œ<code>cursor</code>æ˜¯å­˜åœ¨å“ªé‡Œçš„ï¼Ÿå¦‚ä½•å’Œæ¯ä¸ªå‡½æ•°ç»„ä»¶ä¸€ä¸€å¯¹åº”çš„ï¼Ÿ</li>\n</ol>\n<p>æˆ‘ä»¬çŸ¥é“ï¼ŒReactä¼šç”Ÿæˆä¸€æ£µç»„ä»¶æ ‘ï¼ˆæˆ–Fiberå•é“¾è¡¨ï¼‰ï¼Œæ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹å¯¹åº”äº†ä¸€ä¸ªç»„ä»¶ï¼Œhooksçš„æ•°æ®å°±ä½œä¸ºç»„ä»¶çš„ä¸€ä¸ªä¿¡æ¯ï¼Œå­˜å‚¨åœ¨è¿™äº›èŠ‚ç‚¹ä¸Šï¼Œ<strong>ä¼´éšç»„ä»¶ä¸€èµ·å‡ºç”Ÿï¼Œä¸€èµ·æ­»äº¡</strong>ã€‚</p>\n<pre><code class=\"hljs language-ts\"><span class=\"hljs-keyword\">type</span> <span class=\"hljs-title class_\">Hooks</span> = {\n    <span class=\"hljs-comment\">// others</span>\n    <span class=\"hljs-attr\">memoizedState</span>: <span class=\"hljs-built_in\">any</span>, <span class=\"hljs-comment\">// useStateä¸­ ä¿å­˜ state ä¿¡æ¯ ï½œ useEffect ä¸­ ä¿å­˜ç€ effect å¯¹è±¡ ï½œ useMemo ä¸­ ä¿å­˜çš„æ˜¯ç¼“å­˜çš„å€¼å’Œ deps ï½œ useRef ä¸­ä¿å­˜çš„æ˜¯ ref å¯¹è±¡</span>\n    <span class=\"hljs-attr\">next</span>: <span class=\"hljs-title class_\">Hook</span> | <span class=\"hljs-literal\">null</span>, <span class=\"hljs-comment\">// link åˆ°ä¸‹ä¸€ä¸ª hooksï¼Œé€šè¿‡ next ä¸²è”æ¯ä¸€ä¸ªhooks</span>\n}\n</code></pre>\n<h2 id=\"è§£æƒ‘\">è§£æƒ‘</h2>\n<p>Q. ä¸ºä»€ä¹ˆåªèƒ½åœ¨å‡½æ•°æœ€å¤–å±‚è°ƒç”¨Hookï¼Œä¸è¦åœ¨å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­æˆ–è€…å­å‡½æ•°ä¸­è°ƒç”¨ï¼Ÿ</p>\n<p>A. <code>memoizedState</code>æ˜¯æŒ‰hookå®šä¹‰çš„é¡ºåºæ¥æ”¾ç½®æ•°æ®çš„ï¼Œå¦‚æœhooké¡ºåºå˜åŒ–ï¼Œ<code>memoizedState</code>å¹¶ä¸ä¼šæ„ŸçŸ¥åˆ°</p>\n<p>Q. ä¸ºä»€ä¹ˆ<code>useEffect</code>ç¬¬äºŒä¸ªå‚æ•°æ˜¯ç©ºæ•°ç»„ï¼Œåœ¨ç»„ä»¶æ›´æ–°æ—¶å›è°ƒåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Ÿ</p>\n<p>A. å› ä¸ºä¾èµ–ä¸€ç›´ä¸å˜åŒ–ï¼Œ<code>callback</code>ä¸ä¼šäºŒæ¬¡æ‰§è¡Œ</p>\n<p>Q. è‡ªå®šä¹‰çš„Hookæ˜¯å¦‚ä½•å½±å“ä½¿ç”¨å®ƒçš„å‡½æ•°ç»„ä»¶çš„ï¼Ÿ</p>\n<p>A. å…±äº«åŒä¸€ä¸ª<code>memoizedState</code>ï¼Œå…±äº«åŒä¸€ä¸ªé¡ºåº</p>\n<p>Q. Capture Value ç‰¹æ€§æ˜¯å¦‚ä½•äº§ç”Ÿçš„ï¼Ÿ</p>\n<p>A. æ¯ä¸€æ¬¡<code>rerender</code>çš„æ—¶å€™ï¼Œéƒ½æ˜¯é‡æ–°å»æ‰§è¡Œå‡½æ•°ç»„ä»¶äº†ï¼Œå¯¹äºä¹‹å‰å·²ç»æ‰§è¡Œè¿‡çš„å‡½æ•°ç»„ä»¶ï¼Œå¹¶ä¸ä¼šåšä»»ä½•æ“ä½œã€‚å³<strong>æ¯æ¬¡æ¸²æŸ“ï¼ˆæ‰§è¡Œï¼‰ï¼Œéƒ½æœ‰å®ƒè‡ªå·±çš„xxx</strong></p>\n"},{"title":"SVGå­¦ä¹ -stroke-dashoffsetå’Œstroke-dasharray","tags":["SVG"],"categories":"å‰ç«¯æ¶æ„&è½¯å®åŠ›","description":"## èµ·å› \n\nå‘¨æœ«ç©æ¸¸æˆçš„æ—¶å€™å‘ç°æ¸¸æˆå†…æœ‰ä¸€ä¸ªæŒ‰é’®çš„äº¤äº’æŒºæœ‰è¶£ï¼Œç±»ä¼¼äºè¿™ç§æ•ˆæœ\n\n![button-svg](https://mrrsblog.oss-cn-shanghai.aliyuncs.com/button-svg.gif)\n\nç‚¹å‡»åè¾¹æ¡†æœ‰ä¸€ä¸ªè¿›åº¦æ¡ï¼Œé¼ æ ‡é•¿æŒ‰è¿›åº¦ä¼šå¢åŠ ï¼ŒæŠ¬èµ·åå›åˆ°èµ·å§‹ä½ç½®\n\nå’¦ï¼Œæœ‰ç‚¹æ„æ€\n\n![å› å‚æ–¯æ±€](https://mrrsblog.oss-cn-shangha","createDate":"2021-11-24 13:35:30","updateDate":"2021-11-25 21:54:36","body":"<h2 id=\"èµ·å› \">èµ·å› </h2>\n<p>å‘¨æœ«ç©æ¸¸æˆçš„æ—¶å€™å‘ç°æ¸¸æˆå†…æœ‰ä¸€ä¸ªæŒ‰é’®çš„äº¤äº’æŒºæœ‰è¶£ï¼Œç±»ä¼¼äºè¿™ç§æ•ˆæœ</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/button-svg.gif\" alt=\"button-svg\"></p>\n<p>ç‚¹å‡»åè¾¹æ¡†æœ‰ä¸€ä¸ªè¿›åº¦æ¡ï¼Œé¼ æ ‡é•¿æŒ‰è¿›åº¦ä¼šå¢åŠ ï¼ŒæŠ¬èµ·åå›åˆ°èµ·å§‹ä½ç½®</p>\n<p>å’¦ï¼Œæœ‰ç‚¹æ„æ€</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/interesting.gif\" alt=\"å› å‚æ–¯æ±€\"></p>\n<p>äºæ˜¯å°±æƒ³ç€èƒ½ä¸èƒ½ä½¿ç”¨å‰ç«¯çš„ä¸€äº›æŠ€æœ¯å®ç°ğŸ¤”</p>\n<p>äºæ˜¯å¼€å§‹ä¸€ç³»åˆ—çš„å°è¯•ï¼ˆæ­¤å¤„çœç•¥è‹¥å¹²å­—ï¼‰ï¼Œå‘ç°è§¦åŠåˆ°çŸ¥è¯†ç›²åŒºäº†ğŸ˜­ï¼Œæ ¹æœ¬æ— ä»ä¸‹æ‰‹</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/interesting2.png\" alt=\"çŸ¥è¯†ç›²åŒº\"></p>\n<h2 id=\"è½¬æœº\">è½¬æœº</h2>\n<p>çªç„¶ä¸çŸ¥é“æ€ä¹ˆå°±æƒ³åˆ°SVGäº†ï¼Œæƒ³ç€è¦ä¸è¯•è¯•ï¼Ÿæ²¡å‡†èƒ½è¡Œï¼Œç„¶åä¸€é¡¿æœç´¢ï¼Œçœ¼å‰ä¸€äº®</p>\n<p>æœ‰å¤§ä½¬ä½¿ç”¨<code>stroke</code>å’Œ<code>stroke-dashoffset</code>åŠ<code>stroke-dasharray</code>åšå‡ºè¿›åº¦æ¡ï¼ŒåŒæ—¶åˆæƒ³åˆ°SVGå¯ä»¥å’ŒJavaScriptäº¤äº’ï¼Œè²Œä¼¼å¯ä»¥å®ç°æˆ‘çš„éœ€æ±‚</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/interesting3.png\" alt=\"å¥‡æ€ªçš„çŸ¥è¯†å¢åŠ äº†\"></p>\n<h2 id=\"stork-dashoffsetå’Œstork-dasharray\">stork-dashoffsetå’Œstork-dasharray</h2>\n<p>é‚£ä¹ˆ<code>stroke</code>å’Œ<code>stroke-dashoffset</code>ä»¥åŠ<code>stroke-dasharray</code>æ˜¯ä½•æ–¹ç¥åœ£è…»ï¼ŸğŸ¤”</p>\n<p><code>stroke</code>: æè¾¹ï¼Œæ¥å—ä¸€ä¸ªé¢œè‰²å€¼ã€‚å¯ä½œç”¨äºå¤§éƒ¨åˆ†SVGå…ƒç´ </p>\n<p><code>stroke-dasharray</code>: ç”¨äºåˆ›å»ºè™šçº¿æè¾¹</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// è¡¨ç¤ºï¼šè™šçº¿é•¿10ï¼Œé—´è·10ï¼Œç„¶åé‡å¤ è™šçº¿é•¿10ï¼Œé—´è·10</span>\nstroke-dasharray = <span class=\"hljs-string\">&#x27;10&#x27;</span>\n\n<span class=\"hljs-comment\">// è¡¨ç¤ºï¼šè™šçº¿é•¿10ï¼Œé—´è·5ï¼Œç„¶åé‡å¤ è™šçº¿é•¿10ï¼Œé—´è·5</span>\nstroke-dasharray = <span class=\"hljs-string\">&#x27;10, 5&#x27;</span>\n\n<span class=\"hljs-comment\">// å½“ç„¶è¿˜æœ‰æ›´å¤æ‚çš„è®¾ç½®è¿™é‡Œå°±ä¸ç»†è®²äº†</span>\n</code></pre>\n<p><code>stroke-dashoffset</code>ï¼šå­—å¦‚å…¶æ„ï¼Œè¡¨ç¤ºstrokeçš„åç§»ã€‚è¿™ä¸ªå±æ€§æ˜¯ç›¸å¯¹äºèµ·å§‹ç‚¹çš„åç§»ï¼Œ<strong>æ­£æ•°</strong>åç§»xå€¼çš„æ—¶å€™ï¼Œç›¸å½“äºå¾€<strong>å·¦</strong>ç§»åŠ¨äº†xä¸ªé•¿åº¦å•ä½ï¼Œ<strong>è´Ÿæ•°</strong>åç§»xçš„æ—¶å€™ï¼Œç›¸å½“äºå¾€<strong>å³</strong>ç§»åŠ¨äº†xä¸ªé•¿åº¦å•ä½</p>\n<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ç®¡åç§»çš„æ–¹å‘æ˜¯å“ªè¾¹ï¼Œè¦è®°å¾—dasharray æ˜¯å¾ªç¯çš„ï¼Œä¹Ÿå°±æ˜¯ è™šçº¿-é—´éš”-è™šçº¿-é—´éš”ã€‚\n<code>stroke-dashoffset</code>è¦æ­é…<code>stroke-dasharray</code>æ‰èƒ½çœ‹å¾—å‡ºæ¥æ•ˆæœï¼Œéè™šçº¿çš„è¯ï¼Œæ˜¯æ— æ³•çœ‹å‡ºåç§»çš„ã€‚</p>\n<p>æ¦‚å¿µæœ‰ç‚¹æŠ½è±¡ï¼Œæ¥çœ‹ä¸€ä¸ªMDNçš„ä¾‹å­ï¼Œå›¾ä¸­çº¢çº¿æ®µæ˜¯åç§»çš„è·ç¦»</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/stroke-dashoffset.png\" alt=\"stroke-dashoffset\"></p>\n<p>ä¸Šå›¾æ•ˆæœåˆ†åˆ«æ˜¯ï¼š</p>\n<ol>\n<li>æ²¡æœ‰è™šçº¿</li>\n<li><code>stroke-dasharray=&quot;3 1&quot;</code> ï¼Œè™šçº¿æ²¡æœ‰è®¾ç½®åç§»ï¼Œä¹Ÿå°±æ˜¯stroke-dashoffsetå€¼ä¸º0</li>\n<li><code>stroke-dashoffset=&quot;3&quot;</code>ï¼Œåç§»æ­£æ•°ï¼Œè™šçº¿æ•´ä½“å·¦ç§»äº†3ä¸ªå•ä½ï¼Œå›¾ä¸­3åé¢çš„çº¢çº¿æ®µï¼Œå°±æ˜¯èµ·å§‹çº¿æ®µï¼Œçº¿æ®µä¹‹åæ˜¯1ä¸ªå•ä½çš„é—´éš”ï¼Œæˆ‘ä»¬å¯è§åŒºåŸŸä»è¿™ä¸ªé—´éš”å¼€å§‹ï¼Œç„¶åå¾ªç¯ 3-1,3-1çš„è™šçº¿-é—´éš”-è™šçº¿-é—´éš”</li>\n<li><code>stroke-dashoffset=&quot;-3&quot;</code>ï¼Œåç§»è´Ÿæ•°ï¼Œè™šçº¿æ•´ä½“å³ç§»åŠ¨äº†3ä¸ªå•ä½ï¼Œç”±äºdasharray æ˜¯å¾ªç¯çš„ï¼Œå‰é¢åç§»çš„ä½ç½®ä¼šæœ‰dasharray å¡«å……ä¸Š</li>\n<li><code>stroke-dashoffset=&quot;1&quot;</code>ï¼Œåç§»æ­£æ•°ï¼Œè™šçº¿æ•´ä½“å·¦ç§»äº†1ä¸ªå•ä½ï¼Œæœ€ç»ˆå‘ˆç°å‡ºæ¥çš„æ•ˆæœè·Ÿ çº¿æ®µ4 ä¸€æ ·</li>\n</ol>\n<p><strong>åˆ©ç”¨è¿™ä¸¤ä¸ªå±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åšå‡ºå¥½çœ‹çš„åŠ¨ç”»æ•ˆæœ</strong></p>\n<ol>\n<li><p>è®¾ç½®<code>stroke-dasharray</code>ä¸º<em>å›¾å½¢è¾¹é•¿</em></p>\n</li>\n<li><p>è®¾ç½®<code>stroke-dashoffset</code>ä¸º<em>å›¾å½¢è¾¹é•¿</em></p>\n</li>\n<li><p>åŠ¨æ€å‡å°‘<code>stroke-dashoffset</code>åˆ°0</p>\n</li>\n</ol>\n<p>ç®€æï¼šç¬¬ä¸€æ­¥åå°±æœ‰ä¸€ä¸ªé•¿åº¦ä¸ºå›¾å½¢è¾¹é•¿çš„<em>é•¿æ¡</em>ï¼Œç¬¬äºŒæ­¥ç”±äºè®¾ç½®äº†<code>stroke-dashoffset</code>ä¹Ÿä¸ºå›¾å½¢è¾¹é•¿ï¼Œå› æ­¤<em>é•¿æ¡</em>ä¼šè¢«æ¨åˆ°ä¸å¯è§çš„ä½ç½®ï¼Œå†é€šè¿‡ç¬¬ä¸‰æ­¥ä¸­åŠ¨æ€å‡å°‘<code>stroke-dashoffset</code>ï¼Œç¬¬ä¸€æ­¥ä¸­ç»˜åˆ¶çš„<em>é•¿æ¡</em>å°±ä¼šæ…¢æ…¢<em>å¢é•¿</em>å¹¶æ˜¾ç¤ºå‡ºæ¥</p>\n<h2 id=\"å†æ¬¡æŒ‘æˆ˜\">å†æ¬¡æŒ‘æˆ˜</h2>\n<p>åˆšå¼€å§‹æ˜¯æƒ³ä½¿ç”¨<code>rect</code>æ¥åšçš„ï¼Œä½†å‘ç°æ¸¸æˆä¸­çš„æŒ‰é’®æ˜¯æœ‰ä¸€å®šçš„åœ†è§’çš„ï¼Œ<code>rect</code>åœ¨è®¾ç½®åœ†è§’ä¹‹åå†æ·»åŠ <code>storke</code>æœ‰ç‚¹ä¸‘ï¼Œé‚æ”¾å¼ƒï¼Œæ”¹ç”¨<code>path</code>å®ç°</p>\n<p>è§‚å¯ŸåŸå›¾ï¼Œå®ç°æ€è·¯å¦‚ä¸‹ï¼š</p>\n<ol>\n<li><p>è¾¹æ¡†å¯ä»¥ä½¿ç”¨<code>path</code>ç»˜åˆ¶å‡ºæ¥</p>\n</li>\n<li><p>è¾¹æ¡†èƒŒæ™¯ä¹Ÿä½¿ç”¨<code>path</code>ç»˜åˆ¶ï¼ˆåŒä¸€å¥—<code>d</code>å±æ€§ï¼‰ï¼Œè®¾ç½®ä¸€ä¸‹<code>opacity</code>å³å¯</p>\n</li>\n<li><p>èƒŒæ™¯è‰²ä½¿ç”¨SVGçš„<code>fill</code>å¡«å……å‡ºæ¥</p>\n</li>\n<li><p>æ–‡å­—ä½¿ç”¨<code>text</code>ç»˜åˆ¶</p>\n</li>\n</ol>\n<p>å®ç°ä»£ç å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-keyword\">html</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">&quot;en&quot;</span>&gt;</span>\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">charset</span>=<span class=\"hljs-string\">&quot;UTF-8&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">http-equiv</span>=<span class=\"hljs-string\">&quot;X-UA-Compatible&quot;</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">&quot;IE=edge&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;viewport&quot;</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>SVG<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">style</span>&gt;</span><span class=\"language-css\">\n        <span class=\"hljs-selector-id\">#svg</span><span class=\"hljs-selector-pseudo\">:active</span> {\n            <span class=\"hljs-attribute\">opacity</span>: <span class=\"hljs-number\">0.9</span>;\n        }\n        <span class=\"hljs-selector-id\">#path</span>, <span class=\"hljs-selector-id\">#background</span> {\n            stroke-<span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">3</span>;\n            stroke: <span class=\"hljs-number\">#f00</span>;\n            <span class=\"hljs-attribute\">cursor</span>: pointer;\n            \n            <span class=\"hljs-comment\">/** \n             * ä¿®æ­£ä½ç½®ï¼Œè®¾ç½®æ°´å¹³å‚ç›´å±…ä¸­\n             */</span>\n            <span class=\"hljs-attribute\">transform</span>: <span class=\"hljs-built_in\">translate</span>(<span class=\"hljs-number\">5px</span>, <span class=\"hljs-number\">5px</span>);\n        }\n        <span class=\"hljs-selector-id\">#background</span> {\n            <span class=\"hljs-attribute\">opacity</span>: <span class=\"hljs-number\">0.2</span>;\n        }\n        <span class=\"hljs-selector-id\">#text</span> {\n            user-select: none;\n            <span class=\"hljs-attribute\">cursor</span>: pointer;\n            fill: <span class=\"hljs-number\">#000</span>;\n            \n            <span class=\"hljs-comment\">/** \n             * è®¾ç½®æ°´å¹³å‚ç›´å±…ä¸­\n             */</span>\n            dominant-baseline: middle;\n            text-anchor: middle;\n        }\n    </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">style</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n        <span class=\"hljs-keyword\">let</span> rafId = -<span class=\"hljs-number\">1</span>;\n        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">WIDTH</span> = <span class=\"hljs-number\">70</span>;\n        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">HEIGHT</span> = <span class=\"hljs-number\">30</span>;\n        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">RADIUS</span> = <span class=\"hljs-number\">6</span>;\n        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">DEFAULT_OFFSET</span> = <span class=\"hljs-number\">15</span>;\n        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">STORK_LENGTH</span> = (<span class=\"hljs-variable constant_\">WIDTH</span> + <span class=\"hljs-variable constant_\">HEIGHT</span>) &lt;&lt; <span class=\"hljs-number\">1</span>;\n        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">STEP</span> = <span class=\"hljs-number\">5</span>;\n\n        <span class=\"hljs-comment\">/**\n         * <span class=\"hljs-doctag\">@description</span>: ç”Ÿæˆå¸¦æœ‰åœ†è§’çš„path\n         */</span>\n        <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">roundedRect</span>(<span class=\"hljs-params\">w, h, tlr, trr, brr, blr</span>) {\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">`M 0 <span class=\"hljs-subst\">${tlr}</span> A <span class=\"hljs-subst\">${tlr}</span> <span class=\"hljs-subst\">${tlr}</span> 0 0 1 <span class=\"hljs-subst\">${tlr}</span> 0 L <span class=\"hljs-subst\">${w - trr}</span> 0 `</span>\n                + <span class=\"hljs-string\">`A <span class=\"hljs-subst\">${trr}</span> <span class=\"hljs-subst\">${trr}</span> 0 0 1 <span class=\"hljs-subst\">${w}</span> <span class=\"hljs-subst\">${trr}</span> L <span class=\"hljs-subst\">${w}</span> <span class=\"hljs-subst\">${h - brr}</span> `</span>\n                + <span class=\"hljs-string\">`A <span class=\"hljs-subst\">${brr}</span> <span class=\"hljs-subst\">${brr}</span> 0 0 1 <span class=\"hljs-subst\">${w - brr}</span> <span class=\"hljs-subst\">${h}</span> L <span class=\"hljs-subst\">${blr}</span> <span class=\"hljs-subst\">${h}</span> `</span>\n                + <span class=\"hljs-string\">`A <span class=\"hljs-subst\">${blr}</span> <span class=\"hljs-subst\">${blr}</span> 0 0 1 0 <span class=\"hljs-subst\">${h - blr}</span> Z`</span>;\n        }\n\n        <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">animation</span>(<span class=\"hljs-params\"></span>) {\n            <span class=\"hljs-keyword\">const</span> path = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&#x27;#path&#x27;</span>);\n            <span class=\"hljs-keyword\">const</span> preOffset = path.<span class=\"hljs-title function_\">getAttribute</span>(<span class=\"hljs-string\">&#x27;stroke-dashoffset&#x27;</span>);\n            <span class=\"hljs-keyword\">const</span> newOffset = preOffset - <span class=\"hljs-variable constant_\">STEP</span>;\n            path.<span class=\"hljs-title function_\">setAttribute</span>(<span class=\"hljs-string\">&#x27;stroke-dashoffset&#x27;</span>, newOffset);\n            <span class=\"hljs-keyword\">if</span> (newOffset &gt;= <span class=\"hljs-number\">0</span>) {\n                rafId = <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">requestAnimationFrame</span>(animation);\n            } <span class=\"hljs-keyword\">else</span> {\n                path.<span class=\"hljs-title function_\">setAttribute</span>(<span class=\"hljs-string\">&#x27;stroke-dashoffset&#x27;</span>, <span class=\"hljs-variable constant_\">STORK_LENGTH</span> - <span class=\"hljs-variable constant_\">DEFAULT_OFFSET</span>);\n                <span class=\"hljs-title function_\">alert</span>(<span class=\"hljs-string\">&#x27;success&#x27;</span>);\n            }\n        }\n\n        <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">onMouseDown</span>(<span class=\"hljs-params\"></span>) {\n            rafId = <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">requestAnimationFrame</span>(animation);\n        }\n\n        <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">onMouseUp</span>(<span class=\"hljs-params\"></span>) {\n            <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">cancelAnimationFrame</span>(rafId);\n            path.<span class=\"hljs-title function_\">setAttribute</span>(<span class=\"hljs-string\">&#x27;stroke-dashoffset&#x27;</span>, <span class=\"hljs-variable constant_\">STORK_LENGTH</span> - <span class=\"hljs-variable constant_\">DEFAULT_OFFSET</span>);\n        }\n\n        <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&#x27;load&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n            <span class=\"hljs-keyword\">const</span> path = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&#x27;#path&#x27;</span>);\n            <span class=\"hljs-keyword\">const</span> background = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&#x27;#background&#x27;</span>);\n            path.<span class=\"hljs-title function_\">setAttribute</span>(<span class=\"hljs-string\">&#x27;stroke-dashoffset&#x27;</span>, <span class=\"hljs-variable constant_\">STORK_LENGTH</span> - <span class=\"hljs-variable constant_\">DEFAULT_OFFSET</span>);\n            path.<span class=\"hljs-title function_\">setAttribute</span>(<span class=\"hljs-string\">&#x27;stroke-dasharray&#x27;</span>, <span class=\"hljs-variable constant_\">STORK_LENGTH</span>);\n\n            <span class=\"hljs-keyword\">const</span> roundedPath = <span class=\"hljs-title function_\">roundedRect</span>(<span class=\"hljs-variable constant_\">WIDTH</span>, <span class=\"hljs-variable constant_\">HEIGHT</span>, <span class=\"hljs-variable constant_\">RADIUS</span>, <span class=\"hljs-variable constant_\">RADIUS</span>, <span class=\"hljs-variable constant_\">RADIUS</span>, <span class=\"hljs-variable constant_\">RADIUS</span>);\n            path.<span class=\"hljs-title function_\">setAttribute</span>(<span class=\"hljs-string\">&#x27;d&#x27;</span>, roundedPath);\n            background.<span class=\"hljs-title function_\">setAttribute</span>(<span class=\"hljs-string\">&#x27;d&#x27;</span>, roundedPath);\n        });\n    </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">svg</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;svg&quot;</span> <span class=\"hljs-attr\">width</span>=<span class=\"hljs-string\">&quot;80&quot;</span> <span class=\"hljs-attr\">height</span>=<span class=\"hljs-string\">&quot;40&quot;</span> <span class=\"hljs-attr\">fill</span>=<span class=\"hljs-string\">&quot;#ccc&quot;</span> <span class=\"hljs-attr\">onmousedown</span>=<span class=\"hljs-string\">&quot;onMouseDown()&quot;</span> <span class=\"hljs-attr\">onmouseup</span>=<span class=\"hljs-string\">&quot;onMouseUp()&quot;</span>\n        <span class=\"hljs-attr\">xmlns</span>=<span class=\"hljs-string\">&quot;http://www.w3.org/2000/svg&quot;</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">path</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;path&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">path</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">path</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;background&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">path</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">text</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;text&quot;</span> <span class=\"hljs-attr\">x</span>=<span class=\"hljs-string\">&quot;40&quot;</span> <span class=\"hljs-attr\">y</span>=<span class=\"hljs-string\">&quot;20&quot;</span>&gt;</span>click me<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">text</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">svg</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n</code></pre>\n<p>æœ€ç»ˆæ•ˆæœ</p>\n<p><img src=\"https://mrrs878.github.io/awesome/static/img/button.gif\" alt=\"æœ€ç»ˆæ•ˆæœ\"></p>\n<p><a href=\"https://mrrs878.github.io/awesome/interactive-button/index.html\">åœ¨çº¿ä½“éªŒ</a></p>\n<p>å‚è€ƒï¼š</p>\n<p><a href=\"https://www.cnblogs.com/daisygogogo/p/11044353.html\">SVGå­¦ä¹ ä¹‹stroke-dasharray å’Œ stroke-dashoffset è¯¦è§£</a></p>\n"},{"title":"typescriptå­¦ä¹ -æ‹¾é—","tags":["never"],"categories":"typescript","description":"`never` ç±»å‹æ˜¯ TypeScript ä¸­çš„åº•å±‚ç±»å‹ã€‚ä¸€äº›ä¾‹å­ï¼š\n\n- ä¸€ä¸ªä»æ¥ä¸ä¼šæœ‰è¿”å›å€¼çš„å‡½æ•°ï¼ˆå¦‚ï¼šå¦‚æœå‡½æ•°å†…å«æœ‰ `while(true) {}`ï¼‰ï¼›\n- ä¸€ä¸ªæ€»æ˜¯ä¼šæŠ›å‡ºé”™è¯¯çš„å‡½æ•°ï¼ˆå¦‚ï¼š`function foo() { throw new Error('Not Implemented') }`ï¼Œ`foo` çš„è¿”å›ç±»å‹æ˜¯ `never`ï¼‰ï¼›\n\nä½¿ç”¨åœºæ™¯ï¼šè¯¦ç»†çš„è¿”å›å€¼æ£€æŸ¥\n``` t","createDate":"2021-10-08 13:20:35","updateDate":"2021-10-08 21:21:44","body":"<p><code>never</code> ç±»å‹æ˜¯ TypeScript ä¸­çš„åº•å±‚ç±»å‹ã€‚ä¸€äº›ä¾‹å­ï¼š</p>\n<ul>\n<li>ä¸€ä¸ªä»æ¥ä¸ä¼šæœ‰è¿”å›å€¼çš„å‡½æ•°ï¼ˆå¦‚ï¼šå¦‚æœå‡½æ•°å†…å«æœ‰ <code>while(true) {}</code>ï¼‰ï¼›</li>\n<li>ä¸€ä¸ªæ€»æ˜¯ä¼šæŠ›å‡ºé”™è¯¯çš„å‡½æ•°ï¼ˆå¦‚ï¼š<code>function foo() { throw new Error(&#39;Not Implemented&#39;) }</code>ï¼Œ<code>foo</code> çš„è¿”å›ç±»å‹æ˜¯ <code>never</code>ï¼‰ï¼›</li>\n</ul>\n<p>ä½¿ç”¨åœºæ™¯ï¼šè¯¦ç»†çš„è¿”å›å€¼æ£€æŸ¥</p>\n<pre><code class=\"hljs language-ts\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">foo</span>(<span class=\"hljs-params\">x: <span class=\"hljs-built_in\">string</span> | <span class=\"hljs-built_in\">number</span></span>): <span class=\"hljs-built_in\">boolean</span> {\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> x === <span class=\"hljs-string\">&#x27;string&#x27;</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n  } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> x === <span class=\"hljs-string\">&#x27;number&#x27;</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n  }\n\n  <span class=\"hljs-comment\">// å¦‚æœä¸æ˜¯ä¸€ä¸ª never ç±»å‹ï¼Œè¿™ä¼šæŠ¥é”™ï¼š</span>\n  <span class=\"hljs-comment\">// - ä¸æ˜¯æ‰€æœ‰æ¡ä»¶éƒ½æœ‰è¿”å›å€¼ ï¼ˆä¸¥æ ¼æ¨¡å¼ä¸‹ï¼‰</span>\n  <span class=\"hljs-comment\">// - æˆ–è€…æ£€æŸ¥åˆ°æ— æ³•è®¿é—®çš„ä»£ç </span>\n  <span class=\"hljs-comment\">// ä½†æ˜¯ç”±äº TypeScript ç†è§£ `fail` å‡½æ•°è¿”å›ä¸º `never` ç±»å‹</span>\n  <span class=\"hljs-comment\">// å®ƒå¯ä»¥è®©ä½ è°ƒç”¨å®ƒï¼Œå› ä¸ºä½ å¯èƒ½ä¼šåœ¨è¿è¡Œæ—¶ç”¨å®ƒæ¥åšå®‰å…¨æˆ–è€…è¯¦ç»†çš„æ£€æŸ¥ã€‚</span>\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">fail</span>(<span class=\"hljs-string\">&#x27;Unexhaustive&#x27;</span>);\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">fail</span>(<span class=\"hljs-params\">message: <span class=\"hljs-built_in\">string</span></span>): <span class=\"hljs-built_in\">never</span> {\n  <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Error</span>(message);\n}\n</code></pre>\n<p>ä¸ <code>void</code> çš„å·®å¼‚ï¼š</p>\n<p><code>never</code> è¡¨ç¤ºä¸€ä¸ªä»æ¥ä¸ä¼šä¼˜é›…çš„è¿”å›çš„å‡½æ•°æ—¶ï¼Œä½ å¯èƒ½é©¬ä¸Šå°±ä¼šæƒ³åˆ°ä¸æ­¤ç±»ä¼¼çš„ <code>void</code>ï¼Œç„¶è€Œå®é™…ä¸Šï¼Œ<code>void</code> è¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹ï¼Œ<code>never</code> è¡¨ç¤ºæ°¸è¿œä¸å­˜åœ¨çš„å€¼çš„ç±»å‹ã€‚</p>\n<p>å½“ä¸€ä¸ªå‡½æ•°è¿”å›ç©ºå€¼æ—¶ï¼Œå®ƒçš„è¿”å›å€¼ä¸º <code>void</code> ç±»å‹ï¼Œä½†æ˜¯ï¼Œå½“ä¸€ä¸ªå‡½æ•°æ°¸ä¸è¿”å›æ—¶ï¼ˆæˆ–è€…æ€»æ˜¯æŠ›å‡ºé”™è¯¯ï¼‰ï¼Œå®ƒçš„è¿”å›å€¼ä¸º <code>never</code> ç±»å‹ã€‚<code>void</code> ç±»å‹å¯ä»¥è¢«èµ‹å€¼ï¼ˆåœ¨ <code>strictNullChecking</code> ä¸º <code>false</code>æ—¶ï¼‰ï¼Œä½†æ˜¯é™¤äº† <code>never</code> æœ¬èº«ä»¥å¤–ï¼Œå…¶ä»–ä»»ä½•ç±»å‹ä¸èƒ½èµ‹å€¼ç»™ <code>never</code></p>\n"},{"title":"typescriptå­¦ä¹ -å‘½åç©ºé—´&æ¨¡å—","tags":["namespace"],"categories":"typescript","description":"## æ¨¡å—\n\nTypeScript ä¸ ES6 ä¸€æ ·ï¼Œä»»ä½•åŒ…å«é¡¶çº§ `import` æˆ–è€… `export` çš„æ–‡ä»¶éƒ½è¢«å½“æˆä¸€ä¸ªæ¨¡å—ã€‚ç›¸ååœ°ï¼Œå¦‚æœä¸€ä¸ªæ–‡ä»¶ä¸å¸¦æœ‰é¡¶çº§çš„ `import` æˆ–è€… `export` å£°æ˜ï¼Œé‚£ä¹ˆå®ƒçš„å†…å®¹è¢«è§†ä¸ºå…¨å±€å¯è§çš„ã€‚\n\nä¾‹å¦‚æˆ‘ä»¬åœ¨åœ¨ä¸€ä¸ª TypeScript é¡¹ç›®ä¸‹ä»»æ„æ–‡ä»¶ä¸­ï¼ˆä¸å¸¦æœ‰ `export` / `import` ï¼‰å£°æ˜ä¸€ä¸ªå˜é‡ `a` ã€‚ç„¶ååœ¨å¦ä¸€ä¸ªæ–‡","createDate":"2021-10-08 03:28:30","updateDate":"2021-10-08 16:36:57","body":"<h2 id=\"æ¨¡å—\">æ¨¡å—</h2>\n<p>TypeScript ä¸ ES6 ä¸€æ ·ï¼Œä»»ä½•åŒ…å«é¡¶çº§ <code>import</code> æˆ–è€… <code>export</code> çš„æ–‡ä»¶éƒ½è¢«å½“æˆä¸€ä¸ªæ¨¡å—ã€‚ç›¸ååœ°ï¼Œå¦‚æœä¸€ä¸ªæ–‡ä»¶ä¸å¸¦æœ‰é¡¶çº§çš„ <code>import</code> æˆ–è€… <code>export</code> å£°æ˜ï¼Œé‚£ä¹ˆå®ƒçš„å†…å®¹è¢«è§†ä¸ºå…¨å±€å¯è§çš„ã€‚</p>\n<p>ä¾‹å¦‚æˆ‘ä»¬åœ¨åœ¨ä¸€ä¸ª TypeScript é¡¹ç›®ä¸‹ä»»æ„æ–‡ä»¶ä¸­ï¼ˆä¸å¸¦æœ‰ <code>export</code> / <code>import</code> ï¼‰å£°æ˜ä¸€ä¸ªå˜é‡ <code>a</code> ã€‚ç„¶ååœ¨å¦ä¸€ä¸ªæ–‡ä»¶åŒæ ·å£°æ˜ä¸€ä¸ªå˜é‡ <code>a</code> ï¼Œè¿™æ—¶å€™ä¼šå‡ºç°é”™è¯¯ä¿¡æ¯ï¼š</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/namespace-0.png\" alt=\"é‡å¤å£°æ˜\"></p>\n<p>å¦‚æœéœ€è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåˆ™é€šè¿‡importæˆ–è€…exportå¼•å…¥æ¨¡å—ç³»ç»Ÿå³å¯ï¼Œå…·ä½“ä¸å†èµ˜è¿°ã€‚</p>\n<h2 id=\"å‘½åç©ºé—´\">å‘½åç©ºé—´</h2>\n<p>å‘½åç©ºé—´ä¸€ä¸ªæœ€æ˜ç¡®çš„ç›®çš„å°±æ˜¯è§£å†³é‡åé—®é¢˜</p>\n<p>å‘½åç©ºé—´å®šä¹‰äº†æ ‡è¯†ç¬¦çš„å¯è§èŒƒå›´ï¼Œä¸€ä¸ªæ ‡è¯†ç¬¦å¯åœ¨å¤šä¸ªåå­—ç©ºé—´ä¸­å®šä¹‰ï¼Œå®ƒåœ¨ä¸åŒåå­—ç©ºé—´ä¸­çš„å«ä¹‰æ˜¯äº’ä¸ç›¸å¹²çš„</p>\n<p>è¿™æ ·ï¼Œåœ¨ä¸€ä¸ªæ–°çš„åå­—ç©ºé—´ä¸­å¯å®šä¹‰ä»»ä½•æ ‡è¯†ç¬¦ï¼Œå®ƒä»¬ä¸ä¼šä¸ä»»ä½•å·²æœ‰çš„æ ‡è¯†ç¬¦å‘ç”Ÿå†²çªï¼Œå› ä¸ºå·²æœ‰çš„å®šä¹‰éƒ½å¤„äºå…¶ä»–åå­—ç©ºé—´ä¸­</p>\n<p>TypeScript ä¸­å‘½åç©ºé—´ä½¿ç”¨ <code>namespace</code> æ¥å®šä¹‰ï¼Œè¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"hljs language-ts\"><span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title class_\">Util</span> {\n  <span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">sum</span> = (<span class=\"hljs-params\">a: <span class=\"hljs-built_in\">number</span>, b: <span class=\"hljs-built_in\">number</span></span>) =&gt; a + b;\n}\n\n<span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title class_\">Tools</span> {\n  <span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">sub</span> = (<span class=\"hljs-params\">a: <span class=\"hljs-built_in\">number</span>, b: <span class=\"hljs-built_in\">number</span></span>) =&gt; a - b;\n}\n\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-title class_\">Tools</span>.<span class=\"hljs-title function_\">sub</span>(<span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>));\n</code></pre>\n<p>å‘½åç©ºé—´æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä½œç”¨æ˜¯å°†ä¸€ç³»åˆ—ç›¸å…³çš„<strong>å…¨å±€å˜é‡</strong>ç»„ç»‡åˆ°ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œä¸Šè¿°ä»£ç ç¼–è¯‘åå¦‚ä¸‹ï¼š</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">var</span> <span class=\"hljs-title class_\">Util</span>;\n(<span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">Util</span>) {\n    <span class=\"hljs-title class_\">Util</span>.<span class=\"hljs-property\">sum</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">a, b</span>) { <span class=\"hljs-keyword\">return</span> a + b; };\n})(<span class=\"hljs-title class_\">Util</span> || (<span class=\"hljs-title class_\">Util</span> = {}));\n<span class=\"hljs-keyword\">var</span> <span class=\"hljs-title class_\">Tools</span>;\n(<span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">Tools</span>) {\n    <span class=\"hljs-title class_\">Tools</span>.<span class=\"hljs-property\">sub</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">a, b</span>) { <span class=\"hljs-keyword\">return</span> a - b; };\n})(<span class=\"hljs-title class_\">Tools</span> || (<span class=\"hljs-title class_\">Tools</span> = {}));\n</code></pre>\n<h2 id=\"åŒºåˆ«\">åŒºåˆ«</h2>\n<ul>\n<li><p>å‘½åç©ºé—´æ˜¯ä½äºå…¨å±€å‘½åç©ºé—´ä¸‹çš„ä¸€ä¸ªæ™®é€šçš„å¸¦æœ‰åå­—çš„  JavaScript  å¯¹è±¡ï¼Œä½¿ç”¨èµ·æ¥ååˆ†å®¹æ˜“ã€‚ä½†å°±åƒå…¶å®ƒçš„å…¨å±€å‘½åç©ºé—´æ±¡æŸ“ä¸€æ ·ï¼Œå®ƒ<strong>å¾ˆéš¾å»è¯†åˆ«ç»„ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»</strong>ï¼Œå°¤å…¶æ˜¯åœ¨å¤§å‹çš„åº”ç”¨ä¸­</p>\n</li>\n<li><p>åƒå‘½åç©ºé—´ä¸€æ ·ï¼Œæ¨¡å—å¯ä»¥åŒ…å«ä»£ç å’Œå£°æ˜ã€‚ä¸åŒçš„æ˜¯æ¨¡å—å¯ä»¥å£°æ˜å®ƒçš„ä¾èµ–</p>\n</li>\n<li><p>åœ¨æ­£å¸¸çš„TSé¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­å¹¶ä¸å»ºè®®ç”¨å‘½åç©ºé—´ï¼Œä½†<strong>é€šå¸¸åœ¨é€šè¿‡ d.ts æ–‡ä»¶æ ‡è®° js åº“ç±»å‹</strong>çš„æ—¶å€™ä½¿ç”¨å‘½åç©ºé—´ï¼Œä¸»è¦ä½œç”¨æ˜¯ç»™ç¼–è¾‘å™¨/IDEç¼–å†™ä»£ç çš„æ—¶å€™å‚è€ƒä½¿ç”¨</p>\n</li>\n</ul>\n"},{"title":"CSSç›¸å…³-0","tags":["CSS"],"categories":"CSS","description":"## ç›’æ¨¡å‹\n\næè¿°äº†å…ƒç´ å¦‚ä½•æ˜¾ç¤ºï¼Œä»¥åŠï¼ˆåœ¨ä¸€å®šç¨‹åº¦ä¸Šï¼‰å¦‚ä½•ç›¸äº’ä½œç”¨ã€ç›¸äº’å½±å“ã€‚é¡µé¢ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½è¢«çœ‹ä½œä¸ºä¸€ä¸ªçŸ©å½¢ç›’å­ï¼Œè¿™ä¸ªç›’å­åŒ…å«å…ƒç´ çš„å†…å®¹ã€å†…è¾¹è·ã€è¾¹æ¡†ã€å¤–è¾¹è·ã€‚\n\nç›’æ¨¡å‹åˆ†ä¸ºä¸¤ç§ï¼š\n\n- æ ‡å‡†ç›’æ¨¡å‹ï¼ˆbox-sizing = content-boxï¼‰\n\n  width = content-width\n\n  height = content-height\n\n- IEç›’æ¨¡å‹ï¼ˆbox-sizi","createDate":"2020-03-24 23:29:35","updateDate":"10/1/2021, 3:34:43 AM","body":"<h2 id=\"ç›’æ¨¡å‹\">ç›’æ¨¡å‹</h2>\n<p>æè¿°äº†å…ƒç´ å¦‚ä½•æ˜¾ç¤ºï¼Œä»¥åŠï¼ˆåœ¨ä¸€å®šç¨‹åº¦ä¸Šï¼‰å¦‚ä½•ç›¸äº’ä½œç”¨ã€ç›¸äº’å½±å“ã€‚é¡µé¢ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½è¢«çœ‹ä½œä¸ºä¸€ä¸ªçŸ©å½¢ç›’å­ï¼Œè¿™ä¸ªç›’å­åŒ…å«å…ƒç´ çš„å†…å®¹ã€å†…è¾¹è·ã€è¾¹æ¡†ã€å¤–è¾¹è·ã€‚</p>\n<p>ç›’æ¨¡å‹åˆ†ä¸ºä¸¤ç§ï¼š</p>\n<ul>\n<li><p>æ ‡å‡†ç›’æ¨¡å‹ï¼ˆbox-sizing = content-boxï¼‰</p>\n<p>width = content-width</p>\n<p>height = content-height</p>\n</li>\n<li><p>IEç›’æ¨¡å‹ï¼ˆbox-sizing = border-boxï¼‰</p>\n<p>width = content-width + padding + border</p>\n<p>height = content-height + padding + border</p>\n</li>\n</ul>\n<h2 id=\"å±‚å ä¸Šä¸‹æ–‡\">å±‚å ä¸Šä¸‹æ–‡</h2>\n<p>å±‚å ä¸Šä¸‹æ–‡æ˜¯<strong>åŒ…å«ä¸€ç»„å›¾å±‚çš„å…ƒç´ </strong>ã€‚ åœ¨ä¸€ç»„å±‚å ä¸Šä¸‹æ–‡ä¸­ï¼Œå…¶å­å…ƒç´ çš„<strong>z-indexå€¼æ˜¯ç›¸å¯¹äºè¯¥çˆ¶å…ƒç´ </strong>è€Œä¸æ˜¯ <code>document root</code> è®¾ç½®çš„ã€‚æ¯ä¸ªå±‚å ä¸Šä¸‹æ–‡å®Œå…¨ç‹¬ç«‹äºå®ƒçš„å…„å¼Ÿå…ƒç´ ã€‚å¦‚æœå…ƒç´  B ä½äºå…ƒç´  A ä¹‹ä¸Šï¼Œåˆ™å³ä½¿å…ƒç´  A çš„å­å…ƒç´  C å…·æœ‰æ¯”å…ƒç´  B æ›´é«˜çš„<code>z-index</code>å€¼ï¼Œå…ƒç´  C ä¹Ÿæ°¸è¿œä¸ä¼šåœ¨å…ƒç´  B ä¹‹ä¸Š.</p>\n<p>CSS ä¸­çš„<code>z-index</code>å±æ€§æ§åˆ¶é‡å å…ƒç´ çš„å‚ç›´å åŠ é¡ºåºã€‚<code>z-index</code>åªèƒ½å½±å“<code>position</code>å€¼ä¸æ˜¯<code>static</code>çš„å…ƒç´ ã€‚</p>\n<p>äº§ç”Ÿå±‚å ä¸Šä¸‹æ–‡ï¼š</p>\n<ol>\n<li><p>HTMLä¸­çš„æ ¹å…ƒç´ <code>&lt;html&gt;&lt;/html&gt;</code>æœ¬èº«å°±å…·æœ‰å±‚å ä¸Šä¸‹æ–‡ï¼Œç§°ä¸º<strong>æ ¹å±‚å ä¸Šä¸‹æ–‡</strong>ã€‚</p>\n</li>\n<li><p>æ™®é€šå…ƒç´ è®¾ç½®<code>position</code>å±æ€§ä¸º<strong>é</strong><code>static</code>å€¼å¹¶è®¾ç½®<code>z-index</code>å±æ€§ä¸ºå…·ä½“æ•°å€¼ï¼Œäº§ç”Ÿå±‚å ä¸Šä¸‹æ–‡ã€‚</p>\n</li>\n<li><p>CSS3ä¸­çš„æ–°å±æ€§ä¹Ÿå¯ä»¥äº§ç”Ÿå±‚å ä¸Šä¸‹æ–‡ã€‚</p>\n</li>\n<li><ul>\n<li>çˆ¶å…ƒç´ çš„displayå±æ€§å€¼ä¸º<code>flex|inline-flex</code>ï¼Œå­å…ƒç´ <code>z-index</code>å±æ€§å€¼ä¸ä¸º<code>auto</code>çš„æ—¶å€™ï¼Œå­å…ƒç´ ä¸ºå±‚å ä¸Šä¸‹æ–‡å…ƒç´ ï¼›</li>\n<li>å…ƒç´ çš„<code>opacity</code>å±æ€§å€¼ä¸æ˜¯1ï¼›</li>\n<li>å…ƒç´ çš„<code>transform</code>å±æ€§å€¼ä¸æ˜¯<code>none</code>ï¼›</li>\n<li>å…ƒç´ <code>mix-blend-mode</code>å±æ€§å€¼ä¸æ˜¯normalï¼›</li>\n<li>å…ƒç´ çš„<code>filter</code>å±æ€§å€¼ä¸æ˜¯<code>none</code>ï¼›</li>\n</ul>\n</li>\n</ol>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/z-index.png\" alt=\"z-index\"></p>\n<h2 id=\"linkæ ‡ç­¾çš„relå±æ€§\">linkæ ‡ç­¾çš„relå±æ€§</h2>\n<ul>\n<li><p><code>preload</code></p>\n<p>è®©ä½ åœ¨ä½ çš„HTMLé¡µé¢ä¸­<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/head\">head</a>æ ‡ç­¾å†…éƒ¨ä¹¦å†™ä¸€äº›å£°æ˜å¼çš„èµ„æºè·å–è¯·æ±‚ï¼Œå¯ä»¥æŒ‡æ˜å“ªäº›èµ„æºæ˜¯åœ¨é¡µé¢åŠ è½½å®Œæˆåå³åˆ»éœ€è¦çš„ã€‚å¯¹äºè¿™ç§å³åˆ»éœ€è¦çš„èµ„æºï¼Œä½ å¯èƒ½å¸Œæœ›åœ¨é¡µé¢åŠ è½½çš„ç”Ÿå‘½å‘¨æœŸçš„æ—©æœŸé˜¶æ®µå°±å¼€å§‹è·å–ï¼Œåœ¨æµè§ˆå™¨çš„ä¸»æ¸²æŸ“æœºåˆ¶ä»‹å…¥å‰å°±è¿›è¡Œé¢„åŠ è½½ã€‚è¿™ä¸€æœºåˆ¶ä½¿å¾—èµ„æºå¯ä»¥æ›´æ—©çš„å¾—åˆ°åŠ è½½å¹¶å¯ç”¨ï¼Œä¸”æ›´ä¸æ˜“é˜»å¡é¡µé¢çš„åˆæ­¥æ¸²æŸ“ï¼Œè¿›è€Œæå‡æ€§èƒ½ã€‚</p>\n</li>\n<li><p><code>prefetch</code></p>\n<p>æç¤ºæµè§ˆå™¨ï¼Œç”¨æˆ·æœªæ¥çš„æµè§ˆæœ‰å¯èƒ½éœ€è¦åŠ è½½ç›®æ ‡èµ„æºï¼Œæ‰€ä»¥æµè§ˆå™¨æœ‰å¯èƒ½é€šè¿‡äº‹å…ˆè·å–å’Œç¼“å­˜å¯¹åº”èµ„æºï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒã€‚</p>\n</li>\n</ul>\n"},{"title":"ES6é‡ç‚¹-0","tags":["ES6"],"categories":"JavaScript","description":"## [Proxy](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy)\n\n`Proxy`ç”¨äº**ä¿®æ”¹æŸäº›æ“ä½œçš„é»˜è®¤è¡Œä¸º**ï¼Œç­‰åŒäºåœ¨è¯­è¨€å±‚é¢åšå‡ºä¿®æ”¹ï¼Œæ‰€ä»¥å±äºä¸€ç§â€œå…ƒç¼–ç¨‹â€ï¼ˆmeta programï¼‰ï¼Œå³å¯¹ç¼–ç¨‹è¯­è¨€è¿›è¡Œç¼–ç¨‹ã€‚`Proxy`å¯ä»¥ç†è§£æˆåœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰æ¶è®¾ä¸€å±‚","createDate":"2020-02-18 23:43:05","updateDate":"10/1/2021, 3:34:43 AM","body":"<h2 id=\"proxy\"><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy\">Proxy</a></h2>\n<p><code>Proxy</code>ç”¨äº<strong>ä¿®æ”¹æŸäº›æ“ä½œçš„é»˜è®¤è¡Œä¸º</strong>ï¼Œç­‰åŒäºåœ¨è¯­è¨€å±‚é¢åšå‡ºä¿®æ”¹ï¼Œæ‰€ä»¥å±äºä¸€ç§â€œå…ƒç¼–ç¨‹â€ï¼ˆmeta programï¼‰ï¼Œå³å¯¹ç¼–ç¨‹è¯­è¨€è¿›è¡Œç¼–ç¨‹ã€‚<code>Proxy</code>å¯ä»¥ç†è§£æˆåœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰æ¶è®¾ä¸€å±‚â€œæ‹¦æˆªâ€ï¼Œå¤–ç•Œå¯¹è¯¥å¯¹è±¡çš„è®¿é—®ï¼Œéƒ½å¿…é¡»å…ˆé€šè¿‡è¿™å±‚æ‹¦æˆªï¼Œå› æ­¤æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥å¯¹å¤–ç•Œçš„è®¿é—®è¿›è¡Œè¿‡æ»¤å’Œæ”¹å†™ã€‚</p>\n<h2 id=\"reflect\"><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect\">Reflect</a></h2>\n<p>**WHAT **ğŸ˜³</p>\n<p>ES6ä¸ºäº†<strong>æ“ä½œå¯¹è±¡</strong>è€Œæä¾›çš„æ–°çš„API</p>\n<p><strong>WHY</strong>   ğŸ¤”</p>\n<ol>\n<li>å°†<code>Object</code>å¯¹è±¡çš„ä¸€äº›æ˜æ˜¾æ˜¯è¯­è¯­è¨€å†…éƒ¨çš„æ–¹æ³•ï¼ˆæ¯”å¦‚<code>Object.defineProperty</code>ï¼‰æ”¾åˆ°<code>Reflect</code>å¯¹è±¡ä¸Šï¼Œç°é˜¶æ®µï¼ŒæŸäº›æ–¹æ³•åŒæ—¶åœ¨<code>Object</code>å’Œ<code>Reflect</code>å¯¹è±¡ä¸Šéƒ¨ç½²ï¼Œæœªæ¥çš„æ–°æ–¹æ³•åªéƒ¨ç½²åœ¨<code>Reflect</code>å¯¹è±¡ä¸Šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»<code>Reflect</code>å¯¹è±¡ä¸Šå¯ä»¥æ‹¿åˆ°è¯­è¨€å†…éƒ¨çš„æ–¹æ³•</li>\n<li>ä¿®æ”¹æŸäº›<code>Object</code>æ–¹æ³•çš„è¿”å›ç»“æœï¼Œè®©å…¶å˜å¾—æ›´åˆç†ã€‚æ¯”å¦‚<code>Object.defineProperty(obj, name, desc)</code>åœ¨æ— æ³•å®šä¹‰å±æ€§æ—¶ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè€Œ<code>Reflect.defineProperty(obj, name, desc)</code>åˆ™ä¼šè¿”å›<code>false</code></li>\n<li>è®©<code>Object</code>æ“ä½œéƒ½å˜æˆå‡½æ•°è¡Œä¸ºã€‚æŸäº›<code>Object</code>æ“ä½œæ˜¯å‘½ä»¤å¼ï¼Œæ¯”å¦‚<code>name in obj</code>å’Œ<code>delete obj[name]</code>ï¼Œè€Œ<code>Reflect.has(obj, name)</code>å’Œ<code>Reflect.deleteProperty(obj, name)</code>è®©å®ƒä»¬å˜æˆäº†å‡½æ•°è¡Œä¸º</li>\n<li><code>Reflect</code>å¯¹è±¡çš„æ–¹æ³•ä¸<code>Proxy</code>å¯¹è±¡çš„æ–¹æ³•ä¸€ä¸€å¯¹åº”ï¼Œè¿™å°±è®©<code>Proxy</code>å¯¹è±¡å¯ä»¥æ–¹ä¾¿åœ°è°ƒç”¨å¯¹åº”çš„<code>Reflect</code>æ–¹æ³•ï¼Œå®Œæˆé»˜è®¤è¡Œä¸º</li>\n</ol>\n<p><strong>HOW</strong>  ğŸ˜®</p>\n<p><code>Reflect</code>å¯¹è±¡ä¸€å…±æœ‰13ä¸ªé™æ€æ–¹æ³•</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// é€‚ç”¨äºå‡½æ•°å®šä¹‰äº†è‡ªå·±çš„ apply æ–¹æ³•</span>\n<span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">apply</span>(target, thisArg, args)\n<span class=\"hljs-comment\">// ç­‰åŒäºnew target(...args) è¿™æä¾›äº†ä¸€ç§ä¸ä½¿ç”¨ new æ¥è°ƒç”¨æ„é€ å‡½æ•°çš„æ–¹æ³•</span>\n<span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">construct</span>(target, args)\n\n<span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">get</span>(target, name, receiver)\n\n<span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">set</span>(target, name, value, receiver)\n\n<span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">defineProperty</span>(target, name, desc)\n\n<span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">deleteProperty</span>(target, name)\n\n<span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">has</span>(target, name)\n<span class=\"hljs-comment\">// åŸºæœ¬ç­‰åŒäºObject.getOwnPropertyNames ä¸ Object.getOwnPropertySymbols ä¹‹å’Œ</span>\n<span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">ownKeys</span>(target)\n\n<span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">isExtensible</span>(target)\n\n<span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">prevenExtensions</span>(target)\n\n<span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">getOwnPropertyDescriptor</span>(target, name)\n\n<span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">getPrototypeOf</span>(target)\n\n<span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">setPrototypeOf</span>(target, prototype)\n</code></pre>\n<p><code>Reflect</code> + <code>Proxy</code>å®ç°è§‚å¯Ÿè€…æ¨¡å¼</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> observers = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Set</span>()\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">observe</span>(<span class=\"hljs-params\">fn</span>) {\n  observers.<span class=\"hljs-title function_\">add</span>(fn)\n}\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">observable</span>(<span class=\"hljs-params\">obj</span>) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(obj, {\n    <span class=\"hljs-title function_\">set</span>(<span class=\"hljs-params\">target, key, value, receiver</span>) {\n      <span class=\"hljs-keyword\">const</span> result = <span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">set</span>(target, key, value, receiver)\n      observers.<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">observer</span> =&gt;</span> <span class=\"hljs-title function_\">observer</span>())\n      <span class=\"hljs-keyword\">return</span> result\n    }\n  })\n}\n\n<span class=\"hljs-keyword\">const</span> person = <span class=\"hljs-title function_\">observable</span>({\n  <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;tom&quot;</span>,\n  <span class=\"hljs-attr\">age</span>: <span class=\"hljs-number\">23</span>\n})\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">print</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">`<span class=\"hljs-subst\">${ person.name }</span>, <span class=\"hljs-subst\">${ person.age }</span>`</span>)\n}\n<span class=\"hljs-title function_\">observe</span>(print)\nperson.<span class=\"hljs-property\">name</span> = <span class=\"hljs-string\">&quot;tom1&quot;</span> \n</code></pre>\n<p>ğŸ“£ åœ¨è§‚å¯Ÿè€…æ¨¡å¼ä¸­ï¼Œè§‚å¯Ÿè€…æ˜¯çŸ¥é“è¢«è§‚å¯Ÿè€…çš„ï¼Œè¢«è§‚å¯Ÿè€…ä¸€ä¸€ç›´ä¿æŒå¯¹è§‚å¯Ÿè€…è¿›è¡Œè®°å½•ã€‚ç„¶è€Œï¼Œåœ¨å‘å¸ƒè®¢é˜…æ¨¡å¼ä¸­ï¼Œå‘å¸ƒè€…å’Œè®¢é˜…è€…ä¸çŸ¥é“å¯¹æ–¹çš„å­˜åœ¨ï¼Œå®ƒä»¬åªæœ‰é€šè¿‡æ¶ˆæ¯ä»£ç†è¿›è¡Œé€šä¿¡ã€‚åœ¨å‘å¸ƒè®¢é˜…æ¨¡å¼ä¸­ï¼Œç»„ä»¶æ—¶æ¾æ•£è€¦åˆçš„ï¼Œæ­£å’Œè§‚å¯Ÿè€…æ¨¡å¼ç›¸åã€‚è§‚å¯Ÿè€…æ¨¡å¼å¤§å¤šæ—¶å€™æ˜¯åŒæ­¥çš„ï¼Œæ¯”å¦‚å½“äº‹ä»¶è§¦å‘ï¼Œè¢«è§‚å¯Ÿè€…å°±ä¼šè°ƒç”¨è§‚å¯Ÿè€…çš„æ–¹æ³•ï¼›è€Œå‘å¸ƒè®¢é˜…æ¨¡å¼å¤§å¤šæ—¶å€™æ˜¯å¼‚æ­¥çš„ï¼ˆä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼‰</p>\n<h2 id=\"symbol\"><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol\">Symbol</a></h2>\n<p><strong>WHAT</strong> ğŸ˜³</p>\n<p><code>ES6</code>å¼•å…¥çš„ä¸€ç§æ–°çš„åŸå§‹æ•°æ®ç±»å‹ï¼Œè¡¨ç¤º<strong>ç‹¬ä¸€æ— äºŒ</strong>çš„å€¼ã€‚å®ƒæ˜¯<code>JavaScript</code>è¯­è¨€çš„ç¬¬ä¸ƒç§æ•°æ®ç±»å‹ï¼Œå‰å…­ç§æ˜¯ï¼š<code>undefined</code>ã€<code>null</code>ã€<code>Boolean</code>ã€<code>String</code>ã€<code>Object</code>ã€<code>Number</code></p>\n<p>ğŸ“£ ä¸æ”¯æŒ <code>new Symbol()</code></p>\n<p><strong>WHY</strong>   ğŸ¤”</p>\n<p>ES5çš„å¯¹è±¡å±æ€§åéƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œè¿™å®¹æ˜“é€ æˆå±æ€§åçš„å†²çªã€‚Symbolå€¼å¯ä½œä¸ºå¯¹è±¡å±æ€§å</p>\n<p><strong>HOW</strong>   ğŸ˜®</p>\n<p>Symbolå€¼é€šè¿‡<code>Symbol</code>å‡½æ•°ç”Ÿæˆ</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> nameProperty = <span class=\"hljs-title class_\">Symbol</span>(<span class=\"hljs-string\">&quot;name&quot;</span>)\n<span class=\"hljs-keyword\">let</span> a = {\n  [nameProperty]: <span class=\"hljs-string\">&quot;a&quot;</span>,\n  <span class=\"hljs-attr\">age</span>: <span class=\"hljs-number\">21</span>\n}\n\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">getOwnPropertyNames</span>(a))\n<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">const</span> key <span class=\"hljs-keyword\">in</span> a) {\n  <span class=\"hljs-keyword\">if</span> (a.<span class=\"hljs-title function_\">hasOwnProperty</span>(key)) {\n    <span class=\"hljs-keyword\">const</span> element = a[key];\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(key);\n  }\n}\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">ownKeys</span>(a));\n</code></pre>\n<p>API:</p>\n<ul>\n<li><p><code>Symbol.description</code></p>\n<p>åˆ›å»º<code>Symbol</code>çš„æ—¶å€™ï¼Œå¯ä»¥æ·»åŠ ä¸€ä¸ªæè¿°ï¼Œä½†è¯»å–è¿™ä¸ªæè¿°éœ€è¦å°†<code>Symbol</code>æ˜¾å¼è½¬ä¸ºå­—ç¬¦ä¸²ã€‚<code>Symbol.description</code>å¯ä»¥æ–¹ä¾¿çš„è¯»å–<code>Symbol</code>å¯¹åº”çš„æè¿°</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> nameProp = <span class=\"hljs-title class_\">Symbol</span>(<span class=\"hljs-string\">&quot;name&quot;</span>)\nnameProp.<span class=\"hljs-title function_\">toString</span>()\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(nameProp.<span class=\"hljs-property\">description</span>)\n</code></pre>\n</li>\n<li><p><code>Symbol.for</code></p>\n<p>é‡æ–°ä½¿ç”¨åŒä¸€ä¸ª<code>Symbol</code>å€¼ã€‚<code>Symbol.for</code>æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œç„¶å<strong>å…¨å±€æœç´¢</strong>æœ‰æ²¡æœ‰ä»¥è¯¥å‚æ•°ä½œä¸ºåç§°çš„Symbolå€¼ï¼Œè‹¥æœ‰ï¼Œè¿”å›ä¹‹ï¼›è‹¥æ²¡æœ‰ï¼Œåˆ›å»ºä¹‹</p>\n<p><code>Symbol.for(&quot;name&quot;)</code>å’Œ<code>Symbol(&quot;name&quot;)</code>çš„åŒºåˆ«ï¼šä¸¤è€…éƒ½ä¼šç”Ÿæˆ<code>Symbol</code>å€¼ï¼›å‰è€…ä¼šè¢«ç™»è®°åœ¨<strong>å…¨å±€</strong>ç¯å¢ƒä¸­ä¾›æœç´¢ï¼Œåè€…ä¸ä¼š</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-title class_\">Symbol</span>(<span class=\"hljs-string\">&quot;name&quot;</span>) === <span class=\"hljs-title class_\">Symbol</span>(<span class=\"hljs-string\">&quot;name&quot;</span>)\n<span class=\"hljs-comment\">// false</span>\n<span class=\"hljs-title class_\">Symbol</span>.<span class=\"hljs-title function_\">for</span>(<span class=\"hljs-string\">&quot;name&quot;</span>) === <span class=\"hljs-title class_\">Symbol</span>.<span class=\"hljs-title function_\">for</span>(<span class=\"hljs-string\">&quot;name&quot;</span>)\n<span class=\"hljs-comment\">// true</span>\n</code></pre>\n</li>\n<li><p><code>Symbol.keyFor</code></p>\n<p>è¿”å›ä¸€ä¸ªå·²<strong>ç™»è®°</strong>çš„<code>Symbol</code>çš„<code>key</code></p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-title class_\">Symbol</span>.<span class=\"hljs-title function_\">keyFor</span>(<span class=\"hljs-title class_\">Symbol</span>(<span class=\"hljs-string\">&quot;name&quot;</span>)));\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-title class_\">Symbol</span>.<span class=\"hljs-title function_\">keyFor</span>(<span class=\"hljs-title class_\">Symbol</span>.<span class=\"hljs-title function_\">for</span>(<span class=\"hljs-string\">&quot;name&quot;</span>)));\n<span class=\"hljs-comment\">// undefined</span>\n<span class=\"hljs-comment\">// name</span>\n</code></pre>\n</li>\n</ul>\n<h2 id=\"set\">Set</h2>\n<p><strong>WHAT</strong> ğŸ˜³</p>\n<p>ES6æä¾›çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œç±»ä¼¼äºæ•°ç»„ï¼Œä½†æˆå‘˜çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ²¡æœ‰é‡å¤çš„å€¼</p>\n<p>Setä½¿ç”¨ä¸€ç§ç±»ä¼¼äº<code>===</code>çš„ç®—æ³•â€œSame-value-zero equalityâ€æ¥åˆ¤æ–­å€¼æ˜¯å¦ç›¸ç­‰</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// &quot;5&quot; å’Œ 5 ä¸ç›¸ç­‰</span>\n<span class=\"hljs-comment\">// NaN å’Œ NaN ç›¸ç­‰</span>\n<span class=\"hljs-comment\">// ä¸¤ä¸ªç©ºå¯¹è±¡ä¸ç›¸ç­‰</span>\n<span class=\"hljs-keyword\">let</span> set = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Set</span>()\nset.<span class=\"hljs-title function_\">add</span>(<span class=\"hljs-string\">&quot;5&quot;</span>)\nset.<span class=\"hljs-title function_\">add</span>(<span class=\"hljs-number\">5</span>)\nset.<span class=\"hljs-title function_\">add</span>(<span class=\"hljs-title class_\">NaN</span>)\nset.<span class=\"hljs-title function_\">add</span>(<span class=\"hljs-title class_\">NaN</span>)\nset.<span class=\"hljs-title function_\">add</span>({})\nset.<span class=\"hljs-title function_\">add</span>({})\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(set);\n<span class=\"hljs-comment\">// Set { &#x27;5&#x27;, 5, NaN, {}, {} }</span>\n</code></pre>\n<p><strong>WHY</strong>   ğŸ¤”</p>\n<ul>\n<li>å¯ä»¥ç”¨ä½œæ•°ç»„å»é‡<code>[...new Set([1, 1, 2, 2, 3])]</code></li>\n<li>å»é™¤å­—ç¬¦ä¸²é‡Œé¢çš„é‡å¤å­—ç¬¦<code>[...new Set(&#39;aaabbbc&#39;)].join(&quot;&quot;)</code></li>\n</ul>\n<p><strong>HOW</strong>   ğŸ˜®</p>\n<p><code>Set</code>å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªæ•°ç»„ï¼ˆæˆ–<strong>å…·æœ‰interableæ¥å£</strong>çš„å…¶ä»–æ•°æ®ç»“æ„ï¼‰ä½œä¸ºå‚æ•°ï¼Œç”¨æ¥åˆå§‹åŒ–</p>\n<h2 id=\"map\">Map</h2>\n<p><strong>WHAT</strong> ğŸ˜³</p>\n<p>ES6æä¾›çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œç±»ä¼¼äºå¯¹è±¡ï¼Œä¹Ÿæ˜¯é”®-å€¼å¯¹çš„é›†åˆï¼Œä½†é”®çš„èŒƒå›´ä¸é™äºå­—ç¬¦ä¸²ï¼Œå„ç« ç±»å‹çš„å€¼ï¼ˆåŒ…æ‹¬å¯¹è±¡ï¼‰éƒ½å¯ä»¥ä½œä¸ºé”®</p>\n<p><strong>WHY</strong>   ğŸ¤”</p>\n<p>ä¼ ç»Ÿä¸Šçš„Objectåªèƒ½ç”¨å­—ç¬¦ä¸²ï¼ˆ[Symbol](## Symbol)ï¼‰ä½œä¸ºé”®ï¼Œè¿™ç»™å®ƒçš„ä½¿ç”¨å¸¦æ¥äº†å¾ˆå¤§çš„é™åˆ¶</p>\n<p>Mapçš„é”®å®é™…ä¸Šæ˜¯è·Ÿå†…å­˜åœ°å€ç»‘å®šçš„ï¼Œåªè¦å†…å­˜åœ°å€ä¸ä¸€æ ·ï¼Œå°±è§†ä¸ºä¸¤ä¸ªé”®ã€‚è¿™å°±è§£å†³äº†åŒåå±æ€§ç¢°æ’ï¼ˆclashï¼‰çš„é—®é¢˜ï¼Œæˆ‘ä»¬æ‰©å±•åˆ«äººçš„åº“çš„æ—¶å€™ï¼Œå¦‚æœä½¿ç”¨å¯¹è±¡ä½œä¸ºé”®åï¼Œå°±ä¸ç”¨æ‹…å¿ƒè‡ªå·±çš„å±æ€§å’ŒåŸä½œè€…çš„å±æ€§åŒå</p>\n<p><strong>HOW</strong>   ğŸ˜®</p>\n<p>ä½¿ç”¨ <code>new Map</code> æ¥åˆ›å»ºMap</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> map = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Map</span>([[<span class=\"hljs-number\">2</span>, <span class=\"hljs-string\">&quot;2&quot;</span>]])\nmap.<span class=\"hljs-title function_\">set</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">&quot;1&quot;</span>)\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(map.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-number\">2</span>));\n</code></pre>\n<p>äº‹å®ä¸Šï¼Œä¸ä»…ä»…æ˜¯æ•°ç»„ï¼Œä»»ä½•å…·æœ‰<code>iterator</code>æ¥å£ã€ä¸”æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ä¸€ä¸ªåŒå…ƒç´ çš„æ•°ç»„çš„æ•°æ®ç»“æ„éƒ½å¯ä»¥ä½œä¸º<code>Map</code>æ„é€ å‡½æ•°çš„å‚æ•°</p>\n"},{"title":"ES6é‡ç‚¹-1","tags":["ES6"],"categories":"JavaScript","description":"## å­—ç¬¦ä¸²æ–°å¢æ–¹æ³•\n\n- `padStart`\n\n  ç”¨äºå­—ç¬¦ä¸²é•¿åº¦è¡¥å…¨ï¼Œå¦‚æœæŸä¸ªå­—ç¬¦ä¸²é•¿åº¦ä¸å¤ŸæŒ‡å®šé•¿åº¦ä¼šåœ¨å¤´éƒ¨æˆ–å°¾éƒ¨è¡¥å…¨\n\n  ```js\n  console.log('xxx'.padStart(4, 'ab'));\n  console.log('x'.padStart(4, 'ab')); //è¡¥å…¨ä½æ•°ï¼Œæœ‰éœ€è¦ä¼šé‡å¤æˆ–æˆªå–\n  console.log('x'.padStart(4));","createDate":"2020-02-19 23:01:48","updateDate":"10/1/2021, 3:34:43 AM","body":"<h2 id=\"å­—ç¬¦ä¸²æ–°å¢æ–¹æ³•\">å­—ç¬¦ä¸²æ–°å¢æ–¹æ³•</h2>\n<ul>\n<li><p><code>padStart</code></p>\n<p>ç”¨äºå­—ç¬¦ä¸²é•¿åº¦è¡¥å…¨ï¼Œå¦‚æœæŸä¸ªå­—ç¬¦ä¸²é•¿åº¦ä¸å¤ŸæŒ‡å®šé•¿åº¦ä¼šåœ¨å¤´éƒ¨æˆ–å°¾éƒ¨è¡¥å…¨</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;xxx&#x27;</span>.<span class=\"hljs-title function_\">padStart</span>(<span class=\"hljs-number\">4</span>, <span class=\"hljs-string\">&#x27;ab&#x27;</span>));\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;x&#x27;</span>.<span class=\"hljs-title function_\">padStart</span>(<span class=\"hljs-number\">4</span>, <span class=\"hljs-string\">&#x27;ab&#x27;</span>)); <span class=\"hljs-comment\">//è¡¥å…¨ä½æ•°ï¼Œæœ‰éœ€è¦ä¼šé‡å¤æˆ–æˆªå–</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;x&#x27;</span>.<span class=\"hljs-title function_\">padStart</span>(<span class=\"hljs-number\">4</span>)); <span class=\"hljs-comment\">// ä¸ä¼ ç¬¬äºŒä¸ªå‚æ•°é»˜è®¤ä½¿ç”¨ç©ºæ ¼è¡¥å…¨</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;xxx&#x27;</span>.<span class=\"hljs-title function_\">padStart</span>(<span class=\"hljs-number\">2</span>)); <span class=\"hljs-comment\">// è¡¥å…¨åçš„é•¿åº¦å°äºæºå­—ç¬¦ä¸²é•¿åº¦åˆ™ä¸åšä»»ä½•æ”¹å˜</span>\n\n<span class=\"hljs-comment\">// abax</span>\n<span class=\"hljs-comment\">// axxx</span>\n<span class=\"hljs-comment\">//    x</span>\n<span class=\"hljs-comment\">// xxx</span>\n</code></pre>\n</li>\n<li><p><code>padEnd</code></p>\n<p>å’Œ<code>padStart</code>æ•ˆæœç›¸åï¼Œä»å°¾éƒ¨å¼€å§‹è¡¥å…¨</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;x&#x27;</span>.<span class=\"hljs-title function_\">padEnd</span>(<span class=\"hljs-number\">5</span>, <span class=\"hljs-string\">&#x27;abc&#x27;</span>));\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;x&#x27;</span>.<span class=\"hljs-title function_\">padEnd</span>(<span class=\"hljs-number\">4</span>));\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;xxx&#x27;</span>.<span class=\"hljs-title function_\">padEnd</span>(<span class=\"hljs-number\">2</span>));\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;xxx&#x27;</span>.<span class=\"hljs-title function_\">padEnd</span>(<span class=\"hljs-number\">4</span>, <span class=\"hljs-string\">&#x27;ab&#x27;</span>));\n\n<span class=\"hljs-comment\">// xabca</span>\n<span class=\"hljs-comment\">// x   </span>\n<span class=\"hljs-comment\">// xxx</span>\n<span class=\"hljs-comment\">// xxxa</span>\n</code></pre>\n</li>\n</ul>\n<h2 id=\"å¯¹è±¡æ–°å¢æ‰©å±•\">å¯¹è±¡æ–°å¢æ‰©å±•</h2>\n<ul>\n<li><p>é“¾åˆ¤æ–­è¿ç®—ç¬¦</p>\n<p>åœ¨ES5ä¸­ï¼Œå–å¯¹è±¡å±æ€§æ—¶ï¼Œå¾€å¾€éœ€è¦åˆ¤æ–­ä»¥ä¸‹è¯¥å¯¹è±¡æ˜¯å¦å­˜åœ¨ã€‚å¦‚ä¸‹</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> name = (store \n    &amp;&amp; store.<span class=\"hljs-property\">state</span> \n    &amp;&amp; store.<span class=\"hljs-property\">state</span>.<span class=\"hljs-property\">user</span> \n    &amp;&amp; store.<span class=\"hljs-property\">state</span>.<span class=\"hljs-property\">user</span>.<span class=\"hljs-property\">name</span>) || <span class=\"hljs-string\">&quot;tom&quot;</span>\n</code></pre>\n<p>è¿™ç§å±‚å±‚åˆ¤æ–­è¿‡äºéº»çƒ¦ï¼Œå› æ­¤ES2020å¼•å…¥é“¾åˆ¤æ–­è¿ç®—ç¬¦<code>?.</code></p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> name = store?.<span class=\"hljs-property\">state</span>?.<span class=\"hljs-property\">user</span>?.<span class=\"hljs-property\">name</span>\n</code></pre>\n<p>å¦‚æœå·¦ä¾§çš„å¯¹è±¡ä¸º<code>null</code>æˆ–<code>undefined</code>åˆ™ç›´æ¥è¿”å›<code>undefined</code>ï¼Œä¸å†å¾€ä¸‹è¿ç®—</p>\n</li>\n<li><p><code>null</code>åˆ¤æ–­è¿ç®—ç¬¦</p>\n<p>ç‹¬å»å¯¹è±¡å±æ€§æ—¶ï¼Œå¦‚æœæŸä¸ªå±æ€§çš„å€¼æ—¶<code>null</code>æˆ–<code>undefined</code>ï¼Œæœ‰æ—¶éœ€è¦ä¸ºå®ƒä»¬æŒ‡å®šé»˜è®¤å€¼ã€‚å¸¸è§åšæ³•æ˜¯é€šè¿‡<code>||</code>è¿ç®—ç¬¦æŒ‡å®šé»˜è®¤å€¼</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> name = user.<span class=\"hljs-property\">name</span> || <span class=\"hljs-string\">&quot;tom&quot;</span>\n<span class=\"hljs-keyword\">const</span> age = user.<span class=\"hljs-property\">age</span> || <span class=\"hljs-number\">20</span>\n</code></pre>\n<p>åŸæ„æ˜¯å±æ€§å€¼ä¸º<code>null</code>æˆ–<code>undefined</code>æ—¶é»˜è®¤å€¼å°±ç”Ÿæ•ˆï¼Œä½†å½“<code>user.name</code>ä¸ºç©ºä¸²æˆ–<code>user.age</code>ä¸º0æ—¶é»˜è®¤å€¼ä¹Ÿä¼šç”Ÿæ•ˆ</p>\n<p>ä¸ºæ­¤ES2020å¼•å…¥æ–°çš„<code>null</code>åˆ¤æ–­è¿ç®—ç¬¦<code>??</code></p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> name = user.<span class=\"hljs-property\">name</span> ?? <span class=\"hljs-string\">&quot;tom&quot;</span>\n<span class=\"hljs-keyword\">const</span> age = user.<span class=\"hljs-property\">age</span> ?? <span class=\"hljs-number\">20</span>\n</code></pre>\n</li>\n</ul>\n<h2 id=\"å¯¹è±¡æ–°å¢æ–¹æ³•\">å¯¹è±¡æ–°å¢æ–¹æ³•</h2>\n<ul>\n<li><p><code>Object.is</code></p>\n<p>ç”¨æ¥æ›¿ä»£ <code>==</code>å’Œ<code>===</code></p>\n<p><code>==</code> ä¼šè¿›è¡Œè‡ªåŠ¨ç±»å‹è½¬æ¢ï¼Œ<code>===</code> åœ¨æ¯”è¾ƒ+0å’Œ-0æ—¶è¿”å›<code>true</code>ï¼Œ<code>NaN</code>ä¸ç­‰äºè‡ªèº«</p>\n</li>\n<li><p><code>Object.assign</code></p>\n<p>ç”¨äºå¯¹è±¡åˆå¹¶</p>\n<ul>\n<li>åªæ‹·è´æºå¯¹è±¡çš„<strong>è‡ªèº«ã€å¯æšä¸¾å±æ€§ï¼ˆå«Symbolï¼‰</strong></li>\n<li>æµ…æ‹·è´</li>\n<li>åŒåå±æ€§ä¼šè¢«è¦†ç›–</li>\n<li>é™¤é¦–å‚æ•°å¤–ï¼ˆ<code>null</code>ã€<code>undefined</code>ä¼šæŠ¥é”™ï¼‰ï¼Œéå¯¹è±¡ä¼šè¢«è½¬æ¢ä¸ºå¯¹è±¡</li>\n</ul>\n</li>\n<li><p><code>Object.keys</code></p>\n<p>è¿”å›å¯¹è±¡<strong>è‡ªèº«çš„</strong>ã€<strong>å¯éå†çš„</strong>å±æ€§çš„é”®å<strong>æ•°ç»„</strong></p>\n</li>\n<li><p><code>Object.fromEntries/Object.entries</code></p>\n<p><code>Object.fromEntries</code>å°†ä¸€ä¸ªé”®å€¼å¯¹æ•°ç»„è½¬æ¢ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œé€‚åˆå°†<code>Map</code>è½¬æ¢ä¸º<code>Object</code></p>\n<p><code>Object.entries</code>é€†æ“ä½œï¼Œç”¨äºå°†<code>Object</code>è½¬æ¢ä¸ºé”®å€¼å¯¹æ•°ç»„</p>\n</li>\n</ul>\n<h2 id=\"arrayæ‰©å±•\">Arrayæ‰©å±•</h2>\n<ul>\n<li><p><code>Array.of</code></p>\n<p>å¼¥è¡¥æ•°ç»„æ„é€ å‡½æ•°<code>Array()</code>çš„ä¸è¶³ã€‚å› ä¸ºå‚æ•°ä¸ªæ•°çš„ä¸åŒï¼Œä¼šå¯¼è‡´<code>Array()</code>çš„è¡Œä¸ºæœ‰å·®å¼‚</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-title class_\">Array</span>() <span class=\"hljs-comment\">//[]</span>\n<span class=\"hljs-title class_\">Array</span>(<span class=\"hljs-number\">3</span>) <span class=\"hljs-comment\">//[ , , ]</span>\n<span class=\"hljs-title class_\">Array</span>(<span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">5</span>) <span class=\"hljs-comment\">//[3, 4, 5]</span>\n\n<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">of</span>() <span class=\"hljs-comment\">// []</span>\n<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">of</span>(<span class=\"hljs-number\">3</span>) <span class=\"hljs-comment\">//[3]</span>\n<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">of</span>(<span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">5</span>) <span class=\"hljs-comment\">//[3, 4, 5]</span>\n</code></pre>\n</li>\n<li><p><code>Array.prototype.copyWithin()</code></p>\n<p>åœ¨å½“å‰æ•°ç»„å†…éƒ¨ï¼Œå°†æŒ‡å®šä½ç½®çš„æˆå‘˜å¤åˆ¶åˆ°å…¶ä»–ä½ç½®ï¼ˆä¼šè¦†ç›–åŸæœ‰æˆå‘˜ï¼‰</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-title function_\">copyWithin</span>(target, start = <span class=\"hljs-number\">0</span>, end = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">length</span>)\n\n[<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">5</span>].<span class=\"hljs-title function_\">copyWithin</span>(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">3</span>)\n<span class=\"hljs-comment\">// [4, 5, 3, 4, 5]</span>\n[<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">5</span>].<span class=\"hljs-title function_\">copyWithin</span>(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>)\n<span class=\"hljs-comment\">// [4, 2, 3, 4, 5]</span>\n</code></pre>\n</li>\n<li><p><code>Array.prototype.flat() &amp;&amp; Array.prototype.flatMap()</code></p>\n<p><code>flat()</code>ç”¨äºå°†æ•°æ®é™ç»´ï¼Œå‚æ•°ä¸ºé™ä½çš„ç»´æ•°ï¼ˆé»˜è®¤ä¸º1ï¼‰,å¦‚æœä¸ç®¡æœ‰å¤šå°‘å±‚ç»´ï¼Œéƒ½è¦è½¬ä¸ºä¸€ç»´æ•°ç»„ï¼Œå¯ä½¿ç”¨<code>Infinity</code>å…³é”®å­—ä½œä¸ºå‚æ•°</p>\n<p>å¦‚æœåŸæ•°ç»„æœ‰ç©ºä½<code>flat()</code>ä¼šè·³è¿‡</p>\n<pre><code class=\"hljs language-js\">[<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, [<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>]].<span class=\"hljs-title function_\">flat</span>()\n<span class=\"hljs-comment\">// [1, 2, 1, 2]</span>\n\n[<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, [<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>], [<span class=\"hljs-number\">1</span>, [<span class=\"hljs-number\">2</span>]]].<span class=\"hljs-title function_\">flat</span>()\n<span class=\"hljs-comment\">// [1, 2, 1, 2, 1, [2]]</span>\n\n[<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, [<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>], [<span class=\"hljs-number\">1</span>, [<span class=\"hljs-number\">2</span>]]].<span class=\"hljs-title function_\">flat</span>(<span class=\"hljs-number\">2</span>)\n<span class=\"hljs-comment\">// [1, 2, 1, 2, 1, 2]</span>\n\n[<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, [<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>], [<span class=\"hljs-number\">1</span>, [<span class=\"hljs-number\">2</span>]]].<span class=\"hljs-title function_\">flat</span>(<span class=\"hljs-title class_\">Infinity</span>)\n<span class=\"hljs-comment\">// [1, 2, 1, 2, 1, 2]</span>\n</code></pre>\n<p><code>flatMap()</code>ç›¸å½“äº<code>Array.prorotype.Map</code> + <code>Array.prorotype.flat</code></p>\n<pre><code class=\"hljs language-js\">[<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>].<span class=\"hljs-title function_\">flatMap</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">x</span> =&gt;</span> [x, x * <span class=\"hljs-number\">2</span>])\n<span class=\"hljs-comment\">// [1, 2, 2, 4, 3, 6]</span>\n[<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>].<span class=\"hljs-title function_\">flatMap</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">x</span> =&gt;</span> x * <span class=\"hljs-number\">2</span>)\n<span class=\"hljs-comment\">// [2, 4, 6]</span>\n</code></pre>\n</li>\n</ul>\n<h2 id=\"iterator\">iterator</h2>\n<p><strong>WHAT</strong></p>\n<p>éå†å™¨ï¼ˆ<code>iterator</code>ï¼‰å°±æ˜¯è¿™æ ·ä¸€ç§æœºåˆ¶ã€‚å®ƒæ˜¯ä¸€ç§æ¥å£ï¼Œä¸ºå„ç§ä¸åŒçš„æ•°æ®ç»“æ„æä¾›ç»Ÿä¸€çš„è®¿é—®æœºåˆ¶ã€‚ä»»ä½•æ•°æ®ç»“æ„åªè¦éƒ¨ç½²äº†<code>iterator</code>æ¥å£ï¼Œå°±å¯ä»¥å®Œæˆ<strong>éå†</strong>æ“ä½œ</p>\n<p><strong>WHY</strong></p>\n<p>JavaScriptåŸæœ‰çš„è¡¨ç¤ºé›†åˆçš„æ•°æ®ç»“æ„ä¸»è¦æ˜¯æ•°ç»„ï¼ˆArrayï¼‰å’Œå¯¹è±¡ï¼ˆObjectï¼‰ï¼ŒES6åˆæ·»åŠ äº†<code>Map</code>ã€<code>Set</code>ã€‚è¿™æ ·å°±æœ‰äº†å››ç§æ•°æ®é›†åˆï¼Œç”¨æˆ·å¯ä»¥ç»„åˆä½¿ç”¨å®ƒä»¬ï¼Œå®šä¹‰è‡ªå·±çš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚æ•°ç»„çš„æˆå‘˜æ˜¯<code>Map</code>ï¼Œ<code>Map</code>çš„æˆå‘˜æ˜¯å¯¹è±¡ã€‚è¿™æ ·éœ€è¦ä¸€ç§ç»Ÿä¸€çš„æ¥å£æœºåˆ¶æ¥å¤„ç†ä¸åŒçš„æ•°æ®ç»“æ„</p>\n<p>ä¸»è¦ä½œç”¨</p>\n<ul>\n<li><p>ä¸ºå„ç§æ•°æ®ç»“æ„æä¾›ä¸€ä¸ªç»Ÿä¸€çš„ã€ç®€ä¾¿çš„è®¿é—®æ¥å£</p>\n</li>\n<li><p>ä½¿å¾—æ•°æ®ç»“æ„çš„æˆå‘˜èƒ½å¤ŸæŒ‰æŸç§æ¬¡åºæ’åˆ—</p>\n</li>\n<li><p>ä¸º<code>for...of</code>æ‰€ä½¿ç”¨</p>\n<p>é€‚åˆéå†Arrayï¼Œæ—¢æœ‰<code>forEach</code>çš„ç®€æ´åˆæœ‰<code>for</code>çš„<code>break</code>ã€<code>return</code>ã€<code>continue</code></p>\n</li>\n</ul>\n<p><strong>HOW</strong></p>\n<p><code>iterator</code>çš„éå†è¿‡ç¨‹</p>\n<ol>\n<li>åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡ï¼ŒæŒ‡å‘å½“å‰çš„æ•°æ®ç»“æ„çš„èµ·å§‹ä½ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´éå†å™¨å¯¹è±¡æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡</li>\n<li>ç¬¬ä¸€æ¬¡è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼Œå¯ä»¥å°†æŒ‡é’ˆæŒ‡å‘æ•°æ®ç»“æ„çš„ç¬¬ä¸€ä¸ªæˆå‘˜</li>\n<li>ç¬¬äºŒæ¬¡è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼ŒæŒ‡é’ˆå°±æŒ‡å‘æ•°æ®ç»“æ„çš„ç¬¬äºŒä¸ªæˆå‘˜</li>\n<li>ä¸æ–­è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼Œç›´åˆ°å®ƒæŒ‡å‘æ•°æ®ç»“æ„çš„ç»“æŸä½ç½®</li>\n</ol>\n<p>æ¯ä¸€æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œéƒ½ä¼šè¿”å›æ•°æ®ç»“æ„çš„å½“å‰æˆå‘˜çš„ä¿¡æ¯ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯è¿”å›ä¸€ä¸ªåŒ…å«<code>value</code>å’Œ<code>done</code>ä¸¤ä¸ªå±æ€§çš„å¯¹è±¡ï¼Œå…¶ä¸­<code>value</code>å±æ€§æ˜¯å½“å‰æˆå‘˜çš„å€¼ï¼Œ<code>done</code>å±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦éå†ç»“æŸ</p>\n<p>ES6è§„å®šï¼Œé»˜è®¤çš„<code>iterator</code>æ¥å£éƒ¨ç½²åœ¨æ•°æ®ç»“æ„çš„<code>Symbol.iterator</code>å±æ€§ï¼Œæˆ–è€…è¯´ï¼Œä¸€ä¸ªæ•°æ®ç»“æ„åªè¦å…·æœ‰<code>Symbol.iterator</code>å±æ€§ï¼Œå°±å¯ä»¥è®¤ä¸ºæ˜¯å¯éå†çš„ï¼ˆ<code>iterable</code>ï¼‰</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> obj = {\n    <span class=\"hljs-attr\">data</span>: [<span class=\"hljs-string\">&#x27;hello&#x27;</span>, <span class=\"hljs-string\">&#x27;world&#x27;</span>],\n    [<span class=\"hljs-title class_\">Symbol</span>.<span class=\"hljs-property\">iterator</span>](): {\n        <span class=\"hljs-keyword\">const</span> self = <span class=\"hljs-variable language_\">this</span>\n        <span class=\"hljs-keyword\">let</span> index = <span class=\"hljs-number\">0</span>\n        <span class=\"hljs-keyword\">return</span> {\n            <span class=\"hljs-title function_\">next</span>(<span class=\"hljs-params\"></span>) {\n                <span class=\"hljs-keyword\">if</span> (index &lt; self.<span class=\"hljs-property\">data</span>.<span class=\"hljs-property\">length</span>) {\n                    <span class=\"hljs-keyword\">return</span> {\n                        <span class=\"hljs-attr\">value</span>: self.<span class=\"hljs-property\">data</span>[index++]\n                        <span class=\"hljs-attr\">done</span>: <span class=\"hljs-literal\">false</span>\n                    }\n                }\n                <span class=\"hljs-keyword\">return</span> {\n                    <span class=\"hljs-attr\">value</span>: <span class=\"hljs-literal\">undefined</span>,\n                    <span class=\"hljs-attr\">done</span>: <span class=\"hljs-literal\">true</span>\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>åŸç”Ÿå…·å¤‡iteratoræ¥å£çš„æ•°æ®ç»“æ„ï¼š<code>Mapã€Arrayã€Setã€Stringã€TypedArrayã€argumentsã€NodeListå¯¹è±¡</code></p>\n<h2 id=\"let-vs-const\">let VS const</h2>\n<p>åœ¨letå’Œconstä¹‹é—´ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨constï¼Œå°¤å…¶æ˜¯åœ¨å…¨å±€ç¯å¢ƒã€‚constä¼˜äºletçš„å‡ ä¸ªåŸå› ï¼š</p>\n<ul>\n<li>constå¯ä»¥æé†’é˜…è¯»ç¨‹åºçš„äººï¼Œè¿™ä¸ªå˜é‡ä¸åº”è¯¥æ”¹å˜</li>\n<li>constæ¯”è¾ƒç¬¦åˆå‡½æ•°å¼ç¼–ç¨‹æ€æƒ³ï¼Œè¿ç®—ä¸æ”¹å˜å€¼ï¼Œåªæ˜¯æ–°å»ºå€¼ï¼Œè€Œä¸”è¿™æ ·ä¹Ÿæœ‰åˆ©äºå°†æ¥çš„åˆ†å¸ƒå¼è®¡ç®—</li>\n<li>JavaScriptç¼–è¯‘å™¨ä¼šå¯¹constè¿›è¡Œä¼˜åŒ–</li>\n<li>é•¿è¿œæ¥çœ‹ï¼ŒJavaScriptå¯èƒ½ä¼šæœ‰å¤šçº¿ç¨‹çš„å®ç°ï¼Œè¿™æ—¶letè¡¨ç¤ºçš„å˜é‡åªåº”å‡ºç°åœ¨å•çº¿ç¨‹è¿è¡Œçš„ä»£ç ä¸­ï¼Œä¸æ˜¯å¤šçº¿ç¨‹å…±äº«çš„ï¼Œè¿™æ ·æœ‰åˆ©äºçº¿ç¨‹å®‰å…¨</li>\n</ul>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// bad</span>\n<span class=\"hljs-keyword\">var</span> a = <span class=\"hljs-number\">1</span>, b = <span class=\"hljs-number\">2</span>, c = <span class=\"hljs-number\">3</span>\n<span class=\"hljs-comment\">// good</span>\n<span class=\"hljs-keyword\">const</span> a = <span class=\"hljs-number\">1</span>;\n<span class=\"hljs-keyword\">const</span> b = <span class=\"hljs-number\">2</span>;\n<span class=\"hljs-keyword\">const</span> c = <span class=\"hljs-number\">3</span>;\n<span class=\"hljs-comment\">// best</span>\n<span class=\"hljs-keyword\">const</span> [a, b, c] = [<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>]\n</code></pre>\n<h2 id=\"generator\">generator</h2>\n<p>ES6æä¾›çš„ä¸€ç§å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆ</p>\n<p>å½¢å¼ä¸Šï¼Œ<code>generator</code>å‡½æ•°æ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œå°è£…äº†å¤šä¸ªå†…éƒ¨çŠ¶æ€ã€‚æ‰§è¡Œ<code>generator</code>å‡½æ•°ä¼šè¿”å›ä¸€ä¸ª<strong>éå†å™¨å¯¹è±¡</strong>ã€‚</p>\n<p>è¯­æ³•ä¸Šï¼Œ<code>generator</code>å‡½æ•°æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ã€‚<code>function</code>å…³é”®å­—ä¸å‡½æ•°åä¹‹é—´æœ‰ä¸€ä¸ª<code>*</code>ï¼›å‡½æ•°ä½“å†…éƒ¨ä½¿ç”¨<code>yield</code>è¡¨è¾¾å¼å®šä¹‰ä¸åŒçš„å†…éƒ¨çŠ¶æ€</p>\n<p>ä¸æ™®é€šå‡½æ•°ä¸åŒï¼Œgeneratorå‡½æ•°è¢«è°ƒç”¨åå¹¶ä¸æ‰§è¡Œï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªæŒ‡å‘å†…éƒ¨çŠ¶æ€çš„æŒ‡é’ˆå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯<strong>éå†å™¨å¯¹è±¡</strong>ã€‚ä¸‹ä¸€æ­¥ï¼Œå¿…é¡»è°ƒç”¨éå†å™¨å¯¹è±¡çš„<code>next</code>æ–¹æ³•ä½¿å¾—æŒ‡é’ˆç§»å‘ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚ä¹Ÿå°±æ˜¯è¯´æ¯æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œå†…éƒ¨æŒ‡é’ˆå°±ä»å‡½æ•°å¤´éƒ¨æˆ–ä¸Šä¸€æ¬¡åœä¸‹æ¥çš„åœ°æ–¹å¼€å§‹æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ª<code>yield</code>è¡¨è¾¾å¼ï¼ˆæˆ–<code>return</code>è¯­å¥ï¼‰</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span>* <span class=\"hljs-title function_\">gen</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">const</span> str1 = <span class=\"hljs-keyword\">yield</span> <span class=\"hljs-string\">&quot;hello&quot;</span>\n  <span class=\"hljs-comment\">// str1 = 222</span>\n  <span class=\"hljs-keyword\">const</span> str2 = <span class=\"hljs-keyword\">yield</span> <span class=\"hljs-string\">&quot;world&quot;</span>\n  <span class=\"hljs-comment\">// str2 = 333</span>\n  <span class=\"hljs-keyword\">return</span> str2\n}\n\n<span class=\"hljs-keyword\">const</span> iter = <span class=\"hljs-title function_\">gen</span>()\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(iter.<span class=\"hljs-title function_\">next</span>())\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(iter.<span class=\"hljs-title function_\">next</span>(<span class=\"hljs-number\">222</span>))\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(iter.<span class=\"hljs-title function_\">next</span>(<span class=\"hljs-number\">333</span>))\n</code></pre>\n<p>ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼Œ<code>generator</code>å‡½æ•°å¼€å§‹æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ç¬¬ä¸€ä¸ª<code>yield</code>è¡¨è¾¾å¼ä¸ºæ­¢ã€‚<code>next</code>æ–¹æ³•è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒçš„<code>value</code>å€¼å°±æ˜¯å½“å‰<code>yield</code>è¡¨è¾¾å¼çš„å€¼ï¼Œdoneçš„å€¼ä¸º<code>false</code></p>\n<p>ç¬¬äºŒæ¬¡è°ƒç”¨ï¼Œ<code>generator</code>ä»ä¸Šæ¬¡yieldè¡¨è¾¾å¼åœä¸‹æ¥çš„åœ°æ–¹ä¸€ç›´æ‰§è¡Œåˆ°ä¸‹ä¸€ä¸ª<code>yield</code>è¡¨è¾¾å¼ ğŸ‘† â€¦â€¦</p>\n<p>ç¬¬ä¸‰æ¬¡è°ƒç”¨ï¼Œ<code>generator</code>å‡½æ•°ä»ä¸Šæ¬¡<code>yield</code>è¡¨è¾¾å¼åœä¸‹æ¥çš„åœ°æ–¹ä¸€ç›´æ‰§è¡Œåˆ°<code>return</code>è¯­å¥ï¼Œnextè¿”å›çš„<code>value</code>å€¼å°±æ˜¯<code>return</code>åé¢è¡¨è¾¾å¼çš„å€¼ï¼Œ<code>done</code>ä¸ºtrueï¼ˆå¦‚æœæ˜¯<code>yield</code>åˆ™ä¸º<code>false</code>ï¼‰</p>\n<p><code>yield</code>è¡¨è¾¾å¼æœ¬èº«æ²¡æœ‰è¿”å›å€¼ï¼ˆæˆ–è€…è¯´æ€»æ˜¯è¿”å›undefinedï¼‰ã€‚<code>next</code>æ–¹æ³•å¯ä»¥å¸¦ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°ä¼šè¢«å½“ä½œ<strong>ä¸Šä¸€ä¸ª</strong><code>yield</code>è¡¨è¾¾å¼çš„è¿”å›å€¼</p>\n"},{"title":"HTMLç›¸å…³é—®é¢˜","tags":["HTML"],"categories":"HTML","description":"## cookieã€sessionStorageã€localStorageçš„åŒºåˆ«\n\n|                          | cookie                                         | localStorage | sessionStorage |\n|","createDate":"2020-04-01 23:00:40","updateDate":"10/1/2021, 3:34:43 AM","body":"<h2 id=\"cookieã€sessionstorageã€localstorageçš„åŒºåˆ«\">cookieã€sessionStorageã€localStorageçš„åŒºåˆ«</h2>\n<p>|                          | cookie                                         | localStorage | sessionStorage |\n| </p>\n"},{"title":"JavaScriptç›¸å…³-0","tags":["JavaScript"],"categories":"JavaScript","description":"## äº‹ä»¶å§”æ‰˜ ï¼ˆevent delegationï¼‰\näº‹ä»¶å§”æ‰˜æ˜¯å°†äº‹ä»¶ç›‘å¬å™¨æ·»åŠ åˆ°çˆ¶å…ƒç´ ï¼Œè€Œä¸æ˜¯æ¯ä¸ªå­å…ƒç´ å•ç‹¬è®¾ç½®äº‹ä»¶ç›‘å¬å™¨ï¼Œå½“è§¦å‘å­å…ƒç´ æ—¶ï¼Œäº‹ä»¶ä¼šå†’æ³¡åˆ°çˆ¶å…ƒç´ ï¼Œç›‘å¬å™¨å°±ä¼šè§¦å‘ï¼Œè¿™ç§æŠ€æœ¯çš„å¥½å¤„æ˜¯ï¼š\n\n1. å†…å­˜å ç”¨å°‘ï¼Œå› ä¸ºåªéœ€è¦ä¸€ä¸ªçˆ¶å…ƒç´ çš„äº‹ä»¶å¤„ç†ç¨‹åºï¼Œè€Œä¸å¿…ä¸ºæ¯ä¸ªåä»£éƒ½æ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åºã€‚\n2. æ— éœ€ä»å·²åˆ é™¤çš„å…ƒç´ ä¸­è§£ç»‘å¤„ç†ç¨‹åºï¼Œä¹Ÿæ— éœ€å°†å¤„ç†ç¨‹åºç»‘å®šåˆ°æ–°å…ƒç´ ä¸Šã€‚\n\n## JavaScriptä¸­","createDate":"2020-02-10 23:18:10","updateDate":"10/1/2021, 3:34:43 AM","body":"<h2 id=\"äº‹ä»¶å§”æ‰˜-ï¼ˆevent-delegationï¼‰\">äº‹ä»¶å§”æ‰˜ ï¼ˆevent delegationï¼‰</h2>\n<p>äº‹ä»¶å§”æ‰˜æ˜¯å°†äº‹ä»¶ç›‘å¬å™¨æ·»åŠ åˆ°çˆ¶å…ƒç´ ï¼Œè€Œä¸æ˜¯æ¯ä¸ªå­å…ƒç´ å•ç‹¬è®¾ç½®äº‹ä»¶ç›‘å¬å™¨ï¼Œå½“è§¦å‘å­å…ƒç´ æ—¶ï¼Œäº‹ä»¶ä¼šå†’æ³¡åˆ°çˆ¶å…ƒç´ ï¼Œç›‘å¬å™¨å°±ä¼šè§¦å‘ï¼Œè¿™ç§æŠ€æœ¯çš„å¥½å¤„æ˜¯ï¼š</p>\n<ol>\n<li>å†…å­˜å ç”¨å°‘ï¼Œå› ä¸ºåªéœ€è¦ä¸€ä¸ªçˆ¶å…ƒç´ çš„äº‹ä»¶å¤„ç†ç¨‹åºï¼Œè€Œä¸å¿…ä¸ºæ¯ä¸ªåä»£éƒ½æ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åºã€‚</li>\n<li>æ— éœ€ä»å·²åˆ é™¤çš„å…ƒç´ ä¸­è§£ç»‘å¤„ç†ç¨‹åºï¼Œä¹Ÿæ— éœ€å°†å¤„ç†ç¨‹åºç»‘å®šåˆ°æ–°å…ƒç´ ä¸Šã€‚</li>\n</ol>\n<h2 id=\"javascriptä¸­çš„thisæŒ‡å‘\">JavaScriptä¸­çš„thisæŒ‡å‘</h2>\n<p>ç®€å•æ¥è®²ï¼Œ<code>this</code>çš„æŒ‡å‘å–å†³äºå‡½æ•°çš„è°ƒç”¨æ–¹å¼</p>\n<ol start=\"0\">\n<li>å¦‚æœæ˜¯ç®­å¤´å‡½æ•°ï¼Œ<code>this</code>è¢«è®¾ç½®ä¸ºè°ƒç”¨æ—¶çš„ä¸Šä¸‹æ–‡</li>\n<li>å¦‚æœä½¿ç”¨<code>new</code>ï¼Œå‡½æ•°å†…çš„<code>this</code>æ˜¯ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡</li>\n<li>å¦‚æœ<code>applyã€callã€bind</code>æ–¹æ³•ç”¨äºè°ƒç”¨/åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°å†…çš„<code>this</code>å°±æ˜¯ä½œä¸ºå‚æ•°ä¼ å…¥è¿™äº›æ–¹æ³•çš„å¯¹è±¡</li>\n<li>å½“å‡½æ•°ä½œä¸ºå¯¹è±¡é‡Œçš„æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œå‡½æ•°å†…çš„<code>this</code>æ˜¯è°ƒç”¨è¯¥å‡½æ•°çš„å¯¹è±¡ï¼Œæ¯”å¦‚å½“<code>obj.method()</code>è¢«è°ƒç”¨æ—¶ï¼Œå‡½æ•°å†…çš„<code>this</code>å°†ç»‘å®šåˆ°<code>obj</code>å¯¹è±¡</li>\n<li>å¦‚æœä¸ç¬¦åˆä¸Šè¿°è§„åˆ™ï¼Œé‚£ä¹ˆ<code>this</code>çš„å€¼æŒ‡å‘å…¨å±€å¯¹è±¡<code>global object</code>ï¼Œæµè§ˆå™¨ç¯å¢ƒä¸‹<code>this</code>çš„å€¼æŒ‡å‘<code>window</code>å¯¹è±¡ï¼Œä½†åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹<code>use strict</code>ï¼Œ<code>this</code>çš„å€¼ä¸º<code>undefined</code></li>\n<li>å¦‚æœç¬¦åˆä¸Šè¿°å¤šä¸ªè§„åˆ™ï¼Œä»ä¸Šåˆ°ä¸‹æƒé‡ä¾æ¬¡é€’å‡</li>\n</ol>\n<h2 id=\"åŸå‹ç»§æ‰¿-prototypal-inheritance\">åŸå‹ç»§æ‰¿ <code>prototypal inheritance</code></h2>\n<p>æ‰€æœ‰çš„JSå¯¹è±¡éƒ½æœ‰ä¸€ä¸ª<code>prototype</code>å¯¹è±¡ï¼ŒæŒ‡å‘å®ƒçš„åŸå‹å¯¹è±¡ï¼Œå½“è¯•å›¾è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå¦‚æœæ²¡æœ‰åœ¨è¯¥å¯¹è±¡ä¸Šæ‰¾åˆ°å®ƒè¿˜ä¼šæœç´¢è¯¥å¯¹è±¡çš„åŸå‹ï¼Œä»¥åŠè¯¥å¯¹è±¡çš„åŸå‹çš„åŸå‹ï¼Œä¾æ¬¡å±‚å±‚å‘ä¸Šæœç´¢ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªåå­—åŒ¹é…çš„å±æ€§æˆ–è¾¾åˆ°åŸå‹é“¾çš„æœ«å°¾ã€‚è¿™ç§è¡Œä¸ºæ˜¯åœ¨æ¨¡æ‹Ÿç»å…¸çš„ç»§æ‰¿ï¼Œä½†ä¸å…¶è¯´æ—¶ç»§æ‰¿è¿˜ä¸å¦‚è¯´æ˜¯å§”æ‰˜<code>delegation</code></p>\n<p>è¯»å–å¯¹è±¡çš„å±æ€§å€¼æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ°åŸå‹é“¾ä¸­æŸ¥æ‰¾</p>\n<p>è®¾ç½®å¯¹è±¡çš„å±æ€§å€¼æ—¶ï¼Œä¸ä¼šæŸ¥æ‰¾åŸå‹é“¾ï¼Œå¦‚æœå½“å‰å¯¹è±¡ä¸­æ²¡æœ‰æ­¤å±æ€§ï¼Œç›´æ¥æ·»åŠ æ­¤å±æ€§å¹¶è®¾ç½®å…¶å€¼</p>\n<p><img src=\"./imgs/1581317824537.png\" alt=\"åŸå‹\"></p>\n<h2 id=\"javascriptçš„æ¨¡å—åŒ–æœºåˆ¶\">JavaScriptçš„æ¨¡å—åŒ–æœºåˆ¶</h2>\n<ul>\n<li><p>AMD</p>\n<p><strong>Asynchronous Module Definition å¼‚æ­¥æ¨¡å—åŠ è½½æœºåˆ¶</strong>ï¼ŒReqireJSå®ç°äº†AMDè§„èŒƒ</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">//a.js</span>\n<span class=\"hljs-comment\">//defineå¯ä»¥ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯å­—ç¬¦ä¸²-æ¨¡å—åã€æ•°ç»„-ä¾èµ–æ¨¡å—ã€å‡½æ•°-å›è°ƒå‡½æ•°</span>\n<span class=\"hljs-title function_\">define</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">1</span>;\n})\n\n<span class=\"hljs-comment\">// b.js</span>\n<span class=\"hljs-comment\">//æ•°ç»„ä¸­å£°æ˜éœ€è¦åŠ è½½çš„æ¨¡å—ï¼Œå¯ä»¥æ˜¯æ¨¡å—åã€jsæ–‡ä»¶è·¯å¾„</span>\n<span class=\"hljs-built_in\">require</span>([<span class=\"hljs-string\">&#x27;a&#x27;</span>], <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">a</span>){\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(a);<span class=\"hljs-comment\">// 1</span>\n});\n</code></pre>\n<p>ç‰¹ç‚¹ï¼š</p>\n<p>å¯¹äºä¾èµ–çš„æ¨¡å—ï¼ŒAMDæ¨å´‡<strong>ä¾èµ–å‰ç½®ï¼Œæå‰æ‰§è¡Œ</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨<code>define</code>æ–¹æ³•é‡Œä¼ å…¥çš„ä¾èµ–æ¨¡å—ï¼ˆæ•°ç»„ï¼‰ä¼šåœ¨ä¸€å¼€å§‹å°±ä¸‹è½½å¹¶æ‰§è¡Œã€‚é€‚åˆåœ¨<strong>æµè§ˆå™¨ç«¯</strong>ä½¿ç”¨</p>\n</li>\n<li><p>CommonJS</p>\n<p>CommonJSè§„èŒƒä¸ºCommonJSå°ç»„æ‰€æå‡ºï¼Œç›®çš„æ˜¯å¼¥è¡¥JavaScriptåœ¨æœåŠ¡å™¨ç«¯ç¼ºå°‘æ¨¡å—åŒ–æœºåˆ¶ï¼Œ<strong>NodeJSã€webpack</strong>éƒ½æ˜¯åŸºäºè¯¥è§„èŒƒæ¥å®ç°çš„ã€‚</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">//a.js</span>\n<span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;hello world&quot;</span>)\n}\n\n<span class=\"hljs-comment\">//b.js</span>\n<span class=\"hljs-keyword\">var</span> a = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;./a&#x27;</span>);\n\n<span class=\"hljs-title function_\">a</span>();<span class=\"hljs-comment\">//&quot;hello world&quot;</span>\n\n<span class=\"hljs-comment\">//æˆ–è€…</span>\n\n<span class=\"hljs-comment\">//a2.js</span>\n<span class=\"hljs-built_in\">exports</span>.<span class=\"hljs-property\">num</span> = <span class=\"hljs-number\">1</span>;\n<span class=\"hljs-built_in\">exports</span>.<span class=\"hljs-property\">obj</span> = {<span class=\"hljs-attr\">xx</span>: <span class=\"hljs-number\">2</span>};\n\n<span class=\"hljs-comment\">//b2.js</span>\n<span class=\"hljs-keyword\">var</span> a2 = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;./a2&#x27;</span>);\n\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(a2);<span class=\"hljs-comment\">//{ num: 1, obj: { xx: 2 } }</span>\n</code></pre>\n<p>ç‰¹ç‚¹ï¼š</p>\n<ul>\n<li>æ‰€æœ‰ä»£ç éƒ½è¿è¡Œåœ¨<strong>æ¨¡å—ä½œç”¨åŸŸ</strong>ï¼Œä¸ä¼šæ±¡æŸ“å…¨å±€ä½œç”¨åŸŸ</li>\n<li>æ¨¡å—æ˜¯<strong>åŒæ­¥åŠ è½½</strong>çš„ï¼Œå³åªæœ‰åŠ è½½å®Œæˆæ‰èƒ½æ‰§è¡Œåé¢çš„æ“ä½œ</li>\n<li>æ¨¡å—åœ¨é¦–æ¬¡æ‰§è¡Œåå°±ä¼š<strong>ç¼“å­˜</strong>ï¼Œå†æ¬¡åŠ è½½åªè¿”å›ç¼“å­˜ç»“æœï¼Œå¦‚æœæƒ³è¦å†æ¬¡æ‰§è¡Œï¼Œå¯æ¸…é™¤ç¼“å­˜</li>\n<li><code>require</code>è¿”å›çš„æ˜¯è¢«è¾“å‡ºçš„<strong>å€¼çš„æ‹·è´</strong>ï¼Œæ¨¡å—å†…éƒ¨çš„å˜åŒ–ä¹Ÿä¸ä¼šå½±å“è¿™ä¸ªå€¼</li>\n</ul>\n</li>\n<li><p>ES6 Module</p>\n<p>ES6 Moduleæ˜¯<strong>ES6</strong>ä¸­è§„å®šçš„æ¨¡å—ä½“ç³»</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">//a.js</span>\n<span class=\"hljs-keyword\">var</span> name = <span class=\"hljs-string\">&#x27;lin&#x27;</span>;\n<span class=\"hljs-keyword\">var</span> age = <span class=\"hljs-number\">13</span>;\n<span class=\"hljs-keyword\">var</span> job = <span class=\"hljs-string\">&#x27;ninja&#x27;</span>;\n\n<span class=\"hljs-keyword\">export</span> { name, age, job};\n\n<span class=\"hljs-comment\">//b.js</span>\n<span class=\"hljs-keyword\">import</span> { name, age, job} <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;./a.js&#x27;</span>;\n\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(name, age, job);<span class=\"hljs-comment\">// lin 13 ninja</span>\n\n<span class=\"hljs-comment\">//æˆ–è€…</span>\n\n<span class=\"hljs-comment\">//a2.js</span>\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;default &#x27;</span>);\n}\n\n<span class=\"hljs-comment\">//b2.js</span>\n<span class=\"hljs-keyword\">import</span> customName <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;./a2.js&#x27;</span>;\n<span class=\"hljs-title function_\">customName</span>(); <span class=\"hljs-comment\">// &#x27;default&#x27;</span>\n</code></pre>\n<p>ç‰¹ç‚¹ï¼ˆå¯¹æ¯”CommonJSï¼‰ï¼š</p>\n<p>|          | CommonJS     | ES6 Module     |\n|</p>\n</li>\n</ul>\n"},{"title":"JavaScriptç›¸å…³-1","tags":["JavaScript"],"categories":"JavaScript","description":"## document.write\n\n`document.write()` æ–¹æ³•å°†ä¸€ä¸ªæ–‡æœ¬å­—ç¬¦ä¸²å†™å…¥ä¸€ä¸ªç”± [`document.open()`](https://developer.mozilla.org/zh-CN/docs/Web/API/Document/open) æ‰“å¼€çš„æ–‡æ¡£æµï¼ˆdocument streamï¼‰ã€‚ï¼ˆ[MDN](https://developer.mozilla.org","createDate":"2020-02-11 23:33:22","updateDate":"10/1/2021, 3:34:43 AM","body":"<h2 id=\"documentwrite\">document.write</h2>\n<p><code>document.write()</code> æ–¹æ³•å°†ä¸€ä¸ªæ–‡æœ¬å­—ç¬¦ä¸²å†™å…¥ä¸€ä¸ªç”± <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Document/open\"><code>document.open()</code></a> æ‰“å¼€çš„æ–‡æ¡£æµï¼ˆdocument streamï¼‰ã€‚ï¼ˆ<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Document/write\">MDN</a>ï¼‰</p>\n<p>ä½œç”¨ï¼š</p>\n<p>åŠ è½½åªæœ‰å¯ç”¨JavaScriptåçš„æ ·å¼æ–‡ä»¶</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n    <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">open</span>()\n    docuemnt.<span class=\"hljs-title function_\">write</span>(<span class=\"hljs-string\">&#x27;&lt;link rel=&quot;stylesheet&quot; href=&quot;style_neads_js.css&quot; /&gt;&#x27;</span>)\n    <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">close</span>()\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n</code></pre>\n<p>å¼Šç«¯ï¼š</p>\n<ul>\n<li>åœ¨éloadingé˜¶æ®µä½¿ç”¨<code>docuemnt.write</code>ä¼šæ¸…é™¤å·²åŠ è½½çš„é¡µé¢</li>\n<li><code>docuemnt.write</code>ä¸èƒ½å¤Ÿåœ¨XHTMLä¸­ä½¿ç”¨</li>\n<li>åµŒå…¥scriptä¸­çš„<code>docuemnt.write</code>ä¸èƒ½ç»™ä»»æ„èŠ‚ç‚¹æ·»åŠ å­èŠ‚ç‚¹ï¼Œå› ä¸ºå®ƒæ˜¯éšç€DOMçš„æ„å»ºæ‰§è¡Œçš„</li>\n<li>åˆ©ç”¨<code>docuemnt.write</code>å†™å…¥HTMLå­—ç¬¦æµå¹¶ä¸æ˜¯ä¸€ä¸ªå¥½æ–¹æ³•ï¼Œå®ƒæœ‰è¿DOMæ“ä½œçš„æ¦‚å¿µ</li>\n<li>åˆ©ç”¨<code>docuemnt.write</code>æ·»åŠ scriptåŠ è½½å¤–éƒ¨è„šæœ¬æ—¶ï¼Œæµè§ˆå™¨çš„HTMLè§£æä¼šè¢«scriptçš„åŠ è½½æ‰€é˜»å¡</li>\n</ul>\n<h2 id=\"åŠŸèƒ½æ£€æµ‹ï¼ˆfeature-detectionï¼‰ã€åŠŸèƒ½æ¨æ–­ï¼ˆfeature-inferenceï¼‰ã€å’Œä½¿ç”¨uaå­—ç¬¦ä¸²ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«\">åŠŸèƒ½æ£€æµ‹ï¼ˆfeature detectionï¼‰ã€åŠŸèƒ½æ¨æ–­ï¼ˆfeature inferenceï¼‰ã€å’Œä½¿ç”¨UAå­—ç¬¦ä¸²ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«</h2>\n<p>åŠŸèƒ½æ£€æµ‹ï¼ˆfeature detectionï¼‰ ğŸ‘</p>\n<p>åŠŸèƒ½æ£€æµ‹åŒ…æ‹¬ç¡®å®šæµè§ˆå™¨æ˜¯å¦æ”¯æŒæŸæ®µä»£ç ï¼Œä»¥åŠæ˜¯å¦èƒ½è¿è¡Œä¸åŒçš„ä»£ç ï¼ˆå–å†³äºå®ƒæ˜¯å¦æ‰§è¡Œï¼‰ï¼Œä¸€è¾¹æµè§ˆå™¨èƒ½å§‹ç»ˆæ­£ç¡®è¿è¡Œä»£ç åŠŸèƒ½ï¼Œè€Œä¸ä¼šåœ¨æŸäº›æµè§ˆå™¨ä¸­å‡ºç°å´©æºƒå’Œé”™è¯¯</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">if</span> (<span class=\"hljs-string\">&quot;geolocation&quot;</span> <span class=\"hljs-keyword\">in</span> navigator) {\n    <span class=\"hljs-comment\">// å¯ä»¥ä½¿ç”¨ navigator.geolocation</span>\n} <span class=\"hljs-keyword\">else</span> {\n    <span class=\"hljs-comment\">// å¤„ç† navigator.geolocation åŠŸèƒ½ç¼ºå¤±</span>\n}\n</code></pre>\n<p>åŠŸèƒ½æ¨æ–­ï¼ˆfeature inferenceï¼‰ğŸ‘</p>\n<p>åŠŸèƒ½æ¨æ–­ä¸åŠŸèƒ½æ£€æµ‹ä¸€æ ·ï¼Œä¼šå¯¹åŠŸèƒ½å¯ç”¨æ€§è¿›è¡Œæ£€æŸ¥ï¼Œä½†æ˜¯åœ¨åˆ¤æ–­é€šè¿‡åè¿˜ä¼šä½¿ç”¨å…¶ä»–åŠŸèƒ½ï¼Œå› ä¸ºå®ƒå‡è®¾å…¶ä»–åŠŸèƒ½ä¹Ÿå¯ç”¨</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">getElementsByTagName</span>) {\n  element = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(id);\n}\n</code></pre>\n<p>UA ğŸ‘</p>\n<p>è¿™æ˜¯ä¸€ä¸ªæµè§ˆå™¨æŠ¥å‘Šçš„å­—ç¬¦ä¸²ï¼Œå®ƒå…è®¸ç½‘ç»œåè®®å¯¹ç­‰æ–¹ï¼ˆnetwork protocol peersï¼‰è¯†åˆ«è¯·æ±‚ç”¨æˆ·ä»£ç†çš„åº”ç”¨ç±»å‹ã€æ“ä½œç³»ç»Ÿã€åº”ç”¨ä¾›åº”å•†å’Œåº”ç”¨ç‰ˆæœ¬ã€‚å®ƒå¯ä»¥é€šè¿‡<code>navigator.userAgent</code>è®¿é—®ã€‚ç„¶è€Œï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å¾ˆå¯èƒ½å­˜åœ¨æ¬ºéª—æ€§ï¼Œä¾‹å¦‚ï¼Œchromeä¼šåŒæ—¶ä½œä¸ºchromeå’Œsafariè¿›è¡ŒæŠ¥å‘Šï¼Œå› æ­¤ï¼Œè¦æ£€æµ‹safariï¼Œé™¤äº†æ£€æŸ¥safariå­—ç¬¦ä¸²ï¼Œè¿˜è¦æ£€æŸ¥æ˜¯å¦åŒæ—¶å­˜åœ¨chromeå­—ç¬¦ä¸²ã€‚</p>\n<h2 id=\"ajax\">Ajax</h2>\n<p><strong>WHAT</strong></p>\n<p>Ajaxï¼ˆasynchronous JavaScript and XMLï¼‰æ˜¯ä½¿ç”¨å®¢æˆ·ç«¯ä¸Šçš„è®¸å¤šwebæŠ€æœ¯ï¼Œåˆ›å»ºå¼‚æ­¥webåº”ç”¨çš„ä¸€ç§<strong>æŠ€æœ¯ç»“åˆä½“</strong>ã€‚å€ŸåŠ©Ajaxï¼Œwebåº”ç”¨å¯ä»¥<strong>å¼‚æ­¥</strong>ï¼ˆåœ¨åå°ï¼‰å‘æœåŠ¡å™¨å‘é€æ•°æ®å¯ä»æœåŠ¡å™¨æ£€ç´¢æ•°æ®è€Œä¸ä¼šå¹²æ‰°ç°æœ‰é¡µé¢çš„æ˜¾ç¤ºå’Œè¡Œä¸ºã€‚é€šè¿‡å°†<strong>æ•°æ®äº¤äº’å±‚ä¸è¡¨ç¤ºå±‚åˆ†ç¦»</strong>ï¼ŒAjaxå…è®¸ç½‘é¡µå’Œæ‰©å±•webåº”ç”¨ç¨‹åºåŠ¨æ€æ›´æ”¹å†…å®¹è€Œ<strong>ä¸éœ€é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢</strong>ï¼Œå®é™…ä¸Šï¼Œç°åœ¨é€šå¸¸å°†XMLæ›¿æ¢ä¸ºJSONï¼Œå› ä¸ºJavaScriptå¯¹JSONæœ‰åŸç”Ÿæ”¯æŒä¼˜åŠ¿</p>\n<p><strong>WHY</strong></p>\n<p>ä¼˜ç‚¹ï¼š</p>\n<ul>\n<li>äº¤äº’æ€§æ›´å¥½ï¼Œæ¥è‡ªæœåŠ¡å™¨çš„æ–°å†…å®¹å¯ä»¥åŠ¨æ€æ›´æ”¹ï¼Œæ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢</li>\n<li>å‡å°‘ä¸æœåŠ¡å™¨çš„è¿æ¥ï¼Œå› ä¸ºè„šæœ¬å’Œæ ·å¼åªéœ€è¦è¢«è¯·æ±‚ä¸€æ¬¡</li>\n<li>çŠ¶æ€å¯ä»¥ç»´æŠ¤åœ¨ä¸€ä¸ªé¡µé¢ä¸Šï¼ŒJavaScriptå˜é‡å’ŒDOMçŠ¶æ€å°†çš„åˆ°ä¿æŒï¼Œå› ä¸ºä¸»å®¹å™¨é¡µé¢æœªè¢«é‡æ–°åŠ è½½</li>\n<li>åŸºæœ¬ä¸ŠåŒ…å«å¤§éƒ¨åˆ†SPAçš„ä¼˜ç‚¹</li>\n</ul>\n<p>ç¼ºç‚¹</p>\n<ul>\n<li>åŠ¨æ€ç½‘é¡µå¾ˆéš¾æ”¶è—</li>\n<li>å¦‚æœJavaScriptåœ¨æµè§ˆå™¨ä¸­è¢«ç¦ç”¨åˆ™ä¸èµ·ä½œç”¨</li>\n<li>æœ‰äº›ç½‘ç»œçˆ¬è™«ä¸æ‰§è¡ŒJavaScriptï¼Œä¹Ÿä¸ä¼šçœ‹åˆ°JavaScriptåŠ è½½çš„å†…å®¹</li>\n</ul>\n<p><strong>HOW</strong></p>\n<ul>\n<li>ä½¿ç”¨<code>CSS</code>å’Œ<code>XHTML</code>æ¥è¡¨ç¤º</li>\n<li>ä½¿ç”¨<code>DOM</code>æ¨¡å‹æ¥äº¤äº’å’ŒåŠ¨æ€æ˜¾ç¤º</li>\n<li>ä½¿ç”¨<code>XMLHttpRequest</code>æ¥å’ŒæœåŠ¡å™¨è¿›è¡Œå¼‚æ­¥é€šä¿¡</li>\n<li>ä½¿ç”¨<code>JavaScript </code>æ¥ç»‘å®šå’Œè°ƒç”¨</li>\n</ul>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">var</span> ajax = {};\najax.<span class=\"hljs-property\">httpRequest</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">XMLHttpRequest</span>) {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">XMLHttpRequest</span>();\n    }\n    <span class=\"hljs-keyword\">var</span> versions = [\n        <span class=\"hljs-string\">&quot;MSXML2.XmlHttp.6.0&quot;</span>,\n        <span class=\"hljs-string\">&quot;MSXML2.XmlHttp.5.0&quot;</span>,\n        <span class=\"hljs-string\">&quot;MSXML2.XmlHttp.4.0&quot;</span>,\n        <span class=\"hljs-string\">&quot;MSXML2.XmlHttp.3.0&quot;</span>,\n        <span class=\"hljs-string\">&quot;MSXML2.XmlHttp.2.0&quot;</span>,\n        <span class=\"hljs-string\">&quot;Microsoft.XmlHttp&quot;</span>\n    ];\n    <span class=\"hljs-keyword\">let</span> xhr;\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>; i &lt; versions.<span class=\"hljs-property\">length</span>; i++) {\n        <span class=\"hljs-keyword\">try</span> {\n            xhr = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ActiveXObject</span>(versions[i]);\n            <span class=\"hljs-keyword\">break</span>;\n        } <span class=\"hljs-keyword\">catch</span> (e) {\n        }\n    }\n    <span class=\"hljs-keyword\">return</span> xhr;\n};\n\najax.<span class=\"hljs-property\">send</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">url, callback, method, data, <span class=\"hljs-keyword\">async</span></span>) {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">async</span> === <span class=\"hljs-literal\">undefined</span>) {\n        <span class=\"hljs-keyword\">async</span> = <span class=\"hljs-literal\">true</span>;\n    }\n    <span class=\"hljs-keyword\">let</span> httpRequest = ajax.<span class=\"hljs-title function_\">httpRequest</span>();\n    httpRequest.<span class=\"hljs-title function_\">open</span>(method, url, <span class=\"hljs-keyword\">async</span>);\n    httpRequest.<span class=\"hljs-property\">onreadystatechange</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n        <span class=\"hljs-keyword\">if</span> (httpRequest.<span class=\"hljs-property\">readyState</span> == <span class=\"hljs-number\">4</span>) {\n            <span class=\"hljs-title function_\">callback</span>(httpRequest.<span class=\"hljs-property\">responseText</span>)\n        }\n    };\n    <span class=\"hljs-keyword\">if</span> (method == <span class=\"hljs-string\">&#x27;POST&#x27;</span>) {\n        httpRequest.<span class=\"hljs-title function_\">setRequestHeader</span>(<span class=\"hljs-string\">&#x27;Content-type&#x27;</span>, <span class=\"hljs-string\">&#x27;application/x-www-form-urlencoded&#x27;</span>);\n    }\n    httpRequest.<span class=\"hljs-title function_\">send</span>(data);\n};\n\najax.<span class=\"hljs-property\">get</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">url, data, callback, <span class=\"hljs-keyword\">async</span></span>) {\n    <span class=\"hljs-keyword\">let</span> query = [];\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> key <span class=\"hljs-keyword\">in</span> data) {\n        query.<span class=\"hljs-title function_\">push</span>(<span class=\"hljs-built_in\">encodeURIComponent</span>(key) + <span class=\"hljs-string\">&#x27;=&#x27;</span> + <span class=\"hljs-built_in\">encodeURIComponent</span>(data[key]));\n    }\n    ajax.<span class=\"hljs-title function_\">send</span>(url + (query.<span class=\"hljs-property\">length</span> ? <span class=\"hljs-string\">&#x27;?&#x27;</span> + query.<span class=\"hljs-title function_\">join</span>(<span class=\"hljs-string\">&#x27;&amp;&#x27;</span>) : <span class=\"hljs-string\">&#x27;&#x27;</span>), callback, <span class=\"hljs-string\">&#x27;GET&#x27;</span>, <span class=\"hljs-literal\">null</span>, <span class=\"hljs-keyword\">async</span>)\n};\n\najax.<span class=\"hljs-property\">post</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">url, data, callback, <span class=\"hljs-keyword\">async</span></span>) {\n    <span class=\"hljs-keyword\">let</span> query = [];\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> key <span class=\"hljs-keyword\">in</span> data) {\n        query.<span class=\"hljs-title function_\">push</span>(<span class=\"hljs-built_in\">encodeURIComponent</span>(key) + <span class=\"hljs-string\">&#x27;=&#x27;</span> + <span class=\"hljs-built_in\">encodeURIComponent</span>(data[key]));\n    }\n    ajax.<span class=\"hljs-title function_\">send</span>(url, callback, <span class=\"hljs-string\">&#x27;POST&#x27;</span>, query.<span class=\"hljs-title function_\">join</span>(<span class=\"hljs-string\">&#x27;&amp;&#x27;</span>), <span class=\"hljs-keyword\">async</span>)\n};\n</code></pre>\n<h2 id=\"jsonp\">JSONP</h2>\n<p><strong>WHAT</strong></p>\n<p>å¸¦å¡«å……çš„jsonï¼ˆp for paddingï¼‰ï¼Œæ˜¯ä¸€ç§é€šå¸¸ç”¨äºç»•è¿‡æµè§ˆå™¨ä¸­çš„è·¨åŸŸé€‰å€çš„æ–¹æ³•ï¼Œå› ä¸ºAjaxä¸å…è®¸è·¨åŸŸè¯·æ±‚ã€‚</p>\n<p>åŸç†ï¼šåˆ©ç”¨ <code>&lt;script&gt;</code> æ ‡ç­¾æ²¡æœ‰è·¨åŸŸé™åˆ¶çš„æ¼æ´ã€‚é€šè¿‡ <code>&lt;script&gt;</code> æ ‡ç­¾æŒ‡å‘ä¸€ä¸ªéœ€è¦è®¿é—®çš„åœ°å€å¹¶æä¾›ä¸€ä¸ªå›è°ƒå‡½æ•°æ¥æ¥æ”¶æ•°æ®ã€‚</p>\n<p><strong>WHY</strong></p>\n<p>è§£å†³è·¨åŸŸï¼ˆåªé€‚ç”¨äºGETè¯·æ±‚ï¼‰</p>\n<p><strong>HOW</strong></p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jsonp.js</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">jsonp</span>(<span class=\"hljs-params\">{ url, params, cb }</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve, reject</span>) =&gt;</span> {\n        <span class=\"hljs-keyword\">let</span> script = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createElement</span>(<span class=\"hljs-string\">&quot;script&quot;</span>)\n        <span class=\"hljs-variable language_\">window</span>[cb] = <span class=\"hljs-function\"><span class=\"hljs-params\">data</span> =&gt;</span> {\n            <span class=\"hljs-title function_\">resolve</span>(data)\n            <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">body</span>.<span class=\"hljs-title function_\">removeChild</span>(script)\n        }\n        params = { ...params, cb }\n        <span class=\"hljs-keyword\">let</span> tmp = []\n        <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">let</span> key <span class=\"hljs-keyword\">in</span> params)\n            tmp.<span class=\"hljs-title function_\">push</span>(<span class=\"hljs-string\">`<span class=\"hljs-subst\">${ key }</span>=<span class=\"hljs-subst\">${ params[key] }</span>`</span>)\n        script.<span class=\"hljs-property\">src</span> = <span class=\"hljs-string\">`<span class=\"hljs-subst\">${ url }</span>?<span class=\"hljs-subst\">${ tmp.join(<span class=\"hljs-string\">&quot;&amp;&quot;</span>) }</span>`</span>\n    })\n}\n\n<span class=\"hljs-title function_\">jsonp</span>({ \n    <span class=\"hljs-attr\">url</span>: <span class=\"hljs-string\">&quot;http://localhost:3000/say&quot;</span>,\n    <span class=\"hljs-attr\">params</span>: { <span class=\"hljs-attr\">wd</span>: <span class=\"hljs-string\">&quot;hello jsonp&quot;</span> },\n    <span class=\"hljs-attr\">cb</span>: <span class=\"hljs-string\">&quot;show&quot;</span>\n}).<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">data</span> =&gt;</span> {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(data);\n})\n\n<span class=\"hljs-comment\">// server.js</span>\n<span class=\"hljs-keyword\">let</span> express = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;express&quot;</span>)\n<span class=\"hljs-keyword\">let</span> app = <span class=\"hljs-title function_\">express</span>()\napp.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&quot;/say&quot;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">res, res</span>) =&gt;</span> {\n    <span class=\"hljs-keyword\">let</span> { wd, cb } = req.<span class=\"hljs-property\">query</span>\n    res.<span class=\"hljs-title function_\">end</span>(<span class=\"hljs-string\">`<span class=\"hljs-subst\">${cb}</span>(&#x27;i am fine, and you?&#x27;)`</span>)\n})\napp.<span class=\"hljs-title function_\">listen</span>(<span class=\"hljs-number\">3000</span>)\n</code></pre>\n<h2 id=\"å˜é‡æå‡\">å˜é‡æå‡</h2>\n<p>å˜é‡æå‡ï¼ˆhoistingï¼‰ç”¨äºè§£é‡Šä»£ç ä¸­å˜é‡å£°æ˜è¡Œä¸ºçš„æœ¯è¯­ã€‚ä½¿ç”¨<code>var</code>å…³é”®å­—å£°æ˜æˆ–åˆå§‹åŒ–çš„å˜é‡ä¼šå°†å£°æ˜è¯­å¥â€œæå‡â€åˆ°å½“å‰ä½œç”¨åŸŸçš„é¡¶éƒ¨ã€‚ä½†æ˜¯åªæœ‰å£°æ˜æ‰ä¼šè§¦å‘æå‡ï¼Œèµ‹å€¼è¯­å¥å°†ä¿æŒåŸæ ·ã€‚</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(foo) <span class=\"hljs-comment\">// undefined</span>\n<span class=\"hljs-keyword\">var</span> foo = <span class=\"hljs-number\">1</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(foo) <span class=\"hljs-comment\">// 1</span>\n\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(foo) <span class=\"hljs-comment\">// ReferenceError: bar is not defined</span>\n<span class=\"hljs-keyword\">let</span> foo = <span class=\"hljs-number\">1</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(foo) <span class=\"hljs-comment\">// 1</span>\n</code></pre>\n<p>å‡½æ•°å£°æ˜ä¼šä½¿å‡½æ•°ä½“æå‡ï¼Œä½†å‡½æ•°è¡¨è¾¾å¼ï¼ˆä»¥å£°æ˜å˜é‡çš„å½¢å¼ä¹¦å†™ï¼‰åªæœ‰å˜é‡å£°æ˜ä¼šæå‡</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// å‡½æ•°å£°æ˜</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(foo)\n<span class=\"hljs-title function_\">foo</span>(); <span class=\"hljs-comment\">// &#x27;foo&#x27;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">foo</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;foo&#x27;</span>)\n}\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(foo); <span class=\"hljs-comment\">// [Function: foo]</span>\n\n<span class=\"hljs-comment\">// å‡½æ•°è¡¨è¾¾å¼</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(bar) <span class=\"hljs-comment\">// undefined</span>\n<span class=\"hljs-title function_\">bar</span>(); <span class=\"hljs-comment\">// Uncaught TypeError: bar is not a function</span>\n<span class=\"hljs-keyword\">var</span> bar = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;bar&#x27;</span>)\n}\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(bar) <span class=\"hljs-comment\">// [Function: bar]</span>\n</code></pre>\n<h2 id=\"äº‹ä»¶å†’æ³¡\">äº‹ä»¶å†’æ³¡</h2>\n<p>å½“ä¸€ä¸ªäº‹ä»¶åœ¨DOMå…ƒç´ ä¸Šè§¦å‘æ—¶ï¼Œå¦‚æœæœ‰æ—¶é—´ç›‘å¬å™¨ï¼Œå®ƒå°è¯•å¤„ç†è¯¥äº‹ä»¶ï¼Œç„¶åäº‹ä»¶å†’æ³¡åˆ°å…¶çˆ¶çº§å…ƒç´ ï¼Œå¹¶å‘ç”ŸåŒæ ·çš„äº‹æƒ…ï¼Œæœ€åç›´è‡³åˆ°è¾¾ç¥–å…ˆå…ƒç´ ã€‚æ—¶é—´å†’æ³¡æœºåˆ¶æ˜¯å®ç°äº‹ä»¶å§”æ‰˜ï¼ˆevent delegationï¼‰çš„åŸç†</p>\n<h2 id=\"attributeå’Œproperty\">attributeå’Œproperty</h2>\n<p>attributeæ˜¯åœ¨HTMLä¸­å®šä¹‰çš„ï¼Œè€Œpropertyå®åœ¨DOMä¸Šå®šä¹‰çš„ã€‚</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;input1&quot;</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;text&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;hello&quot;</span> /&gt;</span>\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n    <span class=\"hljs-keyword\">const</span> input = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&quot;input1&quot;</span>)\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(input.<span class=\"hljs-title function_\">getAttribute</span>(<span class=\"hljs-string\">&quot;value&quot;</span>)) <span class=\"hljs-comment\">// hello</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(input.<span class=\"hljs-property\">value</span>) <span class=\"hljs-comment\">// hello</span>\n    \n    <span class=\"hljs-comment\">// å½“åœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥ â€˜worldâ€™ å</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(input.<span class=\"hljs-title function_\">getAttribute</span>(<span class=\"hljs-string\">&quot;value&quot;</span>)) <span class=\"hljs-comment\">// hello</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(input.<span class=\"hljs-property\">value</span>) <span class=\"hljs-comment\">// world</span>\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n</code></pre>\n<h2 id=\"documentçš„loadäº‹ä»¶å’Œdomcontentloadedäº‹ä»¶ä¹‹é—´çš„åŒºåˆ«\">documentçš„loadäº‹ä»¶å’ŒDOMContentLoadedäº‹ä»¶ä¹‹é—´çš„åŒºåˆ«</h2>\n<p>DOMContentLoadedï¼šğŸ‘</p>\n<p>å½“åˆå§‹çš„HTMLæ–‡æ¡£æœ¬å®Œå…¨åŠ è½½å’Œè§£æå®Œæˆä¹‹åï¼ŒDOMContentLoadedäº‹ä»¶è¢«è§¦å‘è€Œæ— éœ€ç­‰å¾…æ ·å¼è¡¨ã€å›¾åƒå’Œå­æ¡†æ¶çš„å®ŒæˆåŠ è½½</p>\n<p>loadï¼š</p>\n<p>windowçš„loadäº‹ä»¶ä»…åœ¨DOMå’Œæ‰€æœ‰ç›¸å…³èµ„æºå…¨éƒ¨å®ŒæˆåŠ è½½åæ‰ä¼šè§¦å‘</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&quot;DOMContentLoaded&quot;</span>, <span class=\"hljs-function\"><span class=\"hljs-params\">event</span> =&gt;</span> {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;DOMContentLoaded&quot;</span>);\n})\n<span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&quot;load&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;window loaded&quot;</span>);\n})\n\n<span class=\"hljs-comment\">// DOMContentLoaded</span>\n<span class=\"hljs-comment\">// window loaded</span>\n</code></pre>\n<h2 id=\"åŒæºç­–ç•¥\">åŒæºç­–ç•¥</h2>\n<p>åŒæºç­–ç•¥æ˜¯ç”±Netscapeæå‡ºçš„ä¸€ä¸ªè‘—åçš„å®‰å…¨ç­–ç•¥ï¼Œæµè§ˆå™¨å‡ºäºå®‰å…¨æ–¹é¢çš„è€ƒè™‘ï¼Œåªå…è®¸æœ¬åŸŸåä¸‹çš„æ¥å£äº¤äº’ï¼Œä¸åŒæºçš„å®¢æˆ·ç«¯è„šæœ¬ï¼Œåœ¨æ²¡æœ‰æ˜ç¡®æˆæƒçš„æƒ…å†µä¸‹ï¼Œä¸èƒ½è¯»å–å¯¹æ–¹çš„èµ„æºã€‚</p>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy\">åŒæºçš„å®šä¹‰:</a></p>\n<p>å¦‚æœä¸¤ä¸ªé¡µé¢çš„åè®®ï¼Œç«¯å£ï¼ˆå¦‚æœæœ‰æŒ‡å®šï¼‰å’Œä¸»æœºéƒ½ç›¸åŒï¼Œåˆ™ä¸¤ä¸ªé¡µé¢å…·æœ‰ç›¸åŒçš„<strong>æº</strong>ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠå®ƒç§°ä¸ºâ€œåè®®/ä¸»æœº/ç«¯å£ tupleâ€ï¼Œæˆ–ç®€å•åœ°å«åšâ€œtuple&quot;. (&quot;tuple&quot; ï¼Œâ€œå…ƒâ€ï¼Œæ˜¯æŒ‡ä¸€äº›äº‹ç‰©ç»„åˆåœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªæ•´ä½“ï¼Œæ¯”å¦‚ï¼ˆ1ï¼Œ2ï¼‰å«äºŒå…ƒï¼Œï¼ˆ1ï¼Œ2ï¼Œ3ï¼‰å«ä¸‰å…ƒ)</p>\n<p>ä¸‹è¡¨ç»™å‡ºäº†ç›¸å¯¹<code>http://store.company.com/dir/page.html</code>åŒæºæ£€æµ‹çš„ç¤ºä¾‹:</p>\n<p>| URL                                               | ç»“æœ | åŸå›          |\n| </p>\n"},{"title":"JavaScriptç›¸å…³-3","tags":["JavaScript"],"categories":"JavaScript","description":"## æ‰§è¡Œä¸Šä¸‹æ–‡\n\n### ä»€ä¹ˆæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡\n\næ‰§è¡Œä¸Šä¸‹æ–‡å°±æ˜¯å½“å‰JavaScriptä»£ç è¢«è§£æå’Œæ‰§è¡Œæ—¶æ‰€åœ¨ç¯å¢ƒçš„æŠ½è±¡æ¦‚å¿µã€‚JavaScriptä¸­ä»»ä½•çš„ä»£ç éƒ½æ˜¯åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­è¿è¡Œã€‚\n\næ‰§è¡Œä¸Šä¸‹æ–‡åˆ›å»ºè¿‡ç¨‹ä¸­ï¼Œéœ€è¦åšä»¥ä¸‹å‡ ä»¶äº‹ï¼š\n\n1. åˆ›å»ºå˜é‡å¯¹è±¡ï¼šé¦–å…ˆåˆå§‹åŒ–å‡½æ•°çš„å‚æ•°`arguments`ï¼Œæå‡å˜é‡å£°æ˜å’Œå‡½æ•°å£°æ˜\n2. åˆ›å»ºä½œç”¨åŸŸé“¾ï¼ˆ`scope chain`ï¼‰ï¼šåœ¨æ‰§è¡Œä¸Šä¸‹æ–‡çš„åˆ›å»ºé˜¶æ®µï¼Œä½œç”¨åŸŸé“¾","createDate":"2020-02-14 23:22:46","updateDate":"10/1/2021, 3:34:43 AM","body":"<h2 id=\"æ‰§è¡Œä¸Šä¸‹æ–‡\">æ‰§è¡Œä¸Šä¸‹æ–‡</h2>\n<h3 id=\"ä»€ä¹ˆæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡\">ä»€ä¹ˆæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡</h3>\n<p>æ‰§è¡Œä¸Šä¸‹æ–‡å°±æ˜¯å½“å‰JavaScriptä»£ç è¢«è§£æå’Œæ‰§è¡Œæ—¶æ‰€åœ¨ç¯å¢ƒçš„æŠ½è±¡æ¦‚å¿µã€‚JavaScriptä¸­ä»»ä½•çš„ä»£ç éƒ½æ˜¯åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­è¿è¡Œã€‚</p>\n<p>æ‰§è¡Œä¸Šä¸‹æ–‡åˆ›å»ºè¿‡ç¨‹ä¸­ï¼Œéœ€è¦åšä»¥ä¸‹å‡ ä»¶äº‹ï¼š</p>\n<ol>\n<li>åˆ›å»ºå˜é‡å¯¹è±¡ï¼šé¦–å…ˆåˆå§‹åŒ–å‡½æ•°çš„å‚æ•°<code>arguments</code>ï¼Œæå‡å˜é‡å£°æ˜å’Œå‡½æ•°å£°æ˜</li>\n<li>åˆ›å»ºä½œç”¨åŸŸé“¾ï¼ˆ<code>scope chain</code>ï¼‰ï¼šåœ¨æ‰§è¡Œä¸Šä¸‹æ–‡çš„åˆ›å»ºé˜¶æ®µï¼Œä½œç”¨åŸŸé“¾æ˜¯åœ¨å˜é‡å¯¹è±¡ä¹‹ååˆ›å»ºçš„</li>\n<li>ç¡®å®š<code>this</code>çš„å€¼ï¼Œå³<code>resolve thisbinding</code></li>\n</ol>\n<p>æ¯ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ä¸­éƒ½æœ‰ä¸‰ç§é‡è¦çš„å±æ€§ï¼š</p>\n<ul>\n<li>å˜é‡å¯¹è±¡ï¼ˆVOï¼‰ï¼ŒåŒ…å«å˜é‡ã€å‡½æ•°å£°æ˜å’Œå‡½æ•°çš„å½¢å‚ï¼Œè¯¥å±æ€§åªèƒ½åœ¨å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­è®¿é—®ï¼ˆå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ä¸ºAOï¼‰</li>\n<li>ä½œç”¨åŸŸé“¾ï¼ˆ<code>scope chain</code>ï¼‰ï¼ŒJavaScripté‡‡ç”¨è¯æ³•ä½œç”¨åŸŸï¼Œä¹Ÿå°±æ˜¯è¯´å˜é‡çš„ä½œç”¨åŸŸå®åœ¨å®šä¹‰çš„æ—¶å€™å°±å†³å®šäº†ï¼ŒåŒ…å«è‡ªèº«å˜é‡å¯¹è±¡å’Œä¸Šçº§å˜é‡å¯¹è±¡çš„åˆ—è¡¨ï¼Œé€šè¿‡<code>[[Scope]]</code>å±æ€§æŸ¥æ‰¾ä¸Šçº§å˜é‡</li>\n<li><code>this</code></li>\n</ul>\n<h3 id=\"æ‰§è¡Œä¸Šä¸‹æ–‡çš„åˆ†ç±»\">æ‰§è¡Œä¸Šä¸‹æ–‡çš„åˆ†ç±»</h3>\n<ul>\n<li>å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡</li>\n<li>å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡</li>\n</ul>\n<h2 id=\"æ‰§è¡Œæ ˆ\">æ‰§è¡Œæ ˆ</h2>\n<p>æ‰§è¡Œæ ˆï¼Œä¹Ÿå«åšè°ƒç”¨æ ˆï¼Œå…·æœ‰LIFOç»“æ„ï¼Œç”¨äºå­˜å‚¨åœ¨ä»£ç æ‰§è¡ŒæœŸé—´åˆ›å»ºçš„æ‰€æœ‰æ‰§è¡Œä¸Šä¸‹æ–‡</p>\n<p>æœ‰å¦‚ä¸‹è§„åˆ™ï¼š</p>\n<ul>\n<li>é¦–æ¬¡è¿è¡ŒJavaScriptä»£ç çš„æ—¶å€™ä¼šåˆ›å»ºä¸€ä¸ªå…¨å±€æ‰§è¡Œçš„ä¸Šä¸‹æ–‡å¹¶pushåˆ°å½“å‰çš„æ‰§è¡Œæ ˆä¸­ï¼Œæ¯å½“å‘ç”Ÿå‡½æ•°è°ƒç”¨ï¼Œå¼•æ“éƒ½ä¼šä¸ºè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶pushå½“å‰æ‰§è¡Œæ ˆçš„æ ˆé¡¶</li>\n<li>å½“æ ˆé¡¶çš„å‡½æ•°è¿è¡Œå®Œæˆåï¼Œå…¶å¯¹åº”çš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡å°†ä¼šä»æ‰§è¡Œæ ˆä¸­popï¼Œä¸Šä¸‹æ–‡çš„æ§åˆ¶æƒç§»åŠ¨åˆ°å½“å‰æ‰§è¡Œæ ˆçš„ä¸‹ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡</li>\n</ul>\n<h2 id=\"ä½œç”¨åŸŸ\">ä½œç”¨åŸŸ</h2>\n<p>ä½œç”¨åŸŸè´Ÿè´£æ”¶é›†å’Œç»´æŠ¤ç”±æ‰€æœ‰å£°æ˜çš„æ ‡è¯†ç¬¦ï¼ˆå˜é‡ï¼‰ç»„æˆçš„ä¸€ç³»åˆ—æŸ¥è¯¢ï¼Œå¹¶å®æ–½ä¸€å¥—éå¸¸ä¸¥æ ¼çš„è§„åˆ™ï¼Œç¡®å®šå½“å‰æ‰§è¡Œçš„ä»£ç å¯¹è¿™äº›æ ‡è¯†ç¬¦çš„è®¿é—®æƒé™</p>\n<p>ä½œç”¨åŸŸæœ‰ä¸¤ç§å·¥ä½œæ¨¡å‹ï¼š<strong>è¯æ³•ä½œç”¨åŸŸ</strong>å’Œ<strong>åŠ¨æ€ä½œç”¨åŸŸ</strong>ã€‚JavaScripté‡‡ç”¨çš„æ—¶<strong>è¯æ³•ä½œç”¨åŸŸ</strong>ï¼Œè¯æ³•ä½œç”¨åŸŸæ„å‘³ç€ä½œç”¨åŸŸæ˜¯ç”±ä¹¦å†™ä»£ç æ—¶å˜é‡å’Œå‡½æ•°å£°æ˜çš„ä½ç½®å†³å®šçš„ã€‚</p>\n<h3 id=\"ä½œç”¨åŸŸçš„åˆ†ç±»\">ä½œç”¨åŸŸçš„åˆ†ç±»</h3>\n<ul>\n<li>å…¨å±€ä½œç”¨åŸŸ</li>\n<li>å‡½æ•°ä½œç”¨åŸŸ</li>\n<li>å—çº§ä½œç”¨åŸŸ</li>\n</ul>\n<h3 id=\"ä½œç”¨åŸŸé“¾\">ä½œç”¨åŸŸé“¾</h3>\n<p>ä½œç”¨åŸŸé“¾å°±æ˜¯ä»å½“å‰ä½œç”¨åŸŸå¼€å§‹ä¸€å±‚ä¸€å±‚å‘ä¸Šå¯»æ‰¾æŸä¸ªå˜é‡ï¼Œç›´åˆ°å…¨å±€ä½œç”¨åŸŸé“¾</p>\n<h2 id=\"å˜é‡æå‡\">å˜é‡æå‡</h2>\n<p>é€šä¿—è§£é‡Šï¼š</p>\n<p>å°†å£°æ˜çš„ä»£ç ç§»åŠ¨åˆ°äº†é¡¶éƒ¨</p>\n<p>å‡†ç¡®è§£é‡Šï¼šğŸ‘</p>\n<ol>\n<li>åœ¨ç”Ÿæˆæ‰§è¡Œä¸Šä¸‹æ–‡æ—¶ï¼Œå…·ä½“æ­¥éª¤æ˜¯åˆ›å»ºVOï¼ŒJavaScriptè§£é‡Šå™¨ä¼šæ‰¾å‡ºéœ€è¦æå‡çš„å˜é‡å’Œå‡½æ•°ï¼Œå¹¶ä¸”ç»™å®ƒä»¬æå‰åœ¨å†…å­˜ä¸­å¼€è¾Ÿå¥½ç©ºé—´ï¼Œå‡½æ•°çš„è¯ä¼šå°†æ•´ä¸ªå‡½æ•°å­˜å…¥å†…å­˜ï¼Œå˜é‡ä¹‹ç”Ÿå‘½å¹¶ä¸”èµ‹å€¼ä¸º<code>undefined</code></li>\n<li>ä»£ç æ‰§è¡Œé˜¶æ®µï¼ˆå¯ä»¥ç›´æ¥ä½¿ç”¨å˜é‡/å‡½æ•°ï¼‰</li>\n</ol>\n<h2 id=\"é˜²æŠ–\">é˜²æŠ–</h2>\n<p>åœ¨ä¸€å®šæ—¶é—´å¤šæ¬¡è§¦å‘ä½†å†…åªè°ƒç”¨ä¸€æ¬¡</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">debounce</span> (func, wait = <span class=\"hljs-number\">50</span>, immediate = <span class=\"hljs-literal\">true</span>) {\n  <span class=\"hljs-keyword\">let</span> timer, context, args;\n\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">later</span> = (<span class=\"hljs-params\"></span>) =&gt; <span class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    timer = <span class=\"hljs-literal\">null</span>\n    <span class=\"hljs-keyword\">if</span> (!immediate) {\n      func.<span class=\"hljs-title function_\">apply</span>(context, args)\n    }\n  }, wait)\n\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">...params</span>) {\n    <span class=\"hljs-keyword\">if</span> (timer) {\n      <span class=\"hljs-built_in\">clearTimeout</span>(timer)\n      timer = <span class=\"hljs-title function_\">later</span>()\n    } <span class=\"hljs-keyword\">else</span> {\n      timer = <span class=\"hljs-title function_\">later</span>()\n      <span class=\"hljs-keyword\">if</span> (immediate) {\n        func.<span class=\"hljs-title function_\">apply</span>(<span class=\"hljs-variable language_\">this</span>, params)\n      } <span class=\"hljs-keyword\">else</span> {\n        context = <span class=\"hljs-variable language_\">this</span>\n        args = params\n      }\n    }\n  }\n}\n</code></pre>\n<h2 id=\"å¯è¿­ä»£å¯¹è±¡\">å¯è¿­ä»£å¯¹è±¡</h2>\n<p>ES6è§„å®šï¼Œé»˜è®¤çš„<code>Iterator</code>æ¥å£éƒ¨ç½²åœ¨æ•°æ®ç»“æ„çš„<code>Symbol.iterator</code>å±æ€§ä¸Šï¼Œæ¢ä¸ªè§’åº¦ï¼Œä¹Ÿå¯ä»¥è®¤ä¸ºä¸€ä¸ªæ•°æ®ç»“æ„åªè¦å…·æœ‰<code>Symbol.iterator</code>å±æ€§é‚£ä¹ˆå°±å¯ä»¥è®¤ä¸ºå…¶æ˜¯å¯è¿­ä»£çš„</p>\n<h3 id=\"å¯è¿­ä»£å¯¹è±¡çš„ç‰¹ç‚¹\">å¯è¿­ä»£å¯¹è±¡çš„ç‰¹ç‚¹</h3>\n<ul>\n<li>å…·æœ‰<code>Symbol.iterator</code>å±æ€§ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªéå†å™¨å¯¹è±¡</li>\n<li>å¯ä»¥ä½¿ç”¨<code>for...of</code>å¾ªç¯éå†</li>\n<li>å¯ä»¥é€šè¿‡<code>Array.from</code>è½¬æ¢ä¸ºæ•°ç»„</li>\n</ul>\n<h3 id=\"åŸç”Ÿå…·æœ‰iteratoræ¥å£çš„æ•°æ®ç»“æ„\">åŸç”Ÿå…·æœ‰<code>Iterator</code>æ¥å£çš„æ•°æ®ç»“æ„</h3>\n<ul>\n<li>Array</li>\n<li>Map</li>\n<li>Set</li>\n<li>String</li>\n<li>TypedArray</li>\n<li>å‡½æ•°çš„argumentså¯¹è±¡</li>\n<li>NodeListå¯¹è±¡</li>\n</ul>\n"},{"title":"JavaScriptç›¸å…³-4","tags":["JavaScript"],"categories":"JavaScript","description":"## æ¨¡æ‹Ÿå®ç°callã€apply\n\nå®ç°æ€è·¯ï¼š\n\n- ä¸ä¼ å…¥ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆé»˜è®¤ä¸º`window`\n- æ”¹å˜äº†`this`æŒ‡å‘ï¼Œè®©æ–°å¯¹è±¡å¯ä»¥æ‰§è¡Œè¯¥å‡½æ•°ï¼Œé‚£ä¸ªæ€è·¯å¯ä»¥å˜æˆç»™æ–°å¯¹è±¡æ·»åŠ ä¸€ä¸ªå‡½æ•°ï¼Œç„¶ååœ¨æ‰§è¡Œå®Œæˆä¹‹ååˆ é™¤\n\n``` javascript\nFunction.prototype.myCall = function (context) {\n  context = context || wi","createDate":"2020-02-17 22:25:05","updateDate":"10/1/2021, 3:34:43 AM","body":"<h2 id=\"æ¨¡æ‹Ÿå®ç°callã€apply\">æ¨¡æ‹Ÿå®ç°callã€apply</h2>\n<p>å®ç°æ€è·¯ï¼š</p>\n<ul>\n<li>ä¸ä¼ å…¥ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆé»˜è®¤ä¸º<code>window</code></li>\n<li>æ”¹å˜äº†<code>this</code>æŒ‡å‘ï¼Œè®©æ–°å¯¹è±¡å¯ä»¥æ‰§è¡Œè¯¥å‡½æ•°ï¼Œé‚£ä¸ªæ€è·¯å¯ä»¥å˜æˆç»™æ–°å¯¹è±¡æ·»åŠ ä¸€ä¸ªå‡½æ•°ï¼Œç„¶ååœ¨æ‰§è¡Œå®Œæˆä¹‹ååˆ é™¤</li>\n</ul>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-title class_\">Function</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">myCall</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">context</span>) {\n  context = context || <span class=\"hljs-variable language_\">window</span>\n  context.<span class=\"hljs-property\">fn</span> = <span class=\"hljs-variable language_\">this</span>\n  <span class=\"hljs-keyword\">const</span> args = [...<span class=\"hljs-variable language_\">arguments</span>].<span class=\"hljs-title function_\">slice</span>(<span class=\"hljs-number\">1</span>)\n  <span class=\"hljs-keyword\">const</span> result = context.<span class=\"hljs-title function_\">fn</span>(...args)\n  <span class=\"hljs-keyword\">delete</span> context.<span class=\"hljs-property\">fn</span>\n  <span class=\"hljs-keyword\">return</span> result\n}\n\n<span class=\"hljs-title class_\">Function</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">myApply</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">context</span>) {\n  context = context || <span class=\"hljs-variable language_\">window</span>\n  context.<span class=\"hljs-property\">fn</span> = <span class=\"hljs-variable language_\">this</span>\n  <span class=\"hljs-keyword\">const</span> result = <span class=\"hljs-variable language_\">arguments</span>[<span class=\"hljs-number\">1</span>] ? context.<span class=\"hljs-title function_\">fn</span>(...<span class=\"hljs-variable language_\">arguments</span>[<span class=\"hljs-number\">1</span>]) : context.<span class=\"hljs-title function_\">fn</span>()\n  <span class=\"hljs-keyword\">delete</span> context.<span class=\"hljs-property\">fn</span>\n  <span class=\"hljs-keyword\">return</span> result\n}\n\n<span class=\"hljs-title class_\">Function</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">myBind</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">context</span>) {\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> <span class=\"hljs-variable language_\">this</span> !== <span class=\"hljs-string\">&#x27;function&#x27;</span>)\n    <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TypeError</span>(<span class=\"hljs-string\">&quot;error&quot;</span>)\n  <span class=\"hljs-keyword\">const</span> that = <span class=\"hljs-variable language_\">this</span>\n  <span class=\"hljs-keyword\">const</span> args = [...<span class=\"hljs-variable language_\">arguments</span>].<span class=\"hljs-title function_\">slice</span>(<span class=\"hljs-number\">1</span>)\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">F</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable language_\">this</span> <span class=\"hljs-keyword\">instanceof</span> F) {\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title function_\">that</span>(...args, ...<span class=\"hljs-variable language_\">arguments</span>)\n    }\n    <span class=\"hljs-keyword\">return</span> that.<span class=\"hljs-title function_\">apply</span>(context, args.<span class=\"hljs-title function_\">concat</span>(...<span class=\"hljs-variable language_\">arguments</span>))\n  }\n}\n\n<span class=\"hljs-keyword\">const</span> tom = {\n  <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;tom&quot;</span>,\n  say (tmp1, tmp2) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">name</span>, tmp1, tmp2);\n  }\n}\n<span class=\"hljs-keyword\">const</span> jack = {\n  <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;jack&quot;</span>\n}\n\ntom.<span class=\"hljs-property\">say</span>.<span class=\"hljs-title function_\">myCall</span>(jack, <span class=\"hljs-string\">&quot;111&quot;</span>, <span class=\"hljs-string\">&quot;222&quot;</span>)\ntom.<span class=\"hljs-property\">say</span>.<span class=\"hljs-title function_\">call</span>(jack, <span class=\"hljs-string\">&quot;111&quot;</span>, <span class=\"hljs-string\">&quot;222&quot;</span>)\n\ntom.<span class=\"hljs-property\">say</span>.<span class=\"hljs-title function_\">myApply</span>(jack, [<span class=\"hljs-string\">&quot;111&quot;</span>, <span class=\"hljs-string\">&quot;222&quot;</span>])\ntom.<span class=\"hljs-property\">say</span>.<span class=\"hljs-title function_\">apply</span>(jack, [<span class=\"hljs-string\">&quot;111&quot;</span>, <span class=\"hljs-string\">&quot;222&quot;</span>])\n\ntom.<span class=\"hljs-property\">say</span>.<span class=\"hljs-title function_\">myBind</span>(jack)(<span class=\"hljs-string\">&quot;111&quot;</span>, <span class=\"hljs-string\">&quot;222&quot;</span>)\ntom.<span class=\"hljs-property\">say</span>.<span class=\"hljs-title function_\">bind</span>(jack)(<span class=\"hljs-string\">&quot;111&quot;</span>, <span class=\"hljs-string\">&quot;222&quot;</span>)\n\n<span class=\"hljs-comment\">// jack 111 222</span>\n<span class=\"hljs-comment\">// jack 111 222</span>\n<span class=\"hljs-comment\">// jack 111 222</span>\n<span class=\"hljs-comment\">// jack 111 222</span>\n<span class=\"hljs-comment\">// jack 111 222</span>\n<span class=\"hljs-comment\">// jack 111 222</span>\n</code></pre>\n<h2 id=\"promise-å®ç°\">Promise å®ç°</h2>\n<p><code>Promise</code>æ˜¯ES6æ–°å¢çš„è¯­æ³•ï¼Œè§£å†³äº†å›è°ƒåœ°ç‹±çš„é—®é¢˜ã€‚å¯ä»¥æŠŠ<code>Promise</code>çœ‹ä½œæ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œå¯ä»¥é€šè¿‡å‡½æ•°<code>resolve</code>å’Œ<code>reject</code>å°†çŠ¶æ€è½¬å˜ä¸º<code>resolved</code>æˆ–<code>rejected</code>ï¼ŒçŠ¶æ€ä¸€æ—¦è½¬å˜å°±ä¸èƒ½å†æ¬¡å˜åŒ–</p>\n<p><code>then</code>å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªæ–°çš„<code>Promise</code>å®ä¾‹ã€‚å› ä¸º<code>Promise</code>è§„èŒƒè§„å®šé™¤äº†<code>pending</code>çŠ¶æ€ï¼Œå…¶ä»–çŠ¶æ€æ˜¯ä¸å¯ä»¥æ”¹å˜çš„ï¼Œå¦‚æœè¿”å›çš„æ˜¯ä¸€ä¸ªç›¸åŒå®ä¾‹çš„è¯ï¼Œå¤šä¸ª<code>then</code>è°ƒç”¨å°±å¤±å»æ„ä¹‰äº†</p>\n<p>å¯¹äº<code>then</code>ï¼Œæœ¬è´¨ä¸Šå¯ä»¥æŠŠå®ƒçœ‹æˆæ˜¯<code>flatMap</code></p>\n<h2 id=\"proxy\">Proxy</h2>\n<p>proxyæ˜¯ES6ä¸­æ–°å¢çš„åŠŸèƒ½ï¼Œç”¨æ¥å®šä¹‰å¯¹è±¡ä¸­çš„æ“ä½œ</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">onwatch</span>(<span class=\"hljs-params\">obj, setBind, getLogger</span>) {\n  <span class=\"hljs-keyword\">const</span> handler = {\n    <span class=\"hljs-title function_\">get</span>(<span class=\"hljs-params\">target, property, receiver</span>) {\n      <span class=\"hljs-title function_\">getLogger</span>(target, property)\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">get</span>(target, property, receiver)\n    },\n    <span class=\"hljs-title function_\">set</span>(<span class=\"hljs-params\">target, property, value</span>) {\n      <span class=\"hljs-title function_\">setBind</span>(target, property, value)\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">set</span>(target, property, value)\n    }\n  }\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(obj, handler)\n}\n\n<span class=\"hljs-keyword\">let</span> obj = { <span class=\"hljs-attr\">a</span>: <span class=\"hljs-number\">1</span> }\n<span class=\"hljs-keyword\">let</span> p = <span class=\"hljs-title function_\">onwatch</span>(obj, <span class=\"hljs-function\">(<span class=\"hljs-params\">target, property, value</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">`set <span class=\"hljs-subst\">${ property }</span> = <span class=\"hljs-subst\">${ value }</span>`</span>);\n}, <span class=\"hljs-function\">(<span class=\"hljs-params\">target, property</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">`get <span class=\"hljs-subst\">${ property }</span> = <span class=\"hljs-subst\">${ target[property] }</span>`</span>);\n})\n\np.<span class=\"hljs-property\">a</span> = <span class=\"hljs-number\">2</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(p.<span class=\"hljs-property\">a</span>);\n\n<span class=\"hljs-comment\">// set a = 2</span>\n<span class=\"hljs-comment\">// get a = 2</span>\n</code></pre>\n<h2 id=\"æ­£åˆ™è¡¨è¾¾å¼\">æ­£åˆ™è¡¨è¾¾å¼</h2>\n<p><strong>å…ƒå­—ç¬¦</strong></p>\n<p>| å…ƒå­—ç¬¦ |             ä½œç”¨             |\n| :</p>\n"},{"title":"MySQL-è§†å›¾","tags":["MySQL","è§†å›¾"],"categories":"MySQL","description":"# MySQL-è§†å›¾\n## ä»€ä¹ˆæ˜¯è§†å›¾\n- è§†å›¾æ˜¯ç”±æŸ¥è¯¢ç»“æœå½¢æˆçš„ä¸€å¼ **è™šæ‹Ÿè¡¨**ï¼Œå¯ä»¥å½“ä½œä¸€å¼ è¡¨ä½¿ç”¨ï¼Œä½†ä¸æŒä¹…è¡¨(permanent table)ä¸åŒçš„æ˜¯ï¼Œè§†å›¾ä¸­çš„æ•°æ®**æ²¡æœ‰å®é™…çš„ç‰©ç†å­˜å‚¨**ã€‚\n\n## è§†å›¾çš„ä½œç”¨\n- è§†å›¾åœ¨ä¸€å®šç¨‹åº¦ä¸Šèµ·åˆ°ä¸€ä¸ª**å®‰å…¨å±‚**çš„ä½œç”¨ï¼Œå¯ä»¥è¿›è¡Œ**æƒé™æ§åˆ¶**\n- **ç®€åŒ–æŸ¥è¯¢**è¯­å¥\n- å¯¹äºæŸå¼ å¾ˆå¤§çš„è¡¨ï¼Œå¯ä»¥å°†å…¶åˆ†ä¸ºå¤šä¸ªè§†å›¾ï¼Œä»è€Œ**åŠ å¿«æŸ¥è¯¢**\n\n##","createDate":"2018-11-13 16:56:59","updateDate":"10/1/2021, 3:34:43 AM","body":"<h1 id=\"mysql-è§†å›¾\">MySQL-è§†å›¾</h1>\n<h2 id=\"ä»€ä¹ˆæ˜¯è§†å›¾\">ä»€ä¹ˆæ˜¯è§†å›¾</h2>\n<ul>\n<li>è§†å›¾æ˜¯ç”±æŸ¥è¯¢ç»“æœå½¢æˆçš„ä¸€å¼ <strong>è™šæ‹Ÿè¡¨</strong>ï¼Œå¯ä»¥å½“ä½œä¸€å¼ è¡¨ä½¿ç”¨ï¼Œä½†ä¸æŒä¹…è¡¨(permanent table)ä¸åŒçš„æ˜¯ï¼Œè§†å›¾ä¸­çš„æ•°æ®<strong>æ²¡æœ‰å®é™…çš„ç‰©ç†å­˜å‚¨</strong>ã€‚</li>\n</ul>\n<h2 id=\"è§†å›¾çš„ä½œç”¨\">è§†å›¾çš„ä½œç”¨</h2>\n<ul>\n<li>è§†å›¾åœ¨ä¸€å®šç¨‹åº¦ä¸Šèµ·åˆ°ä¸€ä¸ª<strong>å®‰å…¨å±‚</strong>çš„ä½œç”¨ï¼Œå¯ä»¥è¿›è¡Œ<strong>æƒé™æ§åˆ¶</strong></li>\n<li><strong>ç®€åŒ–æŸ¥è¯¢</strong>è¯­å¥</li>\n<li>å¯¹äºæŸå¼ å¾ˆå¤§çš„è¡¨ï¼Œå¯ä»¥å°†å…¶åˆ†ä¸ºå¤šä¸ªè§†å›¾ï¼Œä»è€Œ<strong>åŠ å¿«æŸ¥è¯¢</strong></li>\n</ul>\n<h2 id=\"è§†å›¾çš„ä½¿ç”¨æ¡ä»¶\">è§†å›¾çš„ä½¿ç”¨æ¡ä»¶</h2>\n<ul>\n<li>å¦‚æœæŸä¸ªæŸ¥è¯¢ç»“æœå‡ºç°çš„éå¸¸é¢‘ç¹ï¼Œå°±æ˜¯è¦ç»å¸¸é‚£è¿™ä¸ªæŸ¥è¯¢ç»“æœæ¥åš<strong>å­æŸ¥è¯¢</strong>ï¼Œä½¿ç”¨è§†å›¾ä¼šæ›´åŠ æ–¹ä¾¿</li>\n</ul>\n<h2 id=\"è§†å›¾çš„åŸºæœ¬æ“ä½œ\">è§†å›¾çš„åŸºæœ¬æ“ä½œ</h2>\n<ul>\n<li><strong>åˆ›å»ºè§†å›¾</strong>ï¼š\n``` SQL\nCREATE\n[OR REPLACE]\n[ALGORITHM = {UNDEFINED | MERGE | TEMPTABLE}]\n[DEFINER = { user | CURRENT_USER }]\n[SQL SECURITY { DEFINER | INVOKER }]\nVIEW view_name [(column_list)]\nAS select_statement\n[WITH [CASCADED | LOCAL] CHECK OPTION]</li>\n</ul>\n<p>CREATE OR REPLACE VIEW view_name AS SELECT * FROM table_name</p>\n<pre><code>- **è°ƒå–è§†å›¾**\n``` SQL\nSELECT * FROM view_name\n</code></pre>\n<ul>\n<li><strong>ä¿®æ”¹è§†å›¾</strong>\n``` SQL\nALTER\n[ALGORITHM = {UNDEFINED | MERGE | TEMPTABLE}]\n[DEFINER = { user | CURRENT_USER }]\n[SQL SECURITY { DEFINER | INVOKER }]\nVIEW view_name [(column_list)]\nAS select_statement\n[WITH [CASCADED | LOCAL] CHECK OPTION]</li>\n</ul>\n<p>ALTER OR REPLACE VIEW view_name AS SELECT * FROM table_name</p>\n<pre><code>- **åˆ é™¤è§†å›¾**\n``` SQL\nDROP VIEW IF EXISTS view_name\n</code></pre>\n<ul>\n<li><strong>æŸ¥çœ‹è§†å›¾</strong><pre><code class=\"hljs language-SQL\"><span class=\"hljs-keyword\">SHOW</span> TABLES;\n</code></pre>\n</li>\n<li><strong>æŸ¥çœ‹è§†å›¾çš„å®šä¹‰</strong><pre><code class=\"hljs language-SQL\"><span class=\"hljs-keyword\">SHOW</span> <span class=\"hljs-keyword\">TABLE</span> STATUS <span class=\"hljs-keyword\">FROM</span> table_name <span class=\"hljs-keyword\">LIKE</span> <span class=\"hljs-string\">&#x27;view_name&#x27;</span>\n</code></pre>\n<h2 id=\"è§†å›¾çš„ç®—æ³•--å­˜åœ¨ä¸¤ç§æ‰§è¡Œçš„ç®—æ³•\">è§†å›¾çš„ç®—æ³•--å­˜åœ¨ä¸¤ç§æ‰§è¡Œçš„ç®—æ³•</h2>\n</li>\n<li>MERGEï¼š<strong>åˆå¹¶æ¨¡å¼</strong>ï¼Œå…ˆå°†æˆ‘ä»¬è§†å›¾çš„SQLè¯­å¥ä¸å¤–éƒ¨æŸ¥è¯¢è§†å›¾çš„SQLè¯­å¥ï¼Œæ··åˆåœ¨ä¸€èµ·ï¼Œæœ€ç»ˆæ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯å¯ä»¥<strong>æ›´æ–°</strong>çœŸå®è¡¨ä¸­çš„æ•°æ®ã€‚</li>\n<li>TEMPTABLEï¼š<strong>ä¸´æ—¶è¡¨æ¨¡å¼</strong>ï¼Œæ¯å½“æŸ¥è¯¢çš„æ—¶å€™ï¼Œå°†è§†å›¾æ‰€ä½¿ç”¨çš„SELECTè¯­å¥ç”Ÿæˆä¸€ä¸ªç»“æœçš„ä¸´æ—¶è¡¨ï¼Œå†åœ¨å½“å‰çš„ä¸´æ—¶è¡¨å†…è¿›è¡ŒæŸ¥è¯¢ã€‚</li>\n<li>UNDEFINEDï¼š è®©MySQLé€‰æ‹©æ‰€è¦ä½¿ç”¨çš„ç®—æ³•ã€‚å¦‚æœå¯èƒ½ï¼Œå®ƒ<strong>å€¾å‘äºMERGE</strong>è€Œä¸æ˜¯TEMPTABLEï¼Œè¿™æ˜¯å› ä¸ºMERGEé€šå¸¸æ›´æœ‰æ•ˆï¼Œè€Œä¸”å¦‚æœä½¿ç”¨äº†ä¸´æ—¶è¡¨ï¼Œè§†å›¾æ˜¯ä¸å¯æ›´æ–°ã€‚</li>\n</ul>\n<h2 id=\"è§†å›¾ä¸è¡¨çš„å…³ç³»\">è§†å›¾ä¸è¡¨çš„å…³ç³»</h2>\n<ul>\n<li>è™½ç„¶è§†å›¾æ˜¯åŸºäºè¡¨çš„ä¸€ä¸ªè™šæ‹Ÿè¡¨ï¼Œä½†æ˜¯ç”¨æˆ·å¯ä»¥å¯¹æŸäº›è§†å›¾è¿›è¡Œæ›´æ–°æ“ä½œï¼Œå…¶æœ¬è´¨å°±æ˜¯é€šè¿‡è§†å›¾çš„å®šä¹‰æ¥æ›´æ–°åŸºè¡¨ã€‚ä¸€èˆ¬ç§°è¿›è¡Œæ›´æ–°æ“ä½œçš„è§†å›¾ä¸ºå¯æ›´æ–°è§†å›¾(updatable view)ã€‚è§†å›¾å®šä¹‰ä¸­çš„<strong>WITH CHECK OPTION</strong>å°±æ˜¯é’ˆå¯¹äºå¯æ›´æ–°è¡¨çš„ã€‚</li>\n</ul>\n<h2 id=\"with-check-optionæµ‹è¯•ä»£ç \">WITH CHECK OPTIONæµ‹è¯•ä»£ç </h2>\n<pre><code class=\"hljs language-SQL\"># åˆ›å»ºè§†å›¾ï¼ˆ<span class=\"hljs-keyword\">WITHOUT</span> <span class=\"hljs-keyword\">CHECK</span> OPTIONï¼‰\n<span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">OR</span> REPLACE <span class=\"hljs-keyword\">VIEW</span> user_info_v <span class=\"hljs-keyword\">AS</span> <span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">FROM</span> user_info <span class=\"hljs-keyword\">WHERE</span> id <span class=\"hljs-operator\">&lt;</span> <span class=\"hljs-number\">10</span>\n# æŸ¥çœ‹è§†å›¾ï¼ˆåŸºè¡¨ <span class=\"hljs-operator\">+</span> è§†å›¾ï¼‰\n<span class=\"hljs-keyword\">SHOW</span> TABLES\n# åªæŸ¥çœ‹åŸºè¡¨\n<span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">FROM</span> information_schema.TABLES <span class=\"hljs-keyword\">WHERE</span> table_type <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;BASE TABLE&#x27;</span> <span class=\"hljs-keyword\">AND</span> table_schema <span class=\"hljs-operator\">=</span> database()\\G\n<span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">INTO</span> user_info_v <span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-number\">12</span>, <span class=\"hljs-string\">&#x27;lisi&#x27;</span>, <span class=\"hljs-string\">&#x27;5678&#x27;</span>\n<span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">INTO</span> user_info_v <span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-number\">2</span>, <span class=\"hljs-string\">&#x27;wangwu&#x27;</span>, <span class=\"hljs-string\">&#x27;9012&#x27;</span>\n<span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">FROM</span> user_info\n<span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">FROM</span> user_info_v\n\n# åˆ é™¤è§†å›¾\n<span class=\"hljs-keyword\">DROP</span> <span class=\"hljs-keyword\">VIEW</span> IF <span class=\"hljs-keyword\">EXISTS</span> user_info_v;\n\n# åˆ›å»ºè§†å›¾ï¼ˆ<span class=\"hljs-keyword\">WITH</span> <span class=\"hljs-keyword\">CHECK</span> OPTIONï¼‰\n<span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">OR</span> REPLACE <span class=\"hljs-keyword\">VIEW</span> user_info_v <span class=\"hljs-keyword\">AS</span> <span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">FROM</span> user_info <span class=\"hljs-keyword\">WHERE</span> id <span class=\"hljs-operator\">&lt;</span> <span class=\"hljs-number\">10</span> <span class=\"hljs-keyword\">WITH</span> <span class=\"hljs-keyword\">CHECK</span> OPTION\n<span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">INTO</span> user_info_v <span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-number\">13</span>, <span class=\"hljs-string\">&#x27;zhaoliu&#x27;</span>, <span class=\"hljs-string\">&#x27;3456&#x27;</span>\n</code></pre>\n<p><img src=\"https://t1.picb.cc/uploads/2018/11/13/JSO1Dr.png\" alt=\"enter image description here\">\n<img src=\"http://hellomrrs-imgs.oss-cn-shanghai.aliyuncs.com/18-11-13/37805165.jpg\" alt=\"enter image description here\">\n<img src=\"http://hellomrrs-imgs.oss-cn-shanghai.aliyuncs.com/18-11-13/67280010.jpg\" alt=\"enter image description here\">\n<img src=\"http://hellomrrs-imgs.oss-cn-shanghai.aliyuncs.com/18-11-13/47500056.jpg\" alt=\"enter image description here\"></p>\n<h2 id=\"è§†å›¾çš„ä½œç”¨æµ‹è¯•ä»£ç \">è§†å›¾çš„ä½œç”¨æµ‹è¯•ä»£ç </h2>\n<pre><code class=\"hljs language-SQL\">DELIMITER <span class=\"hljs-operator\">/</span><span class=\"hljs-operator\">/</span>\n<span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">PROCEDURE</span> view_test(_cnt <span class=\"hljs-type\">INT</span> UNSIGNED)\n<span class=\"hljs-keyword\">BEGIN</span>\n    <span class=\"hljs-keyword\">SET</span> <span class=\"hljs-variable\">@cnt</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>;\n    WHILE <span class=\"hljs-variable\">@cnt</span> <span class=\"hljs-operator\">&lt;</span> _cnt DO\n        <span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">INTO</span> user_info(user_name, user_pwd) <span class=\"hljs-keyword\">values</span>(REPEAT(<span class=\"hljs-type\">CHAR</span>(<span class=\"hljs-number\">97</span><span class=\"hljs-operator\">+</span>RAND()<span class=\"hljs-operator\">*</span><span class=\"hljs-number\">26</span>), <span class=\"hljs-number\">20</span>), REPEAT(<span class=\"hljs-type\">CHAR</span>(<span class=\"hljs-number\">97</span><span class=\"hljs-operator\">+</span>RAND()<span class=\"hljs-operator\">*</span><span class=\"hljs-number\">26</span>), <span class=\"hljs-number\">20</span>));\n        <span class=\"hljs-keyword\">SET</span> <span class=\"hljs-variable\">@cnt</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-variable\">@cnt</span> <span class=\"hljs-operator\">+</span> <span class=\"hljs-number\">1</span>;\n    <span class=\"hljs-keyword\">END</span> WHILE;\n<span class=\"hljs-keyword\">END</span>;\n<span class=\"hljs-operator\">/</span><span class=\"hljs-operator\">/</span>\nDELIMITER ;\n\n<span class=\"hljs-keyword\">call</span> view_test(<span class=\"hljs-number\">10000</span>);\n<span class=\"hljs-keyword\">call</span> view_test(<span class=\"hljs-number\">50000</span>);\n<span class=\"hljs-keyword\">call</span> view_test(<span class=\"hljs-number\">50000</span>);\n\n<span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">OR</span> REPLACE <span class=\"hljs-keyword\">VIEW</span> view_func_test0 <span class=\"hljs-keyword\">AS</span> <span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">FROM</span> user_info <span class=\"hljs-keyword\">WHERE</span> id <span class=\"hljs-operator\">%</span> <span class=\"hljs-number\">4</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span> <span class=\"hljs-keyword\">WITH</span> <span class=\"hljs-keyword\">CHECK</span> OPTION;\n<span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">OR</span> REPLACE <span class=\"hljs-keyword\">VIEW</span> view_func_test1 <span class=\"hljs-keyword\">AS</span> <span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">FROM</span> user_info <span class=\"hljs-keyword\">WHERE</span> id <span class=\"hljs-operator\">%</span> <span class=\"hljs-number\">4</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">1</span> <span class=\"hljs-keyword\">WITH</span> <span class=\"hljs-keyword\">CHECK</span> OPTION;\n<span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">OR</span> REPLACE <span class=\"hljs-keyword\">VIEW</span> view_func_test2 <span class=\"hljs-keyword\">AS</span> <span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">FROM</span> user_info <span class=\"hljs-keyword\">WHERE</span> id <span class=\"hljs-operator\">%</span> <span class=\"hljs-number\">4</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">2</span> <span class=\"hljs-keyword\">WITH</span> <span class=\"hljs-keyword\">CHECK</span> OPTION;\n<span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">OR</span> REPLACE <span class=\"hljs-keyword\">VIEW</span> view_func_test3 <span class=\"hljs-keyword\">AS</span> <span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">FROM</span> user_info <span class=\"hljs-keyword\">WHERE</span> id <span class=\"hljs-operator\">%</span> <span class=\"hljs-number\">4</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">3</span> <span class=\"hljs-keyword\">WITH</span> <span class=\"hljs-keyword\">CHECK</span> OPTION;\n</code></pre>\n<p><img src=\"https://t1.picb.cc/uploads/2018/11/13/JSWxYv.png\" alt=\"enter image description here\"></p>\n"},{"title":"MySQL-è§¦å‘å™¨","tags":["MySQL","è§¦å‘å™¨"],"categories":"æ•°æ®åº“ MySQL","description":"# MySQL-è§¦å‘å™¨\n## ä»€ä¹ˆæ˜¯è§¦å‘å™¨\n- è§¦å‘å™¨æ˜¯ä¸€ç§**ç‰¹æ®Šçš„å­˜å‚¨è¿‡ç¨‹**ï¼Œå®ƒåœ¨æ’å…¥/åˆ é™¤æˆ–ä¿®æ”¹è¡¨ä¸­çš„æ•°æ®æ—¶**è§¦å‘æ‰§è¡Œ**ï¼Œå®ƒæ¯”æ•°æ®åº“æœ¬èº«æœ‰ç€æ›´ç²¾ç»†å’Œæ›´å¤æ‚çš„æ•°æ®çº¦æŸåŠ›ã€‚\n\n## è§¦å‘å™¨çš„ä½œç”¨\n- ç”¨äºå®ç°å®Œæ•´æ€§çº¦æŸ\n- é€šè¿‡è§¦å‘å™¨ï¼Œç”¨æˆ·å¯ä»¥å®ç°MySQLæ•°æ®åº“æœ¬èº«å¹¶ä¸æ”¯æŒçš„ä¸€äº›ç‰¹æ€§ï¼Œå¦‚å¯¹äºä¼ ç»ŸCHECKçº¦æŸçš„æ”¯æŒï¼Œç‰©åŒ–è§†å›¾ï¼Œé«˜çº§å¤åˆ¶ï¼Œå®¡è®¡ç­‰ç‰¹æ€§\n\n## è§¦å‘å™¨çš„ç‰¹æ€§\n- ç›‘è§†åœ°ç‚¹ï¼šä¸€","createDate":"2018-11-13 22:51:06","updateDate":"10/1/2021, 3:34:43 AM","body":"<h1 id=\"mysql-è§¦å‘å™¨\">MySQL-è§¦å‘å™¨</h1>\n<h2 id=\"ä»€ä¹ˆæ˜¯è§¦å‘å™¨\">ä»€ä¹ˆæ˜¯è§¦å‘å™¨</h2>\n<ul>\n<li>è§¦å‘å™¨æ˜¯ä¸€ç§<strong>ç‰¹æ®Šçš„å­˜å‚¨è¿‡ç¨‹</strong>ï¼Œå®ƒåœ¨æ’å…¥/åˆ é™¤æˆ–ä¿®æ”¹è¡¨ä¸­çš„æ•°æ®æ—¶<strong>è§¦å‘æ‰§è¡Œ</strong>ï¼Œå®ƒæ¯”æ•°æ®åº“æœ¬èº«æœ‰ç€æ›´ç²¾ç»†å’Œæ›´å¤æ‚çš„æ•°æ®çº¦æŸåŠ›ã€‚</li>\n</ul>\n<h2 id=\"è§¦å‘å™¨çš„ä½œç”¨\">è§¦å‘å™¨çš„ä½œç”¨</h2>\n<ul>\n<li>ç”¨äºå®ç°å®Œæ•´æ€§çº¦æŸ</li>\n<li>é€šè¿‡è§¦å‘å™¨ï¼Œç”¨æˆ·å¯ä»¥å®ç°MySQLæ•°æ®åº“æœ¬èº«å¹¶ä¸æ”¯æŒçš„ä¸€äº›ç‰¹æ€§ï¼Œå¦‚å¯¹äºä¼ ç»ŸCHECKçº¦æŸçš„æ”¯æŒï¼Œç‰©åŒ–è§†å›¾ï¼Œé«˜çº§å¤åˆ¶ï¼Œå®¡è®¡ç­‰ç‰¹æ€§</li>\n</ul>\n<h2 id=\"è§¦å‘å™¨çš„ç‰¹æ€§\">è§¦å‘å™¨çš„ç‰¹æ€§</h2>\n<ul>\n<li>ç›‘è§†åœ°ç‚¹ï¼šä¸€èˆ¬å°±æ˜¯æŸä¸€å¼ è¡¨</li>\n<li>ç›‘è§†/è§¦å‘äº‹ä»¶ï¼šUPDATE/INSERT/DELETE</li>\n<li>è§¦å‘æ—¶é—´ï¼šAFTER/BEFORE</li>\n</ul>\n<h2 id=\"è§¦å‘å™¨çš„åˆ›å»ºè¯­æ³•\">è§¦å‘å™¨çš„åˆ›å»ºè¯­æ³•</h2>\n<pre><code class=\"hljs language-SQL\"><span class=\"hljs-keyword\">CREATE</span>\n[DEFINER <span class=\"hljs-operator\">=</span> { <span class=\"hljs-keyword\">user</span> <span class=\"hljs-operator\">|</span> <span class=\"hljs-built_in\">CURRENT_USER</span> }]\n<span class=\"hljs-keyword\">TRIGGER</span> trigger_name\ntrigger_time trigger_event\n<span class=\"hljs-keyword\">ON</span> tbl_name <span class=\"hljs-keyword\">FOR</span> <span class=\"hljs-keyword\">EACH</span> <span class=\"hljs-type\">ROW</span>\ntrigger_body\n\ntrigger_time: { BEFORE <span class=\"hljs-operator\">|</span> AFTER }\ntrigger_event: { <span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-operator\">|</span> <span class=\"hljs-keyword\">UPDATE</span> <span class=\"hljs-operator\">|</span> <span class=\"hljs-keyword\">DELETE</span> }\n</code></pre>\n<ul>\n<li>è§¦å‘ç¨‹åºæ˜¯ä¸è¡¨æœ‰å…³çš„æ•°æ®åº“å¯¹è±¡ï¼Œå½“è¡¨ä¸Šå‡ºç°ç‰¹å®šäº‹ä»¶æ—¶å°†æ¿€æ´»è¯¥å¯¹è±¡ã€‚è§¦å‘ç¨‹åºä¸tbl_nameç›¸å…³ï¼Œtbl_nameå¿…é¡»å¼•ç”¨æ°¸ä¹…æ€§è¡¨ï¼Œä¸èƒ½å°†è§¦å‘ç¨‹åºä¸TEMPORARYè¡¨æˆ–è§†å›¾å…³è”èµ·æ¥ã€‚</li>\n<li>å¯¹äºå…·æœ‰ç›¸åŒè§¦å‘ç¨‹åºåŠ¨ä½œäº‹ä»¶å’Œæ—¶é—´çš„ç»™å®šè¡¨ï¼Œä¸èƒ½æœ‰ä¸¤ä¸ªè§¦å‘ç¨‹åºã€‚</li>\n<li>trigger_bodyæ˜¯å½“è§¦å‘ç¨‹åºæ¿€æ´»æ—¶æ‰§è¡Œçš„è¯­å¥ã€‚å¯ä»¥ä½¿ç”¨BEGIN...ENDå¤åˆè¯­å¥ç»“æ„ã€‚</li>\n<li>å¯¹äºINSERTè€Œè¨€ï¼Œæ–°æ’å…¥çš„è¡Œç”¨NEWè¡¨ç¤ºï¼Œè¡Œä¸­çš„æ¯ä¸€åˆ—å€¼ç”¨NEW.col_nameè¡¨ç¤ºã€‚</li>\n<li>å¯¹äºDELETEè€Œè¨€ï¼Œæ¬²åˆ é™¤çš„é‚£ä¸€è¡Œç”¨OLDè¡¨ç¤ºï¼Œè¡Œä¸­çš„æ¯ä¸€åˆ—å€¼ç”¨OLD.col_nameè¡¨ç¤ºã€‚</li>\n<li>å¯¹äºUPDATEè€Œè¨€ï¼Œä¿®æ”¹å‰çš„è¡Œç”¨OLDè¡¨ç¤ºï¼Œä¿®æ”¹åçš„è¡Œç”¨NEWè¡¨ç¤ºã€‚</li>\n</ul>\n<h2 id=\"è§¦å‘å™¨çš„ç®¡ç†\">è§¦å‘å™¨çš„ç®¡ç†</h2>\n<ul>\n<li>æŸ¥çœ‹æ‰€æœ‰è§¦å‘å™¨<pre><code class=\"hljs language-SQL\"><span class=\"hljs-keyword\">SHOW</span> TRIGGERS [<span class=\"hljs-keyword\">FROM</span> db_name] [like_or_where]\n</code></pre>\n</li>\n<li>MySQLä¸­æœ‰ä¸€ä¸ªinformation_schema.TRIGGERSè¡¨ï¼Œå­˜å‚¨æ‰€æœ‰åº“ä¸­çš„è§¦å‘å™¨ï¼ŒæŸ¥çœ‹ï¼š<pre><code class=\"hljs language-SQL\"><span class=\"hljs-keyword\">DESC</span> information_schema.TRIGGERS\n</code></pre>\n</li>\n<li>åˆ é™¤è§¦å‘å™¨<pre><code class=\"hljs language-SQL\"><span class=\"hljs-keyword\">DROP</span> <span class=\"hljs-keyword\">VIEW</span> [IF <span class=\"hljs-keyword\">EXISTS</span>]\nview_name [, view_name] ...\n[RESTRICT <span class=\"hljs-operator\">|</span> CASCADE]\n</code></pre>\n</li>\n</ul>\n<h2 id=\"è§¦å‘å™¨çš„ä½¿ç”¨ç¤ºä¾‹\">è§¦å‘å™¨çš„ä½¿ç”¨ç¤ºä¾‹</h2>\n<h3 id=\"åŸºæœ¬ä½¿ç”¨\">åŸºæœ¬ä½¿ç”¨</h3>\n<pre><code class=\"hljs language-SQL\">DELIMITER <span class=\"hljs-operator\">/</span><span class=\"hljs-operator\">/</span>\n<span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">TRIGGER</span> user_trg\nAFTER <span class=\"hljs-keyword\">INSERT</span>\n<span class=\"hljs-keyword\">ON</span> user_info <span class=\"hljs-keyword\">FOR</span> <span class=\"hljs-keyword\">EACH</span> <span class=\"hljs-type\">ROW</span>\n<span class=\"hljs-keyword\">BEGIN</span>\n   <span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">INTO</span> user_salaries <span class=\"hljs-keyword\">SELECT</span> new.id, new.user_name, <span class=\"hljs-number\">0</span>;\n<span class=\"hljs-keyword\">END</span>;\n<span class=\"hljs-operator\">/</span><span class=\"hljs-operator\">/</span>\nDELIMITER;\n\n<span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">INTO</span> user_info <span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">&#x27;å¼ ä¸‰&#x27;</span>ï¼Œ <span class=\"hljs-string\">&#x27;123456&#x27;</span>;\n</code></pre>\n<p><img src=\"https://t1.picb.cc/uploads/2018/11/13/JS7x7L.png\" alt=\"enter image description here\"></p>\n<h3 id=\"å¯¹äºçº¦æŸçš„æ”¯æŒ\">å¯¹äºçº¦æŸçš„æ”¯æŒ</h3>\n<pre><code class=\"hljs language-SQL\"><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">TABLE</span> userCash(id <span class=\"hljs-type\">INT</span> UNSIGNED <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-keyword\">NULL</span> AUTO_INCREMENT <span class=\"hljs-keyword\">PRIMARY</span> KEY, \n                       cash <span class=\"hljs-type\">INT</span> UNSIGNED <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-keyword\">NULL</span> <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-number\">0</span>\n)ENGINE <span class=\"hljs-operator\">=</span> INNODB CHARSET <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;UTF8&#x27;</span>;\n<span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">TABLE</span> userCashErr_log (\n    id <span class=\"hljs-type\">INT</span> UNSIGNED <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-keyword\">NULL</span> AUTO_INCREMENT <span class=\"hljs-keyword\">PRIMARY</span> KEY,\n    old_cash <span class=\"hljs-type\">INT</span> UNSIGNED <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-keyword\">NULL</span>,\n    new_cash <span class=\"hljs-type\">INT</span> UNSIGNED <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-keyword\">NULL</span>,\n    user_name <span class=\"hljs-type\">VARCHAR</span>(<span class=\"hljs-number\">20</span>),\n    <span class=\"hljs-type\">time</span> DATETIME\n)ENGINE <span class=\"hljs-operator\">=</span> INNODB CHARSET <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;UTF8&#x27;</span>;\n\nDELIMITER <span class=\"hljs-operator\">/</span><span class=\"hljs-operator\">/</span>\n<span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">TRIGGER</span> userCashUpdate_tgr \nBEFORE <span class=\"hljs-keyword\">UPDATE</span>\n<span class=\"hljs-keyword\">ON</span> userCash <span class=\"hljs-keyword\">FOR</span> <span class=\"hljs-keyword\">EACH</span> <span class=\"hljs-type\">ROW</span>\n<span class=\"hljs-keyword\">BEGIN</span>\n    IF new.cash <span class=\"hljs-operator\">-</span> old.cash <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">0</span> <span class=\"hljs-keyword\">THEN</span>\n        <span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">INTO</span> userCashErr_log <span class=\"hljs-keyword\">SELECT</span> old.id, old.cash, new.cash, <span class=\"hljs-keyword\">USER</span>(), NOW();\n        <span class=\"hljs-keyword\">SET</span> new.cash <span class=\"hljs-operator\">=</span> old.cash;\n    <span class=\"hljs-keyword\">END</span> IF;\n<span class=\"hljs-keyword\">END</span>;\n<span class=\"hljs-operator\">/</span><span class=\"hljs-operator\">/</span>\nDELIMITER ;\n\n<span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">INTO</span> userCash <span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">10000</span>;\n<span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">FROM</span> userCashErr_log;\n<span class=\"hljs-keyword\">UPDATE</span> userCash <span class=\"hljs-keyword\">SET</span> cash <span class=\"hljs-operator\">=</span> cash <span class=\"hljs-operator\">-</span> (<span class=\"hljs-number\">-20</span>) <span class=\"hljs-keyword\">WHERE</span> id <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">1</span>;\n<span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">FROM</span> userCashErr_log;\n</code></pre>\n<p><img src=\"https://t1.picb.cc/uploads/2018/11/13/JS7T9W.png\" alt=\"enter image description here\"></p>\n"},{"title":"MySQL-é”","tags":["MySQL"],"categories":"MySQL","description":"# MySQL-é”\n\n## ä»€ä¹ˆæ˜¯é”\n- é”æœºåˆ¶ç”¨äºç®¡ç†å¯¹å…±äº«èµ„æºçš„å¹¶å‘è®¿é—®\n\n## lockä¸latch\n- latchä¸€èˆ¬ç§°ä¸ºé—©é”ï¼ˆè½»é‡çº§çš„é”ï¼‰ ï¼Œ å› ä¸ºå…¶è¦æ±‚é”å®šçš„æ—¶é—´å¿…é¡»éå¸¸çŸ­ã€‚ è‹¥æŒç»­çš„æ—¶é—´é•¿ï¼Œ åˆ™åº”ç”¨çš„æ€§èƒ½ä¼šéå¸¸å·®ã€‚ åœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œ latchåˆå¯ä»¥åˆ†ä¸ºmutexï¼ˆäº’æ–¥é‡ï¼‰å’Œrwlockï¼ˆè¯»å†™é”ï¼‰ã€‚å…¶ç›®æ˜¯ç”¨æ¥ä¿è¯å¹¶å‘çº¿ç¨‹æ“ä½œä¸´ç•Œèµ„æºçš„æ­£ç¡®æ€§ï¼Œ å¹¶ä¸”é€šå¸¸æ²¡æœ‰æ­»é”æ£€æµ‹çš„æœºåˆ¶ã€‚","createDate":"2018-11-14 21:17:51","updateDate":"10/1/2021, 3:34:43 AM","body":"<h1 id=\"mysql-é”\">MySQL-é”</h1>\n<h2 id=\"ä»€ä¹ˆæ˜¯é”\">ä»€ä¹ˆæ˜¯é”</h2>\n<ul>\n<li>é”æœºåˆ¶ç”¨äºç®¡ç†å¯¹å…±äº«èµ„æºçš„å¹¶å‘è®¿é—®</li>\n</ul>\n<h2 id=\"lockä¸latch\">lockä¸latch</h2>\n<ul>\n<li>latchä¸€èˆ¬ç§°ä¸ºé—©é”ï¼ˆè½»é‡çº§çš„é”ï¼‰ ï¼Œ å› ä¸ºå…¶è¦æ±‚é”å®šçš„æ—¶é—´å¿…é¡»éå¸¸çŸ­ã€‚ è‹¥æŒç»­çš„æ—¶é—´é•¿ï¼Œ åˆ™åº”ç”¨çš„æ€§èƒ½ä¼šéå¸¸å·®ã€‚ åœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œ latchåˆå¯ä»¥åˆ†ä¸ºmutexï¼ˆäº’æ–¥é‡ï¼‰å’Œrwlockï¼ˆè¯»å†™é”ï¼‰ã€‚å…¶ç›®æ˜¯ç”¨æ¥ä¿è¯å¹¶å‘çº¿ç¨‹æ“ä½œä¸´ç•Œèµ„æºçš„æ­£ç¡®æ€§ï¼Œ å¹¶ä¸”é€šå¸¸æ²¡æœ‰æ­»é”æ£€æµ‹çš„æœºåˆ¶ã€‚</li>\n<li>lockçš„å¯¹è±¡æ˜¯äº‹åŠ¡ï¼Œç”¨æ¥é”å®šçš„æ˜¯æ•°æ®åº“ä¸­çš„å¯¹è±¡ï¼Œå¦‚è¡¨ã€é¡µã€è¡Œã€‚å¹¶ä¸”ä¸€èˆ¬lockçš„å¯¹è±¡ä»…åœ¨äº‹commitæˆ–rollbackåè¿›è¡Œé‡Šæ”¾ï¼ˆä¸åŒäº‹åŠ¡éš”ç¦»çº§åˆ«é‡Šæ”¾çš„æ—¶é—´å¯èƒ½ä¸åŒï¼‰ã€‚æ­¤å¤–ï¼Œlockï¼Œæ­£å¦‚åœ¨å¤§å¤šæ•°æ•°æ®åº“ä¸­ä¸€æ ·ï¼Œæ˜¯æœ‰æ­»é”æœºåˆ¶çš„ã€‚</li>\n</ul>\n<p><img src=\"http://hellomrrs-imgs.oss-cn-shanghai.aliyuncs.com/18-11-14/84119853.jpg\" alt=\"enter image description here\"></p>\n<h2 id=\"innodbå­˜å‚¨å¼•æ“ä¸­çš„é”\">InnoDBå­˜å‚¨å¼•æ“ä¸­çš„é”</h2>\n<h3 id=\"é”çš„ç±»å‹\">é”çš„ç±»å‹</h3>\n<ul>\n<li>å…±äº«é”ï¼ˆS Lockï¼‰ï¼Œå…è®¸äº‹åŠ¡è¯»ä¸€è¡Œæ•°æ®</li>\n<li>æ’ä»–é”ï¼ˆX Lockï¼‰ï¼Œå…è®¸äº‹åŠ¡åˆ é™¤æˆ–æ›´æ–°ä¸€è¡Œæ•°æ®</li>\n<li>æ„å‘é”ï¼ˆIntention Lockï¼‰æ˜¯å°†é”å®šçš„å¯¹è±¡åˆ†ä¸ºå¤šä¸ªå±‚æ¬¡ï¼Œæ„å‘é”æ„å‘³ç€äº‹åŠ¡å¸Œæœ›åœ¨æ›´ç»†ç²’åº¦ï¼ˆfine granularityï¼‰ä¸Šè¿›è¡ŒåŠ é”ã€‚å¯¹æœ€ç»†ç²’åº¦çš„å¯¹è±¡è¿›è¡Œä¸Šé”ï¼Œ é‚£ä¹ˆé¦–å…ˆéœ€è¦å¯¹ç²—ç²’åº¦çš„å¯¹è±¡ä¸Šé”ã€‚<h4 id=\"å„ç§é”ä¹‹é—´çš„å…¼å®¹æ€§\">å„ç§é”ä¹‹é—´çš„å…¼å®¹æ€§</h4>\n<img src=\"http://hellomrrs-imgs.oss-cn-shanghai.aliyuncs.com/18-11-14/91462658.jpg\" alt=\"enter image description here\"><h4 id=\"ä¸‰å¼ è¡¨\">ä¸‰å¼ è¡¨</h4>\n</li>\n<li>INNODB_TRXæ˜¾ç¤ºäº†å½“å‰è¿è¡Œçš„InnoDBäº‹åŠ¡</li>\n<li>INNODB_LOCKSæŸ¥çœ‹é”</li>\n<li>INNODB_LOCK_WAITSå¯ä»¥å¾ˆç›´è§‚åœ°åæ˜ å½“å‰äº‹åŠ¡çš„ç­‰å¾…</li>\n</ul>\n<h3 id=\"ä¸€è‡´æ€§éé”å®šè¯»\">ä¸€è‡´æ€§éé”å®šè¯»</h3>\n<ul>\n<li>ä¸€è‡´æ€§çš„éé”å®šè¯»ï¼ˆconsistent nonlocking readï¼‰ æ˜¯æŒ‡InnoDBå­˜å‚¨å¼•æ“é€šè¿‡è¡Œå¤šç‰ˆæœ¬æ§åˆ¶ï¼ˆmulti versioningï¼‰ çš„æ–¹å¼æ¥è¯»å–å½“å‰æ‰§è¡Œæ—¶é—´æ•°æ®åº“ä¸­è¡Œçš„æ•°æ®ã€‚ å¦‚æœè¯»å–çš„è¡Œæ­£åœ¨æ‰§è¡ŒDELETEæˆ–UPDATEæ“ä½œï¼Œ è¿™æ—¶è¯»å–æ“ä½œä¸ä¼šå› æ­¤å»ç­‰å¾…è¡Œä¸Šé”çš„é‡Šæ”¾ã€‚ ç›¸ååœ°ï¼ŒInnoDBå­˜å‚¨å¼•æ“ä¼šå»è¯»å–è¡Œçš„ä¸€ä¸ªå¿«ç…§æ•°æ®ã€‚éé”å®šè¯»æœºåˆ¶å¤§å¤§åœ°æé«˜äº†æ•°æ®åº“çš„å¹¶å‘æ€§ã€‚\n<img src=\"http://hellomrrs-imgs.oss-cn-shanghai.aliyuncs.com/18-11-14/66097705.jpg\" alt=\"enter image description here\"><h4 id=\"æ³¨æ„\">æ³¨æ„</h4>\n</li>\n<li>åœ¨READ COMMITTEDäº‹åŠ¡éš”ç¦»çº§åˆ«ä¸‹ï¼Œå¯¹äºå¿«ç…§æ•°æ®ï¼Œéä¸€è‡´æ€§è¯»æ€»æ˜¯è¯»å–è¢«é”å®šè¡Œçš„æœ€æ–°ä¸€ä»½å¿«ç…§æ•°æ®(<strong>è¿åäº†éš”ç¦»æ€§</strong>)ã€‚ è€Œåœ¨REPEATABLE READäº‹åŠ¡éš”ç¦»çº§åˆ«ä¸‹ï¼Œå¯¹äºå¿«ç…§æ•°æ®ï¼Œéä¸€è‡´æ€§è¯»æ€»æ˜¯è¯»å–äº‹åŠ¡å¼€å§‹æ—¶çš„è¡Œæ•°æ®ç‰ˆæœ¬ã€‚</li>\n</ul>\n<h3 id=\"ä¸€è‡´æ€§é”å®šè¯»\">ä¸€è‡´æ€§é”å®šè¯»</h3>\n<p>ç”¨æˆ·éœ€è¦æ˜¾å¼åœ°å¯¹æ•°æ®åº“è¯»å–æ“ä½œè¿›è¡ŒåŠ é”ä»¥ä¿è¯æ•°æ®é€»è¾‘çš„ä¸€è‡´æ€§ã€‚</p>\n<h3 id=\"è‡ªå¢é•¿ä¸é”\">è‡ªå¢é•¿ä¸é”</h3>\n<h4 id=\"æ¦‚è¿°\">æ¦‚è¿°</h4>\n<ul>\n<li>æ’å…¥æ“ä½œä¼šä¾æ®è¿™ä¸ªè‡ªå¢é•¿çš„è®¡æ•°å™¨å€¼åŠ 1èµ‹äºˆè‡ªå¢é•¿åˆ—ã€‚è¿™ä¸ªå®ç°æ–¹å¼ç§°åšAUTO-INC Lockingã€‚è¿™ç§é”å…¶å®æ˜¯é‡‡ç”¨ä¸€ç§ç‰¹æ®Šçš„è¡¨é”æœºåˆ¶ï¼Œä¸ºäº†æé«˜æ’å…¥çš„æ€§èƒ½ï¼Œé”ä¸æ˜¯åœ¨ä¸€ä¸ªäº‹åŠ¡å®Œæˆåæ‰é‡Šæ”¾ï¼Œè€Œæ˜¯åœ¨å®Œæˆå¯¹è‡ªå¢é•¿å€¼æ’å…¥çš„SQLè¯­å¥åç«‹å³é‡Šæ”¾ã€‚</li>\n<li>è™½ç„¶AUTO-INC Lockingä»ä¸€å®šç¨‹åº¦ä¸Šæé«˜äº†å¹¶å‘æ’å…¥çš„æ•ˆç‡ï¼Œ ä½†è¿˜æ˜¯å­˜åœ¨ä¸€äº›æ€§èƒ½ä¸Šçš„é—®é¢˜ã€‚ é¦–å…ˆï¼Œ å¯¹äºæœ‰è‡ªå¢é•¿å€¼çš„åˆ—çš„å¹¶å‘æ’å…¥æ€§èƒ½è¾ƒå·®ï¼Œ äº‹åŠ¡å¿…é¡»ç­‰å¾…å‰ä¸€ä¸ªæ’å…¥çš„å®Œæˆï¼ˆè™½ç„¶ä¸ç”¨ç­‰å¾…äº‹åŠ¡çš„å®Œæˆï¼‰ ã€‚ å…¶æ¬¡ï¼Œ å¯¹äºINSERTâ€¦SELECTçš„å¤§æ•°æ®é‡çš„æ’å…¥ä¼šå½±å“æ’å…¥çš„æ€§èƒ½ï¼Œ å› ä¸ºå¦ä¸€ä¸ªäº‹åŠ¡ä¸­çš„æ’å…¥ä¼šè¢«é˜»å¡ã€‚</li>\n</ul>\n<h4 id=\"è‡ªå¢é•¿çš„æ¨¡å¼\">è‡ªå¢é•¿çš„æ¨¡å¼</h4>\n<ul>\n<li>å‚æ•°innodb_autoinc_lock_modeæ¥æ§åˆ¶è‡ªå¢é•¿çš„æ¨¡å¼\n<img src=\"http://hellomrrs-imgs.oss-cn-shanghai.aliyuncs.com/18-11-14/49495821.jpg\" alt=\"enter image description here\">\n<img src=\"http://hellomrrs-imgs.oss-cn-shanghai.aliyuncs.com/18-11-14/26079309.jpg\" alt=\"enter image description here\"></li>\n</ul>\n<h4 id=\"æ³¨æ„-1\">æ³¨æ„</h4>\n<ul>\n<li>åœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œ è‡ªå¢é•¿å€¼çš„åˆ—å¿…é¡»æ˜¯ç´¢å¼•ï¼Œ åŒæ—¶å¿…é¡»æ˜¯ç´¢å¼•çš„ç¬¬ä¸€ä¸ªåˆ—ã€‚ å¦‚æœä¸æ˜¯ç¬¬ä¸€ä¸ªåˆ—ï¼Œ åˆ™MySQLæ•°æ®åº“ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œ è€ŒMyISAMå­˜å‚¨å¼•æ“æ²¡æœ‰è¿™ä¸ªé—®é¢˜ã€‚\n<img src=\"http://hellomrrs-imgs.oss-cn-shanghai.aliyuncs.com/18-11-14/60316580.jpg\" alt=\"enter image description here\"></li>\n</ul>\n<h3 id=\"å¤–é”®ä¸é”\">å¤–é”®ä¸é”</h3>\n<ul>\n<li>å¯¹äºå¤–é”®å€¼çš„æ’å…¥æˆ–æ›´æ–°ï¼Œé¦–å…ˆéœ€è¦æŸ¥è¯¢çˆ¶è¡¨ä¸­çš„è®°å½•ï¼Œå³SELECTçˆ¶è¡¨ã€‚ä½†æ˜¯å¯¹äºçˆ¶è¡¨çš„SELECTæ“ä½œï¼Œä¸æ˜¯ä½¿ç”¨ä¸€è‡´æ€§éé”å®šè¯»çš„æ–¹å¼ï¼Œå› ä¸ºè¿™æ ·ä¼šå‘ç”Ÿæ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œå› æ­¤è¿™æ—¶ä½¿ç”¨çš„æ˜¯SELECTâ€¦LOCK IN SHARE MODEæ–¹å¼ï¼Œå³ä¸»åŠ¨å¯¹çˆ¶è¡¨åŠ ä¸€ä¸ªSé”ã€‚å¦‚æœè¿™æ—¶çˆ¶è¡¨ä¸Šå·²ç»è¿™æ ·åŠ Xé”ï¼Œå­è¡¨ä¸Šçš„æ“ä½œä¼šè¢«é˜»å¡ã€‚</li>\n</ul>\n<h2 id=\"é”çš„ç®—æ³•\">é”çš„ç®—æ³•</h2>\n<h3 id=\"è¡Œé”çš„ä¸‰ç§ç®—æ³•\">è¡Œé”çš„ä¸‰ç§ç®—æ³•</h3>\n<ul>\n<li>Record Lockï¼šå•ä¸ªè¡Œè®°å½•ä¸Šçš„é”ã€‚</li>\n<li>Gap Lockï¼šé—´éš™é”ï¼Œé”å®šä¸€ä¸ªèŒƒå›´ï¼Œä½†ä¸åŒ…å«è®°å½•æœ¬èº«ã€‚</li>\n<li>Next-Key Lockâˆ¶Gap Lock+Record Lockï¼Œé”å®šä¸€ä¸ªèŒƒå›´ï¼Œå¹¶ä¸”é”å®šè®°å½•æœ¬èº«ã€‚</li>\n</ul>\n<h3 id=\"æ³¨æ„-2\">æ³¨æ„</h3>\n<ul>\n<li>å½“æŸ¥è¯¢çš„ç´¢å¼•å«æœ‰å”¯ä¸€å±æ€§æ—¶ï¼ŒInnoDBå­˜å‚¨å¼•æ“ä¼šå¯¹Next-Key Lockè¿›è¡Œä¼˜åŒ–ï¼Œå°†å…¶é™çº§ä¸ºRecord Lockï¼Œå³ä»…é”ä½ç´¢å¼•æœ¬èº«ï¼Œ è€Œä¸æ˜¯èŒƒå›´ã€‚</li>\n<li>åœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œ å¯¹äºINSERTçš„æ“ä½œï¼Œ å…¶ä¼šæ£€æŸ¥æ’å…¥è®°å½•çš„ä¸‹ä¸€æ¡è®°å½•æ˜¯å¦è¢«é”å®šï¼Œ è‹¥å·²ç»è¢«é”å®šï¼Œ åˆ™ä¸å…è®¸æŸ¥è¯¢ã€‚</li>\n</ul>\n<h3 id=\"è§£å†³phantom-problem--é’ˆå¯¹å…¶ä»–æäº¤å‰åï¼Œè¯»å–æ•°æ®æ¡æ•°çš„å¯¹æ¯”\">è§£å†³phantom problem--é’ˆå¯¹å…¶ä»–æäº¤å‰åï¼Œè¯»å–æ•°æ®æ¡æ•°çš„å¯¹æ¯”</h3>\n<ul>\n<li>Phantom Problemæ˜¯æŒ‡åœ¨åŒä¸€äº‹åŠ¡ä¸‹ï¼Œè¿ç»­æ‰§è¡Œä¸¤æ¬¡åŒæ ·çš„SQLè¯­å¥å¯èƒ½å¯¼è‡´ä¸åŒçš„ç»“æœï¼Œç¬¬äºŒæ¬¡çš„SQLè¯­å¥å¯èƒ½ä¼šè¿”å›<strong>ä¹‹å‰ä¸å­˜åœ¨çš„è¡Œï¼Œè¿åäº†äº‹åŠ¡çš„éš”ç¦»æ€§</strong>ã€‚</li>\n<li>InnoDBå­˜å‚¨å¼•æ“é‡‡ç”¨Next-Key Lockingçš„ç®—æ³•é¿å…Phantom Problemã€‚</li>\n</ul>\n<h4 id=\"å¹»å½±è¯»ç¤ºä¾‹\">å¹»å½±è¯»ç¤ºä¾‹</h4>\n<p><img src=\"http://hellomrrs-imgs.oss-cn-shanghai.aliyuncs.com/18-11-14/92904378.jpg\" alt=\"enter image description here\"></p>\n<h4 id=\"è§£å†³å¹»å½±è¯»\">è§£å†³å¹»å½±è¯»</h4>\n<p><img src=\"http://hellomrrs-imgs.oss-cn-shanghai.aliyuncs.com/18-11-14/19298541.jpg\" alt=\"enter image description here\"></p>\n<h2 id=\"é”é—®é¢˜\">é”é—®é¢˜</h2>\n<p>æ·±å…¥ç†è§£è„è¯»/å¹»å½±è¯»/ä¸å¯é‡å¤è¯»/ä¸¢å¤±æ›´æ–°çš„åŒºåˆ«ï¼š<a href=\"https://www.cnblogs.com/Hakuna-Matata/p/7772794.html\">https://www.cnblogs.com/Hakuna-Matata/p/7772794.html</a></p>\n<h3 id=\"è„è¯»--é’ˆå¯¹æœªæäº¤æ•°æ®\">è„è¯»--é’ˆå¯¹æœªæäº¤æ•°æ®</h3>\n<h4 id=\"è„é¡µ\">è„é¡µ</h4>\n<ul>\n<li>è„é¡µæŒ‡çš„æ˜¯åœ¨ç¼“å†²æ± ä¸­å·²ç»è¢«ä¿®æ”¹çš„é¡µï¼Œä½†æ˜¯è¿˜æ²¡æœ‰åˆ·æ–°åˆ°ç£ç›˜ä¸­ï¼Œå³æ•°æ®åº“å®ä¾‹å†…å­˜ä¸­çš„é¡µå’Œç£ç›˜ä¸­çš„é¡µçš„æ•°æ®æ˜¯ä¸ä¸€è‡´çš„ã€‚</li>\n</ul>\n<h4 id=\"è„æ•°æ®\">è„æ•°æ®</h4>\n<ul>\n<li>è„æ•°æ®æ˜¯æŒ‡äº‹åŠ¡å¯¹ç¼“å†²æ± ä¸­è¡Œè®°å½•çš„ä¿®æ”¹ï¼Œå¹¶ä¸”è¿˜æ²¡æœ‰è¢«æäº¤ï¼ˆcommitï¼‰ã€‚</li>\n</ul>\n<h4 id=\"è„è¯»\">è„è¯»</h4>\n<ul>\n<li>è„è¯»æŒ‡çš„å°±æ˜¯åœ¨ä¸åŒçš„äº‹åŠ¡ä¸‹ï¼Œ å½“å‰äº‹åŠ¡å¯ä»¥<strong>è¯»åˆ°å¦å¤–äº‹åŠ¡æœªæäº¤çš„æ•°æ®</strong>ï¼Œ ç®€å•æ¥è¯´å°±æ˜¯å¯ä»¥è¯»åˆ°è„æ•°æ®ã€‚</li>\n<li>å¯¹äºè„é¡µçš„è¯»å–ï¼Œæ˜¯éå¸¸æ­£å¸¸çš„ï¼Œä½†å¦‚æœè¯»åˆ°äº†è„æ•°æ®ï¼Œå³ä¸€ä¸ªäº‹åŠ¡å¯ä»¥è¯»åˆ°å¦å¤–ä¸€ä¸ªäº‹åŠ¡ä¸­æœªæäº¤çš„æ•°æ®ï¼Œåˆ™æ˜¾ç„¶<strong>è¿åäº†æ•°æ®åº“çš„éš”ç¦»æ€§</strong>ã€‚è„è¯»å‘ç”Ÿçš„æ¡ä»¶æ˜¯éœ€è¦äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ä¸ºREAD UNCOMMITTEDã€‚</li>\n<li>è„è¯»éš”ç¦»çœ‹ä¼¼æ¯«æ— ç”¨å¤„ï¼Œ ä½†åœ¨ä¸€äº›æ¯”è¾ƒç‰¹æ®Šçš„æƒ…å†µä¸‹è¿˜æ˜¯å¯ä»¥å°†äº‹åŠ¡çš„éš”ç¦»çº§åˆ«è®¾ç½®ä¸ºREAD UNCOMMITTEDã€‚ ä¾‹å¦‚replicationç¯å¢ƒä¸­çš„slaveèŠ‚ç‚¹ï¼Œ å¹¶ä¸”åœ¨è¯¥slaveä¸Šçš„æŸ¥è¯¢å¹¶\nä¸éœ€è¦ç‰¹åˆ«ç²¾ç¡®çš„è¿”å›å€¼ã€‚</li>\n</ul>\n<h4 id=\"è„è¯»ç¤ºä¾‹\">è„è¯»ç¤ºä¾‹</h4>\n<p><img src=\"http://hellomrrs-imgs.oss-cn-shanghai.aliyuncs.com/18-11-14/27843486.jpg\" alt=\"enter image description here\"></p>\n<h4 id=\"è§£å†³è„è¯»\">è§£å†³è„è¯»</h4>\n<p><img src=\"http://hellomrrs-imgs.oss-cn-shanghai.aliyuncs.com/18-11-14/90598726.jpg\" alt=\"enter image description here\"></p>\n<h3 id=\"ä¸å¯é‡å¤è¯»--é’ˆå¯¹å…¶ä»–æäº¤å‰åï¼Œè¯»å–æ•°æ®æœ¬èº«çš„å¯¹æ¯”\">ä¸å¯é‡å¤è¯»--é’ˆå¯¹å…¶ä»–æäº¤å‰åï¼Œè¯»å–æ•°æ®æœ¬èº«çš„å¯¹æ¯”</h3>\n<ul>\n<li>ä¸å¯é‡å¤è¯»æ˜¯æŒ‡åœ¨ä¸€ä¸ªäº‹åŠ¡å†…å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®é›†åˆã€‚åœ¨è¿™ä¸ªäº‹åŠ¡è¿˜æ²¡æœ‰ç»“æŸæ—¶ï¼Œå¦å¤–ä¸€ä¸ªäº‹åŠ¡ä¹Ÿè®¿é—®è¯¥åŒä¸€æ•°æ®é›†åˆï¼Œå¹¶åšäº†ä¸€äº›<strong>DMLæ“ä½œ</strong>ã€‚è¿™æ ·å°±å‘ç”Ÿäº†åœ¨ä¸€ä¸ªäº‹åŠ¡å†…ä¸¤æ¬¡è¯»åˆ°çš„æ•°æ®æ˜¯ä¸ä¸€æ ·ã€‚</li>\n<li>åœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œé€šè¿‡ä½¿ç”¨Next-Key Lockç®—æ³•æ¥é¿å…ä¸å¯é‡å¤è¯»çš„é—®é¢˜ã€‚</li>\n<li>ä¸å¯é‡å¤è¯»å’Œè„è¯»çš„åŒºåˆ«æ˜¯ï¼š è„è¯»æ˜¯è¯»åˆ°æœªæäº¤çš„æ•°æ®ï¼Œ è€Œä¸å¯é‡å¤è¯»è¯»åˆ°çš„å´æ˜¯å·²ç»æäº¤çš„æ•°æ®ï¼Œ ä½†æ˜¯å…¶<strong>è¿åäº†æ•°æ®åº“äº‹åŠ¡ä¸€è‡´æ€§</strong>çš„è¦æ±‚ã€‚</li>\n<li>ä¸€èˆ¬æ¥è¯´ï¼Œ ä¸å¯é‡å¤è¯»çš„é—®é¢˜æ˜¯å¯ä»¥æ¥å—çš„ï¼Œ å› ä¸ºå…¶è¯»åˆ°çš„æ˜¯å·²ç»æäº¤çš„æ•°æ®ï¼Œ æœ¬èº«å¹¶ä¸ä¼šå¸¦æ¥å¾ˆå¤§çš„é—®é¢˜ã€‚ å› æ­¤ï¼Œ å¾ˆå¤šæ•°æ®åº“å‚å•†ï¼ˆå¦‚Oracleã€ Microsoft SQL Serverï¼‰ å°†å…¶æ•°æ®åº“äº‹åŠ¡çš„é»˜è®¤éš”ç¦»çº§åˆ«è®¾ç½®ä¸ºREAD COMMITTEDï¼Œ åœ¨è¿™ç§éš”ç¦»çº§åˆ«ä¸‹å…è®¸ä¸å¯é‡å¤è¯»çš„ç°è±¡ã€‚</li>\n<li>åœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œ é€šè¿‡ä½¿ç”¨<strong>Next-Key Lock</strong>ç®—æ³•æ¥é¿å…ä¸å¯é‡å¤è¯»çš„é—®é¢˜ã€‚ åœ¨NextKey Lockç®—æ³•ä¸‹ï¼Œ å¯¹äºç´¢å¼•çš„æ‰«æï¼Œ ä¸ä»…æ˜¯é”ä½æ‰«æåˆ°çš„ç´¢å¼•ï¼Œ è€Œä¸”è¿˜é”ä½è¿™äº›ç´¢å¼•è¦†ç›–çš„èŒƒå›´ï¼ˆgapï¼‰ ã€‚ å› æ­¤åœ¨è¿™ä¸ªèŒƒå›´å†…çš„æ’å…¥éƒ½æ˜¯ä¸å…è®¸çš„ã€‚ è¿™æ ·å°±é¿å…äº†å¦å¤–çš„äº‹åŠ¡åœ¨è¿™ä¸ªèŒƒå›´å†…æ’å…¥æ•°æ®å¯¼è‡´çš„ä¸å¯é‡å¤è¯»çš„é—®é¢˜ã€‚ å› æ­¤ï¼Œ InnoDBå­˜å‚¨å¼•æ“çš„é»˜è®¤äº‹åŠ¡éš”ç¦»çº§åˆ«æ˜¯READ REPEATABLEï¼Œ é‡‡ç”¨Next-Key Lockç®—æ³•ï¼Œ é¿å…äº†ä¸å¯é‡å¤è¯»çš„ç°è±¡ã€‚</li>\n</ul>\n<h4 id=\"ä¸å¯é‡å¤è¯»ç¤ºä¾‹\">ä¸å¯é‡å¤è¯»ç¤ºä¾‹</h4>\n<p><img src=\"http://hellomrrs-imgs.oss-cn-shanghai.aliyuncs.com/18-11-14/61438726.jpg\" alt=\"enter image description here\"></p>\n<h3 id=\"ä¸¢å¤±æ›´æ–°\">ä¸¢å¤±æ›´æ–°</h3>\n<ul>\n<li>ä¸¢å¤±æ›´æ–°æ˜¯å¦ä¸€ä¸ªé”å¯¼è‡´çš„é—®é¢˜ï¼Œç®€å•æ¥è¯´å…¶å°±æ˜¯ä¸€ä¸ªäº‹åŠ¡çš„æ›´æ–°æ“ä½œä¼šè¢«å¦ä¸€ä¸ªäº‹\nåŠ¡çš„æ›´æ–°æ“ä½œæ‰€<strong>è¦†ç›–</strong>ï¼Œä»è€Œå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ã€‚</li>\n<li>è¦é¿å…ä¸¢å¤±æ›´æ–°ï¼Œ éœ€è¦è®©äº‹åŠ¡åœ¨è¿™ç§æƒ…å†µä¸‹çš„æ“ä½œå˜æˆ<strong>ä¸²è¡ŒåŒ–</strong>ã€‚</li>\n</ul>\n<h3 id=\"æ€»ç»“--ä»…ä¾›å‚è€ƒ\">æ€»ç»“--<strong>ä»…ä¾›å‚è€ƒ</strong></h3>\n<p><img src=\"http://hellomrrs-imgs.oss-cn-shanghai.aliyuncs.com/18-11-14/33516594.jpg\" alt=\"enter image description here\"></p>\n<h2 id=\"é˜»å¡\">é˜»å¡</h2>\n<ul>\n<li>åœ¨é»˜è®¤æƒ…å†µä¸‹InnoDBå­˜å‚¨å¼•æ“ä¸ä¼šå›æ»šè¶…æ—¶å¼•å‘çš„é”™è¯¯å¼‚å¸¸ã€‚å…¶å®InnoDBå­˜å‚¨å¼•æ“åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½ä¸ä¼šå¯¹å¼‚å¸¸è¿›è¡Œå›æ»šã€‚</li>\n</ul>\n<h2 id=\"æ­»é”\">æ­»é”</h2>\n<h3 id=\"æ­»é”çš„æ¦‚å¿µåŠè§£å†³\">æ­»é”çš„æ¦‚å¿µåŠè§£å†³</h3>\n<ul>\n<li>è§£å†³æ­»é”é—®é¢˜æœ€ç®€å•çš„ä¸€ç§æ–¹æ³•æ˜¯è¶…æ—¶ï¼Œå³å½“ä¸¤ä¸ªäº‹åŠ¡äº’ç›¸ç­‰å¾…æ—¶ï¼Œå½“ä¸€ä¸ªç­‰å¾…æ—¶é—´è¶…è¿‡è®¾ç½®çš„æŸä¸€é˜ˆå€¼æ—¶ï¼Œå…¶ä¸­ä¸€ä¸ªäº‹åŠ¡è¿›è¡Œå›æ»šï¼Œå¦ä¸€ä¸ªç­‰å¾…çš„äº‹åŠ¡å°±èƒ½ç»§ç»­è¿›è¡Œ.</li>\n<li>å½“å‰æ•°æ®åº“è¿˜éƒ½æ™®éé‡‡ç”¨wait-for graphï¼ˆç­‰å¾…å›¾ï¼‰çš„æ–¹å¼æ¥è¿›è¡Œæ­»é”æ£€æµ‹ï¼š</li>\n<li>é”çš„ä¿¡æ¯é“¾è¡¨</li>\n<li>äº‹åŠ¡ç­‰å¾…é“¾è¡¨</li>\n</ul>\n<h3 id=\"æ­»é”æ¦‚ç‡\">æ­»é”æ¦‚ç‡</h3>\n<ul>\n<li>äº‹åŠ¡å‘ç”Ÿæ­»é”çš„æ¦‚ç‡ä¸ä»¥ä¸‹å‡ ç‚¹å› ç´ æœ‰å…³ï¼š</li>\n<li>ç³»ç»Ÿä¸­äº‹åŠ¡çš„æ•°é‡ï¼ˆnï¼‰ ï¼Œ æ•°é‡è¶Šå¤šå‘ç”Ÿæ­»é”çš„æ¦‚ç‡è¶Šå¤§ã€‚</li>\n<li>æ¯ä¸ªäº‹åŠ¡æ“ä½œçš„æ•°é‡ï¼ˆrï¼‰ ï¼Œ æ¯ä¸ªäº‹åŠ¡æ“ä½œçš„æ•°é‡è¶Šå¤šï¼Œ å‘ç”Ÿæ­»é”çš„æ¦‚ç‡è¶Šå¤§ã€‚</li>\n<li>æ“ä½œæ•°æ®çš„é›†åˆï¼ˆRï¼‰ ï¼Œ è¶Šå°åˆ™å‘ç”Ÿæ­»é”çš„æ¦‚ç‡è¶Šå¤§ã€‚</li>\n</ul>\n<h3 id=\"æ­»é”ç¤ºä¾‹\">æ­»é”ç¤ºä¾‹</h3>\n<p><img src=\"http://hellomrrs-imgs.oss-cn-shanghai.aliyuncs.com/18-11-14/71303703.jpg\" alt=\"enter image description here\"></p>\n<h2 id=\"é”å‡çº§\">é”å‡çº§</h2>\n<ul>\n<li>é”å‡çº§ï¼ˆLock Escalationï¼‰æ˜¯æŒ‡å°†å½“å‰é”çš„ç²’åº¦é™ä½(å‡å°‘å¼€é”€)</li>\n<li>InnoDBå­˜å‚¨å¼•æ“ä¸å­˜åœ¨é”å‡çº§çš„é—®é¢˜ã€‚å› ä¸ºå…¶ä¸æ˜¯æ ¹æ®æ¯ä¸ªè®°å½•æ¥äº§ç”Ÿè¡Œé”çš„ï¼Œç›¸åï¼Œå…¶æ ¹æ®æ¯ä¸ªäº‹åŠ¡è®¿é—®çš„æ¯ä¸ªé¡µå¯¹é”è¿›è¡Œç®¡ç†çš„ï¼Œé‡‡ç”¨çš„æ˜¯ä½å›¾çš„æ–¹å¼ã€‚å› æ­¤ä¸ç®¡ä¸€ä¸ªäº‹åŠ¡é”ä½é¡µä¸­ä¸€ä¸ªè®°å½•è¿˜æ˜¯å¤šä¸ªè®°å½•ï¼Œå…¶å¼€é”€é€šå¸¸éƒ½æ˜¯ä¸€è‡´çš„ã€‚</li>\n</ul>\n"},{"title":"MySQLé«˜çº§-å‡½æ•°","tags":["tags"],"categories":"æ•°æ®åº“ MySQL","description":"# MySQLé«˜çº§-å‡½æ•°\n\n@(mysql)[procedure]\n\n## **æŸ¥çœ‹æ•°æ®åº“æ˜¯å¦æ”¯æŒå‡½æ•°** ï¼š\n``` SQL\nSHOW VARIABLES LIKE '%FUN%';\n```\n- **è‹¥ä¸ºoffï¼Œåˆ™éœ€è¦å¼€å¯**\n``` SQL\nSET GLOBAL log_bin_trust_function_creators = TRUE;\n```\n\n### **åˆ›å»ºå‡½æ•°çš„è¯­æ³•** ï¼š\n``","createDate":"2018-11-12 20:12:37","updateDate":"10/1/2021, 3:34:43 AM","body":"<h1 id=\"mysqlé«˜çº§-å‡½æ•°\">MySQLé«˜çº§-å‡½æ•°</h1>\n<p>@(mysql)[procedure]</p>\n<h2 id=\"æŸ¥çœ‹æ•°æ®åº“æ˜¯å¦æ”¯æŒå‡½æ•°-ï¼š\"><strong>æŸ¥çœ‹æ•°æ®åº“æ˜¯å¦æ”¯æŒå‡½æ•°</strong> ï¼š</h2>\n<pre><code class=\"hljs language-SQL\"><span class=\"hljs-keyword\">SHOW</span> VARIABLES <span class=\"hljs-keyword\">LIKE</span> <span class=\"hljs-string\">&#x27;%FUN%&#x27;</span>;\n</code></pre>\n<ul>\n<li><strong>è‹¥ä¸ºoffï¼Œåˆ™éœ€è¦å¼€å¯</strong><pre><code class=\"hljs language-SQL\"><span class=\"hljs-keyword\">SET</span> <span class=\"hljs-keyword\">GLOBAL</span> log_bin_trust_function_creators <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">TRUE</span>;\n</code></pre>\n</li>\n</ul>\n<h3 id=\"åˆ›å»ºå‡½æ•°çš„è¯­æ³•-ï¼š\"><strong>åˆ›å»ºå‡½æ•°çš„è¯­æ³•</strong> ï¼š</h3>\n<pre><code class=\"hljs language-SQL\"><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">FUNCTION</span> func_name(variable1, variable2 ...)\n<span class=\"hljs-keyword\">RETURNS</span> return_type\n<span class=\"hljs-keyword\">BEGIN</span>\n    ...\n<span class=\"hljs-keyword\">END</span>;\n\nDELIMITER <span class=\"hljs-operator\">/</span><span class=\"hljs-operator\">/</span>\n<span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">FUNCTION</span> func_add(a <span class=\"hljs-type\">INT</span>, b <span class=\"hljs-type\">INT</span>)\n<span class=\"hljs-keyword\">RETURNS</span> <span class=\"hljs-type\">INT</span>\n<span class=\"hljs-keyword\">BEGIN</span>\n    <span class=\"hljs-keyword\">RETURN</span> a <span class=\"hljs-operator\">+</span> b;\n<span class=\"hljs-keyword\">END</span>;\n<span class=\"hljs-operator\">/</span><span class=\"hljs-operator\">/</span>\n</code></pre>\n<p><img src=\"http://hellomrrs-imgs.oss-cn-shanghai.aliyuncs.com/18-11-12/68702030.jpg\" alt=\"enter image description here\"></p>\n<h2 id=\"å‡½æ•°çš„ç®¡ç†-ï¼š\"><strong>å‡½æ•°çš„ç®¡ç†</strong> ï¼š</h2>\n<ul>\n<li><strong>å‡½æ•°çš„ç®¡ç†ç±»ä¼¼äºå­˜å‚¨è¿‡ç¨‹</strong><h3 id=\"æŸ¥çœ‹å‡½æ•°\"><strong>æŸ¥çœ‹å‡½æ•°</strong></h3>\n<pre><code class=\"hljs language-SQL\"><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">FROM</span> mysql.proc;\n<span class=\"hljs-keyword\">SHOW</span> <span class=\"hljs-keyword\">FUNCTION</span> STATUS <span class=\"hljs-keyword\">WHERE</span> db <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;test&#x27;</span>;\n</code></pre>\n<img src=\"http://hellomrrs-imgs.oss-cn-shanghai.aliyuncs.com/18-11-12/68702030.jpg\" alt=\"enter image description here\"><h3 id=\"åˆ é™¤å‡½æ•°\"><strong>åˆ é™¤å‡½æ•°</strong></h3>\n<pre><code class=\"hljs language-SQL\"><span class=\"hljs-keyword\">DROP</span> <span class=\"hljs-keyword\">FUNCTION</span> IF <span class=\"hljs-keyword\">EXISTS</span> func_add;\n</code></pre>\n<h2 id=\"å®ä¾‹ï¼š\">å®ä¾‹ï¼š</h2>\n</li>\n</ul>\n<pre><code class=\"hljs language-SQL\"><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">TABLE</span> user_info (id <span class=\"hljs-type\">INT</span> UNSIGNED <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-keyword\">NULL</span> AUTO_INCREMENT <span class=\"hljs-keyword\">PRIMARY</span> KEY,\n                        user_name <span class=\"hljs-type\">VARCHAR</span>(<span class=\"hljs-number\">20</span>) <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-keyword\">NULL</span> <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-string\">&#x27;&#x27;</span>,\n                        user_pwd  <span class=\"hljs-type\">VARCHAR</span>(<span class=\"hljs-number\">20</span>) <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-keyword\">NULL</span> <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-string\">&#x27;&#x27;</span>\n                        )ENGINE <span class=\"hljs-operator\">=</span> INNODB CHARSET <span class=\"hljs-operator\">=</span> utf8;\n                         \n<span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">FUNCTION</span> func_login(name <span class=\"hljs-type\">VARCHAR</span>(<span class=\"hljs-number\">20</span>), pwd <span class=\"hljs-type\">VARCHAR</span>(<span class=\"hljs-number\">20</span>))\n<span class=\"hljs-keyword\">RETURNS</span> <span class=\"hljs-type\">VARCHAR</span>(<span class=\"hljs-number\">30</span>)\n<span class=\"hljs-keyword\">BEGIN</span>\n    <span class=\"hljs-keyword\">DECLARE</span> cnt <span class=\"hljs-type\">INT</span> <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-number\">0</span>;\n    <span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">count</span>(<span class=\"hljs-operator\">*</span>) <span class=\"hljs-keyword\">INTO</span> cnt <span class=\"hljs-keyword\">FROM</span> user_info <span class=\"hljs-keyword\">WHERE</span> user_name <span class=\"hljs-operator\">=</span> name;\n    IF cnt <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span> <span class=\"hljs-keyword\">THEN</span>\n        <span class=\"hljs-keyword\">RETURN</span> <span class=\"hljs-string\">&#x27;user not exists&#x27;</span>;\n    <span class=\"hljs-keyword\">END</span> IF;\n    <span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">count</span>(<span class=\"hljs-operator\">*</span>) <span class=\"hljs-keyword\">INTO</span> cnt <span class=\"hljs-keyword\">FROM</span> user_info <span class=\"hljs-keyword\">WHERE</span> user_name <span class=\"hljs-operator\">=</span> name <span class=\"hljs-keyword\">AND</span> user_pwd <span class=\"hljs-operator\">=</span> pwd;\n    IF cnt <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span> <span class=\"hljs-keyword\">THEN</span>\n        <span class=\"hljs-keyword\">RETURN</span> <span class=\"hljs-string\">&#x27;pwd input error&#x27;</span>;\n    <span class=\"hljs-keyword\">ELSE</span>\n        <span class=\"hljs-keyword\">RETURN</span> <span class=\"hljs-string\">&#x27;user login success&#x27;</span>;\n    <span class=\"hljs-keyword\">END</span> IF;\n<span class=\"hljs-keyword\">END</span>;\n<span class=\"hljs-operator\">/</span><span class=\"hljs-operator\">/</span>\n</code></pre>\n<p><img src=\"http://hellomrrs-imgs.oss-cn-shanghai.aliyuncs.com/18-11-12/35546849.jpg\" alt=\"enter image description here\"></p>\n"},{"title":"MySQLé«˜çº§-å­˜å‚¨è¿‡ç¨‹ç®¡ç†","tags":["MySQL","å­˜å‚¨è¿‡ç¨‹"],"categories":"MySQL","description":"# MySQLé«˜çº§-å­˜å‚¨è¿‡ç¨‹ç®¡ç†\n\n@(mysql)[procedure]\n\n- **æŸ¥çœ‹æ•°æ®åº“çš„å­˜å‚¨è¿‡ç¨‹** ï¼š\n``` SQL\nshow procedure status where db='test'\\G\n```\n- ![enter image description here](https://i.loli.net/2018/11/12/5be94f5043e82.png)\n\n- **æŸ¥","createDate":"2018-11-12 17:07:28","updateDate":"10/1/2021, 3:34:43 AM","body":"<h1 id=\"mysqlé«˜çº§-å­˜å‚¨è¿‡ç¨‹ç®¡ç†\">MySQLé«˜çº§-å­˜å‚¨è¿‡ç¨‹ç®¡ç†</h1>\n<p>@(mysql)[procedure]</p>\n<ul>\n<li><p><strong>æŸ¥çœ‹æ•°æ®åº“çš„å­˜å‚¨è¿‡ç¨‹</strong> ï¼š</p>\n<pre><code class=\"hljs language-SQL\"><span class=\"hljs-keyword\">show</span> <span class=\"hljs-keyword\">procedure</span> status <span class=\"hljs-keyword\">where</span> db<span class=\"hljs-operator\">=</span><span class=\"hljs-string\">&#x27;test&#x27;</span>\\G\n</code></pre>\n</li>\n<li><p><img src=\"https://i.loli.net/2018/11/12/5be94f5043e82.png\" alt=\"enter image description here\"></p>\n</li>\n<li><p><strong>æŸ¥çœ‹å½“å‰æ•°æ®åº“ä¸‹çš„å­˜å‚¨è¿‡ç¨‹</strong> ï¼š</p>\n<pre><code class=\"hljs language-SQL\"><span class=\"hljs-keyword\">select</span> specific_name <span class=\"hljs-keyword\">from</span> mysql.proc;\\G\n</code></pre>\n</li>\n<li><p><img src=\"https://i.loli.net/2018/11/12/5be94ee471819.png\" alt=\"enter image description here\"></p>\n</li>\n<li><p><strong>æŸ¥çœ‹å­˜å‚¨è¿‡ç¨‹çš„å†…å®¹</strong> ï¼š</p>\n<pre><code class=\"hljs language-SQL\"><span class=\"hljs-keyword\">select</span> specific_name, body <span class=\"hljs-keyword\">from</span> mysql.proc\\G\n</code></pre>\n</li>\n<li><p><img src=\"https://i.loli.net/2018/11/12/5be94f5050259.png\" alt=\"enter image description here\"></p>\n</li>\n<li><p><strong>æŸ¥çœ‹æŸä¸ªå­˜å‚¨è¿‡ç¨‹çš„å†…å®¹</strong>ï¼š</p>\n<pre><code class=\"hljs language-SQL\"><span class=\"hljs-keyword\">select</span> specific_name, body <span class=\"hljs-keyword\">from</span> mysql.proc <span class=\"hljs-keyword\">where</span> specific_name <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;load_t&#x27;</span>\\G\n</code></pre>\n</li>\n<li><p><img src=\"https://i.loli.net/2018/11/12/5be94f504e883.png\" alt=\"enter image description here\"></p>\n</li>\n<li><p><strong>åˆ é™¤æŸä¸ªå­˜å‚¨è¿‡ç¨‹</strong></p>\n<pre><code class=\"hljs language-SQL\"><span class=\"hljs-keyword\">drop</span> <span class=\"hljs-keyword\">procedure</span> if <span class=\"hljs-keyword\">exists</span> load_t;\n</code></pre>\n</li>\n<li><p><img src=\"https://i.loli.net/2018/11/12/5be94f504cd4b.png\" alt=\"enter image description here\"></p>\n</li>\n</ul>\n"},{"title":"Node.js-åŸºç¡€","tags":["Node.js"],"categories":"Node.js","description":"# [Buffer](http://nodejs.cn/api/buffer.html)\nJSè‡ªèº«åªèƒ½åªæœ‰å­—ç¬¦ä¸²æ•°æ®ç±»å‹ï¼Œæ²¡æœ‰äºŒè¿›åˆ¶æ•°æ®ç±»å‹ï¼Œå› æ­¤nodejsæä¾›äº†ä¸€ä¸ªä¸stringå¯¹ç­‰çš„å…¨å±€æ„é€ å‡½æ•°Bufferæ¥æä¾›å¯¹äºŒè¿›åˆ¶æ•°æ®çš„æ“ä½œ\n- `Buffer.form` åˆ›å»ºä¸€ä¸ªbuffer\n    ``` javascript\n    Buffer.form([ 0x68, 0x65, 0x6","createDate":"2020-01-14 14:11:45","updateDate":"10/1/2021, 3:34:43 AM","body":"<h1 id=\"buffer\"><a href=\"http://nodejs.cn/api/buffer.html\">Buffer</a></h1>\n<p>JSè‡ªèº«åªèƒ½åªæœ‰å­—ç¬¦ä¸²æ•°æ®ç±»å‹ï¼Œæ²¡æœ‰äºŒè¿›åˆ¶æ•°æ®ç±»å‹ï¼Œå› æ­¤nodejsæä¾›äº†ä¸€ä¸ªä¸stringå¯¹ç­‰çš„å…¨å±€æ„é€ å‡½æ•°Bufferæ¥æä¾›å¯¹äºŒè¿›åˆ¶æ•°æ®çš„æ“ä½œ</p>\n<ul>\n<li><code>Buffer.form</code> åˆ›å»ºä¸€ä¸ªbuffer<pre><code class=\"hljs language-javascript\"><span class=\"hljs-title class_\">Buffer</span>.<span class=\"hljs-title function_\">form</span>([ <span class=\"hljs-number\">0x68</span>, <span class=\"hljs-number\">0x65</span>, <span class=\"hljs-number\">0x6c</span>, <span class=\"hljs-number\">0x6c</span>, <span class=\"hljs-number\">0x6f</span> ]).<span class=\"hljs-title function_\">toString</span>()\n<span class=\"hljs-comment\">// hello</span>\n</code></pre>\n</li>\n<li><code>Burrer</code>ä¸<code>String</code>çš„ä¸€ä¸ªé‡è¦åŒºåˆ«å°±æ˜¯å­—ç¬¦ä¸²æ—¶åªè¯»çš„ï¼Œå¹¶ä¸”å¯¹äºå­—ç¬¦ä¸²çš„ä»»ä½•ä¿®æ”¹å¾—åˆ°çš„éƒ½æ˜¯ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œæºå­—ç¬¦ä¸²ä¿æŒä¸å˜ã€‚è‡³äº<code>Buffer</code>ï¼Œæ›´åƒæ˜¯å¯ä»¥åšæŒ‡é’ˆæ“ä½œçš„Cè¯­è¨€æ•°ç»„ï¼Œä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨<code>[index]</code>æ–¹å¼ç›´æ¥ä¿®æ”¹æŸä¸ªä½ç½®çš„å­—èŠ‚</li>\n</ul>\n<h1 id=\"stream\"><a href=\"http://nodejs.cn/api/stream.html\">Stream</a></h1>\n<ul>\n<li>å½“å†…å­˜ä¸­æ— æ³•ä¸€æ¬¡è£…ä¸‹éœ€è¦å¤„ç†çš„æ•°æ®æ—¶ï¼Œæˆ–è€…ä¸€è¾¹è¯»å–ä¸€è¾¹å¤„ç†æ›´åŠ é«˜æ•ˆæ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°æ•°æ®æµã€‚NodeJSä¸­é€šè¿‡å„ç§<code>Stream</code>æ¥æä¾›å¯¹æ•°æ®æµçš„æ“ä½œã€‚<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">const</span> rs = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;fs&#x27;</span>);\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">copy</span> (src, dst) {\n    fs.<span class=\"hljs-title function_\">createReadStream</span>(src).<span class=\"hljs-title function_\">pipe</span>(fs.<span class=\"hljs-title function_\">createWriteSreeam</span>(dst));\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">main</span> (argv) {\n    <span class=\"hljs-title function_\">copy</span>(argv[<span class=\"hljs-number\">0</span>], argv[<span class=\"hljs-number\">1</span>])\n}\n\n<span class=\"hljs-title function_\">main</span>(process.<span class=\"hljs-property\">argv</span>.<span class=\"hljs-title function_\">slice</span>(<span class=\"hljs-number\">2</span>));\n</code></pre>\n</li>\n<li><code>Stream</code>åŸºäºäº‹ä»¶æœºåˆ¶å·¥ä½œï¼Œæ‰€æœ‰<code>Stream</code>çš„å®ä¾‹éƒ½ç»§æ‰¿äºNodeJSæä¾›çš„<a href=\"http://nodejs.cn/api/events.html#events_class_eventemitter\"><code>EventEmitter</code></a></li>\n</ul>\n<h1 id=\"file-system\"><a href=\"http://nodejs.cn/api/fs.html\">File System</a></h1>\n<p>NodeJSé€šè¿‡<code>fs</code>å†…ç½®æ¨¡å—æä¾›å¯¹æ–‡ä»¶çš„æ“ä½œï¼Œ<code>fs</code>æ¨¡å—æä¾›çš„APIåŸºæœ¬ä¸Šå¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»ï¼š</p>\n<ul>\n<li>æ–‡ä»¶å±æ€§è¯»\nå…¶ä¸­å¸¸è§çš„æœ‰<code>fs.state</code> <code>fs.chmod</code> <code>fs.chown</code></li>\n<li>æ–‡ä»¶å±æ€§å†™\nå…¶ä¸­å¸¸è§çš„æœ‰<code>fs.readFile</code> <code>fs.readdir</code> <code>fs.writeFile</code> <code>fs.mkdir</code></li>\n<li>åº•å±‚æ–‡ä»¶æ“ä½œ\nå…¶ä¸­å¸¸è§çš„æ“ä½œæœ‰<code>fs.open</code> <code>fs.read</code> <code>fs.write</code> <code>fs.close</code>\næ‰€æœ‰çš„<code>fs</code>æ¨¡å—APIçš„å›è°ƒå‚æ•°éƒ½æœ‰ä¸¤ä¸ªï¼Œç¬¬ä¸€ä¸ªå‚æ•°åœ¨æœ‰é”™è¯¯å‘ç”Ÿæ—¶ç­‰äºå¼‚å¸¸å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°å§‹ç»ˆç”¨äºè¿”å›APIæ–¹æ³•æ‰§è¡Œç»“æœ<pre><code class=\"hljs language-javascript\">fs.<span class=\"hljs-title function_\">readFile</span>(pathname, <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">err, data</span>) {\n    <span class=\"hljs-keyword\">if</span> (err) {}\n    <span class=\"hljs-keyword\">else</span> {}\n})\n</code></pre>\n</li>\n</ul>\n<h2 id=\"path\"><a href=\"http://nodejs.cn/api/path.html\">Path</a></h2>\n<p>æ“ä½œæ–‡ä»¶æ—¶éš¾å…ä¸ä¸æ–‡ä»¶è·¯å¾„æ‰“äº¤é“ã€‚NodeJSæä¾›äº†<code>path</code>å†…ç½®æ¨¡å—æ¥ç®€åŒ–è·¯å¾„ç›¸å…³æ“ä½œï¼Œå¹¶æå‡ä»£ç å¯è¯»æ€§ã€‚</p>\n<ul>\n<li><code>path.normalize</code>\n  å°†ä¼ å…¥çš„å‚æ•°è½¬ä¸ºæ ‡å‡†è·¯å¾„ï¼Œå…·ä½“è®²çš„è¯ï¼Œé™¤äº†è§£æè·¯å¾„ä¸­çš„<code>.</code>ä¸<code>..</code>å¤–ï¼Œè¿˜èƒ½å»æ‰å¤šä½™çš„æ–œæ ã€‚å¦‚æœæœ‰ç¨‹åºéœ€è¦ä½¿ç”¨è·¯å¾„ä½œä¸ºæŸäº›æ•°æ®çš„ç´¢å¼•ï¼Œä½†åˆå…è®¸ç”¨æˆ·éšæ„è¾“å…¥è·¯å¾„æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨è¯¥æ–¹æ³•ä¿è¯è·¯å¾„çš„å”¯ä¸€æ€§ã€‚<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">const</span> cache = {}\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">store</span> () {\n    cache[path.<span class=\"hljs-title function_\">normalize</span>(key)] = value\n}\n\n<span class=\"hljs-title function_\">store</span>(<span class=\"hljs-string\">&#x27;foo/bar&#x27;</span>, <span class=\"hljs-number\">1</span>);\n<span class=\"hljs-title function_\">store</span>(<span class=\"hljs-string\">&#x27;foo//baz//../bar&#x27;</span>, <span class=\"hljs-number\">2</span>);\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(cache);  <span class=\"hljs-comment\">// =&gt; { &quot;foo/bar&quot;: 2 }</span>\n</code></pre>\n  æ ‡å‡†åŒ–ä¹‹åçš„è·¯å¾„é‡Œçš„æ–œæ åœ¨Windowsç³»ç»Ÿä¸‹æ˜¯\\ï¼Œè€Œåœ¨Linuxç³»ç»Ÿä¸‹æ˜¯/ã€‚å¦‚æœæƒ³ä¿è¯ä»»ä½•ç³»ç»Ÿä¸‹éƒ½ä½¿ç”¨/ä½œä¸ºè·¯å¾„åˆ†éš”ç¬¦çš„è¯ï¼Œéœ€è¦ç”¨<code>.replace(/\\\\/g, &#39;/&#39;)</code>å†æ›¿æ¢ä¸€ä¸‹æ ‡å‡†è·¯å¾„ã€‚</li>\n<li><code>path.join</code>\n  å°†ä¼ å…¥çš„å¤šä¸ªè·¯å¾„æ‹¼æ¥ä¸ºæ ‡å‡†è·¯å¾„ã€‚è¯¥æ–¹æ³•å¯é¿å…æ‰‹å·¥æ‹¼æ¥è·¯å¾„å­—ç¬¦ä¸²çš„ç¹çï¼Œå¹¶ä¸”èƒ½åœ¨ä¸åŒç³»ç»Ÿä¸‹æ­£ç¡®ä½¿ç”¨ç›¸åº”çš„è·¯å¾„åˆ†éš”ç¬¦ã€‚<pre><code class=\"hljs language-javascript\">path.<span class=\"hljs-title function_\">join</span>(<span class=\"hljs-string\">&#x27;foo/&#x27;</span>, <span class=\"hljs-string\">&#x27;baz/&#x27;</span>, <span class=\"hljs-string\">&#x27;../bar&#x27;</span>); <span class=\"hljs-comment\">// =&gt; &quot;foo/bar&quot;</span>\n</code></pre>\n</li>\n<li><code>path.extname</code>\n  å½“æˆ‘ä»¬éœ€è¦æ ¹æ®ä¸åŒæ–‡ä»¶æ‰©å±•ååšä¸åŒæ“ä½œæ—¶ï¼Œè¯¥æ–¹æ³•å°±æ˜¾å¾—å¾ˆå¥½ç”¨ã€‚<pre><code class=\"hljs language-javascript\">path.<span class=\"hljs-title function_\">extname</span>(<span class=\"hljs-string\">&#x27;foo/bar.js&#x27;</span>); <span class=\"hljs-comment\">// =&gt; &quot;.js&quot;</span>\n</code></pre>\n<h2 id=\"éå†ç›®å½•\">éå†ç›®å½•</h2>\n``` javascript\nconst fs = require(&#39;fs&#39;);\nconst path = require(&#39;path&#39;);</li>\n</ul>\n<p>function travel (dir, callback) {\n    fs.readdirSync(dir).forEach(file =&gt; {\n        let pathname = path.join(dir, file)\n        if (fs.statSync(pathname).isDirectory())\n            travel(pathname, callback)\n        else callback(pathname)\n    })\n}</p>\n<p>travel(__dirname, file =&gt; {\n    console.log(file)\n})</p>\n<p>// c:\\Users\\mrrs8\\Desktop\\desktop.ini\n// c:\\Users\\mrrs8\\Desktop\\Postman.lnk\n// c:\\Users\\mrrs8\\Desktop\\test.js\n// c:\\Users\\mrrs8\\Desktop\\å¾®ä¿¡å¼€å‘è€…å·¥å…·.lnk</p>\n<pre><code># æ–‡æœ¬ç¼–ç \nä½¿ç”¨NodeJSç¼–å†™å‰ç«¯å·¥å…·æ—¶ï¼Œæ“ä½œå¾—æœ€å¤šçš„æ˜¯æ–‡æœ¬æ–‡ä»¶ï¼Œå› æ­¤ä¹Ÿå°±æ¶‰åŠåˆ°äº†æ–‡ä»¶ç¼–ç çš„å¤„ç†é—®é¢˜ã€‚æˆ‘ä»¬å¸¸ç”¨çš„æ–‡æœ¬ç¼–ç æœ‰`UTF8`å’Œ`GBK`ä¸¤ç§ï¼Œå¹¶ä¸”`UTF8`æ–‡ä»¶è¿˜å¯èƒ½å¸¦æœ‰`BOM`ã€‚åœ¨è¯»å–ä¸åŒç¼–ç çš„æ–‡æœ¬æ–‡ä»¶æ—¶ï¼Œéœ€è¦å°†æ–‡ä»¶å†…å®¹è½¬æ¢ä¸ºJSä½¿ç”¨çš„`UTF8`ç¼–ç å­—ç¬¦ä¸²åæ‰èƒ½æ­£å¸¸å¤„ç†ã€‚\n## BOMçš„ç§»é™¤\nBOMç”¨äºæ ‡è®°ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä½¿ç”¨`Unicode`ç¼–ç ï¼Œå…¶æœ¬èº«æ˜¯ä¸€ä¸ª`Unicode`å­—ç¬¦`ï¼ˆ&quot;\\uFEFF&quot;ï¼‰`ï¼Œä½äºæ–‡æœ¬æ–‡ä»¶å¤´éƒ¨ã€‚åœ¨ä¸åŒçš„`Unicode`ç¼–ç ä¸‹ï¼Œ`BOM`å­—ç¬¦å¯¹åº”çš„äºŒè¿›åˆ¶å­—èŠ‚å¦‚ä¸‹ï¼š\n``` javascript\n    Bytes      Encoding\n</code></pre>\n"},{"title":"Python-requestsåº“çš„ä½¿ç”¨","tags":["Python"],"categories":"Python","description":"# Python-requestsåº“çš„ä½¿ç”¨\nurllib çš„ç”¨æ³•ä¸­æœ‰ä¸€äº›ä¸æ–¹ä¾¿çš„åœ°æ–¹ï¼Œæ¯”å¦‚å¤„ç†ç½‘é¡µéªŒè¯å’ŒCooki es æ—¶ï¼Œéœ€è¦å†™ Opener å’Œ Handler æ¥å¤„ç†ã€‚ ä¸ºäº†æ›´åŠ æ–¹ä¾¿åœ°å®ç°è¿™äº›æ“ä½œï¼Œå°±æœ‰äº†æ›´ä¸ºå¼ºå¤§çš„åº“requests ï¼Œæœ‰äº†å®ƒ ï¼Œ Cookies ã€ç™»å½•éªŒè¯ã€ä»£ç†è®¾ç½®ç­‰æ“ä½œéƒ½å˜å¾—æä¸ºç®€å•ã€‚\n\n## ä¸€åˆ‡ä»¥å®˜ç½‘ä¸ºä¸»\nhttp://docs.python-requests.o","createDate":"2018-11-14 11:41:55","updateDate":"10/1/2021, 3:34:43 AM","body":"<h1 id=\"python-requestsåº“çš„ä½¿ç”¨\">Python-requestsåº“çš„ä½¿ç”¨</h1>\n<p>urllib çš„ç”¨æ³•ä¸­æœ‰ä¸€äº›ä¸æ–¹ä¾¿çš„åœ°æ–¹ï¼Œæ¯”å¦‚å¤„ç†ç½‘é¡µéªŒè¯å’ŒCooki es æ—¶ï¼Œéœ€è¦å†™ Opener å’Œ Handler æ¥å¤„ç†ã€‚ ä¸ºäº†æ›´åŠ æ–¹ä¾¿åœ°å®ç°è¿™äº›æ“ä½œï¼Œå°±æœ‰äº†æ›´ä¸ºå¼ºå¤§çš„åº“requests ï¼Œæœ‰äº†å®ƒ ï¼Œ Cookies ã€ç™»å½•éªŒè¯ã€ä»£ç†è®¾ç½®ç­‰æ“ä½œéƒ½å˜å¾—æä¸ºç®€å•ã€‚</p>\n<h2 id=\"ä¸€åˆ‡ä»¥å®˜ç½‘ä¸ºä¸»\">ä¸€åˆ‡ä»¥å®˜ç½‘ä¸ºä¸»</h2>\n<p><a href=\"http://docs.python-requests.org/en/master/\">http://docs.python-requests.org/en/master/</a></p>\n<h2 id=\"åŸºæœ¬ç”¨æ³•\">åŸºæœ¬ç”¨æ³•</h2>\n<h3 id=\"ä¸€ä¸ªç®€å•çš„ä¾‹å­\">ä¸€ä¸ªç®€å•çš„ä¾‹å­</h3>\n<p>urllibåº“ä¸­çš„ urlopen()æ³•å®é™…ä¸Šæ˜¯ä»¥GETæ–¹å¼è¯·æ±‚ç½‘é¡µï¼Œè€Œrequestsä¸­ç›¸åº”çš„æ–¹æ³•å°±æ˜¯get()\næ–¹æ³•ã€‚</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> requests\n\nresponse = requests.get(<span class=\"hljs-string\">&#x27;https://www.baidu.com&#x27;</span>)\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-built_in\">type</span>(response))\n<span class=\"hljs-built_in\">print</span>(response.status_code)\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-built_in\">type</span>(response.text))\n<span class=\"hljs-built_in\">print</span>(response.text)\n<span class=\"hljs-built_in\">print</span>(response.cookies)\n</code></pre>\n<p><img src=\"https://t1.picb.cc/uploads/2018/11/14/JShz6r.png\" alt=\"enter image description here\"></p>\n<h3 id=\"getè¯·æ±‚\">GETè¯·æ±‚</h3>\n<h4 id=\"åŸºæœ¬å®ä¾‹\">åŸºæœ¬å®ä¾‹</h4>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> requests\n\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&#x27;simple test&#x27;</span>)\nresponse = requests.get(<span class=\"hljs-string\">&#x27;https://httpbin.org/get&#x27;</span>)\n<span class=\"hljs-built_in\">print</span>(response.text)\n\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&#x27;params test&#x27;</span>)\ndata = {<span class=\"hljs-string\">&#x27;name&#x27;</span>: <span class=\"hljs-string\">&#x27;germey&#x27;</span>, <span class=\"hljs-string\">&#x27;age&#x27;</span>: <span class=\"hljs-number\">22</span>}\nresponse = requests.get(<span class=\"hljs-string\">&#x27;https://httpbin.org/get&#x27;</span>, params=data)\n<span class=\"hljs-built_in\">print</span>(response.text)\n\n<span class=\"hljs-comment\"># å°†jsonæ ¼å¼è§£æä¸ºå­—å…¸æ ¼å¼</span>\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&#x27;json() test&#x27;</span>)\nresponse = requests.get(<span class=\"hljs-string\">&#x27;https://httpbin.org/get&#x27;</span>)\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-built_in\">type</span>(response.text))\n<span class=\"hljs-built_in\">print</span>(response.json())\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-built_in\">type</span>(response.json()))\n</code></pre>\n<p><img src=\"https://t1.picb.cc/uploads/2018/11/14/JShDOJ.png\" alt=\"enter image description here\">\n<img src=\"https://t1.picb.cc/uploads/2018/11/14/JShYg1.png\" alt=\"enter image description here\">\n<img src=\"https://t1.picb.cc/uploads/2018/11/14/JShEP0.png\" alt=\"enter image description here\"></p>\n<h4 id=\"æŠ“å–ç½‘é¡µ\">æŠ“å–ç½‘é¡µ</h4>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> requests, re\n\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&#x27;æŠ“å–ç½‘é¡µæµ‹è¯•&#x27;</span>)\nheaders = {<span class=\"hljs-string\">&#x27;User-Agent&#x27;</span>: <span class=\"hljs-string\">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:63.0) Gecko/20100101 Firefox/63.0&#x27;</span>}\nresponse = requests.get(<span class=\"hljs-string\">&#x27;https://www.zhihu.com/explore&#x27;</span>, headers = headers)\npattern = re.<span class=\"hljs-built_in\">compile</span>(<span class=\"hljs-string\">&#x27;explore-feed.*?question_link.*?&gt;(.*?)&lt;/a&gt;&#x27;</span>, re.S)\ntitle = re.findall(pattern, response.text)\n<span class=\"hljs-built_in\">print</span>(title)\n</code></pre>\n<p><img src=\"https://t1.picb.cc/uploads/2018/11/14/JSvydu.png\" alt=\"enter image description here\"></p>\n<h4 id=\"æŠ“å–äºŒè¿›åˆ¶æ•°æ®\">æŠ“å–äºŒè¿›åˆ¶æ•°æ®</h4>\n<p>å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘è¿™äº›æ–‡ä»¶æœ¬è´¨ä¸Šéƒ½æ˜¯ç”±äºŒè¿›åˆ¶ç ç»„æˆçš„ï¼Œç”±äºæœ‰ç‰¹å®šçš„ä¿å­˜æ ¼å¼å’Œå¯¹åº”çš„è§£ææ–¹å¼ï¼Œ æˆ‘ä»¬æ‰å¯ä»¥çœ‹åˆ°è¿™äº›å½¢å½¢è‰²è‰²çš„å¤šåª’ä½“ ã€‚ æ‰€ä»¥ï¼Œæƒ³è¦æŠ“å–å®ƒä»¬ï¼Œå°±è¦æ‹¿åˆ°å®ƒä»¬çš„äºŒè¿›åˆ¶ç ã€‚</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> requests\n\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&#x27;æŠ“å–äºŒè¿›åˆ¶æ•°æ®æµ‹è¯•&#x27;</span>)\nresponse = requests.get(<span class=\"hljs-string\">&#x27;https://github.com/favicon.ico&#x27;</span>)\n<span class=\"hljs-built_in\">print</span>(response.text)\n<span class=\"hljs-built_in\">print</span>(response.content)  <span class=\"hljs-comment\"># Content of the response, in bytes</span>\n<span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(<span class=\"hljs-string\">&#x27;favicon.ico&#x27;</span>, <span class=\"hljs-string\">&#x27;wb&#x27;</span>) <span class=\"hljs-keyword\">as</span> f:\n    f.write(response.content)\n</code></pre>\n<p><img src=\"https://t1.picb.cc/uploads/2018/11/14/JSvJuD.png\" alt=\"enter image description here\"></p>\n<h4 id=\"æ·»åŠ headers\">æ·»åŠ headers</h4>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&#x27;æ·»åŠ headersæµ‹è¯•&#x27;</span>)\nheaders = {<span class=\"hljs-string\">&#x27;User-Agent&#x27;</span>: <span class=\"hljs-string\">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:63.0) Gecko/20100101 Firefox/63.0&#x27;</span>}\nresponse = requests.get(<span class=\"hljs-string\">&#x27;https://www.zhihu.com/explore&#x27;</span>, headers = headers)\n<span class=\"hljs-built_in\">print</span>(response.text)\n</code></pre>\n<p><img src=\"https://t1.picb.cc/uploads/2018/11/14/JSvgsi.png\" alt=\"enter image description here\"></p>\n<h3 id=\"postè¯·æ±‚\">POSTè¯·æ±‚</h3>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> requests\n\ndata = {<span class=\"hljs-string\">&#x27;name&#x27;</span>: <span class=\"hljs-string\">&#x27;germy&#x27;</span>, <span class=\"hljs-string\">&#x27;age&#x27;</span>: <span class=\"hljs-string\">&#x27;22&#x27;</span>}\nresponse = requests.post(<span class=\"hljs-string\">&#x27;https://httpbin.org/post&#x27;</span>, data=data)\n<span class=\"hljs-built_in\">print</span>(response.text)\n</code></pre>\n<p><img src=\"https://t1.picb.cc/uploads/2018/11/14/JSvt6L.png\" alt=\"enter image description here\"></p>\n<h3 id=\"å“åº”\">å“åº”</h3>\n<p>å‘é€è¯·æ±‚åï¼Œå¾—åˆ°çš„è‡ªç„¶å°±æ˜¯å“åº” ã€‚ åœ¨ä¸Šé¢çš„å®ä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ text å’Œ content è·å–äº†å“åº”çš„å†…å®¹ã€‚ æ­¤å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šå±æ€§å’Œæ–¹æ³•å¯ä»¥ç”¨æ¥è·å–å…¶ä»–ä¿¡æ¯ï¼Œæ¯”å¦‚çŠ¶æ€ç ã€å“åº”å¤´ã€ Cookies ç­‰ã€‚</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> requests\n\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&#x27;å“åº”æµ‹è¯•&#x27;</span>)\nheaders = {<span class=\"hljs-string\">&#x27;User-Agent&#x27;</span>: <span class=\"hljs-string\">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:63.0) Gecko/20100101 Firefox/63.0&#x27;</span>}\nresponse = requests.get(<span class=\"hljs-string\">&#x27;https://www.jianshu.com&#x27;</span>, headers = headers)\n<span class=\"hljs-built_in\">print</span>(response.headers)\n<span class=\"hljs-built_in\">print</span>(response.cookies)\n<span class=\"hljs-comment\"># print(response.status_code)</span>\nexit() <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> response.status_code == requests.codes.ok <span class=\"hljs-keyword\">else</span> <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&#x27;request successfully&#x27;</span>)\n<span class=\"hljs-built_in\">print</span>(response.content)\n<span class=\"hljs-built_in\">print</span>(response.text)\n</code></pre>\n<p><img src=\"https://t1.picb.cc/uploads/2018/11/14/JSx5ST.png\" alt=\"enter image description here\"></p>\n<h2 id=\"é«˜çº§ç”¨æ³•\">é«˜çº§ç”¨æ³•</h2>\n<h3 id=\"æ–‡ä»¶ä¸Šä¼ \">æ–‡ä»¶ä¸Šä¼ </h3>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> requests\n\nfiles = {<span class=\"hljs-string\">&#x27;file&#x27;</span>: <span class=\"hljs-built_in\">open</span>(<span class=\"hljs-string\">&#x27;favicon.ico&#x27;</span>, <span class=\"hljs-string\">&#x27;rb&#x27;</span>)}\nresponse = requests.post(<span class=\"hljs-string\">&#x27;https://httpbin.org/post&#x27;</span>, files = files)\n<span class=\"hljs-built_in\">print</span>(response.text)\n</code></pre>\n<p><img src=\"https://t1.picb.cc/uploads/2018/11/14/JSxvT1.png\" alt=\"enter image description here\"></p>\n<h3 id=\"ä¼šè¯ç»´æŒ\">ä¼šè¯ç»´æŒ</h3>\n<p>åœ¨ requests ä¸­ï¼Œå¦‚æœç›´æ¥åˆ©ç”¨ get()ã€post()ç­‰æ–¹æ³•çš„ç¡®å¯ä»¥åšåˆ°æ¨¡æ‹Ÿç½‘é¡µçš„è¯·æ±‚ï¼Œä½†æ˜¯è¿™å®é™…ä¸Šæ˜¯ç›¸å½“äºä¸åŒçš„ä¼šè¯ï¼Œä¹Ÿå°±æ˜¯è¯´ç›¸å½“äºç”¨äº†ä¸¤ä¸ªæµè§ˆå™¨æ‰“å¼€äº†ä¸åŒçš„é¡µé¢ï¼Œå…¶å®è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸»è¦æ–¹æ³•å°±æ˜¯ç»´æŒåŒä¸€ä¸ªä¼šè¯ ï¼Œ ä¹Ÿå°±æ˜¯ç›¸å½“äºæ‰“å¼€ä¸€ä¸ªæ–°çš„æµè§ˆå™¨é€‰é¡¹å¡è€Œä¸æ˜¯æ–°å¼€ä¸€ä¸ªæµè§ˆå™¨ ã€‚ ä½†æ˜¯åˆä¸æƒ³æ¯æ¬¡è®¾ç½® cookies ï¼Œé‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™æ—¶å€™å°±æœ‰äº†æ–°çš„åˆ©å™¨--Session å¯¹è±¡ ã€‚åˆ©ç”¨å®ƒï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°ç»´æŠ¤ä¸€ä¸ªä¼šè¯ï¼Œè€Œä¸”ä¸ç”¨æ‹…å¿ƒcookiesçš„é—®é¢˜ï¼Œå®ƒä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨å¤„ç†å¥½ã€‚åˆ©ç”¨ Session ï¼Œå¯ä»¥åšåˆ°æ¨¡æ‹ŸåŒä¸€ä¸ªä¼šè¯è€Œä¸ç”¨æ‹…å¿ƒ Cookies çš„é—®é¢˜ã€‚ å®ƒé€šå¸¸ç”¨äºæ¨¡æ‹Ÿç™»å½•æˆåŠŸä¹‹åå†è¿›è¡Œä¸‹ä¸€æ­¥çš„æ“ä½œã€‚</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> requests\n\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&#x27;sessionæµ‹è¯•&#x27;</span>)\nsession = requests.Session()\nsession.get(<span class=\"hljs-string\">&#x27;https://httpbin.org/cookies/set/number/123456789&#x27;</span>)\nresponse = session.get(<span class=\"hljs-string\">&#x27;https://httpbin.org/cookies&#x27;</span>)\n<span class=\"hljs-built_in\">print</span>(response.text)\n</code></pre>\n<p><img src=\"https://t1.picb.cc/uploads/2018/11/14/JSLtir.png\" alt=\"enter image description here\"></p>\n<h3 id=\"sslè¯ä¹¦éªŒè¯\">SSLè¯ä¹¦éªŒè¯</h3>\n<p>å¦‚æœè¯·æ±‚ä¸€ä¸ª HTTPS ç«™ç‚¹ï¼Œä½†æ˜¯è¯ä¹¦éªŒè¯é”™è¯¯çš„é¡µé¢æ—¶ï¼Œå°±ä¼šæŠ¥è¿™æ ·çš„é”™è¯¯ï¼Œé‚£ä¹ˆå¦‚ä½•é¿å…è¿™ä¸ªé”™è¯¯å‘¢ï¼Ÿå¾ˆç®€å•ï¼ŒæŠŠ verify å‚æ•°è®¾ç½®ä¸ºFalse å³å¯ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªæœ¬åœ°è¯ä¹¦ç”¨ä½œå®¢æˆ·ç«¯è¯ä¹¦ï¼Œè¿™å¯ä»¥æ˜¯å•ä¸ªæ–‡ä»¶ï¼ˆåŒ…å«å¯†é’¥å’Œè¯ä¹¦ï¼‰æˆ–ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªæ–‡ä»¶è·¯å¾„çš„å…ƒç»„ã€‚</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> requests\n<span class=\"hljs-keyword\">import</span> logging\n<span class=\"hljs-keyword\">from</span> requests.packages <span class=\"hljs-keyword\">import</span> urllib3\n\nurllib3.disable_warnings()  <span class=\"hljs-comment\"># å¿½ç•¥è­¦å‘Š</span>\nlogging.captureWarnings(true)  <span class=\"hljs-comment\"># æ•è·è­¦å‘Š</span>\nresponse = requests.get(url, **verify = false**)  <span class=\"hljs-comment\"># è®¾ç½®verify</span>\nresponse = requests.get(url, cert = (crt_path, key_path))  <span class=\"hljs-comment\"># è®¾ç½®è¯ä¹¦æ–‡ä»¶åœ°å€</span>\n<span class=\"hljs-built_in\">print</span>(response)\n</code></pre>\n<h3 id=\"ä»£ç†è®¾ç½®\">ä»£ç†è®¾ç½®</h3>\n<p>å¯¹äºæŸäº›ç½‘ç«™ï¼Œåœ¨æµ‹è¯•çš„æ—¶å€™è¯·æ±‚å‡ æ¬¡ ï¼Œ èƒ½æ­£å¸¸è·å–å†…å®¹ã€‚ ä½†æ˜¯ä¸€æ—¦å¼€å§‹å¤§è§„æ¨¡çˆ¬å–ï¼Œå¯¹äºå¤§è§„æ¨¡ä¸”é¢‘ç¹çš„è¯·æ±‚ï¼Œç½‘ç«™å¯èƒ½ä¼šå¼¹å‡ºéªŒè¯ç ï¼Œæˆ–è€…è·³è½¬åˆ°ç™»å½•è®¤è¯é¡µé¢ ï¼Œ æ›´ç”šè€…å¯èƒ½ä¼šç›´æ¥å°ç¦å®¢æˆ·ç«¯çš„ IP ï¼Œå¯¼è‡´ä¸€å®šæ—¶é—´æ®µå†…æ— æ³•è®¿é—® ã€‚é‚£ä¹ˆï¼Œä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µå‘ç”Ÿï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ä»£ç†æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿™å°±éœ€è¦ç”¨åˆ° proxies å‚æ•°ã€‚</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> requests\n\nproxies = {<span class=\"hljs-string\">&#x27;http&#x27;</span>: <span class=\"hljs-string\">&#x27;...&#x27;</span>\n           <span class=\"hljs-string\">&#x27;https&#x27;</span>: <span class=\"hljs-string\">&#x27;...&#x27;</span>\n           ...\n           }\nresponse = requests.get(url, proxies = proxies)\n</code></pre>\n<h3 id=\"è¶…æ—¶è®¾ç½®\">è¶…æ—¶è®¾ç½®</h3>\n<p>åœ¨æœ¬æœºç½‘ç»œçŠ¶å†µä¸å¥½æˆ–è€…æœåŠ¡å™¨ç½‘ç»œå“åº”å¤ªæ…¢ç”šè‡³æ— å“åº”æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šç­‰å¾…ç‰¹åˆ«ä¹…çš„æ—¶é—´æ‰å¯èƒ½æ”¶åˆ°å“åº”ï¼Œç”šè‡³åˆ°æœ€åæ”¶ä¸åˆ°å“åº”è€ŒæŠ¥é”™ã€‚ ä¸ºäº†é˜²æ­¢æœåŠ¡å™¨ä¸èƒ½åŠæ—¶å“åº”ï¼Œåº”è¯¥è®¾ç½®ä¸€ä¸ªè¶…æ—¶æ—¶é—´ ï¼Œå³è¶…è¿‡äº†è¿™ä¸ªæ—¶é—´è¿˜æ²¡æœ‰å¾—åˆ°å“åº”ï¼Œé‚£å°±æŠ¥é”™ã€‚ è¿™éœ€è¦ç”¨åˆ° timeout å‚æ•°ã€‚ è¿™ä¸ªæ—¶é—´çš„è®¡ç®—æ˜¯å‘å½’è¯·æ±‚åˆ°æœåŠ¡å™¨è¿”å›å“åº”çš„æ—¶é—´ã€‚å®é™…ä¸Šï¼Œè¯·æ±‚åˆ†ä¸¤ä¸ªé˜¶æ®µï¼Œå³è¿æ¥()connect )å’Œè¯»å–(read )ã€‚å¦‚æœæƒ³æ°¸ä¹…ç­‰å¾…ï¼Œå¯ä»¥ç›´æ¥å°† timeout è®¾ç½®ä¸º None(é»˜è®¤) ã€‚</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> requests\n\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&#x27;æœ‰timeoutå¼‚å¸¸æ•è·&#x27;</span>)\n<span class=\"hljs-keyword\">try</span>:\n    response = requests.get(<span class=\"hljs-string\">&#x27;https://www.baidu.com&#x27;</span>, timeout = <span class=\"hljs-number\">0.01</span>)\n    <span class=\"hljs-built_in\">print</span>(response.status_code)\n<span class=\"hljs-keyword\">except</span> requests.exceptions.Timeout:\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&#x27;Timeout&#x27;</span>)\n<span class=\"hljs-keyword\">except</span> requests.exceptions.ConnectionError:\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&#x27;ConnextionError&#x27;</span>)\n<span class=\"hljs-keyword\">except</span> requests.exceptions.HTTPError:\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&#x27;HTTPError&#x27;</span>)\n\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&#x27;æ— timeoutå¼‚å¸¸æ•è·&#x27;</span>)\nresponse = requests.get(<span class=\"hljs-string\">&#x27;https://www.baidu.com&#x27;</span>, timeout = (<span class=\"hljs-number\">0.01</span>, <span class=\"hljs-number\">0.01</span>))\n<span class=\"hljs-built_in\">print</span>(response.status_code)\n</code></pre>\n<p><img src=\"http://hellomrrs-imgs.oss-cn-shanghai.aliyuncs.com/18-11-14/91035917.jpg\" alt=\"enter image description here\"></p>\n<h3 id=\"èº«ä»½è®¤è¯\">èº«ä»½è®¤è¯</h3>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> requests\n<span class=\"hljs-keyword\">from</span> requests.auth <span class=\"hljs-keyword\">import</span> HTTPBasicAuth\n\nresponse = requests.get(url, auth=HTTPBasicAuth(username, userpassword))\nresponse = requests,get(url, auth=(username, userpassword))\n</code></pre>\n<h3 id=\"prepared-request\">prepared request</h3>\n<p>å‰é¢ä»‹ç» urllib æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¯·æ±‚è¡¨ç¤ºä¸ºæ•°æ®ç»“æ„ï¼Œå…¶ä¸­å„ä¸ªå‚æ•°éƒ½å¯ä»¥é€šè¿‡ä¸€ä¸ª Request å¯¹è±¡æ¥è¡¨ç¤º ã€‚ è¿™åœ¨ requests é‡ŒåŒæ ·å¯ä»¥åšåˆ°ï¼Œè¿™ä¸ªæ•°æ®ç»“æ„å°±å« Prepared Requestã€‚æœ‰äº† Request è¿™ä¸ªå¯¹è±¡ï¼Œå°±å¯ä»¥å°†è¯·æ±‚å½“ä½œç‹¬ç«‹çš„å¯¹è±¡æ¥çœ‹å¾…ï¼Œè¿™æ ·åœ¨è¿›è¡Œé˜Ÿåˆ—è°ƒåº¦æ—¶ä¼šéå¸¸æ–¹ä¾¿ã€‚</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">from</span> requests <span class=\"hljs-keyword\">import</span> Request, Session\n\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&#x27;prepared requestæµ‹è¯•&#x27;</span>)\nurl = <span class=\"hljs-string\">&#x27;https://httpbin.org/post&#x27;</span>\ndata = {<span class=\"hljs-string\">&#x27;name&#x27;</span>: <span class=\"hljs-string\">&#x27;germey&#x27;</span>}\nheaders = {<span class=\"hljs-string\">&#x27;User-Agent&#x27;</span>: <span class=\"hljs-string\">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:63.0) Gecko/20100101 Firefox/63.0&#x27;</span>}\n\nsession = Session()\nrequest = Request(<span class=\"hljs-string\">&#x27;POST&#x27;</span>, url, data = data, headers = headers)\nprepped = session.prepare_request(request)\nresponse = session.send(prepped)\n<span class=\"hljs-built_in\">print</span>(response.status_code)\n<span class=\"hljs-built_in\">print</span>(response.text)\n</code></pre>\n<p><img src=\"http://hellomrrs-imgs.oss-cn-shanghai.aliyuncs.com/18-11-14/46350763.jpg\" alt=\"enter image description here\"></p>\n"},{"title":"Vue.jså­¦ä¹ -åŸºç¡€","tags":["Vue.js"],"categories":"Vue.js","description":"# ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°\n\n- beforeCreate\n\n  è·å–ä¸åˆ°props/data\n\n- created\n\n  å¯ä»¥è·å–åˆ°props/dataï¼Œç»„ä»¶æœªæŒ‚è½½\n\n- beforeMount\n\n  å¼€å§‹åˆ›å»ºVDOM\n\n- mounted\n\n  å°†VDOMæ¸²æŸ“ä¸ºçœŸå®DOMå¹¶æ¸²æŸ“æ•°æ®ï¼Œç»„ä»¶ä¸­å¦‚æœæœ‰å­ç»„ä»¶çš„è¯ä¼šé€’å½’æŒ‚è½½å­ç»„ä»¶ï¼Œåªæœ‰å½“æ‰€æœ‰å­ç»„ä»¶å…¨éƒ¨æŒ‚è½½å®Œæ¯•æ‰ä¼šæ‰§è¡Œè·Ÿç»„ä»¶çš„æŒ‚è½½é’©å­\n\n- beforeU","createDate":"2020-04-18 21:04:39","updateDate":"10/1/2021, 3:34:43 AM","body":"<h1 id=\"ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°\">ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°</h1>\n<ul>\n<li><p>beforeCreate</p>\n<p>è·å–ä¸åˆ°props/data</p>\n</li>\n<li><p>created</p>\n<p>å¯ä»¥è·å–åˆ°props/dataï¼Œç»„ä»¶æœªæŒ‚è½½</p>\n</li>\n<li><p>beforeMount</p>\n<p>å¼€å§‹åˆ›å»ºVDOM</p>\n</li>\n<li><p>mounted</p>\n<p>å°†VDOMæ¸²æŸ“ä¸ºçœŸå®DOMå¹¶æ¸²æŸ“æ•°æ®ï¼Œç»„ä»¶ä¸­å¦‚æœæœ‰å­ç»„ä»¶çš„è¯ä¼šé€’å½’æŒ‚è½½å­ç»„ä»¶ï¼Œåªæœ‰å½“æ‰€æœ‰å­ç»„ä»¶å…¨éƒ¨æŒ‚è½½å®Œæ¯•æ‰ä¼šæ‰§è¡Œè·Ÿç»„ä»¶çš„æŒ‚è½½é’©å­</p>\n</li>\n<li><p>beforeUpdate/updated</p>\n<p>åˆ†åˆ«åœ¨æ•°æ®æ›´æ–°å‰/æ›´æ–°æ—¶è°ƒç”¨ã€‚ä¸èƒ½åœ¨updatedé‡Œåšæ›´æ–°ï¼Œä¼šé€ æˆæ­»å¾ªç¯</p>\n</li>\n<li><p>beforeDestory</p>\n<p>é€‚åˆç§»ç§»é™¤äº‹ä»¶ã€å®šæ—¶å™¨ç­‰</p>\n</li>\n<li><p>destoryed</p>\n<p>æ‰€æœ‰å­ç»„ä»¶éƒ½é”€æ¯å®Œæ¯•åä¼šæ‰§è¡Œæ ¹ç»„ä»¶çš„destoryed</p>\n</li>\n</ul>\n<h1 id=\"ç»„ä»¶é€šä¿¡\">ç»„ä»¶é€šä¿¡</h1>\n<ul>\n<li><p><code>props/$emit</code>\né€šè¿‡propså°†æ•°æ®è‡ªä¼¤è€Œä¸‹ä¼ é€’ï¼›é€šè¿‡$emit/v-onæ¥å‘ä¸Šä¼ é€’æ¶ˆæ¯</p>\n</li>\n<li><p>eventbus\né€šè¿‡eventbusè¿›è¡Œæ¶ˆæ¯çš„å‘å¸ƒè®¢é˜…</p>\n</li>\n<li><p>vuex\nå…¨å±€æ•°æ®ç®¡ç†åº“ï¼Œå¯é€šè¿‡vuexç®¡ç†å…¨å±€çš„æ•°æ®æµ</p>\n</li>\n<li><pre><code>$attrs/$listeners\n</code></pre>\n<p>å¯ä»¥è¿›è¡Œè·¨çº§çš„ç»„ä»¶é€šä¿¡</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// çˆ¶ç»„ä»¶</span>\n&lt;template&gt;\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;home&quot;</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">m-input</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;text&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;å§“å&quot;</span> <span class=\"hljs-attr\">v-model</span>=<span class=\"hljs-string\">&quot;name&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">m-input</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n&lt;/template&gt;\n<span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">MInput</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;@/components/MInput.vue&quot;</span>;\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> {\n    <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;home&quot;</span>,\n    <span class=\"hljs-title function_\">data</span>(<span class=\"hljs-params\"></span>) {\n        <span class=\"hljs-keyword\">return</span> {\n            <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;zhangsan&quot;</span>\n        };\n    },\n    <span class=\"hljs-attr\">components</span>: {\n        <span class=\"hljs-title class_\">MInput</span>\n    }\n};\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span></span>\n\n<span class=\"hljs-comment\">// å­ç»„ä»¶</span>\n<span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span> <span class=\"hljs-attr\">v-bind</span>=<span class=\"hljs-string\">&quot;$attrs&quot;</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">v-bind</span>=<span class=\"hljs-string\">&quot;$attrs&quot;</span> @<span class=\"hljs-attr\">input</span>=<span class=\"hljs-string\">&quot;$emit(&#x27;input&#x27;,$event.target.value)&quot;</span> <span class=\"hljs-attr\">:value</span>=<span class=\"hljs-string\">&quot;value&quot;</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span></span>\n<span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> {\n    <span class=\"hljs-attr\">inheritAttrs</span>: <span class=\"hljs-literal\">false</span>,\n    <span class=\"hljs-attr\">props</span>: {\n        <span class=\"hljs-attr\">value</span>: <span class=\"hljs-title class_\">String</span>,\n        <span class=\"hljs-attr\">default</span>: <span class=\"hljs-string\">&quot;&quot;</span>\n    }\n};\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span></span>\n</code></pre>\n</li>\n<li><p>proveded/inject\nå…è®¸ä¸€ä¸ªç¥–å…ˆç»„ä»¶å‘å…¶æ‰€æœ‰å­å­™åä»£æ³¨å…¥ä¸€ä¸ªä¾èµ–ï¼Œä¸è®ºç»„ä»¶å±‚æ¬¡æœ‰å¤šæ·±ï¼Œå¹¶ä¸”åœ¨å…¶ä¸Šä¸‹æ¸¸å…³ç³»æˆç«‹çš„æ—¶é—´å†…å§‹ç»ˆæœ‰æ•ˆ</p>\n</li>\n</ul>\n<h1 id=\"mixinå’Œmixinsçš„åŒºåˆ«\">mixinå’Œmixinsçš„åŒºåˆ«</h1>\n<ul>\n<li>mixinç”¨äºå…¨å±€æ··å…¥ï¼Œä¼šå½±å“åˆ°æ¯ä¸ªç»„ä»¶å®ä¾‹ï¼ˆvuexã€vue-routerç­‰æ’ä»¶å®ç°æ ¸å¿ƒæœºåˆ¶ï¼‰</li>\n<li>mixinså¸¸ç”¨æ¥æ‰©å±•ç»„ä»¶</li>\n</ul>\n<h1 id=\"computedå’Œwatchçš„åŒºåˆ«\">computedå’Œwatchçš„åŒºåˆ«</h1>\n<ul>\n<li>computedæ˜¯è®¡ç®—å±æ€§ï¼Œä¾èµ–å…¶ä»–å±æ€§è®¡ç®—å€¼ï¼Œå¹¶ä¸”computedçš„å€¼æœ‰ç¼“å­˜ï¼Œåªæœ‰å½“è®¡ç®—å€¼å‘ç”Ÿå˜åŒ–æ‰è¿”å›å†…å®¹</li>\n<li>watchç›‘å¬åˆ°å€¼çš„å˜åŒ–å°±ä¼šæ‰§è¡Œå›è°ƒï¼Œåœ¨å›è°ƒä¸­å¯ä»¥è¿›è¡Œä¸€äº›é€»è¾‘æ“ä½œ</li>\n</ul>\n<p>ä¸€èˆ¬æ¥è¯´éœ€è¦ä¾èµ–åˆ«çš„å±æ€§æ¥åŠ¨æ€è·å¾—å€¼å¾—æ—¶å€™å¯ä»¥ä½¿ç”¨computedï¼Œå¯¹äºç›‘å¬åˆ°å€¼çš„å˜åŒ–éœ€è¦åšä¸€äº›<strong>å¤æ‚ä¸šåŠ¡é€»è¾‘</strong>çš„æƒ…å†µå¯ä»¥ä½¿ç”¨watch</p>\n<p><a href=\"https://www.jianguoyun.com/static/stackedit/%5Bhttp://blog.p18c.top/2020/03/03/Vue.js%E7%A0%94%E8%AF%BB-1/%5D(http://blog.p18c.top/2020/03/03/Vue.js%E7%A0%94%E8%AF%BB-1/)\">å®ç°åŸç†</a></p>\n<h2 id=\"computedå¦‚ä½•çŸ¥é“ä¾èµ–\">computedå¦‚ä½•çŸ¥é“ä¾èµ–</h2>\n<ol>\n<li>Vue.jså®ä¾‹åˆå§‹åŒ–è¿‡ç¨‹ä¸­ï¼Œå°†æ‰€æœ‰è®¡ç®—å±æ€§åŒ…è£…ä¸ºlazy watcher</li>\n<li>é¦–æ¬¡è®¿é—®è®¡ç®—å±æ€§æ—¶ï¼Œwatcherä¸ºdirtyï¼Œæ­¤æ—¶å¼€å§‹è®¡ç®—watcherçš„å€¼</li>\n<li>è®¡ç®—å¼€å§‹ä¹‹å‰ï¼Œæ­¤watcherå°†è¢«è®¾ç½®ä¸ºä¾èµ–ç›®æ ‡ï¼Œå¼€å§‹æ”¶é›†ä¾èµ–</li>\n<li>è®¡ç®—watcherå€¼çš„è¿‡ç¨‹ä¸­ï¼Œè¢«è®¿é—®åˆ°å±æ€§çš„getterä¸­ä¼šæ£€æŸ¥æ˜¯å¦å­˜åœ¨ä¾èµ–ç›®æ ‡ï¼Œè‹¥å­˜åœ¨ä¾èµ–ç›®æ ‡å°±ä¼šåˆ›å»ºä¾èµ–å…³ç³»</li>\n<li>watcherçš„å€¼è®¡ç®—å®Œæˆåï¼Œæ–°çš„ä¾èµ–è¢«è®¾ç½®ï¼Œæ—§çš„ä¾èµ–ä¼šè¢«åˆ é™¤ï¼Œä¾èµ–æ”¶é›†å®Œæˆ</li>\n<li>å½“ä¾èµ–å±æ€§æ›´æ–°æ—¶ï¼Œä¼šé€šçŸ¥è‡ªèº«çš„ä¾èµ–ç›®æ ‡ï¼Œwatcherè¢«è®¾ç½®ä¸ºdirty</li>\n<li>å†æ¬¡è®¿é—®è¯¥è®¡ç®—å±æ€§ï¼Œé‡å¤è®¡ç®—åŠä¾èµ–æ”¶é›†æ­¥éª¤ï¼ˆ3-6ï¼‰</li>\n</ol>\n<h1 id=\"keep-aliveæœ‰ä»€ä¹ˆä½œç”¨\">keep-aliveæœ‰ä»€ä¹ˆä½œç”¨</h1>\n<p>å¦‚æœéœ€è¦åœ¨ç»„ä»¶åˆ‡æ¢çš„æ—¶å€™<strong>ä¿å­˜ä¸€äº›ç»„ä»¶çš„çŠ¶æ€é˜²æ­¢å¤šæ¬¡æ¸²æŸ“</strong>ï¼Œå°±å¯ä»¥ä½¿ç”¨<code>keep-alive</code>ç»„ä»¶åŒ…è£¹éœ€è¦ä¿å­˜çš„ç»„ä»¶ã€‚å¯¹äº<code>keep-alive</code>ç»„ä»¶æ¥è¯´ï¼Œå®ƒæœ‰ä¸¤ä¸ªç‹¬æœ‰çš„å£°æ˜å‘¨æœŸé’©å­å‡½æ•°ï¼Œåˆ†åˆ«ä¸º<code>activated</code>ã€å’Œ<code>deactivated</code>ã€‚ç”¨<code>keep-alive</code>åŒ…è£¹çš„ç»„ä»¶åœ¨åˆ‡æ¢æ—¶ä¸ä¼šè¿›è¡Œé”€æ¯ï¼Œè€Œæ˜¯ç¼“å­˜åˆ°å†…å­˜ä¸­å¹¶æ‰§è¡Œ<code>deactivated</code>é’©å­å‡½æ•°ï¼Œå‘½ä¸­ç¼“å­˜æ¸²æŸ“åä¼šæ‰§è¡Œ<code>activated</code>é’©å­å‡½æ•°ã€‚</p>\n<h1 id=\"v-showå’Œv-ifçš„åŒºåˆ«\">v-showå’Œv-ifçš„åŒºåˆ«</h1>\n<ul>\n<li><code>v-show</code>åªæ˜¯åœ¨<code>display:none</code>å’Œ<code>display:block</code>ä¹‹é—´åˆ‡æ¢ï¼Œæ— è®ºåˆå§‹æ¡ä»¶æ˜¯ä»€ä¹ˆDOMéƒ½ä¼šè¢«åˆ›å»ºï¼Œåé¢åªéœ€åˆ‡æ¢CSSã€‚æ‰€ä»¥æ€»çš„æ¥è¯´<code>v-show</code>åœ¨åˆå§‹æ¸²æŸ“æ—¶æœ‰ç€æ›´é«˜çš„å¼€é”€ï¼Œä½†åˆ‡æ¢å¼€é”€å¾ˆå°ï¼Œé€‚åˆé¢‘ç¹åˆ‡æ¢çš„åœºæ™¯ã€‚</li>\n<li><code>v-if</code>çš„è¯å…³äºåˆ°Vueåº•å±‚çš„ç¼–è¯‘ã€‚å½“åˆå§‹å±æ€§ä¸º<code>false</code>æ—¶ï¼Œç»„ä»¶å°±ä¸ä¼šè¢«æ¸²æŸ“ï¼Œç›´åˆ°æ¡ä»¶ä¸º<code>true</code>ã€‚å¹¶ä¸”åˆ‡æ¢æ¡ä»¶æ—¶ä¼šè§¦å‘é”€æ¯/æŒ‚è½½ç»„ä»¶åŠå›æµã€‚æ‰€ä»¥æ€»çš„æ¥è¯´åœ¨<strong>åˆ›å»ºæ—¶å¼€é”€è¾ƒå°ï¼Œåˆ‡æ¢æ—¶å¼€é”€å¤§ï¼Œé€‚åˆä¸ç»å¸¸åˆ‡æ¢çš„åœºæ™¯</strong>ï¼Œå¹¶ä¸”åŸºäº<code>v-if</code>è¿™ç§æƒ°æ€§æ¸²æŸ“æœºåˆ¶ï¼Œå¯ä»¥åœ¨å¿…è¦çš„æ—¶å€™æ‰å»æ¸²æŸ“ç»„ä»¶ï¼Œ<strong>å‡å°‘æ•´ä¸ªé¡µé¢çš„åˆå§‹æ¸²æŸ“å¼€é”€</strong></li>\n</ul>\n<h1 id=\"dataä¸ºä»€ä¹ˆä½¿ç”¨å‡½æ•°\">dataä¸ºä»€ä¹ˆä½¿ç”¨å‡½æ•°</h1>\n<p><strong>ç»„ä»¶å¤ç”¨æ—¶æ‰€æœ‰ç»„ä»¶å®ä¾‹éƒ½ä¼šå…±äº«data</strong>ï¼Œå¦‚æœdataæ˜¯å¯¹è±¡çš„è¯ï¼Œå°±ä¼šé€ æˆä¸€ä¸ªç»„ä»¶ä¿®æ”¹dataåå½±å“å…¶ä»–ç»„ä»¶ï¼Œæ‰€ä»¥æœ‰å¿…è¦å°†dataå†™æˆå‡½æ•°ï¼Œæ¯æ¬¡ç”¨åˆ°å°±è°ƒç”¨ä¸€æ¬¡å‡½æ•°è·å¾—æ–°çš„æ•°æ®</p>\n<p>å½“ä½¿ç”¨<code>new Vue()</code>çš„æ–¹å¼æ—¶ï¼Œæ— è®ºæˆ‘ä»¬å°†dataè®¾ç½®ä¸ºå¯¹è±¡å‡½æ•°å‡½æ•°éƒ½æ˜¯å¯ä»¥çš„ï¼Œå› ä¸º<code>new Vue()</code>çš„æ–¹å¼æ˜¯ç”Ÿæˆä¸€ä¸ªæ ¹ç»„ä»¶ï¼Œè¯¥ç»„ä»¶ä¸ä¼šè¢«å¤ç”¨ä¹Ÿå°±ä¸ä¼šå­˜åœ¨å…±äº«dataçš„æƒ…å†µäº†</p>\n<h1 id=\"vuejså“åº”å¼åŸç†\">Vue.jså“åº”å¼åŸç†</h1>\n<p>å¯¹äºObjectï¼ŒåŸºäºå‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œä½¿ç”¨<code>Object.defineProperty</code>ï¼Œåœ¨<code>getter</code>ä¸­æ”¶é›†ä¾èµ–ï¼Œåœ¨<code>setter</code>ä¸­é€šçŸ¥ä¾èµ–ã€‚å½“ä¸€ä¸ªvueç»„ä»¶å®ä¾‹åˆ›å»ºçš„æ—¶å€™ï¼Œvueä¼šéå†<code>data</code>é€‰é¡¹çš„å±æ€§ï¼Œç”¨<code>Object.defineProperty</code>å°†å®ƒä»¬è½¬æ¢ä¸º<code>getter/setter</code>å¹¶ä¸”åœ¨å†…éƒ¨è¿½è¸ªç›¸å…³ä¾èµ–ï¼Œåœ¨å±æ€§è¢«è®¿é—®å’Œä¿®æ”¹æ—¶é€šçŸ¥å˜åŒ–ã€‚æ¯ä¸ªç»„ä»¶å®ä¾‹éƒ½æœ‰ç›¸åº”çš„<code>watcher</code>å®ä¾‹ï¼Œå®ƒä¼šåœ¨ç»„ä»¶æ¸²æŸ“çš„è¿‡ç¨‹ä¸­æŠŠå±æ€§è®°å½•ä¸ºä¾èµ–ï¼Œåªæœ‰å½“ä¾èµ–é¡¹çš„<code>setter</code>è¢«è°ƒç”¨æ—¶ï¼Œä¼šé€šçŸ¥<code>watcher</code>é‡æ–°è®¡ç®—ä»è€Œä½¿å®ƒç®¡ç†çš„ç»„ä»¶å¾—ä»¥æ›´æ–°</p>\n<p>å¯¹äºArrayï¼ŒåŸºäºå‡½æ•°åŠ«æŒï¼Œæ”¹å†™æ•°ç»„åŸå‹æ–¹æ³•ï¼Œå¹¶éå†æ•°ç»„ï¼Œå¯¹äºæ˜¯å¯¹è±¡çš„é¡¹ä½¿ç”¨ğŸ‘†çš„æ–¹æ³•è¿›è¡Œè§‚æµ‹</p>\n<h1 id=\"vuejsçš„ç‰¹ç‚¹\">Vue.jsçš„ç‰¹ç‚¹</h1>\n<ul>\n<li>ç®€æ´</li>\n<li>æ•°æ®é©±åŠ¨ï¼Œè‡ªåŠ¨è®¡ç®—å±æ€§å’Œè¿½è¸ªä¾èµ–çš„æ¨¡æ¿è¡¨è¾¾å¼</li>\n<li>ç»„ä»¶åŒ–ï¼Œé«˜ç§‘æœç”¨ã€è§£è€¦çš„ç»„ä»¶æ¥æ„å»ºé¡µé¢</li>\n<li>å¿«é€Ÿï¼Œç²¾ç¡®æœ‰æ•ˆæ‰¹é‡DOMæ›´æ–°</li>\n<li>æ¨¡æ¿å‹å¥½</li>\n</ul>\n<h1 id=\"nexttick\"><code>$nextTick</code></h1>\n<p>Vue.jså®ç°å“åº”å¼å¹¶ä¸æ˜¯åœ¨æ•°æ®å‘ç”Ÿå˜åŒ–ådomç«‹å³å˜åŒ–ï¼Œè€Œæ˜¯æŒ‰ç…§ä¸€å®šçš„ç­–ç•¥æ¥è¿›è¡Œdomæ›´æ–°ã€‚nextTickæ˜¯åœ¨ä¸‹æ¬¡domæ›´æ–°å¾ªç¯ç»“æŸä¹‹åæ‰§è¡Œå»¶è¿Ÿå›è°ƒï¼Œåœ¨ä¿®æ”¹æ•°æ®ä¹‹åä½¿ç”¨<em>n<strong>e</strong>x<strong>t</strong>T<strong>i</strong>c**k</em>æ˜¯åœ¨ä¸‹æ¬¡<em>d<strong>o</strong>m</em>æ›´æ–°å¾ªç¯ç»“æŸä¹‹åæ‰§è¡Œå»¶è¿Ÿå›è°ƒï¼Œåœ¨ä¿®æ”¹æ•°æ®ä¹‹åä½¿ç”¨nextTickï¼Œåˆ™å¯ä»¥åœ¨å›è°ƒä¸­è·å–æ›´æ–°åçš„dom</p>\n<p>æ¸²æŸ“èŠ‚æµ</p>\n<h1 id=\"v-forä¸­keyçš„ä½œç”¨\"><code>v-for</code>ä¸­<code>key</code>çš„ä½œç”¨</h1>\n<p>å½“vueæ›´æ–°é€šè¿‡v-foræ¸²æŸ“çš„å…ƒç´ æ—¶ï¼Œå®ƒé»˜è®¤ä½¿ç”¨<strong>å°±åœ°å¤ç”¨</strong>çš„ç­–ç•¥ï¼Œå¦‚æœæ•°æ®é¡¹çš„é¡ºåºè¢«æ”¹å˜ï¼Œvueå°†ä¸æ˜¯ç§»åŠ¨domå…ƒç´ æ¥åŒ¹é…æ•°æ®é¡¹çš„æ”¹å˜ï¼Œè€Œæ˜¯ç®€å•å¤ç”¨æ­¤å¤„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”ç¡®ä¿å®ƒåœ¨ç‰¹å®šçš„ç´¢å¼•ä¸‹æ˜¾ç¤ºå·²ç»è¢«æ¸²æŸ“è¿‡çš„æ¯ä¸ªå…ƒç´ ã€‚ä¸ºäº†ç»™vueä¸€ä¸ªæç¤ºï¼Œä»¥ä¾¿å®ƒèƒ½è·Ÿè¸ªæ¯ä¸ªèŠ‚ç‚¹çš„èº«ä»½ï¼Œä»è€Œé‡ç”¨å’Œé‡æ–°æ’åºæ‰€æœ‰å…ƒç´ ï¼Œéœ€è¦ç»™vueæä¾›ä¸€ä¸ªå”¯ä¸€keyå±æ€§</p>\n<p>key <strong>ä¸»è¦ç”¨åœ¨vueçš„è™šæ‹Ÿdomç®—æ³•</strong>ï¼Œåœ¨æ–°æ—§nodeå¯¹æ¯”æ—¶è¾¨è¯†vnodesã€‚å¦‚æœä¸ä½¿ç”¨keyï¼Œvueä¼šä½¿ç”¨ä¸€ç§æœ€å¤§é™åº¦å‡å°‘åŠ¨æ€å…ƒç´ å¹¶ä¸”å°½å¯èƒ½çš„å°è¯•ä¿®å¤/å†åˆ©ç”¨ç›¸åŒç±»å‹å…ƒç´ çš„ç®—æ³•ï¼Œä½¿ç”¨keyï¼Œå®ƒä¼šåŸºäºkeyçš„å˜åŒ–é‡æ–°æ’åˆ—å…ƒç´ é¡ºåºï¼Œå¹¶ä¸”ä¼šç§»é™¤keyä¸å­˜åœ¨çš„å…ƒç´ </p>\n<h1 id=\"routerå’Œroute\"><code>$router</code>å’Œ<code>$route</code></h1>\n<ul>\n<li><code>$router</code>æ˜¯è·¯ç”±ä¿¡æ¯å¯¹è±¡ï¼ŒåŒ…æ‹¬<code>pathã€paramsã€hashã€queryã€fullPathã€matchedã€name</code>ç­‰è·¯ç”±ä¿¡æ¯å‚æ•°</li>\n<li><code>$route</code>æ˜¯è·¯ç”±å®ä¾‹ï¼ŒåŒ…æ‹¬äº†è·¯ç”±è·³è½¬æ–¹æ³•ã€é’©å­å‡½æ•°ç­‰</li>\n</ul>\n<h1 id=\"clicknativeä¸­nativeçš„ä½œç”¨\"><code>@click.native</code>ä¸­<code>native</code>çš„ä½œç”¨</h1>\n<p>å¯¹äºæ™®é€šæ ‡ç­¾ï¼Œ<code>@click</code>ä¼šç›‘å¬ç‚¹å‡»äº‹ä»¶ï¼Œè€Œå¯¹äºå†™åœ¨ç»„ä»¶ä¸Šçš„<code>@click</code>ï¼Œå¦‚æœä¸åŠ <code>native</code>ï¼Œåˆ™ä»£è¡¨åšæŒºçš„æ˜¯ç»„ä»¶çš„ç‚¹å‡»äº‹ä»¶ï¼Œè€Œä¸æ˜¯ç»„ä»¶å†…çš„ç‚¹å‡»äº‹ä»¶ï¼Œå› æ­¤ï¼Œåœ¨ç»„ä»¶å†…å†™çš„<code>click handler</code>ä¸ä¼šè¢«æ‰§è¡Œ</p>\n<h1 id=\"v-model\"><code>v-model</code></h1>\n<p><code>v-model</code>å¸¸ç”¨äºè¡¨å•å…ƒç´ ä¸Šè¿›è¡Œæ•°æ®çš„åŒå‘ç»‘å®šï¼Œæ¯”å¦‚``ã€‚é™¤äº†åŸç”Ÿçš„å…ƒç´ ï¼Œå®ƒè¿˜èƒ½åœ¨è‡ªå®šä¹‰ç»„ä»¶ä¸­ä½¿ç”¨</p>\n<pre><code>v-model`æ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå¯ä»¥æ‹†è§£ä¸º`props: value`å’Œ`events:input`ã€‚å°±æ˜¯è¯´ç»„ä»¶å¿…é¡»æä¾›ä¸€ä¸ªåä¸º`value`çš„`prop`ä»¥åŠåä¸º`input`çš„è‡ªå®šä¹‰äº‹ä»¶ï¼Œæ»¡è¶³è¿™ä¸¤ä¸ªæ¡ä»¶å°±èƒ½åœ¨è‡ªå®šä¹‰ç»„ä»¶ä¸Šä½¿ç”¨`v-model\n</code></pre>\n<h1 id=\"ä½œç”¨åŸŸæ’æ§½\">ä½œç”¨åŸŸæ’æ§½</h1>\n<p>ä¸€ç§å¸¦æœ‰æ•°æ®çš„æ’æ§½</p>\n<p>æ™®é€šæ’æ§½ = çˆ¶ç»„ä»¶è®¾ç½®çš„æ ·å¼ + çˆ¶ç»„ä»¶é€šè¿‡propsä¼ é€’çš„æ•°æ®</p>\n<p>ä½œç”¨åŸŸæ’æ§½ = çˆ¶ç»„ä»¶è®¾ç½®çš„æ ·å¼ + <strong>è‡ªèº«çš„æ•°æ®</strong>ï¼ˆè¯¥æ•°æ®çˆ¶ç»„ä»¶ä¹Ÿå¯ä»¥è®¿é—®å¾—åˆ°ï¼‰</p>\n"},{"title":"Vue.jsç ”è¯»-å“åº”å¼","tags":["Vue.js","å“åº”å¼"],"categories":"Vue.js","description":"## å“åº”å¼åŸç†\n\n![å“åº”å¼ç®¡ç†](https://mrrsblog.oss-cn-shanghai.aliyuncs.com/vue-1.png)\n\nDataé€šè¿‡`Observer`è½¬æ¢æˆäº†**getter/setter**çš„å½¢å¼ç±»è¿½è¸ªå˜åŒ–\n\nå½“å¤–ç•Œé€šè¿‡`Watcher`è¯»å–æ•°æ®ï¼ˆCompileæ—¶ä¼šæ ¹æ®**{}**ã€**v-***æ¥åˆ›å»ºWatcherï¼‰æ—¶ä¼šè§¦å‘getterä»è€Œå°†Watche","createDate":"2020-03-03 23:15:13","updateDate":"10/1/2021, 3:34:43 AM","body":"<h2 id=\"å“åº”å¼åŸç†\">å“åº”å¼åŸç†</h2>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/vue-1.png\" alt=\"å“åº”å¼ç®¡ç†\"></p>\n<p>Dataé€šè¿‡<code>Observer</code>è½¬æ¢æˆäº†<strong>getter/setter</strong>çš„å½¢å¼ç±»è¿½è¸ªå˜åŒ–</p>\n<p>å½“å¤–ç•Œé€šè¿‡<code>Watcher</code>è¯»å–æ•°æ®ï¼ˆCompileæ—¶ä¼šæ ¹æ®**{}<strong>ã€</strong>v-***æ¥åˆ›å»ºWatcherï¼‰æ—¶ä¼šè§¦å‘getterä»è€Œå°†Watcheræ·»åŠ åˆ°ä¾èµ–ä¸­</p>\n<p>å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè§¦å‘setterï¼Œä»è€Œå‘<code>Dep</code>ä¸­çš„ä¾èµ–ï¼ˆWatcherï¼‰å‘é€é€šçŸ¥</p>\n<p>Wacheræ¥æ”¶åˆ°é€šçŸ¥åï¼Œä¼šå‘å¤–ç•Œå‘é€é€šçŸ¥ï¼Œå˜åŒ–é€šçŸ¥åˆ°å¤–ç•Œåå¯èƒ½ä¼šè§¦å‘è§†å›¾æ›´æ–°ï¼Œä¹Ÿæœ‰å¯èƒ½è§¦å‘ç”¨æˆ·çš„æŸä¸ªå›è°ƒå‡½æ•°</p>\n<h2 id=\"ç®€æ˜“ç‰ˆå“åº”å¼ï¼ˆproxy--observerwatcherdepï¼‰\">ç®€æ˜“ç‰ˆå“åº”å¼ï¼ˆProxy + Observer/Watcher/Depï¼‰</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">let</span> uid = <span class=\"hljs-number\">0</span>\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">parsePath</span>(<span class=\"hljs-params\">obj, path</span>) {\n    <span class=\"hljs-keyword\">if</span> (path === <span class=\"hljs-string\">&quot;&quot;</span>) <span class=\"hljs-keyword\">return</span> obj\n    <span class=\"hljs-keyword\">return</span> path.<span class=\"hljs-title function_\">split</span>(<span class=\"hljs-string\">&quot;.&quot;</span>).<span class=\"hljs-title function_\">reduce</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">data, current</span>) =&gt;</span> data[current], obj)\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">defineReactive</span> (data) {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> data !== <span class=\"hljs-string\">&quot;object&quot;</span>) <span class=\"hljs-keyword\">return</span> data\n    <span class=\"hljs-keyword\">let</span> dep = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Dep</span>()\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(data, {\n        <span class=\"hljs-attr\">set</span>: <span class=\"hljs-function\">(<span class=\"hljs-params\">target, prop, value, receiver</span>) =&gt;</span> {\n            <span class=\"hljs-keyword\">const</span> oldVal = target[prop]\n            <span class=\"hljs-keyword\">const</span> res = <span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">set</span>(target, prop, <span class=\"hljs-title function_\">defineReactive</span>(value), receiver)\n            <span class=\"hljs-keyword\">if</span> (oldVal !== value) dep.<span class=\"hljs-title function_\">notify</span>()\n            <span class=\"hljs-keyword\">return</span> res\n        },\n        <span class=\"hljs-attr\">get</span>: <span class=\"hljs-function\">(<span class=\"hljs-params\">target, prop, receiver</span>) =&gt;</span> {\n            dep.<span class=\"hljs-title function_\">depend</span>()\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">get</span>(target, prop, receiver)\n        }\n    })\n}\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Observer</span> {\n    <span class=\"hljs-title function_\">constructor</span> (vm) {\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> vm !== <span class=\"hljs-string\">&quot;object&quot;</span>) <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TypeError</span>(<span class=\"hljs-string\">&quot;vm must be an object&quot;</span>)\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">walk</span>(vm)\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">defineReactive</span>(vm)\n    }\n    walk (vm) {\n        <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">keys</span>(vm).<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">item</span> =&gt;</span> {\n            <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> vm[item] === <span class=\"hljs-string\">&quot;object&quot;</span>) <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">walk</span>(vm[item])\n            vm[item] = <span class=\"hljs-title function_\">defineReactive</span>(vm[item])\n        })\n    }\n}\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Dep</span> {\n    <span class=\"hljs-title function_\">constructor</span> () {\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">id</span> = uid++\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">subs</span> = []\n    }\n    addSub (sub) {\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">subs</span>.<span class=\"hljs-title function_\">push</span>(sub)\n    }\n    depend () {\n        <span class=\"hljs-title class_\">Dep</span>.<span class=\"hljs-property\">target</span> &amp;&amp; <span class=\"hljs-title class_\">Dep</span>.<span class=\"hljs-property\">target</span>.<span class=\"hljs-title function_\">addDep</span>(<span class=\"hljs-variable language_\">this</span>)\n    }\n    notify () {\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">subs</span>.<span class=\"hljs-title function_\">slice</span>().<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">item</span> =&gt;</span> item.<span class=\"hljs-title function_\">update</span>())\n    }\n    removeSub (sub) {\n        <span class=\"hljs-keyword\">const</span> index = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">subs</span>.<span class=\"hljs-title function_\">indexOf</span>(sub)\n        index &gt; -<span class=\"hljs-number\">1</span> &amp;&amp; <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">subs</span>.<span class=\"hljs-title function_\">splice</span>(index, <span class=\"hljs-number\">1</span>)\n    }\n}\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Watcher</span> {\n    <span class=\"hljs-title function_\">constructor</span> (vm, exp, cb) {\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">vm</span> = vm\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">exp</span> = exp\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">cb</span> = cb\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">deps</span> = []\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">depIds</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Set</span>()\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">value</span> = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">get</span>() \n    }\n    get () {\n        <span class=\"hljs-title class_\">Dep</span>.<span class=\"hljs-property\">target</span> = <span class=\"hljs-variable language_\">this</span>\n        <span class=\"hljs-keyword\">let</span> value = <span class=\"hljs-title function_\">parsePath</span>(<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">vm</span>, <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">exp</span>)\n        <span class=\"hljs-title class_\">Dep</span>.<span class=\"hljs-property\">target</span> = <span class=\"hljs-literal\">undefined</span>\n        <span class=\"hljs-keyword\">return</span> value\n    }\n    update () {\n        <span class=\"hljs-keyword\">const</span> oldValue = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">value</span>\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">value</span> = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">get</span>()\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">cb</span>.<span class=\"hljs-title function_\">call</span>(<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">vm</span>, <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">value</span>, oldValue)\n    }\n    addDep (dep) {\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">depIds</span>.<span class=\"hljs-title function_\">has</span>(dep.<span class=\"hljs-property\">id</span>)) <span class=\"hljs-keyword\">return</span>\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">depIds</span>.<span class=\"hljs-title function_\">add</span>(dep.<span class=\"hljs-property\">id</span>)\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">deps</span>.<span class=\"hljs-title function_\">push</span>(dep)\n        dep.<span class=\"hljs-title function_\">addSub</span>(<span class=\"hljs-variable language_\">this</span>)\n    }\n    teardown () {\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">deps</span>.<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">item</span> =&gt;</span> item.<span class=\"hljs-title function_\">removeSub</span>(<span class=\"hljs-variable language_\">this</span>))\n    }\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">watch</span>(<span class=\"hljs-params\">vm, exp, cb, options = {}</span>) {\n    <span class=\"hljs-keyword\">const</span> watcher = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Watcher</span>(vm, exp, cb)\n    <span class=\"hljs-keyword\">if</span> (options.<span class=\"hljs-property\">immediate</span>) cb.<span class=\"hljs-title function_\">call</span>(vm, watcher.<span class=\"hljs-property\">value</span>)\n    <span class=\"hljs-keyword\">return</span> watcher.<span class=\"hljs-property\">teardown</span>.<span class=\"hljs-title function_\">bind</span>(watcher)\n}\n\n<span class=\"hljs-keyword\">export</span> { <span class=\"hljs-title class_\">Observer</span>, watch }\n</code></pre>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-keyword\">html</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">&quot;en&quot;</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">charset</span>=<span class=\"hljs-string\">&quot;UTF-8&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;viewport&quot;</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>Document<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;./mvvm.js&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n    <span class=\"hljs-keyword\">const</span> data = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Observer</span>({\n        <span class=\"hljs-attr\">student</span>: {\n            <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;tom&quot;</span>,\n            <span class=\"hljs-attr\">age</span>: <span class=\"hljs-number\">23</span>\n        },\n        <span class=\"hljs-attr\">address</span>: {\n            <span class=\"hljs-attr\">province</span>: {\n                <span class=\"hljs-attr\">id</span>: <span class=\"hljs-number\">41</span>,\n                <span class=\"hljs-attr\">view</span>: <span class=\"hljs-string\">&quot;æ²³å—&quot;</span>\n            }\n        },\n        <span class=\"hljs-attr\">friends</span>: [ <span class=\"hljs-string\">&quot;zhangsan&quot;</span>, <span class=\"hljs-string\">&quot;lisi&quot;</span>, <span class=\"hljs-string\">&quot;wangwu&quot;</span> ],\n    })\n    <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Watcher</span>(data, <span class=\"hljs-string\">&quot;student&quot;</span>, <span class=\"hljs-function\"><span class=\"hljs-params\">val</span> =&gt;</span> {\n        <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;update student&#x27;</span>, val)\n    })\n    <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Watcher</span>(data, <span class=\"hljs-string\">&quot;student.name&quot;</span>, <span class=\"hljs-function\"><span class=\"hljs-params\">val</span> =&gt;</span> {\n        <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;update student.name&#x27;</span>, val)\n    })\n    <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Watcher</span>(data, <span class=\"hljs-string\">&quot;student.age&quot;</span>, <span class=\"hljs-function\"><span class=\"hljs-params\">val</span> =&gt;</span> {\n        <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;update student.age&#x27;</span>, val)\n    })\n    <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Watcher</span>(data, <span class=\"hljs-string\">&quot;address.province.id&quot;</span>, <span class=\"hljs-function\"><span class=\"hljs-params\">val</span> =&gt;</span> {\n        <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;update address.province.id&quot;</span>, val);\n    })\n    <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Watcher</span>(data, <span class=\"hljs-string\">&quot;friends.length&quot;</span>, <span class=\"hljs-function\"><span class=\"hljs-params\">val</span> =&gt;</span> {\n        <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;update student.friends&#x27;</span>, data.<span class=\"hljs-property\">friends</span>[val - <span class=\"hljs-number\">1</span>]);\n    })\n    <span class=\"hljs-keyword\">const</span> unwatch = <span class=\"hljs-title function_\">watch</span>(data, <span class=\"hljs-string\">&quot;address.province.view&quot;</span>, <span class=\"hljs-function\"><span class=\"hljs-params\">val</span> =&gt;</span> {\n        <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;address.province.view&#x27;</span>, val);\n    })\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n</code></pre>\n<h2 id=\"vmwatchexporfn-callback-options\">$vm.watch(expOrFn, callback, [options])</h2>\n<p>ç”¨äºè§‚å¯Ÿä¸€ä¸ªè¡¨è¾¾å¼æˆ–computedå‡½æ•°åœ¨Vue.jså®ä¾‹ä¸Šçš„å˜åŒ–ã€‚å›è°ƒå‡½æ•°è°ƒç”¨æ—¶ï¼Œä¼šä»å‚æ•°ä¸­å¾—åˆ°oldValueå’ŒnewValue</p>\n<p>vm.$watchå…¶å®æ˜¯å¯¹Watcherçš„ä¸€ç§å°è£…ï¼Œæ²¡æœ‰ç¼“å­˜æ€§ï¼Œé€šè¿‡Watcherå®Œå…¨å¯ä»¥å®ç°vm.$watchçš„åŠŸèƒ½</p>\n<ol>\n<li>å…ˆæ‰§è¡Œnew Watcheræ¥å®ç°vm.$watchçš„åŸºæœ¬åŠŸèƒ½</li>\n<li>åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ä½¿ç”¨immediateå‚æ•°ï¼Œå¦‚æœä½¿ç”¨äº†åˆ™ç«‹å³æ‰§è¡Œä¸€æ¬¡cb</li>\n<li>åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ä½¿ç”¨deepå‚æ•°ï¼Œå¦‚æœä½¿ç”¨é™¤äº†è¦è§¦å‘å½“å‰è¿™ä¸ªè¢«ç›‘å¬æ•°æ®çš„ä¾èµ–æ”¶é›†çš„é€»è¾‘ä¹‹å¤–ï¼Œè¿˜è¦æŠŠå½“å‰ç›‘å¬çš„è¿™ä¸ªå€¼åœ¨å†…çš„æ‰€æœ‰å­å€¼éƒ½è¦è§¦å‘ä¸€éä¾èµ–æ”¶é›†é€»è¾‘</li>\n<li>è¿”å›ä¸€ä¸ªå‡½æ•°unwatchFnï¼Œç”¨äºå–æ¶ˆè§‚å¯Ÿæ•°æ®</li>\n</ol>\n<h2 id=\"vmcomputed\">$vm.computed</h2>\n<p><code>computed</code>æ˜¯å®šä¹‰åœ¨<code>vm</code>ä¸Šçš„ä¸€ä¸ªç‰¹æ®Šçš„<code>getter</code>æ–¹æ³•ã€‚ä¹‹æ‰€ä»¥è¯´ç‰¹æ®Šæ˜¯å› ä¸ºåœ¨vmä¸Šå®šä¹‰<code>getter</code>æ–¹æ³•æ—¶ï¼Œ<code>get</code>å¹¶ä¸æ˜¯ç”±ç”¨æˆ·æä¾›çš„å‡½æ•°ï¼Œè€Œæ˜¯Vue.jså†…éƒ¨çš„ä¸€ä¸ªä»£ç†å‡½æ•°ã€‚åœ¨ä»£ç†å‡½æ•°ä¸­å¯ä»¥ç»“åˆ<code>Watcher</code>å®ç°ç¼“å­˜ä¸æ”¶é›†ä¾èµ–ç­‰åŠŸèƒ½ã€‚åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ä¸€ä¸ªæ•°æ®æ¸²æŸ“è§†å›¾æ—¶ï¼Œå¦‚æœè¿™ä¸ªæ•°æ®æ°å¥½æ˜¯è®¡ç®—å±æ€§ï¼Œé‚£ä¹ˆè¯»å–æ•°æ®è¿™ä¸ªæ“ä½œå…¶å®ä¼šè§¦å‘è®¡ç®—å±æ€§çš„<code>getter</code>æ–¹æ³•ã€‚</p>\n<p>å½“è¿™ä¸ªgetteræ–¹æ³•è¢«è§¦å‘æ—¶ä¼šåšä¸¤ä»¶äº‹ï¼š</p>\n<ol>\n<li>è®¡ç®—å½“å‰å±æ€§çš„å€¼ï¼Œæ­¤æ—¶ä¼šä½¿ç”¨Watcherå»è§‚å¯Ÿè®¡ç®—å±æ€§ä¸­ç”¨åˆ°çš„æ‰€æœ‰å…¶ä»–æ•°æ®çš„å˜åŒ–ã€‚åŒæ—¶å°†è®¡ç®—å±æ€§çš„Watcherçš„dirtyå±æ€§è®¾ç½®ä¸ºfalseï¼Œè¿™æ ·å†æ¬¡è¯»å–è®¡ç®—å±æ€§æ—¶å°†ä¸å†é‡æ–°è®¡ç®—ï¼Œé™¤éè®¡ç®—å±æ€§æ‰€ä¾èµ–çš„å€¼å‘ç”Ÿäº†å˜åŒ–</li>\n<li>å½“è®¡ç®—å±æ€§ä¸­ç”¨åˆ°çš„æ ‘å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°†å¾—åˆ°é€šçŸ¥ä»è€Œè¿›è¡Œé‡æ–°æ¸²æŸ“æ“ä½œ</li>\n</ol>\n<p>æˆ‘ä»¬çŸ¥é“è®¡ç®—å±æ€§çš„ç»“æœä¼šè¢«ç¼“å­˜ï¼Œä¸”åªæœ‰åœ¨è®¡ç®—å±æ€§æ‰€ä¾èµ–çš„å“åº”å¼å±æ€§æˆ–è€…è®¡ç®—å±æ€§çš„è¿”å›å€¼å‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šé‡æ–°è®¡ç®—ã€‚è¿™æ˜¯ç»“åˆ<code>Watcher</code>çš„<code>dirty</code>å±æ€§æ¥åˆ†è¾¨çš„ï¼šå½“<code>dirty===true</code>æ—¶ï¼Œè¯´æ˜éœ€è¦é‡æ–°è®¡ç®—â€œè®¡ç®—å±æ€§â€çš„è¿”å›å€¼ï¼›å½“è®¡ç®—å±æ€§ä¸­çš„å†…å®¹å‘ç”Ÿå˜åŒ–åï¼Œè®¡ç®—å±æ€§çš„<code>Watcher</code>ä¸ç»„ä»¶çš„<code>Watcher</code>éƒ½ä¼šå¾—åˆ°é€šçŸ¥ã€‚è®¡ç®—å±æ€§çš„<code>Watcher</code>ä¼šå°†è‡ªå·±çš„<code>dirty</code>å±æ€§è®¾ç½®ä¸ºtrueï¼Œå½“ä¸‹ä¸€æ¬¡è¯»å–è®¡ç®—å±æ€§æ—¶å°±ä¼šé‡æ–°è®¡ç®—ä¸€æ¬¡å€¼ã€‚ä¸æ­¤åŒæ—¶ç»„ä»¶çš„<code>Watcher</code>ä¹Ÿä¼šå¾—åˆ°é€šçŸ¥ï¼Œä»è€Œæ‰§è¡Œrenderå‡½æ•°è¿›è¡Œé‡æ–°æ¸²æŸ“çš„æ“ä½œã€‚ç”±äºè¦é‡æ–°æ‰§è¡Œ<code>render</code>å‡½æ•°ï¼Œæ‰€ä»¥ä¼šé‡æ–°è¯»å–è®¡ç®—å±æ€§çš„å€¼ï¼Œè¿™æ—¶å€™è®¡ç®—å±æ€§çš„Watcherå·²ç»æŠŠè‡ªå·±çš„<code>dirty</code>ç½®ä¸º<code>true</code>ï¼Œæ‰€ä»¥ä¼šé‡æ–°è®¡ç®—ä¸€æ¬¡è®¡ç®—å±æ€§çš„å€¼ç”¨äºæœ¬æ¬¡æ¸²æŸ“</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/computed-0.png\" alt=\"computedåŸç†0\"></p>\n<p>è¿™ç§æ–¹å¼å®ç°çš„computedæœ‰ä¸€ä¸ªå¼Šç«¯ï¼šåªæ˜¯è§‚å¯Ÿå®ƒæ‰€ç”¨åˆ°çš„æ•°æ®æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ï¼Œå¹¶<strong>æ²¡æœ‰çœŸæ­£å»æ ¡éªŒå®ƒè‡ªèº«çš„è¿”å›å€¼æ˜¯å¦æœ‰å˜åŒ–</strong>ï¼Œæ‰€ä»¥å½“å®ƒæ‰€ä½¿ç”¨çš„æ•°æ®å‘ç”Ÿå˜åŒ–åï¼Œç»„ä»¶<strong>æ€»ä¼šé‡æ–°èµ°ä¸€éæ¸²æŸ“æµç¨‹</strong>ã€‚</p>\n<p>ä¸ºè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ–°ç‰ˆè®¡ç®—å±æ€§åšäº†ä¸€äº›æ”¹åŠ¨ï¼šç»„ä»¶çš„Watcherä¸å†è§‚å¯Ÿè®¡ç®—å±æ€§ç”¨åˆ°çš„æ•°æ®çš„å˜åŒ–ï¼Œè€Œæ˜¯è®©è®¡ç®—å±æ€§çš„Watcherå¾—åˆ°é€šçŸ¥åè®¡ç®—ä¸€æ¬¡è®¡ç®—å±æ€§çš„å€¼ï¼Œå¦‚æœå‘ç°è¿™ä¸€æ¬¡è®¡ç®—å±æ€§çš„å€¼ä¸ä¸Šä¸€æ¬¡è®¡ç®—å‡ºæ¥çš„å€¼ä¸ä¸€æ ·ï¼Œå†å»ä¸»åŠ¨é€šçŸ¥ç»„ä»¶çš„Watcherè¿›è¡Œé‡æ–°æ¸²æŸ“æ“ä½œã€‚</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/computed-1.png\" alt=\"computedåŸç†1\"></p>\n"},{"title":"Vue.jsç ”è¯»-åŸºç¡€","tags":["Vue.js"],"categories":"Vue.js","description":"## Document.createDocumentFragment()\n\n`DocumentFragments` æ˜¯DOMèŠ‚ç‚¹ã€‚å®ƒä»¬ä¸æ˜¯ä¸»DOMæ ‘çš„ä¸€éƒ¨åˆ†ã€‚é€šå¸¸çš„ç”¨ä¾‹æ˜¯åˆ›å»ºæ–‡æ¡£ç‰‡æ®µï¼Œå°†å…ƒç´ é™„åŠ åˆ°æ–‡æ¡£ç‰‡æ®µï¼Œç„¶åå°†æ–‡æ¡£ç‰‡æ®µé™„åŠ åˆ°DOMæ ‘ã€‚åœ¨DOMæ ‘ä¸­ï¼Œæ–‡æ¡£ç‰‡æ®µè¢«å…¶æ‰€æœ‰çš„å­å…ƒç´ æ‰€ä»£æ›¿ã€‚\n\nå› ä¸ºæ–‡æ¡£ç‰‡æ®µå­˜åœ¨äº**å†…å­˜ä¸­**ï¼Œå¹¶ä¸åœ¨DOMæ ‘ä¸­ï¼Œæ‰€ä»¥å°†å­å…ƒç´ æ’å…¥åˆ°æ–‡æ¡£ç‰‡æ®µæ—¶ä¸ä¼šå¼•èµ·é¡µé¢[å›æµ](http","createDate":"2020-03-02 23:21:38","updateDate":"10/1/2021, 3:34:43 AM","body":"<h2 id=\"documentcreatedocumentfragment\">Document.createDocumentFragment()</h2>\n<p><code>DocumentFragments</code> æ˜¯DOMèŠ‚ç‚¹ã€‚å®ƒä»¬ä¸æ˜¯ä¸»DOMæ ‘çš„ä¸€éƒ¨åˆ†ã€‚é€šå¸¸çš„ç”¨ä¾‹æ˜¯åˆ›å»ºæ–‡æ¡£ç‰‡æ®µï¼Œå°†å…ƒç´ é™„åŠ åˆ°æ–‡æ¡£ç‰‡æ®µï¼Œç„¶åå°†æ–‡æ¡£ç‰‡æ®µé™„åŠ åˆ°DOMæ ‘ã€‚åœ¨DOMæ ‘ä¸­ï¼Œæ–‡æ¡£ç‰‡æ®µè¢«å…¶æ‰€æœ‰çš„å­å…ƒç´ æ‰€ä»£æ›¿ã€‚</p>\n<p>å› ä¸ºæ–‡æ¡£ç‰‡æ®µå­˜åœ¨äº<strong>å†…å­˜ä¸­</strong>ï¼Œå¹¶ä¸åœ¨DOMæ ‘ä¸­ï¼Œæ‰€ä»¥å°†å­å…ƒç´ æ’å…¥åˆ°æ–‡æ¡£ç‰‡æ®µæ—¶ä¸ä¼šå¼•èµ·é¡µé¢<a href=\"https://developer.mozilla.org/zh-CN/docs/Glossary/Reflow\">å›æµ</a>ï¼ˆå¯¹å…ƒç´ ä½ç½®å’Œå‡ ä½•ä¸Šçš„è®¡ç®—ï¼‰ã€‚å› æ­¤ï¼Œä½¿ç”¨æ–‡æ¡£ç‰‡æ®µé€šå¸¸ä¼šå¸¦æ¥æ›´å¥½çš„æ€§èƒ½ã€‚</p>\n<h2 id=\"nodenodetype\">node.nodeType</h2>\n<p>1 å…ƒç´ </p>\n<p>2 å±æ€§</p>\n<p>3 æ–‡æœ¬</p>\n<p>8 æ³¨é‡Š</p>\n<p>9 document</p>\n<h2 id=\"nodetextcontextã€nodeinnertext\">node.textContextã€node.innerText</h2>\n<p><code>textContent</code>ä¼šè·å–æ‰€æœ‰å…ƒç´ çš„å†…å®¹ï¼ŒåŒ…æ‹¬<code>script</code>å’Œ<code>style</code>å…ƒç´ ã€‚ç„¶è€Œ<code>innerText</code>åªå±•ç¤ºç»™äººçœ‹çš„å…ƒç´ </p>\n<p><code>textContext</code>ä¼šè¿”å›èŠ‚ç‚¹ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œç›¸åï¼Œ<code>innerText</code>å—<code>CSS</code>æ ·å¼çš„å½±å“ï¼Œä¸ä¼šè¿”å›éšè—å…ƒç´ çš„æ–‡æœ¬ï¼Œå¹¶ä¸”ä¼šè§¦å‘<a href=\"https://developer.mozilla.org/zh-CN/docs/Glossary/Reflow\">å›æµ</a>å»ç¡®ä¿æ˜¯æœ€æ–°çš„è®¡ç®—æ ·å¼</p>\n<p>ä¸<code>textContext</code>ä¸åŒçš„æ˜¯ï¼Œåœ¨IE11ä»¥åŠä¸‹ç‰ˆæœ¬ä¸­ï¼Œå¯¹<code>innerText</code>è¿›è¡Œä¿®æ”¹ï¼Œä¸ä»…ä¼šç§»é™¤å½“å‰å…ƒç´ çš„å­èŠ‚ç‚¹ï¼Œè€Œä¸”ä¼šæ°¸ä¹…æ€§çš„ç ´åæ‰€æœ‰åä»£æ–‡æœ¬èŠ‚ç‚¹ï¼Œåœ¨ä¹‹åä¸å¯èƒ½å†æ¬¡å°†èŠ‚ç‚¹åˆ°ä»»ä½•å…¶ä»–å…ƒç´ æˆ–åŒåŒä¸€å…ƒç´ </p>\n<h2 id=\"é€šè¿‡å­—ç¬¦ä¸²è·¯å¾„è·å–å¯¹è±¡å±æ€§çš„ç®€å•æ–¹æ³•ï¼ˆæš‚ä¸æ”¯æŒï¼‰\">é€šè¿‡å­—ç¬¦ä¸²è·¯å¾„è·å–å¯¹è±¡å±æ€§çš„ç®€å•æ–¹æ³•ï¼ˆæš‚ä¸æ”¯æŒ[]ï¼‰</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">parsePath</span> (obj, path) {\n    <span class=\"hljs-keyword\">return</span> path.<span class=\"hljs-title function_\">split</span>(<span class=\"hljs-string\">&quot;.&quot;</span>).<span class=\"hljs-title function_\">reduce</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">data, current</span>) =&gt;</span> data[current], obj)\n}\n\n<span class=\"hljs-keyword\">const</span> obj1 = {\n    <span class=\"hljs-attr\">tom</span>: {\n        <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;tom&quot;</span>,\n        <span class=\"hljs-attr\">age</span>: <span class=\"hljs-number\">23</span>\n    }\n}\n\n<span class=\"hljs-keyword\">const</span> res = <span class=\"hljs-title function_\">parsePath</span>(obj1, <span class=\"hljs-string\">&quot;tom.name&quot;</span>)\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(res);\n<span class=\"hljs-comment\">// tom</span>\n</code></pre>\n<h2 id=\"etargetå’Œecurrenttarget\">e.targetå’Œe.currentTarget</h2>\n<p>e.targetæŒ‡å‘è§¦å‘äº‹ä»¶çš„å¯¹è±¡</p>\n<p>e.currentTargetæŒ‡å‘æ·»åŠ ç›‘å¬äº‹ä»¶çš„å¯¹è±¡</p>\n<h2 id=\"vuejsæ•´ä½“æµç¨‹\">Vue.jsæ•´ä½“æµç¨‹</h2>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/vue-4.png\" alt=\"Vue.jsæ•´ä½“æµç¨‹\"></p>\n"},{"title":"Vue.jsç ”è¯»-æ¨¡æ¿ç¼–è¯‘","tags":["Vue.js","æ¨¡æ¿ç¼–è¯‘"],"categories":"Vue.js","description":"## æ¨¡æ¿ç¼–è¯‘\n\næ¨¡æ¿ç¼–è¯‘çš„ä¸»è¦ç›®æ ‡æ˜¯**ç”Ÿæˆæ¸²æŸ“å‡½æ•°**ã€‚è€Œæ¸²æŸ“å‡½æ•°çš„ä½œç”¨æ˜¯æ¯æ¬¡æ‰§è¡Œå®ƒï¼Œå®ƒå°±ä¼šä½¿ç”¨å½“å‰æœ€æ–°çš„çŠ¶æ€ç”Ÿæˆä¸€ä»½æ–°çš„vnodeï¼Œç„¶åä½¿ç”¨è¿™ä»½vnodeè¿›è¡Œæ¸²æŸ“ã€‚\n\n## å°†æ¨¡æ¿ç¼–è¯‘æˆæ¸²æŸ“å‡½æ•°\n\n- å°†æ¨¡æ¿ç¼–è¯‘æˆASTï¼ˆè§£æå™¨ï¼‰\n\n- éå†ASTæ ‡è®°é™æ€èŠ‚ç‚¹ï¼ˆä¼˜åŒ–å™¨ï¼‰\n\n- ä½¿ç”¨ASTç”Ÿæˆæ¸²æŸ“å‡½æ•°ï¼ˆä»£ç ç”Ÿæˆå™¨ï¼‰\n\n  ![æ¨¡æ¿ç¼–è¯‘æ•´ä½“æµç¨‹](https://mrrsblog.oss-c","createDate":"2020-03-05 22:54:17","updateDate":"10/1/2021, 3:34:43 AM","body":"<h2 id=\"æ¨¡æ¿ç¼–è¯‘\">æ¨¡æ¿ç¼–è¯‘</h2>\n<p>æ¨¡æ¿ç¼–è¯‘çš„ä¸»è¦ç›®æ ‡æ˜¯<strong>ç”Ÿæˆæ¸²æŸ“å‡½æ•°</strong>ã€‚è€Œæ¸²æŸ“å‡½æ•°çš„ä½œç”¨æ˜¯æ¯æ¬¡æ‰§è¡Œå®ƒï¼Œå®ƒå°±ä¼šä½¿ç”¨å½“å‰æœ€æ–°çš„çŠ¶æ€ç”Ÿæˆä¸€ä»½æ–°çš„vnodeï¼Œç„¶åä½¿ç”¨è¿™ä»½vnodeè¿›è¡Œæ¸²æŸ“ã€‚</p>\n<h2 id=\"å°†æ¨¡æ¿ç¼–è¯‘æˆæ¸²æŸ“å‡½æ•°\">å°†æ¨¡æ¿ç¼–è¯‘æˆæ¸²æŸ“å‡½æ•°</h2>\n<ul>\n<li><p>å°†æ¨¡æ¿ç¼–è¯‘æˆASTï¼ˆè§£æå™¨ï¼‰</p>\n</li>\n<li><p>éå†ASTæ ‡è®°é™æ€èŠ‚ç‚¹ï¼ˆä¼˜åŒ–å™¨ï¼‰</p>\n</li>\n<li><p>ä½¿ç”¨ASTç”Ÿæˆæ¸²æŸ“å‡½æ•°ï¼ˆä»£ç ç”Ÿæˆå™¨ï¼‰</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/%E6%A8%A1%E6%9D%BF%E7%BC%96%E8%AF%91-0.png\" alt=\"æ¨¡æ¿ç¼–è¯‘æ•´ä½“æµç¨‹\"></p>\n</li>\n</ul>\n<h2 id=\"è§£æå™¨\">è§£æå™¨</h2>\n<p>å°†æ¨¡æ¿ç¼–è¯‘æˆAST</p>\n<p>åœ¨è§£æå™¨å†…éƒ¨ï¼Œåˆ†æˆäº†å¾ˆå¤šå°è§£æå™¨ï¼Œå…¶ä¸­åŒ…æ‹¬è¿‡æ»¤è§£æå™¨ã€æ–‡æœ¬è§£æå™¨å’ŒHTMLè§£æå™¨ã€‚ç„¶åå†é€šè¿‡ä¸€æ¡ä¸»çº¿å°†è¿™äº›è§£æå™¨ç»„è£…åœ¨ä¸€èµ·ã€‚</p>\n<p>HTMLè§£æå™¨æ˜¯è§£æå™¨ä¸­æœ€æ ¸å¿ƒçš„æ¨¡å—ï¼Œå®ƒçš„ä½œç”¨æ˜¯è§£æHTMLæ¨¡æ¿ï¼Œæ¯å½“è§£æåˆ°HTMLæ ‡ç­¾çš„å¼€å§‹ä½ç½®ã€ç»“æŸä½ç½®ã€æ–‡æœ¬æˆ–æ³¨é‡Šæ—¶ï¼Œéƒ½ä¼š<strong>è§¦å‘é’©å­å‡½æ•°</strong>ï¼Œç„¶åå°†ç›¸å…³ä¿¡æ¯é€šè¿‡å‚æ•°ä¼ é€’å‡ºæ¥ã€‚åœ¨è§£ææœŸé—´ï¼Œä½¿ç”¨æ ˆæ¥è®°å½•å±‚çº§å…³ç³»ï¼ˆè§¦å‘starté’©å­å‡½æ•°æ—¶å…¥æ ˆï¼Œè§¦å‘endé’©å­å‡½æ•°æ—¶å‡ºæ ˆï¼‰ã€‚</p>\n<p>äº‹å®ä¸Šï¼Œè§£æHTMLæ¨¡æ¿çš„è¿‡ç¨‹å°±æ˜¯å¾ªç¯çš„è¿‡ç¨‹ï¼Œç®€å•æ¥è¯´å°±æ˜¯ç”¨HTMLæ¨¡æ¿å­—ç¬¦ä¸²æ¥å¾ªç¯ï¼Œæ¯è½®å¾ªç¯éƒ½ä»HTMLæ¨¡æ¿ä¸­æˆªå–ä¸€å°æ®µå­—ç¬¦ä¸²ï¼Œç„¶åé‡å¤ä¸Šè¿°è¿‡ç¨‹ğŸ‘†ï¼Œç›´åˆ°HTMLæ¨¡æ¿è¢«æˆªæˆä¸€ä¸ªç©ºå­—ç¬¦ä¸²æ—¶ç»“æŸã€‚</p>\n<p>æ–‡æœ¬è§£æå™¨çš„ä¸»è¦ä½œç”¨æ˜¯å¯¹HTMLè§£æå™¨è§£æå‡ºæ¥çš„æ–‡æœ¬è¿›è¡ŒäºŒæ¬¡åŠ å·¥ï¼Œå¤„ç†<strong>å¸¦å˜é‡</strong>çš„æ–‡æœ¬ã€‚HTMLè§£æå™¨åœ¨è§£ææ–‡æœ¬æ—¶å¹¶ä¸ä¼šåŒºåˆ†æ–‡æœ¬æ˜¯å¦æ˜¯å¸¦æœ‰å˜é‡çš„æ–‡æœ¬ï¼Œå¦‚æœæ˜¯çº¯æ–‡æœ¬ï¼Œä¸éœ€è¦è¿›è¡Œä»»ä½•å¤„ç†ï¼›ä½†å¦‚æœæ˜¯å¸¦å˜é‡çš„æ–‡æœ¬é‚£ä¸ªéœ€è¦ä½¿ç”¨æ–‡æœ¬è§£æå™¨è¿›ä¸€æ­¥è§£æã€‚</p>\n<h2 id=\"ä¼˜åŒ–å™¨\">ä¼˜åŒ–å™¨</h2>\n<p>ä¼˜åŒ–å™¨çš„ç›®æ ‡æ˜¯éå†ASTï¼Œæ£€æµ‹å‡ºæ‰€æœ‰é™æ€å­æ ‘ï¼ˆæ°¸è¿œä¸ä¼šå˜åŒ–çš„DOMèŠ‚ç‚¹ï¼‰å¹¶ç»™å…¶æ‰“æ ‡è®°</p>\n<p>æ ‡è®°é™æ€å­æ ‘æœ‰ä¸¤ç‚¹å¥½å¤„ï¼š</p>\n<ul>\n<li>æ¯æ¬¡é‡æ–°æ¸²æŸ“æ—¶ï¼Œä¸éœ€è¦ä¸ºé™æ€å­æ ‘åˆ›å»ºæ–°èŠ‚ç‚¹</li>\n<li>åœ¨è™šæ‹ŸDOMä¸­æ‰“è¡¥ä¸çš„è¿‡ç¨‹ä¸­å¯ä»¥è·³è¿‡</li>\n</ul>\n<p>ä¼˜åŒ–å™¨å†…éƒ¨å®ç°ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªæ­¥éª¤ï¼š</p>\n<ol>\n<li><p>åœ¨ASTä¸­æ‰¾å‡ºæ‰€æœ‰é™æ€èŠ‚ç‚¹å¹¶æ‰“ä¸Šæ ‡è®°ï¼ˆ<code>static === true</code>ï¼‰</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªé™æ€èŠ‚ç‚¹<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n</code></pre>\n</li>\n<li><p>åœ¨ASTä¸­ä¾›æ‰¾å‡ºæ‰€æœ‰é™æ€æ ¹èŠ‚ç‚¹å¹¶æ‰“ä¸Šæ ‡è®°ï¼ˆ<code>staticRoot === true</code>ï¼‰</p>\n<p>å¦‚æœä¸€ä¸ªèŠ‚ç‚¹ä¸‹è¾¹çš„æ‰€æœ‰<strong>å­èŠ‚ç‚¹éƒ½æ˜¯é™æ€èŠ‚ç‚¹</strong>ï¼Œå¹¶ä¸”å®ƒçš„<strong>çˆ¶çº§æ˜¯åŠ¨æ€èŠ‚ç‚¹</strong>ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯é™æ€æ ¹èŠ‚ç‚¹</p>\n</li>\n</ol>\n<h2 id=\"ä»£ç ç”Ÿæˆå™¨\">ä»£ç ç”Ÿæˆå™¨</h2>\n<p>ä»£ç ç”Ÿæˆå™¨æ˜¯æ¨¡æ¿ç¼–è¯‘çš„æœ€åä¸€æ­¥ï¼Œå®ƒçš„ä½œç”¨æ˜¯å°†ASTè½¬æ¢æˆæ¸²æŸ“å‡½æ•°ä¸­çš„å†…å®¹ï¼Œè¿™ä¸ªå†…å®¹ç§°ä¸º<strong>ä»£ç å­—ç¬¦ä¸²</strong>ã€‚ä¹‹åäº¤ç”±æ¸²æŸ“å‡½æ•°å¯¼å‡ºåˆ°å¤–ç•Œã€‚</p>\n<p>ä»£ç ç”Ÿæˆå™¨å…¶å®å°±æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥çš„è¿‡ç¨‹ã€‚é€šè¿‡é€’å½’ASTæ¥ç”Ÿæˆå­—ç¬¦ä¸²ï¼Œæœ€å…ˆç”Ÿæˆæ ¹èŠ‚ç‚¹ï¼Œç„¶ååœ¨å­èŠ‚ç‚¹å­—ç¬¦ä¸²ç”Ÿæˆåï¼Œå°†å…¶æ‹¼æ¥åœ¨æ ¹èŠ‚ç‚¹çš„å‚æ•°ä¸­ï¼Œå­èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ‹¼æ¥åœ¨å­èŠ‚ç‚¹çš„å‚æ•°ä¸­ï¼Œè¿™æ ·ä¸€å±‚ä¸€å±‚åœ°æ‹¼æ¥ï¼Œç›´åˆ°æœ€åæ‹¼æ¥æˆå®Œæ•´çš„å­—ç¬¦ä¸²ã€‚</p>\n<h2 id=\"æ¸²æŸ“å‡½æ•°\">æ¸²æŸ“å‡½æ•°</h2>\n<p>Vue.jsé€šè¿‡å°†æ¨¡æ¿ç¼–è¯‘è½¬æ¢æˆæ¸²æŸ“å‡½æ•°ï¼ˆrender functionï¼‰æ‰§è¡Œæ¸²æŸ“å‡½æ•°å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹æ ‘ï¼Œä½¿ç”¨è¿™ä¸ªè™šæ‹ŸèŠ‚ç‚¹æ ‘å°±å¯ä»¥æ¸²æŸ“ç•Œé¢ã€‚</p>\n"},{"title":"Vue.jsç ”è¯»-ç”Ÿå‘½å‘¨æœŸ","tags":["Vue.js"],"categories":"Vue.js","description":"## ç”Ÿå‘½å‘¨æœŸæ¦‚è§ˆ\n\n![ç”Ÿå‘½å‘¨æœŸ](https://mrrsblog.oss-cn-shanghai.aliyuncs.com/lifecycle.png)\n\n## ç”Ÿå‘½å‘¨æœŸå‡½æ•°\n\n- beforeCreate\n\n  `new Vue()`ä¹‹åè§¦å‘çš„ç¬¬ä¸€ä¸ªé’©å­ï¼Œåœ¨å½“å‰é˜¶æ®µ`data`ã€methodsã€`computed`ä»¥åŠwatchä¸Šçš„æ•°æ®å’Œæ–¹æ³•å‡ä¸èƒ½è¢«è®¿é—®\n\n- created\n\n  åœ¨","createDate":"2020-03-06 23:29:53","updateDate":"10/1/2021, 3:34:43 AM","body":"<h2 id=\"ç”Ÿå‘½å‘¨æœŸæ¦‚è§ˆ\">ç”Ÿå‘½å‘¨æœŸæ¦‚è§ˆ</h2>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/lifecycle.png\" alt=\"ç”Ÿå‘½å‘¨æœŸ\"></p>\n<h2 id=\"ç”Ÿå‘½å‘¨æœŸå‡½æ•°\">ç”Ÿå‘½å‘¨æœŸå‡½æ•°</h2>\n<ul>\n<li><p>beforeCreate</p>\n<p><code>new Vue()</code>ä¹‹åè§¦å‘çš„ç¬¬ä¸€ä¸ªé’©å­ï¼Œåœ¨å½“å‰é˜¶æ®µ<code>data</code>ã€methodsã€<code>computed</code>ä»¥åŠwatchä¸Šçš„æ•°æ®å’Œæ–¹æ³•å‡ä¸èƒ½è¢«è®¿é—®</p>\n</li>\n<li><p>created</p>\n<p>åœ¨å®ä¾‹åˆ›å»ºå®Œæˆä¹‹åè§¦å‘ï¼Œå½“å‰é˜¶æ®µå·²å®Œæˆäº†æ•°æ®è§‚æµ‹ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥ä½¿ç”¨æ•°æ®ï¼Œæ›´æ”¹æ•°æ®ï¼Œåœ¨è¿™ä¸ªæ›´æ”¹æ•°æ®ä¸ä¼šè§¦å‘<code>updated</code>å‡½æ•°ã€‚å¯ä»¥åšä¸€äº›<strong>åˆå§‹æ•°æ®çš„è·å–</strong>ï¼Œåœ¨å½“å‰é˜¶æ®µæ— æ³•è·å–DOMï¼ˆå¯ä½¿ç”¨vm.$nextTickï¼‰</p>\n</li>\n<li><p>beforeMounte</p>\n<p>å‘ç”Ÿåœ¨æŒ‚è½½ä¹‹å‰ï¼Œåœ¨è¿™ä¹‹å‰templateæ¨¡æ¿å·²å¯¼å…¥æ¸²æŸ“å‡½æ•°ç¼–è¯‘ã€‚è€Œå½“å‰é˜¶æ®µè™šæ‹ŸDOMå·²åˆ›å»ºå®Œæˆï¼Œå³å°†å¼€å§‹æ¸²æŸ“ã€‚åœ¨æ­¤æ—¶ä¹Ÿå¯ä»¥å¯¹æ•°æ®è¿›è¡Œæ›´æ”¹ï¼Œä¸ä¼šè§¦å‘<code>updated</code></p>\n</li>\n<li><p>mounted</p>\n<p>åœ¨æŒ‚è½½ä¹‹åè¢«è§¦å‘ã€‚åœ¨å½“å‰é˜¶æ®µï¼ŒçœŸå®çš„DOMè¢«æŒ‚è½½å®Œæ¯•ï¼Œæ•°æ®å®ŒæˆåŒå‘ç»‘å®šï¼Œå¯ä»¥è®¿é—®åˆ°DOMé˜¶æ®µï¼Œä½¿ç”¨$refå±æ€§å¯¹DOMè¿›è¡Œæ“ä½œ</p>\n</li>\n<li><p>beforeUpdate</p>\n<p>åœ¨ç•Œé¢å‘ç”Ÿæ›´æ–°ä¹‹å‰è¢«è§¦å‘ã€‚ä¹Ÿå°±æ˜¯å“åº”å¼æ•°æ®å‘ç”Ÿæ”¹å˜ä¹‹å‰ã€è™šæ‹ŸDOMé‡æ–°æ¸²æŸ“ä¹‹å‰è¢«è§¦å‘ï¼Œå¯ä»¥åœ¨æ­¤é˜¶æ®µè¿›è¡Œæ›´æ”¹æ•°æ®ï¼Œä¸ä¼šé€ æˆé‡æ¸²æŸ“</p>\n</li>\n<li><p>updated</p>\n<p>åœ¨å‘ç”Ÿæ›´æ–°ä¹‹åè¢«è§¦å‘ã€‚å½“å‰é˜¶æ®µDOMå·²å®Œæˆæ›´æ–°ã€‚è¦æ³¨æ„çš„æ˜¯é¿å…åœ¨æ­¤æœŸé—´æ›´æ”¹æ•°æ®ï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šå¯¼è‡´æ— é™å¾ªç¯çš„æ›´æ–°</p>\n</li>\n<li><p>beforeDestory</p>\n<p>åœ¨å®ä¾‹è¢«é”€æ¯ä¹‹å‰è§¦å‘ã€‚åœ¨å½“å‰é˜¶æ®µå®ä¾‹å®Œå…¨å¯ä»¥è¢«ä½¿ç”¨ï¼Œå¯ä»¥åœ¨æ­¤é˜¶æ®µåšäº›å–„åå·¥ä½œï¼Œå¦‚æ¸…é™¤å®šæ—¶å™¨</p>\n</li>\n<li><p>destoryed</p>\n<p>åœ¨å®ä¾‹è¢«é”€æ¯ä¹‹åè§¦å‘ã€‚è¿™ä¸ªæ—¶å€™åªå‰©ä¸‹DOMï¼Œç»„ä»¶å·²è¢«æ‹†è§£ï¼Œæ•°æ®ç»‘å®šè¢«å¸è½½ã€ç›‘å¬è¢«ç§»é™¤ã€å­å®ä¾‹ä¹Ÿç»Ÿç»Ÿè¢«é”€æ¯</p>\n</li>\n</ul>\n<h2 id=\"ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°è°ƒç”¨é¡ºåº\">ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°è°ƒç”¨é¡ºåº</h2>\n<ul>\n<li><p>åŠ è½½æ¸²æŸ“é¡ºåº</p>\n<p>çˆ¶beforeCreateğŸ‘‰çˆ¶createdğŸ‘‰çˆ¶beforeMmountğŸ‘‰å­beforeCreateğŸ‘‰å­createdğŸ‘‰å­beforeMountğŸ‘‰å­mountedğŸ‘‰çˆ¶mounted</p>\n</li>\n<li><p>æ›´æ–°é¡ºåº</p>\n<p>çˆ¶beforeUpdateğŸ‘‰å­beforeUpdateğŸ‘‰å­updatedğŸ‘‰çˆ¶updated</p>\n</li>\n<li><p>é”€æ¯é¡ºåº</p>\n<p>çˆ¶beforeDestoryğŸ‘‰å­beforeDestoryğŸ‘‰å­destoryedğŸ‘‰çˆ¶destoryed</p>\n</li>\n</ul>\n"},{"title":"Vue.jsç ”è¯»-è™šæ‹ŸDOM","tags":["Vue.js","è™šæ‹ŸDOM"],"categories":"Vue.js","description":"## Vue.jsä¸ºä»€ä¹ˆè¦å¼•å…¥è™šæ‹ŸDOM\n\nè™šæ‹ŸDOMæ˜¯é€šè¿‡çŠ¶æ€ç”Ÿæˆä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹æ ‘ï¼Œç„¶åä½¿ç”¨è™šæ‹ŸèŠ‚ç‚¹æ ‘è¿›è¡Œæ¸²æŸ“ã€‚åœ¨æ¸²æŸ“ä¹‹å‰ï¼Œä¼šä½¿ç”¨æ–°ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹æ ‘å’Œä¸Šæ¬¡ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹æ ‘è¿›è¡Œå¯¹æ¯”ï¼Œåªæ¸²æŸ“ä¸åŒçš„éƒ¨åˆ†\n\nåœ¨Vue.jsä¸­ï¼Œå½“çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒåœ¨ä¸€å®šç¨‹åº¦ä¸ŠçŸ¥é“å“ªäº›èŠ‚ç‚¹ä½¿ç”¨äº†è¿™ä¸ªçŠ¶æ€ï¼Œä»è€Œå¯¹è¿™äº›èŠ‚ç‚¹è¿›è¡Œæ›´æ–°æ“ä½œï¼Œæ ¹æœ¬ä¸éœ€è¦æ¯”å¯¹ï¼ˆVue.js 1.0ï¼‰ã€‚ä½†è¿™æ ·åšç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼šå› ä¸ºç²’åº¦å¤ªç»†ï¼Œæ¯ä¸€ä¸ªç»‘å®šéƒ½ä¼šæœ‰","createDate":"2020-03-04 23:18:13","updateDate":"10/1/2021, 3:34:43 AM","body":"<h2 id=\"vuejsä¸ºä»€ä¹ˆè¦å¼•å…¥è™šæ‹Ÿdom\">Vue.jsä¸ºä»€ä¹ˆè¦å¼•å…¥è™šæ‹ŸDOM</h2>\n<p>è™šæ‹ŸDOMæ˜¯é€šè¿‡çŠ¶æ€ç”Ÿæˆä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹æ ‘ï¼Œç„¶åä½¿ç”¨è™šæ‹ŸèŠ‚ç‚¹æ ‘è¿›è¡Œæ¸²æŸ“ã€‚åœ¨æ¸²æŸ“ä¹‹å‰ï¼Œä¼šä½¿ç”¨æ–°ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹æ ‘å’Œä¸Šæ¬¡ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹æ ‘è¿›è¡Œå¯¹æ¯”ï¼Œåªæ¸²æŸ“ä¸åŒçš„éƒ¨åˆ†</p>\n<p>åœ¨Vue.jsä¸­ï¼Œå½“çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒåœ¨ä¸€å®šç¨‹åº¦ä¸ŠçŸ¥é“å“ªäº›èŠ‚ç‚¹ä½¿ç”¨äº†è¿™ä¸ªçŠ¶æ€ï¼Œä»è€Œå¯¹è¿™äº›èŠ‚ç‚¹è¿›è¡Œæ›´æ–°æ“ä½œï¼Œæ ¹æœ¬ä¸éœ€è¦æ¯”å¯¹ï¼ˆVue.js 1.0ï¼‰ã€‚ä½†è¿™æ ·åšç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼šå› ä¸ºç²’åº¦å¤ªç»†ï¼Œæ¯ä¸€ä¸ªç»‘å®šéƒ½ä¼šæœ‰ä¸€ä¸ªå¯¹åº”çš„watcheræ¥è§‚å¯ŸçŠ¶æ€çš„å˜åŒ–ï¼Œè¿™æ ·å°±ä¼šæœ‰ä¸€äº›å†…å­˜å¼€é”€ä»¥åŠä¾èµ–è¿½è¸ªçš„å¼€é”€ã€‚å½“çŠ¶æ€è¢«è¶Šæ¥è¶Šå¤šçš„èŠ‚ç‚¹ä½¿ç”¨æ—¶ï¼Œå¼€é”€å°±è¶Šå¤§ã€‚</p>\n<p>å› æ­¤Vue.js 2.0å¼€å§‹é€‰æ‹©äº†ä¸€ä¸ªä¸­ç­‰ç²’åº¦çš„è§£å†³æ–¹æ¡ˆï¼Œé‚£å°±æ˜¯å¼•å…¥è™šæ‹ŸDOMã€‚ç»„ä»¶çº§åˆ«æ˜¯ä¸€ä¸ªwatcherå®ä¾‹ã€‚å°±æ˜¯è¯´å³ä½¿ä¸€ä¸ªç»„ä»¶å†…æœ‰10ä¸ªèŠ‚ç‚¹ä½¿ç”¨äº†æŸä¸ªçŠ¶æ€ï¼Œä½†å…¶å®ä¹Ÿåªæœ‰ä¸€ä¸ªwatcheråœ¨è§‚å¯Ÿè¿™ä¸ªçŠ¶æ€çš„å˜åŒ–ã€‚æ‰€ä»¥å½“è¿™ä¸ªçŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œåªèƒ½é€šçŸ¥åˆ°ç»„ä»¶ï¼Œç„¶åç»„ä»¶å†…éƒ¨é€šè¿‡è™šæ‹ŸDOMå»è¿›è¡Œæ¯”å¯¹æ¸²æŸ“ï¼Œè¿™æ˜¯ä¸€ä¸ªæŠ˜ä¸­æ–¹æ¡ˆ</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/%E8%99%9A%E6%8B%9FDOM-0.png\" alt=\"è™šæ‹ŸDOM\"></p>\n<h2 id=\"vnode\">VNode</h2>\n<p>vnodeå¯ä»¥ç†è§£æˆèŠ‚ç‚¹æè¿°å¯¹è±¡ï¼Œå®ƒæè¿°äº†åº”è¯¥æ€æ ·å»åˆ›å»ºçœŸå®çš„DOMèŠ‚ç‚¹ã€‚æ¸²æŸ“è§†å›¾çš„è¿‡ç¨‹æ˜¯å…ˆåˆ›å»ºvnodeï¼Œç„¶åå†ä½¿ç”¨vnodeå»ç”ŸæˆçœŸå®çš„DOMå…ƒç´ ï¼Œæœ€åå†æ’å…¥åˆ°é¡µé¢æ¸²æŸ“è§†å›¾</p>\n<p>vnodeçš„ç±»å‹åŒ…æ‹¬ï¼šæ³¨é‡ŠèŠ‚ç‚¹(isComment=true)ã€æ–‡æœ¬èŠ‚ç‚¹ã€å…ƒç´ èŠ‚ç‚¹(å…·æœ‰tagå±æ€§)ã€ç»„ä»¶èŠ‚ç‚¹ã€å‡½æ•°å¼ç»„ä»¶ã€å…‹éš†èŠ‚ç‚¹</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/%E8%99%9A%E6%8B%9FDOM-1.png\" alt=\"è™šæ‹ŸDOM\"></p>\n<h2 id=\"patch\">patch</h2>\n<p>å¯¹æ¯”ä¸¤ä¸ªvnodeä¹‹é—´çš„å·®å¼‚åªæ˜¯patchçš„ä¸€éƒ¨åˆ†ï¼Œè¿™æ˜¯æ‰‹æ®µï¼Œè€Œä¸æ˜¯ç›®çš„ã€‚patchçš„ç›®çš„æ˜¯ä¿®æ”¹DOMèŠ‚ç‚¹ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºæ¸²æŸ“è§†å›¾ã€‚åŒ…æ‹¬ï¼šåˆ›å»ºæ–°å¢çš„èŠ‚ç‚¹ã€åˆ é™¤å·²ç»åºŸå¼ƒçš„èŠ‚ç‚¹ã€ä¿®æ”¹éœ€è¦æ›´æ–°çš„èŠ‚ç‚¹</p>\n<p>pathçš„æ ¸å¿ƒç®—æ³•diffæ˜¯é€šè¿‡<strong>åŒå±‚</strong>çš„æ ‘èŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒè€Œéå¯¹æ ‘è¿›è¡Œé€å±‚éå†çš„æ–¹å¼ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦åªæœ‰O(n)</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/patch-0.png\" alt=\"\"></p>\n<ul>\n<li><p>åˆ›å»ºæ–°èŠ‚ç‚¹</p>\n<p>äº‹å®ä¸Šï¼Œåªæœ‰ä¸‰ç§ç±»å‹çš„èŠ‚ç‚¹ä¼šè¢«åˆ›å»ºå¹¶æ’å…¥åˆ°DOMä¸­ï¼šå…ƒç´ èŠ‚ç‚¹ã€æ³¨é‡ŠèŠ‚ç‚¹ã€æ–‡æœ¬èŠ‚ç‚¹</p>\n<ul>\n<li>oldVnodeä¸­ä¸å­˜åœ¨è€Œvnodeä¸­å­˜åœ¨</li>\n<li>oldVnodeå’Œvnodeå®Œå…¨ä¸æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹</li>\n</ul>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/%E8%99%9A%E6%8B%9FDOM-2.png\" alt=\"åˆ›å»ºèŠ‚ç‚¹\"></p>\n</li>\n<li><p>åˆ é™¤èŠ‚ç‚¹</p>\n<p>æŸä¸ªèŠ‚ç‚¹åªåœ¨oldVnodeä¸­å­˜åœ¨</p>\n</li>\n<li><p>æ›´æ–°èŠ‚ç‚¹</p>\n<p>oldVnodeå’Œvnodeç›¸åŒï¼ˆé€šè¿‡sameVnodeåˆ¤æ–­ï¼‰</p>\n<p>åˆ¤æ–­ä¾æ®ï¼škeyã€tagã€isCommentã€dataã€inputçš„typeå‡ç›¸åŒ</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/%E8%99%9A%E6%8B%9FDOM-3.png\" alt=\"æ›´æ–°èŠ‚ç‚¹\"></p>\n</li>\n</ul>\n<h2 id=\"dom-diffè¿‡ç¨‹\">DOM Diffè¿‡ç¨‹</h2>\n<p>ç®€å•æ¥è¯´ï¼Œdiffæœ‰ä»¥ä¸‹è¿‡ç¨‹ï¼š</p>\n<ol>\n<li>åŒçº§æ¯”è¾ƒï¼Œå†æ¯”è¾ƒå­èŠ‚ç‚¹</li>\n<li>å…ˆåˆ¤æ–­ä¸€æ–¹æœ‰å­èŠ‚ç‚¹è€Œå¦ä¸€æ–¹æ²¡æœ‰å­èŠ‚ç‚¹çš„æƒ…å†µ</li>\n<li>æ¯”è¾ƒéƒ½æœ‰å­èŠ‚ç‚¹çš„æƒ…å†µï¼ˆæ ¸å¿ƒdiffç®—æ³•ï¼‰</li>\n<li>é€’å½’æ¯”è¾ƒå­èŠ‚ç‚¹</li>\n</ol>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/diff-0.png\" alt=\"diffè¿‡ç¨‹\"></p>\n<h2 id=\"æ ¸å¿ƒdiffç®—æ³•\">æ ¸å¿ƒDIFFç®—æ³•</h2>\n<p>Vue2.0é‡‡ç”¨äº†<strong>åŒç«¯æ¯”è¾ƒ</strong>çš„ç®—æ³•ï¼šåŒæ—¶ä»æ–°æ—§childrençš„ä¸¤ç«¯å¼€å§‹è¿›è¡Œæ¯”è¾ƒï¼Œå€ŸåŠ©keyå€¼å¯ä»¥æ‰¾åˆ°å¯å¤ç”¨çš„èŠ‚ç‚¹ï¼Œå†è¿›è¡Œç›¸å…³æ“ä½œã€‚\n<img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/diff-1.png\" alt=\"diff-1\"></p>\n"},{"title":"go-gin-åŸºç¡€","tags":["go","gin"],"categories":"go","description":"# è·å–`GET` `path`å‚æ•°\n``` go\n  func main() {\n    r := gin.Default()\n    r.GET(\"/index/:id\", func(context *gin.Context){\n      r.JOSN(http.StatusOK, gin.H{\n        \"id\": context.Param(\"id\"),\n      })","createDate":"2020-01-14 14:05:44","updateDate":"10/1/2021, 3:34:43 AM","body":"<h1 id=\"è·å–get-pathå‚æ•°\">è·å–<code>GET</code> <code>path</code>å‚æ•°</h1>\n<pre><code class=\"hljs language-go\">  <span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span></span> {\n    r := gin.Default()\n    r.GET(<span class=\"hljs-string\">&quot;/index/:id&quot;</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span><span class=\"hljs-params\">(context *gin.Context)</span></span>{\n      r.JOSN(http.StatusOK, gin.H{\n        <span class=\"hljs-string\">&quot;id&quot;</span>: context.Param(<span class=\"hljs-string\">&quot;id&quot;</span>),\n      })\n    })\n  }\n</code></pre>\n<h1 id=\"è·å–post-raw-jsonå‚æ•°\">è·å–<code>POST</code> <code>raw json</code>å‚æ•°</h1>\n<ol>\n<li>å®šä¹‰ä¸€ä¸ªå…¬ç”¨<code>struct</code>ï¼Œç”¨äºæ ‡å‡†è¿”å›æ•°æ®æ ¼å¼<pre><code class=\"hljs language-go\">  <span class=\"hljs-keyword\">type</span> ResBodyS <span class=\"hljs-keyword\">struct</span> {\n ErrCode <span class=\"hljs-type\">int</span> <span class=\"hljs-string\">`json:&quot;errCode&quot;`</span>\n Desc <span class=\"hljs-type\">string</span> <span class=\"hljs-string\">`json:&quot;description&quot; binding:&quot;required&quot;`</span> <span class=\"hljs-comment\">//å‚æ•°å­˜åœ¨æ€§æ ¡éªŒ</span>\n  }\n</code></pre>\n</li>\n<li>å®šä¹‰é’ˆå¯¹äºç‰¹å®šæ¥å£çš„<code>struct</code><pre><code class=\"hljs language-go\">  <span class=\"hljs-keyword\">type</span> IndexReqBodyS <span class=\"hljs-keyword\">struct</span> {\n ResBodyS\n Data <span class=\"hljs-type\">string</span> <span class=\"hljs-string\">`json:&quot;index&quot;`</span>\n  }\n</code></pre>\n</li>\n<li>ä½¿ç”¨<code>context.BindJSON()</code>è§£æè¯·æ±‚ä¸­çš„bodyå‚æ•°<pre><code class=\"hljs language-go\">  <span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span></span> {\n r := gin,Default()\n r.POST(<span class=\"hljs-string\">&quot;/index&quot;</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span><span class=\"hljs-params\">(context *gin.Context)</span></span>{\n   <span class=\"hljs-keyword\">var</span> reqInfo IndexReqBodyS\n   err := context.BindJSON(&amp;reqInfo)\n   <span class=\"hljs-keyword\">if</span> err != <span class=\"hljs-literal\">nil</span> {\n     fmt.PrintFln(<span class=\"hljs-string\">&quot;parse json data error! err:&quot;</span>, err)\n     <span class=\"hljs-keyword\">return</span>\n   }\n   context.JSON(http.StatusOK, reqInfo)\n })\n r.Run(<span class=\"hljs-string\">&quot;:9090&quot;</span>)\n  }\n</code></pre>\n</li>\n</ol>\n<h1 id=\"æ•è·å¼‚å¸¸\">æ•è·å¼‚å¸¸</h1>\n<p>åœ¨ Go ä¸­å¼‚å¸¸å°±æ˜¯<code>panic</code>ï¼Œå®ƒæ˜¯åœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™æŠ›å‡ºçš„ï¼Œå½“<code>panic</code>æŠ›å‡ºä¹‹åï¼Œå¦‚æœåœ¨ç¨‹åºé‡Œæ²¡æœ‰æ·»åŠ ä»»ä½•ä¿æŠ¤æªæ–½çš„è¯ï¼Œæ§åˆ¶å°å°±ä¼šåœ¨æ‰“å°å‡º<code>panic</code>çš„è¯¦ç»†æƒ…å†µï¼Œç„¶åç»ˆæ­¢è¿è¡Œã€‚\nå½“ç¨‹åºå‘ç”Ÿ<code>panic</code>åï¼Œåœ¨<code>defer</code>(å»¶è¿Ÿå‡½æ•°) å†…éƒ¨å¯ä»¥è°ƒç”¨<code>recover</code>è¿›è¡Œæ•è·ã€‚</p>\n<pre><code class=\"hljs language-go\">  <span class=\"hljs-keyword\">defer</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span><span class=\"hljs-params\">()</span></span> {\n    err := <span class=\"hljs-built_in\">recover</span>();\n    <span class=\"hljs-keyword\">if</span> err != <span class=\"hljs-literal\">nil</span> {\n      fmp.Println(err)\n    }\n  }\n</code></pre>\n<h1 id=\"å•å…ƒæµ‹è¯•\">å•å…ƒæµ‹è¯•</h1>\n<p>ä½¿ç”¨<code>net/http/httptest</code>åŒ…\nä¸åŸç”Ÿæµ‹è¯•ç›¸æ¯”ï¼Œä½¿ç”¨<code>gin.Engine.ServeHTTP</code>å‘é€è¯·æ±‚(åŸç”Ÿä½¿ç”¨<code>http.HandlerFunc.ServeHTTP</code>)</p>\n<pre><code class=\"hljs language-go\"><span class=\"hljs-keyword\">var</span> engine *gin.Engine\n\n<span class=\"hljs-keyword\">const</span> accessToken = <span class=\"hljs-string\">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1ODA5OTE1NTUsInVzZXJfaWQiOjE4LCJuYW1lIjoidGVzdDEifQ.900X9t3qveW0NGn3_FhYxHXlgsLAdl1BkjfKxNlBNyE&quot;</span>\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">CreateRequest</span><span class=\"hljs-params\">(method constant.HttpRequestMethod, url <span class=\"hljs-type\">string</span>, params <span class=\"hljs-keyword\">interface</span>{})</span></span> (status constant.ResultCode, resBody *util.ResS, returnError <span class=\"hljs-type\">error</span>) {\n    <span class=\"hljs-keyword\">if</span> engine == <span class=\"hljs-literal\">nil</span> {\n        gin.SetMode(gin.ReleaseMode)\n        engine = gin.New()\n        database.SetUpDatabase()\n        controller.SetupRouter(engine)\n    }\n\n    <span class=\"hljs-keyword\">var</span> (\n        rr        = httptest.NewRecorder()\n        req       = <span class=\"hljs-built_in\">new</span>(http.Request)\n        err <span class=\"hljs-type\">error</span> = <span class=\"hljs-literal\">nil</span>\n    )\n    <span class=\"hljs-keyword\">if</span> params != <span class=\"hljs-literal\">nil</span> {\n        tmp, err := json.Encode(params)\n        <span class=\"hljs-keyword\">if</span> err != <span class=\"hljs-literal\">nil</span> {\n            <span class=\"hljs-keyword\">return</span> constant.FAILED, <span class=\"hljs-literal\">nil</span>, err\n        }\n        req, err = http.NewRequest(<span class=\"hljs-type\">string</span>(method), url, bytes.NewBuffer([]<span class=\"hljs-type\">byte</span>(tmp)))\n    } <span class=\"hljs-keyword\">else</span> {\n        req, err = http.NewRequest(<span class=\"hljs-type\">string</span>(method), url, <span class=\"hljs-literal\">nil</span>)\n    }\n    <span class=\"hljs-keyword\">if</span> err != <span class=\"hljs-literal\">nil</span> {\n        <span class=\"hljs-keyword\">return</span> constant.FAILED, <span class=\"hljs-literal\">nil</span>, err\n    }\n\n    req.Header.Add(<span class=\"hljs-string\">&quot;Authorization&quot;</span>, fmt.Sprintf(<span class=\"hljs-string\">&quot;Bear %s&quot;</span>, accessToken))\n    engine.ServeHTTP(rr, req)\n\n    formatRes := util.ResS{}\n    err = json.Decode(rr.Body.Bytes(), &amp;formatRes)\n    <span class=\"hljs-keyword\">if</span> err != <span class=\"hljs-literal\">nil</span> {\n        <span class=\"hljs-keyword\">return</span> constant.FAILED, <span class=\"hljs-literal\">nil</span>, err\n    }\n    <span class=\"hljs-keyword\">return</span> constant.SUCCESS, &amp;formatRes, <span class=\"hljs-literal\">nil</span>\n}\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">CreateTest</span><span class=\"hljs-params\">(t *testing.T, method constant.HttpRequestMethod, url <span class=\"hljs-type\">string</span>, params <span class=\"hljs-keyword\">interface</span>{})</span></span> {\n    _, resBody, err := CreateRequest(method, url, params)\n    <span class=\"hljs-keyword\">if</span> err != <span class=\"hljs-literal\">nil</span> {\n        t.Errorf(<span class=\"hljs-string\">&quot;got error: %s&quot;</span>, err.Error())\n        <span class=\"hljs-keyword\">return</span>\n    }\n    <span class=\"hljs-keyword\">if</span> resBody != <span class=\"hljs-literal\">nil</span> {\n        <span class=\"hljs-keyword\">if</span> resBody.Code != constant.SUCCESS {\n            t.Errorf(<span class=\"hljs-string\">&quot;GetInfo test failed, got: %v, info: %s&quot;</span>, resBody.Data, resBody.Message)\n        }\n    }\n}\n</code></pre>\n"},{"title":"go-æé€Ÿå…¥é—¨","tags":["go"],"categories":"go","description":"# ä¾èµ–åŒ…ç®¡ç†å·¥å…·\n\n- dep\n  æœªå®Œå¾…ç»­...\n- go vendor\n  æœªå®Œå¾…ç»­...\n- glide\n  æœªå®Œå¾…ç»­...\n- **go modules**\n  \n  ä¼´éšGo 1.11å‡ºç°ï¼Œ**å®˜æ–¹æ¨è**\n\n# go mod å‘½ä»¤\n- `go mod tidy`\n  \n  æ‹‰å–ç¼ºå°‘çš„æ¨¡å—ï¼Œç§»é™¤ä¸ç”¨çš„æ¨¡å—\n- `go mod vandor`\n  \n  å°†ä¾èµ–å¤åˆ¶åˆ°vendorä¸‹\n-","createDate":"2020-01-14 13:43:45","updateDate":"10/1/2021, 3:34:43 AM","body":"<h1 id=\"ä¾èµ–åŒ…ç®¡ç†å·¥å…·\">ä¾èµ–åŒ…ç®¡ç†å·¥å…·</h1>\n<ul>\n<li><p>dep\næœªå®Œå¾…ç»­...</p>\n</li>\n<li><p>go vendor\næœªå®Œå¾…ç»­...</p>\n</li>\n<li><p>glide\næœªå®Œå¾…ç»­...</p>\n</li>\n<li><p><strong>go modules</strong></p>\n<p>ä¼´éšGo 1.11å‡ºç°ï¼Œ<strong>å®˜æ–¹æ¨è</strong></p>\n</li>\n</ul>\n<h1 id=\"go-mod-å‘½ä»¤\">go mod å‘½ä»¤</h1>\n<ul>\n<li><p><code>go mod tidy</code></p>\n<p>æ‹‰å–ç¼ºå°‘çš„æ¨¡å—ï¼Œç§»é™¤ä¸ç”¨çš„æ¨¡å—</p>\n</li>\n<li><p><code>go mod vandor</code></p>\n<p>å°†ä¾èµ–å¤åˆ¶åˆ°vendorä¸‹</p>\n</li>\n<li><p><code>go mod download</code></p>\n<p>ä¸‹è½½ä¾èµ–åŒ…</p>\n</li>\n<li><p><code>go mod verify</code></p>\n<p>æ£€æµ‹ä¾èµ–</p>\n</li>\n<li><p><code>go mod graph</code></p>\n<p>æ‰“å°æ¨¡å—ä¾èµ–å›¾</p>\n</li>\n</ul>\n<h1 id=\"åˆ‡ç‰‡\">åˆ‡ç‰‡</h1>\n<h2 id=\"åˆ‡ç‰‡å°±åƒæ•°ç»„çš„å¼•ç”¨\">åˆ‡ç‰‡å°±åƒæ•°ç»„çš„å¼•ç”¨</h2>\n<h2 id=\"åˆ‡ç‰‡æ‹¥æœ‰-é•¿åº¦-å’Œ-å®¹é‡\">åˆ‡ç‰‡æ‹¥æœ‰ <em>é•¿åº¦</em> å’Œ <em>å®¹é‡</em></h2>\n<ul>\n<li>åˆ‡ç‰‡çš„é•¿åº¦å°±æ˜¯å®ƒæ‰€åŒ…å«çš„å…ƒç´ ä¸ªæ•°ã€‚</li>\n<li>åˆ‡ç‰‡çš„å®¹é‡æ˜¯ä»å®ƒçš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹æ•°ï¼Œåˆ°å…¶åº•å±‚æ•°ç»„å…ƒç´ æœ«å°¾çš„ä¸ªæ•°ã€‚</li>\n<li>åˆ‡ç‰‡ s çš„é•¿åº¦å’Œå®¹é‡å¯é€šè¿‡è¡¨è¾¾å¼ <code>len(s)</code> å’Œ <code>cap(s)</code> æ¥è·å–ã€‚</li>\n</ul>\n<h2 id=\"åˆ‡ç‰‡å¯ä»¥ç”¨å†…å»ºå‡½æ•°-make-æ¥åˆ›å»ºï¼Œè¿™ä¹Ÿæ˜¯åˆ›å»ºåŠ¨æ€æ•°ç»„çš„æ–¹å¼ã€‚make-å‡½æ•°ä¼šåˆ†é…ä¸€ä¸ªå…ƒç´ ä¸ºé›¶å€¼çš„æ•°ç»„å¹¶è¿”å›ä¸€ä¸ªå¼•ç”¨äº†å®ƒçš„åˆ‡ç‰‡ï¼š\">åˆ‡ç‰‡å¯ä»¥ç”¨å†…å»ºå‡½æ•° <code>make</code> æ¥åˆ›å»ºï¼Œè¿™ä¹Ÿæ˜¯åˆ›å»ºåŠ¨æ€æ•°ç»„çš„æ–¹å¼ã€‚<code>make</code> å‡½æ•°ä¼šåˆ†é…ä¸€ä¸ªå…ƒç´ ä¸ºé›¶å€¼çš„æ•°ç»„å¹¶è¿”å›ä¸€ä¸ªå¼•ç”¨äº†å®ƒçš„åˆ‡ç‰‡ï¼š</h2>\n<pre><code class=\"hljs language-go\">a := <span class=\"hljs-built_in\">make</span>([]<span class=\"hljs-type\">int</span>, <span class=\"hljs-number\">5</span>)  <span class=\"hljs-comment\">// len(a)=5</span>\n\n<span class=\"hljs-comment\">// è¦æŒ‡å®šå®ƒçš„å®¹é‡ï¼Œéœ€å‘ make ä¼ å…¥ç¬¬ä¸‰ä¸ªå‚æ•°ï¼š</span>\nb := <span class=\"hljs-built_in\">make</span>([]<span class=\"hljs-type\">int</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">5</span>) <span class=\"hljs-comment\">// len(b)=0, cap(b)=5</span>\nb = b[:<span class=\"hljs-built_in\">cap</span>(b)] <span class=\"hljs-comment\">// len(b)=5, cap(b)=5</span>\nb = b[<span class=\"hljs-number\">1</span>:]      <span class=\"hljs-comment\">// len(b)=4, cap(b)=4</span>\n</code></pre>\n<h2 id=\"å‘åˆ‡ç‰‡è¿½åŠ å…ƒç´ \">å‘åˆ‡ç‰‡è¿½åŠ å…ƒç´ </h2>\n<p>append çš„ç¬¬ä¸€ä¸ªå‚æ•° s æ˜¯ä¸€ä¸ªå…ƒç´ ç±»å‹ä¸º T çš„åˆ‡ç‰‡ï¼Œå…¶ä½™ç±»å‹ä¸º T çš„å€¼å°†ä¼šè¿½åŠ åˆ°è¯¥åˆ‡ç‰‡çš„æœ«å°¾ã€‚append çš„ç»“æœæ˜¯ä¸€ä¸ªåŒ…å«åŸåˆ‡ç‰‡æ‰€æœ‰å…ƒç´ åŠ ä¸Šæ–°æ·»åŠ å…ƒç´ çš„åˆ‡ç‰‡ã€‚å½“ s çš„åº•å±‚æ•°ç»„å¤ªå°ï¼Œä¸è¶³ä»¥å®¹çº³æ‰€æœ‰ç»™å®šçš„å€¼æ—¶ï¼Œå®ƒå°±ä¼šåˆ†é…ä¸€ä¸ª(<strong>capå€¼ç¿»å€</strong>)æ›´å¤§çš„æ•°ç»„ã€‚è¿”å›çš„åˆ‡ç‰‡ä¼šæŒ‡å‘è¿™ä¸ªæ–°åˆ†é…çš„æ•°ç»„ã€‚</p>\n<pre><code class=\"hljs language-go\"><span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">&quot;fmt&quot;</span>\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span></span> {\n    <span class=\"hljs-keyword\">var</span> s []<span class=\"hljs-type\">int</span>\n    printSlice(s)\n    <span class=\"hljs-comment\">// len=0 cap=0 []</span>\n\n    <span class=\"hljs-comment\">// capä¸å¤Ÿç”¨â€”â€”&gt;capç¿»å€â€”â€”&gt;cap=2</span>\n    s = <span class=\"hljs-built_in\">append</span>(s, <span class=\"hljs-number\">0</span>)\n    printSlice(s)\n    <span class=\"hljs-comment\">// len=1 cap=2 [0]</span>\n\n    <span class=\"hljs-comment\">// capå¤Ÿç”¨â€”â€”&gt;ä¿æŒä¸å˜â€”â€”&gt;cap=2</span>\n    s = <span class=\"hljs-built_in\">append</span>(s, <span class=\"hljs-number\">1</span>)\n    printSlice(s)\n    <span class=\"hljs-comment\">// len=2 cap=2 [0 1]</span>\n\n    <span class=\"hljs-comment\">// capä¸å¤Ÿç”¨â€”â€”&gt;capç¿»å€â€”â€”&gt;cap=8</span>\n    s = <span class=\"hljs-built_in\">append</span>(s, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>)\n    printSlice(s)\n    <span class=\"hljs-comment\">// len=5 cap=8 [0 1 2 3 4]</span>\n\n    <span class=\"hljs-comment\">// capå¤Ÿç”¨â€”â€”&gt;capä¿æŒä¸å˜â€”â€”&gt;cap=8</span>\n    s = <span class=\"hljs-built_in\">append</span>(s, <span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">6</span>, <span class=\"hljs-number\">7</span>)\n    printSlice(s)\n    <span class=\"hljs-comment\">// len=8 cap=8 [0 1 2 3 4 5 6 7]</span>\n}\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">printSlice</span><span class=\"hljs-params\">(s []<span class=\"hljs-type\">int</span>)</span></span> {\n    fmt.Printf(<span class=\"hljs-string\">&quot;len=%d cap=%d %v\\n&quot;</span>, <span class=\"hljs-built_in\">len</span>(s), <span class=\"hljs-built_in\">cap</span>(s), s)\n}\n</code></pre>\n<h1 id=\"map-æ— åºçš„-key-value-æ•°æ®ç»“æ„\"><code>map</code>-æ— åºçš„ <code>key-value</code> æ•°æ®ç»“æ„</h1>\n<p>mapé›†åˆä¸­çš„ <code>key/value</code> å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œä½†æ‰€æœ‰<code>key</code>å¿…é¡»åŒå±äºä¸€ç§æ•°æ®ç±»å‹ï¼Œæ‰€æœ‰çš„<code>value</code>å¿…é¡»åŒå±äºä¸€ç§æ•°æ®ç±»å‹ã€‚<code>key</code> å’Œ <code>value</code> çš„æ•°æ®ç±»å‹å¯ä»¥ä¸ç›¸åŒ</p>\n<h1 id=\"forå¾ªç¯\"><code>for</code>å¾ªç¯</h1>\n<pre><code class=\"hljs language-go\">person := [<span class=\"hljs-number\">3</span>]<span class=\"hljs-type\">string</span> { <span class=\"hljs-string\">&quot;tom&quot;</span>, <span class=\"hljs-string\">&quot;john&quot;</span>, <span class=\"hljs-string\">&quot;jerry&quot;</span> }\n\n<span class=\"hljs-keyword\">for</span> k, v := <span class=\"hljs-keyword\">range</span> person {\n  fmt.Printf(<span class=\"hljs-string\">&quot;person[%d]: %s\\n&quot;</span>, k, v)\n}\n</code></pre>\n<h1 id=\"goå…³é”®å­—\"><code>go</code>å…³é”®å­—</h1>\n<p>åœ¨goå…³é”®å­—åé¢åŠ ä¸€ä¸ªå‡½æ•°ï¼Œå°±å¯ä»¥åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œå‡½æ•°å¯ä»¥ä¸ºå·²ç»å†™å¥½çš„å‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯åŒ¿åå‡½æ•°</p>\n<pre><code class=\"hljs language-go\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span></span> {\n  fmt.Printf(<span class=\"hljs-string\">&quot;main start&quot;</span>)\n  <span class=\"hljs-keyword\">go</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span><span class=\"hljs-params\">()</span></span> {\n    fmt.Println(<span class=\"hljs-string\">&quot;goroutine&quot;</span>)\n  }()\n  time.sleep(<span class=\"hljs-number\">1</span> * time.Second)\n  fmt.Printf(<span class=\"hljs-string\">&quot;main end&quot;</span>)\n}\n</code></pre>\n<h1 id=\"chan-ç±»ä¼¼äºé˜Ÿåˆ—ï¼Œéµå¾ªå…ˆè¿›å…ˆå‡ºçš„è§„åˆ™\"><code>chan</code>-ç±»ä¼¼äºé˜Ÿåˆ—ï¼Œéµå¾ªå…ˆè¿›å…ˆå‡ºçš„è§„åˆ™</h1>\n<h2 id=\"å£°æ˜chan\">å£°æ˜<code>chan</code></h2>\n<pre><code class=\"hljs language-go\"><span class=\"hljs-comment\">// å£°æ˜ä¸å¸¦ç¼“å†²çš„é€šé“</span>\nch1 := <span class=\"hljs-built_in\">make</span>(<span class=\"hljs-keyword\">chan</span> <span class=\"hljs-type\">string</span>)\n\n<span class=\"hljs-comment\">// å£°æ˜å¸¦10ä¸ªç¼“å†²çš„é€šé“</span>\nch2 := <span class=\"hljs-built_in\">make</span>(<span class=\"hljs-keyword\">chan</span> <span class=\"hljs-type\">string</span>, <span class=\"hljs-number\">10</span>)\n\n<span class=\"hljs-comment\">// å£°æ˜åªè¯»é€šé“</span>\nch3 := <span class=\"hljs-built_in\">make</span>(&lt;-<span class=\"hljs-keyword\">chan</span> <span class=\"hljs-type\">string</span>)\n\n<span class=\"hljs-comment\">// å£°æ˜åªå†™é€šé“</span>\nch4 := <span class=\"hljs-built_in\">make</span>(<span class=\"hljs-keyword\">chan</span>&lt;- <span class=\"hljs-type\">string</span>)\n</code></pre>\n<p>ä¸å¸¦ç¼“å†²çš„é€šé“ï¼Œè¿›ä½•å¤„éƒ½ä¼šé˜»å¡\nå¸¦ç¼“å†²çš„é€šé“ï¼Œè¿›ä¸€æ¬¡é•¿åº¦+1ï¼Œå‡ºä¸€æ¬¡é•¿åº¦-1ï¼Œå¦‚æœé•¿åº¦ç­‰äºç¼“å†²åŒºé•¿åº¦æ—¶ï¼Œå†è¿›å°±ä¼šé˜»å¡</p>\n<h2 id=\"å†™å…¥chan\">å†™å…¥<code>chan</code></h2>\n<pre><code class=\"hljs language-go\">ch1 := <span class=\"hljs-built_in\">make</span>(<span class=\"hljs-keyword\">chan</span> <span class=\"hljs-type\">string</span>, <span class=\"hljs-number\">10</span>)\nch1 &lt;- <span class=\"hljs-string\">&quot;a&quot;</span>\n</code></pre>\n<h2 id=\"è¯»å–chan\">è¯»å–<code>chan</code></h2>\n<pre><code class=\"hljs language-go\">val, ok := &lt;- ch1\nval := &lt;- ch1\n</code></pre>\n<h2 id=\"å…³é—­chan\">å…³é—­<code>chan</code></h2>\n<pre><code class=\"hljs language-go\"><span class=\"hljs-built_in\">close</span>(<span class=\"hljs-keyword\">chan</span>)\n</code></pre>\n<pre><code class=\"hljs language-go\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">productor</span><span class=\"hljs-params\">(ch <span class=\"hljs-keyword\">chan</span> <span class=\"hljs-type\">string</span>)</span></span> {\n  fmt.Println(<span class=\"hljs-string\">&quot;producer start&quot;</span>)\n  ch &lt;- <span class=\"hljs-string\">&quot;a&quot;</span>\n  ch &lt;- <span class=\"hljs-string\">&quot;b&quot;</span>\n  ch &lt;- <span class=\"hljs-string\">&quot;c&quot;</span>\n  ch &lt;- <span class=\"hljs-string\">&quot;d&quot;</span>\n  fmt.Println(<span class=\"hljs-string\">&quot;producer end&quot;</span>)\n}\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span></span> {\n  fmt.Println(<span class=\"hljs-string\">&quot;main start&quot;</span>)\n  ch := <span class=\"hljs-built_in\">make</span>(<span class=\"hljs-keyword\">chan</span> <span class=\"hljs-type\">string</span>, <span class=\"hljs-number\">3</span>)\n  <span class=\"hljs-keyword\">go</span> producer(ch)\n\n  time.Sleep(<span class=\"hljs-number\">1</span> * time.Second)\n  fmt.Println(<span class=\"hljs-string\">&quot;main end&quot;</span>)\n}\n\n<span class=\"hljs-comment\">// main start</span>\n<span class=\"hljs-comment\">// producer start  å‘ç”Ÿé˜»å¡</span>\n<span class=\"hljs-comment\">// main end</span>\n</code></pre>\n<h1 id=\"defer\"><code>defer</code></h1>\n<p>ä¸»è¦åº”ç”¨åœºæ™¯æœ‰å¼‚å¸¸å¤„ç†ã€è®°å½•æ—¥å¿—ã€æ¸…ç†æ•°æ®ã€é‡Šæ”¾èµ„æº ç­‰ç­‰ã€‚</p>\n<ul>\n<li><code>defer</code>åœ¨å£°æ˜æ—¶ä¸ä¼šç«‹åˆ»å»æ‰§è¡Œï¼Œè€Œæ˜¯åœ¨å‡½æ•° <code>return</code> åå»æ‰§è¡Œçš„ã€‚</li>\n<li><code>defer</code>å‡½æ•°å®šä¹‰çš„é¡ºåºä¸å®é™…æ‰§è¡Œçš„é¡ºåºæ˜¯ç›¸åçš„ï¼Œä¹Ÿå°±æ˜¯æœ€å…ˆå£°æ˜çš„æœ€åæ‰æ‰§è¡Œ</li>\n</ul>\n<pre><code class=\"hljs language-go\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span></span> {\n  <span class=\"hljs-keyword\">defer</span> fmt.Println(<span class=\"hljs-string\">&quot;a&quot;</span>)\n  <span class=\"hljs-keyword\">defer</span> fmt.Println(<span class=\"hljs-string\">&quot;b&quot;</span>)\n  <span class=\"hljs-keyword\">defer</span> fmt.Println(<span class=\"hljs-string\">&quot;c&quot;</span>)\n  <span class=\"hljs-keyword\">defer</span> fmt.Println(<span class=\"hljs-string\">&quot;d&quot;</span>)\n\n  fmt.Println(<span class=\"hljs-string\">&quot;main&quot;</span>)\n}\n\n<span class=\"hljs-comment\">// main</span>\n<span class=\"hljs-comment\">// d</span>\n<span class=\"hljs-comment\">// c</span>\n<span class=\"hljs-comment\">// b</span>\n<span class=\"hljs-comment\">// a</span>\n</code></pre>\n<pre><code class=\"hljs language-go\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">calc</span><span class=\"hljs-params\">(index <span class=\"hljs-type\">string</span>, a, b <span class=\"hljs-type\">int</span>)</span></span> <span class=\"hljs-type\">int</span> {\n    ret := a + b\n    fmt.Println(index, a, b, ret)\n    <span class=\"hljs-keyword\">return</span> ret\n}\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span></span> {\n    x := <span class=\"hljs-number\">1</span>\n    y := <span class=\"hljs-number\">2</span>\n    <span class=\"hljs-keyword\">defer</span> calc(<span class=\"hljs-string\">&quot;A&quot;</span>, x, calc(<span class=\"hljs-string\">&quot;B&quot;</span>, x, y))\n    x = <span class=\"hljs-number\">3</span>\n    <span class=\"hljs-keyword\">defer</span> calc(<span class=\"hljs-string\">&quot;C&quot;</span>, x, calc(<span class=\"hljs-string\">&quot;D&quot;</span>, x, y))\n    y = <span class=\"hljs-number\">4</span>\n}\n\n<span class=\"hljs-comment\">// B 1 2 3</span>\n<span class=\"hljs-comment\">// D 3 2 5</span>\n<span class=\"hljs-comment\">// C 3 5 8</span>\n<span class=\"hljs-comment\">// A 1 3 4</span>\n</code></pre>\n<h1 id=\"interface\"><code>interface</code></h1>\n<h2 id=\"åŸºæœ¬\">åŸºæœ¬</h2>\n<ul>\n<li>ä¸€ç§<strong>æŠ½è±¡</strong>ç±»å‹</li>\n</ul>\n<pre><code class=\"hljs language-go\"><span class=\"hljs-keyword\">package</span> main\n\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">&quot;fmt&quot;</span>\n\n<span class=\"hljs-keyword\">type</span> Sayer <span class=\"hljs-keyword\">interface</span> {\n    say()\n}\n\n<span class=\"hljs-keyword\">type</span> Cat <span class=\"hljs-keyword\">struct</span> {\n    Sayer\n}\n\n<span class=\"hljs-keyword\">type</span> Dog <span class=\"hljs-keyword\">struct</span> {\n    Sayer\n}\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(cat *Cat)</span></span> say() {\n    fmt.Println(<span class=\"hljs-string\">&quot;miao miao miao~&quot;</span>)\n}\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(dog *Dog)</span></span> say() {\n    fmt.Println(<span class=\"hljs-string\">&quot;wang wang wang~&quot;</span>)\n}\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span></span> {\n    <span class=\"hljs-keyword\">var</span> dog Dog\n    dog.say()\n    <span class=\"hljs-keyword\">var</span> cat Cat\n    cat.say()\n}\n</code></pre>\n<h2 id=\"ç©ºæ¥å£çš„åº”ç”¨\">ç©ºæ¥å£çš„åº”ç”¨</h2>\n<ul>\n<li>ç©ºæ¥å£ä½œä¸ºå‡½æ•°çš„å‚æ•°</li>\n<li>ç©ºæ¥å£ä½œä¸º<code>map</code>çš„å€¼</li>\n<li>ç±»å‹æ–­è¨€<pre><code class=\"hljs language-go\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span></span> {\n  <span class=\"hljs-keyword\">var</span> x <span class=\"hljs-keyword\">interface</span>{}\n  x = <span class=\"hljs-string\">&quot;hello world&quot;</span>\n  v, ok := x.(<span class=\"hljs-type\">string</span>)\n  <span class=\"hljs-keyword\">if</span> ok {\n      fmt.Println(v)\n  } <span class=\"hljs-keyword\">else</span> {\n      fmt.Println(<span class=\"hljs-string\">&quot;ç±»å‹æ–­è¨€å¤±è´¥&quot;</span>)\n  }\n}\n</code></pre>\n</li>\n</ul>\n<h1 id=\"å•å…ƒæµ‹è¯•\">å•å…ƒæµ‹è¯•</h1>\n<p>Goè¯­è¨€ä¸­çš„æµ‹è¯•ä¾èµ–<code>go test</code>å‘½ä»¤ã€‚ç¼–å†™æµ‹è¯•ä»£ç å’Œç¼–å†™æ™®é€šçš„<code>Go</code>ä»£ç è¿‡ç¨‹æ˜¯ç±»ä¼¼çš„ã€‚</p>\n<p><code>go test</code>å‘½ä»¤æ˜¯ä¸€ä¸ªæŒ‰ç…§ä¸€å®šçº¦å®šå’Œç»„ç»‡çš„æµ‹è¯•ä»£ç çš„é©±åŠ¨ç¨‹åºã€‚åœ¨åŒ…ç›®å½•å†…ï¼Œæ‰€æœ‰ä»¥<code>_test.go</code>ä¸ºåç¼€åçš„æºä»£ç æ–‡ä»¶éƒ½æ˜¯<code>go test</code>æµ‹è¯•çš„ä¸€éƒ¨åˆ†ï¼Œä¸ä¼šè¢«<code>go build</code>ç¼–è¯‘åˆ°æœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚</p>\n<p>åœ¨<code>*_test.go</code>æ–‡ä»¶ä¸­æœ‰ä¸‰ç§ç±»å‹çš„å‡½æ•°ï¼Œå•å…ƒæµ‹è¯•å‡½æ•°ã€åŸºå‡†æµ‹è¯•å‡½æ•°å’Œç¤ºä¾‹å‡½æ•°ã€‚</p>\n<table>\n<thead>\n<tr>\n<th>ç±»å‹</th>\n<th align=\"left\">æ ¼å¼</th>\n<th>ä½œç”¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>æµ‹è¯•å‡½æ•°</td>\n<td align=\"left\">å‡½æ•°åå‰ç¼€ä¸º<code>Test</code></td>\n<td>æµ‹è¯•ç¨‹åºçš„ä¸€äº›é€»è¾‘è¡Œä¸ºæ˜¯å¦æ­£ç¡®</td>\n</tr>\n<tr>\n<td>åŸºå‡†å‡½æ•°</td>\n<td align=\"left\">å‡½æ•°åå‰ç¼€ä¸º<code>Benchmark</code></td>\n<td>æµ‹è¯•å‡½æ•°çš„æ€§èƒ½</td>\n</tr>\n<tr>\n<td>ç¤ºä¾‹å‡½æ•°</td>\n<td align=\"left\">å‡½æ•°åå‰ç¼€ä¸º<code>Example</code></td>\n<td>ä¸ºæ–‡æ¡£æä¾›ç¤ºä¾‹æ–‡æ¡£</td>\n</tr>\n</tbody></table>\n<p>æµ‹è¯•å‡½æ•°å®ä¾‹</p>\n<pre><code class=\"hljs language-go\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">TestName</span><span class=\"hljs-params\">(t *testing.T)</span></span>{\n  <span class=\"hljs-comment\">// ...</span>\n}\n</code></pre>\n"},{"title":"hello world","tags":["tags"],"categories":"hello","description":"","createDate":"2018-11-08 15:04:00","updateDate":"10/1/2021, 3:34:43 AM","body":""},{"title":"vue-routerå‰–æ","tags":["Vue.js","vue-router"],"categories":"Vue.js","description":"# è·¯ç”±\r\n\r\nè·¯ç”±æœ€æ—©ç”±åç«¯æå‡ºï¼Œç”¨äºæ ¹æ®ä¸åŒçš„è¯·æ±‚è¿”å›ä¸åŒçš„é¡µé¢ã€‚å¤§è‡´æµç¨‹å¦‚ä¸‹ï¼š\r\n\r\n1. æµè§ˆå™¨å‘å‡ºè¯·æ±‚\r\n2. æœåŠ¡å™¨ç›‘å¬åˆ°ç«¯å£æœ‰è¯·æ±‚è¿‡æ¥\r\n3. æ ¹æ®æœåŠ¡å™¨çš„è·¯ç”±é…ç½®ï¼Œè¿”å›ç›¸åº”ä¿¡æ¯ï¼ˆå¯ä»¥æ˜¯htmlã€jsonã€å›¾ç‰‡ç­‰ï¼‰\r\n4. æµè§ˆå™¨æ ¹æ®æ•°æ®åŒ…çš„`Context-Type`æ¥å†³å®šå¦‚ä½•è§£æ\r\n\r\n# å‰ç«¯è·¯ç”±\r\n\r\néšç€`ajax`çš„æµè¡Œï¼Œå¼‚æ­¥æ•°æ®è¯·æ±‚äº¤äº’åœ¨ä¸åˆ·æ–°æµè§ˆå™¨çš„æƒ…å†µä¸‹è¿è¡Œ","createDate":"2020-03-09 22:05:40","updateDate":"10/1/2021, 3:34:43 AM","body":"<h1 id=\"è·¯ç”±\">è·¯ç”±</h1>\n<p>è·¯ç”±æœ€æ—©ç”±åç«¯æå‡ºï¼Œç”¨äºæ ¹æ®ä¸åŒçš„è¯·æ±‚è¿”å›ä¸åŒçš„é¡µé¢ã€‚å¤§è‡´æµç¨‹å¦‚ä¸‹ï¼š</p>\n<ol>\n<li>æµè§ˆå™¨å‘å‡ºè¯·æ±‚</li>\n<li>æœåŠ¡å™¨ç›‘å¬åˆ°ç«¯å£æœ‰è¯·æ±‚è¿‡æ¥</li>\n<li>æ ¹æ®æœåŠ¡å™¨çš„è·¯ç”±é…ç½®ï¼Œè¿”å›ç›¸åº”ä¿¡æ¯ï¼ˆå¯ä»¥æ˜¯htmlã€jsonã€å›¾ç‰‡ç­‰ï¼‰</li>\n<li>æµè§ˆå™¨æ ¹æ®æ•°æ®åŒ…çš„<code>Context-Type</code>æ¥å†³å®šå¦‚ä½•è§£æ</li>\n</ol>\n<h1 id=\"å‰ç«¯è·¯ç”±\">å‰ç«¯è·¯ç”±</h1>\n<p>éšç€<code>ajax</code>çš„æµè¡Œï¼Œå¼‚æ­¥æ•°æ®è¯·æ±‚äº¤äº’åœ¨ä¸åˆ·æ–°æµè§ˆå™¨çš„æƒ…å†µä¸‹è¿è¡Œã€‚è€Œå¼‚æ­¥äº¤äº’ä½“éªŒçš„é«˜çº§ç‰ˆæœ¬å°±æ˜¯SPA-å•é¡µåº”ç”¨ã€‚å•é¡µåº”ç”¨ä¸ä»…ä»…æ˜¯åœ¨é¡µé¢äº¤äº’æ˜¯æ— åˆ·æ–°çš„ï¼Œè¿é¡µé¢è·³è½¬éƒ½æ˜¯æ— åˆ·æ–°çš„ï¼Œä¸ºäº†å®ç°å•é¡µåº”ç”¨ï¼Œæ‰€ä»¥å°±æœ‰äº†å‰ç«¯è·¯ç”±ã€‚ç±»ä¼¼äºåç«¯è·¯ç”±ï¼Œå‰ç«¯è·¯ç”±å°±æ˜¯åŒ¹é…ä¸åŒçš„urlè·¯å¾„è¿›è¡Œè§£æï¼Œç„¶ååŠ¨æ€æ¸²æŸ“htmlå†…å®¹ã€‚</p>\n<h2 id=\"hashæ¨¡å¼\">hashæ¨¡å¼</h2>\n<p><code>https://www.xxx.com/#/hash</code></p>\n<p>è¿™ç§<code>#</code>åé¢<code>hash</code>å€¼å¾—å˜åŒ–ï¼Œå¹¶ä¸ä¼šè§¦å‘æ–°çš„è¯·æ±‚ï¼Œå› æ­¤ä¹Ÿä¸ä¼šåˆ·æ–°é¡µé¢ã€‚æ¯æ¬¡<code>hash</code>å€¼çš„å˜åŒ–éƒ½ä¼šè§¦å‘<code>hashchange</code>äº‹ä»¶ï¼Œé€šè¿‡è¿™ä¸ªäº‹ä»¶å°±å¯ä»¥çŸ¥é“æ›´æ–°å“ªäº›é¡µé¢å†…å®¹</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">onhashchange</span> = <span class=\"hljs-function\"><span class=\"hljs-params\">e</span> =&gt;</span> {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(e.<span class=\"hljs-property\">oldURL</span>, e.<span class=\"hljs-property\">newURL</span>)\n    <span class=\"hljs-keyword\">const</span> hash = location.<span class=\"hljs-property\">hash</span>.<span class=\"hljs-title function_\">slice</span>(<span class=\"hljs-number\">1</span>)\n    app.<span class=\"hljs-property\">innerHTML</span> = hash\n}\n</code></pre>\n<h2 id=\"historyæ¨¡å¼\">historyæ¨¡å¼</h2>\n<p><code>https://www.xxx.com/login</code></p>\n<p>éšç€HTML5çš„å‘å¸ƒï¼Œå¸¦æ¥äº†ä¸¤ä¸ªæ–°çš„APIï¼š<code>pushState</code>å’Œ<code>replaceState</code>ï¼Œé€šè¿‡è¿™ä¸¤ä¸ªAPIå¯ä»¥æ”¹å˜urlåœ°å€ä¸”ä¸ä¼šå‘é€è¯·æ±‚ã€‚åŒæ—¶è¿˜æœ‰<code>popstate</code>äº‹ä»¶ç”¨æ¥ç›‘å¬urlçš„æ”¹å˜ã€‚ä½¿ç”¨historyæ¨¡å¼ï¼Œurlå°±ä¸ä¼šå‡ºç°ä¸‘é™‹çš„<code>#</code>ï¼Œurlä¹Ÿå˜å¾—æ¯”è¾ƒç¾è§‚ã€‚</p>\n<p>é€šè¿‡history apiå»æ‰äº†ä¸‘é™‹çš„<code>#</code>ï¼Œä½†ä¹Ÿå­˜åœ¨é—®é¢˜ï¼šä¸æ€•å‰è¿›/åé€€ï¼Œå°±æ€•<strong>åˆ·æ–°</strong>ã€‚å› ä¸ºåˆ·æ–°æ˜¯å»è¯·æ±‚æœåŠ¡å™¨çš„ï¼Œåœ¨<code>hash</code>ä¸‹ï¼Œå‰ç«¯è·¯ç”±ä¿®æ”¹çš„æ˜¯#ä¹‹åçš„å†…å®¹ï¼Œåœ¨å‘é€è¯·æ±‚æ—¶æ˜¯ä¸ä¼šå¸¦ä¸Šçš„ï¼Œä½†åœ¨historyä¸‹å¯ä»¥è‡ªç”±åœ°ä¿®æ”¹è·¯å¾„ã€å‚æ•°ï¼Œå½“åˆ·æ–°æ—¶ï¼Œå¦‚æœæœåŠ¡å™¨ä¸­æ²¡æœ‰ç›¸åº”çš„å“åº”æˆ–èµ„æºï¼Œå®¹æ˜“çˆ†<code>404</code></p>\n<h1 id=\"vue-routeræ ¸å¿ƒåŸç†\">vue-routeræ ¸å¿ƒåŸç†</h1>\n<ol>\n<li><p>é€šè¿‡<code>new VueRouter</code>ä¸­çš„<code>mode</code>å‚æ•°æ¥é€‰æ‹©ä½¿ç”¨é‚£ç§è·¯ç”±æ¨¡å¼</p>\n</li>\n<li><p>åœ¨<code>router</code>ä¸­ä½¿ç”¨<code>current</code>ä¿å­˜å½“å‰url</p>\n</li>\n<li><p>ä½œä¸ºä¸€ä¸ªæ’ä»¶ï¼Œå¤§éƒ¨åˆ†åŠŸèƒ½éƒ½åœ¨<code>install</code>å‡½æ•°ä¸­å®Œæˆ</p>\n</li>\n<li><p>åœ¨<code>install</code>ä¸­ä½¿ç”¨<code>Vue.mixin</code>æ³¨å…¥çš„<code>beforeCreate</code>æ¥ç»™ç»„ä»¶æ·»åŠ å…¨å±€å”¯ä¸€çš„<code>router</code>å®ä¾‹ï¼ˆæŒ‚è½½åœ¨æ ¹ç»„ä»¶ä¸Šï¼Œå…¶ä½™ç»„ä»¶é€šè¿‡<code>$parent._routerRoot._router</code>æŒ‚è½½ï¼‰</p>\n</li>\n<li><p>ä½¿ç”¨<code>popstate</code>æˆ–<code>hashchange</code>ä¸¤ä¸ªäº‹ä»¶æ¥ç›‘å¬urlå˜åŒ–ï¼ˆé’ˆå¯¹äºæ‰‹åŠ¨è¾“å…¥urlï¼‰å¹¶è®¾ç½®<code>current</code></p>\n</li>\n<li><p>ä½¿ç”¨<code>Vue.util.defineReactive(this, &#39;_route&#39;, this._router.history.current)</code>æ¥ä½¿<code>router</code>å˜ä¸ºå“åº”å¼</p>\n<p>currentå˜åŒ–    ğŸ‘‰    é‡æ–°æ¸²æŸ“<code>router-view</code>ä¸­çš„ç»„ä»¶ </p>\n</li>\n<li><p>è§£æè·¯ç”±é…ç½®ä»è€Œå¯ä»¥æ›´åŠ ä¾¿åˆ©åœ°æ‰¾åˆ°urlæ‰€å¯¹åº”çš„é¡µé¢</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-title class_\">Array</span>&lt;{ <span class=\"hljs-attr\">name</span>: component }&gt;\n</code></pre>\n<p>ğŸ‘‡</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-title class_\">Map</span>&lt;{ <span class=\"hljs-attr\">name</span>: component }&gt;\n</code></pre>\n</li>\n<li><p>å®ç°<code>&lt;router-link&gt;&lt;/router-link&gt;</code>å’Œ<code>&lt;router-view / &gt;</code>ä¸¤ä¸ªç»„ä»¶</p>\n</li>\n</ol>\n<h1 id=\"æ€»ç»“\">æ€»ç»“</h1>\n<p><code>vue-router</code>ä»¥æ’ä»¶æ–¹å¼ä¾µå…¥<code>Vue</code>ï¼Œä»è€Œæ”¯æŒä¸€ä¸ªé¢å¤–çš„<code>router</code>å±æ€§ï¼Œä»¥æä¾›ç›‘å¬å¹¶æ”¹å˜ç»„ä»¶è·¯ç”±æ•°æ®çš„èƒ½åŠ›ï¼Œè¿™æ ·æ¯æ¬¡è·¯ç”±å‘ç”Ÿå˜åŒ–åï¼Œå¯ä»¥åŒæ­¥åˆ°æ•°æ®ï¼Œä»è€Œå“åº”å¼åœ°è§¦å‘ç»„ä»¶çš„æ›´æ–°</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/vue-router.png\" alt=\"vue-router\"></p>\n"},{"title":"vuexå‰–æ","tags":["Vue.js","vuex"],"categories":"Vue.js","description":"vuexæ˜¯ä¸“é—¨ä¸ºVue.jsè®¾è®¡çš„**çŠ¶æ€ç®¡ç†å·¥å…·**ï¼Œå®ƒé‡‡ç”¨**é›†ä¸­å¼å­˜å‚¨**ç®¡ç†åº”ç”¨çš„æ‰€æœ‰çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚\n\n## vuexçš„æ„æˆ\n\n- å¼•å…¥`State`ã€`Getter`å¯¹çŠ¶æ€è¿›è¡Œå®šä¹‰\n\n- ä½¿ç”¨`Mutation`ã€`Action`å¯¹çŠ¶æ€è¿›è¡Œä¿®æ”¹\n\n- ä½¿ç”¨`Module`å¯¹çŠ¶æ€è¿›è¡Œæ¨¡å—åŒ–åˆ†å‰²\n\n- å¼•å…¥æ’ä»¶å¯¹çŠ¶æ€è¿›è¡Œå¿«ç…§ã€è®°å½•ã€è·Ÿè¸ªç­‰\n\n-","createDate":"2020-03-10 20:50:56","updateDate":"10/1/2021, 3:34:43 AM","body":"<p>vuexæ˜¯ä¸“é—¨ä¸ºVue.jsè®¾è®¡çš„<strong>çŠ¶æ€ç®¡ç†å·¥å…·</strong>ï¼Œå®ƒé‡‡ç”¨<strong>é›†ä¸­å¼å­˜å‚¨</strong>ç®¡ç†åº”ç”¨çš„æ‰€æœ‰çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚</p>\n<h2 id=\"vuexçš„æ„æˆ\">vuexçš„æ„æˆ</h2>\n<ul>\n<li><p>å¼•å…¥<code>State</code>ã€<code>Getter</code>å¯¹çŠ¶æ€è¿›è¡Œå®šä¹‰</p>\n</li>\n<li><p>ä½¿ç”¨<code>Mutation</code>ã€<code>Action</code>å¯¹çŠ¶æ€è¿›è¡Œä¿®æ”¹</p>\n</li>\n<li><p>ä½¿ç”¨<code>Module</code>å¯¹çŠ¶æ€è¿›è¡Œæ¨¡å—åŒ–åˆ†å‰²</p>\n</li>\n<li><p>å¼•å…¥æ’ä»¶å¯¹çŠ¶æ€è¿›è¡Œå¿«ç…§ã€è®°å½•ã€è·Ÿè¸ªç­‰</p>\n</li>\n<li><p>æä¾›<code>mapState</code>ã€<code>mapGetters</code>ã€<code>mapActions</code>ã€<code>mapMutations</code>è¾…åŠ©å‡½æ•°æ–¹ä¾¿å¼€å‘è€…å¤„ç†store</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/vuex-0.png\" alt=\"vuexç»„æˆ\"></p>\n</li>\n</ul>\n<h2 id=\"vuexåŸç†\">vuexåŸç†</h2>\n<h3 id=\"vuexçš„storeæ˜¯å¦‚ä½•æ³¨å…¥åˆ°ç»„ä»¶ä¸­çš„\">vuexçš„storeæ˜¯å¦‚ä½•æ³¨å…¥åˆ°ç»„ä»¶ä¸­çš„</h3>\n<ul>\n<li><p>é€šè¿‡vueçš„<a href=\"https://cn.vuejs.org/v2/guide/mixins.html\">mixin</a>æœºåˆ¶ï¼Œåœ¨<code>install</code>å‡½æ•°ä¸­å€ŸåŠ©äºvueçš„<code>beforeCreate</code>ç”Ÿå‘½å‘¨æœŸå‡½æ•°</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-title class_\">Vue</span>.<span class=\"hljs-title function_\">mixin</span>({ <span class=\"hljs-attr\">beforeCreate</span>: vuexInit })\n</code></pre>\n</li>\n<li><p>åœ¨<code>beforeCreate</code>ä¸­è°ƒç”¨vuexInitå°†storeæŒ‚è½½åˆ°å½“å‰å®ä¾‹ä¸Š</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">vuexInit</span> () {\n    <span class=\"hljs-keyword\">const</span> options = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">$options</span>\n    <span class=\"hljs-comment\">// store injection</span>\n    <span class=\"hljs-keyword\">if</span> (options.<span class=\"hljs-property\">store</span>) {\n        <span class=\"hljs-comment\">// æ ¹ç»„ä»¶é€šè¿‡options.storeæŒ‚è½½</span>\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">$store</span> = <span class=\"hljs-keyword\">typeof</span> options.<span class=\"hljs-property\">store</span> === <span class=\"hljs-string\">&#x27;function&#x27;</span>\n            ? options.<span class=\"hljs-title function_\">store</span>()\n            : options.<span class=\"hljs-property\">store</span>\n        <span class=\"hljs-comment\">// å…¶ä½™ç»„ä»¶é€šè¿‡çˆ¶ç»„ä»¶ä¸Šçš„storeæŒ‚è½½</span>\n    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (options.<span class=\"hljs-property\">parent</span> &amp;&amp; options.<span class=\"hljs-property\">parent</span>.<span class=\"hljs-property\">$store</span>) {\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">$store</span> = options.<span class=\"hljs-property\">parent</span>.<span class=\"hljs-property\">$store</span>\n    }\n}\n</code></pre>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/vuex-1.jpg\" alt=\"storeæ³¨å…¥\"></p>\n</li>\n</ul>\n<h3 id=\"vuexçš„stateå’Œgetteræ˜¯å¦‚ä½•æ˜ å°„åˆ°å„ä¸ªç»„ä»¶å®ä¾‹ä¸­è‡ªåŠ¨æ›´æ–°çš„\">vuexçš„stateå’Œgetteræ˜¯å¦‚ä½•æ˜ å°„åˆ°å„ä¸ªç»„ä»¶å®ä¾‹ä¸­è‡ªåŠ¨æ›´æ–°çš„</h3>\n<h4 id=\"state\">state</h4>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Store</span> {\n    construcor () {\n        <span class=\"hljs-title function_\">resetStoreVM</span>()\n    }\n    get state () {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">_vm</span>.<span class=\"hljs-property\">_data</span>.<span class=\"hljs-property\">$$state</span>\n    }\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">resetStoreVM</span>(<span class=\"hljs-params\"></span>) {\n       store.<span class=\"hljs-property\">_vm</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Vue</span>({\n           <span class=\"hljs-attr\">data</span>: {\n               <span class=\"hljs-attr\">$$state</span>: state\n           },\n          computed\n    })\n}\n</code></pre>\n<p>ä»æºç å¾—çŸ¥ï¼Œå½“ä½¿ç”¨<code>this.$store.state.xxx</code>æ—¶ä¼šè¢«ä»£ç†åˆ°<code>store._vm._data.$$state</code>ä¸Šï¼Œè€Œ<code>store._vm</code>æ˜¯ä¸€ä¸ªVueå®ä¾‹ï¼Œç”±äºç¤ºä¾‹ä¸­çš„dataæ˜¯å“åº”å¼çš„ï¼Œæ‰€ä»¥$$stateä¹Ÿæ˜¯å“åº”å¼çš„ï¼Œé‚£ä¹ˆå½“æ›´æ–°stateæ—¶ï¼Œæ‰€æœ‰ç›¸å…³ç»„ä»¶ä¸­çš„stateä¹Ÿä¼šè‡ªåŠ¨æ›´æ–°</p>\n<h4 id=\"getter\">getter</h4>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">resetStoreVM</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-title function_\">forEachValue</span>(wrappedGetters, <span class=\"hljs-function\">(<span class=\"hljs-params\">fn, key</span>) =&gt;</span> {\n        <span class=\"hljs-comment\">// use computed to leverage its lazy-caching mechanism</span>\n        <span class=\"hljs-comment\">// direct inline function use will lead to closure preserving oldVm.</span>\n        <span class=\"hljs-comment\">// using partial to return function with only arguments preserved in closure environment.</span>\n        computed[key] = <span class=\"hljs-title function_\">partial</span>(fn, store)\n        <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">defineProperty</span>(store.<span class=\"hljs-property\">getters</span>, key, {\n            <span class=\"hljs-attr\">get</span>: <span class=\"hljs-function\">() =&gt;</span> store.<span class=\"hljs-property\">_vm</span>[key],\n            <span class=\"hljs-attr\">enumerable</span>: <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\">// for local getters</span>\n        })\n    })\n}\n</code></pre>\n<p>ä»æºç å¾—çŸ¥ï¼Œå½“ä½¿ç”¨<code>this.$store.getter.xxx</code>æ—¶ä¼šè¢«ä»£ç†åˆ°<code>store._vm.xxx</code>ï¼Œå…¶ä¸­æ·»åŠ <code>computed</code>å±æ€§</p>\n<p>ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œvuexä¸­çš„<code>state</code>æ˜¯å€ŸåŠ©äºä¸€ä¸ªVue.jså®ä¾‹ï¼Œå°†<code>state</code>å­˜å…¥å®ä¾‹çš„<code>data</code>ä¸­ï¼›Vuexä¸­çš„<code>getter</code>åˆ™æ˜¯å€ŸåŠ©äºå®ä¾‹çš„è®¡ç®—å±æ€§<code>computed</code>å®ç°æ•°æ®ç›‘å¬</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/vuex-3.png\" alt=\"stateã€getterå“åº”å¼\"></p>\n"},{"title":"webpackå­¦ä¹ -0","tags":["webpack"],"categories":"webpack","description":"## webpack\n\n`webpack`æ˜¯ä¸€ä¸ªç°ä»£çš„`JavaScript`åº”ç”¨ç¨‹åºæ‰“åŒ…å·¥å…·ã€‚å½“`webpack`å¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œä¼šé€’å½’æ„å»ºä¸€ä¸ª**ä¾èµ–å…³ç³»å›¾**ï¼Œå…¶ä¸­åŒ…å«åº”ç”¨ç¨‹åºéœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†è¿™ä¸ªæ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ªbundle\n\n![æ¦‚å¿µå›¾](https://mrrsblog.oss-cn-shanghai.aliyuncs.com/webpack-0.png)\n\n## webp","createDate":"2020-03-12 23:51:35","updateDate":"10/1/2021, 3:34:43 AM","body":"<h2 id=\"webpack\">webpack</h2>\n<p><code>webpack</code>æ˜¯ä¸€ä¸ªç°ä»£çš„<code>JavaScript</code>åº”ç”¨ç¨‹åºæ‰“åŒ…å·¥å…·ã€‚å½“<code>webpack</code>å¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œä¼šé€’å½’æ„å»ºä¸€ä¸ª<strong>ä¾èµ–å…³ç³»å›¾</strong>ï¼Œå…¶ä¸­åŒ…å«åº”ç”¨ç¨‹åºéœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†è¿™ä¸ªæ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ªbundle</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/webpack-0.png\" alt=\"æ¦‚å¿µå›¾\"></p>\n<h2 id=\"webpackçš„æ ¸å¿ƒæ¦‚å¿µ\">webpackçš„æ ¸å¿ƒæ¦‚å¿µ</h2>\n<ul>\n<li><p><code>entry</code>ï¼ˆå…¥å£ï¼‰</p>\n<p>å…¥å£æŒ‡ç¤º<code>webpack</code>åº”è¯¥ä½¿ç”¨å“ªä¸ªæ¨¡å—æ¥ä½œä¸ºæ„å»ºå…¶å†…éƒ¨<strong>ä¾èµ–å›¾</strong>çš„å¼€å§‹ã€‚è¿›å…¥å…¥å£èµ·ç‚¹åï¼Œ<code>webpack</code>ä¼šæ‰¾å‡ºæœ‰å“ªäº›æ¨¡å—æ˜¯åº“å…¥å£èµ·ç‚¹ï¼ˆç›´æ¥å’Œé—´æ¥ï¼‰ä¾èµ–çš„</p>\n<p>æ¯ä¸ªä¾èµ–é¡¹éšå³è¢«å¤„ç†ï¼Œæœ€åè¾“å‡ºåˆ°ç§°ä¹‹ä¸º<code>bundles</code>çš„æ–‡ä»¶ä¸­ã€‚</p>\n<p>å¯ä»¥é€šè¿‡åœ¨<code>webpack</code>é…ç½®ä¸­é…ç½®entryå±æ€§æ¥æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªå…¥å£èµ·ç‚¹ã€‚é»˜è®¤ä¸º<code>./src</code></p>\n</li>\n<li><p><code>output</code>ï¼ˆå‡ºå£ï¼‰</p>\n<p><code>output</code>å‘Šè¯‰<code>webpack</code>åœ¨å“ªè¾“å‡ºå®ƒæ‰€åˆ›å»ºçš„<code>bundles</code>ï¼Œä»¥åŠå¦‚ä½•å‘½åè¿™äº›æ–‡ä»¶ï¼Œé»˜è®¤å€¼ä¸º<code>./dist</code>ã€‚åŸºæœ¬ä¸Šï¼Œæ•´ä¸ªåº”ç”¨ç¨‹åºç»“æ„éƒ½ä¼šè¢«ç¼–è¯‘åˆ°æŒ‡å®šçš„è¾“å‡ºè·¯å¾„çš„æ–‡ä»¶å¤¹ä¸­ã€‚å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶ä¸­çš„<code>output</code>å­—æ®µæ¥æŒ‡å®šè¾“å‡ºçš„æ–‡ä»¶å¤¹</p>\n</li>\n<li><p><code>loader</code></p>\n<p><code>loader</code>è®©<code>webpack</code>èƒ½å¤Ÿå»å¤„ç†é‚£äº›é<code>JavaScript</code>æ–‡ä»¶ï¼ˆ<code>webpack</code>è‡ªèº«åªç†è§£<code>JavaScript</code>ï¼‰ã€‚<code>loader</code>èƒ½å¤Ÿå°†æ‰€æœ‰ç±»å‹çš„æ–‡ä»¶è½¬æ¢ä¸º<code>webpack</code>èƒ½å¤Ÿå¤„ç†çš„æœ‰æ•ˆæ¨¡å—ï¼Œç„¶åå°±å¯ä»¥åˆ©ç”¨<code>webpack</code>çš„æ‰“åŒ…èƒ½åŠ›å¯¹å®ƒä»¬è¿›è¡Œå¤„ç†ã€‚</p>\n<p>åŒä¸€ä¸ª<code>rule</code>ä¸‹çš„å¤šä¸ª<code>loader</code>æ—¶å°†ä»å³å¾€å·¦æ‰§è¡Œ</p>\n</li>\n<li><p><code>plugin</code></p>\n<p><code>loader</code>è¢«ç”¨äºè½¬æ¢æŸäº›ç±»å‹çš„æ¨¡å—ï¼Œè€Œæ’ä»¶åˆ™å¯ä»¥ç”¨äºæ‰§è¡ŒèŒƒå›´æ›´å¹¿çš„ä»»åŠ¡ã€‚æ’ä»¶çš„èŒƒå›´åŒ…æ‹¬ä»æ‰“åŒ…ä¼˜åŒ–å’Œå‹ç¼©ä¸€ç›´åˆ°é‡æ–°å®šä¹‰ç¯å¢ƒä¸­çš„å˜é‡ï¼Œæ’ä»¶æ¥å£åŠŸèƒ½æå…¶å¼ºå¤§ï¼Œå¯ä»¥ç”¨æ¥å¤„ç†å„ç§å„æ ·çš„ä»»åŠ¡ã€‚</p>\n<p>æƒ³è¦ä½¿ç”¨ä¸€ä¸ªæ’ä»¶ï¼Œåªéœ€è¦<code>require</code>å®ƒï¼Œç„¶åæŠŠå®ƒæ·»åŠ åˆ°<code>plugins</code>é…ç½®é¡¹ä¸­ã€‚å¤šæ•°æ’ä»¶å¯ä»¥é€šè¿‡é€‰é¡¹è‡ªå®šä¹‰ã€‚</p>\n</li>\n</ul>\n<h2 id=\"é…ç½®\">é…ç½®</h2>\n<p><code>webpack</code>çš„ç›¸å…³é…ç½®ä¸»è¦ç”±æ ¹ç›®å½•ä¸‹çš„<code>webpack.config.js</code>æ¥å®Œæˆ</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// webpack.config.js</span>\n\n<span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {\n    <span class=\"hljs-attr\">mode</span>: <span class=\"hljs-string\">&#x27;development&#x27;</span>,\n    <span class=\"hljs-attr\">entry</span>: [<span class=\"hljs-string\">&#x27;&#x27;</span>]\n    <span class=\"hljs-attr\">output</span>: {},\n    <span class=\"hljs-attr\">module</span>: {\n        <span class=\"hljs-attr\">rules</span>: [{}]\n    },\n    <span class=\"hljs-attr\">plugins</span>: [{}],\n    <span class=\"hljs-attr\">devServer</span>: {},\n    <span class=\"hljs-attr\">devtool</span>: <span class=\"hljs-string\">&#x27;xxx&#x27;</span>\n}\n</code></pre>\n<h2 id=\"å¤„ç†javascriptbabel-loader\">å¤„ç†JavaScript:babel-loader</h2>\n<p><code>webpack</code>æœ¬èº«å¯ä»¥è¯†åˆ«<code>JavaScript</code>ï¼Œä½†ä¸ºäº†å…¼å®¹è€çš„æµè§ˆå™¨ï¼Œéœ€è¦å°†<code>ES6</code>è½¬æ¢ä¸ºå‘åå…¼å®¹ç‰ˆæœ¬çš„<code>JavaScript</code>ä»£ç ï¼Œ<a href=\"https://babel.docschina.org/\">Babel</a>å°±æ˜¯è¿™ä¹ˆä¸€ç§å·¥å…·é“¾ã€‚</p>\n<p>å½“<code>webpack</code>æ‰“åŒ…æºä»£ç æ—¶ï¼Œå¯èƒ½ä¼šå¾ˆéš¾è¿½è¸ªåˆ°é”™è¯¯å’Œè­¦å‘Šåœ¨æºä»£ç ä¸­çš„èµ·å§‹ä½ç½®ã€‚ä¸ºäº†<strong>æ›´å®¹æ˜“è¿½è¸ªé”™è¯¯å’Œè­¦å‘Š</strong>ï¼Œ<code>JavaScript</code>æä¾›äº†<a href=\"http://blog.teamtreehouse.com/introduction-source-maps\">source map</a>åŠŸèƒ½ï¼Œå°†ç¼–è¯‘åçš„ä»£ç æ˜ å°„å›åŸå§‹ä»£ç ã€‚</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">//webpack.config.js</span>\n<span class=\"hljs-attr\">module</span>: {\n    <span class=\"hljs-attr\">rules</span>: [\n        {\n            <span class=\"hljs-attr\">test</span>: <span class=\"hljs-regexp\">/\\.js?$/</span>,\n            <span class=\"hljs-attr\">use</span>: [<span class=\"hljs-string\">&#x27;babel-loader&#x27;</span>],\n            <span class=\"hljs-attr\">exclude</span>: <span class=\"hljs-regexp\">/node_modules/</span>\n        }\n    ],\n    <span class=\"hljs-comment\">// å¼€å¯source-map</span>\n    <span class=\"hljs-attr\">devtool</span>: <span class=\"hljs-string\">&#x27;cheap-module-eval-source-map&#x27;</span>\n}\n\n<span class=\"hljs-comment\">//babel.config.js</span>\n<span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">api</span>) {\n    api.<span class=\"hljs-title function_\">cache</span>(<span class=\"hljs-literal\">true</span>)\n    <span class=\"hljs-keyword\">const</span> presets = [<span class=\"hljs-string\">&quot;@babel/preset-env&quot;</span>]\n    <span class=\"hljs-keyword\">const</span> plugins = [\n        [\n            <span class=\"hljs-string\">&quot;@babel/plugin-transform-runtime&quot;</span>,\n            {\n                <span class=\"hljs-attr\">corejs</span>: <span class=\"hljs-number\">3</span>\n            }\n        ]\n    ]\n\n    <span class=\"hljs-keyword\">return</span> {\n        presets,\n        plugins\n    }\n}\n</code></pre>\n<h2 id=\"å¤„ç†html\">å¤„ç†HTML</h2>\n<p>æœ‰æ—¶ä¸ºäº†æ¸…é™¤ç¼“å­˜ï¼Œæ‰“åŒ…æ–‡ä»¶æ—¶ä¼šå¸¦æœ‰hashï¼Œé‚£ä¹ˆæ¯æ¬¡ç”Ÿæˆçš„æ–‡ä»¶åä¼šæœ‰æ‰€ä¸åŒã€‚å¦‚æœåœ¨<code>html</code>ä¸­å¼•ç”¨äº†è¿™äº›æ–‡ä»¶ï¼Œåˆ™éœ€è¦æ›´æ”¹å¼•å…¥çš„æ–‡ä»¶åï¼Œæ‰‹å·¥æ”¹åŠ¨ä¸å¯å–ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>html-webpack-plugin</code>æ¥å¸®åŠ©å¤„ç†</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {\n    <span class=\"hljs-attr\">plugins</span>: [\n        <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">HtmlWebpackPlugin</span>({\n            <span class=\"hljs-comment\">// templateæŒ‡å®šç”Ÿæˆhtmlçš„æ¨¡æ¿æ–‡ä»¶</span>\n            <span class=\"hljs-attr\">template</span>: <span class=\"hljs-string\">&#x27;./public/index.html&#x27;</span>,\n            <span class=\"hljs-comment\">// é»˜è®¤ç”Ÿæˆåœ¨./dist/index.html</span>\n            <span class=\"hljs-attr\">filename</span>: <span class=\"hljs-string\">&#x27;index.html&#x27;</span>,\n            <span class=\"hljs-attr\">minify</span>: {\n                <span class=\"hljs-attr\">removeAttributeQuotes</span>: <span class=\"hljs-literal\">false</span>,\n                <span class=\"hljs-attr\">collapseWhitespace</span>: <span class=\"hljs-literal\">false</span>\n            }\n        })\n    ]\n}\n</code></pre>\n<h2 id=\"å¤„ç†ss\">å¤„ç†*ss</h2>\n<ul>\n<li><code>style-loader</code>ï¼ŒåŠ¨æ€åˆ›å»º<code>style</code>æ ‡ç­¾ï¼Œå°†<code>css</code>æ’å…¥åˆ°<code>head</code>ä¸­</li>\n<li><code>css-loader</code>ï¼Œè´Ÿè´£å¤„ç†<code>@import</code>ç­‰è¯­å¥</li>\n<li><code>postcss-loader</code>å’Œ<code>autoprefixer</code>ï¼Œè‡ªåŠ¨ç”Ÿæˆæµè§ˆå™¨å…¼å®¹æ€§å‰ç¼€</li>\n<li><code>less-loader</code>ï¼Œè´Ÿè´£ç¼–è¯‘<code>.less</code>æ–‡ä»¶</li>\n</ul>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {\n    <span class=\"hljs-attr\">module</span>: {\n        <span class=\"hljs-attr\">rules</span>: [\n            {\n                <span class=\"hljs-attr\">test</span>: <span class=\"hljs-regexp\">/\\.(le|c)ss$/</span>,\n                <span class=\"hljs-attr\">use</span>: [\n                    <span class=\"hljs-string\">&#x27;style-loader&#x27;</span>,\n                    <span class=\"hljs-string\">&#x27;css-loader&#x27;</span>,\n                    {\n                        <span class=\"hljs-attr\">loader</span>: <span class=\"hljs-string\">&#x27;postcss-loader&#x27;</span>,\n                        <span class=\"hljs-attr\">options</span>: {\n                            <span class=\"hljs-attr\">plugins</span>: <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n                                <span class=\"hljs-keyword\">return</span> [\n                                    <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;autoprefixer&#x27;</span>)({\n                                        <span class=\"hljs-string\">&#x27;overrideBrowserslist&#x27;</span>: [\n                                            <span class=\"hljs-string\">&quot;&gt;0.25%&quot;</span>,\n                                            <span class=\"hljs-string\">&#x27;not dead&#x27;</span>\n                                        ]\n                                    })\n                                ]\n                            }\n                        }\n                    },\n                    <span class=\"hljs-string\">&#x27;less-loader&#x27;</span>\n                ],\n                <span class=\"hljs-attr\">exclude</span>: <span class=\"hljs-regexp\">/node_modules/</span>\n            }\n        ]\n    }\n}\n</code></pre>\n<h2 id=\"å¤„ç†æœ¬åœ°èµ„æºæ–‡ä»¶\">å¤„ç†æœ¬åœ°èµ„æºæ–‡ä»¶</h2>\n<p>å¯ä»¥ä½¿ç”¨url-loaderæˆ–file-loaderæ¥å¤„ç†æœ¬åœ°çš„èµ„æºæ–‡ä»¶ã€‚url-loaderå’Œfile-loaderåŠŸèƒ½ç±»ä¼¼ï¼Œä½†æ˜¯url-loaderå¯ä»¥æŒ‡å®šæ–‡ä»¶åœ¨å°äºæŸä¸€ç‰¹å®šå€¼ä¸‹è¿”å›DataURLï¼Œå¯ä»¥å‡å°‘httpè¯·æ±‚ï¼Œæ¨èä½¿ç”¨</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {\n    <span class=\"hljs-attr\">module</span>: {\n        <span class=\"hljs-attr\">rules</span>: [\n            {\n                <span class=\"hljs-attr\">test</span>: <span class=\"hljs-regexp\">/\\.(png|jpg|gif|jpeg|svg|ttf)$/</span>,\n                <span class=\"hljs-attr\">use</span>: [\n                    {\n                        <span class=\"hljs-attr\">loader</span>: <span class=\"hljs-string\">&#x27;url-loader&#x27;</span>,\n                        <span class=\"hljs-attr\">options</span>: {\n                            <span class=\"hljs-attr\">limit</span>: <span class=\"hljs-number\">10240</span>,\n                            <span class=\"hljs-attr\">esModule</span>: <span class=\"hljs-literal\">false</span>,\n                            <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&#x27;assets/[name]_[hash:6].[ext]&#x27;</span>\n                        }\n                    }\n                ],\n                <span class=\"hljs-attr\">exclude</span>: <span class=\"hljs-regexp\">/node_modules/</span>\n            }\n        ]\n    }\n}\n</code></pre>\n<p>æ­¤å¤–ï¼Œå¯¹äºhtmlä¸­çš„å›¾ç‰‡ï¼Œurl-loaderåˆ™æ— èƒ½ä¸ºåŠ›ï¼Œæ­¤æ—¶éœ€è¦<code>html-withimg-loader</code>æ¥ååŠ©</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {\n    <span class=\"hljs-attr\">module</span>: {\n        <span class=\"hljs-attr\">rules</span>: [\n            {\n                <span class=\"hljs-attr\">test</span>: <span class=\"hljs-regexp\">/\\.html/</span>,\n                <span class=\"hljs-attr\">use</span>: [<span class=\"hljs-string\">&#x27;html-withimg-loader&#x27;</span>],\n                <span class=\"hljs-attr\">exclude</span>: <span class=\"hljs-regexp\">/node_modules/</span>\n            }\n        ]\n    }\n}\n</code></pre>\n"},{"title":"webpackå­¦ä¹ -1","tags":["webpack"],"categories":"webpack","description":"# æ¨¡å—è§£æ\n\n## è§£æè§„åˆ™\n\n- è§£æç›¸å¯¹è·¯å¾„\n  1. æŸ¥æ‰¾ç›¸å¯¹å½“å‰æ¨¡å—çš„è·¯å¾„ä¸‹æ˜¯å¦æœ‰å¯¹åº”æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹\n  2. æ˜¯æ–‡ä»¶åˆ™ç›´æ¥åŠ è½½\n  3. æ˜¯æ–‡ä»¶å¤¹åˆ™ç»§ç»­æŸ¥æ‰¾æ–‡ä»¶å¤¹ä¸‹çš„ `package.json` æ–‡ä»¶\n  4. æœ‰ package.json æ–‡ä»¶åˆ™æŒ‰ç…§æ–‡ä»¶ä¸­ `main` å­—æ®µçš„æ–‡ä»¶åæ¥æŸ¥æ‰¾æ–‡ä»¶\n  5. æ—  package.json æˆ–è€…æ—  `main` å­—æ®µåˆ™æŸ¥æ‰¾ `index","createDate":"2020-04-13 23:19:33","updateDate":"10/1/2021, 3:34:43 AM","body":"<h1 id=\"æ¨¡å—è§£æ\">æ¨¡å—è§£æ</h1>\n<h2 id=\"è§£æè§„åˆ™\">è§£æè§„åˆ™</h2>\n<ul>\n<li>è§£æç›¸å¯¹è·¯å¾„<ol>\n<li>æŸ¥æ‰¾ç›¸å¯¹å½“å‰æ¨¡å—çš„è·¯å¾„ä¸‹æ˜¯å¦æœ‰å¯¹åº”æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹</li>\n<li>æ˜¯æ–‡ä»¶åˆ™ç›´æ¥åŠ è½½</li>\n<li>æ˜¯æ–‡ä»¶å¤¹åˆ™ç»§ç»­æŸ¥æ‰¾æ–‡ä»¶å¤¹ä¸‹çš„ <code>package.json</code> æ–‡ä»¶</li>\n<li>æœ‰ package.json æ–‡ä»¶åˆ™æŒ‰ç…§æ–‡ä»¶ä¸­ <code>main</code> å­—æ®µçš„æ–‡ä»¶åæ¥æŸ¥æ‰¾æ–‡ä»¶</li>\n<li>æ—  package.json æˆ–è€…æ—  <code>main</code> å­—æ®µåˆ™æŸ¥æ‰¾ <code>index.js</code> æ–‡ä»¶</li>\n</ol>\n</li>\n<li>è§£ææ¨¡å—å\næŸ¥æ‰¾å½“å‰æ–‡ä»¶ç›®å½•ä¸‹ï¼Œçˆ¶çº§ç›®å½•åŠä»¥ä¸Šç›®å½•ä¸‹çš„ <code>node_modules</code> æ–‡ä»¶å¤¹ï¼Œçœ‹æ˜¯å¦æœ‰å¯¹åº”åç§°çš„æ¨¡å—</li>\n<li>è§£æç»å¯¹è·¯å¾„ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰\nç›´æ¥æŸ¥æ‰¾å¯¹åº”è·¯å¾„çš„æ–‡ä»¶</li>\n</ul>\n<p>åœ¨ webpack é…ç½®ä¸­ï¼Œå’Œæ¨¡å—è·¯å¾„è§£æç›¸å…³çš„é…ç½®éƒ½åœ¨ <code>resolve</code> å­—æ®µä¸‹ï¼š</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {\n  <span class=\"hljs-attr\">resolve</span>: {\n    <span class=\"hljs-comment\">// ...</span>\n  }\n}\n</code></pre>\n<h2 id=\"å¸¸ç”¨é…ç½®\">å¸¸ç”¨é…ç½®</h2>\n<ul>\n<li><p><code>resolve.alias</code>ï¼Œ é…ç½®åˆ«å</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {\n    <span class=\"hljs-attr\">resolve</span>: {\n        <span class=\"hljs-attr\">alias</span>: {\n            <span class=\"hljs-attr\">utils$</span>: path.<span class=\"hljs-title function_\">resolve</span>(__dirname, <span class=\"hljs-string\">&#x27;src/utils&#x27;</span>) <span class=\"hljs-comment\">// åªä¼šåŒ¹é… import &#x27;utils&#x27;</span>\n        }\n    }\n}\n</code></pre>\n</li>\n<li><p><code>resolve.extensions</code>ï¼Œæ–‡ä»¶æ‰©å±•åç®€å†™</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {\n    <span class=\"hljs-attr\">resolve</span>: {\n        <span class=\"hljs-attr\">extensions</span>: {\n            <span class=\"hljs-attr\">extensions</span>: [<span class=\"hljs-string\">&#x27;.wasm&#x27;</span>, <span class=\"hljs-string\">&#x27;.mjs&#x27;</span>, <span class=\"hljs-string\">&#x27;.js&#x27;</span>, <span class=\"hljs-string\">&#x27;.json&#x27;</span>, <span class=\"hljs-string\">&#x27;.jsx&#x27;</span>],\n        }\n    }\n}\n</code></pre>\n</li>\n<li><p><code>resolve.modules</code>ï¼Œé…ç½®ç›´æ¥å£°æ˜ä¾èµ–åçš„æ¨¡å—çš„è§£æè·¯å¾„</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {\n    <span class=\"hljs-attr\">resolve</span>: {\n      <span class=\"hljs-attr\">modules</span>: [\n        path.<span class=\"hljs-title function_\">resolve</span>(__dirname, <span class=\"hljs-string\">&#x27;node_modules&#x27;</span>), <span class=\"hljs-comment\">// æŒ‡å®šå½“å‰ç›®å½•ä¸‹çš„ node_modules ä¼˜å…ˆæŸ¥æ‰¾</span>\n        <span class=\"hljs-string\">&#x27;node_modules&#x27;</span>, <span class=\"hljs-comment\">// å¦‚æœæœ‰ä¸€äº›ç±»åº“æ˜¯æ”¾åœ¨ä¸€äº›å¥‡æ€ªçš„åœ°æ–¹çš„ï¼Œä½ å¯ä»¥æ·»åŠ è‡ªå®šä¹‰çš„è·¯å¾„æˆ–è€…ç›®å½•</span>\n      ],\n    }\n}\n</code></pre>\n</li>\n<li><p><code>resolve.mainFields</code>ï¼Œæœ‰<code>package.json</code>æ–‡ä»¶å…¥å£æ–‡ä»¶çš„é…ç½®</p>\n</li>\n<li><p><code>resolve.mainFiles</code>ï¼Œæ²¡æœ‰<code>package.json</code>æ–‡ä»¶æ—¶å…¥å£æ–‡ä»¶çš„é…ç½®</p>\n</li>\n</ul>\n<h1 id=\"loader\">loader</h1>\n<p>webpack çš„ <code>loader</code> ç›¸å…³é…ç½®éƒ½åœ¨ <code>module.rules</code> å­—æ®µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ <code>test</code>ã€<code>include</code>ã€<code>exclude</code> ç­‰é…ç½®å¥½åº”ç”¨ <code>loader</code> çš„æ¡ä»¶è§„åˆ™ï¼Œç„¶åä½¿ç”¨ <code>use</code> æ¥æŒ‡å®šéœ€è¦ç”¨åˆ°çš„ <code>loader</code>ï¼Œé…ç½®åº”ç”¨çš„ <code>loader</code> æ—¶è¿˜éœ€è¦æ³¨æ„ä¸€ä¸‹ <code>loader</code> çš„æ‰§è¡Œé¡ºåºã€‚</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {\n    <span class=\"hljs-attr\">modules</span>: {\n        <span class=\"hljs-attr\">rules</span>: [\n            {\n                <span class=\"hljs-attr\">test</span>: <span class=\"hljs-comment\">//,</span>\n                <span class=\"hljs-attr\">include</span>: [],\n                <span class=\"hljs-attr\">use</span>: xxx\n            }\n        ]\n    }\n}\n</code></pre>\n<h2 id=\"è§„åˆ™æ¡ä»¶é…ç½®\">è§„åˆ™æ¡ä»¶é…ç½®</h2>\n<ul>\n<li><code>{ test: ... }</code> åŒ¹é…ç‰¹å®šæ¡ä»¶</li>\n<li><code>{ include: ... }</code> åŒ¹é…ç‰¹å®šè·¯å¾„</li>\n<li><code>{ exclude: ... }</code> æ’é™¤ç‰¹å®šè·¯å¾„</li>\n<li><code>{ and: [...] }</code>å¿…é¡»åŒ¹é…æ•°ç»„ä¸­æ‰€æœ‰æ¡ä»¶</li>\n<li><code>{ or: [...] }</code> åŒ¹é…æ•°ç»„ä¸­ä»»æ„ä¸€ä¸ªæ¡ä»¶</li>\n<li><code>{ not: [...] }</code> æ’é™¤åŒ¹é…æ•°ç»„ä¸­æ‰€æœ‰æ¡ä»¶</li>\n</ul>\n<h2 id=\"module-type\">module type</h2>\n<pre><code class=\"hljs language-js\">{\n  <span class=\"hljs-attr\">test</span>: <span class=\"hljs-regexp\">/\\.js?$/</span>,\n  <span class=\"hljs-attr\">include</span>: [\n    <span class=\"hljs-attr\">path</span>: path.<span class=\"hljs-title function_\">resolve</span>(__dirname, <span class=\"hljs-string\">&quot;src&quot;</span>)\n  ],\n  <span class=\"hljs-attr\">type</span>: <span class=\"hljs-string\">&quot;javascript/esm&quot;</span>\n}\n</code></pre>\n<p>ç°é˜¶æ®µwebpackæ”¯æŒä»¥ä¸‹å‡ ç§æ¨¡å—ç±»å‹ï¼š</p>\n<ul>\n<li><code>javascript/auto</code>ï¼Œé»˜è®¤ç±»å‹ï¼Œæ”¯æŒæ‰€æœ‰JSä»£ç æ¨¡å—ç±»å‹ï¼šCommonJSã€AMDã€ESM</li>\n<li><code>javascript/esm</code>ï¼ŒECMAScript Modules</li>\n<li><code>javascript/dynamic</code>ï¼ŒCommonJSå’ŒAMD</li>\n<li><code>javascript/json</code>ï¼ŒJSONæ ¼å¼æ•°æ®ï¼Œ<code>require</code>å’Œ<code>import</code>éƒ½å¯ä»¥å¼•å…¥ï¼Œæ˜¯<code>.json</code>æ–‡ä»¶çš„é»˜è®¤ç±»å‹</li>\n<li><code>javascript/experimental</code>ï¼ŒWebAeesmbly Modulesï¼Œæ˜¯<code>.wasm</code>æ–‡ä»¶çš„é»˜è®¤ç±»å‹</li>\n</ul>\n<h2 id=\"loaderåº”ç”¨é¡ºåº\">loaderåº”ç”¨é¡ºåº</h2>\n<ul>\n<li><p>åŒä¸€ä¸ªruleä¸‹ï¼Œ<strong>ä»å³å¾€å·¦æ‰§è¡Œ</strong></p>\n</li>\n<li><p>å¤šä¸ªruleåŒ¹é…åŒä¸€ä¸ªæ¨¡å—æ–‡ä»¶ï¼š</p>\n<p>webpack åœ¨ <code>rules</code> ä¸­æä¾›äº†ä¸€ä¸ª <code>enforce</code> çš„å­—æ®µæ¥é…ç½®å½“å‰ rule çš„ loader ç±»å‹ï¼Œæ²¡é…ç½®çš„è¯æ˜¯æ™®é€šç±»å‹ï¼Œå¯ä»¥é…ç½® <code>pre</code> æˆ– <code>post</code>ï¼Œåˆ†åˆ«å¯¹åº”å‰ç½®ç±»å‹æˆ–åç½®ç±»å‹çš„ loaderã€‚</p>\n<p>æ‰§è¡Œé¡ºåºï¼š<strong>å‰ç½® -&gt; è¡Œå†… -&gt; æ™®é€š -&gt; åç½®</strong></p>\n</li>\n</ul>\n<h2 id=\"ä½¿ç”¨noparse\">ä½¿ç”¨noParse</h2>\n<p>é™¤äº†<code>module.rules</code>å­—æ®µç”¨äºé…ç½®loaderä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ª<code>module.noParse</code>å­—æ®µå¯ä»¥ç”¨äºé…ç½®å“ªäº›æ¨¡å—æ–‡ä»¶çš„å†…å®¹ä¸éœ€è¦è¿›è¡Œè§£æã€‚å¯¹äºä¸€äº›ä¸éœ€è¦è§£æä¾èµ–ï¼ˆå³æ— ä¾èµ–ï¼Œæ²¡æœ‰ä½¿ç”¨<code>import</code>ã€<code>require</code>ã€<code>define</code>ç­‰å¯¼å…¥æœºåˆ¶ï¼‰çš„ç¬¬ä¸‰æ–¹å¤§å‹ç±»åº“å¯ä»¥é€šè¿‡è¿™ä¸ªå­—æ®µé…ç½®ä»¥æé«˜æ•´ä½“çš„æ„å»ºé€Ÿåº¦</p>\n"},{"title":"å‡½æ•°å¼ç¼–ç¨‹-å®¹å™¨/å‡½å­","tags":["å‡½æ•°å¼ç¼–ç¨‹","å®¹å™¨/å‡½å­"],"categories":"å‡½æ•°å¼ç¼–ç¨‹","description":"# å£°æ˜å¼ç¼–ç¨‹(Declarative) vs å‘½ä»¤å¼ç¼–ç¨‹(Imperative)\n\n- å‘½ä»¤å¼ç¼–ç¨‹å°±æ˜¯å¯¹ç¡¬ä»¶æ“ä½œçš„æŠ½è±¡ï¼Œ ç¨‹åºå‘˜éœ€è¦é€šè¿‡æŒ‡ä»¤ï¼Œç²¾ç¡®çš„å‘Šè¯‰è®¡ç®—æœºå¹²ä»€ä¹ˆäº‹æƒ…ï¼›å£°æ˜å¼ç¼–ç¨‹åªä¼šå°†éœ€è¦ä»€ä¹ˆå‘Šè¯‰è®¡ç®—æœºï¼Œå‰©ä¸‹çš„å°†äº¤ç”±è®¡ç®—æœºè‡ªè¡Œå®Œæˆã€‚\n- å£°æ˜å¼ç¼–ç¨‹å†™è¡¨è¾¾å¼ï¼Œ å‘½ä»¤å¼ç¼–ç¨‹å†™ä¸€æ­¥ä¸€æ­¥çš„æŒ‡ç¤º\n\n# å®¹å™¨(container)\n\n- ä¸€ä¸ªå¯¹è±¡\n- å¯ä»¥è£…è½½ä»»æ„ç±»å‹çš„å€¼ï¼ˆå¤§å¤šæ•°å®¹å™¨åªæœ‰ä¸€ä¸ªï¼‰\n- ä½¿","createDate":"2019-10-16 13:43:11","updateDate":"10/1/2021, 3:34:43 AM","body":"<h1 id=\"å£°æ˜å¼ç¼–ç¨‹declarative-vs-å‘½ä»¤å¼ç¼–ç¨‹imperative\">å£°æ˜å¼ç¼–ç¨‹(Declarative) vs å‘½ä»¤å¼ç¼–ç¨‹(Imperative)</h1>\n<ul>\n<li>å‘½ä»¤å¼ç¼–ç¨‹å°±æ˜¯å¯¹ç¡¬ä»¶æ“ä½œçš„æŠ½è±¡ï¼Œ ç¨‹åºå‘˜éœ€è¦é€šè¿‡æŒ‡ä»¤ï¼Œç²¾ç¡®çš„å‘Šè¯‰è®¡ç®—æœºå¹²ä»€ä¹ˆäº‹æƒ…ï¼›å£°æ˜å¼ç¼–ç¨‹åªä¼šå°†éœ€è¦ä»€ä¹ˆå‘Šè¯‰è®¡ç®—æœºï¼Œå‰©ä¸‹çš„å°†äº¤ç”±è®¡ç®—æœºè‡ªè¡Œå®Œæˆã€‚</li>\n<li>å£°æ˜å¼ç¼–ç¨‹å†™è¡¨è¾¾å¼ï¼Œ å‘½ä»¤å¼ç¼–ç¨‹å†™ä¸€æ­¥ä¸€æ­¥çš„æŒ‡ç¤º</li>\n</ul>\n<h1 id=\"å®¹å™¨container\">å®¹å™¨(container)</h1>\n<ul>\n<li>ä¸€ä¸ªå¯¹è±¡</li>\n<li>å¯ä»¥è£…è½½ä»»æ„ç±»å‹çš„å€¼ï¼ˆå¤§å¤šæ•°å®¹å™¨åªæœ‰ä¸€ä¸ªï¼‰</li>\n<li>ä½¿ç”¨ of æ›¿ä»£ new</li>\n</ul>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Container</span> {\n  <span class=\"hljs-keyword\">static</span> <span class=\"hljs-title function_\">of</span>(<span class=\"hljs-params\">x</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Container</span>(x);\n  }\n  <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\">x</span>) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">__value</span> = x;\n  }\n}\n\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-title class_\">Container</span>.<span class=\"hljs-title function_\">of</span>(<span class=\"hljs-number\">3</span>)); <span class=\"hljs-comment\">//Container { __value: 3 }</span>\n</code></pre>\n<h1 id=\"å‡½å­functor\">å‡½å­(functor)</h1>\n<p>functor æ˜¯å®ç°äº† map å‡½æ•°å¹¶éµå®ˆä¸€äº›ç‰¹å®šè§„åˆ™çš„å®¹å™¨ç±»å‹</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Functor</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">Container</span> {\n  <span class=\"hljs-title function_\">map</span>(<span class=\"hljs-params\">f</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Container</span>.<span class=\"hljs-title function_\">of</span>(<span class=\"hljs-title function_\">f</span>(<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">__value</span>));\n  }\n}\n\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-title class_\">Functor</span>.<span class=\"hljs-title function_\">of</span>(<span class=\"hljs-number\">3</span>).<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">x</span> =&gt;</span> x + <span class=\"hljs-number\">3</span>));\n</code></pre>\n<h2 id=\"maybe\">Maybe</h2>\n<p>åœ¨ map æ–¹æ³•é‡Œè®¾ç½®äº†ç©ºå€¼æ£€æŸ¥</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Maybe</span> {\n  <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\">x</span>) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">__value</span> = x;\n  }\n  <span class=\"hljs-keyword\">static</span> <span class=\"hljs-title function_\">of</span>(<span class=\"hljs-params\">x</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Maybe</span>(x);\n  }\n  <span class=\"hljs-title function_\">map</span>(<span class=\"hljs-params\">f</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">__value</span> ? <span class=\"hljs-title class_\">Maybe</span>.<span class=\"hljs-title function_\">of</span>(<span class=\"hljs-title function_\">f</span>(<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">__value</span>)) : <span class=\"hljs-title class_\">Maybe</span>.<span class=\"hljs-title function_\">of</span>(<span class=\"hljs-literal\">null</span>);\n  }\n}\n\n<span class=\"hljs-title class_\">Maybe</span>.<span class=\"hljs-title function_\">of</span>(<span class=\"hljs-literal\">null</span>).<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">x</span> =&gt;</span> x);\n</code></pre>\n<h2 id=\"either\">Either</h2>\n<p>ç”¨äºå®ç° if...else...ï¼ŒEither å‡½å­å†…éƒ¨æœ‰ä¸¤ä¸ªå€¼ï¼Œ**å·¦å€¼(left)<strong>å’Œ</strong>å³å€¼(right)**ï¼Œå³å€¼æ˜¯æ­£å¸¸æƒ…å†µä¸‹ä½¿ç”¨çš„å€¼ï¼Œå·¦å€¼æ˜¯å³å€¼ä¸å­˜åœ¨çš„æ—¶å€™ä½¿ç”¨çš„é»˜è®¤å€¼</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Either</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">Functor</span> {\n  <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\">left, right</span>) {\n    <span class=\"hljs-variable language_\">super</span>(<span class=\"hljs-literal\">null</span>);\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">left</span> = left;\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">right</span> = right;\n  }\n  <span class=\"hljs-keyword\">static</span> <span class=\"hljs-title function_\">of</span>(<span class=\"hljs-params\">left, right</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Either</span>(left, right);\n  }\n  <span class=\"hljs-title function_\">map</span>(<span class=\"hljs-params\">f</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">right</span>\n      ? <span class=\"hljs-title class_\">Either</span>.<span class=\"hljs-title function_\">of</span>(<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">left</span>, <span class=\"hljs-title function_\">f</span>(<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">right</span>))\n      : <span class=\"hljs-title class_\">Either</span>.<span class=\"hljs-title function_\">of</span>(<span class=\"hljs-title function_\">f</span>(<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">left</span>), <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">right</span>);\n  }\n}\n\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-title class_\">Either</span>.<span class=\"hljs-title function_\">of</span>(<span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">6</span>).<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">x</span> =&gt;</span> x + <span class=\"hljs-number\">1</span>)); <span class=\"hljs-comment\">// Either { __value: null, left: 5, right: 7 }</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-title class_\">Either</span>.<span class=\"hljs-title function_\">of</span>(<span class=\"hljs-number\">5</span>, <span class=\"hljs-literal\">null</span>).<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">x</span> =&gt;</span> x + <span class=\"hljs-number\">1</span>)); <span class=\"hljs-comment\">// Either { __value: null, left: 6, right: null }</span>\n</code></pre>\n<h2 id=\"io\">IO</h2>\n<h2 id=\"task\">Task</h2>\n"},{"title":"å‡½æ•°å¼ç¼–ç¨‹-æŸ¯é‡ŒåŒ–/ç»„åˆ","tags":["tags"],"categories":"å‡½æ•°å¼ç¼–ç¨‹","description":"# æŸ¯é‡ŒåŒ–(curry)\n\nåªä¼ é€’ç»™å‡½æ•°ä¸€ä¸ªå‚æ•°ï¼Œè®©å®ƒè¿”å›ä¸€ä¸ªå‡½æ•°å»å¤„ç†å‰©ä¸‹çš„å‚æ•°\n\n```javascript\nconst _ = require(\"ramda\");\nconst accounting = require(\"accounting\");\n\nfunction match(reg, str) {\n  return str.match(reg);\n}\nlet match_ = _.c","createDate":"2019-10-15 15:24:40","updateDate":"10/1/2021, 3:34:43 AM","body":"<h1 id=\"æŸ¯é‡ŒåŒ–curry\">æŸ¯é‡ŒåŒ–(curry)</h1>\n<p>åªä¼ é€’ç»™å‡½æ•°ä¸€ä¸ªå‚æ•°ï¼Œè®©å®ƒè¿”å›ä¸€ä¸ªå‡½æ•°å»å¤„ç†å‰©ä¸‹çš„å‚æ•°</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">const</span> _ = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;ramda&quot;</span>);\n<span class=\"hljs-keyword\">const</span> accounting = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;accounting&quot;</span>);\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">match</span>(<span class=\"hljs-params\">reg, str</span>) {\n  <span class=\"hljs-keyword\">return</span> str.<span class=\"hljs-title function_\">match</span>(reg);\n}\n<span class=\"hljs-keyword\">let</span> match_ = _.<span class=\"hljs-title function_\">curry</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">reg, str</span>) =&gt;</span> str.<span class=\"hljs-title function_\">match</span>(reg));\n<span class=\"hljs-keyword\">let</span> replace = _.<span class=\"hljs-title function_\">curry</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">reg, replacement, str</span>) =&gt;</span> str.<span class=\"hljs-title function_\">replace</span>(reg, replacement));\n<span class=\"hljs-keyword\">let</span> filter = _.<span class=\"hljs-title function_\">curry</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">f, any</span>) =&gt;</span> any.<span class=\"hljs-title function_\">filter</span>(f));\n<span class=\"hljs-keyword\">let</span> map = _.<span class=\"hljs-title function_\">curry</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">f, any</span>) =&gt;</span> any.<span class=\"hljs-title function_\">map</span>(f));\n\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;no curry&quot;</span>, <span class=\"hljs-title function_\">match</span>(<span class=\"hljs-regexp\">/\\s+/g</span>, <span class=\"hljs-string\">&quot;hello world&quot;</span>));\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;width curry:&quot;</span>, <span class=\"hljs-title function_\">match_</span>(<span class=\"hljs-regexp\">/\\s+/g</span>)(<span class=\"hljs-string\">&quot;hello world&quot;</span>)); <span class=\"hljs-comment\">// width curry: [ &#x27; &#x27; ]</span>\n\n<span class=\"hljs-keyword\">let</span> hasSpace = <span class=\"hljs-title function_\">match_</span>(<span class=\"hljs-regexp\">/\\s+/g</span>);\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-title function_\">hasSpace</span>(<span class=\"hljs-string\">&quot;hello world&quot;</span>)); <span class=\"hljs-comment\">// [ &#x27; &#x27; ]</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-title function_\">match_</span>(<span class=\"hljs-regexp\">/\\s+/g</span>)(<span class=\"hljs-string\">&quot;spaceless&quot;</span>)); <span class=\"hljs-comment\">// null</span>\n\n<span class=\"hljs-keyword\">let</span> findSpace = <span class=\"hljs-title function_\">filter</span>(hasSpace);\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-title function_\">findSpace</span>([<span class=\"hljs-string\">&quot;hello world&quot;</span>, <span class=\"hljs-string\">&quot;spaceless&quot;</span>])); <span class=\"hljs-comment\">// [ &#x27;hello world&#x27; ]</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-title function_\">filter</span>(<span class=\"hljs-title function_\">match_</span>(<span class=\"hljs-regexp\">/\\s+/g</span>))([<span class=\"hljs-string\">&quot;hello world&quot;</span>, <span class=\"hljs-string\">&quot;spaceless&quot;</span>])); <span class=\"hljs-comment\">// [ &#x27;hello world&#x27; ]</span>\n\n<span class=\"hljs-keyword\">let</span> noVowels = <span class=\"hljs-title function_\">replace</span>(<span class=\"hljs-regexp\">/[aeiou]/gi</span>);\n<span class=\"hljs-keyword\">let</span> censored = <span class=\"hljs-title function_\">noVowels</span>(<span class=\"hljs-string\">&quot;*&quot;</span>);\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-title function_\">censored</span>(<span class=\"hljs-string\">&quot;hello world&quot;</span>)); <span class=\"hljs-comment\">// h*ll* w*rld</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-title function_\">replace</span>(<span class=\"hljs-regexp\">/[aeiou]/gi</span>)(<span class=\"hljs-string\">&quot;*&quot;</span>)(<span class=\"hljs-string\">&quot;hello world&quot;</span>)); <span class=\"hljs-comment\">// h*ll* w*rld</span>\n</code></pre>\n<h1 id=\"ç»„åˆcompose\">ç»„åˆ(compose)</h1>\n<p>å°†å¤šä¸ªå‡½æ•°ç»“åˆäº§ç”Ÿå¦ä¸€ä¸ªå‡½æ•°</p>\n<ul>\n<li>å¤šä¸ªå‡½æ•°æ‰§è¡Œçš„è¿‡ç¨‹ä¸­(<strong>ç”±å³è‡´å·¦</strong>)</li>\n<li>ä¸Šä¸€ä¸ªå‡½æ•°çš„æ‰§è¡Œç»“æœæ˜¯ä¸‹ä¸€ä¸ªå‡½æ•°çš„å‚æ•°</li>\n<li>compose çš„åˆ†ç»„æ»¡è¶³ç»“åˆå¾‹, compose(f, g, h) === compose(compose(f, g), h) === compose(f, compose(g, h))</li>\n</ul>\n<p>((y â†’ z), (x â†’ y), â€¦, (o â†’ p), ((a, b, â€¦, n) â†’ o)) â†’ ((a, b, â€¦, n) â†’ z)</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">CARS</span> = [\n  { <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;Ferrari FF&quot;</span>, <span class=\"hljs-attr\">horsepower</span>: <span class=\"hljs-number\">660</span>, <span class=\"hljs-attr\">dollar_value</span>: <span class=\"hljs-number\">700000</span>, <span class=\"hljs-attr\">in_stock</span>: <span class=\"hljs-literal\">true</span> },\n  {\n    <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;Spyker C12 Zagato&quot;</span>,\n    <span class=\"hljs-attr\">horsepower</span>: <span class=\"hljs-number\">650</span>,\n    <span class=\"hljs-attr\">dollar_value</span>: <span class=\"hljs-number\">648000</span>,\n    <span class=\"hljs-attr\">in_stock</span>: <span class=\"hljs-literal\">false</span>\n  },\n  {\n    <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;Jaguar XKR-S&quot;</span>,\n    <span class=\"hljs-attr\">horsepower</span>: <span class=\"hljs-number\">550</span>,\n    <span class=\"hljs-attr\">dollar_value</span>: <span class=\"hljs-number\">132000</span>,\n    <span class=\"hljs-attr\">in_stock</span>: <span class=\"hljs-literal\">false</span>\n  },\n  { <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;Audi R8&quot;</span>, <span class=\"hljs-attr\">horsepower</span>: <span class=\"hljs-number\">525</span>, <span class=\"hljs-attr\">dollar_value</span>: <span class=\"hljs-number\">114200</span>, <span class=\"hljs-attr\">in_stock</span>: <span class=\"hljs-literal\">false</span> },\n  {\n    <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;Aston Martin One-77&quot;</span>,\n    <span class=\"hljs-attr\">horsepower</span>: <span class=\"hljs-number\">750</span>,\n    <span class=\"hljs-attr\">dollar_value</span>: <span class=\"hljs-number\">1850000</span>,\n    <span class=\"hljs-attr\">in_stock</span>: <span class=\"hljs-literal\">true</span>\n  },\n  {\n    <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;Pagani Huayra&quot;</span>,\n    <span class=\"hljs-attr\">horsepower</span>: <span class=\"hljs-number\">700</span>,\n    <span class=\"hljs-attr\">dollar_value</span>: <span class=\"hljs-number\">1300000</span>,\n    <span class=\"hljs-attr\">in_stock</span>: <span class=\"hljs-literal\">false</span>\n  }\n];\n\n<span class=\"hljs-keyword\">const</span> isLastInStock = _.<span class=\"hljs-title function_\">compose</span>(\n  _.<span class=\"hljs-title function_\">prop</span>(<span class=\"hljs-string\">&quot;in_stock&quot;</span>),\n  _.<span class=\"hljs-property\">last</span>\n);\n\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-title function_\">isLastInStock</span>(<span class=\"hljs-variable constant_\">CARS</span>));\n\n<span class=\"hljs-keyword\">const</span> firstName = _.<span class=\"hljs-title function_\">compose</span>(\n  _.<span class=\"hljs-title function_\">prop</span>(<span class=\"hljs-string\">&quot;name&quot;</span>),\n  _.<span class=\"hljs-property\">head</span>\n);\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-title function_\">firstName</span>(<span class=\"hljs-variable constant_\">CARS</span>));\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">_average</span>(<span class=\"hljs-params\">xs</span>) {\n  <span class=\"hljs-keyword\">return</span> _.<span class=\"hljs-title function_\">reduce</span>(_.<span class=\"hljs-property\">add</span>, <span class=\"hljs-number\">0</span>, xs) / xs.<span class=\"hljs-property\">length</span>;\n}\n<span class=\"hljs-keyword\">var</span> averageDollarValue = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">cars</span>) {\n  <span class=\"hljs-keyword\">var</span> dollar_values = _.<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">c</span>) {\n    <span class=\"hljs-keyword\">return</span> c.<span class=\"hljs-property\">dollar_value</span>;\n  }, cars);\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">_average</span>(dollar_values);\n};\n\n<span class=\"hljs-keyword\">const</span> averageDollarValue_ = _.<span class=\"hljs-title function_\">compose</span>(\n  _average,\n  _.<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">item</span> =&gt;</span> item.<span class=\"hljs-property\">dollar_value</span>)\n);\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-title function_\">averageDollarValue_</span>(<span class=\"hljs-variable constant_\">CARS</span>));\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">_underscore</span>(<span class=\"hljs-params\">word</span>) {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(word);\n}\n<span class=\"hljs-keyword\">const</span> sanitizeNames = _.<span class=\"hljs-title function_\">compose</span>(\n  _.<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">item</span> =&gt;</span>\n    _.<span class=\"hljs-title function_\">compose</span>(\n      _.<span class=\"hljs-property\">toLower</span>,\n      _.<span class=\"hljs-title function_\">replace</span>(<span class=\"hljs-regexp\">/\\W+/g</span>, <span class=\"hljs-string\">&quot;_&quot;</span>),\n      _.<span class=\"hljs-title function_\">prop</span>(<span class=\"hljs-string\">&quot;name&quot;</span>)\n    )(item)\n  )\n);\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-title function_\">sanitizeNames</span>(<span class=\"hljs-variable constant_\">CARS</span>));\n\n<span class=\"hljs-keyword\">const</span> availablePrices = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">cars</span>) {\n  <span class=\"hljs-keyword\">var</span> available_cars = _.<span class=\"hljs-title function_\">filter</span>(_.<span class=\"hljs-title function_\">prop</span>(<span class=\"hljs-string\">&quot;in_stock&quot;</span>), cars);\n  <span class=\"hljs-keyword\">return</span> available_cars\n    .<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">x</span>) {\n      <span class=\"hljs-keyword\">return</span> accounting.<span class=\"hljs-title function_\">formatMoney</span>(x.<span class=\"hljs-property\">dollar_value</span>);\n    })\n    .<span class=\"hljs-title function_\">join</span>(<span class=\"hljs-string\">&quot;, &quot;</span>);\n};\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-title function_\">availablePrices</span>(<span class=\"hljs-variable constant_\">CARS</span>));\n\n<span class=\"hljs-keyword\">const</span> availablePrices_ = _.<span class=\"hljs-title function_\">compose</span>(\n  _.<span class=\"hljs-title function_\">join</span>(<span class=\"hljs-string\">&quot;, &quot;</span>),\n  _.<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">item</span> =&gt;</span> accounting.<span class=\"hljs-title function_\">formatMoney</span>(item.<span class=\"hljs-property\">dollar_value</span>)),\n  _.<span class=\"hljs-title function_\">filter</span>(_.<span class=\"hljs-title function_\">prop</span>(<span class=\"hljs-string\">&quot;in_stock&quot;</span>))\n);\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-title function_\">availablePrices_</span>(<span class=\"hljs-variable constant_\">CARS</span>));\n</code></pre>\n<h1 id=\"pointfree\">pointfree</h1>\n<p>pointfree æ¨¡å¼æŒ‡çš„æ˜¯å‡½æ•°æ— é¡»æåŠå°†è¦æ“ä½œçš„æ•°æ®æ˜¯ä»€ä¹ˆæ ·çš„</p>\n<p>```javascript\n// épointfree </p>\n"},{"title":"å‡½æ•°å¼ç¼–ç¨‹-çº¯å‡½æ•°","tags":["å‡½æ•°å¼ç¼–ç¨‹","çº¯å‡½æ•°"],"categories":"å‡½æ•°å¼ç¼–ç¨‹","description":"# çº¯å‡½æ•°çš„åŸºæœ¬æ¦‚å¿µ\n\nçº¯å‡½æ•°æ˜¯è¿™æ ·ä¸€ç§å‡½æ•°ï¼Œç›¸åŒçš„è¾“å…¥æ°¸è¿œä¼šå¾—åˆ°ç›¸åŒçš„è¾“å‡ºï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•å¯è§‚å¯Ÿçš„å‰¯ä½œç”¨ã€‚\n\nå¯èƒ½ä¼šå¯¼è‡´ä¸çº¯çš„æƒ…å†µï¼š\n\n- ä¿®æ”¹è°ƒç”¨/ä¼ å…¥çš„å‚æ•°\n\n  ```javascript\n  let array = [1, 2, 3, 4, 5];\n\n  // çº¯çš„\n  array.slice(0, 3); //[1, 2, 3]\n  array.slice(0, 3); //[1,","createDate":"2019-10-15 13:43:45","updateDate":"10/1/2021, 3:34:43 AM","body":"<h1 id=\"çº¯å‡½æ•°çš„åŸºæœ¬æ¦‚å¿µ\">çº¯å‡½æ•°çš„åŸºæœ¬æ¦‚å¿µ</h1>\n<p>çº¯å‡½æ•°æ˜¯è¿™æ ·ä¸€ç§å‡½æ•°ï¼Œç›¸åŒçš„è¾“å…¥æ°¸è¿œä¼šå¾—åˆ°ç›¸åŒçš„è¾“å‡ºï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•å¯è§‚å¯Ÿçš„å‰¯ä½œç”¨ã€‚</p>\n<p>å¯èƒ½ä¼šå¯¼è‡´ä¸çº¯çš„æƒ…å†µï¼š</p>\n<ul>\n<li><p>ä¿®æ”¹è°ƒç”¨/ä¼ å…¥çš„å‚æ•°</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">let</span> array = [<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">5</span>];\n\n<span class=\"hljs-comment\">// çº¯çš„</span>\narray.<span class=\"hljs-title function_\">slice</span>(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">3</span>); <span class=\"hljs-comment\">//[1, 2, 3]</span>\narray.<span class=\"hljs-title function_\">slice</span>(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">3</span>); <span class=\"hljs-comment\">//[1, 2, 3]</span>\n\n<span class=\"hljs-comment\">// ä¸çº¯çš„ --&gt; ä¼šä¿®æ”¹array</span>\narray.<span class=\"hljs-title function_\">splice</span>(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">3</span>); <span class=\"hljs-comment\">//[1, 2, 3]</span>\narray.<span class=\"hljs-title function_\">splice</span>(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">3</span>); <span class=\"hljs-comment\">//[4, 5]</span>\n</code></pre>\n</li>\n<li><p>ä¾èµ–å¤–éƒ¨ç¯å¢ƒ</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// çº¯çš„</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">checkAge</span>(<span class=\"hljs-params\">minmun, age</span>) {\n  <span class=\"hljs-keyword\">return</span> age &gt; minmun;\n}\n\n<span class=\"hljs-comment\">// ä¸çº¯çš„ --&gt; å¼•å…¥äº†å¤–éƒ¨çš„ç¯å¢ƒï¼Œä»è€Œå¢åŠ äº†è®¤çŸ¥è´Ÿè·(cognitive load)</span>\n<span class=\"hljs-keyword\">let</span> minmum = <span class=\"hljs-number\">21</span>;\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">checkAge</span>(<span class=\"hljs-params\">age</span>) {\n  <span class=\"hljs-keyword\">return</span> age &gt; minmun;\n}\n</code></pre>\n</li>\n</ul>\n<h1 id=\"å‰¯ä½œç”¨\">å‰¯ä½œç”¨</h1>\n<p>å‰¯ä½œç”¨æ˜¯åœ¨è®¡ç®—ç»“æœçš„è¿‡ç¨‹ä¸­ï¼Œç³»ç»ŸçŠ¶æ€çš„ä¸€ç§å˜åŒ–ï¼Œæˆ–è€…ä¸å¤–éƒ¨ä¸–ç•Œè¿›è¡Œçš„å¯è§‚å¯Ÿçš„äº¤äº’ã€‚</p>\n<p>å‰¯ä½œç”¨å¯èƒ½åŒ…æ‹¬ï¼š</p>\n<ul>\n<li>æ›´æ”¹æ–‡ä»¶ç³»ç»Ÿ</li>\n<li>å¾€æ•°æ®åº“æ’å…¥è®°å½•</li>\n<li>å‘é€ä¸€ä¸ª http è¯·æ±‚</li>\n<li>ä¿®æ”¹ä¼ å…¥çš„æ•°æ®</li>\n<li>æ‰“å°/log</li>\n<li>è·å–ç”¨æˆ·è¾“å…¥</li>\n<li>DOM æŸ¥è¯¢</li>\n<li>è®¿é—®ç³»ç»ŸçŠ¶æ€</li>\n<li>......</li>\n</ul>\n<h1 id=\"è¿½æ±‚çº¯çš„ç†ç”±\">è¿½æ±‚çº¯çš„ç†ç”±</h1>\n<ul>\n<li><p>å¯ç¼“å­˜æ€§(cacheable)</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">memoize</span>(<span class=\"hljs-params\">f</span>) {\n  <span class=\"hljs-keyword\">let</span> cache = {};\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">let</span> arg_str = <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">stringify</span>(<span class=\"hljs-variable language_\">arguments</span>);\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(cache[arg_str]);\n    cache[arg_str] = cache[arg_str] || f.<span class=\"hljs-title function_\">apply</span>(f, <span class=\"hljs-variable language_\">arguments</span>);\n    <span class=\"hljs-keyword\">return</span> cache[arg_str];\n  };\n}\n\n<span class=\"hljs-keyword\">const</span> squareNumber = <span class=\"hljs-title function_\">memoize</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">x</span> =&gt;</span> x * x);\n\n<span class=\"hljs-title function_\">squareNumber</span>(<span class=\"hljs-number\">3</span>);\n<span class=\"hljs-title function_\">squareNumber</span>(<span class=\"hljs-number\">3</span>);\n</code></pre>\n</li>\n<li><p>å¯ç§»æ¤æ€§/è‡ªæ–‡æ¡£åŒ–(portable/self-documenting)</p>\n</li>\n<li><p>å¯æµ‹è¯•æ€§(testable)</p>\n</li>\n<li><p>åˆç†æ€§(reasonable)</p>\n<p>ä½¿ç”¨çº¯å‡½æ•°çš„æœ€å¤§å¥½å¤„æ˜¯<a href=\"https://en.wikipedia.org/wiki/Referential_transparency\">å¼•ç”¨é€æ˜æ€§(referential transparency)</a>ã€‚</p>\n<p>å¦‚æœä¸€æ®µä»£ç å¯ä»¥æ›¿æ¢æˆå®ƒæ‰§è¡Œæ‰€å¾—çš„ç»“æœï¼Œè€Œä¸”æ˜¯åœ¨ä¸æ”¹å˜æ•´ä¸ªç¨‹åºè¡Œä¸ºçš„å‰æä¸‹æ›¿æ¢çš„ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºè¿™æ®µä»£ç æ˜¯å¼•ç”¨é€æ˜çš„ã€‚ç”±äºçº¯å‡½æ•°æ€»æ˜¯èƒ½å¤Ÿæ ¹æ®ç›¸åŒçš„è¾“å…¥è¿”å›ç›¸åŒçš„è¾“å‡ºï¼Œæ‰€ä»¥å®ƒä»¬å°±èƒ½å¤Ÿä¿è¯æ€»æ˜¯è¿”å›åŒä¸€ä¸ªç»“æœï¼Œè¿™ä¹Ÿå°±ä¿è¯äº†å¼•ç”¨é€æ˜æ€§ã€‚å¯¹äºå¼•ç”¨é€æ˜çš„ä»£ç ï¼Œå¯ä»¥ä½¿ç”¨&quot;ç­‰å¼æ¨å¯¼&quot;(equational reasoning)çš„æŠ€æœ¯æ¥åˆ†æä»£ç ï¼Œæ‰€è°“&quot;ç­‰å¼æ¨å¯¼&quot;å°±æ˜¯&quot;ä¸€å¯¹ä¸€&quot;æ›¿æ¢ï¼Œæœ‰ç‚¹åƒåœ¨ä¸è€ƒè™‘ç¨‹åºè¡Œæ‰§è¡Œçš„æ€ªå¼‚è¡Œä¸º(quirks of programmatic evaluation)çš„æƒ…å†µä¸‹æ‰‹åŠ¨æ‰§è¡Œç›¸å…³ä»£ç ã€‚</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">let</span> <span class=\"hljs-title class_\">Immutable</span> = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;immutable&quot;</span>);\n\n<span class=\"hljs-comment\">// decrementHPæ˜¯çº¯å‡½æ•°ï¼ï¼ï¼å› ä¸ºplayerçš„æ¥æºæ˜¯immutable.Mapï¼Œsetæ–¹æ³•ä¸ä¼šä½¿mapæ”¹å˜ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°çš„mapå¯¹è±¡</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">decrementHP</span>(<span class=\"hljs-params\">player</span>) {\n  <span class=\"hljs-keyword\">return</span> player.<span class=\"hljs-title function_\">set</span>(<span class=\"hljs-string\">&quot;hp&quot;</span>, player.<span class=\"hljs-property\">hp</span> - <span class=\"hljs-number\">1</span>);\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">isSameTeam</span>(<span class=\"hljs-params\">player1, player2</span>) {\n  <span class=\"hljs-keyword\">return</span> player1.<span class=\"hljs-property\">team</span> === player2.<span class=\"hljs-property\">team</span>;\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">punch</span>(<span class=\"hljs-params\">player, target</span>) {\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isSameTeam</span>(player, target)) {\n    <span class=\"hljs-keyword\">return</span> target;\n  } <span class=\"hljs-keyword\">else</span> {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">decrementHP</span>(target);\n  }\n}\n\n<span class=\"hljs-keyword\">let</span> jobe = <span class=\"hljs-title class_\">Immutable</span>.<span class=\"hljs-title class_\">Map</span>({ <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;Jobe&quot;</span>, <span class=\"hljs-attr\">hp</span>: <span class=\"hljs-number\">20</span>, <span class=\"hljs-attr\">team</span>: <span class=\"hljs-string\">&quot;red&quot;</span> });\n<span class=\"hljs-keyword\">let</span> michael = <span class=\"hljs-title class_\">Immutable</span>.<span class=\"hljs-title class_\">Map</span>({ <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;Michael&quot;</span>, <span class=\"hljs-attr\">hp</span>: <span class=\"hljs-number\">20</span>, <span class=\"hljs-attr\">team</span>: <span class=\"hljs-string\">&quot;green&quot;</span> });\n\n<span class=\"hljs-title function_\">punch</span>(jobe, michael);\n<span class=\"hljs-comment\">//=&gt; Immutable.Map({name:&quot;Michael&quot;, hp:19, team: &quot;green&quot;})</span>\n</code></pre>\n<p><a href=\"https://github.com/MostlyAdequate/mostly-adequate-guide/issues/244\">å…³äº decrementHP æ˜¯ä¸æ˜¯çº¯å‡½æ•°çš„è®¨è®º</a></p>\n</li>\n<li><p>å¹¶è¡Œä»£ç </p>\n<p>å¯ä»¥å¹¶è¡Œè¿è¡Œä»»æ„çº¯å‡½æ•°ï¼Œå› ä¸ºçº¯å‡½æ•°æ ¹æœ¬ä¸éœ€è¦è®¿é—®å…±äº«å†…å­˜ï¼Œè€Œä¸”æ ¹æ®å…¶å®šä¹‰ï¼Œçº¯å‡½æ•°ä¹Ÿä¸ä¼šå› å‰¯ä½œç”¨è€Œè¿›å…¥<a href=\"https://en.wikipedia.org/wiki/Race_condition\">ç«æ€(race condition)</a></p>\n</li>\n</ul>\n"},{"title":"å‡½æ•°å¼ç¼–ç¨‹","tags":["å‡½æ•°å¼ç¼–ç¨‹"],"categories":"å‡½æ•°å¼ç¼–ç¨‹","description":"# WHAT\n\n- æœ¬è´¨ä¸Šï¼Œå‡½æ•°å¼ç¼–ç¨‹åªæ˜¯**èŒƒç•´è®ºçš„è¿ç®—æ–¹æ³•**ï¼Œè·Ÿæ•°ç†é€»è¾‘ã€å¾®ç§¯åˆ†ã€è¡Œåˆ—å¼æ˜¯åŒä¸€ç±»ç—›æƒœï¼Œéƒ½æ˜¯æ•°å­¦æ–¹æ³•ï¼Œåªæ˜¯ç¢°å·§å®ƒèƒ½ç”¨æ¥å†™ç¨‹åº\n- FP çš„ç›®çš„æ˜¯ä½¿ç”¨å‡½æ•°æ¥æŠ½è±¡ä½œç”¨åœ¨æ•°æ®ä¹‹ä¸Šçš„æ§åˆ¶åŠ›å’Œæ“ä½œï¼Œä»è€Œåœ¨ç³»ç»Ÿä¸­æ¶ˆé™¤å‰¯ä½œç”¨å¹¶å‡å°‘å¯¹çŠ¶æ€çš„æ”¹å˜\n- OOP é€šè¿‡å°è£…ä½¿å¾—ä»£ç æ›´æ˜“ç†è§£ï¼ŒFP é€šè¿‡æœ€å°åŒ–å˜åŒ–ä½¿å¾—ä»£ç æ›´æ˜“ç†è§£\n\n  ps: ä¸ºä»€ä¹ˆå‡½æ•°å¼ç¼–ç¨‹è¦æ±‚å‡½æ•°å¿…é¡»æ˜¯çº¯çš„ï¼Œä¸èƒ½æœ‰å‰¯ä½œç”¨ï¼Ÿå› ä¸ºå®ƒ","createDate":"2019-10-15 10:10:17","updateDate":"10/1/2021, 3:34:43 AM","body":"<h1 id=\"what\">WHAT</h1>\n<ul>\n<li><p>æœ¬è´¨ä¸Šï¼Œå‡½æ•°å¼ç¼–ç¨‹åªæ˜¯<strong>èŒƒç•´è®ºçš„è¿ç®—æ–¹æ³•</strong>ï¼Œè·Ÿæ•°ç†é€»è¾‘ã€å¾®ç§¯åˆ†ã€è¡Œåˆ—å¼æ˜¯åŒä¸€ç±»ç—›æƒœï¼Œéƒ½æ˜¯æ•°å­¦æ–¹æ³•ï¼Œåªæ˜¯ç¢°å·§å®ƒèƒ½ç”¨æ¥å†™ç¨‹åº</p>\n</li>\n<li><p>FP çš„ç›®çš„æ˜¯ä½¿ç”¨å‡½æ•°æ¥æŠ½è±¡ä½œç”¨åœ¨æ•°æ®ä¹‹ä¸Šçš„æ§åˆ¶åŠ›å’Œæ“ä½œï¼Œä»è€Œåœ¨ç³»ç»Ÿä¸­æ¶ˆé™¤å‰¯ä½œç”¨å¹¶å‡å°‘å¯¹çŠ¶æ€çš„æ”¹å˜</p>\n</li>\n<li><p>OOP é€šè¿‡å°è£…ä½¿å¾—ä»£ç æ›´æ˜“ç†è§£ï¼ŒFP é€šè¿‡æœ€å°åŒ–å˜åŒ–ä½¿å¾—ä»£ç æ›´æ˜“ç†è§£</p>\n<p>ps: ä¸ºä»€ä¹ˆå‡½æ•°å¼ç¼–ç¨‹è¦æ±‚å‡½æ•°å¿…é¡»æ˜¯çº¯çš„ï¼Œä¸èƒ½æœ‰å‰¯ä½œç”¨ï¼Ÿå› ä¸ºå®ƒæ˜¯ä¸€ç§æ•°å­¦è¿ç®—ï¼ŒåŸå§‹ç›®çš„å°±æ˜¯æ±‚å€¼ï¼Œä¸åšå…¶ä»–äº‹æƒ…ï¼Œå¦åˆ™å°±æ— æ³•æ»¡è¶³å‡½æ•°è¿ç®—æ³•åˆ™äº†</p>\n</li>\n</ul>\n<h1 id=\"why\">WHY</h1>\n<ul>\n<li>ä½¿ç”¨çº¯å‡½æ•°çš„ä»£ç ç»ä¸ä¼šæ›´æ”¹æˆ–ç ´ç¯å…¨å±€çŠ¶æ€ï¼Œæœ‰åŠ©äºæé«˜ä»£ç çš„å¯æµ‹æ€§å’Œå¯ç»´æŠ¤æ€§</li>\n<li>FP é‡‡ç”¨å£°æ˜å¼çš„é£æ ¼ï¼Œæ˜“äºæ¨ç†ï¼Œè¹„ç›–ä»£ç çš„å¯è¯»æ€§</li>\n<li>å‡½æ•°å¼ç¼–ç¨‹å°†å‡½æ•°è§†ä¸ºç§¯æœ¨ï¼Œé€šè¿‡é«˜é˜¶å‡½æ•°æ¥æé«˜ä»£ç çš„æ¨¡å—åŒ–å’Œå¯é‡ç”¨æ€§</li>\n<li>å¯ä»¥åˆ©ç”¨å“åº”å¼ç¼–ç¨‹ç»„åˆå„ä¸ªå‡½æ•°æ¥é™ä½äº‹ä»¶é©±åŠ¨ç¨‹åºçš„å¤æ‚æ€§</li>\n</ul>\n<h1 id=\"how\">HOW</h1>\n<ul>\n<li>çº¯å‡½æ•°(pure function)\nç›¸åŒçš„è¾“å…¥æ€»æ˜¯å¾—åˆ°ç›¸åŒçš„è¾“å‡ºï¼Œä¸ä¾èµ–å¤–éƒ¨ç¯å¢ƒï¼Œå®Œå…¨åšåˆ°&quot;è‡ªç»™è‡ªè¶³&quot;</li>\n<li>åˆæˆ(compose)\nå¦‚æœä¸€ä¸ªå€¼è¦ç»è¿‡å¤šä¸ªå‡½æ•°æ‰èƒ½ç¼–ç¨‹å¦å¤–ä¸€ä¸ªå€¼ï¼Œå°±å¯ä»¥æŠŠæ‰€ç”¨ä¸­é—´æ­¥éª¤åˆå¹¶æˆä¸€ä¸ªå‡½æ•°ï¼Œè¿™å«åš<strong>å‡½æ•°çš„åˆæˆ(compose)</strong></li>\n<li>æŸ¯é‡ŒåŒ–(curry)\nåœ¨ compose æ—¶ï¼Œå¦‚æœå‡½æ•°æœ‰å¤šä¸ªå‚æ•° compose å°†ä¼šå˜å¾—éå¸¸éº»çƒ¦ï¼Œæ‰€è°“æŸ¯é‡ŒåŒ–å°±æ˜¯æŠŠä¸€ä¸ªå¤šå‚æ•°çš„å‡½æ•°è½¬åŒ–ä¸ºå•å‚æ•°çš„å‡½æ•°</li>\n<li>å‡½å­—(functor)\nFP é‡ŒåŸºæœ¬çš„è¿ç®—å•ä½å’ŒåŠŸèƒ½å•ä½ï¼Œå¯ä»¥å°†ä¸€ä¸ªå®¹å™¨è½¬æ¢ä¸ºå¦ä¸€ä¸ªå®¹å™¨ã€‚ä»»ä½•å…·æœ‰ map æ–¹æ³•çš„æ•°æ®ç»“æ„éƒ½å¯å½“ä½œå‡½å­çš„å®ç°</li>\n</ul>\n"},{"title":"æŸ¯é‡ŒåŒ–","tags":["å‡½æ•°å¼ç¼–ç¨‹","æŸ¯é‡ŒåŒ–"],"categories":"awesome","description":"# WHAT\n\næŸ¯é‡ŒåŒ–æ˜¯ä¸€ç§å°†ä½¿ç”¨å¤šä¸ªå‚æ•°çš„ä¸€ä¸ªå‡½æ•°è½¬æ¢æˆä¸€ç³»åˆ—ä½¿ç”¨ä¸€ä¸ªå‚æ•°çš„å‡½æ•°çš„æŠ€æœ¯\n\n# WHY\n\n- å‚æ•°å¤ç”¨\n  å¦‚æœæ˜¯ç›¸åŒçš„å‚æ•°ï¼Œåœ¨è®¡ç®—ä¹‹åä¸éœ€è¦å†æ¬¡é‡æ–°ä¼ å‚è®¡ç®—\n- æå‰è¿”å›\n  å¤šæ¬¡è°ƒç”¨å¤šæ¬¡å†…éƒ¨åˆ¤æ–­ï¼Œå¯ä»¥ç›´æ¥æŠŠç¬¬ä¸€æ¬¡åˆ¤æ–­çš„ç»“æœè¿”å›å¤–éƒ¨æ¥æ”¶\n- å»¶è¿Ÿæ‰§è¡Œ\n  ç¼“å­˜å‚æ•°ï¼Œé¿å…é‡å¤çš„å»æ‰§è¡Œç¨‹åºï¼Œç­‰çœŸæ­£éœ€è¦ç»“æœçš„æ—¶å€™å†æ‰§è¡Œ\n\n# HOW\n\n## å‚æ•°å¤ç”¨\n\nå¸¸è§äºå‡½æ•°å¼ç¼–ç¨‹(funct","createDate":"2019-10-16 20:48:43","updateDate":"10/1/2021, 3:34:43 AM","body":"<h1 id=\"what\">WHAT</h1>\n<p>æŸ¯é‡ŒåŒ–æ˜¯ä¸€ç§å°†ä½¿ç”¨å¤šä¸ªå‚æ•°çš„ä¸€ä¸ªå‡½æ•°è½¬æ¢æˆä¸€ç³»åˆ—ä½¿ç”¨ä¸€ä¸ªå‚æ•°çš„å‡½æ•°çš„æŠ€æœ¯</p>\n<h1 id=\"why\">WHY</h1>\n<ul>\n<li>å‚æ•°å¤ç”¨\nå¦‚æœæ˜¯ç›¸åŒçš„å‚æ•°ï¼Œåœ¨è®¡ç®—ä¹‹åä¸éœ€è¦å†æ¬¡é‡æ–°ä¼ å‚è®¡ç®—</li>\n<li>æå‰è¿”å›\nå¤šæ¬¡è°ƒç”¨å¤šæ¬¡å†…éƒ¨åˆ¤æ–­ï¼Œå¯ä»¥ç›´æ¥æŠŠç¬¬ä¸€æ¬¡åˆ¤æ–­çš„ç»“æœè¿”å›å¤–éƒ¨æ¥æ”¶</li>\n<li>å»¶è¿Ÿæ‰§è¡Œ\nç¼“å­˜å‚æ•°ï¼Œé¿å…é‡å¤çš„å»æ‰§è¡Œç¨‹åºï¼Œç­‰çœŸæ­£éœ€è¦ç»“æœçš„æ—¶å€™å†æ‰§è¡Œ</li>\n</ul>\n<h1 id=\"how\">HOW</h1>\n<h2 id=\"å‚æ•°å¤ç”¨\">å‚æ•°å¤ç”¨</h2>\n<p>å¸¸è§äºå‡½æ•°å¼ç¼–ç¨‹(functional programing)</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">add</span>(<span class=\"hljs-params\">x</span>) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">y</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">z</span>) {\n      <span class=\"hljs-keyword\">return</span> x + y + z;\n    };\n  };\n}\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-title function_\">add</span>(<span class=\"hljs-number\">1</span>)(<span class=\"hljs-number\">2</span>)(<span class=\"hljs-number\">3</span>)); <span class=\"hljs-comment\">// 6</span>\n</code></pre>\n<h2 id=\"æå‰è¿”å›\">æå‰è¿”å›</h2>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">addEvent</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">addEventListener</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">el, type, fn, capture</span>) {\n      el.<span class=\"hljs-title function_\">addEventListener</span>(type, <span class=\"hljs-function\"><span class=\"hljs-params\">e</span> =&gt;</span> fn.<span class=\"hljs-title function_\">call</span>(el, e), capture);\n    };\n  } <span class=\"hljs-keyword\">else</span> {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">el, type, fn</span>) {\n      el.<span class=\"hljs-title function_\">attachEvent</span>(<span class=\"hljs-string\">&quot;on&quot;</span> + type, <span class=\"hljs-function\"><span class=\"hljs-params\">e</span> =&gt;</span> fn.<span class=\"hljs-title function_\">call</span>(el, e));\n    };\n  }\n}\n\n<span class=\"hljs-keyword\">const</span> elBind = <span class=\"hljs-title function_\">addEvent</span>();\n<span class=\"hljs-title function_\">elBind</span>(<span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&quot;button&quot;</span>), <span class=\"hljs-string\">&quot;click&quot;</span>, <span class=\"hljs-function\"><span class=\"hljs-params\">e</span> =&gt;</span> <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(e), <span class=\"hljs-literal\">true</span>);\n</code></pre>\n<h2 id=\"å»¶è¿Ÿæ‰§è¡Œ\">å»¶è¿Ÿæ‰§è¡Œ</h2>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">curryScore</span>(<span class=\"hljs-params\">fn</span>) {\n  <span class=\"hljs-keyword\">let</span> _allScore = [];\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable language_\">arguments</span>.<span class=\"hljs-property\">length</span> === <span class=\"hljs-number\">0</span>) <span class=\"hljs-keyword\">return</span> fn.<span class=\"hljs-title function_\">apply</span>(<span class=\"hljs-literal\">null</span>, _allScore);\n    <span class=\"hljs-keyword\">else</span> _allScore = _allScore.<span class=\"hljs-title function_\">concat</span>([].<span class=\"hljs-property\">slice</span>.<span class=\"hljs-title function_\">call</span>(<span class=\"hljs-variable language_\">arguments</span>));\n  };\n}\n<span class=\"hljs-keyword\">let</span> allScore = <span class=\"hljs-number\">0</span>;\n<span class=\"hljs-keyword\">const</span> curryAllScore = <span class=\"hljs-title function_\">curryScore</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>; i &lt; <span class=\"hljs-variable language_\">arguments</span>.<span class=\"hljs-property\">length</span>; ++i) allScore += <span class=\"hljs-variable language_\">arguments</span>[i];\n});\n\n<span class=\"hljs-title function_\">curryAllScore</span>(<span class=\"hljs-number\">2</span>);\n<span class=\"hljs-title function_\">curryAllScore</span>(<span class=\"hljs-number\">3</span>);\n<span class=\"hljs-title function_\">curryAllScore</span>(<span class=\"hljs-number\">4</span>);\n<span class=\"hljs-title function_\">curryAllScore</span>();\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(allScore);\n</code></pre>\n"},{"title":"æµè§ˆå™¨ç›¸å…³-å­˜å‚¨","tags":["æµè§ˆå™¨å­˜å‚¨"],"categories":"æµè§ˆå™¨","description":"å…³äºå­˜å‚¨çš„é—®é¢˜éƒ½ä¼šæ¶‰åŠåˆ°ä¸‰ä¸ªé—®é¢˜:\n\n1. å­˜å‚¨åœºæ‰€\n2. å­˜å‚¨ç©ºé—´\n3. å­˜å‚¨æ—¶é—´\n\n(åœ¨å“ªå„¿å­˜å‚¨ï¼Œå¤šå°‘æ•°æ®ï¼Œåˆ°ä»€ä¹ˆæ—¶å€™)è¿™äº›ç‰¹æ€§å†³å®šäº†ä¸åŒæ–¹æ¡ˆçš„ç”¨é€”\n\n## cookie\n\n- WHAT\n\n  **CookieæŒ‡æŸäº›ç½‘ç«™ä¸ºäº†è¾¨åˆ«ç”¨æˆ·èº«ä»½è€Œå‚¨å­˜åœ¨ç”¨æˆ·æœ¬åœ°ç»ˆç«¯ä¸Šçš„æ•°æ®(é€šå¸¸ç»è¿‡åŠ å¯†)ã€‚ cookieæ˜¯æœåŠ¡ç«¯ç”Ÿæˆï¼Œå®¢æˆ·ç«¯è¿›è¡Œç»´æŠ¤å’Œå­˜å‚¨**ã€‚é€šè¿‡cookie,å¯ä»¥è®©æœåŠ¡å™¨çŸ¥é“è¯·æ±‚æ˜¯æ¥æºå“ªä¸ªå®¢æˆ·ç«¯ï¼Œ","createDate":"2020-04-02 22:49:39","updateDate":"10/1/2021, 3:34:43 AM","body":"<p>å…³äºå­˜å‚¨çš„é—®é¢˜éƒ½ä¼šæ¶‰åŠåˆ°ä¸‰ä¸ªé—®é¢˜:</p>\n<ol>\n<li>å­˜å‚¨åœºæ‰€</li>\n<li>å­˜å‚¨ç©ºé—´</li>\n<li>å­˜å‚¨æ—¶é—´</li>\n</ol>\n<p>(åœ¨å“ªå„¿å­˜å‚¨ï¼Œå¤šå°‘æ•°æ®ï¼Œåˆ°ä»€ä¹ˆæ—¶å€™)è¿™äº›ç‰¹æ€§å†³å®šäº†ä¸åŒæ–¹æ¡ˆçš„ç”¨é€”</p>\n<h2 id=\"cookie\">cookie</h2>\n<ul>\n<li><p>WHAT</p>\n<p><strong>CookieæŒ‡æŸäº›ç½‘ç«™ä¸ºäº†è¾¨åˆ«ç”¨æˆ·èº«ä»½è€Œå‚¨å­˜åœ¨ç”¨æˆ·æœ¬åœ°ç»ˆç«¯ä¸Šçš„æ•°æ®(é€šå¸¸ç»è¿‡åŠ å¯†)ã€‚ cookieæ˜¯æœåŠ¡ç«¯ç”Ÿæˆï¼Œå®¢æˆ·ç«¯è¿›è¡Œç»´æŠ¤å’Œå­˜å‚¨</strong>ã€‚é€šè¿‡cookie,å¯ä»¥è®©æœåŠ¡å™¨çŸ¥é“è¯·æ±‚æ˜¯æ¥æºå“ªä¸ªå®¢æˆ·ç«¯ï¼Œå°±å¯ä»¥è¿›è¡Œå®¢æˆ·ç«¯çŠ¶æ€çš„ç»´æŠ¤ï¼Œæ¯”å¦‚ç™»é™†ååˆ·æ–°ï¼Œè¯·æ±‚å¤´å°±ä¼šæºå¸¦ç™»é™†æ—¶response headerä¸­çš„set-cookie,WebæœåŠ¡å™¨æ¥åˆ°è¯·æ±‚æ—¶ä¹Ÿèƒ½è¯»å‡ºcookieçš„å€¼ï¼Œæ ¹æ®cookieå€¼çš„å†…å®¹å°±å¯ä»¥åˆ¤æ–­å’Œæ¢å¤ä¸€äº›ç”¨æˆ·çš„ä¿¡æ¯çŠ¶æ€ã€‚</p>\n<p><img src=\"https://user-gold-cdn.xitu.io/2019/3/21/1699f22b7029ca14?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"cookieçš„åŸç†\"></p>\n</li>\n<li><p>WHY</p>\n<p>cookieçš„æœ¬èŒå·¥ä½œå¹¶éè¿›è¡Œæœ¬åœ°å­˜å‚¨ï¼Œè€Œæ˜¯<strong>ç»´æŒçŠ¶æ€</strong>ã€‚å› ä¸ºHTTPåè®®æ˜¯æ— çŠ¶æ€çš„ï¼ŒHTTPåè®®è‡ªèº«ä¸å¯¹è¯·æ±‚å’Œå“åº”ä¹‹é—´çš„é€šä¿¡çŠ¶æ€è¿›è¡Œä¿å­˜ï¼Œé€šä¿—æ¥è¯´ï¼ŒæœåŠ¡å™¨ä¸çŸ¥é“ç”¨æˆ·ä¸Šä¸€æ¬¡åšäº†ä»€ä¹ˆï¼Œè¿™ä¸¥é‡é˜»ç¢äº†<strong>äº¤äº’å¼Webç¨‹åº</strong>çš„å®ç°ï¼Œäºæ˜¯å°±è¯ç”Ÿäº†cookieã€‚ä»–å°±æ˜¯ç”¨æ¥ç»•å¼€HTTPçš„æ— çŠ¶æ€æ€§çš„â€œé¢å¤–æ‰‹æ®µâ€ä¹‹ä¸€ã€‚æœåŠ¡å™¨å¯ä»¥è®¾ç½®æˆ–è¯»å–cookieä¸­åŒ…å«ä¿¡æ¯ï¼Œå€Ÿæ­¤ç»´æŠ¤ç”¨æˆ·è·ŸæœåŠ¡å™¨ä¼šè¯çš„çŠ¶æ€</p>\n<p>cookieçš„ç¼ºé™·ï¼š</p>\n<ul>\n<li>cookieä¸å¤Ÿå¤§ï¼Œå„æµè§ˆå™¨çš„cookieæ¯ä¸€ä¸ª<code>name=value</code>çš„valueå€¼å¤§æ¦‚åœ¨4kï¼Œæ‰€ä»¥4kå¹¶ä¸æ˜¯ä¸€ä¸ªåŸŸåä¸‹æ‰€æœ‰çš„cookieå…±äº«çš„,è€Œæ˜¯ä¸€ä¸ªnameçš„å¤§å°ã€‚</li>\n<li>è¿‡å¤šçš„ Cookie ä¼šå¸¦æ¥å·¨å¤§çš„æ€§èƒ½æµªè´¹ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½ä¼šæºå¸¦cookie</li>\n<li>å®‰å…¨æ€§è¾ƒå·®ï¼Œç”±äºåœ¨HTTPè¯·æ±‚ä¸­çš„Cookieæ˜¯æ˜æ–‡ä¼ é€’çš„ï¼Œæ‰€ä»¥å®‰å…¨æ€§æˆé—®é¢˜ï¼Œé™¤éç”¨HTTPS</li>\n</ul>\n</li>\n<li><p>HOW</p>\n<p>ç¬¬ä¸€æ¬¡è®¿é—®ç½‘ç«™çš„æ—¶å€™ï¼Œæµè§ˆå™¨å‘å‡ºè¯·æ±‚ï¼ŒæœåŠ¡å™¨å“åº”è¯·æ±‚åï¼Œä¼šåœ¨å“åº”å¤´é‡Œé¢æ·»åŠ ä¸€ä¸ªSet-Cookieé€‰é¡¹ï¼Œå°†cookieæ”¾å…¥åˆ°å“åº”è¯·æ±‚ä¸­ï¼Œåœ¨æµè§ˆå™¨ç¬¬äºŒæ¬¡å‘è¯·æ±‚çš„æ—¶å€™ï¼Œä¼šé€šè¿‡Cookieè¯·æ±‚å¤´éƒ¨å°†Cookieä¿¡æ¯å‘é€ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡ç«¯ä¼šè¾¨åˆ«ç”¨æˆ·èº«ä»½ï¼Œå¦å¤–ï¼ŒCookieçš„è¿‡æœŸæ—¶é—´ã€åŸŸã€è·¯å¾„ã€æœ‰æ•ˆæœŸã€é€‚ç”¨ç«™ç‚¹éƒ½å¯ä»¥æ ¹æ®éœ€è¦æ¥æŒ‡å®šã€‚</p>\n<p>cookieçš„ç”Ÿæˆæ–¹å¼ä¸»è¦æœ‰ä¸¤ç§ï¼š</p>\n<ol>\n<li><p><code>http response header</code>ä¸­çš„<code>set-cookie</code></p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-title class_\">Set</span>-<span class=\"hljs-title class_\">Cookie</span>: id=a3fWa; <span class=\"hljs-title class_\">Expires</span>=<span class=\"hljs-title class_\">Wed</span>, <span class=\"hljs-number\">21</span> <span class=\"hljs-title class_\">Oct</span> <span class=\"hljs-number\">2019</span> <span class=\"hljs-number\">22</span>:<span class=\"hljs-number\">28</span>:<span class=\"hljs-number\">00</span> <span class=\"hljs-variable constant_\">GMT</span>;<span class=\"hljs-comment\">//å¯ä»¥æŒ‡å®šä¸€ä¸ªç‰¹å®šçš„è¿‡æœŸæ—¶é—´ï¼ˆExpiresï¼‰æˆ–æœ‰æ•ˆæœŸï¼ˆMax-Ageï¼‰</span>\n</code></pre>\n</li>\n<li><p>jsä¸­é€šè¿‡<code>document.cookie</code>å¯ä»¥è¯»å†™cookieï¼Œä»¥é”®å€¼å¯¹çš„å½¢å¼å±•ç¤º</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">cookie</span> = <span class=\"hljs-string\">&quot;userName=mrrs878&quot;</span>\n<span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">cookie</span> = <span class=\"hljs-string\">&quot;age=23&quot;</span>\n</code></pre>\n</li>\n</ol>\n<p>å¸¸ç”¨åç¼€åŠå…¶å«ä¹‰ï¼š</p>\n<p>| å±æ€§      | ä½œç”¨                                                         |\n|</p>\n</li>\n</ul>\n"},{"title":"æµè§ˆå™¨ç›¸å…³-æ¨¡å‹","tags":["æµè§ˆå™¨","æµè§ˆå™¨æ¨¡å‹"],"categories":"æµè§ˆå™¨","description":"# æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„\n\n## æµè§ˆå™¨åŒ…å«çš„è¿›ç¨‹\n\n- browser è¿›ç¨‹--æµè§ˆå™¨çš„ä¸»è¿›ç¨‹ï¼Œè´Ÿè´£åè°ƒï¼Œä¸»æ§ï¼Œæœ‰ä¸”åªæœ‰ä¸€ä¸ª\n  - è´Ÿè´£æµè§ˆå™¨ç•Œé¢çš„æ˜¾ç¤ºï¼Œä¸ç”¨æˆ·äº¤äº’ï¼ˆå‰è¿›ï¼Œåé€€ç­‰ï¼‰\n  - è´Ÿè´£å„ä¸ªé¡µé¢çš„ç®¡ç†ï¼Œåˆ›å»ºå’Œé”€æ¯å…¶ä»–è¿›ç¨‹\n  - å°† render è¿›ç¨‹å¾—åˆ°çš„å†…å­˜ä¸­çš„ bitmap ç»˜åˆ¶åˆ°ç”¨æˆ·ç•Œé¢ä¸Š\n  - ç½‘ç»œèµ„æºçš„ä¸‹è½½ä¸ç®¡ç†ç­‰\n- ç¬¬ä¸‰æ–¹æ’ä»¶è¿›ç¨‹--æ¯ç§ç±»å‹çš„æ’ä»¶å¯¹ç”¨ä¸€ä¸ªè¿›ç¨‹ï¼Œä»…å½“ä½¿","createDate":"2019-06-30 14:01:50","updateDate":"10/1/2021, 3:34:43 AM","body":"<h1 id=\"æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„\">æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„</h1>\n<h2 id=\"æµè§ˆå™¨åŒ…å«çš„è¿›ç¨‹\">æµè§ˆå™¨åŒ…å«çš„è¿›ç¨‹</h2>\n<ul>\n<li>browser è¿›ç¨‹--æµè§ˆå™¨çš„ä¸»è¿›ç¨‹ï¼Œè´Ÿè´£åè°ƒï¼Œä¸»æ§ï¼Œæœ‰ä¸”åªæœ‰ä¸€ä¸ª<ul>\n<li>è´Ÿè´£æµè§ˆå™¨ç•Œé¢çš„æ˜¾ç¤ºï¼Œä¸ç”¨æˆ·äº¤äº’ï¼ˆå‰è¿›ï¼Œåé€€ç­‰ï¼‰</li>\n<li>è´Ÿè´£å„ä¸ªé¡µé¢çš„ç®¡ç†ï¼Œåˆ›å»ºå’Œé”€æ¯å…¶ä»–è¿›ç¨‹</li>\n<li>å°† render è¿›ç¨‹å¾—åˆ°çš„å†…å­˜ä¸­çš„ bitmap ç»˜åˆ¶åˆ°ç”¨æˆ·ç•Œé¢ä¸Š</li>\n<li>ç½‘ç»œèµ„æºçš„ä¸‹è½½ä¸ç®¡ç†ç­‰</li>\n</ul>\n</li>\n<li>ç¬¬ä¸‰æ–¹æ’ä»¶è¿›ç¨‹--æ¯ç§ç±»å‹çš„æ’ä»¶å¯¹ç”¨ä¸€ä¸ªè¿›ç¨‹ï¼Œä»…å½“ä½¿ç”¨è¯¥æ’ä»¶æ—¶åˆ›å»º</li>\n<li>GUI è¿›ç¨‹--æœ€å¤šåªæœ‰ä¸€ä¸ªï¼Œç”¨äº 3D å›¾å½¢çš„ç»˜åˆ¶</li>\n<li>render è¿›ç¨‹ï¼ˆæµè§ˆå™¨å†…æ ¸ï¼‰ï¼Œé»˜è®¤ä¸ºä¸€ä¸ª tab é¡µä¸€ä¸ªè¿›ç¨‹ï¼Œäº’ä¸å½±å“<ul>\n<li>é¡µé¢æ¸²æŸ“ï¼Œè„šæœ¬æ‰§è¡Œï¼Œäº‹ä»¶å¤„ç†ç­‰</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"æµè§ˆå™¨ä½¿ç”¨å¤šè¿›ç¨‹çš„ä¼˜åŠ¿\">æµè§ˆå™¨ä½¿ç”¨å¤šè¿›ç¨‹çš„ä¼˜åŠ¿</h2>\n<ul>\n<li>é¿å…å•ä¸ª page crash åå½±å“åˆ°æ•´ä¸ªæµè§ˆå™¨</li>\n<li>é¿å…ç¬¬ä¸‰æ–¹æ’ä»¶ crash åå½±å“æ•´ä¸ªæµè§ˆå™¨</li>\n<li>å¤šè¿›ç¨‹å……åˆ†åˆ©ç”¨å¤šæ ¸ä¼˜åŠ¿</li>\n<li>æ–¹ä¾¿ä½¿ç”¨æ²™ç›’æ¨¡å‹éš”ç¦»æ’ä»¶ç­‰è¿›ç¨‹ï¼Œæé«˜æµè§ˆå™¨ç¨³å®šæ€§</li>\n</ul>\n<h2 id=\"render-è¿›ç¨‹\">render è¿›ç¨‹</h2>\n<p>å¸¸é©»çº¿ç¨‹</p>\n<ul>\n<li>GUI æ¸²æŸ“çº¿ç¨‹<ul>\n<li>è´Ÿè´£æ¸²æŸ“æµè§ˆå™¨ç•Œé¢ï¼Œè§£æ HTMLï¼ŒCSSï¼Œæ„å»º DOM æ ‘å’Œ RenderObject æ ‘ï¼Œå¸ƒå±€å’Œç»˜åˆ¶ç­‰</li>\n<li>å½“ç•Œé¢éœ€è¦é‡ç»˜ï¼ˆrepaintï¼‰æˆ–ç”±äºæŸç§æ“ä½œå¼•å‘å›æµï¼ˆreflowï¼‰æ—¶ï¼Œè¯¥çº¿ç¨‹å°±ä¼šæ‰§è¡Œ</li>\n<li>GUI çº¿ç¨‹ä¸ JS å¼•æ“çº¿ç¨‹æ˜¯äº’æ–¥çš„ï¼Œå½“ JS å¼•æ“æ‰§è¡Œæ—¶ GUI çº¿ç¨‹å°±ä¼šè¢«æŒ‚èµ·ï¼ŒGUI æ›´æ–°ä¼šè¢«ä¿å­˜åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ç­‰åˆ° JS å¼•æ“ç©ºé—²æ—¶ç«‹å³æ‰§è¡Œ</li>\n</ul>\n</li>\n<li>JS å¼•æ“çº¿ç¨‹<ul>\n<li>ä¹Ÿç§°ä¸º JS å†…æ ¸ï¼Œè´Ÿè´£å¤„ç† JavaScript è„šæœ¬ç¨‹åºï¼ˆä¾‹å¦‚ V8 å¼•æ“ï¼‰</li>\n<li>JS å¼•æ“çº¿ç¨‹è´Ÿè´£è§£æ JavaScript è„šæœ¬ï¼Œè¿è¡Œä»£ç </li>\n<li>JS å¼•æ“ä¸€ç›´ç­‰å¾…ç€ä»»åŠ¡é˜Ÿåˆ—ä¸­ä»»åŠ¡çš„åˆ°æ¥ï¼Œç„¶ååŠ ä»¥å¤„ç†ï¼Œä¸€ä¸ª tab é¡µï¼ˆrender è¿›ç¨‹ï¼‰ä¸­æ— è®ºä½•æ—¶åªæœ‰ä¸€ä¸ª js çº¿ç¨‹åœ¨è¿è¡Œ js ç¨‹åº</li>\n<li>GUI çº¿ç¨‹ä¸ js å¼•æ“çº¿ç¨‹æ—¶äº’æ–¥çš„ï¼Œå¦‚æœ js æ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼Œè¿™æ ·å°±ä¼šé€ æˆé¡µé¢æ¸²æŸ“ä¸è¿è´¯ï¼Œå¯¼è‡´é¡µé¢æ¸²æŸ“åŠ è½½é˜»å¡</li>\n</ul>\n</li>\n<li>äº‹ä»¶è§¦å‘çº¿ç¨‹<ul>\n<li>å½’å±äºæµè§ˆå™¨è€Œä¸æ˜¯ JS å¼•æ“ï¼Œç”¨æ¥<strong>æ§åˆ¶äº‹ä»¶å¾ªç¯</strong></li>\n<li>å½“ js å¼•æ“æ‰§è¡Œä»£ç å—å¦‚ setimeout æ—¶ï¼ˆä¹Ÿå¯æ¥è‡ªæµè§ˆå™¨å†…æ ¸çš„å…¶ä»–çº¿ç¨‹ï¼Œå¦‚é¼ æ ‡ç‚¹å‡»ã€Ajax å¼‚æ­¥è¯·æ±‚ç­‰ï¼‰ï¼Œä¼šå°†å¯¹åº”ä»»åŠ¡æ·»åŠ åˆ°äº‹ä»¶çº¿ç¨‹ä¸­</li>\n<li>å½“å¯¹åº”çš„äº‹ä»¶ç¬¦åˆè§¦å‘æ¡ä»¶æ—¶è¯¥çº¿ç¨‹ä¼šæŠŠäº‹ä»¶æ·»åŠ åˆ°å¾…å¤„ç†é˜Ÿåˆ—çš„é˜Ÿå°¾ï¼Œç­‰å¾… JS å¼•æ“çš„å¤„ç†</li>\n</ul>\n</li>\n<li>å®šæ—¶å™¨è§¦å‘çº¿ç¨‹<ul>\n<li>ä¼ è¯´ä¸­çš„ setInterval ä¸ setTimeout æ‰€åœ¨çº¿ç¨‹</li>\n<li>æµè§ˆå™¨å®šæ—¶è®¡æ•°å™¨å¹¶ä¸æ˜¯ç”± JavaScript å¼•æ“è®¡æ•°çš„,ï¼ˆå› ä¸º JavaScript å¼•æ“æ˜¯å•çº¿ç¨‹çš„, å¦‚æœå¤„äºé˜»å¡çº¿ç¨‹çŠ¶æ€å°±ä¼šå½±å“è®°è®¡æ—¶çš„å‡†ç¡®ï¼‰</li>\n<li>å› æ­¤é€šè¿‡å•ç‹¬çº¿ç¨‹æ¥è®¡æ—¶å¹¶è§¦å‘å®šæ—¶ï¼ˆè®¡æ—¶å®Œæ¯•åï¼Œæ·»åŠ åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾… JS å¼•æ“ç©ºé—²åæ‰§è¡Œï¼‰</li>\n<li>æ³¨æ„ï¼ŒW3C åœ¨ HTML æ ‡å‡†ä¸­è§„å®šï¼Œè§„å®šè¦æ±‚ setTimeout ä¸­ä½äº 4ms çš„æ—¶é—´é—´éš”ç®—ä¸º 4msã€‚</li>\n</ul>\n</li>\n<li>å¼‚æ­¥ http çº¿ç¨‹<ul>\n<li>åœ¨ XMLHttpRequest åœ¨è¿æ¥åæ˜¯é€šè¿‡æµè§ˆå™¨æ–°å¼€ä¸€ä¸ªçº¿ç¨‹è¯·æ±‚</li>\n<li>å°†æ£€æµ‹åˆ°çŠ¶æ€å˜æ›´æ—¶ï¼Œå¦‚æœè®¾ç½®æœ‰å›è°ƒå‡½æ•°ï¼Œå¼‚æ­¥çº¿ç¨‹å°±äº§ç”ŸçŠ¶æ€å˜æ›´äº‹ä»¶ï¼Œå°†è¿™ä¸ªå›è°ƒå†æ”¾å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­ã€‚å†ç”± JavaScript å¼•æ“æ‰§è¡Œã€‚</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"browser-è¿›ç¨‹ä¸-render-è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡\">browser è¿›ç¨‹ä¸ render è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡</h2>\n<ul>\n<li>Browser è¿›ç¨‹æ”¶åˆ°ç”¨æˆ·è¯·æ±‚ï¼Œé¦–å…ˆéœ€è¦è·å–é¡µé¢å†…å®¹ï¼ˆè­¬å¦‚é€šè¿‡ç½‘ç»œä¸‹è½½èµ„æºï¼‰ï¼Œéšåå°†è¯¥ä»»åŠ¡é€šè¿‡ RendererHost æ¥å£ä¼ é€’ç»™ Render è¿›ç¨‹</li>\n<li>Renderer è¿›ç¨‹çš„ Renderer æ¥å£æ”¶åˆ°æ¶ˆæ¯ï¼Œç®€å•è§£é‡Šåï¼Œäº¤ç»™æ¸²æŸ“çº¿ç¨‹ï¼Œç„¶åå¼€å§‹æ¸²æŸ“</li>\n<li>æ¸²æŸ“çº¿ç¨‹æ¥æ”¶è¯·æ±‚ï¼ŒåŠ è½½ç½‘é¡µå¹¶æ¸²æŸ“ç½‘é¡µï¼Œè¿™å…¶ä¸­å¯èƒ½éœ€è¦ Browser è¿›ç¨‹è·å–èµ„æºå’Œéœ€è¦ GPU è¿›ç¨‹æ¥å¸®åŠ©æ¸²æŸ“</li>\n<li>å½“ç„¶å¯èƒ½ä¼šæœ‰ JS çº¿ç¨‹æ“ä½œ DOMï¼ˆè¿™æ ·å¯èƒ½ä¼šé€ æˆå›æµå¹¶é‡ç»˜ï¼‰</li>\n<li>æœ€å Render è¿›ç¨‹å°†ç»“æœä¼ é€’ç»™ Browser è¿›ç¨‹</li>\n<li>Browser è¿›ç¨‹æ¥æ”¶åˆ°ç»“æœå¹¶å°†ç»“æœç»˜åˆ¶å‡ºæ¥</li>\n</ul>\n<h1 id=\"æµè§ˆå™¨å†…æ ¸ï¼ˆrender-è¿›ç¨‹ï¼‰ä¸­çº¿ç¨‹çš„å…³ç³»\">æµè§ˆå™¨å†…æ ¸ï¼ˆrender è¿›ç¨‹ï¼‰ä¸­çº¿ç¨‹çš„å…³ç³»</h1>\n<h2 id=\"gui-æ¸²æŸ“çº¿ç¨‹ä¸-js-å¼•æ“çº¿ç¨‹äº’æ–¥\">GUI æ¸²æŸ“çº¿ç¨‹ä¸ JS å¼•æ“çº¿ç¨‹äº’æ–¥</h2>\n<p>ç”±äº JavaScript æ˜¯å¯æ“çºµ DOM çš„ï¼Œå¦‚æœåœ¨ä¿®æ”¹è¿™äº›å…ƒç´ å±æ€§åŒæ—¶æ¸²æŸ“ç•Œé¢ï¼ˆå³ JS çº¿ç¨‹å’Œ UI çº¿ç¨‹åŒæ—¶è¿è¡Œï¼‰ï¼Œé‚£ä¹ˆæ¸²æŸ“çº¿ç¨‹å‰åè·å¾—çš„å…ƒç´ æ•°æ®å°±å¯èƒ½ä¸ä¸€è‡´äº†ã€‚\nå› æ­¤ä¸ºé˜²æ­¢æ¸²æŸ“å‡ºç°ä¸å¯é¢„æœŸçš„ç»“æœï¼Œæµè§ˆå™¨è®¾ç½® GUI æ¸²æŸ“çº¿ç¨‹ä¸ JS å¼•æ“ä¸ºäº’æ–¥ï¼Œå½“ JS å¼•æ“æ‰§è¡Œæ—¶ GUI çº¿ç¨‹ä¼šè¢«æŒ‚èµ·ã€‚\nGUI æ›´æ–°åˆ™ä¼šè¢«ä¿å­˜åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ç­‰åˆ° JS å¼•æ“çº¿ç¨‹ç©ºé—²æ—¶ç«‹å³è¢«æ‰§è¡Œã€‚</p>\n<h2 id=\"js-å¼•æ“é˜»å¡\">JS å¼•æ“é˜»å¡</h2>\n<h2 id=\"web-worker-çº¿ç¨‹\">web worker çº¿ç¨‹</h2>\n<p>ä¸ºè§£å†³ä¸Šä¸€ä¸ªé—®é¢˜è€Œæå‡º</p>\n<ul>\n<li>åˆ›å»º worker æ—¶ï¼ŒJS å¼•æ“ä¼šå‘æµè§ˆå™¨ç”³è¯·å¼€ä¸€ä¸ªå­çº¿ç¨‹</li>\n<li>JS å¼•æ“çº¿ç¨‹ä¸ worker çº¿ç¨‹é—´é€šè¿‡ç‰¹å®šçš„æ–¹å¼é€šä¿¡ï¼ˆpostMessage APIï¼‰ï¼Œéœ€è¦é€šè¿‡åºåˆ—åŒ–å¯¹è±¡æ¥ä¸çº¿ç¨‹äº¤äº’ç‰¹å®šçš„æ•°æ®\næ‰€ä»¥ï¼Œå¦‚æœæœ‰éå¸¸è€—æ—¶çš„æ“ä½œï¼Œå¯ä»¥å•ç‹¬æ‰“å¼€ä¸€ä¸ª worker çº¿ç¨‹ï¼Œè¿™æ ·ä¸ç®¡å¦‚ä½•å¤©ç¿»åœ°è¦†éƒ½ä¸ä¼šå½±å“ JS å¼•æ“ä¸»çº¿ç¨‹ï¼Œåªå¾…è®¡ç®—å‡ºç»“æœåï¼Œå°†ç»“æœé€šä¿¡ç»™ JS ä¸»çº¿ç¨‹å³å¯</li>\n</ul>\n<h2 id=\"shared-worker-çº¿ç¨‹\">shared worker çº¿ç¨‹</h2>\n<p>web worker ä¸ shared worker çš„åŒºåˆ«</p>\n<ul>\n<li>web worker åªå±äºæŸä¸ªé¡µé¢ï¼Œä¸ä¼šå’Œå…¶ä»–é¡µé¢çš„ render è¿›ç¨‹å…±äº«</li>\n<li>shared worker æ˜¯æµè§ˆå™¨æ‰€æœ‰é¡µé¢å…±äº«çš„ï¼Œä¸èƒ½é‡‡ç”¨ä¸ worker åŒæ ·çš„æ–¹å¼å®ç°ï¼Œä¸å±äºæŸä¸ª render è¿›ç¨‹</li>\n<li>web worker ç›¸å½“äºâ€œçº¿ç¨‹â€ï¼Œshared worker ç›¸å½“äºâ€œè¿›ç¨‹â€</li>\n</ul>\n"},{"title":"æµè§ˆå™¨ç›¸å…³-æ¸²æŸ“","tags":["æµè§ˆå™¨","æµè§ˆå™¨æ¸²æŸ“"],"categories":"æµè§ˆå™¨","description":"## æ¸²æŸ“æµç¨‹å›¾ç¤º\n\n![æµè§ˆå™¨æ¸²æŸ“è¿‡ç¨‹](https://mrrsblog.oss-cn-shanghai.aliyuncs.com/render-0.png)\n\n### è§£æ HTML æ–‡ä»¶\n\n![è§£æHTMLæ–‡ä»¶](https://mrrsblog.oss-cn-shanghai.aliyuncs.com/render-1.png)\ntokenï¼šæ ‡è®°ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯å­—ç¬¦ä¸²ï¼Œæ˜¯æ„æˆä»£ç çš„æœ€å°å•","createDate":"2019-06-30 15:10:22","updateDate":"10/1/2021, 3:34:43 AM","body":"<h2 id=\"æ¸²æŸ“æµç¨‹å›¾ç¤º\">æ¸²æŸ“æµç¨‹å›¾ç¤º</h2>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/render-0.png\" alt=\"æµè§ˆå™¨æ¸²æŸ“è¿‡ç¨‹\"></p>\n<h3 id=\"è§£æ-html-æ–‡ä»¶\">è§£æ HTML æ–‡ä»¶</h3>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/render-1.png\" alt=\"è§£æHTMLæ–‡ä»¶\">\ntokenï¼šæ ‡è®°ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯å­—ç¬¦ä¸²ï¼Œæ˜¯æ„æˆä»£ç çš„æœ€å°å•ä½ï¼Œè¿™ä¸€è¿‡ç¨‹ä¼šå°†ä»£ç åˆ†ä¸ºä¸€å—å—ï¼Œå¹¶åœ¨è¿™äº›å†…å®¹æ‰“ä¸Šæ ‡è®°ï¼Œä¾¿äºç†è§£è¿™äº›æœ€å°å•ä½çš„ä»£ç æ˜¯ä»€ä¹ˆæ„æ€\n<img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/render-2.png\" alt=\"token\"></p>\n<h3 id=\"è§£æ-css-æ–‡ä»¶\">è§£æ CSS æ–‡ä»¶</h3>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/render-3.png\" alt=\"è§£æCSSæ–‡ä»¶\"></p>\n<h3 id=\"ç”Ÿæˆæ¸²æŸ“æ ‘\">ç”Ÿæˆæ¸²æŸ“æ ‘</h3>\n<p>æ¸²æŸ“æ ‘åªä¼šåŒ…å«éœ€è¦æ˜¾ç¤ºçš„èŠ‚ç‚¹å’Œè¿™äº›èŠ‚ç‚¹çš„æ ·å¼ä¿¡æ¯ï¼Œå¦‚æœè¿™ä¸ªèŠ‚ç‚¹æ˜¯ display: noneï¼Œé‚£ä¹ˆå°±ä¸ä¼šåœ¨æ¸²æŸ“æ ‘ä¸Šæ˜¾ç¤ºã€‚å½“æµè§ˆå™¨ç”Ÿæˆæ¸²æŸ“æ ‘ä»¥åå°±ä¼šæ ¹æ®æ¸²æŸ“æ ‘æ¥è¿›è¡Œå¸ƒå±€ï¼ˆå›æµï¼‰ï¼Œç„¶åè°ƒç”¨ GPU ç»˜åˆ¶ï¼Œåˆæˆå›¾å±‚ï¼Œæ˜¾ç¤ºåœ¨å±å¹•ä¸Š</p>\n<h2 id=\"æ“ä½œ-dom-æ…¢çš„åŸå› \">æ“ä½œ DOM æ…¢çš„åŸå› </h2>\n<p>DOM å±äºæ¸²æŸ“å¼•æ“ä¸­çš„ä¸œè¥¿ï¼ŒJS åˆæ˜¯ JS å¼•æ“ä¸­çš„ä¸œè¥¿ï¼Œå½“é€šè¿‡ JS æ“ä½œ DOM çš„æ—¶å€™ï¼Œå…¶å®è¿™ä¸ªæ“ä½œæ¶‰åŠåˆ°äº†<strong>ä¸¤ä¸ªçº¿ç¨‹ä¹‹é—´çš„é€šä¿¡</strong>ï¼Œé‚£ä¹ˆåŠ¿å¿…ä¼šå¸¦æ¥ä¸€äº›æ€§èƒ½ä¸Šçš„æŸè€—ï¼Œæ“ä½œ DOM æ¬¡æ•°ä¸€å¤šï¼Œä¹Ÿå°±ç­‰åŒäºä¸€ç›´åœ¨è¿›è¡Œçº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼Œå¹¶ä¸”æ“ä½œ DOM å¯èƒ½è¿˜ä¼šå¸¦æ¥<strong>é‡ç»˜å›æµ</strong>çš„æƒ…å†µï¼Œæ‰€ä»¥å°±å¯¼è‡´äº†æ€§èƒ½ä¸Šçš„é—®é¢˜</p>\n<h2 id=\"ä»€ä¹ˆæƒ…å†µé˜»å¡æ¸²æŸ“\">ä»€ä¹ˆæƒ…å†µé˜»å¡æ¸²æŸ“</h2>\n<p>æ¸²æŸ“çš„å‰ææ˜¯ç”Ÿæˆæ¸²æŸ“æ ‘ï¼Œæ‰€ä»¥ HTML å’Œ CSS è‚¯å®šä¼šé˜»å¡æ¸²æŸ“ï¼Œå¦‚æœæƒ³æ¸²æŸ“çš„è¶Šå¿«ï¼Œå°±è¶Šåº”è¯¥é™ä½ä¸€å¼€å§‹éœ€è¦æ¸²æŸ“çš„æ–‡ä»¶å¤§å°ï¼Œå¹¶ä¸”æ‰å¹³å±‚çº§ï¼Œä¼˜åŒ–é€‰æ‹©å™¨\nç„¶åå½“æµè§ˆå™¨è§£æåˆ° script æ ‡ç­¾æ—¶ï¼Œä¼šæš‚åœæ„å»º DOMï¼Œå®Œæˆåæ‰ä¼šä»æš‚åœçš„åœ°æ–¹é‡æ–°å¼€å§‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ æƒ³é¦–å±æ¸²æŸ“çš„è¶Šå¿«ï¼Œå°±è¶Šä¸åº”è¯¥åœ¨é¦–å±å°±åŠ è½½ JS æ–‡ä»¶ï¼Œè¿™ä¹Ÿæ˜¯éƒ½å»ºè®®å°† script æ ‡ç­¾æ”¾åœ¨ body æ ‡ç­¾åº•éƒ¨çš„åŸå› ã€‚\nå½“ç„¶åœ¨å½“ä¸‹ï¼Œå¹¶ä¸æ˜¯è¯´ script æ ‡ç­¾å¿…é¡»æ”¾åœ¨åº•éƒ¨ï¼Œå› ä¸ºä½ å¯ä»¥ç»™ script æ ‡ç­¾æ·»åŠ  defer æˆ–è€… async å±æ€§ã€‚\nå½“ script æ ‡ç­¾åŠ ä¸Š defer å±æ€§ä»¥åï¼Œè¡¨ç¤ºè¯¥ JS æ–‡ä»¶ä¼šå¹¶è¡Œä¸‹è½½ï¼Œä½†æ˜¯ä¼šæ”¾åˆ° HTML è§£æå®Œæˆåé¡ºåºæ‰§è¡Œï¼Œæ‰€ä»¥å¯¹äºè¿™ç§æƒ…å†µä½ å¯ä»¥æŠŠ script æ ‡ç­¾æ”¾åœ¨ä»»æ„ä½ç½®ã€‚\nå¯¹äºæ²¡æœ‰ä»»ä½•ä¾èµ–çš„ JS æ–‡ä»¶å¯ä»¥åŠ ä¸Š async å±æ€§ï¼Œè¡¨ç¤º JS æ–‡ä»¶ä¸‹è½½å’Œè§£æä¸ä¼šé˜»å¡æ¸²æŸ“ã€‚</p>\n<h2 id=\"é‡ç»˜å’Œå›æµ\">é‡ç»˜å’Œå›æµ</h2>\n<p>é‡ç»˜ä¼šåœ¨è®¾ç½®èŠ‚ç‚¹æ ·å¼æ—¶é¢‘ç¹å‡ºç°ï¼ŒåŒæ—¶ä¹Ÿä¼šå¾ˆå¤§ç¨‹åº¦ä¸Šå½±å“æ€§èƒ½</p>\n<ul>\n<li>é‡ç»˜æ˜¯å½“èŠ‚ç‚¹éœ€è¦æ›´æ”¹å¤–è§‚è€Œä¸ä¼šå½±å“å¸ƒå±€çš„æ—¶å€™å‘ç”Ÿï¼Œæ¯”å¦‚æ”¹å˜ color å°±å«é‡ç»˜</li>\n<li>å›æµæ˜¯å¸ƒå±€æˆ–è€…å‡ ä½•å±æ€§éœ€è¦æ”¹å˜å°±ç§°ä¸ºå›æµ</li>\n</ul>\n<p>å›æµå¿…ç„¶ä¼šå¼•èµ·é‡ç»˜ï¼Œé‡ç»˜ä¸ä¸€å®šä¸ºå¼•å‘å›æµ</p>\n<h2 id=\"ä¼šå¼•èµ·å›æµçš„æ“ä½œ\">ä¼šå¼•èµ·å›æµçš„æ“ä½œ</h2>\n<ul>\n<li>é¡µé¢é¦–æ¬¡æ¸²æŸ“</li>\n<li>æµè§ˆå™¨çª—å£å¤§å°å‘ç”Ÿæ”¹å˜</li>\n<li>å…ƒç´ å°ºå¯¸æˆ–è€…ä½ç½®å‘ç”Ÿæ”¹å˜</li>\n<li>å…ƒç´ å†…å®¹å˜åŒ–ï¼ˆæ–‡å­—æ•°é‡æˆ–è€…å›¾ç‰‡å‘å°å‘ç”Ÿæ”¹å˜ï¼‰</li>\n<li>å…ƒç´ å­—ä½“å¤§å°çš„å˜åŒ–</li>\n<li>æ·»åŠ æˆ–åˆ é™¤<strong>å¯è§</strong>çš„DOMå…ƒç´ </li>\n<li>æ¿€æ´»CSSä¼ªç±»ï¼ˆ:hoverï¼‰</li>\n<li>æŸ¥è¯¢æŸäº›å±æ€§æˆ–è°ƒç”¨æŸäº›æ–¹æ³•<ul>\n<li><code>clientWidth</code>ã€<code>clientHeight</code>ã€<code>clientTop</code>ã€<code>clientLeft</code></li>\n<li><code>offsetWidth</code>ã€<code>offsetHeight</code>ã€<code>offsetTop</code>ã€<code>offsetLeft</code></li>\n<li><code>scrollWidth</code>ã€<code>scrollHeight</code>ã€<code>scrollTop</code>ã€<code>scrollLeft</code></li>\n<li><code>scrollIntoView()</code>ã€<code>scrollIntoViewIfNeeded()</code></li>\n<li><code>getComputedStyle()</code></li>\n<li><code>getBoundingClientRect()</code></li>\n<li><code>scrollTo()</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"å‡å°‘é‡ç»˜å’Œå›æµ\">å‡å°‘é‡ç»˜å’Œå›æµ</h2>\n<ul>\n<li>ä½¿ç”¨ transform ä»£æ›¿ top</li>\n<li>ä½¿ç”¨ visiblity ä»£æ›¿ display: noneï¼ˆå‰è€…å¼•èµ·é‡ç»˜ï¼Œåè€…å¼•èµ·å›æµï¼‰</li>\n<li>ä¸è¦æŠŠèŠ‚ç‚¹çš„å±æ€§å€¼æ”¾åœ¨ä¸€ä¸ªå¾ªç¯é‡Œå½“å¾ªç¯çš„å˜é‡</li>\n<li>ä¸è¦ä½¿ç”¨ table å¸ƒå±€</li>\n<li>åŠ¨ç”»çš„é€‰æ‹©</li>\n<li>CSS é€‰æ‹©ç¬¦ä»å³åˆ°å·¦åŒ¹é…æŸ¥æ‰¾ï¼Œé¿å…èŠ‚ç‚¹å±‚çº§è¿‡å¤š</li>\n</ul>\n"},{"title":"æµè§ˆå™¨ç›¸å…³-è·¨åŸŸ","tags":["è·¨åŸŸ"],"categories":"æµè§ˆå™¨","description":"# WHAT-ä»€ä¹ˆæ˜¯è·¨åŸŸåŠåŒæºç­–ç•¥\n\n## åŒæºç­–ç•¥\n\n**åŒæºç­–ç•¥**æ˜¯ä¸€ä¸ªé‡è¦çš„å®‰å…¨ç­–ç•¥ï¼Œå®ƒç”¨äºé™åˆ¶ä¸€ä¸ª[origin](https://developer.mozilla.org/zh-CN/docs/Glossary/æº)çš„æ–‡æ¡£æˆ–è€…å®ƒåŠ è½½çš„è„šæœ¬å¦‚ä½•èƒ½ä¸å¦ä¸€ä¸ªæºçš„èµ„æºè¿›è¡Œäº¤äº’ã€‚å®ƒèƒ½å¸®åŠ©é˜»éš”æ¶æ„æ–‡æ¡£ï¼Œå‡å°‘å¯èƒ½è¢«æ”»å‡»çš„åª’ä»‹ã€‚\n\nå¦‚æœä¸¤ä¸ª URL çš„ [protocol](https://de","createDate":"2020-04-09 23:26:29","updateDate":"10/1/2021, 3:34:43 AM","body":"<h1 id=\"what-ä»€ä¹ˆæ˜¯è·¨åŸŸåŠåŒæºç­–ç•¥\">WHAT-ä»€ä¹ˆæ˜¯è·¨åŸŸåŠåŒæºç­–ç•¥</h1>\n<h2 id=\"åŒæºç­–ç•¥\">åŒæºç­–ç•¥</h2>\n<p><strong>åŒæºç­–ç•¥</strong>æ˜¯ä¸€ä¸ªé‡è¦çš„å®‰å…¨ç­–ç•¥ï¼Œå®ƒç”¨äºé™åˆ¶ä¸€ä¸ª<a href=\"https://developer.mozilla.org/zh-CN/docs/Glossary/%E6%BA%90\">origin</a>çš„æ–‡æ¡£æˆ–è€…å®ƒåŠ è½½çš„è„šæœ¬å¦‚ä½•èƒ½ä¸å¦ä¸€ä¸ªæºçš„èµ„æºè¿›è¡Œäº¤äº’ã€‚å®ƒèƒ½å¸®åŠ©é˜»éš”æ¶æ„æ–‡æ¡£ï¼Œå‡å°‘å¯èƒ½è¢«æ”»å‡»çš„åª’ä»‹ã€‚</p>\n<p>å¦‚æœä¸¤ä¸ª URL çš„ <a href=\"https://developer.mozilla.org/zh-CN/docs/Glossary/Protocol\">protocol</a>ã€<a href=\"https://developer.mozilla.org/en-US/docs/Glossary/port\">port</a> (å¦‚æœæœ‰æŒ‡å®šçš„è¯)å’Œ <a href=\"https://developer.mozilla.org/en-US/docs/Glossary/host\">host</a> éƒ½ç›¸åŒçš„è¯ï¼Œåˆ™è¿™ä¸¤ä¸ª URL æ˜¯<em>åŒæº</em>ã€‚è¿™ä¸ªæ–¹æ¡ˆä¹Ÿè¢«ç§°ä¸ºâ€œåè®®/ä¸»æœº/ç«¯å£å…ƒç»„â€ï¼Œæˆ–è€…ç›´æ¥æ˜¯ â€œå…ƒç»„â€ã€‚ï¼ˆâ€œå…ƒç»„â€ æ˜¯æŒ‡ä¸€ç»„é¡¹ç›®æ„æˆçš„æ•´ä½“ï¼ŒåŒé‡/ä¸‰é‡/å››é‡/äº”é‡/ç­‰çš„é€šç”¨å½¢å¼ï¼‰ã€‚</p>\n<p><strong>åŒæºç­–ç•¥é™åˆ¶å†…å®¹æœ‰ï¼š</strong></p>\n<ul>\n<li>Cookieã€LocalStorageã€IndexedDB ç­‰å­˜å‚¨æ€§å†…å®¹</li>\n<li>DOM èŠ‚ç‚¹</li>\n<li>AJAX è¯·æ±‚å‘é€åï¼Œç»“æœè¢«æµè§ˆå™¨æ‹¦æˆªäº†</li>\n</ul>\n<p>ä½†æ˜¯æœ‰ä¸‰ä¸ªæ ‡ç­¾æ˜¯å…è®¸è·¨åŸŸåŠ è½½èµ„æºï¼š</p>\n<ul>\n<li><code>&lt;img src=XXX&gt;</code></li>\n<li><code>&lt;link href=XXX&gt;</code></li>\n<li><code>&lt;script src=XXX&gt;</code></li>\n</ul>\n<h2 id=\"è·¨åŸŸ\">è·¨åŸŸ</h2>\n<p>å½“åè®®ã€å­åŸŸåã€ä¸»åŸŸåã€ç«¯å£å·ä¸­ä»»æ„ä¸€ä¸ªä¸ç›¸åŒæ—¶ï¼Œéƒ½ç®—ä½œä¸åŒåŸŸã€‚ä¸åŒåŸŸä¹‹é—´ç›¸äº’è¯·æ±‚èµ„æºå°±ç®—åš<strong>è·¨åŸŸ</strong>ã€‚</p>\n<p>ç‰¹åˆ«è¯´æ˜ï¼š</p>\n<ol>\n<li><p>å¦‚æœæ˜¯åè®®å’Œç«¯å£é€ æˆçš„è·¨åŸŸé—®é¢˜ï¼Œå‰ç«¯æ˜¯æ— èƒ½ä¸ºåŠ›çš„</p>\n</li>\n<li><p>åœ¨è·¨åŸŸé—®é¢˜ä¸Šï¼Œä»…ä»…æ˜¯é€šè¿‡<strong>URLçš„é¦–éƒ¨</strong>æ¥è¯†åˆ«è€Œä¸ä¼šæ ¹æ®åŸŸåå¯¹åº”çš„ipæ˜¯å¦ç›¸åŒæ¥åˆ¤æ–­ã€‚</p>\n</li>\n<li><p>è¯·æ±‚è·¨åŸŸåï¼Œè¯·æ±‚åˆ°åº•æœ‰æ²¡æœ‰å‘é€å‡ºå»ï¼š</p>\n<p>è·¨åŸŸä¸æ˜¯è¯·æ±‚å‘é€ä¸å‡ºå»ï¼Œè¯·æ±‚èƒ½å‘é€å‡ºå»ï¼ŒæœåŠ¡ç«¯èƒ½æ¥æ”¶åˆ°è¯·æ±‚å¹¶æ­£å¸¸çš„è¿”å›ï¼Œåªæ˜¯ç»“æœè¢«æµè§ˆå™¨æ‹¦æˆªäº†ï¼ˆåŒæºç­–ç•¥ï¼‰ã€‚</p>\n</li>\n<li><p>ä¸ºä»€ä¹ˆé€šè¿‡è¡¨å•çš„æ–¹å¼å¯ä»¥å‘èµ·è·¨åŸŸè¯·æ±‚ï¼ŒAjaxå°±ä¸èƒ½ï¼Ÿ</p>\n<p>å½’æ ¹ç»“åº•ï¼Œè·¨åŸŸæ˜¯å› ä¸ºäº†é˜»æ­¢ç”¨æˆ·è¯»å–åˆ°å¦ä¸€ä¸ªåŸŸåä¸‹çš„å†…å®¹ï¼ŒAjaxå¯ä»¥è·å–å“åº”ï¼Œæµè§ˆå™¨ä»»åŠ¡è¿™ä¸å®‰å…¨æ‰€ä»¥æ‹¦æˆªäº†å“åº”ï¼›ä½†æ˜¯è¡¨å•å¹¶ä¸ä¼šè·å–æ–°çš„å†…å®¹ï¼Œæ‰€ä»¥å¯ä»¥å‘èµ·è·¨åŸŸè¯·æ±‚ã€‚åŒæ—¶ä¹Ÿè¯´æ˜äº†è·¨åŸŸå¹¶ä¸èƒ½å®Œå…¨é˜»æ­¢ CSRFï¼Œå› ä¸ºè¯·æ±‚æ¯•ç«Ÿæ˜¯å‘å‡ºå»äº†ã€‚</p>\n</li>\n</ol>\n<h1 id=\"why-ä¸ºä»€ä¹ˆæœ‰åŒæºç­–ç•¥\">WHY-ä¸ºä»€ä¹ˆæœ‰åŒæºç­–ç•¥</h1>\n<p><strong>å®‰å…¨</strong></p>\n<h1 id=\"how-è·¨åŸŸè§£å†³æ–¹æ¡ˆ\">HOW-è·¨åŸŸè§£å†³æ–¹æ¡ˆ</h1>\n<h2 id=\"jsonp\">JSONP</h2>\n<p>åŸç†ï¼šåˆ©ç”¨<code>&lt;script&gt;</code>æ ‡ç­¾æ²¡æœ‰åŒæºç­–ç•¥é™åˆ¶çš„æ¼æ´ï¼Œç½‘é¡µå¯ä»¥å¾—åˆ°ä»å…¶ä»–æºåŠ¨æ€äº§ç”Ÿçš„JSONæ•°æ®ã€‚JSONPè¯·æ±‚ä¸€å®šéœ€è¦å¯¹æ–¹çš„<strong>æœåŠ¡å™¨æ”¯æŒ</strong>ã€‚JSONPä¼˜ç‚¹æ˜¯ç®€å•å…¼å®¹æ€§å¥½ï¼Œå¯ç”¨äºè§£å†³ä¸»æµæµè§ˆå™¨çš„è·¨åŸŸæ•°æ®è®¿é—®çš„é—®é¢˜ã€‚ç¼ºç‚¹æ˜¯<strong>ä»…æ”¯æŒgetæ–¹æ³•å…·æœ‰å±€é™æ€§,ä¸å®‰å…¨å¯èƒ½ä¼šé­å—XSSæ”»å‡»ã€‚</strong></p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">jsonp</span>(<span class=\"hljs-params\">{ url, params, callback }</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve, reject</span>) =&gt;</span> {\n        <span class=\"hljs-keyword\">let</span> script = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createElement</span>(<span class=\"hljs-string\">&quot;script&quot;</span>)\n        <span class=\"hljs-variable language_\">window</span>[callback] = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">data</span>) {\n            <span class=\"hljs-title function_\">resolve</span>(data)\n            <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">body</span>.<span class=\"hljs-title function_\">removeChildren</span>(script)\n        }\n        params = { ...params, callback }\n        <span class=\"hljs-keyword\">let</span> arrs = []\n        <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">keys</span>(params).<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">item</span> =&gt;</span> arrs.<span class=\"hljs-title function_\">push</span>(<span class=\"hljs-string\">`<span class=\"hljs-subst\">${ key }</span>=<span class=\"hljs-subst\">${ params[key] }</span>`</span>))\n        script.<span class=\"hljs-property\">src</span> = <span class=\"hljs-string\">`<span class=\"hljs-subst\">${ url }</span>?<span class=\"hljs-subst\">${ arrs.join(<span class=\"hljs-string\">&#x27;&amp;&#x27;</span>) }</span>`</span>\n        <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">body</span>.<span class=\"hljs-title function_\">appendChild</span>(script)\n    })\n}\n</code></pre>\n<h2 id=\"cors\">CORS</h2>\n<p>CORSéœ€è¦<strong>æµè§ˆå™¨å’Œåç«¯åŒæ—¶æ”¯æŒ</strong></p>\n<p>æµè§ˆå™¨ä¼šè‡ªåŠ¨è¿›è¡Œ CORS é€šä¿¡ï¼Œå®ç° CORS é€šä¿¡çš„å…³é”®æ˜¯åç«¯ã€‚åªè¦åç«¯å®ç°äº† CORSï¼Œå°±å®ç°äº†è·¨åŸŸã€‚</p>\n<p>æœåŠ¡ç«¯è®¾ç½® Access-Control-Allow-Origin å°±å¯ä»¥å¼€å¯ CORSã€‚ è¯¥å±æ€§è¡¨ç¤ºå“ªäº›åŸŸåå¯ä»¥è®¿é—®èµ„æºï¼Œå¦‚æœè®¾ç½®é€šé…ç¬¦åˆ™è¡¨ç¤ºæ‰€æœ‰ç½‘ç«™éƒ½å¯ä»¥è®¿é—®èµ„æºã€‚</p>\n<p>è™½ç„¶è®¾ç½® CORS å’Œå‰ç«¯æ²¡ä»€ä¹ˆå…³ç³»ï¼Œä½†æ˜¯é€šè¿‡è¿™ç§æ–¹å¼è§£å†³è·¨åŸŸé—®é¢˜çš„è¯ï¼Œä¼šåœ¨å‘é€è¯·æ±‚æ—¶å‡ºç°ä¸¤ç§æƒ…å†µï¼Œåˆ†åˆ«ä¸º<strong>ç®€å•è¯·æ±‚</strong>å’Œ<strong>å¤æ‚è¯·æ±‚</strong>ã€‚</p>\n<h3 id=\"ç®€å•è¯·æ±‚\">ç®€å•è¯·æ±‚</h3>\n<p>åªè¦<strong>åŒæ—¶æ»¡è¶³</strong>ä»¥ä¸‹æ¡ä»¶ï¼Œå°±å±äºç®€å•è¯·æ±‚ï¼š</p>\n<ol>\n<li>method=GET/POST/HEAD</li>\n<li>Content-Type=text/plainæˆ–multipart/form-dataæˆ–application/x-www-form-urlencoded</li>\n<li>è¯·æ±‚ä¸­çš„ä»»æ„<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequestUpload\"><code>XMLHttpRequestUpload</code></a> å¯¹è±¡å‡æ²¡æœ‰æ³¨å†Œä»»ä½•äº‹ä»¶ç›‘å¬å™¨ï¼›<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequestUpload\"><code>XMLHttpRequestUpload</code></a> å¯¹è±¡å¯ä»¥ä½¿ç”¨ <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/upload\"><code>XMLHttpRequest.upload</code></a> å±æ€§è®¿é—®</li>\n</ol>\n<h3 id=\"å¤æ‚è¯·æ±‚\">å¤æ‚è¯·æ±‚</h3>\n<p> å¤æ‚è¯·æ±‚çš„CORSè¯·æ±‚ï¼Œä¼šåœ¨æ­£å¼é€šä¿¡ä¹‹å‰ï¼Œå¢åŠ ä¸€æ¬¡HTTPæŸ¥è¯¢è¯·æ±‚ï¼Œç§°ä¸º<strong>é¢„æ£€è¯·æ±‚</strong>,è¯¥è¯·æ±‚æ˜¯ option æ–¹æ³•çš„ï¼Œé€šè¿‡è¯¥è¯·æ±‚æ¥çŸ¥é“æœåŠ¡ç«¯æ˜¯å¦å…è®¸è·¨åŸŸè¯·æ±‚ã€‚</p>\n<h2 id=\"postmessage\">postMessage</h2>\n<p>postMessageæ˜¯HTML5 XMLHttpRequest Level 2ä¸­çš„APIï¼Œä¸”æ˜¯ä¸ºæ•°ä¸å¤šå¯ä»¥è·¨åŸŸæ“ä½œçš„windowå±æ€§ä¹‹ä¸€ï¼Œå®ƒå¯ç”¨äºè§£å†³ä»¥ä¸‹æ–¹é¢çš„é—®é¢˜ï¼š</p>\n<ul>\n<li>é¡µé¢å’Œå…¶æ‰“å¼€çš„æ–°çª—å£çš„æ•°æ®ä¼ é€’</li>\n<li>å¤šçª—å£ä¹‹é—´æ¶ˆæ¯ä¼ é€’</li>\n<li>é¡µé¢ä¸åµŒå¥—çš„iframeæ¶ˆæ¯ä¼ é€’</li>\n<li>ä¸Šé¢ä¸‰ä¸ªåœºæ™¯çš„è·¨åŸŸæ•°æ®ä¼ é€’</li>\n</ul>\n<h2 id=\"websocket\">websocket</h2>\n<p>Websocketæ˜¯HTML5çš„ä¸€ä¸ªæŒä¹…åŒ–åè®®ï¼Œå®ƒå®ç°äº†æµè§ˆå™¨ä¸æœåŠ¡å™¨çš„å…¨åŒå·¥é€šä¿¡ï¼ŒåŒæ—¶ä¹Ÿæ˜¯è·¨åŸŸçš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚WebSocketå’ŒHTTPéƒ½æ˜¯åº”ç”¨å±‚åè®®ï¼Œéƒ½åŸºäº TCP åè®®ã€‚ä½†æ˜¯ <strong>WebSocket æ˜¯ä¸€ç§åŒå‘é€šä¿¡åè®®ï¼Œåœ¨å»ºç«‹è¿æ¥ä¹‹åï¼ŒWebSocket çš„ server ä¸ client éƒ½èƒ½ä¸»åŠ¨å‘å¯¹æ–¹å‘é€æˆ–æ¥æ”¶æ•°æ®</strong>ã€‚åŒæ—¶ï¼ŒWebSocket åœ¨å»ºç«‹è¿æ¥æ—¶éœ€è¦å€ŸåŠ© HTTP åè®®ï¼Œè¿æ¥å»ºç«‹å¥½äº†ä¹‹å client ä¸ server ä¹‹é—´çš„åŒå‘é€šä¿¡å°±ä¸ HTTP æ— å…³äº†ã€‚</p>\n<h2 id=\"nginxåå‘ä»£ç†\">Nginxåå‘ä»£ç†</h2>\n<p>å®ç°æ€è·¯ï¼šé€šè¿‡nginxé…ç½®ä¸€ä¸ªä»£ç†æœåŠ¡å™¨ï¼ˆåŸŸåä¸domain1ç›¸åŒï¼Œç«¯å£ä¸åŒï¼‰åšè·³æ¿æœºï¼Œåå‘ä»£ç†è®¿é—®domain2æ¥å£ï¼Œå¹¶ä¸”å¯ä»¥é¡ºä¾¿ä¿®æ”¹cookieä¸­domainä¿¡æ¯ï¼Œæ–¹ä¾¿å½“å‰åŸŸcookieå†™å…¥ï¼Œå®ç°è·¨åŸŸç™»å½•ã€‚</p>\n"},{"title":"ç½‘ç»œç›¸å…³-http","tags":["ç½‘ç»œç›¸å…³","http"],"categories":"ç½‘ç»œ","description":"# HTTPåè®®\n\n**è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHTTPï¼‰** æ˜¯ä¸€ä¸ªç”¨äºä¼ è¾“è¶…åª’ä½“æ–‡æ¡£ï¼ˆä¾‹å¦‚ HTMLï¼‰çš„[åº”ç”¨å±‚](https://en.wikipedia.org/wiki/Application_Layer)åè®®ã€‚å®ƒæ˜¯ä¸º Web æµè§ˆå™¨ä¸ Web æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡è€Œè®¾è®¡çš„ï¼Œä½†ä¹Ÿå¯ä»¥ç”¨äºå…¶ä»–ç›®çš„ã€‚HTTP éµå¾ªç»å…¸çš„[å®¢æˆ·ç«¯-æœåŠ¡ç«¯æ¨¡å‹](https://en.wikipedia.org/wik","createDate":"2020-04-16 21:00:05","updateDate":"10/1/2021, 3:34:43 AM","body":"<h1 id=\"httpåè®®\">HTTPåè®®</h1>\n<p><strong>è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHTTPï¼‰</strong> æ˜¯ä¸€ä¸ªç”¨äºä¼ è¾“è¶…åª’ä½“æ–‡æ¡£ï¼ˆä¾‹å¦‚ HTMLï¼‰çš„<a href=\"https://en.wikipedia.org/wiki/Application_Layer\">åº”ç”¨å±‚</a>åè®®ã€‚å®ƒæ˜¯ä¸º Web æµè§ˆå™¨ä¸ Web æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡è€Œè®¾è®¡çš„ï¼Œä½†ä¹Ÿå¯ä»¥ç”¨äºå…¶ä»–ç›®çš„ã€‚HTTP éµå¾ªç»å…¸çš„<a href=\"https://en.wikipedia.org/wiki/Client%E2%80%93server_model\">å®¢æˆ·ç«¯-æœåŠ¡ç«¯æ¨¡å‹</a>ï¼Œå®¢æˆ·ç«¯æ‰“å¼€ä¸€ä¸ªè¿æ¥ä»¥å‘å‡ºè¯·æ±‚ï¼Œç„¶åç­‰å¾…å®ƒæ”¶åˆ°æœåŠ¡å™¨ç«¯å“åº”ã€‚HTTP æ˜¯<a href=\"http://en.wikipedia.org/wiki/Stateless_protocol\">æ— çŠ¶æ€åè®®</a>ï¼Œè¿™æ„å‘³ç€æœåŠ¡å™¨ä¸ä¼šåœ¨ä¸¤ä¸ªè¯·æ±‚ä¹‹é—´ä¿ç•™ä»»ä½•æ•°æ®ï¼ˆçŠ¶æ€ï¼‰ã€‚è¯¥åè®®è™½ç„¶é€šå¸¸åŸºäº TCP/IP å±‚ï¼Œä½†å¯ä»¥åœ¨ä»»ä½•å¯é çš„<a href=\"https://zh.wikipedia.org/wiki/%E4%BC%A0%E8%BE%93%E5%B1%82\">ä¼ è¾“å±‚</a>ä¸Šä½¿ç”¨ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸åƒ UDPï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸ä¼šé™é»˜ä¸¢å¤±æ¶ˆæ¯çš„åè®®ã€‚<a href=\"https://en.wikipedia.org/wiki/Reliable_User_Datagram_Protocol\">RUDP</a>â€”â€”ä½œä¸º UDP çš„å¯é åŒ–å‡çº§ç‰ˆæœ¬â€”â€”æ˜¯ä¸€ç§åˆé€‚çš„æ›¿ä»£é€‰æ‹©ã€‚</p>\n<h1 id=\"httpç‰ˆæœ¬\">HTTPç‰ˆæœ¬</h1>\n<h2 id=\"http10\">HTTP/1.0</h2>\n<p>æœ€åˆçš„httpåªæ˜¯ä½¿ç”¨åœ¨ä¸€äº›è¾ƒä¸ºç®€å•çš„ç½‘é¡µå’Œè¯·æ±‚ä¸Šï¼Œæ‰€ä»¥æ¯”è¾ƒç®€å•ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½æ‰“å¼€ä¸€ä¸ªæ–°çš„TCPè¿æ¥ï¼Œæ”¶åˆ°å“åº”åç«‹å³æ–­å¼€è¿æ¥</p>\n<h2 id=\"http11\">HTTP/1.1</h2>\n<ul>\n<li>HTTP/1.1å¼•å…¥äº†æ›´å¤šçš„ç¼“å­˜æ§åˆ¶ç­–ç•¥ï¼Œå¦‚Entity tagã€If-Unmidified-Sinceã€If-Matchã€If-None-Matchç­‰</li>\n<li>HTTP/1.1å…è®¸èŒƒå›´è¯·æ±‚ï¼Œå³åœ¨è¯·æ±‚å¤´ä¸­åŠ å…¥<code>Range</code>å¤´éƒ¨</li>\n<li>HTTP/1.1çš„è¯·æ±‚æ¶ˆæ¯å’Œå“åº”æ¶ˆæ¯éƒ½å¿…é¡»åŒ…å«<code>Host</code>å¤´éƒ¨ï¼Œä»¥åŒºåˆ†åŒä¸€ä¸ªç‰©ç†ä¸»æœºä¸­çš„ä¸åŒè™šæ‹Ÿç»ˆæçš„åŸŸå</li>\n<li>HTTP/1.1é»˜è®¤å¼€å¯æŒä¹…è¿æ¥ï¼Œåœ¨ä¸€ä¸ªTCPè¿æ¥ä¸Šå¯ä»¥ä¼ è¾“å¤šä¸ªHTTPè¯·æ±‚å’Œå“åº”ï¼Œå‡å°‘äº†å»ºç«‹å’Œå…³é—­è¿æ¥çš„æ¶ˆè€—å’Œå»¶è¿Ÿ</li>\n</ul>\n<h2 id=\"http20\">HTTP/2.0</h2>\n<p>åœ¨HTTP/2.0ä¸­ï¼Œæœ‰ä¸¤ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µï¼Œå¸§ï¼ˆframeï¼‰å’Œæµï¼ˆstreamï¼‰ï¼Œç†è§£è¿™ä¸¤ä¸ªæ¦‚å¿µæ˜¯ç†è§£ä¸‹é¢å¤šè·¯å¤ç”¨çš„å‰æã€‚å¸§ä»£è¡¨æ•°æ®ä¼ è¾“çš„æœ€å°å•ä½ï¼Œæ¯ä¸ªå¸§éƒ½åˆåºåˆ—æ ‡è¯†è¡¨æ˜è¯¥å¸§å±äºå“ªä¸ªæµï¼Œæµä¹Ÿå°±æ˜¯å¤šä¸ªå¸§ç»„æˆçš„æ•°æ®æµï¼Œæ¯ä¸ªæµè¡¨ç¤ºä¸€ä¸ªè¯·æ±‚ã€‚</p>\n<ul>\n<li>æ–°çš„äºŒè¿›åˆ¶æ ¼å¼\nHTTP/1.xçš„è§£ææ˜¯åŸºäºæ–‡æœ¬çš„ã€‚åŸºäºæ–‡æœ¬åè®®çš„è§£æå­˜åœ¨å¤©ç„¶ç¼ºé™·ï¼Œæ–‡æœ¬çš„è¡¨ç°å½¢å¼æœ‰å¤šæ ·æ€§ï¼Œè¦åšåˆ°å…¨é¢æ€§è€ƒè™‘çš„åœºæ™¯ å¿…ç„¶å¾ˆå¤šã€‚äºŒè¿›åˆ¶åˆ™ä¸åŒï¼Œåªè¯†åˆ«0å’Œ1çš„ç»„åˆã€‚åŸºäºè¿™ç§è€ƒè™‘HTTP/2.0çš„åè®®è§£æé‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼ï¼Œæ–¹ä¾¿ä¸”å¼ºå¤§</li>\n<li>å¤šè·¯å¤ç”¨\nHTTP/2.0æ”¯æŒå¤šè·¯å¤ç”¨ï¼Œè¿™æ˜¯HTTP/1.1æŒä¹…è¿æ¥çš„å‡çº§ç‰ˆã€‚å¤šè·¯å¤ç”¨ï¼Œå°±æ˜¯åœ¨ä¸€ä¸ªTCPè¿æ¥ä¸­å¯ä»¥å­˜åœ¨å¤šæ¡æµï¼Œä¹Ÿå°±æ˜¯å¯ä»¥å‘é€å¤šä¸ªè¯·æ±‚ï¼ŒæœåŠ¡ç«¯åˆ™å¯ä»¥é€šè¿‡å¸§ä¸­çš„æ ‡è¯†çŸ¥é“è¯¥å¸§å±äºå“ªä¸ªæµï¼ˆå³è¯·æ±‚ï¼‰ï¼Œé€šè¿‡é‡æ–°æ’åºè¿˜åŸè¯·æ±‚ã€‚å¤šè·¯å¤ç”¨å…è®¸å¹¶å‘åœ°å‘èµ·å¤šä¸ªè¯·æ±‚ï¼Œæ¯ä¸ªè¯·æ±‚åŠè¯¥è¯·æ±‚åœ°å“åº”ä¸éœ€è¦ç­‰å¾…å…¶ä»–åœ°è¯·æ±‚å’Œå“åº”ï¼Œé¿å…äº†çº¿å¤´é˜»å¡é—®é¢˜ã€‚è¿™æ ·æŸä¸ªè¯·æ±‚ä»»åŠ¡å¥½äº‹ä¸¥é‡å¹¶ä¸ä¼šå½±å“åˆ°å…¶ä»–è¿æ¥åœ°æ­£å¸¸æ‰§è¡Œï¼Œæå¤§åœ°æé«˜äº†ä¼ è¾“æ€§èƒ½</li>\n<li>å¤´éƒ¨å‹ç¼©\nHTTP/1.xçš„è¯·æ±‚å’Œå“åº”å¤´éƒ¨å¸¦æœ‰å¤§é‡ä¿¡æ¯ï¼Œå¹¶ä¸”æ¯æ¬¡è¯·æ±‚éƒ½è¦é‡æ–°å‘é€ï¼ŒHTTP/2.0ä½¿ç”¨encoderæ¥å‡å°‘éœ€è¦ä¼ è¾“çš„å¤´éƒ¨å¤§å°ï¼Œé€šè®¯åŒæ–¹å„è‡ªcacheä¸€ä»½å¤´éƒ¨fieldsè¡¨ï¼Œæ—¢é¿å…äº†é‡å¤å¤´éƒ¨çš„ä¼ è¾“ï¼Œåˆå‡å°äº†éœ€è¦ä¼ è¾“çš„å¤§å°</li>\n<li>æœåŠ¡ç«¯æ¨é€\nè¿™é‡Œçš„æœåŠ¡ç«¯æ¨é€æŒ‡çš„æ˜¯å’ŒæŠŠå®¢æˆ·ç«¯éœ€è¦çš„css/js/imgèµ„æºä¼´éšç€htmlä¸€èµ·å‘é€åˆ°å®¢æˆ·ç«¯ï¼Œçœå»äº†å®¢æˆ·ç«¯é‡å¤è¯·æ±‚çš„æ­¥éª¤</li>\n</ul>\n<h1 id=\"httpæŠ¥æ–‡\">HTTPæŠ¥æ–‡</h1>\n<p>ç”¨æˆ·HTTPåè®®äº¤äº’çš„ä¿¡æ¯è¢«ç§°ä¸ºHTTPæŠ¥æ–‡ã€‚å®¢æˆ·ç«¯çš„HTTPæŠ¥æ–‡ç§°ä¸ºè¯·æ±‚æŠ¥æ–‡ï¼ŒæœåŠ¡ç«¯çš„HTTPæŠ¥æ–‡ç§°ä¸ºå“åº”æŠ¥æ–‡</p>\n<p>è¯·æ±‚æŠ¥æ–‡æ˜¯ç”±è¯·æ±‚è¡Œï¼ˆè¯·æ±‚æ–¹æ³•ã€åè®®ç‰ˆæœ¬ï¼‰ã€è¯·æ±‚é¦–éƒ¨ï¼ˆè¯·æ±‚URIã€å®¢æˆ·ç«¯ä¿¡æ¯ï¼‰å’Œå†…å®¹å®ä½“ï¼ˆç”¨æˆ·ä¿¡æ¯å’Œèµ„æºä¿¡æ¯ï¼Œå¯ä¸ºç©ºï¼‰æ„æˆ</p>\n<p>å“åº”æŠ¥æ–‡æ˜¯ç”±çŠ¶æ€è¡Œï¼ˆåè®®ç‰ˆæœ¬ã€çŠ¶æ€ç ï¼‰ã€å“åº”é¦–éƒ¨ï¼ˆæœåŠ¡å™¨åç§°ã€èµ„æºæ ‡è¯†ç­‰ï¼‰å’Œå†…å®¹å®ä½“ï¼ˆæœåŠ¡ç«¯è¿”å›çš„èµ„æºä¿¡æ¯ï¼‰æ„æˆ</p>\n<h2 id=\"è¯·æ±‚æ–¹æ³•\">è¯·æ±‚æ–¹æ³•</h2>\n<ul>\n<li>GET\nGETæ–¹æ³•è¯·æ±‚ä¸€ä¸ªæŒ‡å®šèµ„æºçš„è¡¨ç¤ºå½¢å¼ï¼Œä½¿ç”¨GETè¯·æ±‚åº”è¯¥ä¹‹è¢«ç”¨äºè·å–æ•°æ®</li>\n<li>POST\nPOSTæ–¹æ³•ç”¨äºå°†å®ä½“æäº¤åˆ°æŒ‡å®šçš„èµ„æºï¼Œé€šå¸¸å¯¼è‡´åœ¨æœåŠ¡å™¨ä¸Šçš„çŠ¶æ€å˜åŒ–æˆ–å‰¯ä½œç”¨</li>\n<li>PUT\nPUTæ–¹æ³•ç”¨è¯·æ±‚æœ‰æ•ˆè½½è·æ›¿æ¢ç›®æ ‡çš„æ‰€æœ‰å½“å‰è¡¨ç¤º</li>\n<li>DELETE\nDELETEæ–¹æ³•åˆ é™¤æŒ‡å®šçš„èµ„æº</li>\n<li>HEAD\nHEADæ–¹æ³•è¯·æ±‚ä¸€ä¸ªä¸GETè¯·æ±‚çš„å“åº”ç›¸åŒçš„å“åº”ï¼Œä½†æ²¡æœ‰å“åº”ä½“</li>\n<li>OPTIONS\nOPTIONSæ–¹æ³•ç”¨äºæè¿°ç›®æ ‡èµ„æºçš„é€šä¿¡é€‰é¡¹</li>\n</ul>\n<h2 id=\"çŠ¶æ€ç \">çŠ¶æ€ç </h2>\n<p>å“åº”åˆ†ä¸ºäº”ç±»ï¼šä¿¡æ¯å“åº”(<code>100</code>â€“<code>199</code>)ï¼ŒæˆåŠŸå“åº”(<code>200</code>â€“<code>299</code>)ï¼Œé‡å®šå‘(<code>300</code>â€“<code>399</code>)ï¼Œå®¢æˆ·ç«¯é”™è¯¯(<code>400</code>â€“<code>499</code>)å’ŒæœåŠ¡å™¨é”™è¯¯ (<code>500</code>â€“<code>599</code>)</p>\n<p><a href=\"https://www.jianguoyun.com/static/stackedit/%5Bhttps://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status%5D(https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status)\">å…·ä½“å‚ç…§</a></p>\n<h2 id=\"é¦–éƒ¨å­—æ®µ\">é¦–éƒ¨å­—æ®µ</h2>\n<p>æ ¹æ®ä¸åŒä¸Šä¸‹æ–‡ï¼Œå¯å°†æ¶ˆæ¯å¤´åˆ†ä¸ºï¼š</p>\n<ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Glossary/General_header\">General headers</a>: åŒæ—¶é€‚ç”¨äºè¯·æ±‚å’Œå“åº”æ¶ˆæ¯ï¼Œä½†ä¸æœ€ç»ˆæ¶ˆæ¯ä¸»ä½“ä¸­ä¼ è¾“çš„æ•°æ®æ— å…³çš„æ¶ˆæ¯å¤´ã€‚</li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Glossary/Request_header\">Request headers</a>: åŒ…å«æ›´å¤šæœ‰å…³è¦è·å–çš„èµ„æºæˆ–å®¢æˆ·ç«¯æœ¬èº«ä¿¡æ¯çš„æ¶ˆæ¯å¤´ã€‚</li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Glossary/Response_header\">Response headers</a>: åŒ…å«æœ‰å…³å“åº”çš„è¡¥å……ä¿¡æ¯ï¼Œå¦‚å…¶ä½ç½®æˆ–æœåŠ¡å™¨æœ¬èº«ï¼ˆåç§°å’Œç‰ˆæœ¬ç­‰ï¼‰çš„æ¶ˆæ¯å¤´ã€‚</li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Glossary/Entity_header\">Entity headers</a>: åŒ…å«æœ‰å…³å®ä½“ä¸»ä½“çš„æ›´å¤šä¿¡æ¯ï¼Œæ¯”å¦‚ä¸»ä½“é•¿(Content-Length)åº¦æˆ–å…¶MIMEç±»å‹ã€‚</li>\n</ul>\n<p><a href=\"https://www.jianguoyun.com/static/stackedit/%5Bhttps://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers%5D(https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers)\">å…·ä½“å‚ç…§</a></p>\n"},{"title":"ç½‘ç»œç›¸å…³-https","tags":["ç½‘ç»œ","https"],"categories":"ç½‘ç»œ","description":"# HTTPSæ˜¯ä»€ä¹ˆ\n\nHTTPSï¼ˆhyper text transfer protocol over secure socket layerï¼‰ï¼Œæ˜¯ä»¥å®‰å…¨ä¸ºç›®æ ‡çš„HTTPé€šé“ï¼Œç®€å•è¯´å°±æ˜¯HTTPçš„å®‰å…¨ç‰ˆã€‚å³HTTPä¸‹åŠ å…¥SSLå±‚ï¼ŒHTTPSçš„å®‰å…¨åŸºç¡€æ˜¯SSLï¼Œå› æ­¤åŠ å¯†çš„è¯¦ç»†å†…å®¹å°±éœ€è¦SSLã€‚\n\n## HTTPSå’ŒHTTPçš„åŒºåˆ«\n\n- HTTPæ˜¯æ˜æ–‡ä¼ è¾“ï¼ŒHTTPSé€šè¿‡SSL/TLSè¿›è¡Œäº†åŠ å¯†","createDate":"2020-04-15 22:38:54","updateDate":"10/1/2021, 3:34:43 AM","body":"<h1 id=\"httpsæ˜¯ä»€ä¹ˆ\">HTTPSæ˜¯ä»€ä¹ˆ</h1>\n<p>HTTPSï¼ˆhyper text transfer protocol over secure socket layerï¼‰ï¼Œæ˜¯ä»¥å®‰å…¨ä¸ºç›®æ ‡çš„HTTPé€šé“ï¼Œç®€å•è¯´å°±æ˜¯HTTPçš„å®‰å…¨ç‰ˆã€‚å³HTTPä¸‹åŠ å…¥SSLå±‚ï¼ŒHTTPSçš„å®‰å…¨åŸºç¡€æ˜¯SSLï¼Œå› æ­¤åŠ å¯†çš„è¯¦ç»†å†…å®¹å°±éœ€è¦SSLã€‚</p>\n<h2 id=\"httpså’Œhttpçš„åŒºåˆ«\">HTTPSå’ŒHTTPçš„åŒºåˆ«</h2>\n<ul>\n<li>HTTPæ˜¯æ˜æ–‡ä¼ è¾“ï¼ŒHTTPSé€šè¿‡SSL/TLSè¿›è¡Œäº†åŠ å¯†</li>\n<li>HTTPçš„ç«¯å£æ˜¯80ï¼ŒHTTPSçš„ç«¯å£æ˜¯443</li>\n<li>HTTPSéœ€è¦CAè¯ä¹¦</li>\n</ul>\n<h1 id=\"ä¸ºä»€ä¹ˆè¦æœ‰https\">ä¸ºä»€ä¹ˆè¦æœ‰HTTPS</h1>\n<ul>\n<li>å»ºç«‹ä¸€ä¸ªä¿¡æ¯å®‰å…¨é€šé“ï¼Œæ¥ä¿è¯æ•°æ®ä¼ è¾“çš„å®‰å…¨</li>\n<li>ç¡®è®¤ç½‘ç«™çš„çœŸå®æ€§ï¼Œé˜²æ­¢é’“é±¼ç½‘ç«™</li>\n</ul>\n<h1 id=\"httpsçš„åŸç†\">HTTPSçš„åŸç†</h1>\n<p>æ•´ä½“ä¸ŠHTTPåˆ°HTTPSçš„å†ç¨‹æ˜¯ï¼š\nHTTP --&gt; å¯¹ç§°åŠ å¯† --&gt; éå¯¹ç§°åŠ å¯† --&gt; å¯¹ç§°åŠ å¯†+éå¯¹ç§°åŠ å¯† --&gt; ä¸­é—´äººæ”»å‡» --&gt; CAè¯ä¹¦</p>\n<h2 id=\"å¯¹ç§°åŠ å¯†\">å¯¹ç§°åŠ å¯†</h2>\n<p>HTTPçš„é€šä¿¡æ˜¯æ˜æ–‡çš„ï¼Œå°±ç›¸å½“äºåœ¨ç½‘ç»œä¸Šè£¸å¥”ï¼Œä»»ä½•ç»„ç»‡æˆ–ä¸ªäººéƒ½å¯ä»¥ç›‘å¬ã€çª¥æ¢æ•°æ®åŒ…ã€‚å®‰å…¨è¡Œè¾ƒå·®ï¼Œæ­¤æ—¶å¯¹ç§°åŠ å¯†å‡ºç°äº†ï¼šæ¯æ¬¡ä¼ è¾“ä¹‹å‰ï¼Œå‘é€æ–¹ç”¨ä¸€ä¸ªåŠ å¯†ç®—æ³•åŠ å¯†ï¼Œç„¶åå†å‘é€ï¼›æ¥æ”¶æ–¹ä½¿ç”¨åŠ å¯†ç®—æ³•å¯¹åº”çš„å¯†é’¥è¿›è¡Œè§£å¯†ã€‚å› ä¸ºåŠ å¯†/è§£å¯†éƒ½ç”¨çš„åŒä¸€ä¸ªå¯†é’¥ï¼Œå› æ­¤ç§°ä¹‹ä¸ºå¯¹ç§°åŠ å¯†</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/https-0.png\" alt=\"å¯¹ç§°åŠ å¯†\"></p>\n<h3 id=\"å¼Šç«¯\">å¼Šç«¯</h3>\n<p><strong>å¯†é’¥å®¹æ˜“è¢«æˆªå–</strong></p>\n<h2 id=\"éå¯¹ç§°åŠ å¯†\">éå¯¹ç§°åŠ å¯†</h2>\n<p>ä½¿ç”¨éå¯¹ç§°åŠ å¯†çš„åŒæ–¹éƒ½æœ‰ä¸€å¯¹å¯†é’¥ï¼šç§é’¥ï¼ˆä¿å¯†ï¼‰ï¼Œå…¬é’¥ï¼ˆå…¬å¼€ï¼‰ã€‚ä½¿ç”¨ç§é’¥åŠ å¯†çš„æ•°æ®åªæœ‰å¯¹åº”çš„å…¬é’¥æ‰èƒ½è§£å¯†ï¼›ç”¨å…¬é’¥åŠ å¯†çš„æ•°æ®åªæœ‰å¯¹åº”çš„ç§é’¥æ‰èƒ½è§£å¯†ã€‚</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/https-1.png\" alt=\"éå¯¹ç§°åŠ å¯†\"></p>\n<h3 id=\"å¼Šç«¯-1\">å¼Šç«¯</h3>\n<p><strong>é€Ÿåº¦è¾ƒæ…¢</strong>ï¼Œç›¸è¾ƒäºå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œéå¯¹ç§°åŠ å¯†ç®—æ³•çš„é€Ÿåº¦è¦æ…¢ä¸Šç™¾å€</p>\n<h2 id=\"å¯¹ç§°åŠ å¯†éå¯¹ç§°åŠ å¯†\">å¯¹ç§°åŠ å¯†+éå¯¹ç§°åŠ å¯†</h2>\n<p>ä½¿ç”¨éå¯¹ç§°åŠ å¯†ä¼ è¾“å¯¹ç§°åŠ å¯†çš„å¯†é’¥ï¼Œä¹‹åä½¿ç”¨å¯¹ç§°åŠ å¯†é€šä¿¡</p>\n<h3 id=\"å¼Šç«¯-2\">å¼Šç«¯</h3>\n<p>ä¸èƒ½ç¡®ä¿æ¥æ”¶äººçš„èº«ä»½ï¼Œå®¹æ˜“å—åˆ°ä¸­é—´äººæ”»å‡»</p>\n<h2 id=\"ä¸­é—´äººæ”»å‡»\">ä¸­é—´äººæ”»å‡»</h2>\n<p>åœ¨æµè§ˆå™¨å‘é€å…¬é’¥çš„æ—¶å€™ï¼Œæœ‰ä¸ªä¸­é—´äººæˆªå–äº†æµè§ˆå™¨çš„å…¬é’¥ï¼Œç„¶åæŠŠè‡ªå·±çš„å…¬é’¥å‘é€ç»™æœåŠ¡å™¨æ¥å†’å……æµè§ˆå™¨ï¼Œç„¶åä½¿ç”¨è‡ªå·±çš„ç§é’¥è§£å¯†å¯¹ç§°åŠ å¯†ä½¿ç”¨çš„å…¬é’¥æ¥è¿›è¡Œé€šä¿¡ã€‚ï¼ˆç±»ä¼¼äºä»£ç†ï¼‰</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/https-2.png\" alt=\"ä¸­é—´äººæ”»å‡»\"></p>\n<h2 id=\"caè¯ä¹¦\">CAè¯ä¹¦</h2>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/https-3.png\" alt=\"CAè¯ä¹¦\"></p>\n<p>ğŸ‘€ï¼šè¿™äº›ï¼£ï¼¡æœ¬èº«ä¹Ÿæœ‰è¯ä¹¦æ¥è¯æ˜è‡ªå·±çš„èº«ä»½ï¼Œå¹¶ä¸”ï¼£ï¼¡çš„ä¿¡ç”¨æ˜¯åƒæ ‘ä¸€æ ·åˆ†çº§çš„ï¼Œé«˜å±‚çš„ï¼£ï¼¡ç»™åº•å±‚çš„ï¼£ï¼¡åšä¿¡ç”¨èƒŒä¹¦ï¼Œè€Œæ“ä½œç³»ç»Ÿï¼æµè§ˆå™¨ä¸­ä¼šå†…ç½®ä¸€äº›é¡¶å±‚çš„ï¼£ï¼¡çš„è¯ä¹¦ï¼Œç›¸å½“äºä½ è‡ªåŠ¨ä¿¡ä»»äº†ä»–ä»¬ã€‚ã€€è¿™äº›é¡¶å±‚çš„ï¼£ï¼¡è¯ä¹¦ä¸€å®šå¾—å®‰å…¨åœ°æ”¾å…¥æ“ä½œç³»ç»Ÿï¼æµè§ˆå™¨å½“ä¸­ï¼Œå¦åˆ™ä¸–ç•Œå¤§ä¹±ã€‚</p>\n<h1 id=\"å®Œæ•´httpsæµç¨‹\">å®Œæ•´HTTPSæµç¨‹</h1>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/https-4.png\" alt=\"httpså®Œæ•´æµç¨‹å›¾\"></p>\n"},{"title":"ç½‘ç»œç›¸å…³-tcp","tags":["ç½‘ç»œ","TCP"],"categories":"ç½‘ç»œ","description":"# TCPçš„ç‰¹ç‚¹\n\n- ä¸‰æ¬¡æ¡æ‰‹\n- å››æ¬¡æŒ¥æ‰‹\n- å¯é è¿æ¥\n- é¢å‘å­—èŠ‚æµ\n- æä¾›æ‹¥å¡æ§åˆ¶\n- ä¸¢åŒ…é‡ä¼ \n\n# TCPå¦‚ä½•ä¿è¯å¯é ä¼ è¾“\n\ntcpåœ¨ä¼ è¾“çš„è¿‡ç¨‹ä¸­éƒ½æœ‰ä¸€ä¸ªackï¼Œæ¥æ”¶æ–¹é€šè¿‡ackå‘Šè¯‰å‘é€æ–¹æ”¶åˆ°å“ªäº›åŒ…äº†ã€‚è¿™æ ·å‘é€æ–¹å°±èƒ½çŸ¥é“ä¸¢åŒ…æƒ…å†µè¿›è€Œé‡ä¼ \n\n# TCPçš„ä¸‰æ¬¡æ¡æ‰‹\n\n1. clientå‘é€SYNåˆ°serverå‘èµ·æ¡æ‰‹\n2. serverå›å¤SYN+ACKç»™client\n3. cli","createDate":"2020-04-16 21:00:43","updateDate":"10/1/2021, 3:34:43 AM","body":"<h1 id=\"tcpçš„ç‰¹ç‚¹\">TCPçš„ç‰¹ç‚¹</h1>\n<ul>\n<li>ä¸‰æ¬¡æ¡æ‰‹</li>\n<li>å››æ¬¡æŒ¥æ‰‹</li>\n<li>å¯é è¿æ¥</li>\n<li>é¢å‘å­—èŠ‚æµ</li>\n<li>æä¾›æ‹¥å¡æ§åˆ¶</li>\n<li>ä¸¢åŒ…é‡ä¼ </li>\n</ul>\n<h1 id=\"tcpå¦‚ä½•ä¿è¯å¯é ä¼ è¾“\">TCPå¦‚ä½•ä¿è¯å¯é ä¼ è¾“</h1>\n<p>tcpåœ¨ä¼ è¾“çš„è¿‡ç¨‹ä¸­éƒ½æœ‰ä¸€ä¸ªackï¼Œæ¥æ”¶æ–¹é€šè¿‡ackå‘Šè¯‰å‘é€æ–¹æ”¶åˆ°å“ªäº›åŒ…äº†ã€‚è¿™æ ·å‘é€æ–¹å°±èƒ½çŸ¥é“ä¸¢åŒ…æƒ…å†µè¿›è€Œé‡ä¼ </p>\n<h1 id=\"tcpçš„ä¸‰æ¬¡æ¡æ‰‹\">TCPçš„ä¸‰æ¬¡æ¡æ‰‹</h1>\n<ol>\n<li>clientå‘é€SYNåˆ°serverå‘èµ·æ¡æ‰‹</li>\n<li>serverå›å¤SYN+ACKç»™client</li>\n<li>clientå›å¤serverä¸€ä¸ªACKè¡¨ç¤ºæ”¶åˆ°äº†serverçš„SYN+ACK</li>\n</ol>\n<p>æ¡æ‰‹çš„æ ¸å¿ƒç›®çš„æ˜¯å‘ŠçŸ¥å¯¹æ–¹SEQï¼Œå¯¹æ–¹å›å¤ACKï¼ˆæ”¶åˆ°çš„SEQ+åŒ…çš„å¤§å°ï¼‰ï¼Œè¿™æ ·å‘é€ç«¯å°±çŸ¥é“æœ‰æ²¡æœ‰ä¸¢åŒ…äº†ã€‚æ¬¡è¦ç›®çš„æ˜¯å‘ŠçŸ¥å’Œåå•†ä¸€äº›ä¿¡æ¯</p>\n<h1 id=\"tcpçš„å››æ¬¡æŒ¥æ‰‹\">TCPçš„å››æ¬¡æŒ¥æ‰‹</h1>\n<ol>\n<li>clientå‘é€FINåŒ…ç»™server</li>\n<li>severå›å¤ACKï¼ˆå¯¹åº”ç¬¬ä¸€æ­¥FINåŒ…çš„ACKï¼‰ç»™clientï¼Œè¡¨ç¤ºserverçŸ¥é“clientè¦æ–­å¼€äº†</li>\n<li>severå‘é€FINåŒ…ç»™clientï¼Œè¡¨ç¤ºserverä¹Ÿå¯ä»¥æ–­å¼€äº†</li>\n<li>clientå›å¤ACKç»™serverï¼Œè¡¨ç¤ºæ—¢ç„¶åŒæ–¹éƒ½å‘é€FINåŒ…è¡¨ç¤ºæ–­å¼€ï¼Œé‚£å°±çœŸçš„æ–­å¼€å§</li>\n</ol>\n<h1 id=\"ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹ã€å››æ¬¡æŒ¥æ‰‹\">ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹ã€å››æ¬¡æŒ¥æ‰‹</h1>\n<p>æŒ¥æ‰‹çš„æ—¶å€™å¤šä¸€æ¬¡ä¸»è¦æ˜¯æ”¶åˆ°ç¬¬ä¸€ä¸ªFINåŒ…åå•ç‹¬å›å¤äº†ä¸€ä¸ªACKåŒ…ï¼Œå¦‚æœFIN+ACKå’Œå¹¶å‘é€é‚£ä¹ˆå››æ¬¡æŒ¥æ‰‹ä¹Ÿå˜æˆä¸‰æ¬¡äº†ã€‚å…³äºä¸ºä»€ä¹ˆè¦åˆ†å¼€ï¼Œæ”¶åˆ°FINåï¼ŒçŸ¥é“å¯¹æ–¹è¦å…³é—­äº†ï¼Œç„¶åOSé€šçŸ¥åº”ç”¨å±‚è¦å…³é—­å•¥çš„ï¼Œè¿™é‡Œåº”ç”¨å±‚å¯èƒ½éœ€è¦åšäº›å‡†å¤‡å·¥ä½œï¼Œæœ‰ä¸€äº›å»¶æ—¶ï¼Œæ‰€ä»¥å…ˆå›ACKï¼Œå‡†å¤‡å¥½äº†å†å‘FINã€‚æ¡æ‰‹æ²¡æœ‰è¿™ä¸ªå‡†å¤‡è¿‡ç¨‹ï¼ˆæœåŠ¡ç«¯åœ¨LISTENçŠ¶æ€ä¸‹ï¼‰æ‰€ä»¥å¯ä»¥ç«‹å³å‘é€SYN+ACK</p>\n<h1 id=\"ack\">ACK</h1>\n<p><code>ACK = SEQ + LEN(åŒ…çš„å¤§å°)</code>ï¼Œè¿™æ ·å‘é€æ–¹å¯ä»¥æ˜ç¡®çŸ¥é“å¯¹æ–¹æ”¶åˆ°å“ªäº›ä¸œè¥¿</p>\n<h1 id=\"æ‹¥å¡æ§åˆ¶\">æ‹¥å¡æ§åˆ¶</h1>\n<p>æ‹¥å¡æ§åˆ¶ä¸»è¦ä½œç”¨äºç½‘ç»œï¼Œé˜²æ­¢è¿‡å¤šçš„æ•°æ®æ‹¥å¡ç½‘ç»œï¼Œé¿å…å‡ºç°ç½‘ç»œè´Ÿè½½è¿‡å¤§çš„æƒ…å†µã€‚æ‹¥å¡å¤„ç†åŒ…æ‹¬ä»¥ä¸‹ç®—æ³•ï¼šæ…¢å¼€å§‹ã€æ‹¥å¡é¿å…ã€å¿«é€Ÿé‡ä¼ </p>\n<h2 id=\"æ…¢å¼€å§‹\">æ…¢å¼€å§‹</h2>\n<p>åœ¨ä¼ è¾“å¼€å§‹æ—¶å°†å‘é€çª—å£æ…¢æ…¢æŒ‡æ•°çº§æ‰©å¤§ï¼Œä»è€Œé¿å…ä¸€å¼€å§‹å°±ä¼ è¾“å¤§é‡æ•°æ®å¯¼è‡´ç½‘ç»œæ‹¥å¡</p>\n<p>æ…¢å¼€å§‹ç®—æ³•æ­¥éª¤å…·ä½“å¦‚ä¸‹ï¼š</p>\n<ol>\n<li>è¿æ¥åˆå§‹è®¾ç½®æ‹¥å¡çª—å£ï¼ˆCongestion Windowï¼‰ä¸º1MSSï¼ˆä¸€ä¸ªåˆ†æ®µçš„æœ€å¤§æ•°æ®é‡ï¼‰</li>\n<li>æ¯è¿‡ä¸€ä¸ªRTTï¼ˆè¡¨ç¤ºå‘é€ç«¯å‘é€æ•°æ®åˆ°æ¥æ”¶åˆ°å¯¹ç«¯æ•°æ®æ‰€éœ€çš„å¾€è¿”æ—¶é—´ï¼‰å°±å°†çª—å£å¤§å°x2</li>\n<li>æŒ‡æ•°çº§å¢é•¿è‚¯å®šä¸èƒ½æ²¡æœ‰é™åˆ¶ï¼Œæ‰€ä»¥æœ‰ä¸€ä¸ªé˜ˆå€¼é™åˆ¶ï¼Œå½“çª—å£å¤§å°å¤§äºé˜ˆå€¼æ—¶å°±ä¼šå¯åŠ¨æ‹¥å¡é¿å…ç®—æ³•</li>\n</ol>\n<h2 id=\"æ‹¥å¡é¿å…ç®—æ³•\">æ‹¥å¡é¿å…ç®—æ³•</h2>\n<p>æ‹¥å¡é¿å…ç®—æ³•ç›¸æ¯”ç®€å•ç‚¹ï¼Œæ¯è¿‡ä¸€ä¸ªRTTï¼Œæ‹¥å¡çª—å£å¤§å°+1ï¼Œè¿™æ ·èƒ½é¿å…æŒ‡æ•°çº§å¢é•¿å¯¼è‡´ç½‘ç»œæ‹¥å¡ï¼Œæ…¢æ…¢å°†å¤§å°è°ƒæ•´åˆ°æœ€ä½³å€¼ã€‚åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å¯èƒ½ä¼šé‡åˆ°å®šæ—¶å™¨è¶…æ—¶çš„æƒ…å†µï¼Œè¿™æ—¶TCPå°±ä¼šè®¤ä¸ºç½‘ç»œæ‹¥å¡äº†ï¼Œä¼šé©¬ä¸Šè¿›è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p>\n<ol>\n<li>å°†é˜ˆå€¼è®¾ä¸ºå½“å‰æ‹¥å¡çª—å£çš„ä¸€åŠ</li>\n<li>å°†æ‹¥å¡çª—å£è®¾ä¸º1MSS</li>\n<li>å¯åŠ¨æ‹¥å¡é¿å…ç®—æ³•</li>\n</ol>\n<h2 id=\"å¿«é€Ÿé‡ä¼ \">å¿«é€Ÿé‡ä¼ </h2>\n<p>ä¸€æ—¦æ¥æ”¶ç«¯æ”¶åˆ°çš„æŠ¥æ–‡å‡ºç°å¤±åºçš„æƒ…å†µï¼Œæ¥æ”¶ç«¯æŒ‡ä¼šå›å¤æœ€åä¸€ä¸ªé¡ºåºæ­£ç¡®çš„æŠ¥æ–‡åºå·ï¼ˆæ²¡æœ‰SACKçš„æƒ…å†µï¼‰ã€‚å¦‚æœæ”¶åˆ°ä¸‰ä¸ªé‡å¤çš„ACKï¼Œæ— éœ€ç­‰å¾…å®šæ—¶å™¨è¶…æ—¶å†é‡å‘è€Œæ˜¯å¯åŠ¨å¿«é€Ÿé‡ä¼ ã€‚</p>\n"},{"title":"ç½‘ç»œç›¸å…³-udp","tags":["ç½‘ç»œ","udp"],"categories":"ç½‘ç»œ","description":"# UDPçš„ç‰¹ç‚¹\n\n- é¢å‘æ— è¿æ¥\n- æœ‰å•æ’­ã€å¤šæ’­ã€å¹¿æ’­çš„åŠŸèƒ½\n- é¢å‘æŠ¥æ–‡\n- ä¸å¯é \n- å¤´éƒ¨å¼€é”€å°ï¼Œä¼ è¾“é«˜æ•ˆ\n\n# UDPä¼ è¾“æ•°æ®é«˜æ•ˆçš„åŸå› \n\n- æ— è¿æ¥ï¼ŒUDPä¸éœ€è¦åƒTCPä¸€æ ·åœ¨å‘é€æ•°æ®ä¹‹å‰è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ï¼Œæƒ³å‘æ•°æ®å°±å¯ä»¥ç›´æ¥å‘é€ã€‚\n\n  å…·ä½“æ¥è¯´å°±æ˜¯ï¼š\n\n  - åœ¨å‘é€ç«¯ï¼Œåº”ç”¨å±‚å°†æ•°æ®ä¼ é€’ç»™ä¼ è¾“å±‚çš„ UDP åè®®ï¼ŒUDP åªä¼šç»™æ•°æ®å¢åŠ ä¸€ä¸ª UDP å¤´æ ‡è¯†ä¸‹æ˜¯ UDP åè®®ï¼Œ","createDate":"2020-04-16 22:51:09","updateDate":"10/1/2021, 3:34:43 AM","body":"<h1 id=\"udpçš„ç‰¹ç‚¹\">UDPçš„ç‰¹ç‚¹</h1>\n<ul>\n<li>é¢å‘æ— è¿æ¥</li>\n<li>æœ‰å•æ’­ã€å¤šæ’­ã€å¹¿æ’­çš„åŠŸèƒ½</li>\n<li>é¢å‘æŠ¥æ–‡</li>\n<li>ä¸å¯é </li>\n<li>å¤´éƒ¨å¼€é”€å°ï¼Œä¼ è¾“é«˜æ•ˆ</li>\n</ul>\n<h1 id=\"udpä¼ è¾“æ•°æ®é«˜æ•ˆçš„åŸå› \">UDPä¼ è¾“æ•°æ®é«˜æ•ˆçš„åŸå› </h1>\n<ul>\n<li><p>æ— è¿æ¥ï¼ŒUDPä¸éœ€è¦åƒTCPä¸€æ ·åœ¨å‘é€æ•°æ®ä¹‹å‰è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ï¼Œæƒ³å‘æ•°æ®å°±å¯ä»¥ç›´æ¥å‘é€ã€‚</p>\n<p>å…·ä½“æ¥è¯´å°±æ˜¯ï¼š</p>\n<ul>\n<li>åœ¨å‘é€ç«¯ï¼Œåº”ç”¨å±‚å°†æ•°æ®ä¼ é€’ç»™ä¼ è¾“å±‚çš„ UDP åè®®ï¼ŒUDP åªä¼šç»™æ•°æ®å¢åŠ ä¸€ä¸ª UDP å¤´æ ‡è¯†ä¸‹æ˜¯ UDP åè®®ï¼Œç„¶åå°±ä¼ é€’ç»™ç½‘ç»œå±‚äº†</li>\n<li>åœ¨æ¥æ”¶ç«¯ï¼Œç½‘ç»œå±‚å°†æ•°æ®ä¼ é€’ç»™ä¼ è¾“å±‚ï¼ŒUDP åªå»é™¤ IP æŠ¥æ–‡å¤´å°±ä¼ é€’ç»™åº”ç”¨å±‚ï¼Œä¸ä¼šä»»ä½•æ‹¼æ¥æ“ä½œ</li>\n</ul>\n</li>\n<li><p>UDPåªæ˜¯æ•°æ®æŠ¥æ–‡çš„æ¬è¿å·¥ï¼Œä¸ä¼šå¯¹æ•°æ®æŠ¥æ–‡è¿›è¡Œä»»ä½•æ‹†åˆ†å’Œæ‹¼æ¥æ“ä½œ</p>\n</li>\n<li><p>å¤´éƒ¨å¼€é”€å°</p>\n<p>UDPçš„å¤´éƒ¨åŒ…å«äº†ä»¥ä¸‹å‡ ä¸ªæ•°æ®</p>\n<ul>\n<li>ä¸¤ä¸ªåå…­ä½çš„æºç›®ç«¯å£å·</li>\n<li>æ•´ä¸ªæ•°æ®æŠ¥æ–‡çš„é•¿åº¦</li>\n<li>æ•´ä¸ªæ•°æ®æŠ¥æ–‡çš„æ ¡éªŒå’Œï¼ˆIPv4å¯é€‰æ‹©å­—æ®µï¼‰ï¼Œè¯¥å­—æ®µç”¨äºå‘ç°å¤´éƒ¨ä¿¡æ¯å’Œæ•°æ®ä¸­çš„é”™è¯¯</li>\n</ul>\n</li>\n</ul>\n"},{"title":"è®¾è®¡æ¨¡å¼-OCP","tags":["è®¾è®¡æ¨¡å¼","OCP"],"categories":"è®¾è®¡æ¨¡å¼","description":"## å¼€æ”¾å°é—­åŸåˆ™\n\nå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­\n\nå‡è®¾æˆ‘ä»¬æ˜¯ä¸€ä¸ªå¤§å‹ Web é¡¹ç›®çš„ç»´æŠ¤äººå‘˜ï¼Œåœ¨æ¥æ‰‹è¿™ä¸ªé¡¹ç›®æ—¶ï¼Œå‘ç°å®ƒå·²ç»æ‹¥æœ‰ 10 ä¸‡è¡Œä»¥ä¸Šçš„ JavaScript ä»£ç å’Œæ•°ç™¾ä¸ª JS æ–‡ä»¶ã€‚ ä¸ä¹…åæ¥åˆ°äº†ä¸€ä¸ªæ–°çš„éœ€æ±‚ï¼Œå³åœ¨ window.onload å‡½æ•°ä¸­æ‰“å°å‡ºé¡µé¢ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹æ•°é‡\n\n```javascript\n// æ™®é€šç‰ˆ\nwindow.onload = function() {\n  /","createDate":"2019-10-17 18:12:29","updateDate":"10/1/2021, 3:34:43 AM","body":"<h2 id=\"å¼€æ”¾å°é—­åŸåˆ™\">å¼€æ”¾å°é—­åŸåˆ™</h2>\n<p>å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­</p>\n<p>å‡è®¾æˆ‘ä»¬æ˜¯ä¸€ä¸ªå¤§å‹ Web é¡¹ç›®çš„ç»´æŠ¤äººå‘˜ï¼Œåœ¨æ¥æ‰‹è¿™ä¸ªé¡¹ç›®æ—¶ï¼Œå‘ç°å®ƒå·²ç»æ‹¥æœ‰ 10 ä¸‡è¡Œä»¥ä¸Šçš„ JavaScript ä»£ç å’Œæ•°ç™¾ä¸ª JS æ–‡ä»¶ã€‚ ä¸ä¹…åæ¥åˆ°äº†ä¸€ä¸ªæ–°çš„éœ€æ±‚ï¼Œå³åœ¨ window.onload å‡½æ•°ä¸­æ‰“å°å‡ºé¡µé¢ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹æ•°é‡</p>\n<p>```javascript\n// æ™®é€šç‰ˆ\nwindow.onload = function() {\n  //åŸæœ‰ä»£ç \n  console.log(document.getElementByName(&quot;*&quot;).length);\n};</p>\n<p>// OCPç‰ˆ </p>\n"},{"title":"è®¾è®¡æ¨¡å¼-æ¨¡æ¿æ–¹æ³•æ¨¡å¼","tags":["è®¾è®¡æ¨¡å¼","æ¨¡æ¿æ–¹æ³•æ¨¡å¼"],"categories":"è®¾è®¡æ¨¡å¼","description":"# WHAT\n\næ¨¡æ¿æ–¹æ³•æ˜¯ä¸€ç§åªéœ€è¦ä½¿ç”¨ç»§æ‰¿å°±å¯ä»¥å®ç°çš„è¾ƒä¸ºç®€å•çš„æ¨¡å¼ã€‚\n\næ¨¡æ¿æ–¹æ³•æ¨¡å¼ç”±ä¸¤éƒ¨åˆ†ç»“æ„ç»„æˆï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯æŠ½è±¡çˆ¶ç±»ï¼Œç¬¬äºŒéƒ¨åˆ†æ˜¯å…·ä½“çš„å®ç°å­ç±»ã€‚é€šå¸¸åœ¨æŠ½è±¡çˆ¶ç±»ä¸­å°è£…äº†å­ç±»çš„ç®—æ³•æ¡†æ¶ï¼ŒåŒ…æ‹¬å®ç°ä¸€äº›å…¬å…±æ–¹æ³•åŠå°è£…**å­ç±»ä¸­æ‰€æœ‰æ–¹æ³•çš„æ‰§è¡Œé¡ºåº**ã€‚å­ç±»é€šè¿‡ç»§æ‰¿è¿™ä¸ªæŠ½è±¡ç±»ï¼Œä¹Ÿç»§æ‰¿äº†æ•´ä¸ªç®—æ³•ç»“æ„ï¼Œå¹¶ä¸”å¯ä»¥é€‰æ‹©é‡å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚\n\nç¬¦åˆ OCP åŸåˆ™\n\n# WHY\n\næ¨¡æ¿æ–¹æ³•æ¨¡å¼æ˜¯ä¸€ç§å…¸å‹çš„é€šè¿‡å°è£…","createDate":"2019-10-19 14:32:49","updateDate":"10/1/2021, 3:34:43 AM","body":"<h1 id=\"what\">WHAT</h1>\n<p>æ¨¡æ¿æ–¹æ³•æ˜¯ä¸€ç§åªéœ€è¦ä½¿ç”¨ç»§æ‰¿å°±å¯ä»¥å®ç°çš„è¾ƒä¸ºç®€å•çš„æ¨¡å¼ã€‚</p>\n<p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼ç”±ä¸¤éƒ¨åˆ†ç»“æ„ç»„æˆï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯æŠ½è±¡çˆ¶ç±»ï¼Œç¬¬äºŒéƒ¨åˆ†æ˜¯å…·ä½“çš„å®ç°å­ç±»ã€‚é€šå¸¸åœ¨æŠ½è±¡çˆ¶ç±»ä¸­å°è£…äº†å­ç±»çš„ç®—æ³•æ¡†æ¶ï¼ŒåŒ…æ‹¬å®ç°ä¸€äº›å…¬å…±æ–¹æ³•åŠå°è£…<strong>å­ç±»ä¸­æ‰€æœ‰æ–¹æ³•çš„æ‰§è¡Œé¡ºåº</strong>ã€‚å­ç±»é€šè¿‡ç»§æ‰¿è¿™ä¸ªæŠ½è±¡ç±»ï¼Œä¹Ÿç»§æ‰¿äº†æ•´ä¸ªç®—æ³•ç»“æ„ï¼Œå¹¶ä¸”å¯ä»¥é€‰æ‹©é‡å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚</p>\n<p>ç¬¦åˆ OCP åŸåˆ™</p>\n<h1 id=\"why\">WHY</h1>\n<p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ˜¯ä¸€ç§å…¸å‹çš„é€šè¿‡å°è£…å˜åŒ–æé«˜ç³»ç»Ÿæ‰©å±•æ€§çš„è®¾è®¡æ¨¡å¼ã€‚åœ¨ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡è¯­ è¨€ä¸­ï¼Œä¸€ä¸ªè¿ç”¨äº†æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ç¨‹åºä¸­ï¼Œå­ç±»çš„æ–¹æ³•ç§ç±»å’Œæ‰§è¡Œé¡ºåºéƒ½æ˜¯ä¸å˜çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠ è¿™éƒ¨åˆ†é€»è¾‘æŠ½è±¡åˆ°çˆ¶ç±»çš„æ¨¡æ¿æ–¹æ³•é‡Œé¢ã€‚è€Œå­ç±»çš„æ–¹æ³•å…·ä½“æ€ä¹ˆå®ç°åˆ™æ˜¯å¯å˜çš„ï¼Œäºæ˜¯æˆ‘ä»¬æŠŠè¿™ éƒ¨åˆ†å˜åŒ–çš„é€»è¾‘å°è£…åˆ°å­ç±»ä¸­ã€‚é€šè¿‡å¢åŠ æ–°çš„å­ç±»ï¼Œæˆ‘ä»¬ä¾¿èƒ½ç»™ç³»ç»Ÿå¢åŠ æ–°çš„åŠŸèƒ½ï¼Œå¹¶ä¸éœ€è¦æ”¹ åŠ¨æŠ½è±¡çˆ¶ç±»ä»¥åŠå…¶ä»–å­ç±»ï¼Œè¿™ä¹Ÿæ˜¯ç¬¦åˆå¼€æ”¾-å°é—­åŸåˆ™çš„</p>\n<h1 id=\"how\">HOW</h1>\n<ul>\n<li>åˆ†ç¦»å…±åŒç‚¹</li>\n<li>å†™çˆ¶ç±»(å­ç±»çš„å…±åŒç‚¹)ï¼Œ<strong>ä¿è¯å­ç±»ä¸€å®šä¼šå®ç°(ä½¿ç”¨æŠ›å¼‚å¸¸ã€æŠ½è±¡ç±»/æŠ½è±¡æ–¹æ³•ã€æ„é€ å‡½æ•°ç­‰æ¥çº¦æŸ)</strong></li>\n<li>å†™å­ç±»ï¼Œç»§æ‰¿çˆ¶ç±»ï¼Œå®ç°çˆ¶ç±»çš„æ–¹æ³•</li>\n</ul>\n<p>```javascript\n// æŠ›å¼‚å¸¸çº¦æŸç‰ˆ\nclass Beverage {\n  boilWater() {\n    console.log(&quot;æŠŠæ°´ç…®æ²¸&quot;);\n  }\n  brew() {\n    throw new Error(&quot;å­ç±»åº”è¯¥å®ç°brewæ–¹æ³•&quot;);\n  }\n  pourInCup() {\n    throw new Error(&quot;å­ç±»åº”è¯¥å®ç°pourInCupæ–¹æ³•&quot;);\n  }\n  addCondiments() {\n    throw new Error(&quot;å­ç±»åº”è¯¥å®ç°addCondimentsæ–¹æ³•&quot;);\n  }\n  /* template method */\n  init() {\n    this.boilWater();\n    this.brew();\n    this.pourInCup();\n    this.addCondiments();\n  }\n}</p>\n<p>class Coffee extends Beverage {\n  brew() {\n    console.log(&quot;ç”¨æ²¸æ°´å†²æ³¡å’–å•¡&quot;);\n  }\n  pourInCup() {\n    console.log(&quot;æŠŠå’–å•¡å€’è¿›æ¯å­&quot;);\n  }\n  addCondiments() {\n    console.log(&quot;åŠ ç³–å’Œç‰›å¥¶&quot;);\n  }\n}</p>\n<p>let coffee = new Coffee();\ncoffee.init();</p>\n<p>console.log(&quot;</p>\n"},{"title":"è®¾è®¡æ¨¡å¼-ç­–ç•¥æ¨¡å¼","tags":["tags"],"categories":"è®¾è®¡æ¨¡å¼","description":"# WHAT\n\nå®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•ï¼ŒæŠŠå®ƒä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚\n\nä¸€ä¸ªåŸºäºç­–ç•¥æ¨¡å¼çš„ç¨‹åºè‡³å°‘ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯ä¸€ç»„ç­–ç•¥ç±»ï¼Œç­–ç•¥ç±»å°è£…äº†å…·ä½“çš„ç®—æ³•ï¼Œå¹¶è´Ÿè´£å…·ä½“çš„è®¡ç®—è¿‡ç¨‹ã€‚ç¬¬äºŒéƒ¨åˆ†æ˜¯ç¯å¢ƒç±» Context,Context æ¥å—å®¢æˆ·çš„è¯·æ±‚éšåæŠŠè¯·æ±‚å§”æ‰˜ç»™æŸä¸€ä¸ªç­–ç•¥ç±»ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œè¯´æ˜ Context ä¸­è¦ç»´æŒå¯¹æŸä¸ªç­–ç•¥ç±»çš„å¼•ç”¨ã€‚\n\n# WHY\n\n- ç­–ç•¥æ¨¡å¼ä½¿ç”¨ç»„åˆã€å§”æ‰˜å’Œ","createDate":"2019-10-20 10:43:35","updateDate":"10/1/2021, 3:34:43 AM","body":"<h1 id=\"what\">WHAT</h1>\n<p>å®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•ï¼ŒæŠŠå®ƒä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚</p>\n<p>ä¸€ä¸ªåŸºäºç­–ç•¥æ¨¡å¼çš„ç¨‹åºè‡³å°‘ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯ä¸€ç»„ç­–ç•¥ç±»ï¼Œç­–ç•¥ç±»å°è£…äº†å…·ä½“çš„ç®—æ³•ï¼Œå¹¶è´Ÿè´£å…·ä½“çš„è®¡ç®—è¿‡ç¨‹ã€‚ç¬¬äºŒéƒ¨åˆ†æ˜¯ç¯å¢ƒç±» Context,Context æ¥å—å®¢æˆ·çš„è¯·æ±‚éšåæŠŠè¯·æ±‚å§”æ‰˜ç»™æŸä¸€ä¸ªç­–ç•¥ç±»ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œè¯´æ˜ Context ä¸­è¦ç»´æŒå¯¹æŸä¸ªç­–ç•¥ç±»çš„å¼•ç”¨ã€‚</p>\n<h1 id=\"why\">WHY</h1>\n<ul>\n<li>ç­–ç•¥æ¨¡å¼ä½¿ç”¨ç»„åˆã€å§”æ‰˜å’Œå¤šæ€ç­‰æŠ€æœ¯å’Œæ€æƒ³ï¼Œå¯ä»¥é¿å…å¤šé‡æ¡ä»¶é€‰æ‹©è¯­å¥</li>\n<li>ç­–ç•¥æ¨¡å¼æä¾›äº†å¯¹<strong>å¼€æ”¾-å°é—­åŸåˆ™</strong>çš„å®Œç¾æ”¯æŒï¼Œå°†ç®—æ³•å°è£…åœ¨ç‹¬ç«‹çš„ strategy ä¸­ï¼Œä½¿å¾—å®ƒä»¬æ˜“äºæ›¿æ¢ã€ç†è§£ã€<strong>æ‰©å±•</strong></li>\n<li>åœ¨ç­–ç•¥æ¨¡å¼ä¸­åˆ©ç”¨ç»„åˆå’Œå§”æ‰˜è®© context æ‹¥æœ‰æ‰§è¡Œç®—æ³•çš„èƒ½åŠ›ï¼Œè¿™ä¹Ÿæ˜¯ç»§æ‰¿çš„ä¸€ç§æ›´è½»ä¾¿çš„æ›¿ä»£æ–¹æ¡ˆ</li>\n</ul>\n<h1 id=\"how\">HOW</h1>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">/* è®¡ç®—å¥–é‡‘ï¼šç»©æ•ˆä¸ºSæœ‰å››å€å·¥èµ„ï¼Œç»©æ•ˆä¸ºAæœ‰3å€å·¥èµ„ï¼Œç»©æ•ˆä¸ºBæœ‰2å€å·¥èµ„ */</span>\n\n<span class=\"hljs-comment\">// common  ç¼ºä¹æ‰©å±•æ€§</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">calcBouns</span>(<span class=\"hljs-params\">type, salary</span>) {\n  <span class=\"hljs-keyword\">if</span>(type === <span class=\"hljs-string\">&#x27;S&#x27;</span>) <span class=\"hljs-keyword\">return</span> salary * <span class=\"hljs-number\">4</span>\n  <span class=\"hljs-keyword\">if</span>(type === <span class=\"hljs-string\">&#x27;A&#x27;</span>) <span class=\"hljs-keyword\">return</span> salary * <span class=\"hljs-number\">3</span>\n  <span class=\"hljs-keyword\">if</span>(type === <span class=\"hljs-string\">&#x27;B&#x27;</span>) <span class=\"hljs-keyword\">return</span> salary * <span class=\"hljs-number\">2</span>\n}\n<span class=\"hljs-title function_\">calcBouns</span>(<span class=\"hljs-string\">&#x27;S&#x27;</span>, <span class=\"hljs-number\">20000</span>)\n<span class=\"hljs-title function_\">calcBouns</span>(<span class=\"hljs-string\">&#x27;A&#x27;</span>, <span class=\"hljs-number\">10000</span>)\n\n<span class=\"hljs-comment\">// stratety pattern</span>\n<span class=\"hljs-keyword\">const</span> strategy {\n  <span class=\"hljs-attr\">S</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">salary</span>) {\n    <span class=\"hljs-keyword\">return</span> salary * <span class=\"hljs-number\">4</span>\n  },\n  <span class=\"hljs-attr\">A</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">salary</span>) {\n    <span class=\"hljs-keyword\">return</span> salary * <span class=\"hljs-number\">3</span>\n  },\n  <span class=\"hljs-attr\">B</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">salary</span>) {\n    <span class=\"hljs-keyword\">return</span> salary * <span class=\"hljs-number\">2</span>\n  }\n}\n\n<span class=\"hljs-keyword\">const</span> calcBouns = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">type, salary</span>) {\n  <span class=\"hljs-keyword\">return</span> strategy[type](salary)\n}\n\n<span class=\"hljs-title function_\">calcBouns</span>(<span class=\"hljs-string\">&#x27;S&#x27;</span>, <span class=\"hljs-number\">20000</span>)\n<span class=\"hljs-title function_\">calcBouns</span>(<span class=\"hljs-string\">&#x27;A&#x27;</span>, <span class=\"hljs-number\">10000</span>)\n\n<span class=\"hljs-comment\">// functional programing</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">S</span>(<span class=\"hljs-params\">salary</span>) {\n  <span class=\"hljs-keyword\">return</span> salary * <span class=\"hljs-number\">4</span>\n}\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">A</span>(<span class=\"hljs-params\">salary</span>) {\n  <span class=\"hljs-keyword\">return</span> salary * <span class=\"hljs-number\">3</span>\n}\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">B</span>(<span class=\"hljs-params\">salary</span>) {\n  <span class=\"hljs-keyword\">return</span> salary * <span class=\"hljs-number\">2</span>\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">calcBouns</span>(<span class=\"hljs-params\">fn, salary</span>) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">fn</span>(salary)\n}\n\n<span class=\"hljs-title function_\">calcBouns</span>(S, <span class=\"hljs-number\">20000</span>)\n<span class=\"hljs-title function_\">calcBouns</span>(B, <span class=\"hljs-number\">10000</span>)\n</code></pre>\n"},{"title":"è®¾è®¡æ¨¡å¼-èŒè´£é“¾æ¨¡å¼","tags":["è®¾è®¡æ¨¡å¼","èŒè´£é“¾æ¨¡å¼"],"categories":"è®¾è®¡æ¨¡å¼","description":"# WHAT\n\nä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ï¼Œå°†è¿™äº›å¯¹è±¡ç»ƒæˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯¥è¯·æ±‚ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢\n\n![æ™®é€šè®¾è®¡](../imgs/chainOfResponsibility0.png)\n\n![èŒè´£é“¾æ¨¡å¼](../imgs/chainOfResponsibility1.png)\n\n# WHY\n\n- èŒè´£é“¾æ¨¡å¼è§£è€¦äº†è¯·æ±‚å‘é€è€… A å’Œ","createDate":"2019-10-21 10:51:52","updateDate":"10/1/2021, 3:34:43 AM","body":"<h1 id=\"what\">WHAT</h1>\n<p>ä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ï¼Œå°†è¿™äº›å¯¹è±¡ç»ƒæˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯¥è¯·æ±‚ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢</p>\n<p><img src=\"../imgs/chainOfResponsibility0.png\" alt=\"æ™®é€šè®¾è®¡\"></p>\n<p><img src=\"../imgs/chainOfResponsibility1.png\" alt=\"èŒè´£é“¾æ¨¡å¼\"></p>\n<h1 id=\"why\">WHY</h1>\n<ul>\n<li>èŒè´£é“¾æ¨¡å¼è§£è€¦äº†è¯·æ±‚å‘é€è€… A å’Œ N ä¸ªæ¥æ”¶è€…ä¹‹é—´çš„å¤æ‚å…³ç³»ï¼Œç”±äºä¸çŸ¥é“é“¾ä¸­çš„å“ªä¸ªèŠ‚ç‚¹å¯ä»¥å¤„ç†ä½ å‘å‡ºçš„è¯·æ±‚ï¼Œæ‰€ä»¥ä½ åªéœ€è¦æŠŠè¯·æ±‚ä¼ é€’ç»™ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å³å¯</li>\n<li>ä½¿ç”¨èŒè´£é“¾åï¼Œé“¾ä¸­çš„èŠ‚ç‚¹å¯ä»¥çµæ´»æ‹†åˆ†é‡ç»„ï¼Œå¢åŠ /åˆ é™¤/æ”¹åŠ¨ä¸€ä¸ªèŠ‚ç‚¹éƒ½è½»è€Œæ˜“ä¸¾</li>\n<li>å¯ä»¥æ‰‹åŠ¨æŒ‡å®šèµ·å§‹èŠ‚ç‚¹ï¼Œè¯·æ±‚å¹¶ä¸æ˜¯éå¾—ä»é“¾ä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹ä¼ é€’ï¼Œè¿™æ ·å°±å¯ä»¥å‡å°‘è¯·æ±‚åœ¨é“¾ä¸­çš„ä¼ é€’æ¬¡æ•°ï¼Œæ›´å¿«çš„æ‰¾åˆ°åˆé€‚çš„è¯·æ±‚æ¥æ”¶è€…</li>\n</ul>\n<h1 id=\"how\">HOW</h1>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">a</span>(<span class=\"hljs-params\">x</span>) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n}\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">b</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-number\">2</span>);\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n}\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">c</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-number\">3</span>);\n}\n\n<span class=\"hljs-comment\">// èŒè´£é“¾æ¨¡å¼æ™®é€šå®ç°</span>\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Chain</span> {\n  <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\">fn</span>) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">fn</span> = fn;\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">successor</span> = <span class=\"hljs-literal\">null</span>;\n  }\n  <span class=\"hljs-title function_\">setNextSuccessor</span>(<span class=\"hljs-params\">successor</span>) {\n    <span class=\"hljs-keyword\">return</span> (<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">successor</span> = successor);\n  }\n  <span class=\"hljs-title function_\">passRequest</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">let</span> ret = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">fn</span>.<span class=\"hljs-title function_\">apply</span>(<span class=\"hljs-variable language_\">this</span>, <span class=\"hljs-variable language_\">arguments</span>);\n    <span class=\"hljs-keyword\">if</span> (ret === <span class=\"hljs-literal\">false</span>)\n      <span class=\"hljs-keyword\">return</span> (\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">successor</span> &amp;&amp;\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">successor</span>.<span class=\"hljs-property\">passRequest</span>.<span class=\"hljs-title function_\">apply</span>(<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">successor</span>, <span class=\"hljs-variable language_\">arguments</span>)\n      );\n    <span class=\"hljs-keyword\">return</span> ret;\n  }\n}\n<span class=\"hljs-keyword\">let</span> aChain = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Chain</span>(a);\n<span class=\"hljs-keyword\">let</span> bChain = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Chain</span>(b);\n<span class=\"hljs-keyword\">let</span> cChain = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Chain</span>(c);\naChain.<span class=\"hljs-title function_\">setNextSuccessor</span>(bChain);\nbChain.<span class=\"hljs-title function_\">setNextSuccessor</span>(cChain);\n\naChain.<span class=\"hljs-title function_\">passRequest</span>(<span class=\"hljs-number\">12</span>); <span class=\"hljs-comment\">// 2</span>\n\n<span class=\"hljs-comment\">// AOPå®ç°èŒè´£é“¾æ¨¡å¼</span>\n<span class=\"hljs-title class_\">Function</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">after</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">fn</span>) {\n  <span class=\"hljs-keyword\">let</span> _self = <span class=\"hljs-variable language_\">this</span>;\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">let</span> tmp = _self.<span class=\"hljs-title function_\">apply</span>(<span class=\"hljs-variable language_\">this</span>, <span class=\"hljs-variable language_\">arguments</span>);\n    <span class=\"hljs-keyword\">if</span> (tmp === <span class=\"hljs-literal\">false</span>) <span class=\"hljs-keyword\">return</span> fn &amp;&amp; fn.<span class=\"hljs-title function_\">apply</span>(<span class=\"hljs-variable language_\">this</span>, <span class=\"hljs-variable language_\">arguments</span>);\n    <span class=\"hljs-keyword\">return</span> tmp;\n  };\n};\n\na.<span class=\"hljs-title function_\">after</span>(b).<span class=\"hljs-title function_\">after</span>(c)(<span class=\"hljs-number\">12</span>); <span class=\"hljs-comment\">// 2</span>\n</code></pre>\n"},{"title":"typescriptå­¦ä¹ -æšä¸¾çš„å¦™ç”¨","tags":["enum"],"categories":"typescript","description":"> å‚è€ƒï¼š[ä½¿ç”¨æ•°å­—ç±»å‹ä½œä¸ºæ ‡å¿—](https://jkchao.github.io/typescript-book-chinese/typings/enums.html#%E4%BD%BF%E7%94%A8%E6%95%B0%E5%AD%97%E7%B1%BB%E5%9E%8B%E4%BD%9C%E4%B8%BA%E6%A0%87%E5%BF%97)\n\næšä¸¾çš„ä¸€ä¸ªå¾ˆå¥½ç”¨é€”æ˜¯ä½¿ç”¨æšä¸¾ä½œä¸ºæ ‡å¿—ã€‚","createDate":"2021-09-29 13:42:31","updateDate":"2021-09-30 14:28:46","body":"<blockquote>\n<p>å‚è€ƒï¼š<a href=\"https://jkchao.github.io/typescript-book-chinese/typings/enums.html#%E4%BD%BF%E7%94%A8%E6%95%B0%E5%AD%97%E7%B1%BB%E5%9E%8B%E4%BD%9C%E4%B8%BA%E6%A0%87%E5%BF%97\">ä½¿ç”¨æ•°å­—ç±»å‹ä½œä¸ºæ ‡å¿—</a></p>\n</blockquote>\n<p>æšä¸¾çš„ä¸€ä¸ªå¾ˆå¥½ç”¨é€”æ˜¯ä½¿ç”¨æšä¸¾ä½œä¸ºæ ‡å¿—ã€‚è¿™äº›æ ‡å¿—å…è®¸ä½ æ£€æŸ¥ä¸€ç»„æ¡ä»¶ä¸­çš„æŸä¸ªæ¡ä»¶æ˜¯å¦ä¸ºçœŸã€‚è€ƒè™‘å¦‚ä¸‹ä»£ç ä¾‹å­ï¼Œæˆ‘ä»¬æœ‰ä¸€ç»„å…³äº<code>animals</code>çš„å±æ€§ï¼š</p>\n<pre><code class=\"hljs language-ts\"><span class=\"hljs-built_in\">enum</span> <span class=\"hljs-title class_\">AnimalFlags</span> {\n  <span class=\"hljs-title class_\">None</span>        = <span class=\"hljs-number\">0</span>,\n  <span class=\"hljs-title class_\">HasClaws</span>    = <span class=\"hljs-number\">1</span> &lt;&lt; <span class=\"hljs-number\">0</span>,\n  <span class=\"hljs-title class_\">CanFly</span>      = <span class=\"hljs-number\">1</span> &lt;&lt; <span class=\"hljs-number\">1</span>,\n  <span class=\"hljs-title class_\">EatsFish</span>    = <span class=\"hljs-number\">1</span> &lt;&lt; <span class=\"hljs-number\">2</span>,\n  <span class=\"hljs-title class_\">Endangered</span>  = <span class=\"hljs-number\">1</span> &lt;&lt; <span class=\"hljs-number\">3</span>\n}\n</code></pre>\n<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å·¦ç§»çš„ä½è¿ç®—ç¬¦ï¼Œå°†æ•°å­— 1 çš„äºŒè¿›åˆ¶å‘å·¦ç§»åŠ¨ä½ç½®å¾—åˆ°æ•°å­— 0001ã€0010ã€0100 å’Œ 1000ï¼ˆæ¢æˆåè¿›åˆ¶ç»“æœæ˜¯ï¼š1, 2, 4, 8ï¼‰ã€‚å½“ä½ åœ¨ä½¿ç”¨è¿™ç§æ ‡è®°çš„æ—¶å€™ï¼Œè¿™äº›ä½è¿ç®—ç¬¦ | (æˆ–)ã€&amp; ï¼ˆå’Œï¼‰ã€~ ï¼ˆéï¼‰å°†ä¼šæ˜¯ä½ æœ€å¥½çš„æœ‹å‹ï¼š</p>\n<pre><code class=\"hljs language-ts\"><span class=\"hljs-built_in\">enum</span> <span class=\"hljs-title class_\">AnimalFlags</span> {\n  <span class=\"hljs-title class_\">None</span>        = <span class=\"hljs-number\">0</span>,\n  <span class=\"hljs-title class_\">HasClaws</span>    = <span class=\"hljs-number\">1</span> &lt;&lt; <span class=\"hljs-number\">0</span>,\n  <span class=\"hljs-title class_\">CanFly</span>      = <span class=\"hljs-number\">1</span> &lt;&lt; <span class=\"hljs-number\">1</span>,\n  <span class=\"hljs-title class_\">EatsFish</span>    = <span class=\"hljs-number\">1</span> &lt;&lt; <span class=\"hljs-number\">2</span>,\n  <span class=\"hljs-title class_\">Endangered</span>  = <span class=\"hljs-number\">1</span> &lt;&lt; <span class=\"hljs-number\">3</span>,\n  \n  <span class=\"hljs-comment\">// å¯ä»¥ç»„åˆæ ‡å¿—ï¼Œç”¨æ¥åœ¨æšä¸¾ç±»å‹ä¸­å®šä¹‰æ–¹ä¾¿å¿«æ·çš„æ–¹å¼ï¼Œå¦‚ä¸‹</span>\n  <span class=\"hljs-title class_\">EndangeredFlyingClawedFishEating</span> = <span class=\"hljs-title class_\">HasClaws</span> | <span class=\"hljs-title class_\">CanFly</span> | <span class=\"hljs-title class_\">EatsFish</span> | <span class=\"hljs-title class_\">Endangered</span>\n}\n\n<span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title class_\">Animal</span> {\n  <span class=\"hljs-attr\">flags</span>: <span class=\"hljs-title class_\">AnimalFlags</span>;\n  [<span class=\"hljs-attr\">key</span>: <span class=\"hljs-built_in\">string</span>]: <span class=\"hljs-built_in\">any</span>;\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">printAnimalAbilities</span>(<span class=\"hljs-params\">animal: Animal</span>) {\n  <span class=\"hljs-keyword\">const</span> animalFlags = animal.<span class=\"hljs-property\">flags</span>;\n  <span class=\"hljs-keyword\">if</span> (animalFlags &amp; <span class=\"hljs-title class_\">AnimalFlags</span>.<span class=\"hljs-property\">HasClaws</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;animal has claws&#x27;</span>);\n  }\n  <span class=\"hljs-keyword\">if</span> (animalFlags &amp; <span class=\"hljs-title class_\">AnimalFlags</span>.<span class=\"hljs-property\">CanFly</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;animal can fly&#x27;</span>);\n  }\n  <span class=\"hljs-keyword\">if</span> (animalFlags == <span class=\"hljs-title class_\">AnimalFlags</span>.<span class=\"hljs-property\">None</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;nothing&#x27;</span>);\n  }\n}\n\n<span class=\"hljs-keyword\">const</span> animal = { <span class=\"hljs-attr\">flags</span>: <span class=\"hljs-title class_\">AnimalFlags</span>.<span class=\"hljs-property\">None</span> };\n<span class=\"hljs-title function_\">printAnimalAbilities</span>(animal); <span class=\"hljs-comment\">// nothing</span>\nanimal.<span class=\"hljs-property\">flags</span> |= <span class=\"hljs-title class_\">AnimalFlags</span>.<span class=\"hljs-property\">HasClaws</span>;\n<span class=\"hljs-title function_\">printAnimalAbilities</span>(animal); <span class=\"hljs-comment\">// animal has claws</span>\nanimal.<span class=\"hljs-property\">flags</span> &amp;= ~<span class=\"hljs-title class_\">AnimalFlags</span>.<span class=\"hljs-property\">HasClaws</span>;\n<span class=\"hljs-title function_\">printAnimalAbilities</span>(animal); <span class=\"hljs-comment\">// nothing</span>\nanimal.<span class=\"hljs-property\">flags</span> |= <span class=\"hljs-title class_\">AnimalFlags</span>.<span class=\"hljs-property\">HasClaws</span> | <span class=\"hljs-title class_\">AnimalFlags</span>.<span class=\"hljs-property\">CanFly</span>;\n<span class=\"hljs-title function_\">printAnimalAbilities</span>(animal); <span class=\"hljs-comment\">// animal has claws, animal can fly</span>\n</code></pre>\n<p>åœ¨è¿™é‡Œï¼š</p>\n<ul>\n<li>æˆ‘ä»¬ä½¿ç”¨ |= æ¥æ·»åŠ ä¸€ä¸ªæ ‡å¿—ï¼›</li>\n<li>ç»„åˆä½¿ç”¨ &amp;= å’Œ ~ æ¥æ¸…ç†ä¸€ä¸ªæ ‡å¿—ï¼›</li>\n<li>| æ¥åˆå¹¶æ ‡å¿—ã€‚</li>\n</ul>\n"},{"title":"React.jså­¦ä¹ -å•å…ƒæµ‹è¯•-2","tags":["å•å…ƒæµ‹è¯•"],"categories":"React.js","description":"[React.jså­¦ä¹ -å•å…ƒæµ‹è¯•-1](https://blog.mrrs.top/blog/view/5fcf500be531783853b2fc5c)\n\n[ç¤ºä¾‹ä»£ç ä»“åº“](https://codesandbox.io/s/beautiful-mcclintock-8iqp8)\n\nReact.js + Typescript + Jest + @testing-library\n\n## å®‰è£…å’Œé…","createDate":"2021-08-30 13:33:10","updateDate":"2021-09-01 22:01:37","body":"<p><a href=\"https://blog.mrrs.top/blog/view/5fcf500be531783853b2fc5c\">React.jså­¦ä¹ -å•å…ƒæµ‹è¯•-1</a></p>\n<p><a href=\"https://codesandbox.io/s/beautiful-mcclintock-8iqp8\">ç¤ºä¾‹ä»£ç ä»“åº“</a></p>\n<p>React.js + Typescript + Jest + @testing-library</p>\n<h2 id=\"å®‰è£…å’Œé…ç½®\">å®‰è£…å’Œé…ç½®</h2>\n<h3 id=\"å®‰è£…\">å®‰è£…</h3>\n<p>éœ€è¦ä»¥ä¸‹åº“</p>\n<ul>\n<li><code>jest</code>, è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶</li>\n<li><code>ts-jest</code>ï¼Œæ·»åŠ å¯¹<code>typescript</code>çš„æ”¯æŒ</li>\n<li><code>@testing-library/jest-dom</code>ï¼Œæ·»åŠ äº†ä¸€äº›é¢å¤–çš„åŒ¹é…å™¨ï¼Œæµ‹è¯•dom</li>\n<li><code>@testing-library/react</code>ï¼Œæµ‹è¯•reactç»„ä»¶</li>\n<li><code>@testing-library/react-hooks</code>ï¼Œæµ‹è¯•è‡ªå®šä¹‰hooks</li>\n<li><code>Babel</code>ï¼Œè½¬è¯‘jsxä¸ESM</li>\n</ul>\n<pre><code class=\"hljs language-shell\">yarn add jest @testing-library/jest-dom @testing-library/react @testing-library/react-hooks ts-jest -D\n</code></pre>\n<h3 id=\"é…ç½®\">é…ç½®</h3>\n<p>æ·»åŠ <code>jest</code>é…ç½®æ–‡ä»¶</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// jest.config.js</span>\n<span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {\n  <span class=\"hljs-attr\">preset</span>: <span class=\"hljs-string\">&#x27;ts-jest&#x27;</span>,\n  <span class=\"hljs-attr\">testEnvironment</span>: <span class=\"hljs-string\">&#x27;jsdom&#x27;</span>,\n  <span class=\"hljs-attr\">transform</span>: {\n    <span class=\"hljs-string\">&#x27;^.+\\\\.js$&#x27;</span>: <span class=\"hljs-string\">&#x27;babel-jest&#x27;</span>,\n    <span class=\"hljs-string\">&#x27;^.+\\\\.(ts|tsx)$&#x27;</span>: <span class=\"hljs-string\">&#x27;ts-jest&#x27;</span>,\n  },\n  <span class=\"hljs-attr\">moduleFileExtensions</span>: [<span class=\"hljs-string\">&#x27;js&#x27;</span>, <span class=\"hljs-string\">&#x27;jsx&#x27;</span>, <span class=\"hljs-string\">&#x27;ts&#x27;</span>, <span class=\"hljs-string\">&#x27;tsx&#x27;</span>],\n  <span class=\"hljs-attr\">setupFilesAfterEnv</span>: [\n    <span class=\"hljs-string\">&#x27;&lt;rootDir&gt;/setupTests.js&#x27;</span>,\n  ],\n};\n\n<span class=\"hljs-comment\">// setupTests.js</span>\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">&#x27;@testing-library/jest-dom&#x27;</span>;\n</code></pre>\n<p><code>ts</code>ç¼–è¯‘é…ç½®æ–‡ä»¶è¦æœ‰ä»¥ä¸‹é…ç½®</p>\n<pre><code class=\"hljs language-json\"><span class=\"hljs-comment\">// tsconfig.json</span>\n<span class=\"hljs-comment\">// ...</span>\n<span class=\"hljs-attr\">&quot;compilerOptions&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;jsx&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;react&quot;</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;lib&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span>\n        <span class=\"hljs-string\">&quot;dom&quot;</span><span class=\"hljs-punctuation\">,</span>\n        <span class=\"hljs-string\">&quot;dom.iterable&quot;</span><span class=\"hljs-punctuation\">,</span>\n        <span class=\"hljs-string\">&quot;esnext&quot;</span>\n    <span class=\"hljs-punctuation\">]</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;esModuleInterop&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-keyword\">true</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;allowSyntheticDefaultImports&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-keyword\">true</span>\n<span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-comment\">// ...</span>\n</code></pre>\n<h2 id=\"jestç®€è¦æ•™ç¨‹\">Jestç®€è¦æ•™ç¨‹</h2>\n<p><code>describe</code>ç”¨æ¥åŒ…å«ä¸€å—æµ‹è¯•çš„ä»£ç ï¼Œé€šå¸¸ç”¨å®ƒæ¥å¯¹å‡ ä¸ªæµ‹è¯•è¿›è¡Œåˆ†ç»„</p>\n<p><code>test</code>æ˜¯æ¯ä¸€ä¸ªæµ‹è¯•ï¼Œå†…éƒ¨åŒ…å«éœ€è¦æµ‹è¯•çš„æ–¹æ³•ï¼Œåˆ«åä¸º<code>it</code></p>\n<p><code>expect</code>ç¿»è¯‘ä¸ºé¢„æœŸï¼Œéœ€è¦å’Œå¾ˆå¤šåŒ¹é…å™¨ç»“åˆä½¿ç”¨</p>\n<pre><code class=\"hljs language-ts\"><span class=\"hljs-title function_\">describe</span>(<span class=\"hljs-string\">&#x27;test useCookie&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&#x27;should be defined&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title function_\">expect</span>(useCookie).<span class=\"hljs-title function_\">toBeDefined</span>();\n  });\n  <span class=\"hljs-comment\">// ...</span>\n}\n</code></pre>\n<h2 id=\"å¸¸è§domæµ‹è¯•ç”¨ä¾‹\">å¸¸è§DOMæµ‹è¯•ç”¨ä¾‹</h2>\n<h3 id=\"æµ‹è¯•æŒ‰é’®ç‚¹å‡»äº‹ä»¶\">æµ‹è¯•æŒ‰é’®ç‚¹å‡»äº‹ä»¶</h3>\n<pre><code class=\"hljs language-jsx\"><span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">React</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;react&quot;</span>;\n<span class=\"hljs-keyword\">import</span> { render, fireEvent } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;@testing-library/react&quot;</span>;\n\n<span class=\"hljs-title function_\">describe</span>(<span class=\"hljs-string\">&quot;click events&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&quot;click&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> onClick = jest.<span class=\"hljs-title function_\">fn</span>();\n\n    <span class=\"hljs-keyword\">const</span> { getByLabelText } = <span class=\"hljs-title function_\">render</span>(\n      <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">aria-label</span>=<span class=\"hljs-string\">&quot;Button&quot;</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{onClick}</span> /&gt;</span></span>\n    );\n\n    <span class=\"hljs-keyword\">const</span> btn = <span class=\"hljs-title function_\">getByLabelText</span>(<span class=\"hljs-string\">&quot;Button&quot;</span>);\n    fireEvent.<span class=\"hljs-title function_\">click</span>(btn);\n    <span class=\"hljs-title function_\">expect</span>(onClick).<span class=\"hljs-title function_\">toBeCalled</span>();\n    <span class=\"hljs-title function_\">expect</span>(onClick).<span class=\"hljs-title function_\">toBeCalledTimes</span>(<span class=\"hljs-number\">1</span>);\n  });\n});\n</code></pre>\n<h3 id=\"æµ‹è¯•inputè¾“å…¥äº‹ä»¶\">æµ‹è¯•inputè¾“å…¥äº‹ä»¶</h3>\n<pre><code class=\"hljs language-jsx\"><span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">React</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;react&quot;</span>;\n<span class=\"hljs-keyword\">import</span> { fireEvent, render } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;@testing-library/react&quot;</span>;\n\n<span class=\"hljs-title function_\">describe</span>(<span class=\"hljs-string\">&quot;input element&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-keyword\">const</span> onChange = jest.<span class=\"hljs-title function_\">fn</span>();\n\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&quot;change&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> { getByTestId } = <span class=\"hljs-title function_\">render</span>(\n      <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;text&quot;</span> <span class=\"hljs-attr\">data-testid</span>=<span class=\"hljs-string\">&quot;changeInput&quot;</span> <span class=\"hljs-attr\">onChange</span>=<span class=\"hljs-string\">{onChange}</span> /&gt;</span></span>\n    );\n\n    <span class=\"hljs-keyword\">const</span> input = <span class=\"hljs-title function_\">getByTestId</span>(<span class=\"hljs-string\">&quot;changeInput&quot;</span>);\n    fireEvent.<span class=\"hljs-title function_\">change</span>(input, { <span class=\"hljs-attr\">target</span>: { <span class=\"hljs-attr\">value</span>: <span class=\"hljs-string\">&quot;hello&quot;</span> } });\n    <span class=\"hljs-title function_\">expect</span>(onChange).<span class=\"hljs-title function_\">toBeCalled</span>();\n    <span class=\"hljs-title function_\">expect</span>(input).<span class=\"hljs-title function_\">toHaveProperty</span>(<span class=\"hljs-string\">&quot;value&quot;</span>, <span class=\"hljs-string\">&quot;hello&quot;</span>);\n  });\n});\n</code></pre>\n<h3 id=\"æµ‹è¯•props\">æµ‹è¯•props</h3>\n<pre><code class=\"hljs language-jsx\"><span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">React</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;react&quot;</span>;\n<span class=\"hljs-keyword\">import</span> { render } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;@testing-library/react&quot;</span>;\n\n<span class=\"hljs-title function_\">describe</span>(<span class=\"hljs-string\">&quot;props&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">App</span> = (<span class=\"hljs-params\">{ loading }: { loading?: boolean }</span>) =&gt; (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span> <span class=\"hljs-attr\">data-testid</span>=<span class=\"hljs-string\">&quot;span&quot;</span>&gt;</span>{loading ? &quot;loading...&quot; : &quot;hello&quot;}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span></span>\n  );\n\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&quot;default props&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> { getByTestId } = <span class=\"hljs-title function_\">render</span>(<span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">App</span> /&gt;</span></span>);\n    <span class=\"hljs-keyword\">const</span> span = <span class=\"hljs-title function_\">getByTestId</span>(<span class=\"hljs-string\">&quot;span&quot;</span>);\n    <span class=\"hljs-title function_\">expect</span>(span).<span class=\"hljs-title function_\">toHaveTextContent</span>(<span class=\"hljs-string\">&quot;hello&quot;</span>);\n  });\n\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&quot;props change&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> { getByTestId, rerender } = <span class=\"hljs-title function_\">render</span>(<span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">App</span> /&gt;</span></span>);\n    <span class=\"hljs-keyword\">const</span> span = <span class=\"hljs-title function_\">getByTestId</span>(<span class=\"hljs-string\">&quot;span&quot;</span>);\n    <span class=\"hljs-title function_\">expect</span>(span).<span class=\"hljs-title function_\">toHaveTextContent</span>(<span class=\"hljs-string\">&quot;hello&quot;</span>);\n    <span class=\"hljs-comment\">// é€šè¿‡rerenderæ¥æ¨¡æ‹Ÿpropså¯¹æ”¹å˜</span>\n    <span class=\"hljs-title function_\">rerender</span>(<span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">App</span> <span class=\"hljs-attr\">loading</span>=<span class=\"hljs-string\">{true}</span> /&gt;</span></span>);\n    <span class=\"hljs-title function_\">expect</span>(span).<span class=\"hljs-title function_\">toHaveTextContent</span>(<span class=\"hljs-string\">&quot;loading...&quot;</span>);\n    <span class=\"hljs-title function_\">rerender</span>(<span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">App</span> <span class=\"hljs-attr\">loading</span>=<span class=\"hljs-string\">{false}</span> /&gt;</span></span>);\n    <span class=\"hljs-title function_\">expect</span>(span).<span class=\"hljs-title function_\">toHaveTextContent</span>(<span class=\"hljs-string\">&quot;hello&quot;</span>);\n  });\n});\n</code></pre>\n"},{"title":"React.jså­¦ä¹ -å•å…ƒæµ‹è¯•-1","tags":["å•å…ƒæµ‹è¯•"],"categories":"React.js","description":"[React.jså­¦ä¹ -å•å…ƒæµ‹è¯•-2](https://blog.mrrs.top/blog/view/612cde1686ab9f13b4b96452)\n\n## æŠ€æœ¯é€‰å‹\n\nJest + Reactå®˜æ–¹æµ‹è¯•åŒ…\n\n- `@testing-library/dom`\n- `@testing-library/jest-dom`\n- `@testing-library/react`\n- `@testi","createDate":"2020-12-08 10:06:03","updateDate":"2021-08-30 21:52:23","body":"<p><a href=\"https://blog.mrrs.top/blog/view/612cde1686ab9f13b4b96452\">React.jså­¦ä¹ -å•å…ƒæµ‹è¯•-2</a></p>\n<h2 id=\"æŠ€æœ¯é€‰å‹\">æŠ€æœ¯é€‰å‹</h2>\n<p>Jest + Reactå®˜æ–¹æµ‹è¯•åŒ…</p>\n<ul>\n<li><code>@testing-library/dom</code></li>\n<li><code>@testing-library/jest-dom</code></li>\n<li><code>@testing-library/react</code></li>\n<li><code>@testing-library/user-event</code></li>\n<li><code>jest</code></li>\n</ul>\n<h2 id=\"jesté…ç½®\">Jesté…ç½®</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// jest.config.js</span>\n<span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {\n  <span class=\"hljs-attr\">testMatch</span>: [<span class=\"hljs-string\">&quot;&lt;rootDir&gt;/test/**/*.(spec|test).js?(x)&quot;</span>],\n  <span class=\"hljs-attr\">moduleFileExtensions</span>: [<span class=\"hljs-string\">&quot;js&quot;</span>, <span class=\"hljs-string\">&quot;jsx&quot;</span>],\n  <span class=\"hljs-attr\">setupFilesAfterEnv</span>: [\n    <span class=\"hljs-string\">&quot;&lt;rootDir&gt;/setupTests.js&quot;</span>,\n  ],\n  <span class=\"hljs-attr\">transform</span>: {\n    <span class=\"hljs-string\">&quot;^.+\\\\.js$&quot;</span>: <span class=\"hljs-string\">&quot;babel-jest&quot;</span>,\n  },\n};\n</code></pre>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// setupTests.js</span>\n<span class=\"hljs-comment\">// æ‰©å±•jest matchers</span>\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">&quot;@testing-library/jest-dom&quot;</span>;\n</code></pre>\n<h2 id=\"è®¿é—®dom\">è®¿é—®DOM</h2>\n<ol>\n<li><p>ä½¿ç”¨ <strong>@testing-library/react</strong> åŒ…é‡Œçš„ <code>render</code> å‡½æ•°æ¸²æŸ“ç»„ä»¶</p>\n</li>\n<li><p>ä½¿ç”¨ <strong>@testing-library/react</strong> åŒ…é‡Œçš„ <code>screen</code> å±æ€§è®¿é—®ç•Œé¢å¿«ç…§</p>\n</li>\n<li><p>ä½¿ç”¨ <code>screen.getBy/screen.findBy</code>è®¿é—®å…ƒç´ </p>\n</li>\n</ol>\n<p><code>render</code>: å°†ç»™å®šç»„ä»¶æ¸²æŸ“åˆ°é™„åŠ åˆ°<code>document.body</code>çš„å®¹å™¨ä¸­</p>\n<p><code>screen</code>: DOMæµ‹è¯•åº“å¯¼å‡ºçš„æ‰€æœ‰æŸ¥è¯¢å‡æ¥å—å®¹å™¨ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚ å› ä¸ºæŸ¥è¯¢æ•´ä¸ªdocument.bodyéå¸¸æ™®éï¼Œæ‰€ä»¥DOMæµ‹è¯•åº“è¿˜ä¼šå¯¼å‡ºä¸€ä¸ª<code>screen</code>å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å…·æœ‰é¢„å…ˆç»‘å®šåˆ°document.bodyçš„æ¯ä¸ªæŸ¥è¯¢ï¼ˆä½¿ç”¨å†…éƒ¨åŠŸèƒ½ï¼‰ã€‚</p>\n<p><code>findBy</code>å’Œ<code>getBy</code>: <code>getBy</code>ä¼šç«‹å³è¿”å›ï¼Œ<code>findBy</code>ä¼šç­‰åˆ°è¶…æ—¶æˆ–æŸ¥è¯¢åˆ°å…ƒç´ æ‰è¿”å›</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> { fireEvent, render, screen } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@testing-library/react&#x27;</span>;\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">App</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-keyword\">const</span> [value, onChange] = <span class=\"hljs-title function_\">useInputValue</span>(<span class=\"hljs-string\">&#x27;hello&#x27;</span>);\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;text&quot;</span> <span class=\"hljs-attr\">placeholder</span>=<span class=\"hljs-string\">{value}</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">{value}</span> <span class=\"hljs-attr\">onChange</span>=<span class=\"hljs-string\">{onChange}</span> /&gt;</span></span>\n  );\n};\n<span class=\"hljs-title function_\">render</span>(<span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">App</span> /&gt;</span></span>);\n<span class=\"hljs-keyword\">const</span> element = screen.<span class=\"hljs-title function_\">getByPlaceholderText</span>(<span class=\"hljs-string\">&#x27;hello&#x27;</span>);\n</code></pre>\n<h2 id=\"æ¨¡æ‹Ÿäº‹ä»¶è§¦å‘\">æ¨¡æ‹Ÿäº‹ä»¶è§¦å‘</h2>\n<ol>\n<li><p>ä½¿ç”¨ <strong>@testing-library/react</strong> åŒ…é‡Œçš„ <code>render</code> å‡½æ•°æ¸²æŸ“ç»„ä»¶</p>\n</li>\n<li><p>ä½¿ç”¨ <strong>@testing-library/react</strong> åŒ…é‡Œçš„ <code>fireEvent</code> å‡½æ•°è§¦å‘äº‹ä»¶</p>\n</li>\n</ol>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">App</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n    <span class=\"hljs-keyword\">const</span> [value, onChange] = <span class=\"hljs-title function_\">useInputValue</span>(<span class=\"hljs-string\">&#x27;hello&#x27;</span>);\n    <span class=\"hljs-keyword\">return</span> (\n      <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;text&quot;</span> <span class=\"hljs-attr\">placeholder</span>=<span class=\"hljs-string\">{value}</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">{value}</span> <span class=\"hljs-attr\">onChange</span>=<span class=\"hljs-string\">{onChange}</span> /&gt;</span></span>\n    );\n};\n<span class=\"hljs-title function_\">render</span>(<span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">App</span> /&gt;</span></span>);\n<span class=\"hljs-keyword\">const</span> element = screen.<span class=\"hljs-title function_\">getByPlaceholderText</span>(<span class=\"hljs-string\">&#x27;hello&#x27;</span>);\n<span class=\"hljs-title function_\">expect</span>(element.<span class=\"hljs-title function_\">getAttribute</span>(<span class=\"hljs-string\">&#x27;value&#x27;</span>)).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-string\">&#x27;hello&#x27;</span>);\nfireEvent.<span class=\"hljs-title function_\">input</span>(element, { <span class=\"hljs-attr\">target</span>: { <span class=\"hljs-attr\">value</span>: <span class=\"hljs-string\">&#x27;hello world&#x27;</span> } });\n</code></pre>\n<h2 id=\"act\">act</h2>\n<p>è¿™å‡½æ•°å’ŒReactè‡ªå¸¦çš„test-utilsçš„actå‡½æ•°æ˜¯åŒä¸€ä¸ªå‡½æ•°ã€‚åœ¨ç»„ä»¶çŠ¶æ€æ›´æ–°çš„æ—¶å€™ï¼ˆsetStateï¼‰ï¼Œç»„ä»¶éœ€è¦è¢«é‡æ–°æ¸²æŸ“ï¼Œè€Œè¿™ä¸ªé‡æ¸²æŸ“æ˜¯éœ€è¦Reactè¿›è¡Œè°ƒåº¦çš„ï¼Œå› æ­¤æ˜¯ä¸ªå¼‚æ­¥çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨actå‡½æ•°å°†æ‰€æœ‰ä¼šæ›´æ–°åˆ°ç»„ä»¶çŠ¶æ€çš„æ“ä½œå°è£…åœ¨å®ƒçš„callbacké‡Œé¢æ¥ä¿è¯actå‡½æ•°æ‰§è¡Œå®Œä¹‹åæˆ‘ä»¬å®šä¹‰çš„ç»„ä»¶å·²ç»å®Œæˆäº†é‡æ–°æ¸²æŸ“ã€‚</p>\n<h2 id=\"å¯¹æ¯”object\">å¯¹æ¯”Object</h2>\n<p>ä½¿ç”¨<code>toEqual</code></p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> tom = { <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&#x27;tom&#x27;</span> }\n<span class=\"hljs-title function_\">expect</span>(tom).<span class=\"hljs-title function_\">toEqual</span>({ <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&#x27;tom&#x27;</span> })\n</code></pre>\n<h2 id=\"å¤§è‡´è§„èŒƒ\">å¤§è‡´è§„èŒƒ</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-title function_\">describe</span>(<span class=\"hljs-string\">&#x27;xxx&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-comment\">// 1. æµ‹è¯•å‡½æ•°æ˜¯å¦å®šä¹‰</span>\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&#x27;should be defined&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title function_\">expect</span>(xxx).<span class=\"hljs-title function_\">toBeDefined</span>();\n  });\n  <span class=\"hljs-comment\">// 2. æµ‹è¯•å‡½æ•°æ˜¯å¦è¢«è°ƒç”¨</span>\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&#x27;should be called&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title function_\">expect</span>(xxx).<span class=\"hljs-title function_\">toBeCalled</span>();\n  });\n\n});\n</code></pre>\n<h2 id=\"æµ‹è¯•å®ä¾‹\">æµ‹è¯•å®ä¾‹</h2>\n<h3 id=\"æµ‹è¯•useinputvaluehook\">æµ‹è¯•<code>useInputValue</code>hook</h3>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// useInputValue.test.jsx</span>\n<span class=\"hljs-keyword\">import</span> { fireEvent, render, screen } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@testing-library/react&#x27;</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">React</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;react&#x27;</span>;\n<span class=\"hljs-keyword\">import</span> useInputValue <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;../src/react/hooks/useInputValue&#x27;</span>;\n\n<span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&#x27;test useInputValue&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">App</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n    <span class=\"hljs-keyword\">const</span> [value, onChange] = <span class=\"hljs-title function_\">useInputValue</span>(<span class=\"hljs-string\">&#x27;hello&#x27;</span>);\n    <span class=\"hljs-keyword\">return</span> (\n      <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;text&quot;</span> <span class=\"hljs-attr\">placeholder</span>=<span class=\"hljs-string\">{value}</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">{value}</span> <span class=\"hljs-attr\">onChange</span>=<span class=\"hljs-string\">{onChange}</span> /&gt;</span></span>\n    );\n  };\n  <span class=\"hljs-title function_\">render</span>(<span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">App</span> /&gt;</span></span>);\n  <span class=\"hljs-keyword\">const</span> element = screen.<span class=\"hljs-title function_\">getByPlaceholderText</span>(<span class=\"hljs-string\">&#x27;hello&#x27;</span>);\n  <span class=\"hljs-title function_\">expect</span>(element.<span class=\"hljs-title function_\">getAttribute</span>(<span class=\"hljs-string\">&#x27;value&#x27;</span>)).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-string\">&#x27;hello&#x27;</span>);\n  fireEvent.<span class=\"hljs-title function_\">input</span>(element, { <span class=\"hljs-attr\">target</span>: { <span class=\"hljs-attr\">value</span>: <span class=\"hljs-string\">&#x27;hello world&#x27;</span> } });\n  <span class=\"hljs-title function_\">expect</span>(element.<span class=\"hljs-title function_\">getAttribute</span>(<span class=\"hljs-string\">&#x27;value&#x27;</span>)).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-string\">&#x27;hello world&#x27;</span>);\n});\n</code></pre>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// useInputValue.js</span>\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">ChangeEvent</span>, useCallback, useState } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;react&#x27;</span>;\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">useInputValue</span>(<span class=\"hljs-params\">initValue</span>) {\n  <span class=\"hljs-keyword\">const</span> [value, setValue] = <span class=\"hljs-title function_\">useState</span>(initValue);\n\n  <span class=\"hljs-keyword\">const</span> onChange = <span class=\"hljs-title function_\">useCallback</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">e</span>) =&gt;</span> {\n    <span class=\"hljs-title function_\">setValue</span>(e.<span class=\"hljs-property\">currentTarget</span>.<span class=\"hljs-property\">value</span>);\n  }, []);\n\n  <span class=\"hljs-keyword\">return</span> [value, onChange, setValue];\n}\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> useInputValue;\n</code></pre>\n<h3 id=\"ä½¿ç”¨testing-libraryreact-hooksæµ‹è¯•hook\">ä½¿ç”¨<code>@testing-library/react-hooks</code>æµ‹è¯•<code>hook</code></h3>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// useCounter.js</span>\n\n<span class=\"hljs-keyword\">import</span> { useState, useCallback } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;react&#x27;</span>\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">useCounter</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">const</span> [count, setCount] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-number\">0</span>)\n\n  <span class=\"hljs-keyword\">const</span> increment = <span class=\"hljs-title function_\">useCallback</span>(<span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-title function_\">setCount</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">x</span>) =&gt;</span> x + <span class=\"hljs-number\">1</span>), [])\n\n  <span class=\"hljs-keyword\">return</span> { count, increment }\n}\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> useCounter\n</code></pre>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// useCounter.test.js</span>\n<span class=\"hljs-keyword\">import</span> { renderHook, act } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@testing-library/react-hooks&#x27;</span>\n<span class=\"hljs-keyword\">import</span> useCounter <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;./useCounter&#x27;</span>\n\n<span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&#x27;should increment counter&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-keyword\">const</span> { result } = <span class=\"hljs-title function_\">renderHook</span>(<span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-title function_\">useCounter</span>())\n\n  <span class=\"hljs-title function_\">act</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    result.<span class=\"hljs-property\">current</span>.<span class=\"hljs-title function_\">increment</span>()\n  })\n\n  <span class=\"hljs-title function_\">expect</span>(result.<span class=\"hljs-property\">current</span>.<span class=\"hljs-property\">count</span>).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-number\">1</span>)\n})\n</code></pre>\n"},{"title":"gridå¸ƒå±€","tags":["grid"],"categories":"CSS","description":"## ä¸€äº›å±æ€§\n\n### grid-auto-flow\n\næ§åˆ¶è‡ªåŠ¨å¸ƒå±€ç®—æ³•æ€æ ·è¿ä½œï¼Œç²¾ç¡®æŒ‡å®šåœ¨ç½‘æ ¼ä¸­è¢«è‡ªåŠ¨å¸ƒå±€çš„å…ƒç´ æ€æ ·æ’åˆ—\n\n``` css\ngrid-auto-flow: row;\ngrid-auto-flow: column;\ngrid-auto-flow: row dense;\ngrid-auto-flow: column dense;\n```\n\nå–å€¼ï¼š\n\n- rowï¼ŒæŒ‡å®šè‡ªåŠ¨å¸ƒå±€ç®—æ³•","createDate":"2021-08-31 11:21:24","updateDate":"8/24/2021, 12:12:36 PM","body":"<h2 id=\"ä¸€äº›å±æ€§\">ä¸€äº›å±æ€§</h2>\n<h3 id=\"grid-auto-flow\">grid-auto-flow</h3>\n<p>æ§åˆ¶è‡ªåŠ¨å¸ƒå±€ç®—æ³•æ€æ ·è¿ä½œï¼Œç²¾ç¡®æŒ‡å®šåœ¨ç½‘æ ¼ä¸­è¢«è‡ªåŠ¨å¸ƒå±€çš„å…ƒç´ æ€æ ·æ’åˆ—</p>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-attribute\">grid-auto-flow</span>: row;\n<span class=\"hljs-attribute\">grid-auto-flow</span>: column;\n<span class=\"hljs-attribute\">grid-auto-flow</span>: row dense;\n<span class=\"hljs-attribute\">grid-auto-flow</span>: column dense;\n</code></pre>\n<p>å–å€¼ï¼š</p>\n<ul>\n<li><p>rowï¼ŒæŒ‡å®šè‡ªåŠ¨å¸ƒå±€ç®—æ³•æŒ‰ç…§é€šè¿‡é€è¡Œå¡«å……æ¥æ’åˆ—å…ƒç´ ï¼Œåœ¨å¿…è¦æ—¶å¢åŠ æ–°è¡Œã€‚å¦‚æœæ—¢æ²¡æœ‰æŒ‡å®š row ä¹Ÿæ²¡æœ‰ columnï¼Œåˆ™é»˜è®¤ä¸º row</p>\n</li>\n<li><p>columnï¼ŒæŒ‡å®šè‡ªåŠ¨å¸ƒå±€ç®—æ³•é€šè¿‡é€åˆ—å¡«å……æ¥æ’åˆ—å…ƒç´ ï¼Œåœ¨å¿…è¦æ—¶å¢åŠ æ–°åˆ—</p>\n</li>\n<li><p>denseï¼ŒæŒ‡å®šè‡ªåŠ¨å¸ƒå±€ç®—æ³•ä½¿ç”¨ä¸€ç§â€œç¨ å¯†â€å †ç§¯ç®—æ³•ï¼Œå¦‚æœåé¢å‡ºç°äº†ç¨å°çš„å…ƒç´ ï¼Œåˆ™ä¼šè¯•å›¾å»å¡«å……ç½‘æ ¼ä¸­å‰é¢ç•™ä¸‹çš„ç©ºç™½ã€‚è¿™æ ·åšä¼šå¡«ä¸Šç¨å¤§å…ƒç´ ç•™ä¸‹çš„ç©ºç™½ï¼Œä½†åŒæ—¶ä¹Ÿå¯èƒ½å¯¼è‡´åŸæ¥å‡ºç°çš„æ¬¡åºè¢«æ‰“ä¹±ã€‚å¦‚æœçœç•¥å®ƒï¼Œä½¿ç”¨ä¸€ç§ã€Œç¨€ç–ã€ç®—æ³•ï¼Œåœ¨ç½‘æ ¼ä¸­å¸ƒå±€å…ƒç´ æ—¶ï¼Œå¸ƒå±€ç®—æ³•åªä¼šã€Œå‘å‰ã€ç§»åŠ¨ï¼Œæ°¸è¿œä¸ä¼šå€’å›å»å¡«è¡¥ç©ºç™½ã€‚è¿™ä¿è¯äº†æ‰€æœ‰è‡ªåŠ¨å¸ƒå±€å…ƒç´ ã€ŒæŒ‰ç…§æ¬¡åºã€å‡ºç°ï¼Œå³ä½¿å¯èƒ½ä¼šç•™ä¸‹è¢«åé¢å…ƒç´ å¡«å……çš„ç©ºç™½</p>\n</li>\n</ul>\n"},{"title":"webpackå¤ä¹ -æ˜“æ··æ·†çŸ¥è¯†ç‚¹","tags":["webpack"],"categories":"2021å¤ä¹ ","description":"## module/bundle/chunkçš„åŒºåˆ«\n\n![moduleã€bundleã€chunk](https://mrrsblog.oss-cn-shanghai.aliyuncs.com/webpack_1.png)\n\n1. å¯¹äºä¸€ä»½åŒé€»è¾‘ä»£ç ï¼Œå½“æˆ‘ä»¬æ‰‹å†™ä¸‹ä¸€ä¸ªä¸€ä¸ªçš„æ–‡ä»¶ï¼Œå®ƒä»¬æ— è®ºæ˜¯ESMè¿˜æ˜¯commonJSæˆ–AMDï¼Œå®ƒä»¬éƒ½æ˜¯module\n2. å½“æˆ‘ä»¬å†™moduleæºæ–‡ä»¶ä¼ åˆ°webpack","createDate":"2021-05-17 12:56:41","updateDate":"2021-07-15 13:54:55","body":"<h2 id=\"modulebundlechunkçš„åŒºåˆ«\">module/bundle/chunkçš„åŒºåˆ«</h2>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/webpack_1.png\" alt=\"moduleã€bundleã€chunk\"></p>\n<ol>\n<li>å¯¹äºä¸€ä»½åŒé€»è¾‘ä»£ç ï¼Œå½“æˆ‘ä»¬æ‰‹å†™ä¸‹ä¸€ä¸ªä¸€ä¸ªçš„æ–‡ä»¶ï¼Œå®ƒä»¬æ— è®ºæ˜¯ESMè¿˜æ˜¯commonJSæˆ–AMDï¼Œå®ƒä»¬éƒ½æ˜¯module</li>\n<li>å½“æˆ‘ä»¬å†™moduleæºæ–‡ä»¶ä¼ åˆ°webpackè¿›è¡Œæ‰“åŒ…æ—¶ï¼Œwebpackä¼šæ ¹æ®æ–‡ä»¶å¼•ç”¨å…³ç³»ç”Ÿæˆchunkæ–‡ä»¶ï¼Œwebpackä¼šå¯¹è¿™ä¸ªchunkæ–‡ä»¶è¿›è¡Œä¸€äº›æ“ä½œ</li>\n<li>webpackå¤„ç†å¥½chunkæ–‡ä»¶åï¼Œæœ€åä¼šè¾“å‡ºbundleæ–‡ä»¶ï¼Œè¿™ä¸ªbundleæ–‡ä»¶åŒ…å«äº†ç»è¿‡åŠ è½½å’Œç¼–è¯‘çš„æœ€ç»ˆæºæ–‡ä»¶ï¼Œæ‰€ä»¥å®ƒå¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ</li>\n</ol>\n<p>ä¸€å¥è¯æ€»ç»“ï¼š<code>module</code>ã€<code>chunk</code>ã€<code>bundle</code>å…¶å®å°±æ˜¯åŒä¸€ä»½é€»è¾‘ä»£ç åœ¨ä¸åŒè½¬æ¢åœºæ™¯ä¸‹å–çš„ä¸‰ä¸ªåå­—ï¼šæˆ‘ä»¬ç›´æ¥å†™å‡ºæ¥çš„æ˜¯<code>module</code>ï¼Œ<code>webpack</code>å¤„ç†æ—¶æ˜¯<code>chunk</code>ï¼Œæœ€åç”Ÿæˆæµè§ˆå™¨å¯ä»¥ç›´æ¥è¿è¡Œçš„<code>bundle</code></p>\n<h2 id=\"filenamechunkfilename\">filename/chunkFilename</h2>\n<p><code>filename</code>å¯¹åº”äº<code>entry</code>é‡Œé¢çš„è¾“å…¥æ–‡ä»¶ï¼Œç»è¿‡webpack æ‰“åŒ…åè¾“å‡ºæ–‡ä»¶çš„æ–‡ä»¶å</p>\n<pre><code class=\"hljs language-json\"><span class=\"hljs-punctuation\">{</span>\n    entry<span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n        <span class=\"hljs-attr\">&quot;index&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;/path/to/index.js&quot;</span>\n    <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n    output<span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n        filename<span class=\"hljs-punctuation\">:</span> &#x27;<span class=\"hljs-punctuation\">[</span>name<span class=\"hljs-punctuation\">]</span>.<span class=\"hljs-punctuation\">[</span>hash<span class=\"hljs-punctuation\">:</span><span class=\"hljs-number\">8</span><span class=\"hljs-punctuation\">]</span>.js&#x27;\n    <span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n<p><code>chunkFilename</code>æŒ‡æœªåˆ—åœ¨<code>entry</code>ä¸­å´åˆè¦è¢«æ‰“åŒ…å‡ºæ¥çš„<code>chunk</code>æ–‡ä»¶çš„åç§°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ª<code>chunk</code>æ–‡ä»¶æŒ‡çš„å°±æ˜¯éœ€è¦<strong>æ‡’åŠ è½½</strong>çš„ä»£ç </p>\n<h2 id=\"webpackprefetchwebpackpreloadwebpackchunkname\">webpackPrefetch/webpackPreload/webpackChunkName</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-title function_\">import</span>(<span class=\"hljs-comment\">/* webpackPrefetch: true */</span> <span class=\"hljs-string\">&#x27;./path/to/LoginModal.js&#x27;</span>);\n</code></pre>\n<p><code>webpackChunkName</code>æ˜¯ä¸ºé¢„åŠ è½½çš„æ–‡ä»¶å–åˆ«åï¼Œ<code>webpackPrefetch</code>ä¼šåœ¨æµè§ˆå™¨é—²ç½®æ—¶ä¸‹è½½æ–‡ä»¶ï¼Œ<code>webpackPreload</code>ä¼šåœ¨çˆ¶<code>chunk</code>åŠ è½½æ—¶å¹¶è¡Œä¸‹è½½æ–‡ä»¶</p>\n<h2 id=\"hashchunkhashcontenthash\">hash/chunkhash/contenthash</h2>\n<p>hashä¸€èˆ¬æ˜¯ç»“åˆCDNç¼“å­˜æ¥ä½¿ç”¨çš„ã€‚å¦‚æœæ–‡ä»¶å†…å®¹æ”¹å˜çš„è¯ï¼Œé‚£ä¹ˆå¯¹åº”æ–‡ä»¶hashå€¼ä¹Ÿä¼šæ”¹å˜ï¼Œå¯¹åº”çš„htmlå¼•ç”¨çš„urlåœ°å€ä¹Ÿä¼šæ”¹å˜ï¼Œè§¦å‘cdnæœåŠ¡å™¨ä»æºæœåŠ¡å™¨ä¸Šæ‹‰å–å¯¹åº”æ•°æ®è¿›è€Œæ›´æ–°æœ¬åœ°ç¼“å­˜</p>\n<p><code>hash</code>æ˜¯æ•´ä¸ªé¡¹ç›®æ„å»ºä½¿ç”¨çš„ï¼Œé¡¹ç›®ä¸­å¦‚æœæœ‰äº›å˜åŠ¨ï¼Œhashä¸€å®šä¼šå˜ï¼Œæ¯”å¦‚è¯´æ”¹åŠ¨äº†utils.jsï¼Œindex.jsé‡Œçš„ä»£ç è™½ç„¶æ²¡æœ‰æ”¹å˜ï¼Œä½†æ˜¯å¤§å®¶éƒ½æ˜¯ç”¨çš„åŒä¸€ä»½hashï¼Œhashä¸€å˜ï¼Œç¼“å­˜ä¸€å®šä¼šå¤±æ•ˆï¼Œè¿™æ ·å­CDNå°±æ²¡æœ‰æ„ä¹‰äº†</p>\n<p><code>chunkHash</code>å°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Œå®ƒæ ¹æ®ä¸åŒçš„å…¥å£æ–‡ä»¶(<code>entry</code>)è¿›è¡Œä¾èµ–æ–‡ä»¶è§£æã€æ„å»ºå¯¹åº”çš„chunkï¼Œç”Ÿæˆå¯¹åº”çš„hashå€¼ã€‚ä¸€èˆ¬ç”¨åœ¨<code>output</code>é…ç½®ä¸Š</p>\n<p><code>contentHash</code>è®¡ç®—ä¸æ–‡ä»¶å†…å®¹æœ¬èº«æœ‰å…³ã€‚ä¸€èˆ¬ç”¨åœ¨æŠ½ç¦»<code>css</code>æ–‡ä»¶çš„æ’ä»¶é…ç½®ä¸Š</p>\n<h2 id=\"sourse-map-ä¸­-evalcheapinline\">sourse-map ä¸­ eval/cheap/inline</h2>\n<p>source-mapä¼šç”Ÿæˆç‹¬ç«‹çš„æ–‡ä»¶</p>\n<p>cheap-source-mapä¸ä¼šäº§ç”Ÿåˆ—æ˜ å°„</p>\n<p>eval-source-mapä¼šä»¥<code>eval</code>å‡½æ•°æ‰“åŒ…è¿è¡Œæ¨¡å—ï¼Œä¸äº§ç”Ÿç‹¬ç«‹çš„mapæ–‡ä»¶ï¼Œä¼šæ˜¾ç¤ºæŠ¥é”™çš„è¡Œåˆ—ä¿¡æ¯</p>\n<p>inline-source-mapæ˜ å°„æ–‡ä»¶ä»¥base64æ ¼å¼ç¼–ç ï¼ŒåŠ è½½bundleæ–‡ä»¶æœ€åï¼Œä¸äº§ç”Ÿç‹¬ç«‹çš„mapæ–‡ä»¶</p>\n<h2 id=\"loder-vs-plugin\">loder vs plugin</h2>\n<p>loder: æ–‡ä»¶åŠ è½½å™¨ï¼Œèƒ½å¤ŸåŠ è½½èµ„æºæ–‡ä»¶ï¼Œå¹¶å¯¹è¿™äº›æ–‡ä»¶è¿›è¡Œä¸€äº›å¤„ç†ï¼Œè¯¸å¦‚ç¼–è¯‘ã€å‹ç¼©ç­‰ï¼Œæœ€ç»ˆä¸€èµ·æ‰“åŒ…åˆ°æŒ‡å®šçš„æ–‡ä»¶ä¸­</p>\n<p>plugin: åœ¨webpackè¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸä¸­ä¼šå¹¿æ’­è®¸å¤šäº‹ä»¶ï¼Œpluginå¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œåœ¨åˆé€‚çš„æ—¶æœºé€šè¿‡è°ƒç”¨webpackæä¾›çš„apiæ”¹å˜è¾“å‡ºç»“æœ</p>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://mp.weixin.qq.com/s/To_p4eYJx_dkJr1ApcR4jA\">webpack ä¸­æœ€æ˜“æ··æ·†çš„ 5 ä¸ªçŸ¥è¯†ç‚¹</a></p>\n<p><a href=\"https://webpack.docschina.org\">webpackæ–‡æ¡£</a></p>\n"},{"title":"JavaScriptå¤ä¹ -æ‰‹å†™é¢˜","tags":["JavaScript","æ‰‹å†™é¢˜"],"categories":"2021å¤ä¹ ","description":"## mapã€reduceã€flattenå‡½æ•°\n\n``` js\nfunction myMap(src, cb) {\n  if (!Array.isArray(src)) throw new TypeError('src must be an array');\n  const tmp = [];\n  src.forEach((item) => tmp.push(cb(item)));\n  ret","createDate":"2021-05-27 02:07:18","updateDate":"2021-07-05 23:25:14","body":"<h2 id=\"mapã€reduceã€flattenå‡½æ•°\">mapã€reduceã€flattenå‡½æ•°</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">myMap</span>(<span class=\"hljs-params\">src, cb</span>) {\n  <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(src)) <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TypeError</span>(<span class=\"hljs-string\">&#x27;src must be an array&#x27;</span>);\n  <span class=\"hljs-keyword\">const</span> tmp = [];\n  src.<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">item</span>) =&gt;</span> tmp.<span class=\"hljs-title function_\">push</span>(<span class=\"hljs-title function_\">cb</span>(item)));\n  <span class=\"hljs-keyword\">return</span> tmp;\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">myReduce</span>(<span class=\"hljs-params\">src, cb, initialValue</span>) {\n  <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(src)) <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TypeError</span>(<span class=\"hljs-string\">&#x27;src must be an array&#x27;</span>);\n  <span class=\"hljs-keyword\">let</span> init = initialValue || src[<span class=\"hljs-number\">0</span>];\n  <span class=\"hljs-keyword\">const</span> tmp = initialValue ? src : src.<span class=\"hljs-title function_\">slice</span>(<span class=\"hljs-number\">1</span>);\n  tmp.<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">item, index</span>) =&gt;</span> {\n    init = <span class=\"hljs-title function_\">cb</span>(init, item, index, tmp);\n  });\n  <span class=\"hljs-keyword\">return</span> init;\n}\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">flatten</span> = (<span class=\"hljs-params\">arr, dep = <span class=\"hljs-number\">1</span></span>) =&gt; (dep &gt; <span class=\"hljs-number\">0</span>\n  ? arr.<span class=\"hljs-title function_\">reduce</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">pre, cur</span>) =&gt;</span> pre.<span class=\"hljs-title function_\">concat</span>(<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(cur) ? <span class=\"hljs-title function_\">flatten</span>(cur, dep - <span class=\"hljs-number\">1</span>) : cur), [])\n  : arr.<span class=\"hljs-title function_\">slice</span>());\n</code></pre>\n<h2 id=\"curryå‡½æ•°\">curryå‡½æ•°</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">myCurry</span>(<span class=\"hljs-params\">fn</span>) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-function\">(<span class=\"hljs-params\">...args</span>) =&gt;</span> (fn.<span class=\"hljs-property\">length</span> === args.<span class=\"hljs-property\">length</span>\n    ? fn.<span class=\"hljs-title function_\">call</span>(<span class=\"hljs-literal\">null</span>, ...args)\n    : fn.<span class=\"hljs-title function_\">bind</span>(<span class=\"hljs-literal\">null</span>, ...args));\n}\n</code></pre>\n<h2 id=\"å¼‚æ­¥æ±‚å’Œ\">å¼‚æ­¥æ±‚å’Œ</h2>\n<p>åŸæ–‡åœ°å€: <a href=\"https://mp.weixin.qq.com/s/RBk-cLUU-ZT4ylqIR2XdJg\">ä¸€é“å­—èŠ‚ç¬”è¯•é¢˜ï¼Œå®ç°ä¸€ä¸ªå¼‚æ­¥æ±‚å’Œå‡½æ•°</a>\næä¾›ä¸€ä¸ªå¼‚æ­¥ add æ–¹æ³•å¦‚ä¸‹ï¼Œéœ€è¦å®ç°ä¸€ä¸ª<code>await sum(...args)</code>å‡½æ•°</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">asyncAdd</span>(<span class=\"hljs-params\">a, b, callback</span>) {\n  <span class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title function_\">callback</span>(<span class=\"hljs-literal\">null</span>, a + b);\n  }, <span class=\"hljs-number\">1000</span>);\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">sum2</span>(<span class=\"hljs-params\">a, b</span>) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve, reject</span>) =&gt;</span> {\n    <span class=\"hljs-title function_\">asyncAdd</span>(a, b, <span class=\"hljs-function\">(<span class=\"hljs-params\">err, res</span>) =&gt;</span> {\n      <span class=\"hljs-keyword\">if</span> (err) <span class=\"hljs-title function_\">reject</span>(err);\n      <span class=\"hljs-keyword\">else</span> <span class=\"hljs-title function_\">resolve</span>(res);\n    });\n  });\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">sum</span>(<span class=\"hljs-params\">...args</span>) {\n  <span class=\"hljs-keyword\">if</span> (args.<span class=\"hljs-property\">length</span> === <span class=\"hljs-number\">0</span>) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">0</span>);\n  <span class=\"hljs-keyword\">if</span> (args.<span class=\"hljs-property\">length</span> === <span class=\"hljs-number\">1</span>) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">resolve</span>(args[<span class=\"hljs-number\">0</span>]);\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve</span>) =&gt;</span> {\n    args.<span class=\"hljs-title function_\">reduce</span>(\n      <span class=\"hljs-function\">(<span class=\"hljs-params\">pre, cur</span>) =&gt;</span> pre.<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">total</span>) =&gt;</span> <span class=\"hljs-title function_\">sum2</span>(total, cur)),\n      <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">0</span>),\n    ).<span class=\"hljs-title function_\">then</span>(resolve);\n  });\n}\n\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">sumTmp</span>(<span class=\"hljs-params\">...args</span>) {\n  <span class=\"hljs-keyword\">if</span> (args.<span class=\"hljs-property\">length</span> === <span class=\"hljs-number\">1</span>) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">resolve</span>(args[<span class=\"hljs-number\">0</span>]);\n  <span class=\"hljs-keyword\">const</span> res = args.<span class=\"hljs-title function_\">reduce</span>(<span class=\"hljs-keyword\">async</span> (a, b) =&gt; <span class=\"hljs-title function_\">sum2</span>(<span class=\"hljs-keyword\">await</span> a, b), <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">0</span>));\n  <span class=\"hljs-keyword\">return</span> res;\n}\n\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">performanceSum</span>(<span class=\"hljs-params\">...args</span>) {\n  <span class=\"hljs-keyword\">const</span> tmp = <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">parse</span>(<span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">stringify</span>(args));\n  <span class=\"hljs-keyword\">const</span> { length } = tmp;\n  <span class=\"hljs-keyword\">if</span> (length === <span class=\"hljs-number\">1</span>) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">resolve</span>(tmp[<span class=\"hljs-number\">0</span>]);\n  <span class=\"hljs-keyword\">const</span> resultArray = [];\n  <span class=\"hljs-keyword\">if</span> (length % <span class=\"hljs-number\">2</span>) tmp.<span class=\"hljs-title function_\">push</span>(<span class=\"hljs-number\">0</span>);\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>; i &lt; tmp.<span class=\"hljs-property\">length</span> / <span class=\"hljs-number\">2</span>; i += <span class=\"hljs-number\">1</span>) {\n    resultArray.<span class=\"hljs-title function_\">push</span>([tmp[i * <span class=\"hljs-number\">2</span>], tmp[i * <span class=\"hljs-number\">2</span> + <span class=\"hljs-number\">1</span>]]);\n  }\n  <span class=\"hljs-keyword\">const</span> res = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">all</span>(resultArray.<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">[a, b]</span>) =&gt;</span> <span class=\"hljs-title function_\">sum2</span>(a, b)));\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">performanceSum</span>(...res);\n}\n</code></pre>\n<h2 id=\"rgb255-255-255è½¬ffffff\">rgb(255, 255, 255)è½¬#ffffff</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">rgb2hex</span>(<span class=\"hljs-params\">rgb</span>) {\n  <span class=\"hljs-keyword\">const</span> [r, g, b] = rgb.<span class=\"hljs-title function_\">match</span>(<span class=\"hljs-regexp\">/\\d+/g</span>);\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">`#<span class=\"hljs-subst\">${\n    [r, g, b].map((item) =&gt; (+item).toString(<span class=\"hljs-number\">16</span>).padStart(<span class=\"hljs-number\">2</span>, <span class=\"hljs-string\">&#x27;0&#x27;</span>)).join(<span class=\"hljs-string\">&#x27;&#x27;</span>)\n  }</span>`</span>;\n}\n</code></pre>\n<h2 id=\"promiseall\">Promise.all</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">promiseAll</span>(<span class=\"hljs-params\">promises</span>) {\n  <span class=\"hljs-keyword\">if</span> (!promises[<span class=\"hljs-title class_\">Symbol</span>.<span class=\"hljs-property\">iterator</span>]) <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TypeError</span>(<span class=\"hljs-string\">&#x27;promises must be iterable&#x27;</span>);\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve, reject</span>) =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> resolvedPromises = [];\n    promises.<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">promise</span>) =&gt;</span> <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">resolve</span>(promise).<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">res</span>) =&gt;</span> {\n      resolvedPromises.<span class=\"hljs-title function_\">push</span>(res);\n      <span class=\"hljs-keyword\">if</span> (resolvedPromises.<span class=\"hljs-property\">length</span> === promises.<span class=\"hljs-property\">length</span>) <span class=\"hljs-title function_\">resolve</span>(resolvedPromises);\n    }, reject));\n  });\n}\n</code></pre>\n<h2 id=\"promiseallsettled\">Promise.allSettled</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title class_\">PromiseStatus</span> = {\n  <span class=\"hljs-attr\">resolved</span>: <span class=\"hljs-string\">&#x27;fulfilled&#x27;</span>,\n  <span class=\"hljs-attr\">rejected</span>: <span class=\"hljs-string\">&#x27;rejected&#x27;</span>,\n};\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">promiseAllSettled1</span>(<span class=\"hljs-params\">promises</span>) {\n  <span class=\"hljs-keyword\">if</span> (!promises[<span class=\"hljs-title class_\">Symbol</span>.<span class=\"hljs-property\">iterator</span>]) <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TypeError</span>(<span class=\"hljs-string\">&#x27;promises must be iterable&#x27;</span>);\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">onResolve</span> = (<span class=\"hljs-params\">value</span>) =&gt; ({ <span class=\"hljs-attr\">status</span>: <span class=\"hljs-title class_\">PromiseStatus</span>.<span class=\"hljs-property\">resolved</span>, value });\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">onReject</span> = (<span class=\"hljs-params\">reason</span>) =&gt; ({ <span class=\"hljs-attr\">status</span>: <span class=\"hljs-title class_\">PromiseStatus</span>.<span class=\"hljs-property\">rejected</span>, reason });\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">all</span>(promises.<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">promise</span>) =&gt;</span> <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">resolve</span>(promise).<span class=\"hljs-title function_\">then</span>(onResolve, onReject)));\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">promiseAllSettled2</span>(<span class=\"hljs-params\">promises</span>) {\n  <span class=\"hljs-keyword\">if</span> (!promises[<span class=\"hljs-title class_\">Symbol</span>.<span class=\"hljs-property\">iterator</span>]) <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TypeError</span>(<span class=\"hljs-string\">&#x27;promises must be iterable&#x27;</span>);\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve</span>) =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> res = [];\n    promises.<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">promise</span>) =&gt;</span> <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">resolve</span>(promise).<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">value</span>) =&gt;</span> {\n      res.<span class=\"hljs-title function_\">push</span>({ <span class=\"hljs-attr\">status</span>: <span class=\"hljs-title class_\">PromiseStatus</span>.<span class=\"hljs-property\">resolved</span>, value });\n      <span class=\"hljs-keyword\">if</span> (res.<span class=\"hljs-property\">length</span> === promises.<span class=\"hljs-property\">length</span>) <span class=\"hljs-title function_\">resolve</span>(res);\n    }, <span class=\"hljs-function\">(<span class=\"hljs-params\">reason</span>) =&gt;</span> {\n      res.<span class=\"hljs-title function_\">push</span>({ <span class=\"hljs-attr\">status</span>: <span class=\"hljs-title class_\">PromiseStatus</span>.<span class=\"hljs-property\">rejected</span>, reason });\n      <span class=\"hljs-keyword\">if</span> (res.<span class=\"hljs-property\">length</span> === promises.<span class=\"hljs-property\">length</span>) <span class=\"hljs-title function_\">resolve</span>(res);\n    }));\n  });\n}\n</code></pre>\n<h2 id=\"promiseany\">Promise.any</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">promiseAny</span>(<span class=\"hljs-params\">promises</span>) {\n  <span class=\"hljs-keyword\">if</span> (!promises[<span class=\"hljs-title class_\">Symbol</span>.<span class=\"hljs-property\">iterator</span>]) <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TypeError</span>(<span class=\"hljs-string\">&#x27;promises must be iterable&#x27;</span>);\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve, reject</span>) =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> { length } = promises;\n    <span class=\"hljs-keyword\">const</span> rejectedPromises = [];\n    promises.<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">promise</span>) =&gt;</span> <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">resolve</span>(promise).<span class=\"hljs-title function_\">then</span>(resolve, <span class=\"hljs-function\">(<span class=\"hljs-params\">err</span>) =&gt;</span> {\n      rejectedPromises.<span class=\"hljs-title function_\">push</span>(err);\n      <span class=\"hljs-keyword\">if</span> (rejectedPromises.<span class=\"hljs-property\">length</span> === length) <span class=\"hljs-title function_\">reject</span>(rejectedPromises);\n    }));\n  });\n}\n</code></pre>\n<h2 id=\"shallowequal\">shallowEqual</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">shallowEqual</span>(<span class=\"hljs-params\">obj1, obj2</span>) {\n  <span class=\"hljs-keyword\">if</span> (obj1 === obj2) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n  <span class=\"hljs-keyword\">if</span> (\n    <span class=\"hljs-keyword\">typeof</span> obj1 !== <span class=\"hljs-string\">&#x27;object&#x27;</span>\n    || obj1 === <span class=\"hljs-literal\">null</span>\n    || <span class=\"hljs-keyword\">typeof</span> obj2 !== <span class=\"hljs-string\">&#x27;object&#x27;</span>\n    || obj2 === <span class=\"hljs-literal\">null</span>\n  ) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">ownKeys</span>(obj1).<span class=\"hljs-property\">length</span> !== <span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">ownKeys</span>(obj2).<span class=\"hljs-property\">length</span>) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n  <span class=\"hljs-keyword\">const</span> keys = <span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">ownKeys</span>(obj1);\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>; i &lt; keys.<span class=\"hljs-property\">length</span>; i += <span class=\"hljs-number\">1</span>) {\n    <span class=\"hljs-keyword\">if</span> (obj1[keys[i]] !== obj2[keys[i]]) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n  }\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n}\n</code></pre>\n<h2 id=\"shuffle\">shuffle</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">shuffle</span> = (<span class=\"hljs-params\">list</span>) =&gt; list.<span class=\"hljs-title function_\">sort</span>(<span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">random</span>() - <span class=\"hljs-number\">0.5</span>)\n</code></pre>\n"},{"title":"React.jså¤ä¹ -v17æ–°ç‰¹æ€§","tags":["React.js","React17"],"categories":"2021å¤ä¹ ","description":"## å…¨æ–°çš„jsxè½¬æ¢\n\nv17ä¹‹å‰ä½¿ç”¨`jsx`éœ€è¦å¯¼å…¥`React`ã€‚è¿™æ˜¯å› ä¸ºv17ä¹‹å‰éœ€è¦ä½¿ç”¨`React.createElement`æ¥ç¼–è¯‘`jsx`ã€‚\nv17ä¹‹åè‡ªåŠ¨ä»`React`çš„`package`ä¸­å¼•å…¥æ–°çš„å…¥å£å‡½æ•°å¹¶è°ƒç”¨\n\n## äº‹ä»¶å§”æ‰˜çš„å˜æ›´\n\nv17ä¸å†å°†äº‹ä»¶æ·»åŠ åˆ°`document`ä¸Šï¼Œè€Œæ˜¯æ·»åŠ åˆ°æ¸²æŸ“`React`çš„æ ¹å®¹å™¨ä¸­\n\nå½“å¼€å‘è€…éœ€è¦åœ¨`document`ä¸Šæ·»åŠ è‡ªå®š","createDate":"2021-05-29 14:47:45","updateDate":"2021-07-01 13:43:20","body":"<h2 id=\"å…¨æ–°çš„jsxè½¬æ¢\">å…¨æ–°çš„jsxè½¬æ¢</h2>\n<p>v17ä¹‹å‰ä½¿ç”¨<code>jsx</code>éœ€è¦å¯¼å…¥<code>React</code>ã€‚è¿™æ˜¯å› ä¸ºv17ä¹‹å‰éœ€è¦ä½¿ç”¨<code>React.createElement</code>æ¥ç¼–è¯‘<code>jsx</code>ã€‚\nv17ä¹‹åè‡ªåŠ¨ä»<code>React</code>çš„<code>package</code>ä¸­å¼•å…¥æ–°çš„å…¥å£å‡½æ•°å¹¶è°ƒç”¨</p>\n<h2 id=\"äº‹ä»¶å§”æ‰˜çš„å˜æ›´\">äº‹ä»¶å§”æ‰˜çš„å˜æ›´</h2>\n<p>v17ä¸å†å°†äº‹ä»¶æ·»åŠ åˆ°<code>document</code>ä¸Šï¼Œè€Œæ˜¯æ·»åŠ åˆ°æ¸²æŸ“<code>React</code>çš„æ ¹å®¹å™¨ä¸­</p>\n<p>å½“å¼€å‘è€…éœ€è¦åœ¨<code>document</code>ä¸Šæ·»åŠ è‡ªå®šä¹‰äº‹ä»¶æ—¶ä¼šå‘ç”Ÿæ„æƒ³ä¸åˆ°çš„bug</p>\n<pre><code class=\"hljs language-jsx\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">App</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-keyword\">const</span> [showModal, setShowModal] = <span class=\"hljs-title class_\">React</span>.<span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-literal\">false</span>);\n  <span class=\"hljs-title class_\">React</span>.<span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">closeModal</span> = (<span class=\"hljs-params\"></span>) =&gt; <span class=\"hljs-title function_\">setShowModal</span>(<span class=\"hljs-literal\">false</span>);\n    <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&quot;click&quot;</span>, closeModal);\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-function\">() =&gt;</span> {\n      <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">removeEventListener</span>(<span class=\"hljs-string\">&quot;click&quot;</span>, closeModal);\n    }\n  })\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;parent&quot;</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{(e)</span> =&gt;</span> {\n        setShowModal(true);\n        // e.stopPropagation();\n        e.nativeEvent.stopImmediatePropagation();\n      }}&gt;showModal<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n      {\n        showModal &amp;&amp; (\n          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">&quot;modal&quot;</span>&gt;</span>i am a modal<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n        )\n      }\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n  );\n};\n\n<span class=\"hljs-title class_\">ReactDOM</span>.<span class=\"hljs-title function_\">render</span>(<span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">App</span> /&gt;</span></span>, <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&#x27;#app&#x27;</span>));\n</code></pre>\n<h2 id=\"å»é™¤äº‹ä»¶æ± \">å»é™¤äº‹ä»¶æ± </h2>\n<p>v17ä¹‹å‰ï¼Œå¦‚æœæƒ³è¦ç”¨å¼‚æ­¥çš„æ–¹å¼ä½¿ç”¨äº‹ä»¶å¯¹è±¡<code>e</code>ï¼Œåˆ™å¿…é¡»å…ˆè°ƒç”¨<code>e.persist()</code>æ‰å¯ä»¥ï¼Œè¿™æ˜¯å› ä¸º<code>React</code>åœ¨æ—§æµè§ˆå™¨ä¸­é‡ç”¨äº†ä¸åŒäº‹ä»¶çš„äº‹ä»¶å¯¹è±¡ä»¥æé«˜æ€§èƒ½ï¼Œå¹¶å°†æ‰€æœ‰äº‹ä»¶å­—æ®µåœ¨å®ƒä»¬ä¹‹å‰è®¾ç½®ä¸º<code>null</code></p>\n<pre><code class=\"hljs language-jsx\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">Name</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">const</span> [name, setName] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-string\">&#x27;&#x27;</span>);\n    \n    <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">onChange</span> = (<span class=\"hljs-params\">e</span>) =&gt; {\n        e.<span class=\"hljs-title function_\">persist</span>();\n        <span class=\"hljs-title function_\">setValue</span>(<span class=\"hljs-function\">() =&gt;</span> e.<span class=\"hljs-property\">target</span>.<span class=\"hljs-property\">value</span>);\n    }\n    \n    <span class=\"hljs-keyword\">return</span> (\n        <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">{name}</span> <span class=\"hljs-attr\">onInput</span>=<span class=\"hljs-string\">{onChange}</span> /&gt;</span></span>\n    )\n}\n</code></pre>\n<h2 id=\"å‰¯ä½œç”¨æ¸…ç†æ—¶é—´\">å‰¯ä½œç”¨æ¸…ç†æ—¶é—´</h2>\n<p>v17ä¹‹å‰ï¼Œ<code>useEffect</code>ã€<code>useLayoutEffect</code>çš„æ¸…ç†å‡½æ•°éƒ½æ˜¯åŒæ­¥è¿è¡Œçš„ï¼Œå¯¹äºå¤§å‹ç¨‹åºæ¥è®²ï¼Œè¿™å¹¶ä¸æ˜¯ç†æƒ³é€‰æ‹©ï¼Œå› ä¸ºåŒæ­¥æ“ä½œä¼šå½±å“é¡µé¢çš„æ˜¾ç¤ºã€‚v17ä¹‹åï¼Œ<code>useEffect</code>çš„æ¸…ç†å‡½æ•°å°†å˜ä¸ºå¼‚æ­¥è¿è¡Œï¼Œ<code>useLayoutEffect</code>çš„æ¸…ç†å‡½æ•°ä»ä¿æŒåŒæ­¥è¿è¡Œ</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> instance = someRef.<span class=\"hljs-property\">current</span>;\n    instance.<span class=\"hljs-title function_\">someSetupMethod</span>();\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-function\">() =&gt;</span> {\n        instance.<span class=\"hljs-title function_\">someCleanupMethod</span>();\n    }\n})\n</code></pre>\n"},{"title":"React.jså¤ä¹ -ä¸€äº›ç†è§£","tags":["React.js"],"categories":"2021å¤ä¹ ","description":"## å¯¹Reactçš„ç†è§£\n\n> ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„JavaScriptåº“\n\nå…·æœ‰å£°æ˜å¼ã€ç»„ä»¶åŒ–ã€è·¨å¹³å°ç­‰ç‰¹ç‚¹\n\n- å£°æ˜å¼\n    Reacté‡‡ç”¨å£°æ˜å¼æ¥ç¼–å†™UIï¼Œè¯­æ³•ç®€æ´é«˜æ•ˆ\n    ``` jsx\n    // å£°æ˜å¼\n    const Element = <h1>hello</h1>\n    ReactDOM.render(<Element />, document.querySele","createDate":"2021-06-01 01:47:25","updateDate":"2021-07-01 13:42:45","body":"<h2 id=\"å¯¹reactçš„ç†è§£\">å¯¹Reactçš„ç†è§£</h2>\n<blockquote>\n<p>ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„JavaScriptåº“</p>\n</blockquote>\n<p>å…·æœ‰å£°æ˜å¼ã€ç»„ä»¶åŒ–ã€è·¨å¹³å°ç­‰ç‰¹ç‚¹</p>\n<ul>\n<li>å£°æ˜å¼\n  Reacté‡‡ç”¨å£°æ˜å¼æ¥ç¼–å†™UIï¼Œè¯­æ³•ç®€æ´é«˜æ•ˆ<pre><code class=\"hljs language-jsx\"><span class=\"hljs-comment\">// å£°æ˜å¼</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title class_\">Element</span> = <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span>&gt;</span>hello<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span></span>\n<span class=\"hljs-title class_\">ReactDOM</span>.<span class=\"hljs-title function_\">render</span>(<span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Element</span> /&gt;</span></span>, <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#app&quot;</span>));\n\n<span class=\"hljs-comment\">// å‘½ä»¤å¼</span>\n<span class=\"hljs-keyword\">const</span> element = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createElement</span>(<span class=\"hljs-string\">&quot;div&quot;</span>);\ndiv.<span class=\"hljs-property\">innerText</span> = <span class=\"hljs-string\">&quot;hello&quot;</span>;\n<span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#app&quot;</span>).<span class=\"hljs-title function_\">appendChild</span>(element);\n</code></pre>\n</li>\n<li>ç»„ä»¶åŒ–\n  å¯ä»¥ç¼–å†™å…·æœ‰ç®¡ç†è‡ªèº«çŠ¶æ€èƒ½åŠ›çš„å°è£…ç»„ä»¶ï¼Œç„¶åå¯¹å…¶ç»„åˆä»¥æ„æˆå¤æ‚çš„UIã€‚æ–¹ä¾¿å¤ç”¨ã€‚ç”±äºç»„ä»¶é€»è¾‘ä½¿ç”¨JavaScriptç¼–å†™è€Œéæ¨¡æ¿ï¼Œå› æ­¤ä½ å¯ä»¥è½»æ¾åœ°åœ¨åº”ç”¨ä¸­ä¼ é€’æ•°æ®ï¼Œå¹¶ä¿æŒçŠ¶æ€ä¸DOMåˆ†ç¦»</li>\n<li>è·¨å¹³å°\n  <code>react-dom</code>ç”¨äºæ„å»ºç½‘ç«™åº”ç”¨ï¼›<code>react-native</code>ç”¨äºæ„å»ºç§»åŠ¨ç«¯åŸç”Ÿåº”ç”¨</li>\n<li>jsx\n  ä½¿ç”¨jsxæ¥å¼€å‘ï¼Œæ–¹ä¾¿çµæ´»ï¼Œè¡¨è¾¾èƒ½åŠ›å¼º</li>\n<li>è™šæ‹ŸDOM\n  å¼•å…¥è™šæ‹ŸDOMçš„æ¦‚å¿µï¼Œæ•´åˆæ›´æ–°è§†å›¾çš„æ–¹æ³•ï¼Œä½¿å¼€å‘è€…ä¸å†å»æ‰‹åŠ¨æ›´æ–°DOMï¼Œæ“ä½œæ›´é«˜æ•ˆ</li>\n<li>æ–°çš„Reconcilerï¼ˆfiberæ¶æ„ï¼‰\n  æœ€æ–°çš„çš„fiberæ¶æ„ä½¿å¾—DOMæ›´æ–°æ›´åŠ æµç•…ã€é«˜æ•ˆã€‚åˆ†ç¦»å‡ºcommitå’Œrenderé˜¶æ®µï¼Œä½¿å¾—æ›´æ–°å¼‚æ­¥å¯ä¸­æ–­ï¼Œä¸ä¼šé•¿æ—¶é—´é˜»å¡æ¸²æŸ“çº¿ç¨‹ï¼Œä»è€Œé¿å…åœ¨ä¸€äº›å¤§å‹åº”ç”¨ä¸­æ‰§è¡Œä¸€äº›æ“ä½œåé¡µé¢å¡æ­»çš„é—®é¢˜</li>\n</ul>\n<h2 id=\"å¯¹virtualdomçš„ç†è§£\">å¯¹virtualDOMçš„ç†è§£</h2>\n<p>ä¸€ä¸ªJavaScriptå¯¹è±¡ï¼Œç”¨äºæè¿°çœŸå®çš„DOMèŠ‚ç‚¹</p>\n<p>åœ¨reactä¸­é€šè¿‡<code>React.createElement</code>åˆ›å»ºï¼ˆbabelåœ¨è½¬è¯‘jsxçš„æ—¶å€™è°ƒç”¨ï¼‰</p>\n<p>é€šè¿‡å¼•å…¥è™šæ‹ŸDOMï¼Œå¼€å‘è€…å¯ä»¥æ–¹ä¾¿å¾—è§£å†³æµè§ˆå™¨å…¼å®¹æ€§ä¸è·¨å¹³å°é—®é¢˜ã€‚å¼€å‘è€…åªéœ€è¦å‘Šè¯‰reactæœ€æ–°çš„DOMç»“æ„ï¼Œæ¸²æŸ“äº¤ç”±reactç»Ÿä¸€å¤„ç†ï¼Œå¼€å‘è€…ä¸ç”¨å†å…³å¿ƒä¸åŒæµè§ˆå™¨ä¸‹apiçš„å…¼å®¹æ€§é—®é¢˜ï¼›è€Œä¸”é€šè¿‡å¼•å…¥ä¸åŒçš„æ¸²æŸ“åº“ï¼Œå¯ä»¥è¿›è¡Œè·¨å¹³å°å¼€å‘ã€‚æ­¤å¤–ï¼Œè™šæ‹ŸDOMåœ¨æ›´æ–°çš„æ—¶å€™å¯ä»¥å®ç°å·®å¼‚åŒ–ä¸ç²¾å‡†æ›´æ–°ï¼Œæ•ˆç‡æ›´é«˜</p>\n<p>ä½†è™šæ‹ŸDOMä¹Ÿæœ‰å…¶ç¼ºç‚¹ï¼Œé¦–å…ˆæ˜¯å¼•å…¥è™šæ‹ŸDOMä¼šåé¢å¤–çš„å†…å­˜æ¶ˆè€—ï¼›å…¶æ¬¡æ˜¯è™šæ‹ŸDOMåœ¨æŸäº›æƒ…å†µä¸‹çš„æ•ˆç‡ä¹Ÿä¸ä¸€å®šæ¯”æ‰‹åŠ¨æ“ä½œDOMé«˜</p>\n<p>psï¼šè™šæ‹ŸDOMä¸€å®šæ•ˆç‡é«˜å—ï¼Ÿ</p>\n<p>ç­”ï¼šä¸ä¸€å®šã€‚æ¯”å¦‚åœ¨åˆæ¬¡æ¸²æŸ“çš„æ—¶å€™å’Œæ‰‹åŠ¨æ“ä½œä¸€æ ·ï¼Œéƒ½éœ€è¦åˆ›å»ºèŠ‚ç‚¹ç„¶åæ’å…¥ï¼Œæ•ˆç‡å¹¶ä¸é«˜ã€‚è™šæ‹ŸDOMçš„çœŸæ­£ä¼˜åŠ¿æ˜¯è·¨å¹³å°ã€å¤„ç†å…¼å®¹æ€§é—®é¢˜ã€å¢é‡æ›´æ–°ç­‰</p>\n<h2 id=\"å¯¹fiberçš„ç†è§£\">å¯¹fiberçš„ç†è§£</h2>\n<p>å…·æœ‰ä¸‰ç§ä¸åŒçš„å«ä¹‰</p>\n<ul>\n<li>ä¸€ç§æ¶æ„ã€‚ä¹‹å‰React15çš„<code>reconciler</code>é‡‡ç”¨é€’å½’çš„æ–¹å¼æ‰§è¡Œæ›´æ–°DOMçš„æ“ä½œï¼Œæ•°æ®ä¿å­˜åœ¨é€’å½’è°ƒç”¨æ ˆä¸­ï¼Œæ‰€ä»¥è¢«ç§°ä¸º<code>stack Reconciler</code>ã€‚React16çš„<code>reconciler</code>åŸºäºFiberèŠ‚ç‚¹å®ç°ï¼Œè¢«ç§°ä¸º<code>Fiber Reconciler</code></li>\n<li>ä¸€ç§æ•°æ®ç»“æ„ã€‚æ¯ä¸ª<code>Fiber</code>èŠ‚ç‚¹å¯¹åº”ä¸€ä¸ª<code>React element</code>ï¼Œä¿å­˜äº†è¯¥ç»„ä»¶çš„ç±»å‹ï¼ˆå‡½æ•°ç»„ä»¶/ç±»ç»„ä»¶/åŸç”Ÿç»„ä»¶...ï¼‰ã€å¯¹åº”çš„DOMèŠ‚ç‚¹ç­‰ä¿¡æ¯</li>\n<li>ä¸€ä¸ªæ‰§è¡Œä»»åŠ¡ã€‚ï¼ˆå·¥ä½œå•å…ƒï¼‰ æ¯ä¸ª<code>Fiber</code>èŠ‚ç‚¹ä¿å­˜äº†æœ¬æ¬¡æ›´æ–°ä¸­è¯¥ç»„ä»¶æ”¹å˜çš„çŠ¶æ€ã€è¦æ‰§è¡Œçš„å·¥ä½œï¼ˆéœ€è¦è¢«åˆ é™¤/è¢«æ’å…¥é¡µé¢ä¸­/è¢«æ›´æ–°...ï¼‰</li>\n</ul>\n<h2 id=\"å¯¹å‡½æ•°å¼ç»„ä»¶çš„ç†è§£\">å¯¹å‡½æ•°å¼ç»„ä»¶çš„ç†è§£</h2>\n<p>ä¸ºäº†è§£å†³ç±»ç»„ä»¶åœ¨å¼‚æ­¥æ—¶æ•°æ®ä¸€è‡´æ€§çš„é—®é¢˜</p>\n<p>å‡½æ•°å¼ç»„ä»¶vsç±»ç»„ä»¶ï¼š</p>\n<ul>\n<li>ç¼–ç¨‹æ€æƒ³ä¸åŒã€‚ç±»ç»„ä»¶éœ€è¦åˆ›å»ºå®ä¾‹ï¼Œè€Œå‡½æ•°å¼ç»„ä»¶ä¸éœ€è¦ï¼Œæ¥æ”¶è¾“å…¥ï¼Œè¿”å›è¾“å‡ºï¼Œæ˜¯åŸºäºå‡½æ•°å¼ç¼–ç¨‹çš„æ€æƒ³å†™çš„</li>\n<li>å†…å­˜å ç”¨ã€‚ç±»ç»„ä»¶éœ€è¦å®ä¾‹åŒ–ï¼Œå ç”¨ä¸€å®šçš„å†…å­˜</li>\n<li>æ•è·ç‰¹æ€§ã€‚å‡½æ•°å¼ç»„ä»¶å…·æœ‰å€¼æ•è·ç‰¹æ€§</li>\n<li>å¯æµ‹è¯•æ€§ã€‚å‡½æ•°å€¼ç»„ä»¶æ›´å®¹æ˜“ç¼–å†™æµ‹è¯•ç”¨ä¾‹</li>\n<li>ç”Ÿå‘½å‘¨æœŸã€‚ç±»ç»„ä»¶å…·æœ‰å¤æ‚çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œå‡½æ•°å¼ç»„ä»¶å¯ä½¿ç”¨<code>useEffect</code>æ¥æ‰§è¡Œå‰¯ä½œç”¨</li>\n<li>é€»è¾‘å¤ç”¨ã€‚ç±»ç»„ä»¶å¯ä»¥ä½¿ç”¨å­ç»„ä»¶/ç»§æ‰¿æ¥å®ç°å¤ç”¨ï¼Œå‡½æ•°å¼ç»„ä»¶ä½¿ç”¨è‡ªå®šä¹‰<code>hook</code>æ¥å®ç°é€»è¾‘å¤ç”¨</li>\n<li>è·³è¿‡æ›´æ–°ã€‚ç±»ç»„ä»¶å¯ä»¥ä½¿ç”¨<code>shouldComponentUpdate</code>å’Œ<code>React.PureComponent</code>æ¥è·³è¿‡æ›´æ–°ã€‚å‡½æ•°å¼ç»„ä»¶å¯ä½¿ç”¨<code>React.memo</code></li>\n<li>å‘å±•å‰æ™¯ã€‚å‡½æ•°å¼ç»„ä»¶å¯ä»¥æ›´å¥½çš„è§£å†³<code>this</code>æŒ‡å‘ã€é€»è¾‘å¤ç”¨ã€æ—¶é—´åˆ†ç‰‡ã€å¹¶å‘æ¸²æŸ“ç­‰é—®é¢˜</li>\n</ul>\n<h2 id=\"åˆæˆäº‹ä»¶\">åˆæˆäº‹ä»¶</h2>\n<p>Reactä¸ºå¤„ç†å„æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜æ‰€è®¾è®¡çš„ä¸€ç§æ—¶é—´å¤„ç†æœºåˆ¶ã€‚åŸç”ŸDOMäº‹ä»¶æµåˆ†ä¸ºä¸¤ç§ï¼šIEã€W3Cã€‚IEæ ‡å‡†ä¸­åªæœ‰å†’æ³¡ï¼›W3Cåˆ†ä¸ºæ•è·+å†’æ³¡é˜¶æ®µã€‚åˆæˆäº‹ä»¶åŸºäºäº‹ä»¶å§”æ‰˜æœºåˆ¶ï¼Œç»Ÿä¸€å¤„ç†äº‹ä»¶ç»‘å®šã€‚</p>\n<p>åœ¨React17ä¹‹å‰ï¼Œæ‰€æœ‰äº‹ä»¶å‡ç»‘å®šåˆ°<code>document</code>å…ƒç´ ä¸Šï¼Œ17ä¹‹åç»‘å®šåˆ°æ ¹å…ƒç´ ä¸Šã€‚è¿™æ ·åšæœ‰ä»¥ä¸‹å‡ ç‚¹ä¼˜åŠ¿ï¼š</p>\n<ul>\n<li>è§£å†³äº‹ä»¶è§¦å‘é¡ºåºä¸ä¸€è‡´é—®é¢˜</li>\n<li>å¤šReactç‰ˆæœ¬å…±å­˜é—®é¢˜</li>\n</ul>\n<pre><code class=\"hljs language-jsx\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">App</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-title class_\">React</span>.<span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> node = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#parent&quot;</span>);\n    <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">handler</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;native clickPropagation&#x27;</span>);\n    };\n    <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">handlerCapture</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;native clickCapture&#x27;</span>);\n    };\n    node.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&quot;click&quot;</span>, handler);\n    node.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&quot;click&quot;</span>, handlerCapture, <span class=\"hljs-literal\">true</span>);\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-function\">() =&gt;</span> {\n      node.<span class=\"hljs-title function_\">removeEventListener</span>(<span class=\"hljs-string\">&quot;click&quot;</span>, handler);\n      node.<span class=\"hljs-title function_\">removeEventListener</span>(<span class=\"hljs-string\">&quot;click&quot;</span>, handlerCapture, <span class=\"hljs-literal\">true</span>);\n    }\n  })\n\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">onClick</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;react clickPropagation&#x27;</span>);\n  }\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">onClickCapture</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;react clickCapture&#x27;</span>);\n  }\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;parent&quot;</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{onClick}</span> <span class=\"hljs-attr\">onClickCapture</span>=<span class=\"hljs-string\">{onClickCapture}</span>&gt;</span>hello<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n  );\n};\n\n<span class=\"hljs-title class_\">ReactDOM</span>.<span class=\"hljs-title function_\">render</span>(<span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">App</span> /&gt;</span></span>, <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&#x27;#app&#x27;</span>))\n\n<span class=\"hljs-comment\">// v16</span>\n<span class=\"hljs-comment\">// native clickCapture</span>\n<span class=\"hljs-comment\">// native clickPropagation</span>\n<span class=\"hljs-comment\">// react clickCapture</span>\n<span class=\"hljs-comment\">// react clickPropagation</span>\n\n<span class=\"hljs-comment\">// v17</span>\n<span class=\"hljs-comment\">// react clickCapture</span>\n<span class=\"hljs-comment\">// navive clickCapture</span>\n<span class=\"hljs-comment\">// native clickPropagation</span>\n<span class=\"hljs-comment\">// react clickPropagation</span>\n</code></pre>\n<p>æºç å±‚é¢åˆ†åˆ«ç»™<code>root</code>æ·»åŠ ä¸€ä¸ªå†’æ³¡äº‹ä»¶å’Œæ•è·äº‹ä»¶ï¼Œåœ¨æ•è·äº‹ä»¶é‡Œæ¨¡æ‹Ÿåˆæˆäº‹ä»¶çš„æ•è·ï¼Œåœ¨å†’æ³¡äº‹ä»¶é‡Œæ¨¡æ‹Ÿåˆæˆäº‹ä»¶çš„å†’æ³¡</p>\n<pre><code class=\"hljs language-js\">root.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&quot;click&quot;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">e</span>) =&gt;</span> <span class=\"hljs-title function_\">dispatchEvent</span>(e, <span class=\"hljs-literal\">true</span>), <span class=\"hljs-literal\">true</span>);\nroot.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&quot;click&quot;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">e</span>) =&gt;</span> <span class=\"hljs-title function_\">dispatchEvent</span>(e, <span class=\"hljs-literal\">false</span>));\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">dispatchEvent</span>(<span class=\"hljs-params\">event, useCapture</span>) {\n    <span class=\"hljs-comment\">// ...</span>\n    <span class=\"hljs-keyword\">if</span> (useCapture) {\n        <span class=\"hljs-comment\">// æ¨¡æ‹Ÿåˆæˆäº‹ä»¶çš„æ•è·</span>\n    } <span class=\"hljs-keyword\">else</span> {\n        <span class=\"hljs-comment\">// æ¨¡æ‹Ÿåˆæˆäº‹ä»¶çš„å†’æ³¡</span>\n    }\n    <span class=\"hljs-comment\">// ...</span>\n}\n</code></pre>\n<h2 id=\"å¯¹dom-diffçš„ç†è§£\">å¯¹DOM-diffçš„ç†è§£</h2>\n<p>ç®€å•æ¥è®²å°±æ˜¯æ‹¿æ–°çš„jsx(æ•°ç»„)ä¸fiber(é“¾è¡¨)è¿›è¡Œæ¯”å¯¹ï¼Œç”Ÿæˆå‰¯ä½œç”¨æ•°ç»„å’Œæ–°çš„fiberæ ‘çš„è¿‡ç¨‹ï¼Œå‘ç”Ÿåœ¨<code>reconciler</code>é˜¶æ®µã€‚æ¯”è¾ƒæ—¶ä¼šè¿›è¡Œéå†ï¼Œæ ¹æ®<code>type</code>å’Œ<code>key</code>æ¥åˆ¤æ–­èŠ‚ç‚¹æ˜¯å¦æœ‰æ›´æ–°ä»¥åŠæ›´æ–°çš„ç±»å‹ï¼ˆæ–°å¢ï¼Ÿä¿®æ”¹ï¼Ÿåˆ é™¤ï¼Ÿç§»åŠ¨ï¼Ÿï¼‰ï¼Œç»™è€fiberèŠ‚ç‚¹æ·»åŠ å¯¹åº”çš„æ ‡è®°</p>\n<p>æœ‰ä¸‰ä¸ªé¢„è®¾é™åˆ¶ï¼š</p>\n<ul>\n<li>åŒå±‚æ¯”è¾ƒ</li>\n<li>å…ƒç´ ç±»å‹ä¸åŒæ—¶ä¸å†å»æ¯”è¾ƒå­æ ‘ï¼Œç›´æ¥ç”Ÿæˆæ–°çš„</li>\n<li>å¯ä¸ºå…ƒç´ æ·»åŠ keyæ¥æŒ‡ç¤ºå“ªäº›å…ƒç´ åœ¨æ›´æ–°æ—¶ä¿æŒç¨³å®š</li>\n</ul>\n<p>æ ¹æ®åŒçº§èŠ‚ç‚¹ä¸åŒæœ‰ä¸¤ç§ä¸åŒçš„diffç®—æ³•</p>\n<ol>\n<li>å½“newChildç±»å‹ä¸ºobjectã€numberã€stringï¼Œä»£è¡¨åŒçº§åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹</li>\n<li>å½“newChildç±»å‹ä¸ºArrayï¼ŒåŒçº§æœ‰å¤šä¸ªèŠ‚ç‚¹</li>\n</ol>\n<p>å¯¹äºå•èŠ‚ç‚¹ï¼Œæ ¹æ®<code>key</code>å’Œ<code>type</code>æ¥å†³å®šå…ƒç´ æ˜¯å¦å¤ç”¨</p>\n<p>å¯¹äºå¤šèŠ‚ç‚¹ï¼Œä¼šå‘ç”Ÿä¸¤è½®éå†</p>\n<ol>\n<li>å¤„ç†æ›´æ–°çš„èŠ‚ç‚¹</li>\n<li>å¤„ç†åˆ é™¤ã€æ·»åŠ ã€ä½ç½®å‘ç”Ÿå˜åŒ–çš„èŠ‚ç‚¹</li>\n</ol>\n<p>ç¬¬ä¸€è½®å¾ªç¯è¿‡ç¨‹ä¸­å½“èŠ‚ç‚¹ä¸èƒ½å¤ç”¨æ—¶æˆ–éå†å®Œæˆåå¼€å¯ç¬¬äºŒè½®å¾ªç¯</p>\n<h2 id=\"reactjså¯¹æ¯”vuejs\">React.jså¯¹æ¯”Vue.js</h2>\n<p>éƒ½æ˜¯ç”¨æ¥å¼€å‘ç°ä»£å‰ç«¯åº”ç”¨çš„åº“/æ¡†æ¶ï¼Œä¸¤è€…éƒ½é‡‡ç”¨äº†ä¸€ç§å«åšè™šæ‹ŸDOMçš„æœºåˆ¶æ¥æ–¹ä¾¿å¼€å‘è€…æ¥æ“ä½œçœŸå®çš„DOM</p>\n<h3 id=\"è®¾è®¡æ€æƒ³\">è®¾è®¡æ€æƒ³</h3>\n<p>Vue.jsæ˜¯ä¸€ä¸ªæ¸è¿›å¼æ¡†æ¶ï¼Œé‡‡ç”¨è‡ªåº•å‘ä¸Šå¢é‡å¼€å‘çš„æ¨¡å¼ã€‚</p>\n<p>æ‰€è°“æ¸è¿›å¼å°±æ˜¯æŠŠæ¡†æ¶åˆ†å±‚ã€‚æœ€æ ¸å¿ƒçš„éƒ¨åˆ†æ˜¯è§†å›¾å±‚æ¸²æŸ“ï¼Œç„¶åå¾€å¤–æ˜¯ç»„ä»¶ç³»ç»Ÿï¼Œåœ¨è¿™ä¸ªåŸºç¡€ä¸Šå†åŠ å…¥è·¯ç”±æœºåˆ¶ï¼Œå†åŠ å…¥çŠ¶æ€ç®¡ç†ï¼Œæœ€å¤–å±‚æ˜¯æ„å»ºå·¥å…·ã€‚æ‰€è°“åˆ†å±‚ï¼Œå°±æ˜¯è¯´æ—¢å¯ä»¥åªç”¨æœ€æ ¸å¿ƒçš„è§†å›¾å±‚æ¸²æŸ“åŠŸèƒ½å¿«é€Ÿå¼€å‘ä¸€äº›éœ€æ±‚ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€æ•´å¥—å…¨å®¶æ¡¶æ¥å¼€å‘å¤§å‹åº”ç”¨ã€‚Vue.jsç”±è¶³å¤Ÿçš„çµæ´»æ€§æ¥é€‚åº”ä¸åŒçš„éœ€æ±‚ï¼Œæ‰€ä»¥å¼€å‘è€…å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚é€‰æ‹©ä¸åŒçš„å±‚çº§ã€‚</p>\n<p>React.jsæ˜¯ç”¨æ¥æ„å»ºç•Œé¢çš„JavaScriptåº“ã€‚å…·æœ‰å£°æ˜å¼ã€ç»„ä»¶åŒ–ã€è·¨å¹³å°çš„ç‰¹ç‚¹ã€‚å¯ä»¥ç¼–å†™å…·æœ‰ç®¡ç†è‡ªèº«çŠ¶æ€èƒ½åŠ›çš„å°è£…ç»„ä»¶ï¼Œç„¶åå¯¹å…¶ç»„åˆä»¥æ„æˆå¤æ‚çš„UIã€‚æ–¹ä¾¿å¤ç”¨ã€‚ç”±äºç»„ä»¶é€»è¾‘ä½¿ç”¨JavaScriptç¼–å†™è€Œéæ¨¡æ¿ï¼Œå› æ­¤ä½ å¯ä»¥è½»æ¾åœ°åœ¨åº”ç”¨ä¸­ä¼ é€’æ•°æ®ï¼Œå¹¶ä¿æŒçŠ¶æ€ä¸DOMåˆ†ç¦»ã€‚é€šè¿‡å¼•å…¥è™šæ‹ŸDOMæ¥æ•´åˆæ›´æ–°è§†å›¾çš„æ–¹æ³•ï¼Œä½¿å¼€å‘è€…ä¸å†å»æ‰‹åŠ¨æ›´æ–°DOMï¼Œæ“ä½œæ›´é«˜æ•ˆ</p>\n<h3 id=\"å“åº”å¼\">å“åº”å¼</h3>\n<p>Vue.jsé€šè¿‡ä½¿ç”¨<code>Object.defineProperty</code>å’Œ<code>Proxy</code>æ¥åŠ«æŒæ•°æ®å˜åŒ–ï¼Œå½“æ›´æ–°æ•°æ®çš„æ—¶å€™è¿›è¡ŒDOM-DIFFï¼Œæ›´æ–°è§†å›¾ã€‚æ­¤å¤–ï¼ŒVue.jsé€šè¿‡<code>v-model</code>è¿™ä¸€è¯­æ³•ç³–æŒ‡ä»¤å¯å®ç°åŒå‘æ•°æ®ç»‘å®šåŠŸèƒ½</p>\n<p>React.jsåœ¨æ¥æ”¶åˆ°ç”¨æˆ·çŠ¶æ€æ”¹å˜é€šçŸ¥åï¼Œä¼šæ ¹æ®å½“å‰æ¸²æŸ“æ ‘ï¼Œç»“åˆæœ€æ–°çš„çŠ¶æ€æ”¹å˜ï¼Œé€šè¿‡Diffç®—æ³•ï¼Œè®¡ç®—å‡ºæ ‘ä¸­å˜åŒ–çš„éƒ¨åˆ†ï¼Œç„¶ååªæ›´æ–°å˜åŒ–çš„éƒ¨åˆ†ï¼Œä»è€Œé¿å…æ•´æ£µæ ‘é‡æ„ï¼Œæé«˜æ€§èƒ½</p>\n<h3 id=\"ç»„ä»¶é—´æ•°æ®äº¤äº’\">ç»„ä»¶é—´æ•°æ®äº¤äº’</h3>\n<p>Vue.jsä¸­çˆ¶ç»„ä»¶é€šè¿‡propsä¼ é€’æ•°æ®ç»™å­ç»„ä»¶ï¼Œå­ç»„ä»¶ä½¿ç”¨$emitè§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼Œçˆ¶ç»„ä»¶ä¸­ç›‘å¬å­ç»„ä»¶çš„è‡ªå®šä¹‰äº‹ä»¶è·å–å­ç»„ä»¶ä¼ é€’æ¥çš„æ•°æ®</p>\n<p>React.jsä¸­çˆ¶ç»„ä»¶ä½¿ç”¨propsä¼ é€’æ•°æ®å’Œå›è°ƒå‡½æ•°ç»™å­ç»„ä»¶ï¼Œå­ç»„ä»¶é€šè¿‡propsä¼ ä¸‹æ¥çš„å›è°ƒå‡½æ•°è¿”å›æ•°æ®ï¼Œçˆ¶ç»„ä»¶é€šè¿‡å›è°ƒå‡½æ•°è·å–å­ç»„ä»¶ä¼ é€’ä¸Šæ¥çš„æ•°æ®</p>\n"},{"title":"å‰ç«¯æ¶æ„&è½¯å®åŠ›å¤ä¹ -æ€§èƒ½ä¼˜åŒ–","tags":["æ€§èƒ½ä¼˜åŒ–"],"categories":"2021å¤ä¹ ","description":"## æ€§èƒ½ä¼˜åŒ–\n\n### ç½‘ç»œå±‚é¢\n\n1. å‹ç¼©ä»£ç ï¼Œåˆ é™¤ä¸å¿…è¦çš„ä»£ç å’Œæ³¨é‡Šä»¥åŠç©ºæ ¼ï¼Œå°½é‡åšåˆ°æœ€å°åŒ–æ–‡ä»¶\n\n2. åˆç†çš„ä»£ç åˆå¹¶ä¸åˆ†å‰²ï¼Œé™ä½èµ„æºè¯·æ±‚æ—¶é—´\n\n3. åˆç†ä½¿ç”¨ç¼“å­˜\n\n4. é™æ€èµ„æºå­˜æ”¾cdn\n\n#### æ¸²æŸ“è¿‡ç¨‹\n\nä¼˜åŒ–domç»“æ„\n\n- cssæ–‡ä»¶æ”¾åœ¨headä¸­ï¼ŒJavaScriptæ–‡ä»¶æ”¾åœ¨bodyåº•éƒ¨\n\n  jsçš„æ‰§è¡Œä¼šé˜»ç¢renderï¼ˆä¸¤ä¸ªä¸åŒçš„çº¿ç¨‹ï¼‰\n\nä¼˜åŒ–css\n\n- å‡å°‘","createDate":"2021-06-30 05:48:56","updateDate":"2021-07-01 12:29:25","body":"<h2 id=\"æ€§èƒ½ä¼˜åŒ–\">æ€§èƒ½ä¼˜åŒ–</h2>\n<h3 id=\"ç½‘ç»œå±‚é¢\">ç½‘ç»œå±‚é¢</h3>\n<ol>\n<li><p>å‹ç¼©ä»£ç ï¼Œåˆ é™¤ä¸å¿…è¦çš„ä»£ç å’Œæ³¨é‡Šä»¥åŠç©ºæ ¼ï¼Œå°½é‡åšåˆ°æœ€å°åŒ–æ–‡ä»¶</p>\n</li>\n<li><p>åˆç†çš„ä»£ç åˆå¹¶ä¸åˆ†å‰²ï¼Œé™ä½èµ„æºè¯·æ±‚æ—¶é—´</p>\n</li>\n<li><p>åˆç†ä½¿ç”¨ç¼“å­˜</p>\n</li>\n<li><p>é™æ€èµ„æºå­˜æ”¾cdn</p>\n</li>\n</ol>\n<h4 id=\"æ¸²æŸ“è¿‡ç¨‹\">æ¸²æŸ“è¿‡ç¨‹</h4>\n<p>ä¼˜åŒ–domç»“æ„</p>\n<ul>\n<li><p>cssæ–‡ä»¶æ”¾åœ¨headä¸­ï¼ŒJavaScriptæ–‡ä»¶æ”¾åœ¨bodyåº•éƒ¨</p>\n<p>jsçš„æ‰§è¡Œä¼šé˜»ç¢renderï¼ˆä¸¤ä¸ªä¸åŒçš„çº¿ç¨‹ï¼‰</p>\n</li>\n</ul>\n<p>ä¼˜åŒ–css</p>\n<ul>\n<li><p>å‡å°‘é‡ç»˜å›æµ</p>\n<p>é‡ç»˜ä¼šåœ¨è®¾ç½®èŠ‚ç‚¹æ ·å¼æ—¶é¢‘ç¹å‡ºç°ï¼ŒåŒæ—¶ä¹Ÿä¼šå¾ˆå¤§ç¨‹åº¦ä¸Šå½±å“æ€§èƒ½ï¼Œé‡ç»˜æ˜¯å½“èŠ‚ç‚¹éœ€è¦æ›´æ”¹å¤–è§‚è€Œä¸ä¼šå½±å“å¸ƒå±€çš„æ—¶å€™å‘ç”Ÿï¼Œæ¯”å¦‚æ”¹å˜ color å°±å«é‡ç»˜\nå›æµæ˜¯å¸ƒå±€æˆ–è€…å‡ ä½•å±æ€§éœ€è¦æ”¹å˜å°±ç§°ä¸ºå›æµï¼Œå›æµå¿…ç„¶ä¼šå¼•èµ·é‡ç»˜ï¼Œé‡ç»˜ä¸ä¸€å®šä¸ºå¼•å‘å›æµ</p>\n<ol>\n<li>ä½¿ç”¨transformä»£æ›¿top</li>\n<li>ä½¿ç”¨visibilityä»£æ›¿display:none</li>\n<li>ç›´æ¥æ”¹å˜classNameï¼ˆæŠŠè¦ä¿®æ”¹çš„æ ·å¼é›†ä¸­åˆ°ä¸€ä¸ªclasså†…ç»Ÿä¸€ä¿®æ”¹ï¼‰</li>\n<li>é¿å…ä½¿ç”¨tableå¸ƒå±€ï¼ˆå°½é‡ä¸è¦ä½¿ç”¨tableå¸ƒå±€ã€‚å¦‚æœæ²¡æœ‰å®šå®½ï¼Œè¡¨æ ¼ä¸€åˆ—çš„å®½åº¦åˆ™ç”±æœ€å®½çš„ä¸€åˆ—å†³å®šï¼Œé‚£ä¸ªå¾ˆå¯èƒ½åœ¨æœ€åä¸€è¡Œçš„å®½åº¦è¶…å‡ºä¹‹å‰çš„åˆ—å®½ï¼Œå¼•èµ·æ•´ä½“å›æµé€ æˆtableå¯èƒ½éœ€è¦å¤šæ¬¡è®¡ç®—æ‰èƒ½ç¡®å®š- å¥½å…¶åœ¨æ¸²æŸ“æ ‘ä¸­èŠ‚ç‚¹çš„å±æ€§ï¼‰</li>\n</ol>\n</li>\n<li><p>æ‰å¹³åŒ–cssé€‰æ‹©å™¨ï¼Œé¿å…åµŒå¥—è¿‡æ·±</p>\n<p>é€‰æ‹©å™¨åµŒå¥—ä¸è¶…è¿‡ä¸‰çº§</p>\n</li>\n</ul>\n<p>ä¼˜åŒ–JavaScript</p>\n<ul>\n<li><p>äº‹ä»¶å§”æ‰˜ï¼ˆ<strong>æ…ç”¨ï¼Œå­˜åœ¨å…¼å®¹æ€§</strong>ï¼‰ï¼Œå‡å°‘äº‹ä»¶ç»‘å®š</p>\n</li>\n<li><p>åˆç†æ›´æ–°dom</p>\n<ol>\n<li><p>domç¦»çº¿æ“ä½œ</p>\n</li>\n<li><p><a href=\"https://blog.mrrs.top/blog/view/5f68c0ee41416660fc5c4a3a\">å¼‚æ­¥æ›´æ–°ï¼ˆåŒ…è£…æˆmicroä»»åŠ¡ï¼‰</a></p>\n</li>\n</ol>\n</li>\n<li><p>å‡å°‘é‡ç»˜å›æµ</p>\n<p>ä¸€äº›apiä¼šå¼•èµ·å›æµï¼ˆgetBoundingClientRect/getComputedStyle/clientTop/scrollTop/offsetTopï¼‰ï¼Œé¿å…é¢‘ç¹ä½¿ç”¨</p>\n</li>\n</ul>\n<h2 id=\"å¼€å‘å·¥å…·ä¼˜åŒ–\">å¼€å‘å·¥å…·ä¼˜åŒ–</h2>\n<p>ä½¿ç”¨ä¸€ç³»åˆ—å·¥å…·ä½¿å¾—å¼€å‘æ›´åŠ æ–¹ä¾¿ã€é«˜æ•ˆ</p>\n<h3 id=\"ä½¿ç”¨webpackæ‰“åŒ…ä»£ç \">ä½¿ç”¨webpackæ‰“åŒ…ä»£ç </h3>\n<p><img src=\"https://pics.sdoprofile.com/sdo5/M01/A1/13/CoEpPGAc-0aAIGWzABDaeq_2mCc412_x.png\" alt=\"ä½¿ç”¨webpackæ‰“åŒ…ä»£ç \"></p>\n<ul>\n<li><p>ç‰ˆæœ¬å·é—®é¢˜</p>\n<p>æ‰“åŒ…åèµ„æºæ–‡ä»¶åè‡ªåŠ¨æ·»åŠ 8ä½hashå€¼</p>\n</li>\n<li><p>ä»£ç å‹ç¼©/æ··æ·†</p>\n<p>ä½¿ç”¨webpackæ’ä»¶å‹ç¼©/æ··æ·†ä»£ç ï¼Œå‡å°æ–‡ä»¶ä½“ç§¯</p>\n</li>\n</ul>\n<h3 id=\"ä½¿ç”¨babelå¤„ç†å…¼å®¹æ€§\">ä½¿ç”¨babelå¤„ç†å…¼å®¹æ€§</h3>\n<p>å¯ä»¥ä½¿ç”¨es6+é«˜çº§è¯­æ³•è¿›è¡Œå¼€å‘</p>\n<h3 id=\"ä½¿ç”¨eslintè§„èŒƒä»£ç \">ä½¿ç”¨eslintè§„èŒƒä»£ç </h3>\n<p>å‚è€ƒï¼š</p>\n<ul>\n<li><a href=\"https://web.dev\">web dev</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/98880815\">Webæ€§èƒ½é¢†åŸŸå¸¸è§çš„ä¸“ä¸šæœ¯è¯­</a></li>\n<li><a href=\"https://blog.mrrs.top/blog/view/5f68c0ee414166469a5c4a38\">æµè§ˆå™¨ç›¸å…³-æ¸²æŸ“</a></li>\n<li><a href=\"https://blog.mrrs.top/blog/view/5f68c0ee41416663715c4a39\">æµè§ˆå™¨ç›¸å…³-æ¨¡å‹</a></li>\n<li><a href=\"https://blog.mrrs.top/blog/view/5f68c0ee41416660fc5c4a3a\">JavaScript-æ‰§è¡Œæœºåˆ¶</a></li>\n</ul>\n"},{"title":"CSSå¤ä¹ -0","tags":["CSS"],"categories":"2021å¤ä¹ ","description":"## flexç»„åˆå±æ€§\n\n``` css\nflex: 1 1 100px;\n```\n\næ˜¯ä¸‹é¢ä¸‰ä¸ªå±æ€§çš„ç¼©å†™ï¼š\n\n``` css\n/* æŒ‡å®šäº†flexå®¹å™¨ä¸­å‰©ä½™ç©ºé—´çš„å¤šå°‘åº”è¯¥åˆ†é…ç»™é¡¹ç›®ï¼ˆflexå¢é•¿ç³»æ•°ï¼‰ */\nflex-grow: 1;\n/*  flex å…ƒç´ çš„æ”¶ç¼©è§„åˆ™ã€‚flex å…ƒç´ ä»…åœ¨é»˜è®¤å®½åº¦ä¹‹å’Œå¤§äºå®¹å™¨çš„æ—¶å€™æ‰ä¼šå‘ç”Ÿæ”¶ç¼©ï¼Œå…¶æ”¶ç¼©çš„å¤§å°æ˜¯ä¾æ® flex-shrink çš„å€¼ */\nflex-","createDate":"2021-05-19 14:07:45","updateDate":"2021-06-30 10:32:57","body":"<h2 id=\"flexç»„åˆå±æ€§\">flexç»„åˆå±æ€§</h2>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-attribute\">flex</span>: <span class=\"hljs-number\">1</span> <span class=\"hljs-number\">1</span> <span class=\"hljs-number\">100px</span>;\n</code></pre>\n<p>æ˜¯ä¸‹é¢ä¸‰ä¸ªå±æ€§çš„ç¼©å†™ï¼š</p>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-comment\">/* æŒ‡å®šäº†flexå®¹å™¨ä¸­å‰©ä½™ç©ºé—´çš„å¤šå°‘åº”è¯¥åˆ†é…ç»™é¡¹ç›®ï¼ˆflexå¢é•¿ç³»æ•°ï¼‰ */</span>\n<span class=\"hljs-attribute\">flex-grow</span>: <span class=\"hljs-number\">1</span>;\n<span class=\"hljs-comment\">/*  flex å…ƒç´ çš„æ”¶ç¼©è§„åˆ™ã€‚flex å…ƒç´ ä»…åœ¨é»˜è®¤å®½åº¦ä¹‹å’Œå¤§äºå®¹å™¨çš„æ—¶å€™æ‰ä¼šå‘ç”Ÿæ”¶ç¼©ï¼Œå…¶æ”¶ç¼©çš„å¤§å°æ˜¯ä¾æ® flex-shrink çš„å€¼ */</span>\n<span class=\"hljs-attribute\">flex-shrink</span>: <span class=\"hljs-number\">1</span>;\n<span class=\"hljs-comment\">/* æŒ‡å®šäº† flex å…ƒç´ åœ¨ä¸»è½´æ–¹å‘ä¸Šçš„åˆå§‹å¤§å° */</span>\n<span class=\"hljs-attribute\">flex-basis</span>: <span class=\"hljs-number\">100px</span>;\n</code></pre>\n<p>ä¸åŒç»„åˆæ‰€ä»£è¡¨çš„æ„ä¹‰ï¼š</p>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-comment\">/* å…³é”®å­—å€¼ */</span>\n<span class=\"hljs-attribute\">flex</span>: auto;\n<span class=\"hljs-attribute\">flex</span>: initial;\n<span class=\"hljs-attribute\">flex</span>: none;\n\n<span class=\"hljs-comment\">/* ä¸€ä¸ªå€¼, æ— å•ä½æ•°å­—: flex-grow */</span>\n<span class=\"hljs-attribute\">flex</span>: <span class=\"hljs-number\">2</span>;\n\n<span class=\"hljs-comment\">/* ä¸€ä¸ªå€¼, width/height: flex-basis */</span>\n<span class=\"hljs-attribute\">flex</span>: <span class=\"hljs-number\">10em</span>;\n<span class=\"hljs-attribute\">flex</span>: <span class=\"hljs-number\">30px</span>;\n<span class=\"hljs-attribute\">flex</span>: min-content;\n\n<span class=\"hljs-comment\">/* ä¸¤ä¸ªå€¼: flex-grow | flex-basis */</span>\n<span class=\"hljs-attribute\">flex</span>: <span class=\"hljs-number\">1</span> <span class=\"hljs-number\">30px</span>;\n\n<span class=\"hljs-comment\">/* ä¸¤ä¸ªå€¼: flex-grow | flex-shrink */</span>\n<span class=\"hljs-attribute\">flex</span>: <span class=\"hljs-number\">2</span> <span class=\"hljs-number\">2</span>;\n\n<span class=\"hljs-comment\">/* ä¸‰ä¸ªå€¼: flex-grow | flex-shrink | flex-basis */</span>\n<span class=\"hljs-attribute\">flex</span>: <span class=\"hljs-number\">2</span> <span class=\"hljs-number\">2</span> <span class=\"hljs-number\">10%</span>;\n\n<span class=\"hljs-comment\">/*å…¨å±€å±æ€§å€¼ */</span>\n<span class=\"hljs-attribute\">flex</span>: inherit;\n<span class=\"hljs-attribute\">flex</span>: initial;\n<span class=\"hljs-attribute\">flex</span>: unset;\n</code></pre>\n<h2 id=\"media-query\">media query</h2>\n<p><code>&lt;link rel=&quot;stylesheet&quot; media=&quot;screen and (min-width:600px) and (max-width:900px)&quot; href=&quot;style.css&quot; type=&quot;text/css&quot; /&gt; </code></p>\n<p><code>max-width</code>: å±å¹•å¤§å°;</p>\n<p><code>max-device-width</code>: åˆ†è¾¨ç‡å¤§å°</p>\n<h2 id=\"offsetscreenscroll-xxx\">offset/screen/scroll xxx</h2>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/offset.png\" alt=\"offset/screen/scroll\"></p>\n<h2 id=\"å±…ä¸­\">å±…ä¸­</h2>\n<ul>\n<li><code>grid</code>å¸ƒå±€<pre><code class=\"hljs language-css\"><span class=\"hljs-attribute\">display</span>: grid;\nplace-items: center;\n</code></pre>\n</li>\n</ul>\n<h2 id=\"bfc\">BFC</h2>\n<blockquote>\n<p>å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼ˆBlock Formatting Contextï¼ŒBFCï¼‰ æ˜¯Webé¡µé¢çš„å¯è§†CSSæ¸²æŸ“çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯å—ç›’å­çš„å¸ƒå±€è¿‡ç¨‹å‘ç”Ÿçš„åŒºåŸŸï¼Œä¹Ÿæ˜¯æµ®åŠ¨å…ƒç´ ä¸å…¶ä»–å…ƒç´ äº¤äº’çš„åŒºåŸŸ</p>\n</blockquote>\n<p>é€šä¿—è§£é‡Šï¼š</p>\n<ol>\n<li>ä¸€ä¸ªç‹¬ç«‹çš„å¸ƒå±€ç¯å¢ƒã€‚BFCå†…éƒ¨çš„å…ƒç´ å¸ƒå±€ä¸å¤–éƒ¨äº’ä¸å½±å“ã€‚</li>\n<li>ä¸€ä¸ªå·¥å…·ã€‚å¯ä»¥é€šè¿‡ä¸€äº›æ¡ä»¶è§¦å‘BFCï¼Œä»è€Œå®ç°å¸ƒå±€ä¸Šçš„éœ€æ±‚æˆ–è§£å†³ä¸€äº›é—®é¢˜</li>\n</ol>\n<p>BFCçš„è§¦å‘æ¡ä»¶ï¼š</p>\n<ul>\n<li>æ ¹å…ƒç´ <code>&lt;html&gt;&lt;/html&gt;</code></li>\n<li><code>float</code>ä¸ä¸º<code>none</code></li>\n<li><code>overflow</code>ä¸ä¸º<code>visible</code></li>\n<li><code>display</code>ä¸º<code>inline-block</code>ã€<code>table-cell</code>ã€<code>table-caption</code>ã€<code>flex</code>ã€<code>inline-flex</code></li>\n<li><code>position</code>ä¸º<code>absoulte</code>ã€<code>fixed</code></li>\n</ul>\n<p>BFCçš„ç‰¹æ€§ï¼š</p>\n<ul>\n<li>å±äºåŒä¸€ä¸ªBFCçš„ä¸¤ä¸ª<strong>ç›¸é‚»</strong>å®¹å™¨çš„<strong>ä¸Šä¸‹</strong><code>margin</code>ä¼šå‘ç”Ÿé‡å </li>\n<li>BFCçš„é«˜åº¦åŒ…æ‹¬å†…éƒ¨çš„æµ®åŠ¨å…ƒç´ </li>\n<li>BFCä¸ä¼šä¸æµ®åŠ¨å…ƒç´ å‘ç”Ÿé‡å </li>\n</ul>\n<p>æ¸…é™¤æµ®åŠ¨ï¼š</p>\n<p>çˆ¶å…ƒç´ è®¾ç½®<code>overflow: hidden</code>æˆ–<code>clear: both</code></p>\n<h2 id=\"link-vs-import\">link vs @import</h2>\n<ul>\n<li><code>link</code>æ˜¯HTMLæ–¹å¼ï¼Œ<code>@import</code>æ˜¯cssæ–¹å¼</li>\n<li><code>link</code>æœ€å¤§é™åº¦æ”¯æŒå¹¶è¡Œä¸‹è½½ï¼Œ<code>@imoprt</code>è¿‡å¤šåµŒå¥—å¯¼è‡´ä¸²è¡Œä¸‹è½½</li>\n<li><code>link</code>å¯ä»¥é€šè¿‡<code>rel=&quot;alternate stylesheet&quot;</code>æŒ‡å®šå€™é€‰æ ·å¼</li>\n<li>æµè§ˆå™¨å¯¹äº<code>link</code>çš„æ”¯æŒæ—©äº<code>@import</code></li>\n<li><code>@import</code>å¿…é¡»æ”¾åœ¨cssé¡¶éƒ¨</li>\n</ul>\n<h2 id=\"flexå®½åº¦é—®é¢˜\">flexå®½åº¦é—®é¢˜</h2>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;container&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;left&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;right&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">style</span>&gt;</span><span class=\"language-css\"> \n<span class=\"hljs-selector-class\">.container</span>{ \n    <span class=\"hljs-comment\">/* width: 600px; */</span>\n    <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">400px</span>; \n    <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">300px</span>; <span class=\"hljs-attribute\">display</span>:flex; \n} \n<span class=\"hljs-selector-class\">.left</span>{ \n    <span class=\"hljs-attribute\">flex</span>: <span class=\"hljs-number\">1</span> <span class=\"hljs-number\">2</span> <span class=\"hljs-number\">300px</span>;\n} \n<span class=\"hljs-selector-class\">.right</span>{ \n    <span class=\"hljs-attribute\">flex</span>: <span class=\"hljs-number\">2</span> <span class=\"hljs-number\">1</span> <span class=\"hljs-number\">200px</span>;\n} \n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">style</span>&gt;</span>\n</code></pre>\n<p><code>.left</code> + <code>.right</code>çš„å®½åº¦å·²ç»è¶…è¿‡<code>.container</code>çš„å®½åº¦äº†ï¼Œæ‰€ä»¥ä¼šå‘ç”Ÿç¼©æ”¾ï¼Œ<code>flex-grow</code>ä¸èµ·ä½œç”¨ï¼Œ<code>flex-shrink</code>å’Œ<code>width</code>(<code>flex-basis</code>)å†³å®šå…·ä½“çš„å¤§å°</p>\n<p>å…·ä½“çš„è®¡ç®—å…¬å¼ï¼š</p>\n<pre><code class=\"hljs language-js\">\nitemSkrinkScaledWidth = flex-shrink * width\n\nshrinkRatio = itemSkrinkScaledWidth / totalShrinkScaledWidth\n\nrealWidth = width - shrinkRatio * negativeWidth \n\n<span class=\"hljs-comment\">// itemSkrinkScaledWidth é¡¹ç›®æ”¶ç¼©æ¯”ä¾‹å®½åº¦ï¼Œflex-shrink * width</span>\n<span class=\"hljs-comment\">// totalShrinkScaledWidth æ€»çš„æ”¶ç¼©æ¯”ä¾‹å®½åº¦ï¼Œtotal(flex-shrink * width)</span>\n<span class=\"hljs-comment\">// shrinkRatio æ”¶ç¼©æ¯”ä¾‹</span>\n<span class=\"hljs-comment\">// negativeWidth æº¢å‡ºçš„å°ºå¯¸</span>\n<span class=\"hljs-comment\">// width æ‰€è®¾ç½®çš„å¤§å°ï¼Œwidthæˆ–flex-basis</span>\n<span class=\"hljs-comment\">// realWidth çœŸå®å¤§å°</span>\n</code></pre>\n<p>æ‰€ä»¥</p>\n<pre><code class=\"hljs language-js\">leftWidth = <span class=\"hljs-number\">300</span> - (<span class=\"hljs-number\">2</span> * <span class=\"hljs-number\">300</span> / (<span class=\"hljs-number\">2</span> * <span class=\"hljs-number\">300</span> + <span class=\"hljs-number\">1</span> * <span class=\"hljs-number\">200</span>)) * <span class=\"hljs-number\">100</span> = <span class=\"hljs-number\">225</span>\nrightWidth = <span class=\"hljs-number\">200</span> - (<span class=\"hljs-number\">1</span> * <span class=\"hljs-number\">200</span> / (<span class=\"hljs-number\">2</span> * <span class=\"hljs-number\">300</span> + <span class=\"hljs-number\">1</span> * <span class=\"hljs-number\">200</span>)) * <span class=\"hljs-number\">100</span> = <span class=\"hljs-number\">175</span>\n</code></pre>\n<p>æ³¨æ„ï¼šç»æµ‹è¯•ï¼Œä½¿ç”¨<code>min-width</code>è®¾ç½®æ—¶ä¸Šè¿°è®¡ç®—æ–¹æ³•å¤±æ•ˆï¼Œå¤§å°æ­£å¸¸ï¼Œä¸å‘ç”Ÿç¼©å°</p>\n<h2 id=\"css3æ–°ç‰¹æ€§\">CSS3æ–°ç‰¹æ€§</h2>\n<ul>\n<li>é€‰æ‹©å™¨ <code>:nth-child(x)</code></li>\n<li>æ ·å¼<code>flex</code> <code>grid</code> <code>filter</code> <code>transform</code> <code>box-sizing</code></li>\n<li>åŠ¨ç”»<code>animation</code></li>\n<li>é¢œè‰²<code>rgba</code></li>\n</ul>\n<h2 id=\"æ¸…é™¤æµ®åŠ¨\">æ¸…é™¤æµ®åŠ¨</h2>\n<h3 id=\"after--clear-both\">::after + clear: both</h3>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-selector-class\">.clear-float</span><span class=\"hljs-selector-pseudo\">::after</span> {\n  <span class=\"hljs-attribute\">content</span>: <span class=\"hljs-string\">&quot;020&quot;</span>; \n  <span class=\"hljs-attribute\">display</span>: block; \n  <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">0</span>; \n  <span class=\"hljs-attribute\">clear</span>: both; \n  <span class=\"hljs-attribute\">visibility</span>: hidden;  \n}\n</code></pre>\n<h3 id=\"overflowä¸ä¸ºnone\">overflowä¸ä¸ºnone</h3>\n<h3 id=\"çˆ¶å…ƒç´ è®¾ç½®æµ®åŠ¨\">çˆ¶å…ƒç´ è®¾ç½®æµ®åŠ¨</h3>\n<h2 id=\"åŒ¹é…å‰nä¸ªå­å…ƒç´ åŠæœ€ånä¸ªå­å…ƒç´ \">åŒ¹é…å‰Nä¸ªå­å…ƒç´ åŠæœ€åNä¸ªå­å…ƒç´ </h2>\n<p>åŒ¹é…å‰ä¸‰ä¸ª<code>:nth-child(-n+3)</code></p>\n<p>åŒ¹é…æœ€åä¸‰ä¸ª<code>:nth-last-child(-n+4)</code></p>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/flex\">MDN-flex</a></p>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Block_formatting_context\">MDN-bfc</a></p>\n<p><a href=\"https://www.cnblogs.com/qs-cnblogs/p/12349887.html\">BFCæ˜¯ä»€ä¹ˆï¼ŸBFCæœ‰ä»€ä¹ˆç”¨ï¼Ÿçœ‹å®Œå…¨æ˜ç™½</a></p>\n<p><a href=\"https://segmentfault.com/a/1190000010780991\">ä¸ªäººæ€»ç»“ï¼ˆcss3æ–°ç‰¹æ€§ï¼‰</a></p>\n"},{"title":"HTMLå¤ä¹ -0","tags":["HTML"],"categories":"2021å¤ä¹ ","description":"## èŠ‚ç‚¹å…³ç³»\n\n![èŠ‚ç‚¹å…³ç³»](http://mrrsblog.oss-cn-shanghai.aliyuncs.com/node_relation.png)\n\n## ParentNode.append/Node.appendChild\n\n- `ParentNode.append()`å…è®¸è¿½åŠ   `DOMString` å¯¹è±¡ï¼Œè€Œ `Node.appendChild()` åªæ¥å— `Node`","createDate":"2021-05-18 02:48:23","updateDate":"2021-06-29 19:07:42","body":"<h2 id=\"èŠ‚ç‚¹å…³ç³»\">èŠ‚ç‚¹å…³ç³»</h2>\n<p><img src=\"http://mrrsblog.oss-cn-shanghai.aliyuncs.com/node_relation.png\" alt=\"èŠ‚ç‚¹å…³ç³»\"></p>\n<h2 id=\"parentnodeappendnodeappendchild\">ParentNode.append/Node.appendChild</h2>\n<ul>\n<li><code>ParentNode.append()</code>å…è®¸è¿½åŠ   <code>DOMString</code> å¯¹è±¡ï¼Œè€Œ <code>Node.appendChild()</code> åªæ¥å— <code>Node</code> å¯¹è±¡</li>\n<li><code>ParentNode.append()</code> æ²¡æœ‰è¿”å›å€¼ï¼Œè€Œ <code>Node.appendChild()</code> è¿”å›è¿½åŠ çš„ <code>Node</code> å¯¹è±¡</li>\n<li><code>ParentNode.append()</code> å¯ä»¥è¿½åŠ å¤šä¸ªèŠ‚ç‚¹å’Œå­—ç¬¦ä¸²ï¼Œè€Œ <code>Node.appendChild()</code> åªèƒ½è¿½åŠ ä¸€ä¸ªèŠ‚ç‚¹</li>\n</ul>\n<h2 id=\"cookie\">cookie</h2>\n<p><img src=\"http://mrrsblog.oss-cn-shanghai.aliyuncs.com/cookie_0.png\" alt=\"cookieæ ¼å¼\"></p>\n<ul>\n<li>Name: <code>cookie</code>çš„åå­—</li>\n<li>Value: <code>cookie</code>çš„å€¼</li>\n<li>Domain: æŒ‡å®šäº†å“ªäº›åŸŸåå¯ä»¥æ¥æ”¶<code>cookie</code>ã€‚å¦‚æœä¸æŒ‡å®šï¼Œé»˜è®¤ä¸º<code>origin</code>ï¼Œä¸åŒ…å«å­åŸŸåï¼Œå¦‚æœåˆ¶å®šåˆ™åŒ…å«å­åŸŸå</li>\n<li>Path: åˆ¶å®šäº†åŸŸåä¸‹çš„å“ªäº›è·¯å¾„å¯ä»¥æ¥å—<code>cookie</code>ã€‚å­è·¯å¾„ä¹Ÿä¼šè¢«åŒ¹é…</li>\n<li>Expires/Max-Age: å®šä¹‰<code>cookie</code>çš„ç”Ÿå‘½å‘¨æœŸ</li>\n<li>HttpOnly: é™åˆ¶JavaScripté€šè¿‡<code>document.cookie</code>è®¿é—®</li>\n<li>Secure: æ ‡è®°ä¸º<code>Secure</code>çš„<code>cookie</code>åªåº”é€šè¿‡è¢«HTTPSåè®®åŠ å¯†è¿‡çš„è¯·æ±‚å‘é€ç»™æœåŠ¡ç«¯</li>\n<li>SameSite: è®¾ç½®æŸä¸ª<code>cookie</code>åœ¨è·¨ç«™è¯·æ±‚æ—¶ä¼šä¸ä¼šè¢«å‘é€<ul>\n<li>None æµè§ˆå™¨ä¼šåœ¨åŒç«™è¯·æ±‚ã€è·¨ç«™è¯·æ±‚ä¸‹ç»§ç»­å‘é€<code>cookie</code></li>\n<li>Strict æµè§ˆå™¨å°†åªåœ¨è®¿é—®ç›¸åŒç«™ç‚¹æ—¶å‘é€<code>cookie</code></li>\n<li>Lax ä¸Strictç±»ä¼¼ï¼Œä½†ä¸åŒ…æ‹¬ç”¨æˆ·ä»å¤–éƒ¨ç«™ç‚¹å¯¼èˆªè‡³è¯¥URL</li>\n</ul>\n</li>\n<li>Priotity: chromeçš„ææ¡ˆï¼Œ<code>Low/Medium/Hight</code>ï¼Œä½ä¼˜å…ˆçº§çš„<code>cookie</code>ä¼šåœ¨<code>cookie</code>æ•°é‡è¶…å‡ºæ—¶è¢«ç§»é™¤</li>\n</ul>\n<p>ä¸è®¾ç½®<code>max-age</code>å’Œ<code>expires</code>ï¼Œæ­¤<code>cookie</code>å°±æ˜¯ä¼šè¯çº§åˆ«çš„</p>\n<h2 id=\"äº‹ä»¶æœºåˆ¶\">äº‹ä»¶æœºåˆ¶</h2>\n<p>IE äº‹ä»¶æµè¢«ç§°ä¸º<strong>äº‹ä»¶å†’æ³¡</strong>ã€‚äº‹ä»¶ä»æœ€å…·ä½“çš„å…ƒç´ ï¼ˆæ–‡æ¡£æ ‘ä¸­æœ€æ·±çš„èŠ‚ç‚¹ï¼‰å¼€å§‹è§¦å‘ï¼Œç„¶åå‘ä¸Šä¼ æ’­è‡³æ²¡æœ‰é‚£ä¹ˆå…·ä½“çš„å…ƒç´ ï¼ˆæ–‡æ¡£ï¼‰</p>\n<p>Netscape Communicatoræå‡º<strong>äº‹ä»¶æ•è·</strong>æœºåˆ¶ã€‚æœ€ä¸å…·ä½“çš„èŠ‚ç‚¹åº”è¯¥æœ€å…ˆæ”¶åˆ°äº‹ä»¶ï¼Œè€Œæœ€å…·ä½“çš„èŠ‚ç‚¹åº”è¯¥æœ€åæ”¶åˆ°äº‹ä»¶ã€‚äº‹ä»¶æ•è·å®é™…ä¸Šæ˜¯ä¸ºäº†åœ¨äº‹ä»¶åˆ°è¾¾æœ€ç»ˆç›®æ ‡å‰æ‹¦æˆªäº‹ä»¶</p>\n<p>DOM2 Eventsè§„èŒƒè§„å®šäº‹ä»¶æµåˆ†ä¸ºä¸ªé˜¶æ®µï¼šäº‹ä»¶æ•è·ã€åˆ°è¾¾äº‹ä»¶ç›®æ ‡ã€äº‹ä»¶å†’æ³¡ã€‚äº‹ä»¶æ•è·æœ€å…ˆå‘ç”Ÿï¼Œä¸ºæå‰æ‹¦æˆªäº‹ä»¶æä¾›äº†å¯èƒ½ã€‚ç„¶åï¼Œå®é™…çš„ç›®æ ‡å…ƒç´ æ¥æ”¶åˆ°äº‹ä»¶ã€‚æœ€åä¸€ä¸ªé˜¶æ®µæ˜¯å†’æ³¡ï¼Œæœ€è¿Ÿè¦åœ¨è¿™ä¸ªé˜¶æ®µå“åº”äº‹ä»¶ã€‚</p>\n<p>æ·»åŠ /ç§»é™¤äº‹ä»¶å¤„ç†ç¨‹åºï¼š</p>\n<ul>\n<li>DOM0<pre><code class=\"hljs language-js\">element.<span class=\"hljs-property\">onclick</span> = <span class=\"hljs-function\">() =&gt;</span> {};\nelement.<span class=\"hljs-property\">onclick</span> = <span class=\"hljs-literal\">null</span>;\n\n<span class=\"hljs-comment\">// åŒä¸€äº‹ä»¶ä¸èƒ½æ·»åŠ å¤šä¸ªå¤„ç†å‡½æ•°</span>\n</code></pre>\n</li>\n<li>DOM2<pre><code class=\"hljs language-js\">element.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&#x27;click&#x27;</span>, handler);\nelement.<span class=\"hljs-title function_\">removeEventListener</span>(<span class=\"hljs-string\">&#x27;click&#x27;</span>, handler);\n</code></pre>\n</li>\n</ul>\n<h2 id=\"mutationobserver\">MutationObserver</h2>\n<p>å¯ä»¥åœ¨DOMè¢«ä¿®æ”¹æ—¶å¼‚æ­¥æ‰§è¡Œå›è°ƒï¼Œä½¿ç”¨<code>MutationObserver</code>å¯ä»¥è§‚å¯Ÿæ•´ä¸ªæ–‡æ¡£ã€DOMæ ‘çš„ä¸€éƒ¨åˆ†ï¼Œæˆ–æŸä¸ªå…ƒç´ ã€‚æ­¤å¤–è¿˜å¯ä»¥è§‚å¯Ÿå…ƒç´ å±æ€§ã€å­èŠ‚ç‚¹ã€æ–‡æœ¬</p>\n<pre><code class=\"hljs language-jsx\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">App</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-keyword\">const</span> elementRef = <span class=\"hljs-title function_\">useRef</span>(<span class=\"hljs-literal\">null</span>);\n\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">onElementClick</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n    elementRef.<span class=\"hljs-property\">current</span>.<span class=\"hljs-property\">name</span> = <span class=\"hljs-string\">&#x27;observer&#x27;</span>;\n  };\n\n  <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> observer = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">MutationObserver</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">record</span>) =&gt;</span> {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(record[<span class=\"hljs-number\">0</span>].<span class=\"hljs-property\">target</span>.<span class=\"hljs-property\">name</span>);\n    });\n    observer.<span class=\"hljs-title function_\">observe</span>(elementRef.<span class=\"hljs-property\">current</span>, { <span class=\"hljs-attr\">attributes</span>: <span class=\"hljs-literal\">true</span> });\n  }, []);\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">{elementRef}</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;button&quot;</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{onElementClick}</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;button&quot;</span>&gt;</span>click me<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span></span>\n  );\n};\n</code></pre>\n<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œåªè¦è¢«è§‚å¯Ÿå…ƒç´ ä¸è¢«åƒåœ¾å›æ”¶ï¼ŒMutationObserverçš„å›è°ƒå°±ä¼šå“åº”DOMå˜åŒ–äº‹ä»¶ï¼Œä»è€Œè¢«æ‰§è¡Œï¼Œè¦æå‰ç»ˆæ­¢æ‰§è¡Œå›è°ƒï¼Œå¯ä»¥è°ƒç”¨<code>disconnect()</code>æ–¹æ³•ã€‚</p>\n<p><code>observe</code>é…ç½®</p>\n<table>\n<thead>\n<tr>\n<th>å±æ€§</th>\n<th>ç±»å‹</th>\n<th>è¯´æ˜</th>\n<th>é»˜è®¤å€¼</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>subtree</td>\n<td><code>boolean</code></td>\n<td>è¡¨ç¤ºé™¤äº†ç›®æ ‡èŠ‚ç‚¹ï¼Œæ˜¯å¦è§‚å¯Ÿç›®æ ‡èŠ‚ç‚¹çš„å­æ ‘(åä»£)</br>å¦‚æœæ˜¯<code>false</code>åˆ™åªè§‚å¯Ÿç›®æ ‡èŠ‚ç‚¹çš„å˜åŒ–</br>å¦‚æœæ˜¯<code>true</code>åˆ™è§‚å¯Ÿç›®æ ‡é˜¶æ®µåŠå…¶æ•´ä¸ªå­æ ‘</td>\n<td><code>false</code></td>\n</tr>\n<tr>\n<td>attributes</td>\n<td><code>boolean</code></td>\n<td>è¡¨ç¤ºæ˜¯å¦è§‚å¯Ÿç›®æ ‡é˜¶æ®µçš„å±æ€§å˜åŒ–</td>\n<td><code>true</code></td>\n</tr>\n<tr>\n<td>attributeFilter</td>\n<td><code>Array&lt;string&gt;/boonean</code></td>\n<td>è¡¨ç¤ºè¦è§‚å¯Ÿå“ªäº›å±æ€§çš„å˜åŒ–</br>æŠŠè¿™ä¸ªå€¼ç½®ä¸º<code>true</code>ä¹Ÿä¼šå°†<code>attributes</code>çš„å€¼è½¬æ¢ä¸º<code>true</code></td>\n<td><code>true</code></td>\n</tr>\n<tr>\n<td>attributeOldValue</td>\n<td><code>boolean</code></td>\n<td>è¡¨ç¤º<code>MutationObserver</code>æ˜¯å¦è®°å½•å˜åŒ–ä¹‹å‰çš„å±æ€§å€¼</br>æŠŠè¿™ä¸ªå€¼ç½®ä¸º<code>true</code>ä¹Ÿä¼šå°†<code>attributes</code>ç½®ä¸º<code>true</code></td>\n<td><code>false</code></td>\n</tr>\n<tr>\n<td>characterData</td>\n<td><code>boolean</code></td>\n<td>è¡¨ç¤ºä¿®æ”¹å­—ç¬¦æ•°æ®æ˜¯å¦è§¦å‘å˜åŒ–äº‹ä»¶</td>\n<td><code>false</code></td>\n</tr>\n<tr>\n<td>characterDataOldValue</td>\n<td><code>boolean</code></td>\n<td>è¡¨ç¤º<code>MutationObserver</code>æ˜¯å¦è®°å½•å˜åŒ–ä¹‹å‰çš„å­—ç¬¦æ•°æ®</br>æŠŠè¿™ä¸ªå€¼ç½®ä¸º<code>true</code>ä¹Ÿä¼šå°†<code>characterData</code>çš„å€¼ç½®ä¸º<code>true</code></td>\n<td><code>false</code></td>\n</tr>\n<tr>\n<td>childList</td>\n<td><code>boolean</code></td>\n<td>è¡¨ç¤ºä¿®æ”¹ç›®æ ‡èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ˜¯å¦è§¦å‘å˜åŒ–äº‹ä»¶</td>\n<td><code>false</code></td>\n</tr>\n</tbody></table>\n<h2 id=\"nodeç±»å‹\">Nodeç±»å‹</h2>\n<p>DOM1æè¿°äº†åä¸º<code>Node</code>çš„æ¥å£ï¼Œè¿™ä¸ªæ¥å£æ˜¯æ‰€æœ‰DOMèŠ‚ç‚¹ç±»å‹éƒ½å¿…é¡»å®ç°çš„ã€‚Nodeæ¥å£åœ¨JavaScriptä¸­è¢«å®ç°ä¸º<code>Node</code>ç±»å‹ï¼Œåœ¨é™¤IEå¤–çš„æ‰€æœ‰æµè§ˆå™¨ä¸­éƒ½å¯ä»¥ç›´æ¥è®¿é—®è¿™ä¸ªç±»å‹ã€‚åœ¨JavaScriptä¸­ï¼Œæ‰€æœ‰èŠ‚ç‚¹éƒ½ç»§æ‰¿<code>Node</code>ç±»å‹ï¼Œå› æ­¤æ‰€æœ‰ç±»å‹éƒ½å…±äº«ç›¸åŒçš„åŸºæœ¬å±æ€§å’Œæ–¹æ³•</p>\n<h1 id=\"doctypeä½œç”¨\">DOCTYPEä½œç”¨</h1>\n<p>æµè§ˆå™¨ä½¿ç”¨<code>DOCTYPE</code>å£°æ˜æ¥é€‰æ‹©æ˜¯å¦ä½¿ç”¨æ›´ç¬¦åˆWebæ ‡å‡†æˆ–å…¼å®¹æ—§æµè§ˆå™¨çš„bugçš„æ¨¡å¼ã€‚ç°ä»£æµè§ˆå™¨ä¸»è¦æœ‰ä¸¤ç§æ¸²æŸ“æ¨¡å¼ï¼š</p>\n<ul>\n<li>æ€ªå¼‚æ¨¡å¼ï¼Œåˆç§°å‘åå…¼å®¹æ¨¡å¼ã€‚æ—§æµè§ˆå™¨ä½¿ç”¨çš„éæ ‡å‡†æ¸²æŸ“è§„åˆ™</li>\n<li>æ ‡å‡†æ¨¡å¼ã€‚ä¸¥æ ¼éµå®ˆW3Cæ ‡å‡†</li>\n</ul>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-comment\">&lt;!-- HTML5çš„doctypeå£°æ˜ --&gt;</span>\n<span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-keyword\">html</span>&gt;</span>\n\n<span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-keyword\">HTML</span> <span class=\"hljs-keyword\">PUBLIC</span> <span class=\"hljs-string\">&quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot;</span>\n<span class=\"hljs-string\">&quot;http://www.w3.org/TR/html4/loose.dtd&quot;</span>&gt;</span>\n\n<span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-keyword\">HTML</span> <span class=\"hljs-keyword\">PUBLIC</span> <span class=\"hljs-string\">&quot;-//W3C//DTD HTML 4.01//EN&quot;</span>\n<span class=\"hljs-string\">&quot;http://www.w3.org/TR/html4/strict.dtd&quot;</span>&gt;</span>\n\n<span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-keyword\">html</span> <span class=\"hljs-keyword\">PUBLIC</span> <span class=\"hljs-string\">&quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;</span>\n<span class=\"hljs-string\">&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;</span>&gt;</span>\n\n<span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-keyword\">html</span> <span class=\"hljs-keyword\">PUBLIC</span> <span class=\"hljs-string\">&quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;</span>\n<span class=\"hljs-string\">&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;</span>&gt;</span>\n</code></pre>\n<h2 id=\"html5æ–°ç‰¹æ€§\">HTML5æ–°ç‰¹æ€§</h2>\n<ul>\n<li>æ–°çš„æ–‡æ¡£ç±»å‹å£°æ˜(<code>DOCYPE</code>)</li>\n<li>æ–°çš„è¯­ä¹‰å…ƒç´ ï¼Œæ¯”å¦‚<code>&lt;header&gt;</code>,<code>&lt;footer&gt;</code>, <code>&lt;article&gt;</code>, <code>&lt;section&gt;</code>ç­‰</li>\n<li>æ–°çš„è¡¨å•æ§ä»¶ï¼Œæ¯”å¦‚æ•°å­—ã€æ—¥æœŸã€æ—¶é—´ã€æ—¥å†å’Œæ»‘å—</li>\n<li>å¼ºå¤§çš„å›¾åƒæ”¯æŒï¼ˆå€Ÿç”±<code>&lt;canvas&gt;</code>å’Œ<code>&lt;svg&gt;</code>ï¼‰</li>\n<li>å¼ºå¤§çš„å¤šåª’ä½“æ”¯æŒï¼ˆå€Ÿç”±<code>&lt;video&gt;</code>å’Œ<code>&lt;audio&gt;</code>ï¼‰</li>\n<li>æ–°çš„APIï¼ˆå¦‚<code>localStorage</code>ï¼‰</li>\n</ul>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/orphaned/Web/API/ParentNode/append\">MDN-append</a></p>\n"},{"title":"webpackå¤ä¹ -0","tags":["webpack"],"categories":"2021å¤ä¹ ","description":"## æ„å»ºè¿‡ç¨‹\n\n1. åˆå§‹åŒ–å‚æ•°ã€‚ä»é…ç½®æ–‡ä»¶å’Œå‘½ä»¤è¡Œè¯»å–å‚æ•°ååˆå¹¶ï¼Œå¾—åˆ°æœ€ç»ˆçš„å‚æ•°\n2. å¼€å§‹ç¼–è¯‘ã€‚ç”¨ä¸Šä¸€æ­¥å¾—åˆ°çš„å‚æ•°åˆå§‹åŒ–`Compiler`å¯¹è±¡ï¼ŒåŠ è½½æ‰€æœ‰é…ç½®çš„æ’ä»¶ï¼Œæ‰§è¡Œå¯¹è±¡çš„`run`æ–¹æ³•å¼€å§‹æ‰§è¡Œç¼–è¯‘\n3. ç¡®å®šå…¥å£ã€‚æ ¹æ®é…ç½®ä¸­çš„`entry`æ‰¾å‡ºæ‰€æœ‰çš„å…¥å£æ–‡ä»¶\n4. ç¼–è¯‘æ¨¡å—ã€‚ä»å…¥å£æ–‡ä»¶å‡ºå‘ï¼Œè°ƒç”¨æ‰€æœ‰é…ç½®çš„`loader`å¯¹æ¨¡å—è¿›è¡Œç¿»è¯‘ï¼Œå†æ‰¾å‡ºè¯¥æ¨¡å—ä¾èµ–çš„æ¨¡å—ï¼Œå†é€’å½’æœ¬æ­¥éª¤ç›´åˆ°æ‰€æœ‰å…¥","createDate":"2021-05-26 14:54:22","updateDate":"2021-06-29 18:53:40","body":"<h2 id=\"æ„å»ºè¿‡ç¨‹\">æ„å»ºè¿‡ç¨‹</h2>\n<ol>\n<li>åˆå§‹åŒ–å‚æ•°ã€‚ä»é…ç½®æ–‡ä»¶å’Œå‘½ä»¤è¡Œè¯»å–å‚æ•°ååˆå¹¶ï¼Œå¾—åˆ°æœ€ç»ˆçš„å‚æ•°</li>\n<li>å¼€å§‹ç¼–è¯‘ã€‚ç”¨ä¸Šä¸€æ­¥å¾—åˆ°çš„å‚æ•°åˆå§‹åŒ–<code>Compiler</code>å¯¹è±¡ï¼ŒåŠ è½½æ‰€æœ‰é…ç½®çš„æ’ä»¶ï¼Œæ‰§è¡Œå¯¹è±¡çš„<code>run</code>æ–¹æ³•å¼€å§‹æ‰§è¡Œç¼–è¯‘</li>\n<li>ç¡®å®šå…¥å£ã€‚æ ¹æ®é…ç½®ä¸­çš„<code>entry</code>æ‰¾å‡ºæ‰€æœ‰çš„å…¥å£æ–‡ä»¶</li>\n<li>ç¼–è¯‘æ¨¡å—ã€‚ä»å…¥å£æ–‡ä»¶å‡ºå‘ï¼Œè°ƒç”¨æ‰€æœ‰é…ç½®çš„<code>loader</code>å¯¹æ¨¡å—è¿›è¡Œç¿»è¯‘ï¼Œå†æ‰¾å‡ºè¯¥æ¨¡å—ä¾èµ–çš„æ¨¡å—ï¼Œå†é€’å½’æœ¬æ­¥éª¤ç›´åˆ°æ‰€æœ‰å…¥å£ä¾èµ–çš„æ–‡ä»¶éƒ½ç»è¿‡äº†æœ¬æ­¥éª¤çš„å¤„ç†</li>\n<li>å®Œæˆæ¨¡å—ç¼–è¯‘ã€‚åœ¨ç»è¿‡ç¬¬4æ­¥ä½¿ç”¨<code>loader</code>ç¿»è¯‘å®Œæ‰€æœ‰æ¨¡å—åï¼Œå¾—åˆ°äº†æ¯ä¸ªæ¨¡å—è¢«ç¿»è¯‘åçš„æœ€ç»ˆå†…å®¹ä»¥åŠå®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»</li>\n<li>è¾“å‡ºèµ„æºã€‚æ ¹æ®å…¥å£å’Œæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç»„è£…æˆä¸€ä¸ªä¸ªåŒ…å«å¤šä¸ªæ¨¡å—çš„<code>chunk</code>ï¼Œå†æŠŠæ¯ä¸ª<code>chunk</code>è½¬æ¢æˆä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶åŠ å…¥åˆ°è¾“å‡ºåˆ—è¡¨ï¼Œè¿™æ­¥æ˜¯å¯ä»¥ä¿®æ”¹è¾“å‡ºå†…å®¹çš„æœ€åæœºä¼š</li>\n<li>è¾“å‡ºå®Œæˆã€‚åœ¨ç¡®å®šå¥½è¾“å‡ºå†…å®¹åï¼Œæ ¹æ®é…ç½®ç¡®å®šè¾“å‡ºçš„è·¯å¾„å’Œæ–‡ä»¶åï¼ŒæŠŠæ–‡ä»¶å†…å®¹å†™å…¥åˆ°æ–‡ä»¶å†…</li>\n</ol>\n<h2 id=\"hashchunkhashcontenthashçš„åŒºåˆ«\">Hash&amp;ChunkHash&amp;ContentHashçš„åŒºåˆ«</h2>\n<ul>\n<li><code>hash</code>ï¼Œæ ¹æ®æ„å»ºç›®å½•ç”Ÿæˆï¼Œåªè¦é¡¹ç›®ä¸­æœ‰æ–‡ä»¶ä¿®æ”¹ï¼Œåˆ™æ•´ä¸ªé¡¹ç›®æ„å»ºå‡ºæ¥çš„<code>hash</code>éƒ½ä¼šæ”¹å˜</li>\n<li><code>chunkHash</code>ï¼Œå’Œwebpackæ‰“åŒ…åˆ°chunkæœ‰å…³ï¼Œä¸åŒentryä¼šç”Ÿæˆä¸åŒçš„<code>chunkHash</code>ã€‚chunkä¹‹é—´äº’ä¸å½±å“ï¼ˆä¸€èˆ¬ç”¨æ¥æ‰“åŒ…å…¬ç”¨jsï¼‰</li>\n<li><code>contentHash</code>ï¼Œæ ¹æ®æ–‡ä»¶å†…å®¹ç”Ÿæˆ<code>hash</code>ï¼Œåªè¦æ–‡ä»¶å†…å®¹ä¸å˜ï¼Œç”Ÿæˆçš„<code>contentHash</code>å°±ä¸å˜ï¼ˆä¸€èˆ¬ç”¨æ¥æ‰“åŒ…cssï¼‰</li>\n</ul>\n<h2 id=\"loaderå’Œplugin\">loaderå’Œplugin</h2>\n<p>loaderç”¨æ¥å¤„ç†éJavaScriptæ–‡ä»¶ã€‚webpackå°†ä¸€åˆ‡æ–‡ä»¶è§†ä¸ºæ¨¡å—ï¼Œä½†webpackåªèƒ½å¤„ç†JavaScriptæ–‡ä»¶ï¼Œå¦‚æœæƒ³å°†å…¶ä»–æ–‡ä»¶ä¹Ÿæ‰“åŒ…çš„è¯å°±è¦ç”¨åˆ°å¯¹åº”çš„loader</p>\n<p>pluginç”¨æ¥æ‰©å±•webpackçš„èƒ½åŠ›ã€‚webpackåœ¨è¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸä¸­ä¼šå¹¿æ’­å‡ºè®¸å¤šäº‹ä»¶ï¼Œpluginå¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œåœ¨åˆé€‚çš„æ—¶æœºé€šè¿‡webpackæä¾›çš„apiæ”¹å˜è¾“å‡ºç»“æœ</p>\n<h2 id=\"webpack5æ–°ç‰¹æ€§\">webpack5æ–°ç‰¹æ€§</h2>\n<ul>\n<li>å¯åŠ¨å‘½ä»¤å˜åŒ–<pre><code class=\"hljs language-js\">{\n    <span class=\"hljs-comment\">// v4</span>\n    <span class=\"hljs-string\">&quot;start&quot;</span>: <span class=\"hljs-string\">&quot;webpack-dev-server&quot;</span>\n    <span class=\"hljs-comment\">// v5</span>\n    <span class=\"hljs-string\">&quot;start&quot;</span>: <span class=\"hljs-string\">&quot;webpack serve&quot;</span>\n}\n</code></pre>\n</li>\n<li>å†…ç½®æŒä¹…åŒ–ç¼“å­˜</li>\n<li>èµ„æºæ¨¡å—</li>\n<li>moduleIdså’ŒchunkIdsä¼˜åŒ–</li>\n<li>ç§»é™¤Node.jsçš„polyfill</li>\n<li><code>tree-shaking</code></li>\n<li><code>module federation</code>ã€‚ä¸»è¦æ˜¯ç”¨æ¥è§£å†³å¤šä¸ªåº”ç”¨ä¹‹é—´ä»£ç å…±äº«çš„é—®é¢˜ï¼Œå¯ä»¥è®©æˆ‘ä»¬çš„æ›´åŠ ä¼˜é›…çš„å®ç°è·¨åº”ç”¨çš„ä»£ç å…±äº«</li>\n</ul>\n<h2 id=\"tree-shaking\">tree shaking</h2>\n<p>ä¸€ç§ä¼˜åŒ–ï¼Œå¯ä»¥å»é™¤ä¸å¿…è¦çš„ä»£ç ï¼Œå‡å°æ‰“åŒ…åçš„ä½“ç§¯</p>\n<p>åŸºäºæ¨¡å—é™æ€åŠ è½½æ¥å®ç°ã€‚ç”±äºå¯¼å…¥äº†å“ªäº›æ¨¡å—æ˜¯ç¡®å®šçš„ï¼Œç¼–è¯‘çš„æ—¶å€™å¯ä»¥æ­£ç¡®åˆ¤æ–­åˆ°åº•åŠ è½½äº†å“ªäº›æ¨¡å—å’Œå˜é‡ï¼Œå¯ä»¥åˆ é™¤é‚£äº›æœªè¢«ä½¿ç”¨çš„å˜é‡æˆ–è€…å¼•ç”¨</p>\n<h2 id=\"å¸¸ç”¨é…ç½®\">å¸¸ç”¨é…ç½®</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> path = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;path&#x27;</span>);\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title class_\">HtmlWebpackPlugin</span> = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;html-webpack-plugin&#x27;</span>);\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title class_\">ProgressBarPlugin</span> = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;progress-bar-webpack-plugin&#x27;</span>);\n<span class=\"hljs-keyword\">const</span> chalk = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;chalk&#x27;</span>);\n<span class=\"hljs-keyword\">const</span> { <span class=\"hljs-title class_\">CleanWebpackPlugin</span> } = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;clean-webpack-plugin&#x27;</span>);\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title class_\">MiniCssExtractPlugin</span> = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;mini-css-extract-plugin&#x27;</span>);\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title class_\">CssMinimizerPlugin</span> = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;css-minimizer-webpack-plugin&#x27;</span>);\n<span class=\"hljs-keyword\">const</span> { <span class=\"hljs-title class_\">DefinePlugin</span> } = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;webpack&#x27;</span>);\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title class_\">TerserPlugin</span> = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;terser-webpack-plugin&#x27;</span>);\n<span class=\"hljs-keyword\">const</span> entry = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;./webpack.entry&#x27;</span>);\n\n<span class=\"hljs-keyword\">const</span> { <span class=\"hljs-variable constant_\">PORT</span>, <span class=\"hljs-variable constant_\">MODE</span>, <span class=\"hljs-variable constant_\">MOCK</span> } = process.<span class=\"hljs-property\">env</span>;\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">generateHTMLPluginConfig</span>(<span class=\"hljs-params\">pages</span>) {\n  <span class=\"hljs-keyword\">const</span> items = <span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">ownKeys</span>(pages).<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">item</span>) =&gt;</span> (\n    <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">HtmlWebpackPlugin</span>({\n      <span class=\"hljs-attr\">chunks</span>: [item, <span class=\"hljs-string\">&#x27;common&#x27;</span>],\n      <span class=\"hljs-attr\">template</span>: <span class=\"hljs-string\">`./src/html/<span class=\"hljs-subst\">${item}</span>.html`</span>,\n      <span class=\"hljs-attr\">filename</span>: <span class=\"hljs-string\">`<span class=\"hljs-subst\">${item}</span>.html`</span>,\n    })\n  ));\n  <span class=\"hljs-keyword\">return</span> items;\n}\n\n<span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {\n  <span class=\"hljs-attr\">mode</span>: <span class=\"hljs-variable constant_\">MODE</span>,\n  entry,\n  <span class=\"hljs-attr\">output</span>: {\n    <span class=\"hljs-attr\">filename</span>: <span class=\"hljs-string\">&#x27;static/js/[name].[hash:8].js&#x27;</span>,\n    <span class=\"hljs-attr\">path</span>: path.<span class=\"hljs-title function_\">resolve</span>(__dirname, <span class=\"hljs-string\">&#x27;dist&#x27;</span>),\n  },\n  <span class=\"hljs-attr\">plugins</span>: [\n    <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">CleanWebpackPlugin</span>(),\n    ...<span class=\"hljs-title function_\">generateHTMLPluginConfig</span>(entry),\n    <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ProgressBarPlugin</span>({\n      <span class=\"hljs-attr\">format</span>: <span class=\"hljs-string\">`<span class=\"hljs-subst\">${chalk.green(<span class=\"hljs-string\">&#x27;Progressing&#x27;</span>)}</span>[:bar]<span class=\"hljs-subst\">${chalk.green(<span class=\"hljs-string\">&#x27;:percent&#x27;</span>)}</span>(:elapsed seconds)`</span>,\n      <span class=\"hljs-attr\">clear</span>: <span class=\"hljs-literal\">false</span>,\n    }),\n    <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">MiniCssExtractPlugin</span>({\n      <span class=\"hljs-attr\">filename</span>: <span class=\"hljs-string\">&#x27;static/css/[name].[hash:8].css&#x27;</span>,\n      <span class=\"hljs-attr\">chunkFilename</span>: <span class=\"hljs-string\">&#x27;static/css/[id].css&#x27;</span>,\n    }),\n    <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">DefinePlugin</span>({\n      <span class=\"hljs-string\">&#x27;process.env&#x27;</span>: {\n        <span class=\"hljs-attr\">MODE</span>: <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">stringify</span>(<span class=\"hljs-variable constant_\">MODE</span>),\n        <span class=\"hljs-variable constant_\">MOCK</span>,\n      },\n    }),\n  ],\n  <span class=\"hljs-attr\">module</span>: {\n    <span class=\"hljs-attr\">rules</span>: [\n      {\n        <span class=\"hljs-attr\">test</span>: <span class=\"hljs-regexp\">/\\.(html)$/</span>,\n        <span class=\"hljs-attr\">use</span>: [<span class=\"hljs-string\">&#x27;html-withimg-loader&#x27;</span>],\n        <span class=\"hljs-attr\">exclude</span>: <span class=\"hljs-regexp\">/node_modules/</span>,\n      },\n      {\n        <span class=\"hljs-attr\">test</span>: <span class=\"hljs-regexp\">/\\.m?js$/</span>,\n        <span class=\"hljs-attr\">use</span>: [{\n          <span class=\"hljs-attr\">loader</span>: <span class=\"hljs-string\">&#x27;babel-loader&#x27;</span>,\n          <span class=\"hljs-attr\">options</span>: {\n            <span class=\"hljs-attr\">presets</span>: [<span class=\"hljs-string\">&#x27;@babel/preset-env&#x27;</span>],\n          },\n        },\n        <span class=\"hljs-string\">&#x27;eslint-loader&#x27;</span>],\n        <span class=\"hljs-attr\">exclude</span>: [<span class=\"hljs-regexp\">/node_modules/</span>, <span class=\"hljs-regexp\">/lib/</span>, <span class=\"hljs-regexp\">/polyfill/</span>],\n      },\n      {\n        <span class=\"hljs-attr\">test</span>: <span class=\"hljs-regexp\">/\\.css$/</span>,\n        <span class=\"hljs-attr\">use</span>: [\n          {\n            <span class=\"hljs-attr\">loader</span>: <span class=\"hljs-title class_\">MiniCssExtractPlugin</span>.<span class=\"hljs-property\">loader</span>,\n            <span class=\"hljs-attr\">options</span>: {\n              <span class=\"hljs-attr\">publicPath</span>: <span class=\"hljs-string\">&#x27;../&#x27;</span>,\n            },\n          },\n          <span class=\"hljs-string\">&#x27;css-loader&#x27;</span>,\n          <span class=\"hljs-string\">&#x27;postcss-loader&#x27;</span>,\n        ],\n      },\n      {\n        <span class=\"hljs-attr\">test</span>: <span class=\"hljs-regexp\">/\\.less$/</span>,\n        <span class=\"hljs-attr\">use</span>: [\n          {\n            <span class=\"hljs-attr\">loader</span>: <span class=\"hljs-title class_\">MiniCssExtractPlugin</span>.<span class=\"hljs-property\">loader</span>,\n            <span class=\"hljs-attr\">options</span>: {\n              <span class=\"hljs-attr\">publicPath</span>: <span class=\"hljs-string\">&#x27;../&#x27;</span>,\n            },\n          },\n          <span class=\"hljs-string\">&#x27;css-loader&#x27;</span>,\n          <span class=\"hljs-string\">&#x27;postcss-loader&#x27;</span>,\n          <span class=\"hljs-string\">&#x27;less-loader&#x27;</span>,\n        ],\n      },\n      {\n        <span class=\"hljs-attr\">test</span>: <span class=\"hljs-regexp\">/\\.(png|jpg|gif|jpeg|svg|ttf)$/</span>,\n        <span class=\"hljs-attr\">use</span>: [\n          {\n            <span class=\"hljs-attr\">loader</span>: <span class=\"hljs-string\">&#x27;url-loader&#x27;</span>,\n            <span class=\"hljs-attr\">options</span>: {\n              <span class=\"hljs-attr\">limit</span>: <span class=\"hljs-number\">10240</span>,\n              <span class=\"hljs-attr\">esModule</span>: <span class=\"hljs-literal\">false</span>,\n              <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&#x27;static/img/[name].[hash:6].[ext]&#x27;</span>,\n              <span class=\"hljs-attr\">publicPath</span>: <span class=\"hljs-variable constant_\">MODE</span> === <span class=\"hljs-string\">&#x27;development&#x27;</span> ? <span class=\"hljs-string\">&#x27;/&#x27;</span> : <span class=\"hljs-string\">&#x27;/loginfe&#x27;</span>,\n            },\n          },\n        ],\n        <span class=\"hljs-attr\">exclude</span>: <span class=\"hljs-regexp\">/node_modules/</span>,\n      },\n    ],\n  },\n  <span class=\"hljs-attr\">optimization</span>: {\n    <span class=\"hljs-attr\">minimize</span>: <span class=\"hljs-literal\">true</span>,\n    <span class=\"hljs-attr\">minimizer</span>: [\n      <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">CssMinimizerPlugin</span>(),\n      <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TerserPlugin</span>(),\n    ],\n    <span class=\"hljs-attr\">splitChunks</span>: {\n      <span class=\"hljs-attr\">chunks</span>: <span class=\"hljs-string\">&#x27;all&#x27;</span>,\n      <span class=\"hljs-attr\">cacheGroups</span>: {\n        <span class=\"hljs-attr\">common</span>: {\n          <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&#x27;common&#x27;</span>,\n          <span class=\"hljs-attr\">test</span>: <span class=\"hljs-regexp\">/.js$/</span>,\n          <span class=\"hljs-attr\">minChunks</span>: <span class=\"hljs-number\">2</span>,\n          <span class=\"hljs-attr\">minSize</span>: <span class=\"hljs-number\">0</span>,\n        },\n      },\n    },\n  },\n  <span class=\"hljs-attr\">devServer</span>: {\n    <span class=\"hljs-attr\">contentBase</span>: path.<span class=\"hljs-title function_\">join</span>(__dirname, <span class=\"hljs-string\">&#x27;dist&#x27;</span>),\n    <span class=\"hljs-attr\">compress</span>: <span class=\"hljs-literal\">true</span>,\n    <span class=\"hljs-attr\">port</span>: <span class=\"hljs-variable constant_\">PORT</span>,\n    <span class=\"hljs-attr\">disableHostCheck</span>: <span class=\"hljs-literal\">true</span>,\n    <span class=\"hljs-attr\">host</span>: <span class=\"hljs-string\">&#x27;0.0.0.0&#x27;</span>,\n    <span class=\"hljs-attr\">proxy</span>: {\n      <span class=\"hljs-string\">&#x27;/v1/*&#x27;</span>: {\n        <span class=\"hljs-attr\">target</span>: <span class=\"hljs-string\">&#x27;xxx&#x27;</span>,\n        <span class=\"hljs-attr\">changeOrigin</span>: <span class=\"hljs-literal\">true</span>,\n        <span class=\"hljs-attr\">secure</span>: <span class=\"hljs-literal\">false</span>,\n        <span class=\"hljs-attr\">headers</span>: {},\n      },\n    },\n  },\n  <span class=\"hljs-attr\">devtool</span>: <span class=\"hljs-variable constant_\">MODE</span> === <span class=\"hljs-string\">&#x27;production&#x27;</span> ? <span class=\"hljs-literal\">false</span> : <span class=\"hljs-string\">&#x27;eval-source-map&#x27;</span>,\n};\n</code></pre>\n<h2 id=\"å¾ªç¯å¼•ç”¨\">å¾ªç¯å¼•ç”¨</h2>\n<p>åœ¨<code>CommonJS</code>è§„èŒƒä¸­ï¼Œå½“é‡åˆ°<code>require()</code>è¯­å¥æ—¶ï¼Œä¼šæ‰§è¡Œ<code>require</code>æ¨¡å—ä¸­çš„ä»£ç ï¼Œå¹¶ç¼“å­˜æ‰§è¡Œçš„ç»“æœï¼Œå½“ä¸‹æ¬¡å†æ¬¡åŠ è½½æ—¶ä¸ä¼šé‡å¤æ‰§è¡Œï¼Œè€Œæ˜¯ç›´æ¥å–ç¼“å­˜çš„ç»“æœ</p>\n<p>åœ¨<code>ESM</code>ä¸­ï¼Œå› ä¸º<code>import</code>æ˜¯åœ¨ç¼–è¯‘é˜¶æ®µæ‰§è¡Œçš„ï¼Œè¿™æ ·å°±ä½¿å¾—ç¨‹åºåœ¨ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®šæ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œä¸€æ—¦å‘ç°å¾ªç¯ä¾èµ–ï¼ŒES6 æœ¬èº«å°±ä¸ä¼šå†å»æ‰§è¡Œä¾èµ–çš„é‚£ä¸ªæ¨¡å—äº†ï¼Œæ‰€ä»¥ç¨‹åºå¯ä»¥æ­£å¸¸ç»“æŸã€‚è¿™ä¹Ÿè¯´æ˜äº† ES6 æœ¬èº«å°±æ”¯æŒå¾ªç¯ä¾èµ–ï¼Œä¿è¯ç¨‹åºä¸ä¼šå› ä¸ºå¾ªç¯ä¾èµ–é™·å…¥æ— é™è°ƒç”¨</p>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://segmentfault.com/a/1190000038962700\">å°çº¢ä¹¦é¢è¯•å®˜ï¼šä»‹ç»ä¸€ä¸‹ tree shaking åŠå…¶å·¥ä½œåŸç†</a> </p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/33049803\">æ¢ç´¢ JavaScript ä¸­çš„ä¾èµ–ç®¡ç†åŠå¾ªç¯ä¾èµ–</a></p>\n"},{"title":"å‰ç«¯æ¶æ„&è½¯å®åŠ›å¤ä¹ -0","tags":["å‰ç«¯æ¶æ„","è½¯å®åŠ›"],"categories":"2021å¤ä¹ ","description":"## npmç‰ˆæœ¬\n\n``` js\n\"5.0.3\",\n\"~5.0.3\",\n\"^5.0.3\"\n```\n\n- \"5.0.3\"è¡¨ç¤ºå®‰è£…æŒ‡å®šçš„5.0.3ç‰ˆæœ¬\n- \"ï½5.0.3\"è¡¨ç¤ºå®‰è£…5.0.Xä¸­æœ€æ–°çš„ç‰ˆæœ¬\n- \"^5.0.3\"è¡¨ç¤ºå®‰è£…5.X.Xä¸­æœ€æ–°çš„ç‰ˆæœ¬\n\n## fullScreen\n\n``` html\n<!DOCTYPE html>\n<html lang=\"en\">\n    <head>","createDate":"2021-05-14 08:20:12","updateDate":"2021-06-28 10:59:47","body":"<h2 id=\"npmç‰ˆæœ¬\">npmç‰ˆæœ¬</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-string\">&quot;5.0.3&quot;</span>,\n<span class=\"hljs-string\">&quot;~5.0.3&quot;</span>,\n<span class=\"hljs-string\">&quot;^5.0.3&quot;</span>\n</code></pre>\n<ul>\n<li>&quot;5.0.3&quot;è¡¨ç¤ºå®‰è£…æŒ‡å®šçš„5.0.3ç‰ˆæœ¬</li>\n<li>&quot;ï½5.0.3&quot;è¡¨ç¤ºå®‰è£…5.0.Xä¸­æœ€æ–°çš„ç‰ˆæœ¬</li>\n<li>&quot;^5.0.3&quot;è¡¨ç¤ºå®‰è£…5.X.Xä¸­æœ€æ–°çš„ç‰ˆæœ¬</li>\n</ul>\n<h2 id=\"fullscreen\">fullScreen</h2>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-keyword\">html</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">&quot;en&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">charset</span>=<span class=\"hljs-string\">&quot;UTF-8&quot;</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">http-equiv</span>=<span class=\"hljs-string\">&quot;X-UA-Compatible&quot;</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">&quot;IE=edge&quot;</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;viewport&quot;</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>Document<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n        <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">onFullScreenClick</span>(<span class=\"hljs-params\"></span>) {\n          <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-number\">111</span>);\n          <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&#x27;#fullScreenImage&#x27;</span>).<span class=\"hljs-title function_\">requestFullscreen</span>();\n        }\n      </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onclick</span>=<span class=\"hljs-string\">&quot;onFullScreenClick()&quot;</span>&gt;</span>\n        full screen\n      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;fullScreenImage&quot;</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">img</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://ns-strategy.cdn.bcebos.com/ns-strategy/upload/fc_big_pic/part-00139-2321.jpg&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">img</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n</code></pre>\n<h2 id=\"gitå‘½ä»¤\">gitå‘½ä»¤</h2>\n<ul>\n<li><code>git commit --amend -m &#39;æäº¤åŸå› &#39;</code> ä¿®æ”¹æœ€è¿‘ä¸€æ¬¡commitçš„ä¿¡æ¯</li>\n</ul>\n<h2 id=\"æœ‰é™çŠ¶æ€æœº\">æœ‰é™çŠ¶æ€æœº</h2>\n<p>æœ‰é™çŠ¶æ€æœºï¼ˆfinite state machineï¼‰ï¼Œè®¡ç®—æœºç§‘å­¦ä¸­ç”¨æ¥å¯¹è±¡è¡Œä¸ºå»ºæ¨¡çš„å·¥å…·ï¼Œå…¶ä½œç”¨ä¸»è¦æ˜¯æè¿°å¯¹è±¡åœ¨å®ƒçš„ç”Ÿå‘½å‘¨æœŸå†…æ‰€ç»å†çš„çŠ¶æ€é˜Ÿåˆ—ï¼Œä»¥åŠå¦‚ä½•å“åº”æ¥è‡ªå¤–ç•Œçš„å„ç§äº‹ä»¶</p>\n<p>çŠ¶æ€æœºæœ‰åŸºæœ¬å‡ ä¸ªè¦ç´ ï¼š</p>\n<ul>\n<li>å½“å‰æ‰€å¤„çŠ¶æ€ã€‚åœ¨å„ä¸ªæ—¶åˆ»åªå¤„äºä¸€ç§çŠ¶æ€</li>\n<li>çŠ¶æ€è½¬ç§»å‡½æ•°ã€‚åœ¨æŸç§æ¡ä»¶ä¸‹ï¼Œä¼šä»ä¸€ç§çŠ¶æ€è½¬ç§»è‡³å¦ä¸€ç§çŠ¶æ€</li>\n<li>æœ‰é™çŠ¶æ€åºåˆ—ã€‚æ‹¥æœ‰æœ‰é™ï¼Œå¯æšä¸¾çš„çŠ¶æ€æ•°</li>\n</ul>\n<h2 id=\"ç›‘å¬é¡µé¢å´©æºƒ\">ç›‘å¬é¡µé¢å´©æºƒ</h2>\n<p>è¢«ç›‘å¬é¡µé¢å’Œç›‘å¬è€…å»ºç«‹ä¸€ç§<strong>å¿ƒè·³æœºåˆ¶</strong>ï¼Œæ¯éš”ä¸€å®šæ—¶é—´å‘ç›‘å¬è€…å‘é€ä¸€æ¬¡å¿ƒè·³ï¼›ç›‘å¬è€…æ ¹æ®å¿ƒè·³æ¥æ¨æ–­è¢«ç›‘å¬è€…çš„æƒ…å†µã€‚</p>\n<h2 id=\"å¾®å‰ç«¯\">å¾®å‰ç«¯</h2>\n<p>å°†ä¸€ä¸ªå¤§å‹åº”ç”¨åˆ’åˆ†ä¸ºä¸€ä¸ªä¸»åº”ç”¨å’Œä¸€ä¸ªæˆ–å¤šä¸ªå°åº”ç”¨ï¼Œåº”ç”¨é—´ç›¸äº’ç‹¬ç«‹ï¼Œå¯ç›¸äº’é€šä¿¡</p>\n<h2 id=\"ç™½å±æ—¶é—´æ¸²æŸ“æ—¶é—´\">ç™½å±æ—¶é—´/æ¸²æŸ“æ—¶é—´</h2>\n<p>ç™½å±æ—¶é—´: <code>window.performance.timing.domLoading - window.performance.timing.navigationStart</code></p>\n<p>é¦–å±æ—¶é—´ï¼š<code>window.performance.timing.domInteractive - window.performace.timing.navigationStart</code></p>\n<h2 id=\"npm-ci\">npm ci</h2>\n<p><code>npm ci</code>ï¼ˆ6.0ç‰ˆæœ¬ä»¥ä¸Šï¼‰</p>\n<ol>\n<li>ä¼šåˆ é™¤é¡¹ç›®ä¸­çš„<code>node_modules</code>æ–‡ä»¶å¤¹</li>\n<li>æŒ‰ç…§é¡¹ç›®ä¸­çš„<code>package-lock.json</code>æ¥å®‰è£…ç¡®åˆ‡ç‰ˆæœ¬çš„ä¾èµ–é¡¹</li>\n</ol>\n<h2 id=\"continuous-local-storage\">continuous-local-storage</h2>\n<p><code>continuous-local-storage</code>æ˜¯nodejsä¸­ç±»ä¼¼æœ¬åœ°å­˜å‚¨çš„ï¼Œå®ƒå¯ä»¥å®ç°å¤šä¸ªæ–‡ä»¶ä¸­æ•°æ®å…±äº«ï¼Œä½†æ˜¯ä¸ç”¨æŒ‚è½½åˆ°å…¨å±€å¯¹è±¡</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">//a.js</span>\n<span class=\"hljs-keyword\">const</span> storage=<span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;continuous-local-storage&#x27;</span>);\n<span class=\"hljs-keyword\">var</span> space=stroage.<span class=\"hljs-title function_\">createNameSpace</span>(<span class=\"hljs-string\">&#x27;data&#x27;</span>);\nspace.<span class=\"hljs-title function_\">set</span>(<span class=\"hljs-string\">&#x27;user&#x27;</span>,<span class=\"hljs-string\">&#x27;xx&#x27;</span>)\n \n<span class=\"hljs-comment\">//b.js</span>\n<span class=\"hljs-keyword\">const</span> storage=<span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;continuous-local-storage&#x27;</span>);\n<span class=\"hljs-keyword\">var</span> space=storage.<span class=\"hljs-title function_\">getNameSpace</span>(<span class=\"hljs-string\">&#x27;data&#x27;</span>);\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(space.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&#x27;user&#x27;</span>))\n<span class=\"hljs-comment\">//è¾“å‡ºxx</span>\n</code></pre>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://mp.weixin.qq.com/s/uQ6YFaFPUkaVkS8Y_F865w\">å‰ç«¯:ä»çŠ¶æ€ç®¡ç†åˆ°æœ‰é™çŠ¶æ€æœºçš„æ€è€ƒ</a></p>\n"},{"title":"æµè§ˆå™¨å¤ä¹ -å®‰å…¨","tags":["æµè§ˆå™¨å®‰å…¨"],"categories":"2021å¤ä¹ ","description":"## åŒæºç­–ç•¥ã€CSPã€CORS\n\n> åŒæºçš„å®šä¹‰: å¦‚æœä¸¤ä¸ª URL çš„ protocolã€port (å¦‚æœæœ‰æŒ‡å®šçš„è¯)å’Œ host éƒ½ç›¸åŒçš„è¯ï¼Œåˆ™è¿™ä¸¤ä¸ª URL æ˜¯åŒæº\n\nåŒæºç­–ç•¥ï¼šæ§åˆ¶ä¸åŒçš„æºä¹‹é—´å¦‚ä½•äº¤äº’èµ„æº\n\nCSP: å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆContent-Security-Policyï¼‰ç”¨äºæ£€æµ‹å’Œå‡è½»ç”¨äº Web ç«™ç‚¹çš„ç‰¹å®šç±»å‹çš„æ”»å‡»ï¼Œä¾‹å¦‚ XSSå’Œæ•°æ®æ³¨å…¥ç­‰ã€‚æ ¸å¿ƒæ€æƒ³æ˜¯**è®©æœåŠ¡å™¨å†³å®šæµè§ˆ","createDate":"2021-05-16 15:04:37","updateDate":"2021-06-24 23:23:08","body":"<h2 id=\"åŒæºç­–ç•¥ã€cspã€cors\">åŒæºç­–ç•¥ã€CSPã€CORS</h2>\n<blockquote>\n<p>åŒæºçš„å®šä¹‰: å¦‚æœä¸¤ä¸ª URL çš„ protocolã€port (å¦‚æœæœ‰æŒ‡å®šçš„è¯)å’Œ host éƒ½ç›¸åŒçš„è¯ï¼Œåˆ™è¿™ä¸¤ä¸ª URL æ˜¯åŒæº</p>\n</blockquote>\n<p>åŒæºç­–ç•¥ï¼šæ§åˆ¶ä¸åŒçš„æºä¹‹é—´å¦‚ä½•äº¤äº’èµ„æº</p>\n<p>CSP: å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆContent-Security-Policyï¼‰ç”¨äºæ£€æµ‹å’Œå‡è½»ç”¨äº Web ç«™ç‚¹çš„ç‰¹å®šç±»å‹çš„æ”»å‡»ï¼Œä¾‹å¦‚ XSSå’Œæ•°æ®æ³¨å…¥ç­‰ã€‚æ ¸å¿ƒæ€æƒ³æ˜¯<strong>è®©æœåŠ¡å™¨å†³å®šæµè§ˆå™¨èƒ½å¤ŸåŠ è½½å“ªäº›èµ„æºï¼Œè®©æœåŠ¡å™¨å†³å®šæµè§ˆå™¨æ˜¯å¦èƒ½å¤Ÿæ‰§è¡Œå†…è” JavaScript ä»£ç </strong></p>\n<p>CORS: è·¨åŸŸèµ„æºå…±äº«ï¼ˆCross-Origin Resource Sharingï¼‰æ˜¯ä¸€ç§æœºåˆ¶ï¼Œå®ƒç”±ä¸€ç³»åˆ—HTTPå¤´éƒ¨ç»„æˆï¼Œè¿™äº›å¤´éƒ¨å†³å®šæµè§ˆå™¨æ˜¯å¦é˜»æ­¢å‰ç«¯ JavaScript ä»£ç è·å–è·¨åŸŸè¯·æ±‚çš„å“åº”ã€‚åŒæºå®‰å…¨ç­–ç•¥ é»˜è®¤é˜»æ­¢â€œè·¨åŸŸâ€è·å–èµ„æºã€‚ä½†æ˜¯ CORS ç»™äº†webæœåŠ¡å™¨è¿™æ ·çš„æƒé™ï¼Œå³æœåŠ¡å™¨å¯ä»¥é€‰æ‹©ï¼Œå…è®¸è·¨åŸŸè¯·æ±‚è®¿é—®åˆ°å®ƒä»¬çš„èµ„æºã€‚</p>\n<p>è·¨æºèµ„æºå…±äº«è¿˜é€šè¿‡ä¸€ç§æœºåˆ¶æ¥æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦ä¼šå…è®¸è¦å‘é€çš„çœŸå®è¯·æ±‚ï¼Œè¯¥æœºåˆ¶é€šè¿‡æµè§ˆå™¨å‘èµ·ä¸€ä¸ªåˆ°æœåŠ¡å™¨æ‰˜ç®¡çš„è·¨æºèµ„æºçš„&quot;é¢„æ£€&quot;è¯·æ±‚ã€‚åœ¨é¢„æ£€ä¸­ï¼Œæµè§ˆå™¨å‘é€çš„å¤´ä¸­æ ‡ç¤ºæœ‰HTTPæ–¹æ³•å’ŒçœŸå®è¯·æ±‚ä¸­ä¼šç”¨åˆ°çš„å¤´</p>\n<p>å¯¹äºä¸€äº›<strong>ç®€å•è¯·æ±‚</strong>ï¼Œå¹¶ä¸ä¼šå‘é€<strong>OPTIONé¢„æ£€è¯·æ±‚</strong></p>\n<ul>\n<li>ä½¿ç”¨GET/POST/HEADæ–¹æ³•</li>\n<li>Context-typeä¸º&#39;test/plain&#39;æˆ–&#39;multipart/form-data&#39;æˆ–&#39;application/x-www-form-urlencoded&#39;</li>\n</ul>\n<h2 id=\"xss\">XSS</h2>\n<blockquote>\n<p>è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆCross-site scriptingï¼ŒXSSï¼‰æ˜¯ä¸€ç§å®‰å…¨æ¼æ´ï¼Œæ”»å‡»è€…å¯ä»¥åˆ©ç”¨è¿™ç§æ¼æ´åœ¨ç½‘ç«™ä¸Šæ³¨å…¥æ¶æ„çš„å®¢æˆ·ç«¯ä»£ç ã€‚å½“è¢«æ”»å‡»è€…ç™»é™†ç½‘ç«™æ—¶å°±ä¼šè‡ªåŠ¨è¿è¡Œè¿™äº›æ¶æ„ä»£ç ï¼Œä»è€Œï¼Œæ”»å‡»è€…å¯ä»¥çªç ´ç½‘ç«™çš„è®¿é—®æƒé™ï¼Œå†’å……å—å®³è€…ã€‚</p>\n</blockquote>\n<p>å¦‚æœ Web åº”ç”¨ç¨‹åºæ²¡æœ‰éƒ¨ç½²è¶³å¤Ÿçš„å®‰å…¨éªŒè¯ï¼Œé‚£ä¹ˆï¼Œè¿™äº›æ”»å‡»å¾ˆå®¹æ˜“æˆåŠŸã€‚æµè§ˆå™¨æ— æ³•æ¢æµ‹åˆ°è¿™äº›æ¶æ„è„šæœ¬æ˜¯ä¸å¯ä¿¡çš„ï¼Œæ‰€ä»¥ï¼Œè¿™äº›è„šæœ¬å¯ä»¥ä»»æ„è¯»å– cookieï¼Œsession tokensï¼Œæˆ–è€…å…¶å®ƒæ•æ„Ÿçš„ç½‘ç«™ä¿¡æ¯ï¼Œæˆ–è€…è®©æ¶æ„è„šæœ¬é‡å†™HTMLå†…å®¹ã€‚</p>\n<h3 id=\"xssæ”»å‡»çš„åˆ†ç±»\">XSSæ”»å‡»çš„åˆ†ç±»</h3>\n<ul>\n<li><p>å­˜å‚¨å‹</p>\n<p>  æ³¨å…¥å‹è„šæœ¬æ°¸ä¹…å­˜å‚¨åœ¨ç›®æ ‡æœåŠ¡å™¨ä¸Šã€‚å½“æµè§ˆå™¨è¯·æ±‚æ•°æ®æ—¶ï¼Œè„šæœ¬ä»æœåŠ¡å™¨ä¸Šä¼ å›å¹¶æ‰§è¡Œã€‚</p>\n</li>\n<li><p>åå°„å‹</p>\n<p>  ç”¨æˆ·å°†å«æœ‰æ¶æ„ä»£ç çš„è¯·æ±‚æäº¤ç»™ Web æœåŠ¡å™¨ï¼ŒWeb æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œåˆå°†æ¶æ„ä»£ç åå°„ç»™äº†æµè§ˆå™¨ç«¯ï¼Œè¿™å°±æ˜¯åå°„å‹ XSS æ”»å‡»</p>\n</li>\n</ul>\n<h3 id=\"xssæ”»å‡»çš„å±å®³\">XSSæ”»å‡»çš„å±å®³</h3>\n<ul>\n<li>åˆ©ç”¨è™šå‡è¡¨å•éª—å–ç”¨æˆ·ä¸ªäººä¿¡æ¯</li>\n<li>åˆ©ç”¨è„šæœ¬çªƒå–ç”¨æˆ·çš„cookieå€¼ï¼Œè¢«å®³è€…åœ¨ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹å¸®åŠ©æ”»å‡»è€…å‘é€æ¶æ„è¯·æ±‚</li>\n</ul>\n<h3 id=\"é¢„é˜²xssæ”»å‡»\">é¢„é˜²XSSæ”»å‡»</h3>\n<p>è¿‡æ»¤ç”¨æˆ·è¾“å…¥</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">filter</span> (str) {\n    <span class=\"hljs-keyword\">return</span> str\n      .<span class=\"hljs-title function_\">replace</span>(<span class=\"hljs-regexp\">/&amp;/g</span>, <span class=\"hljs-string\">&#x27;&amp;amp;&#x27;</span>)\n      .<span class=\"hljs-title function_\">replace</span>(<span class=\"hljs-regexp\">/ /g</span>, <span class=\"hljs-string\">&#x27;&amp;nbsp;&#x27;</span>)\n      .<span class=\"hljs-title function_\">replace</span>(<span class=\"hljs-regexp\">/&lt;/g</span>, <span class=\"hljs-string\">&#x27;&amp;lt;&#x27;</span>)\n      .<span class=\"hljs-title function_\">replace</span>(<span class=\"hljs-regexp\">/&gt;/g</span>, <span class=\"hljs-string\">&#x27;&amp;gt;&#x27;</span>)\n      .<span class=\"hljs-title function_\">replace</span>(<span class=\"hljs-regexp\">/&quot;/g</span>, <span class=\"hljs-string\">&#x27;&amp;quot;&#x27;</span>)\n      .<span class=\"hljs-title function_\">replace</span>(<span class=\"hljs-regexp\">/&#x27;/g</span>, <span class=\"hljs-string\">&#x27;&amp;#39;&#x27;</span>)\n      .<span class=\"hljs-title function_\">replace</span>(<span class=\"hljs-regexp\">/\\r{0,}\\n/g</span>, <span class=\"hljs-string\">&#x27;&lt;br/&gt;&#x27;</span>)\n}\n</code></pre>\n<p>CSP</p>\n<p>cookieè®¾ç½®<code>HttpOnly</code></p>\n<h2 id=\"csrf\">CSRF</h2>\n<blockquote>\n<p>è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCSRFï¼ŒCross-site request forgeryï¼‰æ˜¯ä¸€ç§å†’å……å—ä¿¡ä»»ç”¨æˆ·ï¼Œå‘æœåŠ¡å™¨å‘é€éé¢„æœŸè¯·æ±‚çš„æ”»å‡»æ–¹å¼</p>\n</blockquote>\n<h3 id=\"æ”»å‡»æµç¨‹\">æ”»å‡»æµç¨‹</h3>\n<ol>\n<li>å—å®³è€…ç™»å½•<a href=\"http://a.com%EF%BC%8C%E5%B9%B6%E4%BF%9D%E7%95%99%E4%BA%86%E7%99%BB%E5%BD%95%E5%87%AD%E8%AF%81(Cookie)\">http://a.comï¼Œå¹¶ä¿ç•™äº†ç™»å½•å‡­è¯(Cookie)</a></li>\n<li>æ”»å‡»è€…å¼•è¯±å—å®³è€…è®¿é—®<a href=\"http://b.com\">http://b.com</a></li>\n<li><a href=\"http://b.com\">http://b.com</a> å‘é€äº†ä¸€ä¸ªè¯·æ±‚ï¼š <a href=\"http://a.com?act=xxx\">http://a.com?act=xxx</a> ã€‚æµè§ˆå™¨ä¼šé»˜è®¤æºå¸¦<a href=\"http://a.com%E7%9A%84cookie\">http://a.comçš„cookie</a></li>\n<li><a href=\"http://a.com\">http://a.com</a> æ¥æ”¶åˆ°è¯·æ±‚åï¼Œå¯¹è¯·æ±‚è¿›è¡ŒéªŒè¯ï¼Œç¡®è®¤æ˜¯å—å®³è€…ï¼Œè¯¯ä»¥ä¸ºæ˜¯å—å®³è€…è‡ªå·±å‘é€çš„è¯·æ±‚</li>\n<li><a href=\"http://a.com\">http://a.com</a> ä»¥å—å®³è€…çš„åä¹‰æ‰§è¡Œäº†act=xxx</li>\n<li>æ”»å‡»å®Œæˆï¼Œå—å®³è€…åœ¨ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹å†’å……å—å®³è€…ï¼Œè®©<a href=\"http://a.com\">http://a.com</a> æ‰§è¡Œäº†æ”»å‡»è€…è‡ªå®šä¹‰çš„æ“ä½œ</li>\n</ol>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/csrf.png\" alt=\"CSRFæ”»å‡»\"></p>\n<h3 id=\"å¦‚ä½•é˜²å¾¡\">å¦‚ä½•é˜²å¾¡</h3>\n<p>é˜²èŒƒCSFRæ”»å‡»å¯ä»¥éµå¾ªä»¥ä¸‹å‡ ç§è§„åˆ™ï¼š</p>\n<ul>\n<li>ä¸è®©ç¬¬ä¸‰æ–¹ç½‘ç«™è®¿é—®åˆ°ç”¨æˆ·cookie</li>\n<li>é˜»æ­¢ç¬¬ä¸‰æ–¹ç½‘ç«™è¯·æ±‚æ¥å£</li>\n<li>æ•æ„Ÿæ¥å£è¯·æ±‚æ—¶é™„å¸¦éªŒè¯ä¿¡æ¯ï¼Œæ¯”å¦‚tokenæˆ–éªŒè¯ç </li>\n</ul>\n<p>å…·ä½“é˜²èŒƒæ–¹æ³•ï¼š</p>\n<ol>\n<li><p>samesite</p>\n<p> å¯ä»¥å¯¹cookieè®¾ç½®samesiteå±æ€§ã€‚</p>\n<blockquote>\n<p>samesiteé€‰é¡¹æœ‰<code>strict</code> <code>Lax</code> <code>None</code> ä¸‰ä¸ªå€¼ã€‚<code>strict</code>ï¼šæµè§ˆå™¨å®Œå…¨ç¦æ­¢ç¬¬ä¸‰æ–¹æ‹¿åˆ°cookieï¼›<code>Lax</code>ï¼šç›¸å¯¹å®½æ¾ä¸€ç‚¹ï¼Œåœ¨è·¨ç«™ç‚¹çš„æƒ…å†µä¸‹ï¼Œä»ç¬¬ä¸‰æ–¹ç«™ç‚¹ç‚¹çš„é“¾æ¥æ‰“å¼€æˆ–<code>Get</code>æ–¹å¼çš„è¡¨å•æäº¤è¿™ä¸¤ç§æ–¹å¼éƒ½ä¼šæºå¸¦<code>Cookie</code></p>\n</blockquote>\n</li>\n<li><p>referer</p>\n<p> <code>referer</code>æ˜¯headerçš„ä¸€éƒ¨åˆ†ï¼Œå½“æµè§ˆå™¨å‘webæœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œä¸€èˆ¬ä¼šå¸¦ä¸Šrefererä¿¡æ¯å‘Šè¯‰æœåŠ¡å™¨æ˜¯ä»å“ªä¸ªé¡µé¢æ¥çš„ï¼ŒæœåŠ¡å™¨ç±æ­¤å¯ä»¥è·å¾—ä¸€äº›ä¿¡æ¯ç”¨äºå¤„ç†ã€‚å¯ä»¥é€šè¿‡æ£€æŸ¥è¯·æ±‚çš„æ¥æºæ¥é˜²å¾¡CSRFæ”»å‡»ã€‚</p>\n</li>\n<li><p>anti CSRF token</p>\n<p> ç›®å‰æ¯”è¾ƒå®Œå–„çš„æ–¹æ¡ˆæ˜¯åŠ å…¥anti-csrf tokenã€‚å³å‘é€è¯·æ±‚æ—¶åœ¨httpè¯·æ±‚ä¸­ä»¥å‚æ•°çš„å½¢å¼åŠ å…¥ä¸€ä¸ªéšæœºäº§ç”Ÿçš„tokenï¼Œå¹¶åœ¨æœåŠ¡å™¨å»ºç«‹ä¸€ä¸ªæ‹¦æˆªå™¨æ¥éªŒè¯è¿™ä¸ªtokenã€‚æœåŠ¡å™¨è¯»å–æµè§ˆå™¨å½“å‰åŸŸcookieä¸­è¿™ä¸ªtokenå€¼ï¼Œä¼šè¿›è¡Œæ ¡éªŒè¯¥è¯·æ±‚å½“ä¸­çš„tokenå’Œcookieå½“ä¸­çš„tokenå€¼æ˜¯å¦éƒ½å­˜åœ¨ä¸”ç›¸ç­‰ï¼Œæ‰è®¤ä¸ºè¿™æ˜¯åˆæ³•çš„è¯·æ±‚ã€‚å¦åˆ™è®¤ä¸ºè¿™æ¬¡è¯·æ±‚æ˜¯è¿æ³•çš„ï¼Œæ‹’ç»è¯¥æ¬¡æœåŠ¡ã€‚</p>\n<p> <strong>è¿™ç§æ–¹æ³•ç›¸æ¯”Refereræ£€æŸ¥è¦å®‰å…¨å¾ˆå¤š</strong>ï¼Œtokenå¯ä»¥åœ¨ç”¨æˆ·ç™»é™†åäº§ç”Ÿå¹¶æ”¾äºsessionæˆ–cookieä¸­ï¼Œç„¶ååœ¨æ¯æ¬¡è¯·æ±‚æ—¶æœåŠ¡å™¨æŠŠtokenä»sessionæˆ–cookieä¸­æ‹¿å‡ºï¼Œä¸æœ¬æ¬¡è¯·æ±‚ä¸­çš„token è¿›è¡Œæ¯”å¯¹ã€‚ç”±äºtokençš„å­˜åœ¨ï¼Œæ”»å‡»è€…æ— æ³•å†æ„é€ å‡ºä¸€ä¸ªå®Œæ•´çš„URLå®æ–½CSRFæ”»å‡»ã€‚ä½†åœ¨å¤„ç†å¤šä¸ªé¡µé¢å…±å­˜é—®é¢˜æ—¶ï¼Œå½“æŸä¸ªé¡µé¢æ¶ˆè€—æ‰tokenåï¼Œå…¶ä»–é¡µé¢çš„è¡¨å•ä¿å­˜çš„è¿˜æ˜¯è¢«æ¶ˆè€—æ‰çš„é‚£ä¸ªtokenï¼Œå…¶ä»–é¡µé¢çš„è¡¨å•æäº¤æ—¶ä¼šå‡ºç°tokené”™è¯¯ã€‚</p>\n</li>\n</ol>\n<h2 id=\"sqlæ³¨å…¥\">SQLæ³¨å…¥</h2>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS\">MDN-CORS</a></p>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Glossary/CSRF\">MDN-CSRF</a></p>\n"},{"title":"JavaScriptå¤ä¹ -å¼‚æ­¥","tags":["JavaScript","Promise","Generator","Promise"],"categories":"2021å¤ä¹ ","description":"JavaScriptä¸ºå¼‚æ­¥éé˜»å¡ï¼ŒES6ä¹‹å‰ä¸»è¦é å›è°ƒå‡½æ•°æ¥å®ç°å¼‚æ­¥ï¼Œä½†ç”±äºå›è°ƒå‡½æ•°å®¹æ˜“å‡ºç°å›è°ƒåœ°ç‹±ç­‰é—®é¢˜ï¼Œäºæ˜¯ES6+æä¾›äº†äº†`Generator`ã€`Promise`ã€`async/await`è¿™äº›APIæ¥é™ä½å¼‚æ­¥ç¼–ç¨‹çš„éš¾åº¦ä¸å¤æ‚åº¦ã€‚\n\n## å›è°ƒå‡½æ•°\n\nå›è°ƒå‡½æ•°å®¹æ˜“å‡ºç°å›è°ƒåœ°ç‹±ï¼Œå¯è¯»æ€§å·®\n\n``` js\nfunction ajax(url, options, onSuccess) {","createDate":"2021-05-12 10:36:56","updateDate":"2021-06-24 18:47:28","body":"<p>JavaScriptä¸ºå¼‚æ­¥éé˜»å¡ï¼ŒES6ä¹‹å‰ä¸»è¦é å›è°ƒå‡½æ•°æ¥å®ç°å¼‚æ­¥ï¼Œä½†ç”±äºå›è°ƒå‡½æ•°å®¹æ˜“å‡ºç°å›è°ƒåœ°ç‹±ç­‰é—®é¢˜ï¼Œäºæ˜¯ES6+æä¾›äº†äº†<code>Generator</code>ã€<code>Promise</code>ã€<code>async/await</code>è¿™äº›APIæ¥é™ä½å¼‚æ­¥ç¼–ç¨‹çš„éš¾åº¦ä¸å¤æ‚åº¦ã€‚</p>\n<h2 id=\"å›è°ƒå‡½æ•°\">å›è°ƒå‡½æ•°</h2>\n<p>å›è°ƒå‡½æ•°å®¹æ˜“å‡ºç°å›è°ƒåœ°ç‹±ï¼Œå¯è¯»æ€§å·®</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">ajax</span>(<span class=\"hljs-params\">url, options, onSuccess</span>) {\n    <span class=\"hljs-comment\">// ...</span>\n}\n\n<span class=\"hljs-title function_\">ajax</span>(<span class=\"hljs-string\">&#x27;/api/xxx&#x27;</span>, {}, <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-title function_\">ajax</span>(<span class=\"hljs-string\">&#x27;/api/yyy&#x27;</span>, {}, <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n        <span class=\"hljs-title function_\">ajax</span>(<span class=\"hljs-string\">&#x27;/api/zzz&#x27;</span>, (), <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n        })\n    })\n})\n</code></pre>\n<h3 id=\"generator\">Generator</h3>\n<p>å½¢å¼ä¸Šï¼Œ<code>generator</code>å‡½æ•°æ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œå°è£…äº†å¤šä¸ªå†…éƒ¨çŠ¶æ€ã€‚æ‰§è¡Œ<code>generator</code>å‡½æ•°ä¼šè¿”å›ä¸€ä¸ª<strong>éå†å™¨å¯¹è±¡</strong></p>\n<p>è¯­æ³•ä¸Šï¼Œ<code>generator</code>å‡½æ•°æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ã€‚<code>function</code>å…³é”®å­—ä¸å‡½æ•°åä¹‹é—´æœ‰ä¸€ä¸ª<code>*</code>ï¼›å‡½æ•°ä½“å†…ä½¿ç”¨<code>yield</code>è¡¨è¾¾å¼å®šä¹‰ä¸åŒçš„å†…éƒ¨çŠ¶æ€</p>\n<p>ä¸æ™®é€šå‡½æ•°ä¸åŒï¼Œ<code>generator</code>å‡½æ•°è¢«è°ƒç”¨å<strong>å¹¶ä¸æ‰§è¡Œ</strong>ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªæŒ‡å‘å†…éƒ¨çŠ¶æ€çš„æŒ‡é’ˆå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯<strong>éå†å™¨å¯¹è±¡</strong>ã€‚ä¸‹ä¸€æ­¥ï¼Œ<strong>å¿…é¡»è°ƒç”¨éå†å™¨å¯¹è±¡çš„<code>next</code>æ–¹æ³•</strong>ä½¿å¾—æŒ‡é’ˆç§»å‘ä¸‹ä¸€ä¸ªçŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œå†…éƒ¨æŒ‡é’ˆå°±ä»å‡½æ•°å¤´éƒ¨æˆ–ä¸Šä¸€æ¬¡åœä¸‹æ¥çš„åœ°æ–¹å¼€å§‹æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ª<code>yield</code>æˆ–<code>return</code></p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span>* <span class=\"hljs-title function_\">gen</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">const</span> str1 = <span class=\"hljs-keyword\">yield</span> <span class=\"hljs-string\">&quot;hello&quot;</span>\n  <span class=\"hljs-comment\">// str1 = 222</span>\n  <span class=\"hljs-keyword\">const</span> str2 = <span class=\"hljs-keyword\">yield</span> <span class=\"hljs-string\">&quot;world&quot;</span>\n  <span class=\"hljs-comment\">// str2 = 333</span>\n  <span class=\"hljs-keyword\">return</span> str2\n}\n\n<span class=\"hljs-keyword\">const</span> iter = <span class=\"hljs-title function_\">gen</span>()\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(iter.<span class=\"hljs-title function_\">next</span>())\n<span class=\"hljs-comment\">// { value: &quot;hello&quot;, done: false }</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(iter.<span class=\"hljs-title function_\">next</span>(<span class=\"hljs-number\">222</span>))\n<span class=\"hljs-comment\">// { value: &quot;world&quot;, done: false }</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(iter.<span class=\"hljs-title function_\">next</span>(<span class=\"hljs-number\">333</span>))\n<span class=\"hljs-comment\">// { value: 333, done: false }</span>\n</code></pre>\n<p>ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼Œ<code>generator</code>å‡½æ•°å¼€å§‹æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ç¬¬ä¸€ä¸ª<code>yield</code>è¡¨è¾¾å¼ä¸ºæ­¢ã€‚<code>next</code>æ–¹æ³•è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒçš„<code>value</code>å€¼å°±æ˜¯å½“å‰<code>yield</code>è¡¨è¾¾å¼çš„å€¼ï¼Œ<code>done</code>çš„å€¼ä¸º<code>false</code></p>\n<p>ç¬¬äºŒæ¬¡è°ƒç”¨ï¼Œ<code>generator</code>ä»ä¸Šæ¬¡<code>yield</code>è¡¨è¾¾å¼åœä¸‹æ¥çš„åœ°æ–¹ä¸€ç›´æ‰§è¡Œåˆ°ä¸‹ä¸€ä¸ª<code>yield</code>è¡¨è¾¾å¼ ğŸ‘† â€¦â€¦</p>\n<p>ç¬¬ä¸‰æ¬¡è°ƒç”¨ï¼Œ<code>generator</code>å‡½æ•°ä»ä¸Šæ¬¡<code>yield</code>è¡¨è¾¾å¼åœä¸‹æ¥çš„åœ°æ–¹ä¸€ç›´æ‰§è¡Œåˆ°<code>return</code>è¯­å¥ï¼Œ<code>next</code>è¿”å›çš„<code>value</code>å€¼å°±æ˜¯<code>return</code>åé¢è¡¨è¾¾å¼çš„å€¼ï¼Œ<code>done</code>ä¸º<code>true</code></p>\n<p><code>yield</code>è¡¨è¾¾å¼æœ¬èº«æ²¡æœ‰è¿”å›å€¼ï¼ˆæˆ–è€…è¯´æ€»æ˜¯è¿”å›<code>undefined</code>ï¼‰ã€‚<code>next</code>æ–¹æ³•å¯ä»¥å¸¦ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°ä¼šè¢«å½“ä½œ<strong>ä¸Šä¸€ä¸ª</strong><code>yield</code>è¡¨è¾¾å¼çš„è¿”å›å€¼</p>\n<h2 id=\"promise\">Promise</h2>\n<p>ES6æä¾›çš„ä¸€ç§å¼‚æ­¥ç¼–ç¨‹æ–¹æ¡ˆ</p>\n<p>ä¸€ä¸ª<code>Promise</code>å¯¹è±¡å¿…ç„¶å¤„äºä»¥ä¸‹ä¸‰ç§çŠ¶æ€ï¼š</p>\n<ul>\n<li>pendingï¼Œåˆå§‹çŠ¶æ€</li>\n<li>fulfilledï¼ŒæˆåŠŸ</li>\n<li>rejectedï¼Œå¤±è´¥</li>\n</ul>\n<p><code>pending</code>çŠ¶æ€çš„<code>Promise</code>å¯¹è±¡å¯ä»¥è½¬æ¢ä¸º<code>fulfilled</code>æˆ–<code>rejected</code>çŠ¶æ€ï¼Œè€Œä¸”æ­¤è¿‡ç¨‹æ˜¯ä¸å¯é€†çš„ã€‚å½“çŠ¶æ€å˜æ›´æ—¶ï¼Œ<code>then()</code>æ–¹æ³•æ³¨å†Œçš„å›è°ƒå°±ä¼šè¢«è°ƒç”¨</p>\n<p><code>then()</code> æˆ–è€… <code>catch()</code> çš„å‚æ•°æœŸæœ›æ˜¯å‡½æ•°ï¼Œä¼ â¼Šâ¾®å‡½æ•°åˆ™ä¼šå‘â½£å€¼é€ä¼ <code>(value =&gt; value)</code></p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">1</span>)\n .<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-number\">2</span>) <span class=\"hljs-comment\">// .then(1 =&gt; 1)</span>\n .<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">3</span>)) <span class=\"hljs-comment\">// .then(1 =&gt; 1)</span>\n .<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-property\">log</span>)\n<span class=\"hljs-comment\">// 1</span>\n</code></pre>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">fetch</span>(<span class=\"hljs-params\">url, options = {}</span>) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve, reject</span>) =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> xhr = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">XMLHttpRequest</span>();\n    xhr.<span class=\"hljs-title function_\">open</span>(options.<span class=\"hljs-property\">method</span> || <span class=\"hljs-string\">&#x27;GET&#x27;</span>, url);\n    <span class=\"hljs-keyword\">const</span> headers = { <span class=\"hljs-string\">&#x27;Content-Type&#x27;</span>: <span class=\"hljs-string\">&#x27;application/json&#x27;</span>, ...options.<span class=\"hljs-property\">headers</span> || {} };\n    <span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">ownKeys</span>(headers)\n      .<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">header</span>) =&gt;</span> xhr.<span class=\"hljs-title function_\">setRequestHeader</span>(header, headers[header]));\n    xhr.<span class=\"hljs-title function_\">send</span>(options.<span class=\"hljs-property\">method</span> === <span class=\"hljs-string\">&#x27;POST&#x27;</span> ? <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">stringify</span>(options.<span class=\"hljs-property\">data</span> || {}) : <span class=\"hljs-literal\">null</span>);\n    xhr.<span class=\"hljs-property\">onerror</span> = <span class=\"hljs-function\">(<span class=\"hljs-params\">e</span>) =&gt;</span> <span class=\"hljs-title function_\">reject</span>(e);\n    xhr.<span class=\"hljs-property\">onreadystatechange</span> = <span class=\"hljs-function\">() =&gt;</span> {\n      <span class=\"hljs-keyword\">if</span> (xhr.<span class=\"hljs-property\">readyState</span> === <span class=\"hljs-title class_\">XMLHttpRequest</span>.<span class=\"hljs-property\">DONE</span>\n        &amp;&amp; [<span class=\"hljs-number\">200</span>, <span class=\"hljs-number\">201</span>, <span class=\"hljs-number\">301</span>, <span class=\"hljs-number\">302</span>, <span class=\"hljs-number\">304</span>].<span class=\"hljs-title function_\">includes</span>(xhr.<span class=\"hljs-property\">status</span>)) {\n        <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">parse</span>(xhr.<span class=\"hljs-property\">responseText</span>));\n      }\n    };\n  });\n}\n<span class=\"hljs-title function_\">fetch</span>(<span class=\"hljs-string\">&#x27;http://localhost:3004/get&#x27;</span>).<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">res</span>) =&gt;</span> {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(res);\n}).<span class=\"hljs-title function_\">catch</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">e</span>) =&gt;</span> {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">error</span>(e);\n})\n</code></pre>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve,reject</span>)=&gt;</span>{\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;1&quot;</span>)\n    <span class=\"hljs-title function_\">resolve</span>();\n}).<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\">()=&gt;</span>{\n    <span class=\"hljs-comment\">// å¤–éƒ¨ç¬¬1ä¸ªthen</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;2&quot;</span>)\n    <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve,reject</span>)=&gt;</span>{\n        <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;3&quot;</span>)\n        <span class=\"hljs-title function_\">resolve</span>();\n    }).<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\">()=&gt;</span>{\n        <span class=\"hljs-comment\">// å†…éƒ¨ç¬¬1ä¸ªthen</span>\n        <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;4&quot;</span>)\n    }).<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\">() =&gt;</span> {\n        <span class=\"hljs-comment\">// å†…éƒ¨ç¬¬2ä¸ªthen</span>\n        <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;5&quot;</span>)\n    })\n}).<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">res</span>)=&gt;</span>{\n    <span class=\"hljs-comment\">// å¤–éƒ¨ç¬¬2ä¸ªthen</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;6&quot;</span>)\n})\n</code></pre>\n<p>ç®€å•æ¥è®²å°±æ˜¯thenå›è°ƒçš„æ³¨å†Œéœ€è¦ä¸Šä¸€ä¸ªthené‡Œé¢çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•</p>\n<p>æ‹¿ä¸Šé¢çš„ä»£ç æ¥è®²ï¼Œå½“å¤–éƒ¨ç¬¬1ä¸ªthené‡Œçš„resovle()æ‰§è¡Œå®Œæ¯•åï¼Œè¯¥Promiseçš„çŠ¶æ€å·²ç»æ›´æ”¹ï¼Œä¼šå°†å†…éƒ¨ç¬¬1ä¸ªthenå›è°ƒæ·»åŠ ï¼ˆæ³¨å†Œï¼‰åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼›å†…éƒ¨ç¬¬2ä¸ªthenç”±äºä¸Šä¸€ä¸ªthenå›è°ƒæ²¡æœ‰æ‰§è¡Œå®Œæ¯•ï¼Œå› æ­¤ä¸ä¼šæ³¨å†Œã€‚æ­¤æ—¶å¤–éƒ¨ç¬¬1ä¸ªthené‡Œçš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œä¼šæ³¨å†Œå¤–éƒ¨ç¬¬2ä¸ªthenå›è°ƒ</p>\n<p>æ•´ç†ä¸€ä¸‹ï¼šthenå›è°ƒæ³¨å†Œçš„é¡ºåºæ˜¯ï¼šå¤–éƒ¨ç¬¬1ä¸ªthen --&gt; å†…éƒ¨ç¬¬1ä¸ªthen --&gt; å¤–éƒ¨ç¬¬2ä¸ªthen --&gt; å†…éƒ¨ç¬¬2ä¸ªthen</p>\n<p>ps: å¦‚æœå°†å¤–éƒ¨ç¬¬1ä¸ªthené‡Œçš„new Promise(xxx)æ”¹ä¸ºreturn new Promise(xxx)çš„è¯å†…éƒ¨ç¬¬2ä¸ªthençš„æ³¨å†Œå°†æ—©äº* å¤–éƒ¨ç¬¬2ä¸ªthen*</p>\n<h2 id=\"asyncawait\">async/await</h2>\n<p>ç›®å‰æ¥è®²ï¼Œæœ€ä¸ºä¼˜ç§€çš„ä¸€ç§å¼‚æ­¥ç¼–ç¨‹æ–¹æ¡ˆï¼Œä¸ES2017æå‡º</p>\n<p>å®ç°ä¸Šæ˜¯<code>Generator</code>+<code>Promise</code>çš„è¯­æ³•ç³–</p>\n<p>é€šè¿‡åœ¨<code>onFulFilled()</code>é‡Œè°ƒç”¨<code>next()</code>ã€åœ¨<code>next()</code>é‡Œè°ƒç”¨<code>onFulfilled()</code>å½¢æˆä¸€ä¸ªè‡ªæ‰§è¡Œå™¨ï¼Œåªæœ‰å½“å…¨éƒ¨ä»£ç æ‰§è¡Œå®Œæ¯•åæ‰ä¼šç»ˆæ­¢</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">fn</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">try</span> {\n        <span class=\"hljs-keyword\">const</span> res = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">fetch</span>(<span class=\"hljs-string\">&#x27;http://localhost:3004/get&#x27;</span>);\n        <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(res);\n    } <span class=\"hljs-keyword\">catch</span> (e) {\n        <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">error</span>(e);\n    }\n}\n</code></pre>\n<p><code>async/await</code>åŸç†: <strong>è‡ªåŠ¨æ‰§è¡Œgeneratorå‡½æ•°</strong></p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">getData</span> = (<span class=\"hljs-params\"></span>) =&gt;\n  <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve</span>) =&gt;</span> <span class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-string\">&quot;data&quot;</span>), <span class=\"hljs-number\">1000</span>));\n\n<span class=\"hljs-keyword\">function</span>* <span class=\"hljs-title function_\">testG</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-comment\">// awaitè¢«ç¼–è¯‘æˆäº†yield</span>\n  <span class=\"hljs-keyword\">const</span> data = <span class=\"hljs-keyword\">yield</span> <span class=\"hljs-title function_\">getData</span>();\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;data: &quot;</span>, data);\n  <span class=\"hljs-keyword\">const</span> data2 = <span class=\"hljs-keyword\">yield</span> <span class=\"hljs-title function_\">getData</span>();\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;data2: &quot;</span>, data2);\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;success&quot;</span>;\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">asyncToGenerator</span>(<span class=\"hljs-params\">generatorFunc</span>) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">...args</span>) {\n    <span class=\"hljs-keyword\">const</span> gen = generatorFunc.<span class=\"hljs-title function_\">apply</span>(<span class=\"hljs-variable language_\">this</span>, args);\n\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve, reject</span>) =&gt;</span> {\n      <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">step</span>(<span class=\"hljs-params\">key, arg</span>) {\n        <span class=\"hljs-keyword\">let</span> generatorResult;\n        <span class=\"hljs-keyword\">try</span> {\n          generatorResult = gen[key](arg);\n        } <span class=\"hljs-keyword\">catch</span> (error) {\n          <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">reject</span>(error);\n        }\n\n        <span class=\"hljs-keyword\">const</span> { value, done } = generatorResult;\n\n        <span class=\"hljs-keyword\">if</span> (done) {\n          <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">resolve</span>(value);\n        } <span class=\"hljs-keyword\">else</span> {\n          <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">resolve</span>(value).<span class=\"hljs-title function_\">then</span>(\n            <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">onResolve</span>(<span class=\"hljs-params\">val</span>) {\n              <span class=\"hljs-title function_\">step</span>(<span class=\"hljs-string\">&quot;next&quot;</span>, val);\n            },\n            <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">onReject</span>(<span class=\"hljs-params\">err</span>) {\n              <span class=\"hljs-title function_\">step</span>(<span class=\"hljs-string\">&quot;throw&quot;</span>, err);\n            }\n          );\n        }\n      }\n      <span class=\"hljs-title function_\">step</span>(<span class=\"hljs-string\">&quot;next&quot;</span>);\n    });\n  };\n}\n\n<span class=\"hljs-keyword\">const</span> testGAsync = <span class=\"hljs-title function_\">asyncToGenerator</span>(testG);\n<span class=\"hljs-title function_\">testGAsync</span>().<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">result</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(result);\n});\n</code></pre>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise\">MDN-Promise</a></p>\n<p><a href=\"https://github.com/imtaotao/co-share\">co-share</a></p>\n"},{"title":"JavaScriptå¤ä¹ -0","tags":["JavaScript"],"categories":"2021å¤ä¹ ","description":"## JavaScriptæ•°æ®ç±»å‹\n\nåŸå§‹Primitiveç±»å‹ï¼š\n\n`Number`ã€`String`ã€`Boolean`ã€`Undefined`ã€`Null`ã€`Symbol`ã€`Bigint`\n\nå¼•ç”¨ç±»å‹\n\n`Object`ã€`Array`ã€`Date`ã€`Function` \n\n## Symbolå’ŒBigint\n\n`Symbol`è¡¨ç¤ºå”¯ä¸€ã€ä¸å¯å˜çš„å€¼ã€‚ç”¨äºç¡®ä¿å¯¹è±¡å±æ€§ä½¿ç”¨å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œä¸","createDate":"2021-05-07 14:34:34","updateDate":"2021-06-21 23:49:44","body":"<h2 id=\"javascriptæ•°æ®ç±»å‹\">JavaScriptæ•°æ®ç±»å‹</h2>\n<p>åŸå§‹Primitiveç±»å‹ï¼š</p>\n<p><code>Number</code>ã€<code>String</code>ã€<code>Boolean</code>ã€<code>Undefined</code>ã€<code>Null</code>ã€<code>Symbol</code>ã€<code>Bigint</code></p>\n<p>å¼•ç”¨ç±»å‹</p>\n<p><code>Object</code>ã€<code>Array</code>ã€<code>Date</code>ã€<code>Function</code> </p>\n<h2 id=\"symbolå’Œbigint\">Symbolå’ŒBigint</h2>\n<p><code>Symbol</code>è¡¨ç¤ºå”¯ä¸€ã€ä¸å¯å˜çš„å€¼ã€‚ç”¨äºç¡®ä¿å¯¹è±¡å±æ€§ä½¿ç”¨å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œä¸ä¼šå‘ç”Ÿå±æ€§åå†²çªçš„å±é™©</p>\n<p><code>BigInt</code>æ˜¯ä¸€ç§æ•°å­—ç±»å‹çš„æ•°æ®ï¼Œå®ƒå¯ä»¥è¡¨ç¤ºä»»æ„ç²¾åº¦æ ¼å¼çš„æ•´æ•°ï¼Œä½¿ç”¨<code>BigInt</code>å¯ä»¥å®‰å…¨åœ°å­˜å‚¨å’Œæ“ä½œå¤§æ•´æ•°ï¼Œå³ä½¿è¿™ä¸ªæ•°å·²ç»è¶…å‡ºäº† Number èƒ½å¤Ÿè¡¨ç¤ºçš„å®‰å…¨æ•´æ•°èŒƒå›´</p>\n<h2 id=\"var-vs-letconst\">var vs let/const</h2>\n<ul>\n<li>ä½œç”¨åŸŸé—®é¢˜</li>\n<li>é‡å¤å£°æ˜/èµ‹å€¼é—®é¢˜</li>\n<li>å˜é‡æå‡</li>\n<li>æš‚æ—¶æ€§æ­»åŒº</li>\n</ul>\n<h2 id=\"æ•°æ®å±æ€§è®¿é—®å™¨å±æ€§\">æ•°æ®å±æ€§/è®¿é—®å™¨å±æ€§</h2>\n<p>å¯¹è±¡çš„å±æ€§æœ‰ä¸¤ç§ç±»å‹ï¼Œ<strong>æ•°æ®å±æ€§</strong>å’Œ<strong>è®¿é—®å™¨å±æ€§</strong></p>\n<ul>\n<li>åˆ›å»ºå¯¹è±¡æ—¶é»˜è®¤å°±å­˜åœ¨çš„å±æ€§ä¸ºæ•°æ®å±æ€§</li>\n<li>é€šè¿‡<code>Object.defineProperty</code>è®¾ç½®çš„å±æ€§æè¿°ç¬¦ä¸­å«æœ‰<code>set/get</code>çš„å±æ€§ä¸ºè®¿é—®å™¨å±æ€§</li>\n</ul>\n<h2 id=\"å†…éƒ¨å±æ€§class\">å†…éƒ¨å±æ€§[[Class]]</h2>\n<p><a href=\"\">Object.prototype.toStringä¼ é€é—¨</a></p>\n<p><del>æ‰€æœ‰å¯¹è±¡(<code>typeof</code>è¿”å›ä¸º<code>object</code>)éƒ½åŒ…å«æœ‰ä¸€ä¸ªå†…éƒ¨å±æ€§<code>[[Class]]</code>ï¼Œè¯¥å±æ€§ä¸èƒ½ç›´æ¥è®¿é—®ï¼Œ\nå¯ä½¿ç”¨<code>Object.prototype.toString</code>æ¥æŸ¥çœ‹</del></p>\n<p><strong>ES6ç§»é™¤äº†è¿™ä¸ªå±æ€§</strong></p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">toString</span>.<span class=\"hljs-title function_\">call</span>([])  \n<span class=\"hljs-comment\">//&quot;[object Array]&quot;</span>\n\n<span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">toString</span>.<span class=\"hljs-title function_\">call</span>(<span class=\"hljs-function\">() =&gt;</span> {})\n<span class=\"hljs-comment\">// &quot;[object Function]&quot;</span>\n</code></pre>\n<h2 id=\"objectprototypetostring\">Object.prototype.toString</h2>\n<p>æ‹¿åˆ°å˜é‡å‡†ç¡®çš„ç±»å‹</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">toString</span>.<span class=\"hljs-title function_\">call</span>([])  \n<span class=\"hljs-comment\">//&quot;[object Array]&quot;</span>\n\n<span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">toString</span>.<span class=\"hljs-title function_\">call</span>(<span class=\"hljs-function\">() =&gt;</span> {})\n<span class=\"hljs-comment\">// &quot;[object Function]&quot;</span>\n\n<span class=\"hljs-comment\">/*\nåŸºæœ¬ç±»å‹å€¼stringã€numberã€booleanéƒ½å¯ä»¥æ‰“å°è¿™æ˜¯å› ä¸ºJavaScriptä¸ºåŸºæœ¬ç±»å‹å€¼åŒ…è£…\näº†ä¸€ä¸ªå°è£…å¯¹è±¡ä½¿å®ƒä»¬å˜æˆäº†å¯¹è±¡ï¼Œè€ŒString()ã€Number()ã€Boolean()ä¸Šæœ‰å±æ€§[[Class]]\n*/</span>\n<span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">toString</span>.<span class=\"hljs-title function_\">call</span>(<span class=\"hljs-number\">2</span>)\n<span class=\"hljs-comment\">// &quot;[object Number]&quot;</span>\n\n<span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">toString</span>.<span class=\"hljs-title function_\">call</span>(<span class=\"hljs-string\">&quot;a&quot;</span>)\n<span class=\"hljs-comment\">// &quot;[object String]&quot;</span>\n</code></pre>\n<p>å¯é€šè¿‡é‡å†™å˜é‡çš„toStringæ–¹æ³•ä¿®æ”¹è¾“å‡º</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> a = {\n    get [<span class=\"hljs-title class_\">Symbol</span>.<span class=\"hljs-property\">toStringTag</span>]() {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&#x27;A&#x27;</span>;\n    }\n}\n\n<span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">toString</span>.<span class=\"hljs-title function_\">call</span>(<span class=\"hljs-string\">&quot;a&quot;</span>)\n<span class=\"hljs-comment\">// &quot;[object A]&quot;</span>\n</code></pre>\n<h2 id=\"ä¸Šä¸‹æ–‡ã€ä½œç”¨åŸŸé“¾ã€é—­åŒ…\">ä¸Šä¸‹æ–‡ã€ä½œç”¨åŸŸé“¾ã€é—­åŒ…</h2>\n<p>ä¸Šä¸‹æ–‡ï¼šæ¯ä¸ªä¸Šä¸‹æ–‡éƒ½æœ‰ä¸€ä¸ªå…³è”çš„<strong>å˜é‡å¯¹è±¡(variable object)<strong>ï¼Œå­˜å‚¨è¿™ä¸ªä¸Šä¸‹æ–‡ä¸­å®šä¹‰çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°ã€‚å‡½æ•°å±€éƒ¨ä¸Šä¸‹æ–‡ä¸­çš„å«åš</strong>æ´»åŠ¨å¯¹è±¡(activity object)</strong>(æ´»åŠ¨å¯¹è±¡æœ€åˆåªæœ‰ä¸€ä¸ªå®šä¹‰å˜é‡<code>arguments</code>ï¼Œå…¨å±€ä¸Šä¸‹æ–‡ä¸­æ²¡æœ‰è¿™ä¸ªå˜é‡)ã€‚ä¸Šä¸‹æ–‡ä¼šåœ¨å…¶æ‰€æœ‰ä»£ç éƒ½æ‰§è¡Œå®Œæ¯•åè¢«é”€æ¯ï¼ˆå…¨å±€ä¸Šä¸‹æ–‡ä¼šåœ¨åº”ç”¨ç¨‹åºé€€å‡ºå‰æ‰ä¼šè¢«é”€æ¯ï¼Œæ¯”å¦‚å…³é—­ç½‘é¡µæˆ–é€€å‡ºæµè§ˆå™¨ï¼‰</p>\n<p>ä½œç”¨åŸŸé“¾ï¼šæ‰§è¡Œä¸Šä¸‹æ–‡çš„é›†åˆã€‚ä¸Šä¸‹æ–‡ä¸­çš„ä»£ç åœ¨æ‰§è¡Œæ—¶ä¼šåˆ›å»ºå˜é‡å¯¹è±¡çš„ä¸€ä¸ª<strong>ä½œç”¨åŸŸé“¾</strong>ï¼Œä»£ç æ­£åœ¨æ‰§è¡Œçš„ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡å§‹ç»ˆä½äºä½œç”¨åŸŸé“¾çš„æœ€å‰ç«¯ã€‚å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡å§‹ç»ˆä½äºä½œç”¨åŸŸé“¾å°¾éƒ¨</p>\n<p>é—­åŒ…ï¼ˆJSé«˜ç¨‹4ï¼‰ï¼šæŒ‡é‚£äº›å¼•ç”¨äº†å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„<strong>å‡½æ•°</strong>ã€‚åœ¨ä¸€ä¸ªå‡½æ•°å†…å®šä¹‰çš„å‡½æ•°ä¼šæŠŠå…¶åŒ…å«å‡½æ•°çš„æ´»åŠ¨(å˜é‡)å¯¹è±¡æ·»åŠ åˆ°è‡ªå·±çš„ä½œç”¨åŸŸé“¾ä¸­ï¼Œå¤–éƒ¨å‡½æ•°çš„æ´»åŠ¨(å˜é‡)å¯¹è±¡æ˜¯å†…éƒ¨å‡½æ•°ä½œç”¨åŸŸé“¾ä¸Šçš„ç¬¬äºŒä¸ªå¯¹è±¡ã€‚é—­åŒ…çš„æœ¬è´¨æ˜¯å†…éƒ¨å‡½æ•°åŠ é•¿äº†å…¶ä½œç”¨åŸŸé“¾</p>\n<p>é—­åŒ…ï¼ˆ<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Closures\">MDN</a>ï¼‰ï¼šä¸€ä¸ªå‡½æ•°å’Œå¯¹å…¶å‘¨å›´çŠ¶æ€ï¼ˆlexical environmentï¼Œè¯æ³•ç¯å¢ƒï¼‰çš„å¼•ç”¨æ†ç»‘åœ¨ä¸€èµ·ï¼ˆæˆ–è€…è¯´å‡½æ•°è¢«å¼•ç”¨åŒ…å›´ï¼‰ï¼Œè¿™æ ·çš„ç»„åˆå°±æ˜¯é—­åŒ…ï¼ˆclosureï¼‰</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">createComparisonFunction</span>(<span class=\"hljs-params\">propertyName</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">object1, object2</span>) {\n        <span class=\"hljs-keyword\">let</span> value1 = object1[propertyName];\n        <span class=\"hljs-keyword\">let</span> values = object2[propertyName];\n        \n        <span class=\"hljs-keyword\">if</span> (value1 &lt; value2) {\n            <span class=\"hljs-keyword\">return</span> -<span class=\"hljs-number\">1</span>;\n        } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (value1 &gt; value2) {\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">1</span>;\n        } <span class=\"hljs-keyword\">else</span> {\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>;\n        }\n    }\n}\n\n<span class=\"hljs-keyword\">let</span> compare = <span class=\"hljs-title function_\">createComparisonFunction</span>(<span class=\"hljs-string\">&quot;name&quot;</span>);\n<span class=\"hljs-keyword\">let</span> result = <span class=\"hljs-title function_\">compare</span>({ <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;Nicholas&quot;</span> }, { <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;&quot;</span><span class=\"hljs-title class_\">Matt</span> });\n</code></pre>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/closure.png\" alt=\"closure\"></p>\n<p>ä½œç”¨åŸŸå’Œä¸Šä¸‹æ–‡çš„åŒºåˆ«ï¼š</p>\n<p>ä½œç”¨åŸŸæ˜¯é™æ€çš„ï¼Œåªè¦å‡½æ•°å®šä¹‰å¥½äº†å°±ä¸€ç›´å­˜åœ¨å¹¶ä¸”ä¸å†å‘ç”Ÿå˜åŒ–ã€‚æ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯åŠ¨æ€çš„ï¼Œè°ƒç”¨å‡½æ•°æ—¶åˆ›å»ºï¼Œè°ƒç”¨ç»“æŸåä¼šé‡Šæ”¾</p>\n<h2 id=\"this\">this</h2>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/this.png\" alt=\"this\"></p>\n<ul>\n<li>å…ˆåˆ¤æ–­å‡½æ•°ç±»å‹(ç®­å¤´å‡½æ•°ï¼Ÿbindç”Ÿæˆï¼Ÿæ™®é€šå‡½æ•°ï¼Ÿ)</li>\n<li>æ™®é€šå‡½æ•°åˆ¤æ–­è°ƒç”¨æ–¹å¼(newï¼Ÿfoo()ï¼Ÿobj.foo()ï¼Ÿ)</li>\n<li>ä¸ç®¡ <code>bind</code> å‡ æ¬¡ï¼Œ<code>fn</code>ä¸­çš„<code>this</code>å§‹ç»ˆç”±ç¬¬ä¸€æ¬¡<code>bind</code>å†³å®š</li>\n<li>ç®­å¤´å‡½æ•°ä¸­çš„<code>this</code>ä¸€æ—¦è¢«ç»‘å®šå°±ä¸ä¼šå†æ”¹å˜</li>\n</ul>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">fn</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-variable language_\">this</span>?.<span class=\"hljs-property\">a</span>);\n}\n\n<span class=\"hljs-keyword\">let</span> a = <span class=\"hljs-number\">12</span>;\n\n<span class=\"hljs-keyword\">const</span> obj = {\n  <span class=\"hljs-attr\">a</span>: <span class=\"hljs-number\">13</span>,\n  fn\n};\n\n<span class=\"hljs-keyword\">const</span> obj2 = {\n  <span class=\"hljs-attr\">a</span>: <span class=\"hljs-number\">14</span>,\n  <span class=\"hljs-attr\">fn</span>: obj.<span class=\"hljs-property\">fn</span>,\n  <span class=\"hljs-title function_\">fn2</span>(<span class=\"hljs-params\"></span>) {\n      <span class=\"hljs-title function_\">fn</span>();\n  },\n};\n\n<span class=\"hljs-title function_\">fn</span>(); <span class=\"hljs-comment\">// undefined</span>\nobj.<span class=\"hljs-title function_\">fn</span>(); <span class=\"hljs-comment\">// 13</span>\nobj2.<span class=\"hljs-title function_\">fn</span>(); <span class=\"hljs-comment\">// 14</span>\nobj2.<span class=\"hljs-title function_\">fn2</span>(); <span class=\"hljs-comment\">// undefined</span>\n</code></pre>\n<h2 id=\"æ—¶çš„ç±»å‹è½¬æ¢\">==æ—¶çš„ç±»å‹è½¬æ¢</h2>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/%3D%3D%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2.png\" alt=\"==æ—¶çš„ç±»å‹è½¬æ¢\"></p>\n<h2 id=\"å¯¹è±¡è½¬åŸå§‹ç±»å‹\">å¯¹è±¡è½¬åŸå§‹ç±»å‹</h2>\n<p>å¯¹è±¡è½¬åŸå§‹ç±»å‹ä¼šè°ƒç”¨å†…ç½®çš„[[ToPrimitive]]å‡½æ•°ï¼š</p>\n<ol>\n<li>å¦‚æœå­˜åœ¨<code>Symbol.toPrimitive()</code>æ–¹æ³•ï¼Œè°ƒç”¨åè¿”å›</li>\n<li>è°ƒç”¨<code>valueOf()</code>ï¼Œå¦‚æœè½¬æ¢ä¸ºåŸå§‹ç±»å‹åˆ™è¿”å›ï¼ˆä½¿ç”¨<code>obj.valueOf = xxx</code>æ¥å®šä¹‰ï¼‰</li>\n<li>è°ƒç”¨<code>toString()</code>ï¼Œå¦‚æœè½¬æ¢ä¸ºåŸå§‹ç±»å‹åˆ™è¿”å›</li>\n<li>å¦‚æœéƒ½æ²¡æœ‰è¿”å›åŸå§‹ç±»å‹åˆ™æŠ¥é”™</li>\n</ol>\n<h2 id=\"åŸå‹\">åŸå‹</h2>\n<p>æ¯ä¸ªæ„é€ å‡½æ•°éƒ½æœ‰(<code>prototype</code>)ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼ŒåŸå‹æœ‰ä¸€ä¸ªå±æ€§(<code>constructor</code>)æŒ‡å›æ„é€ å‡½æ•°ï¼Œè€Œå®ä¾‹æœ‰ä¸€ä¸ªå†…éƒ¨æŒ‡é’ˆ(<code>__proto__</code>)æŒ‡å‘åŸå‹</p>\n<p>å¦‚æœåŸå‹æ˜¯å¦ä¸€ä¸ªç±»å‹çš„å®ä¾‹å‘¢ï¼Ÿé‚£å°±æ„å‘³ç€è¿™ä¸ªåŸå‹æœ¬èº«æœ‰ä¸€ä¸ªå†…éƒ¨æŒ‡é’ˆæŒ‡å‘å¦ä¸€ä¸ªåŸå‹ï¼Œç›¸åº”åœ°å¦‚æœå¦ä¸€ä¸ªåŸå‹ä¹Ÿæœ‰ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘å¦ä¸€ä¸ªæ„é€ å‡½æ•°ã€‚è¿™æ ·å°±åœ¨åŸå‹å’Œå®ä¾‹ä¹‹é—´æ„é€ äº†ä¸€æ¡åŸå‹é“¾ã€‚</p>\n<p><code>__proto_</code>_æŒ‡å‘<strong>æ„é€ å‡½æ•°</strong>çš„åŸå‹ï¼Œå­˜åœ¨äº<strong>å¯¹è±¡</strong>ä¸­ï¼ŒæŒ‡å‘<strong>åŸå‹</strong></p>\n<p><code>prototype</code>å­˜åœ¨äº<strong>å‡½æ•°</strong>ä¸­ï¼ŒæŒ‡å‘<strong>åŸå‹</strong></p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">User</span>(<span class=\"hljs-params\"></span>) {}\n\n<span class=\"hljs-keyword\">const</span> tom = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">User</span>();\n\ntom.<span class=\"hljs-property\">__proto__</span> === <span class=\"hljs-title class_\">User</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span> <span class=\"hljs-comment\">// true</span>\n<span class=\"hljs-title class_\">User</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">constructor</span> === <span class=\"hljs-title class_\">User</span> <span class=\"hljs-comment\">// true</span>\n</code></pre>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/prototype.png\" alt=\"åŸå‹\"></p>\n<p><a href=\"\">newçš„åŸç†åŠæ‰‹åŠ¨å®ç°</a>\n<a href=\"\">ç»§æ‰¿</a></p>\n<h2 id=\"new\">new</h2>\n<p>è¿‡ç¨‹ï¼š</p>\n<ol>\n<li>åœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºå¯¹è±¡</li>\n<li>è¿™ä¸ªæ–°å¯¹è±¡å†…éƒ¨çš„<code>__proto__</code>æŒ‡é’ˆè¢«èµ‹å€¼ä¸ºæ„é€ å‡½æ•°çš„<code>prototype</code>å€¼</li>\n<li>æ„é€ å‡½æ•°å†…éƒ¨çš„<code>this</code>è¢«èµ‹å€¼ä¸ºè¿™ä¸ªæ–°å¯¹è±¡ï¼ˆå³<code>this</code>æŒ‡å‘æ–°å¯¹è±¡ï¼‰</li>\n<li>æ‰§è¡Œæ„é€ å‡½æ•°å†…éƒ¨çš„ä»£ç ï¼ˆç»™æ–°å¯¹è±¡æ·»åŠ å±æ€§ï¼‰</li>\n<li>å¦‚æœæ„é€ å‡½æ•°è¿”å›éç©ºå¯¹è±¡ï¼Œåˆ™è¿”å›è¯¥å¯¹è±¡ï¼›å¦åˆ™è¿”å›åˆšåˆ›å»ºçš„æ–°å¯¹è±¡</li>\n</ol>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">create</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">let</span> obj = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Object</span>()\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-title class_\">Con</span> = [].<span class=\"hljs-property\">shift</span>.<span class=\"hljs-title function_\">call</span>(<span class=\"hljs-variable language_\">arguments</span>)\n    obj.<span class=\"hljs-property\">__proto__</span> = <span class=\"hljs-title class_\">Con</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>\n    <span class=\"hljs-keyword\">let</span> result = <span class=\"hljs-title class_\">Con</span>.<span class=\"hljs-title function_\">apply</span>(obj, <span class=\"hljs-variable language_\">arguments</span>)\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">typeof</span> result === <span class=\"hljs-string\">&#x27;object&#x27;</span> ? result : obj\n}\n</code></pre>\n"},{"title":"JavaScriptå¤ä¹ -æ¨¡å—åŒ–","tags":["JavaScript","æ¨¡å—åŒ–"],"categories":"2021å¤ä¹ ","description":"## æ¨¡å—åŒ–è§£å†³çš„é—®é¢˜\n\n- å¤–éƒ¨æ¨¡å—çš„ç®¡ç†\n- å†…éƒ¨æ¨¡å—çš„ç»„ç»‡\n- æ¨¡å—æºç åˆ°ç›®æ ‡ä»£ç çš„ç¼–è¯‘å’Œè½¬æ¢\n\n## æ—¶é—´çº¿\n\n|  ç”Ÿæ€  |  è¯ç”Ÿæ—¶é—´  |\n| -- | -- |\n|Node.js|2009|\n|NPM|2010|\n|requireJS(AMD)|2010|\n|seaJS(cmd)|2011|\n|browserify|2011|\n|webpack|2012|\n|grunt|20","createDate":"2021-05-12 04:30:39","updateDate":"2021-06-21 23:26:16","body":"<h2 id=\"æ¨¡å—åŒ–è§£å†³çš„é—®é¢˜\">æ¨¡å—åŒ–è§£å†³çš„é—®é¢˜</h2>\n<ul>\n<li>å¤–éƒ¨æ¨¡å—çš„ç®¡ç†</li>\n<li>å†…éƒ¨æ¨¡å—çš„ç»„ç»‡</li>\n<li>æ¨¡å—æºç åˆ°ç›®æ ‡ä»£ç çš„ç¼–è¯‘å’Œè½¬æ¢</li>\n</ul>\n<h2 id=\"æ—¶é—´çº¿\">æ—¶é—´çº¿</h2>\n<table>\n<thead>\n<tr>\n<th>ç”Ÿæ€</th>\n<th>è¯ç”Ÿæ—¶é—´</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Node.js</td>\n<td>2009</td>\n</tr>\n<tr>\n<td>NPM</td>\n<td>2010</td>\n</tr>\n<tr>\n<td>requireJS(AMD)</td>\n<td>2010</td>\n</tr>\n<tr>\n<td>seaJS(cmd)</td>\n<td>2011</td>\n</tr>\n<tr>\n<td>browserify</td>\n<td>2011</td>\n</tr>\n<tr>\n<td>webpack</td>\n<td>2012</td>\n</tr>\n<tr>\n<td>grunt</td>\n<td>2012</td>\n</tr>\n<tr>\n<td>gulp</td>\n<td>2013</td>\n</tr>\n<tr>\n<td>react</td>\n<td>2013</td>\n</tr>\n<tr>\n<td>vue</td>\n<td>2014</td>\n</tr>\n<tr>\n<td>angular</td>\n<td>2016</td>\n</tr>\n<tr>\n<td>vite</td>\n<td>2020</td>\n</tr>\n<tr>\n<td>snowpack</td>\n<td>2020</td>\n</tr>\n</tbody></table>\n<h2 id=\"å¤–éƒ¨æ¨¡å—çš„ç®¡ç†\">å¤–éƒ¨æ¨¡å—çš„ç®¡ç†</h2>\n<h3 id=\"scriptæ ‡ç­¾\">scriptæ ‡ç­¾</h3>\n<p>å¦‚æœæˆ‘ä»¬è¦åœ¨é¡¹ç›®é‡Œä½¿ç”¨æŸä¸ªå¤–éƒ¨æ¨¡å—ï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯å»å®˜ç½‘æŠŠç›¸å…³çš„jsæ–‡ä»¶ä¸‹è½½ä¸‹æ¥æ”¾åœ¨é¡¹ç›®ç›®å½•ï¼Œåœ¨è¦ä½¿ç”¨çš„htmlé¡µé¢é‡Œé€šè¿‡scriptæ ‡ç­¾å¼•ç”¨ã€‚è¿™æ ·ç®€å•ç²—æš´çš„æ–¹æ³•ç¼ºç‚¹æ˜æ˜¾ï¼š</p>\n<ul>\n<li>ä½¿ç”¨ä¸Šç¼ºä¹ä¾¿åˆ©æ€§</li>\n<li>éš¾ä»¥è·Ÿè¸ªå„ä¸ªå¤–éƒ¨æ¨¡å—çš„æ¥æº</li>\n<li>æ²¡æœ‰ç»Ÿä¸€çš„ç‰ˆæœ¬ç®¡ç†æœºåˆ¶</li>\n</ul>\n<h3 id=\"npm\">npm</h3>\n<p>2010å¹´ï¼Œnpmä¼´éšç€Node.jsçš„æ–°ç‰ˆæœ¬ä¸€èµ·å‘å¸ƒã€‚æ­¤åï¼Œå¤–éƒ¨æ¨¡å—ç®¡ç†ä»åŸå§‹ç¤¾ä¼šè¿›å…¥ç°ä»£ç¤¾ä¼šã€‚</p>\n<ul>\n<li>npmæ˜¯ä¸€ä¸ªè¿œç¨‹çš„JavaScriptä»£ç ä»“åº“ï¼Œæ‰€æœ‰çš„å¼€å‘è€…éƒ½å¯ä»¥å‘è¿™é‡Œæäº¤å¯å…±äº«çš„æ¨¡å—ï¼Œä¾›å…¶ä»–å¼€å‘è€…ä¸‹è½½ä½¿ç”¨</li>\n<li>npmè¿˜åŒ…å«ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œå¼€å‘è€…é€šè¿‡è¿è¡Œ<code>npm publish</code>å°†è‡ªå·±å†™çš„æ¨¡å—å‘å¸ƒåˆ°npmä»“åº“ï¼Œé€šè¿‡è¿è¡Œ<code>npm install xxx</code>å¯ä»¥å°†åˆ«äººçš„æ¨¡å—ä¸‹è½½åˆ°è‡ªå·±é¡¹ç›®æ ¹ç›®å½•ä¸‹ä¸€ä¸ªå«<code>node_modules</code>çš„æ–‡ä»¶å¤¹é‡Œ</li>\n</ul>\n<h2 id=\"å†…éƒ¨æ¨¡å—çš„ç»„ç»‡\">å†…éƒ¨æ¨¡å—çš„ç»„ç»‡</h2>\n<h3 id=\"scriptæ ‡ç­¾-1\">scriptæ ‡ç­¾</h3>\n<p>åŒå¼•å…¥å¤–éƒ¨æ¨¡å—ä¸€æ ·ï¼Œé€šè¿‡IIFEå»ç»„ç»‡å†…éƒ¨æ¨¡å—å¹¶é€šè¿‡<code>script</code>æ ‡ç­¾å¼•ç”¨</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// a.js</span>\n<span class=\"hljs-keyword\">var</span> moduleA = (<span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-comment\">// ...</span>\n})(<span class=\"hljs-variable language_\">window</span>);\n\n<span class=\"hljs-comment\">// b.js</span>\n<span class=\"hljs-keyword\">var</span> moduleB = (<span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-comment\">// ...</span>\n})(<span class=\"hljs-variable language_\">window</span>);\n</code></pre>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>&quot;/<span class=\"hljs-attr\">path</span>/<span class=\"hljs-attr\">to</span>/<span class=\"hljs-attr\">a.js</span>&quot;&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>&quot;/<span class=\"hljs-attr\">path</span>/<span class=\"hljs-attr\">to</span>/<span class=\"hljs-attr\">b.js</span>&quot;&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n</code></pre>\n<p>è¿™ç§ç®€å•ç²—æš´çš„æ–¹å¼ç¼ºç‚¹æ¯”è¾ƒæ˜æ˜¾ï¼š</p>\n<ul>\n<li>éšç€é¡¹ç›®æ‰©å¤§ï¼Œhtmlæ–‡ä»¶ä¸­ä¼šåŒ…å«å¤§é‡<code>script</code>æ ‡ç­¾</li>\n<li>æ¨¡å—é—´çš„å¤æ‚ä¾èµ–å…³ç³»ä»…é <code>script</code>æ ‡ç­¾å¼•ç”¨é¡ºåºæ¥ç»„ç»‡</li>\n<li>æ±¡æŸ“å…¨å±€ç¯å¢ƒï¼Œå¯èƒ½å­˜åœ¨å‘½åå†²çª</li>\n</ul>\n<h3 id=\"amdcmdcommonjsesm\">AMD&amp;CMD&amp;CommonJS&amp;ESM</h3>\n<p>AMD/CMDåªæ˜¯ä¸€ç§è®¾è®¡è§„èŒƒï¼Œè€Œä¸æ˜¯å®ç°ã€‚AMDçš„ä¸»è¦å®ç°æœ‰ä¸¤ä¸ª(RequireJSå’Œcurl.js)ï¼ŒCMDçš„ä¸»è¦å®ç°æœ‰(sea.js)</p>\n<h4 id=\"amdasynchronous-module-defineä¸»è¦åŒ…å«ä¸¤ä¸ªapiï¼šdefineå’Œrequire\">AMD(Asynchronous Module Define)ä¸»è¦åŒ…å«ä¸¤ä¸ªAPIï¼š<strong>define</strong>å’Œ<strong>require</strong></h4>\n<p>defineæ–¹æ³•ç”¨äºå®šä¹‰ä¸€ä¸ªæ¨¡å—ï¼Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š</p>\n<ul>\n<li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ•°ç»„è¡¨ç¤ºè¿™ä¸ªæ¨¡å—æ‰€ä¾èµ–çš„å…¶ä»–æ¨¡å—</li>\n<li>ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œé€šè¿‡å…¥å‚çš„æ–¹å¼å°†æ‰€ä¾èµ–æ¨¡å—çš„è¾“å‡ºä¾æ¬¡å–å‡ºï¼Œå¹¶åœ¨æ–¹æ³•å†…ä½¿ç”¨ï¼Œè¿”å›å€¼å°†ä½œä¸ºå…¶ä»–ä¾èµ–æ¨¡å—çš„å¼•ç”¨</li>\n</ul>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-title function_\">define</span>([<span class=\"hljs-string\">&#x27;Module1&#x27;</span>], <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"><span class=\"hljs-variable language_\">module</span></span>) {\n    <span class=\"hljs-keyword\">return</span> {\n    }\n}); \n\n<span class=\"hljs-built_in\">require</span>([<span class=\"hljs-string\">&#x27;math&#x27;</span>], <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">math</span>) {\nã€€ math.<span class=\"hljs-title function_\">sqrt</span>(<span class=\"hljs-number\">15</span>)\n});\n</code></pre>\n<p><code>define</code>èƒ½è‡ªå®šä¹‰æ¨¡å—è€Œ<code>require</code>åªèƒ½å¼•ç”¨å…¶ä»–æ¨¡å—ï¼Œ<code>require</code>çš„çœŸæ­£ä½œç”¨æ˜¯æ‰§è¡Œæ¨¡å—åŠ è½½</p>\n<p>AMDè§„èŒƒå»é™¤äº†çº¯ç²¹ç”¨scriptä¾¿ç­¾é¡ºç»„ç»„ç»‡æ¨¡å—å¸¦æ¥çš„é—®é¢˜</p>\n<ol>\n<li>é€šè¿‡ä¾èµ–æ•°ç»„çš„æ–¹å¼å£°æ˜ä¾èµ–å…³ç³»ï¼Œå…·ä½“ä¾èµ–å…³ç³»äº¤ç»™å…·ä½“çš„AMDæ¡†æ¶å¤„ç†</li>\n<li>é¿å…ç”Ÿå‘½å…¨å±€å˜é‡å¸¦æ¥çš„ç¯å¢ƒæ±¡æŸ“å’Œå˜é‡å†²çªé—®é¢˜</li>\n<li>æ¨¡å—å¼‚æ­¥åŠ è½½ï¼Œé˜²æ­¢JSåŠ è½½é˜»å¡é¡µé¢æ¸²æŸ“</li>\n</ol>\n<h4 id=\"cmdcommon-module-definition\">CMD(Common Module Definition)</h4>\n<p>æœ‰ä¸€ä¸ª<code>define</code>API,æ¥æ”¶ä¸€ä¸ª<code>factory</code>å›è°ƒå‡½æ•°ï¼Œæœ‰ä¸‰ä¸ªå‚æ•°ï¼š</p>\n<ul>\n<li>requireï¼šä¸€ä¸ªæ–¹æ³•æ ‡è¯†ç¬¦ï¼Œè°ƒç”¨å®ƒå¯ä»¥åŠ¨æ€çš„è·å–ä¸€ä¸ªä¾èµ–æ¨¡å—çš„è¾“å‡º</li>\n<li>exportsï¼šä¸€ä¸ªå¯¹è±¡ï¼Œç”¨äºå¯¹å…¶ä»–æ¨¡å—æä¾›è¾“å‡ºæ¥å£ï¼Œä¾‹å¦‚<code>exports.name = xxx</code></li>\n<li>moduleï¼šä¸€ä¸ªå¯¹è±¡ï¼Œå­˜å‚¨äº†å½“å‰æ¨¡å—ç›¸å…³çš„ä¸€äº›å±æ€§å’Œæ–¹æ³•ï¼Œå…¶ä¸­<code>module.exports</code>ç­‰åŒäº<code>exports</code></li>\n</ul>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-title function_\">define</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"><span class=\"hljs-built_in\">require</span>, <span class=\"hljs-built_in\">exports</span>, <span class=\"hljs-variable language_\">module</span></span>) {\n    <span class=\"hljs-keyword\">var</span> moduleA = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;/path/to/ModuleA&#x27;</span>);\n    <span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {}\n})\n</code></pre>\n<h4 id=\"cmdamdçš„åŒºåˆ«\">CMD&amp;AMDçš„åŒºåˆ«</h4>\n<p>ä¸€æ–¹é¢ï¼Œåœ¨ä¾èµ–çš„å¤„ç†ä¸Š</p>\n<ul>\n<li>AMDä¾èµ–å‰ç½®ï¼Œå³é€šè¿‡ä¾èµ–æ•°ç»„çš„æ–¹å¼æå‰å£°æ˜å½“å‰æ¨¡å—çš„ä¾èµ–</li>\n<li>CMDä¾èµ–å°±è¿‘ï¼Œåœ¨éœ€è¦ç”¨åˆ°çš„æ—¶å€™é€šè¿‡è°ƒç”¨<code>require</code>æ–¹æ³•åŠ¨æ€å¯¼å…¥</li>\n</ul>\n<p>å¦ä¸€æ–¹é¢ï¼Œåœ¨æœ¬æ¨¡å—çš„è¾“å‡ºä¸Š</p>\n<ul>\n<li>AMDé€šè¿‡è¿”å›å€¼çš„æ–¹å¼å¯¹å¤–è¾“å‡º</li>\n<li>CMDé€šè¿‡ç»™<code>module.exports</code>èµ‹å€¼çš„æ–¹å¼å¯¹å¤–è¾“å‡º</li>\n</ul>\n<h3 id=\"commonjsesm\">CommonJS&amp;ESM</h3>\n<p><code>CommonJS</code>æ˜¯Node.jsä½¿ç”¨çš„æ¨¡å—åŒ–æ–¹å¼</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> ramda = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;ramda&#x27;</span>);\n\n<span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {}\n</code></pre>\n<p><code>ESM</code>æ˜¯<code>ES6</code>æå‡ºçš„æ¨¡å—åŒ–æ–¹æ¡ˆ</p>\n<pre><code class=\"hljs language-js\">impot { clone } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;ramda&#x27;</span>;\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> {}\n</code></pre>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>CommonJS</th>\n<th>ESM</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>åŠ è½½æ—¶é—´</td>\n<td>è¿è¡Œæ—¶åŠ è½½</td>\n<td>ç¼–è¯‘æ—¶è¾“å‡ºæ¥å£</td>\n</tr>\n<tr>\n<td>è¾“å‡ºæ–¹å¼</td>\n<td>å€¼çš„æ‹·è´</td>\n<td>å€¼çš„å¼•ç”¨</td>\n</tr>\n</tbody></table>\n<h4 id=\"è¾“å‡ºæ–¹å¼æ¯”å¯¹\">è¾“å‡ºæ–¹å¼æ¯”å¯¹</h4>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// CommonJS</span>\n<span class=\"hljs-keyword\">let</span> a = <span class=\"hljs-number\">1</span>;\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">increaseA</span>(<span class=\"hljs-params\"></span>) {\n    a += <span class=\"hljs-number\">1</span>;\n}\n<span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = { a, increaseA };\n\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(a); <span class=\"hljs-comment\">// 1</span>\n<span class=\"hljs-title function_\">increaseA</span>();\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(a); <span class=\"hljs-comment\">// 1</span>\n\n<span class=\"hljs-comment\">// ESM</span>\n<span class=\"hljs-keyword\">let</span> b = <span class=\"hljs-number\">1</span>;\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">increaseB</span>(<span class=\"hljs-params\"></span>) {\n    b += <span class=\"hljs-number\">1</span>;\n}\n<span class=\"hljs-keyword\">export</span> { b, increaseB };\n\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(b); <span class=\"hljs-comment\">// 1</span>\n<span class=\"hljs-title function_\">increaseB</span>();\nconosle.<span class=\"hljs-title function_\">log</span>(b); <span class=\"hljs-comment\">// 2</span>\n</code></pre>\n<h3 id=\"webpackbrowserify\">webpack/browserify</h3>\n<p>AMD/CMDå¯ä»¥çœ‹ä½œåœ¨çº¿ç¼–è¯‘æ¨¡å—çš„æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯ç­‰æµè§ˆå™¨ä¸‹è½½äº†è¿™äº›jsæ–‡ä»¶åæ‰è¿›è¡Œæ¨¡å—ä¾èµ–åˆ†æï¼Œç¡®å®šåŠ è½½é¡ºåºå’Œæ‰§è¡Œé¡ºåºï¼Œå¸¦æ¥äº†ä¸€äº›é—®é¢˜</p>\n<ul>\n<li>å¢åŠ ä»£ç åŠ è½½æ—¶é—´ï¼Œå½±å“ç”¨æˆ·ä½“éªŒ</li>\n<li>httpè¯·æ±‚è¿‡å¤šï¼Œé™ä½é¡µé¢æ€§èƒ½</li>\n</ul>\n<p>äºæ˜¯æœ‰ä»¥ä¸‹å¯¹åº”æ–¹æ³•å»è§£å†³ï¼š</p>\n<ul>\n<li>æå‰å°†æ¨¡å—ç»„ç»‡å¥½</li>\n<li>è¿›è¡Œä»£ç åˆå¹¶ï¼ŒæŠŠå¤šä¸ª<code>script</code>çš„ä»£ç åˆå¹¶åˆ°å°‘æ•°å‡ ä¸ªæ–‡ä»¶ä¸­å‡å°‘httpè¯·æ±‚ä¸ªæ•°</li>\n</ul>\n<p>å…·æœ‰ä»£è¡¨æ€§çš„æ˜¯<code>webpack</code>å’Œ<code>browserify</code></p>\n<p><img src=\"http://mrrsblog.oss-cn-shanghai.aliyuncs.com/webpack.png\" alt=\"webpack\"></p>\n<p>æ‰“åŒ…å·¥å…·é¢ä¸´çš„é—®é¢˜&amp;&amp;è§£å†³æ–¹æ¡ˆ</p>\n<p><strong>æ‰“åŒ…åçš„æ–‡ä»¶ä½“ç§¯è¿‡å¤§</strong></p>\n<p>ä»£ç æ‰“åŒ…çš„åˆè¡·æ˜¯å‡å°‘AMD/CMDç­‰æ¡†æ¶é€ æˆçš„åŠ è½½è„šæœ¬æ•°é‡è¿‡å¤šçš„é—®é¢˜ï¼Œä½†ä¹Ÿå¸¦æ¥äº†æ‰“åŒ…åå•ä¸ªæ–‡ä»¶ä½“ç§¯è¿‡å¤§çš„é—®é¢˜ï¼šå¦‚æ­¤ä¸€æ¥ï¼Œé¦–å±åŠ è½½æ—¶é—´ç¼“æ…¢ï¼Œä½“éªŒè¾ƒå·®</p>\n<p>äºæ˜¯webpackå¼•å…¥äº†ä»£ç æ‹†åˆ†çš„åŠŸèƒ½(Code Splitting)æ¥è§£å†³è¿™ä¸ªé—®é¢˜, ä»å…¨éƒ¨æ‰“åŒ…åé€€ä¸€æ­¥ï¼šå¯ä»¥æ‰“åŒ…æˆå¤šä¸ªåŒ…</p>\n<ul>\n<li>ç¬¬ä¸‰æ–¹åº“å’Œä¸šåŠ¡ä»£ç çš„åˆ†ç¦»ï¼šä¸šåŠ¡ä»£ç æ›´æ–°é¢‘ç‡å¿«ï¼Œè€Œç¬¬ä¸‰æ–¹åº“ä»£ç æ›´æ–°é¢‘ç‡æ˜¯æ¯”è¾ƒæ…¢çš„ã€‚åˆ†ç¦»ä¹‹åå¯åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜æœºåˆ¶åŠ è½½ç¬¬ä¸‰æ–¹åº“ï¼Œä»è€ŒåŠ å¿«é¡µé¢è®¿é—®é€Ÿåº¦</li>\n<li>æŒ‰éœ€åŠ è½½: ä¾‹å¦‚æˆ‘ä»¬ç»å¸¸é€šè¿‡å‰ç«¯è·¯ç”±åˆ†å‰²ä¸åŒé¡µé¢ï¼Œé™¤äº†é¦–é¡µå¤–çš„å¾ˆå¤šé¡µé¢(è·¯ç”±)å¯èƒ½è®¿é—®é¢‘ç‡è¾ƒä½ï¼Œæˆ‘ä»¬å¯å°†å…¶ä»é¦–æ¬¡åŠ è½½çš„èµ„æºä¸­å»æ‰ï¼Œè€Œç­‰åˆ°ç›¸åº”çš„è§¦å‘æ—¶åˆ»å†å»åŠ è½½å®ƒä»¬ã€‚è¿™æ ·å°±å‡å°‘äº†é¦–å±èµ„æºçš„ä½“ç§¯ï¼Œæé«˜äº†é¡µé¢åŠ è½½é€Ÿåº¦ã€‚</li>\n</ul>\n<h3 id=\"bundlelesssnowpackvite\">bundleless(snowpack/vite)</h3>\n<p>åˆ©ç”¨ç°ä»£æµè§ˆå™¨å¯¹ES6æ™®éæ”¯æŒè‰¯å¥½çš„ç°çŠ¶ï¼Œå¼€å‘ç¯å¢ƒä¸‹ä¸è¿›è¡Œæ‰“åŒ…ã€‚å€ŸåŠ©æµè§ˆå™¨ ESM çš„èƒ½åŠ›ï¼Œä¸€äº›ä»£ç åŸºæœ¬å¯ä»¥åšåˆ°æ— éœ€æ„å»ºç›´æ¥è¿è¡Œã€‚ä»£è¡¨æ€§å·¥å…·æ˜¯viteå’Œsnowpack</p>\n<p>ä¸ºä»€ä¹ˆè¦æ‰“åŒ…ï¼Ÿ</p>\n<p>å¯¹äºæ—©æœŸçš„ web åº”ç”¨è€Œè¨€ï¼Œæ‰“åŒ…æ¨¡å—æ—¢èƒ½å¤Ÿå¤„ç† JS æ¨¡å—åŒ–ï¼Œåˆèƒ½å°†å¤šä¸ªæ¨¡å—æ‰“åŒ…åˆå¹¶ç½‘ç»œè¯·æ±‚ã€‚ä½¿ç”¨è¿™ç±»æ„å»ºå·¥å…·æ‰“åŒ…é¡¹ç›®çš„ç¡®æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚æ—¶è‡³ä»Šæ—¥åŸºæœ¬ä¸Šä¸»æµçš„æµè§ˆå™¨ç‰ˆæœ¬éƒ½æ”¯æŒ ESMï¼Œå¹¶ä¸”å¹¶å‘ç½‘ç»œè¯·æ±‚å¸¦æ¥çš„æ€§èƒ½é—®é¢˜ï¼Œåœ¨ HTTP/2 æ™®åŠä¸‹ä¸åƒä»¥å‰é‚£ä¹ˆå‡¸æ˜¾çš„æƒ…å†µä¸‹ï¼Œå¤§å®¶åˆå°†ç›®å…‰è½¬å‘äº† ESMã€‚å°±ç›®å‰çš„ä½“éªŒè€Œè¨€ï¼ŒåŸºäºåŸç”Ÿ ESM åœ¨å¼€å‘è¿‡ç¨‹ä¸­çš„æ„å»ºé€Ÿåº¦ä¼¼ä¹è¿œè¿œä¼˜äº webpack ä¹‹ç±»çš„æ‰“åŒ…å·¥å…·çš„ã€‚</p>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://zhuanlan.zhihu.com/p/265632724\">å‰ç«¯æ¨¡å—åŒ–çš„åå¹´å¾ç¨‹</a></p>\n<p><a href=\"https://juejin.cn/post/6947890290896142350\">ESM vs Webpack é¢å‘é«˜æ€§èƒ½æ„å»ºçš„æ¢ç´¢</a></p>\n"},{"title":"JavaScriptå¤ä¹ -1","tags":["JavaScript"],"categories":"2021å¤ä¹ ","description":"## Proxyå’ŒReflect\n\nå¯ä»¥ç»™ç›®æ ‡å¯¹è±¡å®šä¹‰ä¸€ä¸ªå…³è”çš„å¯¹è±¡ï¼Œè€Œè¿™ä¸ªä»£ç†å¯¹è±¡å¯ä»¥ä½œä¸ºæŠ½è±¡çš„ç›®æ ‡å¯¹è±¡æ¥ä½¿ç”¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨ä»£ç†å¯¹è±¡ä¸Šæ‰§è¡Œçš„æ‰€æœ‰æ“ä½œéƒ½ä¼šæ— éšœç¢åœ°ä¼ æ’­åˆ°ç›®æ ‡å¯¹è±¡ã€‚ä½¿ç”¨`new Proxy(target, handler)`æ¥åˆ›å»º\n\n`handler`å¯¹è±¡ä¸­æ‰€æœ‰å¯ä»¥æ•è·çš„æ–¹æ³•éƒ½æœ‰å¯¹åº”çš„åå°„`Reflect` APIæ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•ä¸æ•è·å™¨æ‹¦æˆªçš„æ–¹æ³•å…·æœ‰ç›¸åŒçš„åç§°ï¼Œä¹Ÿå…·æœ‰ä¸è¢«æ‹¦æˆªæ–¹","createDate":"2021-05-11 14:27:01","updateDate":"2021-06-15 23:15:37","body":"<h2 id=\"proxyå’Œreflect\">Proxyå’ŒReflect</h2>\n<p>å¯ä»¥ç»™ç›®æ ‡å¯¹è±¡å®šä¹‰ä¸€ä¸ªå…³è”çš„å¯¹è±¡ï¼Œè€Œè¿™ä¸ªä»£ç†å¯¹è±¡å¯ä»¥ä½œä¸ºæŠ½è±¡çš„ç›®æ ‡å¯¹è±¡æ¥ä½¿ç”¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨ä»£ç†å¯¹è±¡ä¸Šæ‰§è¡Œçš„æ‰€æœ‰æ“ä½œéƒ½ä¼šæ— éšœç¢åœ°ä¼ æ’­åˆ°ç›®æ ‡å¯¹è±¡ã€‚ä½¿ç”¨<code>new Proxy(target, handler)</code>æ¥åˆ›å»º</p>\n<p><code>handler</code>å¯¹è±¡ä¸­æ‰€æœ‰å¯ä»¥æ•è·çš„æ–¹æ³•éƒ½æœ‰å¯¹åº”çš„åå°„<code>Reflect</code> APIæ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•ä¸æ•è·å™¨æ‹¦æˆªçš„æ–¹æ³•å…·æœ‰ç›¸åŒçš„åç§°ï¼Œä¹Ÿå…·æœ‰ä¸è¢«æ‹¦æˆªæ–¹æ³•ç›¸åŒçš„è¡Œä¸º</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> target = {\n    <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&#x27;tom&#x27;</span>;\n}\n\n<span class=\"hljs-keyword\">const</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(target, {\n    <span class=\"hljs-attr\">get</span>: <span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-property\">get</span>,\n})\n</code></pre>\n<p><code>Proxy.prototype</code>ä¸º<code>undefined</code>ï¼Œå› æ­¤ä¸èƒ½ä½¿ç”¨<code>instanceof</code>æ“ä½œç¬¦ï¼Œä¼šæŠ›å‡º<code>TypeError</code></p>\n<p><code>Proxy.revocable</code>æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª<code>revoke</code>æ–¹æ³•ï¼Œç”¨æ¥æ’¤é”€ä»£ç†ã€‚æ’¤é”€ä»£ç†çš„æ“ä½œæ˜¯ä¸å¯é€†ã€å¹‚ç­‰çš„ï¼Œæ’¤é”€åå†æ¬¡è®¿é—®ä»£ç†ä¼šæŠ›å‡º<code>TypeError</code></p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> revocableProxy = <span class=\"hljs-title class_\">Proxy</span>.<span class=\"hljs-title function_\">revocable</span>({\n  <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&#x27;tom&#x27;</span>\n}, {\n  <span class=\"hljs-attr\">get</span>: <span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-property\">get</span>,\n  <span class=\"hljs-attr\">set</span>: <span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-property\">set</span>,\n});\n\nrevocableProxy.<span class=\"hljs-property\">proxy</span>.<span class=\"hljs-property\">name</span>; <span class=\"hljs-comment\">// tom</span>\nrevocableProxy.<span class=\"hljs-title function_\">revoke</span>();\nrevocableProxy.<span class=\"hljs-property\">proxy</span>.<span class=\"hljs-property\">name</span>; <span class=\"hljs-comment\">//TypeError</span>\n</code></pre>\n<h2 id=\"instanceofåŸç†\">instanceofåŸç†</h2>\n<p><strong>åŸå‹é“¾</strong>ã€‚é€šè¿‡æ£€æµ‹æ„é€ å‡½æ•°çš„<code>prototype</code>å±æ€§æ˜¯å¦å‡ºç°åœ¨æŸä¸ªå®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ä¸Šï¼Œè¿ç®—ç¬¦å·¦ä¾§æ˜¯å®ä¾‹å¯¹è±¡ï¼Œå³ä¾§æ˜¯æ„é€ å‡½æ•°</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">myInstanceof</span>(<span class=\"hljs-params\">instance, object</span>) {\n  <span class=\"hljs-keyword\">const</span> proto = <span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">getPrototypeOf</span>(instance);\n  <span class=\"hljs-keyword\">if</span> (proto === <span class=\"hljs-literal\">null</span>) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n  <span class=\"hljs-keyword\">if</span> (object.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span> === proto) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">myInstanceof</span>(proto, object);\n}\n</code></pre>\n<h2 id=\"é˜²æŠ–ã€èŠ‚æµ\">é˜²æŠ–ã€èŠ‚æµ</h2>\n<p>ä¸€ç§æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µï¼Œé¿å…å‡½æ•°è¿‡å¤šæ‰§è¡Œï¼ˆå¤šç”¨æ¥ä¼˜åŒ–æ»‘åŠ¨/ç‚¹å‡»äº‹ä»¶å›è°ƒï¼‰</p>\n<p>é˜²æŠ–:ï¼šåœ¨è§„å®šçš„æ—¶é—´å†…è‹¥å†æ¬¡è§¦å‘åˆ™é‡æ–°åŠæ—¶</p>\n<p>èŠ‚æµï¼šåœ¨è§„å®šçš„æ—¶é—´å†…è‹¥å†æ¬¡è§¦å‘(è§¦å‘é—´éš”å¤§äºè§„å®šçš„æ—¶é—´)åªä¼šæ‰§è¡Œä¸€æ¬¡</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">debounce</span>(<span class=\"hljs-params\">cb, timeout</span>) {\n  <span class=\"hljs-keyword\">let</span> timer = <span class=\"hljs-literal\">null</span>;\n  <span class=\"hljs-keyword\">let</span> canceled = <span class=\"hljs-literal\">false</span>;\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">_denounce</span>(<span class=\"hljs-params\">...args</span>) {\n    <span class=\"hljs-keyword\">let</span> res;\n    <span class=\"hljs-built_in\">clearTimeout</span>(timer);\n    <span class=\"hljs-keyword\">if</span> (canceled) {\n      res = cb.<span class=\"hljs-title function_\">apply</span>(<span class=\"hljs-variable language_\">this</span>, args);\n    } <span class=\"hljs-keyword\">else</span> {\n      timer = <span class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-function\">() =&gt;</span> {\n        res = cb.<span class=\"hljs-title function_\">apply</span>(<span class=\"hljs-variable language_\">this</span>, args);\n      }, timeout);\n    }\n\n    <span class=\"hljs-keyword\">return</span> res;\n  }\n\n  _denounce.<span class=\"hljs-property\">cancel</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    canceled = <span class=\"hljs-literal\">true</span>;\n  };\n\n  <span class=\"hljs-keyword\">return</span> _denounce;\n}\n</code></pre>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">throttle</span>(<span class=\"hljs-params\">cb, timeout</span>) {\n  <span class=\"hljs-keyword\">let</span> lastTime = <span class=\"hljs-number\">0</span>;\n  <span class=\"hljs-keyword\">let</span> canceled = <span class=\"hljs-literal\">false</span>;\n\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">_throttle</span>(<span class=\"hljs-params\">...args</span>) {\n    <span class=\"hljs-keyword\">const</span> now = <span class=\"hljs-title class_\">Date</span>.<span class=\"hljs-title function_\">now</span>();\n    <span class=\"hljs-keyword\">let</span> res;\n    <span class=\"hljs-keyword\">if</span> (canceled) {\n      res = cb.<span class=\"hljs-title function_\">apply</span>(<span class=\"hljs-variable language_\">this</span>, args);\n    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (lastTime + timeout &lt; now) {\n      lastTime = now;\n      res = cb.<span class=\"hljs-title function_\">apply</span>(<span class=\"hljs-variable language_\">this</span>, args);\n    }\n\n    <span class=\"hljs-keyword\">return</span> res;\n  }\n\n  _throttle.<span class=\"hljs-property\">cancel</span> = <span class=\"hljs-function\">() =&gt;</span> {\n    canceled = <span class=\"hljs-literal\">true</span>;\n  };\n\n  <span class=\"hljs-keyword\">return</span> _throttle;\n}\n</code></pre>\n<h2 id=\"å‡½æ•°çš„nameå±æ€§\">å‡½æ•°çš„nameå±æ€§</h2>\n<p>es6æ‰€æœ‰çš„å‡½æ•°éƒ½ä¼šæš´éœ²å‡ºä¸€ä¸ª<code>name</code>å±æ€§ï¼Œå…¶ä¸­åŒ…å«å…³äºå‡½æ•°çš„ä¿¡æ¯ã€‚å¤šæ•°å½¢å†µä¸‹è¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²åŒ–çš„å˜é‡åï¼Œç­‰äºè¯¥å‡½æ•°çš„åå­—ã€‚</p>\n<p>å¦‚æœä½¿ç”¨<code>Function</code>æ„é€ å‡½æ•°åˆ›å»ºçš„ï¼Œåˆ™ä¼šæ ‡è¯†æˆ<code>anonymous</code></p>\n<p>å¦‚æœå‡½æ•°æ˜¯ä¸€ä¸ª<code>get</code>ã€<code>set</code>æˆ–ä½¿ç”¨<code>bind()</code>å®ä¾‹åŒ–ï¼Œé‚£ä¹ˆæ ‡è¯†ç¬¦å‰ä¼šåŠ ä¸€ä¸ªå‰ç¼€</p>\n<h2 id=\"ç®­å¤´å‡½æ•°çš„ç‰¹æ€§\">ç®­å¤´å‡½æ•°çš„ç‰¹æ€§</h2>\n<ul>\n<li>ä¸èƒ½ä½¿ç”¨<code>arguments</code>ã€<code>super</code>ã€<code>new.target</code></li>\n<li>ä¸èƒ½ç”¨ä½œæ„é€ å‡½æ•°</li>\n<li>æ²¡æœ‰<code>prototype</code>å±æ€§</li>\n<li>æ²¡æœ‰<code>this</code></li>\n</ul>\n<h2 id=\"å‡½æ•°é‡è½½\">å‡½æ•°é‡è½½</h2>\n<p>JavaScriptä¸­æ²¡æœ‰å‡½æ•°é‡è½½ã€‚å› ä¸ºECMAScriptå‡½æ•°<strong>æ²¡æœ‰ç­¾å</strong>ï¼Œå‡½æ•°çš„å‚æ•°åœ¨å†…éƒ¨è¡¨ç°ä¸ºä¸€ä¸ªåŒ…å«é›¶ä¸ªæˆ–å¤šä¸ªå€¼çš„æ•°ç»„ã€‚</p>\n<h2 id=\"newtarget\">new.target</h2>\n<p>ES6æ–°å¢äº†æ£€æµ‹å‡½æ•°æ˜¯å¦ä½¿ç”¨<code>new</code>å…³é”®å­—è°ƒç”¨çš„<code>new.target</code>å±æ€§ã€‚å¦‚æœå‡½æ•°æ˜¯æ­£å¸¸è°ƒç”¨çš„<code>new.target</code>çš„å€¼æ˜¯<code>undefined</code>ï¼›å¦‚æœæ˜¯ä½¿ç”¨<code>new</code>å…³é”®å­—è°ƒç”¨çš„ï¼Œåˆ™<code>new.target</code>å°†å¼•ç”¨è¢«è°ƒç”¨çš„æ„é€ å‡½æ•°</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">User</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-keyword\">new</span>.<span class=\"hljs-property\">target</span>) {\n    <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Error</span>(errorMessage);\n  }\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(successMessage);\n}\n</code></pre>\n<h2 id=\"argumentscallee\">arguments.callee</h2>\n<p><del><code>arguments</code>å¯¹è±¡æœ‰ä¸€ä¸ª<code>callee</code>å±æ€§ï¼Œæ˜¯ä¸€ä¸ªæŒ‡å‘<code>arguments</code>å¯¹è±¡æ‰€åœ¨å‡½æ•°çš„æŒ‡é’ˆã€‚ä½¿ç”¨<code>arguments.callee</code>å¯ä»¥è®©å‡½æ•°é€»è¾‘ä¸å‡½æ•°åè§£è€¦ï¼š</del></p>\n<p>ä¸æ¨èä½¿ç”¨<code>arguments</code>ï¼ˆVSCode+eslintä½¿ç”¨æ—¶ä¼šæŠ¥é”™ï¼‰ï¼Œå› ä¸º<strong>è®¿é—®argumentsæ˜¯ä¸ªå¾ˆæ˜‚è´µçš„æ“ä½œï¼Œå®ƒæ˜¯ä¸ªå¾ˆå¤§çš„å¯¹è±¡</strong>ï¼Œæ¯æ¬¡é€’å½’è°ƒç”¨æ—¶éƒ½éœ€è¦é‡æ–°åˆ›å»ºï¼Œå½±å“ç°ä»£æµè§ˆå™¨çš„æ€§èƒ½ï¼Œè¿˜ä¼šå½±å“é—­åŒ…ã€‚æ¨èåˆ›å»ºä¸´æ—¶å‡½æ•°+é—­åŒ…å®ç°</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">factorial</span>(<span class=\"hljs-params\">num</span>) {\n  <span class=\"hljs-keyword\">let</span> tmp = num;\n  <span class=\"hljs-keyword\">if</span> (tmp &lt; <span class=\"hljs-number\">1</span>) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">1</span>;\n  <span class=\"hljs-keyword\">let</span> res = <span class=\"hljs-number\">1</span>;\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">fn</span>(<span class=\"hljs-params\"></span>) {\n    res *= tmp;\n    tmp -= <span class=\"hljs-number\">1</span>;\n    <span class=\"hljs-keyword\">if</span> (tmp !== <span class=\"hljs-number\">0</span>) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">fn</span>();\n    <span class=\"hljs-keyword\">return</span> res;\n  }\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">fn</span>();\n}\n</code></pre>\n<h2 id=\"å°¾è°ƒç”¨ä¼˜åŒ–\">å°¾è°ƒç”¨ä¼˜åŒ–</h2>\n<p>ES6æ–°å¢äº†ä¸€é¡¹å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œè®©JavaScriptå¼•æ“åœ¨æ»¡è¶³å“åº”æ¡ä»¶æ—¶å¯ä»¥é‡ç”¨æ ˆå¸§ã€‚å…·ä½“æ¥è¯´è¿™é¡¹ä¼˜åŒ–éå¸¸é€‚åˆ<em>å°¾è°ƒç”¨</em>å³<strong>å¤–éƒ¨å‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªå†…éƒ¨å‡½æ•°çš„è¿”å›å€¼</strong></p>\n<p>å°¾è°ƒç”¨ä¼˜åŒ–çš„æ¡ä»¶ï¼š</p>\n<ol>\n<li>ä»£ç åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹è¿è¡Œ</li>\n<li>å¤–éƒ¨å‡½æ•°çš„è¿”å›å€¼æ˜¯å¯¹å°¾è°ƒå‡½æ•°çš„å¼•ç”¨</li>\n<li>å°¾è°ƒç”¨å‡½æ•°è¿”å›åä¸éœ€è¦æ‰§è¡Œé¢å¤–çš„æ“ä½œ</li>\n<li>å°¾è°ƒç”¨å‡½æ•°æ²¡æœ‰äº§ç”Ÿé—­åŒ…(æ— æ³•é‡Šæ”¾å¤–éƒ¨å‡½æ•°çš„æ ˆå¸§)</li>\n</ol>\n<p>ä¼˜åŒ–<code>factorial</code></p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">factorialPerform</span>(<span class=\"hljs-params\">num</span>) {\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">fn</span>(<span class=\"hljs-params\">m, n</span>) {\n    <span class=\"hljs-keyword\">if</span> (n === <span class=\"hljs-number\">1</span>) <span class=\"hljs-keyword\">return</span> m;\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">fn</span>(m * n, n - <span class=\"hljs-number\">1</span>);\n  }\n\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">fn</span>(num, num - <span class=\"hljs-number\">1</span>);\n}\n</code></pre>\n<p>ä¼˜åŒ–<code>fib</code></p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">fib</span>(<span class=\"hljs-params\">num</span>) {\n  <span class=\"hljs-keyword\">if</span> (num &lt; <span class=\"hljs-number\">2</span>) <span class=\"hljs-keyword\">return</span> num;\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">fib</span>(num - <span class=\"hljs-number\">1</span>) + <span class=\"hljs-title function_\">fib</span>(num - <span class=\"hljs-number\">2</span>);\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">fibPerform</span>(<span class=\"hljs-params\">num</span>) {\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">fibImpl</span>(<span class=\"hljs-params\">m, n, x</span>) {\n    <span class=\"hljs-keyword\">if</span> (x === <span class=\"hljs-number\">0</span>) <span class=\"hljs-keyword\">return</span> m;\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">fibImpl</span>(n, m + n, x - <span class=\"hljs-number\">1</span>);\n  }\n\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">fibImpl</span>(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">1</span>, num);\n}\n</code></pre>\n<h2 id=\"jsonstringify\">JSON.stringify</h2>\n<p><code>JSON.stringify(value[, replacer [, space]])</code>ï¼Œå°†ä¸€ä¸ªJavaScriptå¯¹è±¡æˆ–å€¼è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²ï¼Œå¦‚æœæŒ‡å®šäº†<code>replacer</code>ï¼Œåˆ™å¯ä»¥é€‰æ‹©æ€§åœ°æ›¿æ¢å€¼ï¼Œæˆ–å°†æŒ‡å®šçš„<code>replacer</code>æ˜¯æ•°ç»„ï¼Œåˆ™å¯é€‰æ‹©æ€§åœ°ä»…åŒ…å«æ•°ç»„æŒ‡å®šçš„å±æ€§</p>\n<p>æ³¨æ„ï¼š</p>\n<ul>\n<li>å½“åœ¨<code>value</code>å­˜åœ¨å¾ªç¯å¼•ç”¨æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸<code>TypError(&quot;cyclic object value&quot;)</code></li>\n<li>å½“å°è¯•å»è½¬æ¢<code>BigInt</code>ç±»å‹çš„å€¼ä¼šæŠ›å‡º<code>TypeError(&quot;BigInt value can&#39;t be serialized in JSON&quot;)</code></li>\n<li>å¦‚æœ<code>vaule</code>å­˜åœ¨<code>toJSON()</code>æ–¹æ³•ï¼Œåˆ™è¿”å›è¯¥å‡½æ•°è¿”å›å€¼</li>\n<li>éæ•°ç»„å¯¹è±¡çš„å±æ€§ä¸èƒ½ä¿è¯ä»¥ç‰¹å®šçš„é¡ºåºå‡ºç°åœ¨åºåˆ—åŒ–åçš„å­—ç¬¦ä¸²ä¸­</li>\n<li><code>Boolean</code>ã€<code>Number</code>ã€<code>String</code>åŒ…è£…å¯¹è±¡ä¼šåœ¨åºåˆ—åŒ–è¿‡ç¨‹ä¸­è‡ªåŠ¨è½¬æ¢ä¸ºåŸå§‹å€¼</li>\n<li>éæ•°ç»„å¯¹è±¡çš„å±æ€§å€¼ä¸º<code>undefined</code>ã€ä»»æ„çš„å‡½æ•°ã€<code>symbol</code>ä¼šåœ¨åºåˆ—åŒ–ä¸­è¢«å¿½ç•¥ï¼Œæ•°ç»„å¯¹è±¡åˆ™ä¼šè½¬æ¢æˆ<code>null</code></li>\n<li><code>Map</code>ã€<code>Set</code>ã€<code>WeakMap</code>ã€<code>WeakSet</code>ä»…ä¼šåºåˆ—åŒ–å¯æšä¸¾å±æ€§</li>\n<li>å‡½æ•°ã€<code>undefined</code>è¢«å•ç‹¬è½¬æ¢æ—¶ä¼šè¿”å›<code>undefined</code></li>\n<li><code>Date</code>ç±»å‹ä¼šè½¬åŒ–ä¸º<code>Date.toISOString()</code>è¿”å›çš„å€¼</li>\n</ul>\n<p><code>replacer</code>ä¸ºå‡½æ•°æ—¶ï¼š</p>\n<ul>\n<li>å¦‚æœè¿”å›ä¸€ä¸ª<code>Number</code>ï¼Œè½¬æ¢ä¸ºç›¸åº”åœ°å­—ç¬¦ä¸²ä½œä¸ºå±æ€§å€¼è¢«æ·»åŠ åˆ°JSONå­—ç¬¦ä¸²</li>\n<li>å¦‚æœè¿”å›ä¸€ä¸ª<code>String</code>ï¼Œè¯¥å­—ç¬¦ä¸²ä½œä¸ºå±æ€§å€¼è¢«æ·»åŠ å…¥JSONå­—ç¬¦ä¸²</li>\n<li>å¦‚æœè¿”å›ä¸€ä¸ª<code>Boolean</code>ï¼Œ<code>true</code>æˆ–<code>false</code>ä½œä¸ºå±æ€§å€¼è¢«æ·»åŠ åˆ°JSONå­—ç¬¦ä¸²</li>\n<li>å¦‚æœè¿”å›å…¶ä»–å¯¹è±¡ï¼Œè¯¥å¯¹è±¡é€’å½’åœ°åºåˆ—åŒ–ä¸ºJSONå­—ç¬¦ä¸²ï¼Œå¯¹æ¯ä¸ªå±æ€§è°ƒç”¨<code>replacer</code>æ–¹æ³•ã€‚å¦‚æœè¯¥å¯¹è±¡æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™å¿½ç•¥</li>\n<li>å¦‚æœè¿”å›<code>undefined</code>åˆ™å¿½ç•¥</li>\n</ul>\n<h2 id=\"jsonp\">jsonp</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">jsonp</span>(<span class=\"hljs-params\">url</span>) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve</span>) =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> script = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createElement</span>(<span class=\"hljs-string\">&#x27;script&#x27;</span>);\n    <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">jsonpCallback</span> = <span class=\"hljs-function\">(<span class=\"hljs-params\">data</span>) =&gt;</span> {\n      <span class=\"hljs-title function_\">resolve</span>(data);\n      <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">body</span>.<span class=\"hljs-title function_\">removeChild</span>(script);\n    }\n    script.<span class=\"hljs-property\">src</span> = <span class=\"hljs-string\">`<span class=\"hljs-subst\">${url}</span><span class=\"hljs-subst\">${url.includes(<span class=\"hljs-string\">&#x27;?&#x27;</span>) ? <span class=\"hljs-string\">&#x27;&amp;&#x27;</span> : <span class=\"hljs-string\">&#x27;?&#x27;</span>}</span>cb=jsonpCallback`</span>;\n    <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">body</span>.<span class=\"hljs-title function_\">appendChild</span>(script);\n  })\n}\n</code></pre>\n<h2 id=\"å–æ¶ˆç½‘ç»œè¯·æ±‚\">å–æ¶ˆç½‘ç»œè¯·æ±‚</h2>\n<p>æ ¹æ®æ‰€ä½¿ç”¨çš„APIçš„ä¸åŒï¼Œæœ‰ä¸åŒçš„è§£å†³æ–¹æ¡ˆï¼š</p>\n<ul>\n<li><code>XMLHttpRequest</code>\n  ä½¿ç”¨<code>XMLHttpRequest.abort()</code><pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> xhr = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">XMLHttpRequest</span>();\nxhr.<span class=\"hljs-title function_\">open</span>(<span class=\"hljs-string\">&#x27;GET&#x27;</span>, <span class=\"hljs-string\">&#x27;url&#x27;</span>, <span class=\"hljs-literal\">true</span>);\nxhr.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-literal\">null</span>);\nxhr.<span class=\"hljs-title function_\">abort</span>();\n</code></pre>\n</li>\n<li><code>fetch</code>\n  ä½¿ç”¨<code>AbortController</code><pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> controller = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">AbortController</span>();\n<span class=\"hljs-keyword\">const</span> signal = controller.<span class=\"hljs-property\">signal</span>;\n<span class=\"hljs-title function_\">fetch</span>(<span class=\"hljs-string\">&#x27;url&#x27;</span>, { signal });\ncontroller.<span class=\"hljs-title function_\">abort</span>();\n</code></pre>\n</li>\n<li><code>axios</code>\n  ä½¿ç”¨<code>CancelToken</code><pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> source = axiox.<span class=\"hljs-property\">CancelToken</span>.<span class=\"hljs-title function_\">source</span>();\n<span class=\"hljs-keyword\">const</span> cancelToken = source.<span class=\"hljs-property\">token</span>;\n\naxios.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&#x27;url&#x27;</span>, { cancelToken });\nsource.<span class=\"hljs-title function_\">cancel</span>();\n</code></pre>\n</li>\n</ul>\n<h2 id=\"findindexå’Œindexof\">findIndexå’ŒindexOf</h2>\n<p><code>findIndex</code>æ ¹æ®æ‰€ç»™å‡½æ•°è¿›è¡ŒåŒ¹é…ï¼Œ<code>indexOf</code>ä½¿ç”¨<code>===</code>è¿›è¡ŒåŒ¹é…</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> students = [{ <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&#x27;tom&#x27;</span>, <span class=\"hljs-attr\">age</span>: <span class=\"hljs-number\">23</span> }, { <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&#x27;jerry&#x27;</span>, <span class=\"hljs-attr\">age</span>: <span class=\"hljs-number\">32</span> }]\n\nstudents.<span class=\"hljs-title function_\">indexOf</span>({ <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&#x27;tom&#x27;</span>, <span class=\"hljs-attr\">age</span>: <span class=\"hljs-number\">23</span> }) <span class=\"hljs-comment\">// -1</span>\nstudents.<span class=\"hljs-title function_\">findIndex</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">item</span>) =&gt;</span> item.<span class=\"hljs-property\">name</span> === <span class=\"hljs-string\">&#x27;tom&#x27;</span> &amp;&amp; item.<span class=\"hljs-property\">age</span> === <span class=\"hljs-number\">23</span>) <span class=\"hljs-comment\">// 0</span>\n</code></pre>\n<h2 id=\"tdzæš‚æ—¶æ€§æ­»åŒº\">TDZ(æš‚æ—¶æ€§æ­»åŒº)</h2>\n<p>åœ¨JavaScriptä¸­ï¼Œå½“æ§åˆ¶æµè¿›å…¥åˆ°å®ƒä»¬å‡ºç°çš„èŒƒå›´å†…ï¼Œæ‰€æœ‰ç»‘å®šéƒ½ä¼šè¢«å®ä¾‹åŒ–ã€‚ä¼ ç»Ÿçš„<code>var</code>å’Œ<code>function</code>å£°æ˜å…è®¸åœ¨å®é™…å£°æ˜ä¹‹å‰è®¿é—®é‚£äº›ç»‘å®šï¼Œå¹¶ä¸”å€¼ï¼ˆ<code>value</code>ï¼‰ä¸º<code>undefined</code>ã€‚è¿™ç§é—ç•™è¡Œä¸ºè¢«ç§°ä¸º<strong>å˜é‡æå‡ï¼ˆhostingï¼‰</strong>ã€‚<code>let</code>å’Œ<code>const</code>å£°æ˜ä¹Ÿä¼šè¢«å®ä¾‹åŒ–ï¼Œä½†<strong>è¿è¡Œåˆ°å®é™…å£°æ˜ä¹‹å‰ç¦æ­¢è®¿é—®</strong>ã€‚è¿™ç§°ä¸º<strong>æš‚æ—¶æ€§æ­»åŒº(TDZ)</strong></p>\n<h2 id=\"weakmap\">WeakMap</h2>\n<p>åœ¨JavaScriptä¸­ï¼Œmap APIå¯ä»¥é€šè¿‡ä½¿ç”¨å…¶å››ä¸ªAPIæ–¹æ³•å…±ç”¨ä¸¤ä¸ªæ•°ç»„ï¼ˆä¸€ä¸ªå­˜æ”¾keyï¼Œä¸€ä¸ªå­˜æ”¾valueï¼‰æ¥å®ç°ã€‚ç»™è¿™ç§mapè®¾ç½®valueæ—¶ä¼šåŒæ—¶å°†keyå’Œvalueæ·»åŠ åˆ°è¿™ä¸¤ä¸ªæ•°ç»„çš„å°¾éƒ¨ã€‚ä»è€Œä½¿å¾—keyå’Œvalueçš„ç´¢å¼•åœ¨ä¸¤ä¸ªæ•°ç»„ä¸­ç›¸å¯¹åº”ã€‚å½“ä»è¯¥mapå–å€¼çš„æ—¶å€™ï¼Œéœ€è¦éå†æ‰€æœ‰çš„keyï¼Œç„¶åå†ä½¿ç”¨ç´¢å¼•ä»å­˜å‚¨valueçš„æ•°ç»„ä¸­æ£€ç´¢å‡ºç›¸åº”çš„value</p>\n<p>ä½†è¿™æ ·çš„å®ç°ä¼šæœ‰ä¸¤ä¸ªå¾ˆå¤§çš„ç¼ºç‚¹ï¼Œé¦–å…ˆèµ‹å€¼å’Œæœç´¢æ“ä½œéƒ½æ˜¯O(n)çš„æ—¶é—´å¤æ‚åº¦ã€‚å¦ä¸€ä¸ªç¼ºç‚¹æ˜¯å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ï¼Œå› ä¸ºæ•°ç»„ä¼šä¸€ç›´å¼•ç”¨ç€æ¯ä¸ªkeyå’Œvalueã€‚è¿™ç§å¼•ç”¨ä½¿å¾—åƒåœ¾å›æ”¶ç®—æ³•ä¸èƒ½å›æ”¶å¤„ç†å®ƒä»¬ï¼Œå³ä½¿æ²¡æœ‰å…¶ä»–å¼•ç”¨å­˜åœ¨äº†</p>\n<p>ç›¸æ¯”ä¹‹ä¸‹ï¼ŒåŸç”Ÿçš„WeakMapæŒæœ‰çš„æ˜¯æ¯ä¸ªé”®å¯¹è±¡çš„<strong>å¼±å¼•ç”¨</strong>ï¼Œè¿™æ„å‘³ç€æ²¡æœ‰å…¶ä»–å¼•ç”¨å­˜åœ¨æ—¶åƒåœ¾å›æ”¶èƒ½æ­£ç¡®è¿›è¡Œã€‚åŸç”Ÿçš„WeakMapçš„ç»“æ„æ˜¯ç‰¹æ®Šä¸”<strong>æœ‰æ•ˆ</strong>çš„ï¼Œå…¶ç”¨äºæ˜ å°„çš„keyåªæœ‰åœ¨å…¶æ²¡æœ‰è¢«å›æ”¶æ—¶æ‰æ˜¯æœ‰æ•ˆçš„</p>\n<p>æ­£ç”±äºè¿™æ ·çš„å¼±å¼•ç”¨ï¼ŒWeakMapçš„keyæ˜¯<strong>ä¸å¯æšä¸¾</strong>çš„ï¼ˆæ²¡æœ‰åŠæ³•ç»™å‡ºæ‰€æœ‰çš„keyï¼Œkeyå–å†³äºåƒåœ¾å›æ”¶å™¨çš„çŠ¶æ€ï¼Œæ˜¯ä¸å¯é¢„çŸ¥çš„ï¼‰ã€‚å¦‚æœkeyæ˜¯å¯æšä¸¾çš„ï¼Œå…¶åˆ—è¡¨å°†ä¼šå—åƒåœ¾å›æ”¶æœºåˆ¶çš„å½±å“ï¼Œä»è€Œå¾—åˆ°ä¸ç¡®å®šçš„ç»“æœã€‚</p>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify\">mdn-JSON.stringify()</a></p>\n<p><a href=\"https://github.com/shfshanyue/Daily-Question/issues/502\">å¦‚ä½•å–æ¶ˆè¯·æ±‚çš„å‘é€</a></p>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/WeakMap\">mdn-WeakMap</a></p>\n"},{"title":"å‰ç«¯æ¶æ„&è½¯å®åŠ›å¤ä¹ -æœ‰é™çŠ¶æ€æœºå’ŒçŠ¶æ€ç®¡ç†","tags":["çŠ¶æ€ç®¡ç†","æœ‰é™çŠ¶æ€æœº"],"categories":"2021å¤ä¹ ","description":"## æœ‰é™çŠ¶æ€æœº\n\nåœ¨è®¡ç®—æœºç§‘å­¦ä¸­å¯¹è±¡è¡Œä¸ºå»ºæ¨¡çš„å·¥å…·ã€‚å…¶ä¸»è¦ä½œç”¨æ˜¯æè¿°å¯¹è±¡åœ¨å…¶ç”Ÿå‘½å‘¨æœŸå†…æ‰€ç»å†çš„çŠ¶æ€é˜Ÿåˆ—ä»¥åŠå¯¹å¤–ç•Œäº‹ä»¶çš„å“åº”\n\næœ‰é™çŠ¶æ€æœºæœ‰ä»¥ä¸‹åŸºæœ¬è¦ç´ ï¼š\n\n- å½“å‰çŠ¶æ€ã€‚\n- çŠ¶æ€è½¬ç§»å‡½æ•°ã€‚\n- æ‹¥æœ‰æœ‰é™ä¸ªå¯æšä¸¾çš„çŠ¶æ€ã€‚","createDate":"2021-05-20 14:10:46","updateDate":"2021-06-15 12:46:35","body":"<h2 id=\"æœ‰é™çŠ¶æ€æœº\">æœ‰é™çŠ¶æ€æœº</h2>\n<p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­å¯¹è±¡è¡Œä¸ºå»ºæ¨¡çš„å·¥å…·ã€‚å…¶ä¸»è¦ä½œç”¨æ˜¯æè¿°å¯¹è±¡åœ¨å…¶ç”Ÿå‘½å‘¨æœŸå†…æ‰€ç»å†çš„çŠ¶æ€é˜Ÿåˆ—ä»¥åŠå¯¹å¤–ç•Œäº‹ä»¶çš„å“åº”</p>\n<p>æœ‰é™çŠ¶æ€æœºæœ‰ä»¥ä¸‹åŸºæœ¬è¦ç´ ï¼š</p>\n<ul>\n<li>å½“å‰çŠ¶æ€ã€‚</li>\n<li>çŠ¶æ€è½¬ç§»å‡½æ•°ã€‚</li>\n<li>æ‹¥æœ‰æœ‰é™ä¸ªå¯æšä¸¾çš„çŠ¶æ€ã€‚</li>\n</ul>\n"},{"title":"ç®—æ³•å¤ä¹ -å¸¸ç”¨æ•°æ®ç»“æ„","tags":["ç®—æ³•"],"categories":"2021å¤ä¹ ","description":"## æ•°ç»„\n\nâ¼€ç»„è¿ç»­çš„å‚¨å­˜ç»“æ„ï¼Œâ½¤æ¥å‚¨å­˜åŒâ¼€ç§ç±»å‹çš„æ•°æ®\n\n- éšæœºè®¿é—®ï¼ŒO(1)\n- å¯¹æ’å…¥ã€åˆ é™¤ä¸å‹å¥½ï¼ŒO(n)\n\n``` js\nclass JSArray: public JSObject {}\n```\n\n`JSArray`æ˜¯ç»§æ‰¿â¾ƒ`JSObject`çš„ï¼Œæ‰€ä»¥åœ¨JavaScriptä¸­ï¼Œæ•°ç»„å¯ä»¥æ˜¯â¼€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œå†…éƒ¨ä¹Ÿæ˜¯ä»¥ `key-value`å½¢å¼å­˜å‚¨æ•°æ®ï¼Œæ‰€ä»¥JavaScriptä¸­çš„","createDate":"2021-06-08 13:35:13","updateDate":"2021-06-13 23:14:25","body":"<h2 id=\"æ•°ç»„\">æ•°ç»„</h2>\n<p>â¼€ç»„è¿ç»­çš„å‚¨å­˜ç»“æ„ï¼Œâ½¤æ¥å‚¨å­˜åŒâ¼€ç§ç±»å‹çš„æ•°æ®</p>\n<ul>\n<li>éšæœºè®¿é—®ï¼ŒO(1)</li>\n<li>å¯¹æ’å…¥ã€åˆ é™¤ä¸å‹å¥½ï¼ŒO(n)</li>\n</ul>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">JSArray</span>: public <span class=\"hljs-title class_\">JSObject</span> {}\n</code></pre>\n<p><code>JSArray</code>æ˜¯ç»§æ‰¿â¾ƒ<code>JSObject</code>çš„ï¼Œæ‰€ä»¥åœ¨JavaScriptä¸­ï¼Œæ•°ç»„å¯ä»¥æ˜¯â¼€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œå†…éƒ¨ä¹Ÿæ˜¯ä»¥ <code>key-value</code>å½¢å¼å­˜å‚¨æ•°æ®ï¼Œæ‰€ä»¥JavaScriptä¸­çš„æ•°ç»„å¯ä»¥å­˜æ”¾ä¸åŒç±»å‹çš„å€¼ã€‚</p>\n<p>JSArrayæœ‰ä¸¤ç§å­˜å‚¨æ–¹å¼ï¼š</p>\n<ul>\n<li>fastï¼ŒåŸºäº<code>FixedArray</code>ï¼Œ<code>push</code>å’Œ<code>pop</code>æ—¶å¯èƒ½ä¼šä¼´éšç€åŠ¨æ€æ‰©å®¹æˆ–å‡å®¹</li>\n<li>slowï¼ŒåŸºäº<code>HashTable</code>ï¼Œä»¥æ•°ç»„ä¸‹æ ‡ä½œä¸º<code>key</code></li>\n</ul>\n<p><code>FixedArray</code>æ˜¯V8å®ç°çš„â¼€ä¸ªç±»ä¼¼äºæ•°ç»„çš„ç±»ï¼Œå®ƒè¡¨ç¤ºâ¼€æ®µè¿ç»­çš„å†…å­˜ï¼Œå¯ä»¥ä½¿â½¤ç´¢å¼•ç›´æ¥å®šä½ã€‚æ–°åˆ›å»ºçš„ç©ºæ•°ç»„é»˜è®¤å°±æ˜¯å¿«æ•°ç»„ã€‚å½“æ•°ç»„æ»¡ï¼ˆæ•°ç»„çš„â»“åº¦è¾¾åˆ°æ•°ç»„åœ¨å†…å­˜ä¸­ç”³è¯·çš„å†…å­˜å®¹é‡æœ€â¼¤å€¼ï¼‰çš„æ—¶å€™ï¼Œç»§ç»­<code>push</code>æ—¶ï¼Œ<code>JSArray</code>ä¼šè¿›â¾åŠ¨æ€çš„æ‰©å®¹ï¼Œä»¥å­˜å‚¨æ›´å¤šçš„å…ƒç´ ã€‚å½“åŠ â¼Šçš„ç´¢å¼•å€¼<code>index</code>â½å½“å‰å®¹é‡ <code>capacity</code>å·®å€¼â¼¤äºç­‰äº1024æ—¶ï¼ˆ<code>index - capacity &gt;= 1024</code>ï¼‰æˆ–å¿«æ•°ç»„æ–°å®¹é‡æ˜¯æ‰©å®¹åçš„å®¹é‡3å€ä¹‹å¤šæ—¶ï¼Œå¿«æ•°ç»„ä¼šè¢«è½¬æˆæ…¢æ•°ç»„</p>\n<p>æ…¢æ•°ç»„ä»¥å“ˆå¸Œè¡¨çš„å½¢å¼å­˜å‚¨åœ¨å†…å­˜ç©ºé—´â¾¥ï¼Œå®ƒä¸éœ€è¦å¼€è¾Ÿè¿ç»­çš„å­˜å‚¨ç©ºé—´ï¼Œä½†éœ€è¦é¢å¤–ç»´æŠ¤â¼€ä¸ªå“ˆå¸Œè¡¨ï¼Œä¸å¿«æ•°ç»„ç›¸â½ï¼Œæ€§èƒ½ç›¸å¯¹è¾ƒå·®</p>\n<p><a href=\"https://blog.mrrs.top/blog/view/60bb53d1830576874275bbea\">å¸¸è§ç®—æ³•é¢˜</a></p>\n<h2 id=\"æ ˆ\">æ ˆ</h2>\n<p>â¼€ç§éµä»åè¿›å…ˆå‡º<code>(LIFO / Last In First Out)</code>åŸåˆ™çš„æœ‰åºé›†åˆ</p>\n<p>JavaScriptä½¿ç”¨(è°ƒç”¨)æ ˆæ¥ç®¡ç†å‡½æ•°<strong>æ‰§è¡Œä¸Šä¸‹â½‚</strong>ï¼Œå®ƒè®°å½•äº†å½“å‰å‡½æ•°æ‰§â¾çš„ä½ç½®ï¼Œå“ªä¸ªå‡½æ•°æ­£åœ¨è¢«æ‰§â¾ã€‚</p>\n<p>JavaScriptåŸºæœ¬ç±»å‹ä¿å­˜åœ¨æ ˆä¸­</p>\n<p><a href=\"https://dashboard.blog.mrrs.top/articles/60bf86a67da910d68a85abdd\">å¸¸è§ç®—æ³•é¢˜</a></p>\n<h2 id=\"é“¾è¡¨\">é“¾è¡¨</h2>\n<p>é“¾è¡¨ä¸éœ€è¦è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œå®ƒæ˜¯ç”±â¼€ç»„é›¶æ•£çš„å†…å­˜å—é€šè¿‡æŒ‡é’ˆè¿æ¥â½½æˆã€‚JavaScriptä¸­å¯ä»¥é€šè¿‡æ•°ç»„æ¥æ¨¡æ‹Ÿæ ˆ</p>\n<p>é“¾è¡¨æœ‰ä¸åŒçš„ç»“æ„ï¼Œå¸¸è§çš„æœ‰ï¼š</p>\n<ul>\n<li><p>å•é“¾è¡¨ï¼ŒèŠ‚ç‚¹æœ‰ä¸€ä¸ª<code>next</code>å±æ€§ï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚å°¾èŠ‚ç‚¹æŒ‡å‘<code>null</code></p>\n</li>\n<li><p>åŒé“¾è¡¨ï¼ŒèŠ‚ç‚¹æœ‰<code>next</code>å’Œ<code>pre</code>å±æ€§åˆ†åˆ«æŒ‡å‘ä¸Šä¸€ä¸ªå’Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹</p>\n</li>\n<li><p>å•å¾ªç¯é“¾è¡¨ï¼Œå’Œå•é“¾è¡¨ç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯å•å¾ªç¯é“¾è¡¨çš„å°¾èŠ‚ç‚¹æŒ‡å‘çš„æ˜¯å¤´èŠ‚ç‚¹</p>\n</li>\n<li><p>æŸ¥æ‰¾ï¼šä»å¤´èŠ‚ç‚¹å¼€å§‹æŸ¥æ‰¾ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n)</p>\n</li>\n<li><p>æ’â¼Šæˆ–åˆ é™¤ï¼šåœ¨æŸâ¼€èŠ‚ç‚¹åæ’â¼Šæˆ–åˆ é™¤â¼€ä¸ªèŠ‚ç‚¹ï¼ˆåç»§èŠ‚ç‚¹ï¼‰çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(1)</p>\n</li>\n</ul>\n<p>å¸¸ç»“åˆ<strong>åŒæŒ‡é’ˆ</strong>æ¥è§£å†³ç›¸å…³é—®é¢˜</p>\n<p><a href=\"https://blog.mrrs.top/blog/view/60bdaa0e8305760f4b75bbec\">å¸¸è§ç®—æ³•é¢˜</a></p>\n<h2 id=\"é˜Ÿåˆ—\">é˜Ÿåˆ—</h2>\n<p>å’Œæ ˆç±»ä¼¼ï¼Œéµå¾ªå…ˆè¿›å…ˆå‡º (FIFO) åŸåˆ™çš„æœ‰åºé›†åˆ</p>\n<ul>\n<li>æŸ¥æ‰¾ï¼šä»é˜Ÿå¤´å¼€å§‹æŸ¥æ‰¾ï¼Œä»æ—¶é—´å¤æ‚åº¦ä¸ºO(n)</li>\n<li>æ’â¼Šæˆ–åˆ é™¤ï¼šè¿›æ ˆä¸å‡ºæ ˆçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(1)</li>\n</ul>\n<p>å¸¸ç”¨æ¥å®ç°<strong>æ»‘åŠ¨çª—å£</strong>æ¥è§£å†³å®é™…é—®é¢˜</p>\n<p><a href=\"https://blog.mrrs.top/blog/view/60bf851d7da910c98785abdc\">å¸¸è§ç®—æ³•é¢˜</a></p>\n<h2 id=\"æ•£åˆ—è¡¨\">æ•£åˆ—è¡¨</h2>\n<p>è§£å†³çº¿æ€§è¡¨åœ¨æŸ¥æ‰¾æ—¶çš„æ€§èƒ½é—®é¢˜O(nlgn)~O(n)</p>\n<p>é€šè¿‡<strong>æ•£åˆ—ç®—æ³•</strong>ï¼Œå°†<strong>key</strong>è½¬æ¢ä¸º<strong>æ•£åˆ—å€¼</strong>ï¼Œè€Œåé€šè¿‡æ•£åˆ—å€¼å»<strong>æ•£åˆ—è¡¨</strong>ä¸­æŸ¥æ‰¾</p>\n<p>ğŸŒ°ï¼šé€šè¿‡å­¦å·010121å¯ä»¥çŸ¥é“å¯¹åº”çš„åŒå­¦åœ¨1å¹´çº§1ç­21å·</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/hash.png\" alt=\"æ•£åˆ—ç®—æ³•ã€keyã€æ•£åˆ—å€¼ã€æ•£åˆ—è¡¨çš„å…³ç³»\"></p>\n<h2 id=\"æ ‘\">æ ‘</h2>\n<p>ä¸€ç§éçº¿æ€§ç»“æ„</p>\n<h3 id=\"bst\">BST</h3>\n<p>äºŒå‰æœç´¢æ ‘</p>\n<p>åœ¨â¼†å‰æ ‘çš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†å¯¹â¼†å‰æ ‘ä¸ŠèŠ‚ç‚¹å­˜å‚¨ä½ç½®çš„é™åˆ¶ï¼š</p>\n<ul>\n<li>å·¦å­èŠ‚ç‚¹å€¼å°äºçˆ¶èŠ‚ç‚¹çš„å€¼</li>\n<li>å³èŠ‚ç‚¹çš„å€¼å¤§äºçˆ¶èŠ‚ç‚¹çš„å€¼</li>\n</ul>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/bst.png\" alt=\"BST\"></p>\n<p>åœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œâ¼†å‰æ ‘æ¯å¤šâ¼€å±‚ï¼Œå¯ä»¥å­˜å‚¨çš„å…ƒç´ éƒ½å¢åŠ â¼€å€ã€‚ä¹Ÿå°±æ˜¯è¯´ n ä¸ªå…ƒç´ çš„â¼†å‰æœç´¢æ ‘ï¼Œå¯¹åº”çš„æ ‘â¾¼ä¸º O(logn)ã€‚æ‰€ä»¥æˆ‘ä»¬æŸ¥æ‰¾å…ƒç´ ã€æ’â¼Šå…ƒç´ çš„æ—¶é—´ä¹Ÿä¸º O(logn)ã€‚å½“ç„¶è¿™æ˜¯ç†æƒ³æƒ…å†µä¸‹ï¼Œä½†åœ¨å®é™…åº”â½¤ä¸­ï¼Œå¹¶ä¸æ˜¯é‚£ä¹ˆç†æƒ³ï¼Œä¾‹å¦‚â¼€ç›´é€’å¢æˆ–é€’å‡çš„ç»™â¼€ä¸ªâ¼†å‰æŸ¥æ‰¾æ ‘æ’â¼Šæ•°æ®ï¼Œé‚£ä¹ˆæ‰€æœ‰æ’â¼Šçš„å…ƒç´ å°±ä¼šâ¼€ç›´å‡ºç°åœ¨â¼€ä¸ªæ ‘çš„å·¦èŠ‚ç‚¹ä¸Šï¼Œæ•°å‹ç»“æ„å°±ä¼šé€€åŒ–ä¸ºé“¾è¡¨ç»“æ„ï¼Œæ—¶é—´å¤æ‚åº¦å°±ä¼šè¶‹äº O(n)ï¼Œè¿™æ˜¯ä¸å¥½çš„ã€‚</p>\n<p>AVLæ ‘ç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜</p>\n<h3 id=\"avl\">AVL</h3>\n<p>å¹³è¡¡æœç´¢äºŒå‰æ ‘</p>\n<p>åœ¨äºŒå‰æœç´¢æ ‘çš„åŸºç¡€ä¸Šæ»¡â¾œå·¦å³â¼¦æ ‘â¾¼åº¦ä¸â¼¤äº1</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/avl.png\" alt=\"AVL\"></p>\n<h3 id=\"çº¢é»‘æ ‘\">çº¢é»‘æ ‘</h3>\n<p>çº¢é»‘æ ‘ä¹Ÿæ˜¯ä¸€ç§ç‰¹æ®Šçš„äºŒå‰æœç´¢æ ‘</p>\n<p>åœ¨äºŒå‰æœç´¢æ ‘çš„åŸºç¡€ä¸Šæ·»åŠ ä»¥ä¸‹é™åˆ¶ï¼š</p>\n<ul>\n<li>èŠ‚ç‚¹æ˜¯çº¢â¾Šæˆ–â¿Šâ¾Š</li>\n<li>æ ¹èŠ‚ç‚¹å¿…é¡»æ˜¯â¿Šâ¾ŠèŠ‚ç‚¹</li>\n<li>æ‰€æœ‰çš„å¶â¼¦èŠ‚ç‚¹éƒ½å¿…é¡»æ˜¯å€¼ä¸º<code>NULL</code>çš„â¿ŠèŠ‚ç‚¹</li>\n<li>å¦‚æœâ¼€ä¸ªèŠ‚ç‚¹æ˜¯çº¢â¾Šçš„ï¼Œåˆ™å®ƒä¸¤ä¸ªâ¼¦èŠ‚ç‚¹éƒ½æ˜¯â¿Šâ¾Šçš„</li>\n<li>ä»ä»»â¼€èŠ‚ç‚¹åˆ°è¾¾å®ƒçš„æ¯ä¸ªå¶â¼¦èŠ‚ç‚¹çš„æ‰€æœ‰çš„è·¯å¾„ï¼Œéƒ½æœ‰ç›¸åŒæ•°â½¬çš„â¿Šâ¾ŠèŠ‚ç‚¹</li>\n</ul>\n"},{"title":"å‰ç«¯æ¶æ„&è½¯å®åŠ›-301/302å¯¹SEOçš„å½±å“","tags":["é‡å®šå‘","SEO"],"categories":"å‰ç«¯æ¶æ„&è½¯å®åŠ›","description":"ç½‘ç«™ä¼˜åŒ–ä¸­ï¼Œç»å¸¸ä¼šé¢ä¸´ç½‘ç«™é“¾æ¥ä¿®æ”¹æˆ–æ”¹å˜çš„äº‹æƒ…ï¼Œå…¶ä¸­ä¸€ä¸ªè§£å†³åŠæ³•å°±æ˜¯ä½¿ç”¨ç½‘ç«™è·³è½¬çš„æ–¹å¼ï¼Œå¤„ç†å˜åŒ–çš„é“¾æ¥ï¼Œä¸‹é¢è®²è¿°301å’Œ302è·³è½¬å¯¹SEOçš„å½±å“ã€‚\n\n## 301ï¼ˆæ°¸ä¹…ï¼‰\n\nè¯·æ±‚çš„ç½‘é¡µå·²è¢«æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®ã€‚æœåŠ¡å™¨è¿”å›æ­¤å“åº”(ä½œä¸ºå¯¹GETæˆ–HEADè¯·æ±‚çš„å“åº”)æ—¶ï¼Œä¼šè‡ªåŠ¨å°†è¯·æ±‚è€…è½¬åˆ°æ–°ä½ç½®ã€‚ä½¿ç”¨æ­¤ä»£ç å¯é€šçŸ¥æœç´¢å¼•æ“ï¼ŒæŸä¸ªç½‘é¡µæˆ–ç½‘ç«™å·²è¢«æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®ã€‚\n\n## 302ï¼ˆä¸´æ—¶ï¼‰\n\næœåŠ¡å™¨ç›®å‰æ­£ä»ä¸åŒ","createDate":"2021-05-06 02:55:44","updateDate":"2021-06-12 12:41:03","body":"<p>ç½‘ç«™ä¼˜åŒ–ä¸­ï¼Œç»å¸¸ä¼šé¢ä¸´ç½‘ç«™é“¾æ¥ä¿®æ”¹æˆ–æ”¹å˜çš„äº‹æƒ…ï¼Œå…¶ä¸­ä¸€ä¸ªè§£å†³åŠæ³•å°±æ˜¯ä½¿ç”¨ç½‘ç«™è·³è½¬çš„æ–¹å¼ï¼Œå¤„ç†å˜åŒ–çš„é“¾æ¥ï¼Œä¸‹é¢è®²è¿°301å’Œ302è·³è½¬å¯¹SEOçš„å½±å“ã€‚</p>\n<h2 id=\"301ï¼ˆæ°¸ä¹…ï¼‰\">301ï¼ˆæ°¸ä¹…ï¼‰</h2>\n<p>è¯·æ±‚çš„ç½‘é¡µå·²è¢«æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®ã€‚æœåŠ¡å™¨è¿”å›æ­¤å“åº”(ä½œä¸ºå¯¹GETæˆ–HEADè¯·æ±‚çš„å“åº”)æ—¶ï¼Œä¼šè‡ªåŠ¨å°†è¯·æ±‚è€…è½¬åˆ°æ–°ä½ç½®ã€‚ä½¿ç”¨æ­¤ä»£ç å¯é€šçŸ¥æœç´¢å¼•æ“ï¼ŒæŸä¸ªç½‘é¡µæˆ–ç½‘ç«™å·²è¢«æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®ã€‚</p>\n<h2 id=\"302ï¼ˆä¸´æ—¶ï¼‰\">302ï¼ˆä¸´æ—¶ï¼‰</h2>\n<p>æœåŠ¡å™¨ç›®å‰æ­£ä»ä¸åŒä½ç½®çš„ç½‘é¡µå“åº”è¯·æ±‚ï¼Œä½†è¯·æ±‚è€…åº”ç»§ç»­ä½¿ç”¨åŸæœ‰ä½ç½®æ¥è¿›è¡Œä»¥åçš„è¯·æ±‚ã€‚æ­¤ä»£ç ä¸å“åº”GETå’ŒHEADè¯·æ±‚çš„301ä»£ç ç±»ä¼¼ï¼Œä¼šè‡ªåŠ¨å°†è¯·æ±‚è€…è½¬åˆ°ä¸åŒçš„ä½ç½®ã€‚ä½†ç”±äºæœç´¢å¼•æ“ä¼šç»§ç»­æŠ“å–åŸæœ‰ä½ç½®å¹¶å°†å…¶ç¼–å…¥ç´¢å¼•ï¼Œå› æ­¤å¦‚æœæŸä¸ªé¡µé¢æˆ–ç½‘ç«™å·²è¢«ç§»åŠ¨æ—¶ï¼Œä¸è¦ä½¿ç”¨æ­¤ä»£ç æ¥é€šçŸ¥æœç´¢å¼•æ“ã€‚</p>\n<p>åœ¨ä»¥ä¸‹æƒ…å†µä¸‹é€‚åˆä½¿ç”¨302:</p>\n<ol>\n<li><p>ç½‘ç«™å‘ç”Ÿæ•…éšœæ—¶ï¼Œç»™å‡ºæ–°çš„ä¸´æ—¶åœ°å€è®©ç”¨æˆ·è®¿é—®</p>\n</li>\n<li><p>æµ‹è¯•ç½‘ç«™çš„æ–°åŠŸèƒ½æˆ–ç½‘ç«™é¡µé¢æ—¶</p>\n</li>\n</ol>\n<h2 id=\"æ€ä¹ˆç†è§£301302è·³è½¬\">æ€ä¹ˆç†è§£301/302è·³è½¬</h2>\n<p>è·³è½¬ä½¿ç”¨æƒ…å†µï¼šå‡å¦‚åŸå…ˆæœ‰ä¸ªé¡µé¢çš„åœ°å€æ˜¯<code>http://www.xxxx.com/A.html</code>ï¼ˆä¸‹é¢ç®€ç§°Aé¡µé¢ï¼‰ï¼Œç°åœ¨å› ä¸šåŠ¡éœ€è¦è®¾ç½®æˆ<code>http://www.xxxx.com/B.html</code>ï¼ˆä¸‹é¢ç®€ç§°Bé¡µé¢ï¼‰ï¼Œè™½ç„¶å¯¹äºè®¿é—®è€…æ¥è¯´æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œä½†æ˜¯å¯¹äºæœç´¢å¼•æ“æ¥è¯´ï¼Œç”±äºAé¡µé¢å’ŒBé¡µé¢æ˜¯ä¸åŒçš„é¡µé¢ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å‘Šè¯‰æœç´¢å¼•æ“ï¼ŒBé¡µé¢å°±æ˜¯åŸæ¥çš„Aé¡µé¢ï¼Œè¿™æ—¶å°±éœ€è¦ä½¿ç”¨è·³è½¬çš„æ–¹å¼æ¥å¤„ç†ï¼Œå¯ä»¥éœ€è¦é€‰æ‹©301æˆ–è€…302ï¼Œä»–ä»¬çš„åŒºåˆ«åœ¨äºï¼š</p>\n<ul>\n<li><p>ä½¿ç”¨301è¡¨ç¤ºæ°¸ä¹…æ€§è·³è½¬ï¼Œå¦‚æœAé¡µé¢å·²ç»è¢«æœç´¢å¼•æ“æ”¶å½•äº†ï¼Œé‚£ä¹ˆæœç´¢å¼•æ“ä¼šçŸ¥é“ä»¥åå†ä¹Ÿæ²¡æœ‰Aé¡µé¢è¿™ä¸ªé¡µé¢äº†ï¼Œå®ƒå·²ç»è½¬ç§»åˆ°Bé¡µé¢ä¸Šå»äº†ï¼Œæœç´¢å¼•æ“ä¼šæŠŠåŸæ¥å¯¹äº<strong>Aé¡µé¢çš„æ’åæƒé‡è½¬ç§»åˆ°Bé¡µé¢ä¸Šå»</strong>ï¼Œå¹³ç¨³è¿‡æ¸¡ï¼Œç„¶ååœ¨æœç´¢å¼•æ“çš„æ•°æ®åº“ä¸­åˆ é™¤Aé¡µé¢ï¼Œæ›¿æ¢æˆBé¡µé¢ã€‚</p>\n</li>\n<li><p>ä½¿ç”¨302è¡¨ç¤ºæš‚æ—¶æ€§è·³è½¬ï¼Œ302ä¸301çš„åŒºåˆ«åœ¨äºï¼Œæœç´¢å¼•æ“çš„æ•°æ®åº“ä¸ä¼šåˆ é™¤Aé¡µé¢ï¼Œä½†ä»ä¼šå¢åŠ Bé¡µé¢ã€‚</p>\n</li>\n</ul>\n<h2 id=\"ä¸ä½¿ç”¨301ã€302çš„åæœ\">ä¸ä½¿ç”¨301ã€302çš„åæœ</h2>\n<p>å¦‚æœç½‘ç«™ç®¡ç†å‘˜ä¿®æ”¹äº†é¡µé¢é“¾æ¥ï¼Œå°†Aé¡µé¢æ”¹æˆäº†Bé¡µé¢ï¼Œä½†æ˜¯æ²¡æœ‰åœ¨æœåŠ¡å™¨ä¸Šè®¾ç½®è·³è½¬å±æ€§ï¼ˆIISã€Apacheã€Websphereç­‰ç­‰ï¼‰ï¼Œé‚£ä¹ˆè™½ç„¶å¯¹äºç”¨æˆ·è®¿é—®æ˜¯æ²¡æœ‰å½±å“ï¼Œä½†æ˜¯æœç´¢å¼•æ“å¹¶ä¸çŸ¥é“ï¼Œä¼šå¯¼è‡´ä¸¤ä¸ªä¸å¥½çš„ç»“æœï¼š</p>\n<p>å®ƒä»ç„¶ä¼šè¯•å›¾å»è®¿é—®åŸæ¥çš„Aé¡µé¢ï¼ˆæœ‰ä¸¤ç§å¯èƒ½ï¼š1.æœç´¢å¼•æ“æ•°æ®åº“è¿˜æ²¡æœ‰æ›´æ–°ï¼Œä»ç„¶ä¿ç•™ç€Aé¡µé¢ï¼Œå› æ­¤ä¼šå»è®¿é—®ã€‚2.å¤–é¢æœ‰äº›ç½‘ç«™çš„å‹æƒ…é“¾æ¥ä»ç„¶æ˜¯Aé¡µé¢ï¼Œæœç´¢å¼•æ“çˆ¬åˆ°ä¹‹åå°±ä»ç„¶å»è®¿é—®Aé¡µé¢ï¼‰ï¼Œç»“æœå‘ç°æˆäº†404çŠ¶æ€ï¼Œç”±äº404è¡¨ç¤ºç½‘ç«™å‡ºé”™ï¼Œæœç´¢å¼•æ“è®¤ä¸ºç½‘ç«™æ²¡æœ‰åšå¥½ï¼Œå› æ­¤å°±ä¼šç»™äºˆç½‘ç«™æƒ©ç½šï¼Œç½‘ç«™çš„æ’åå°±ä¼šä¸‹é™ã€‚</p>\n<p>è¿‡äº†ä¸€æ®µæ—¶é—´ï¼Œæœç´¢å¼•æ“å‘ç°äº†ç½‘ç«™å¤šäº†ä¸€ä¸ªBé¡µé¢ï¼Œå¹¶è¿›è¡Œäº†æ”¶å½•ï¼Œä½†æ˜¯ç”±äºæ²¡æœ‰è®¾ç½®è·³è½¬ï¼Œå› æ­¤å®ƒè®¤ä¸ºè¿™æ˜¯å…¨æ–°çš„é¡µé¢ï¼Œè·ŸåŸæ¥çš„Aé¡µé¢æ²¡æœ‰å…³ç³»ï¼ŒåŸæ¥Aé¡µé¢çš„æ’åå°±ä¸ä¼šä¼ å¯¼ç»™Bé¡µé¢ï¼ŒBé¡µé¢å°±è¦é‡æ–°å¼€å§‹æ’åçš„è®¡ç®—ï¼Œä¸€èˆ¬æ¥è¯´éœ€è¦3ä¸ªæœˆå·¦å³ï¼Œå‡å¦‚Aé¡µé¢åŸæ¥çš„æ’åä¸é”™ï¼Œé‚£Bé¡µé¢é‡æ–°å¼€å§‹è®¡ç®—ï¼Œå°±ä¼šéå¸¸åƒäºã€‚</p>\n<h2 id=\"ä½¿ç”¨301302ä¸å½“çš„åæœ\">ä½¿ç”¨301/302ä¸å½“çš„åæœ</h2>\n<p>ä»è¡¨é¢ä¸Šçœ‹ï¼Œ302æ¯”301æ›´å‹å¥½ï¼Œä½†å› ä¸º302æ˜¯æš‚æ—¶æ€§è·³è½¬çš„å«ä¹‰ï¼Œå¦‚æœè¢«ç”¨æ¥åšé•¿æœŸè·³è½¬ï¼Œæœç´¢å¼•æ“å°±ä¼šè®¤ä¸ºè¿™æ˜¯ç½‘ç«™åœ¨åˆ©ç”¨302è·³è½¬è½¬ç§»Aé¡µé¢çš„æƒé‡ï¼Œä¸ºBé¡µé¢ä½œå¼Šï¼Œå°±ä¼šç»™äºˆç½‘ç«™æƒ©ç½šã€‚ç”±äºæœç´¢å¼•æ“å¯¹äºè·³è½¬æ—¶é—´åˆ¤æ–­è§„åˆ™çš„ä¸ç¡®å®šï¼Œå› æ­¤ä¸å»ºè®®ä½¿ç”¨302è·³è½¬ã€‚</p>\n<p>å‚è€ƒï¼š</p>\n<p><a href=\"https://www.cnblogs.com/datang6777/p/7243088.html\">301 å’Œ 302 å¯¹ SEO çš„å½±å“</a></p>\n<p><a href=\"https://www.feiniaomy.com/post/531.html\">301é‡å®šå‘å¯¹ç½‘ç«™SEOçš„å½±å“</a></p>\n"},{"title":"ç½‘ç»œå¤ä¹ -0","tags":["keep-alive","å¤šè·¯å¤ç”¨"],"categories":"2021å¤ä¹ ","description":"## keep-alive\n\nhttpåè®®æ˜¯å»ºç«‹åœ¨tcpåè®®ä¸Šçš„åº”ç”¨å±‚åè®®ï¼Œhttpåè®®çš„æ—©æœŸç‰ˆæœ¬(HTTP/0.9å’Œæ—©æœŸHTTP/1.0)æœ€åˆæ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„åè®®ï¼Œé€šä¿¡æ–¹å¼ä¹Ÿæ˜¯é‡‡ç”¨ç®€å•çš„è¯·æ±‚-åº”ç­”æ¨¡å¼ï¼Œå³ï¼šå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨çš„æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦å»ºç«‹è¿æ¥ï¼ŒæœåŠ¡å™¨å“åº”åå³æ–­å¼€ï¼Œå†è¯·æ±‚å†é‡æ–°åˆ›å»º\n\n![httpå¤šæ¬¡åˆ›å»ºtcp](http://mrrsblog.oss-cn-shanghai.aliyunc","createDate":"2021-05-19 04:51:30","updateDate":"2021-06-11 18:39:18","body":"<h2 id=\"keep-alive\">keep-alive</h2>\n<p>httpåè®®æ˜¯å»ºç«‹åœ¨tcpåè®®ä¸Šçš„åº”ç”¨å±‚åè®®ï¼Œhttpåè®®çš„æ—©æœŸç‰ˆæœ¬(HTTP/0.9å’Œæ—©æœŸHTTP/1.0)æœ€åˆæ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„åè®®ï¼Œé€šä¿¡æ–¹å¼ä¹Ÿæ˜¯é‡‡ç”¨ç®€å•çš„è¯·æ±‚-åº”ç­”æ¨¡å¼ï¼Œå³ï¼šå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨çš„æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦å»ºç«‹è¿æ¥ï¼ŒæœåŠ¡å™¨å“åº”åå³æ–­å¼€ï¼Œå†è¯·æ±‚å†é‡æ–°åˆ›å»º</p>\n<p><img src=\"http://mrrsblog.oss-cn-shanghai.aliyuncs.com/http-5.png\" alt=\"httpå¤šæ¬¡åˆ›å»ºtcp\"></p>\n<p>tcpè¿æ¥çš„æ–°å»ºæˆæœ¬è¾ƒé«˜ï¼Œå› ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å»ºç«‹è¿æ¥æ—¶éœ€è¦<strong>ä¸‰æ¬¡æ¡æ‰‹</strong>ï¼Œä¼ è¾“ä¸€æ¬¡æ•°æ®è€—æ—¶2xRTT + æ•°æ®ä¼ è¾“æ—¶é—´:</p>\n<p><img src=\"http://mrrsblog.oss-cn-shanghai.aliyuncs.com/request_http_time.png\" alt=\"httpä¼ è¾“ä¸€æ¬¡æ•°æ®è€—æ—¶\"></p>\n<p>é‡Šæ”¾æ—¶åˆ™æ˜¯<strong>å››æ¬¡æŒ¥æ‰‹</strong>ï¼Œéœ€è¦2xRTT</p>\n<p>æ‰€ä»¥HTTP/1.0å¼•å…¥äº†<code>keep-alive</code>ï¼ŒHTTP/1.0ä¸­é»˜è®¤æ˜¯å…³é—­çš„ï¼Œå¯åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ <code>Connection: keep-alive</code>å¼€å¯ï¼›HTTP/1.1é»˜è®¤å¼€å¯</p>\n<p>æ‰€è°“<code>keep-alive</code>å°±æ˜¯æœåŠ¡å™¨åœ¨å‘é€å“åº”ååœ¨ä¸€å®šæ—¶é—´ï¼ˆé€šè¿‡httpè¯·æ±‚å¤´<code>Keep-Alive: timeout max</code>è®¾ç½®ï¼‰å†…ä»ç„¶ä¿æŒè¿™æ¡è¿æ¥ï¼Œä½¿å¾—åŒä¸€ä¸ªå®¢æˆ·ç«¯å¯ä»¥ç»§ç»­ä½¿ç”¨è¿™æ¡è¿æ¥ä¼ è¾“åç»­çš„httpè¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡</p>\n<blockquote>\n<p>éœ€è¦å°† Connection é¦–éƒ¨çš„å€¼è®¾ç½®ä¸º  &quot;keep-alive&quot; è¿™ä¸ªé¦–éƒ¨æ‰æœ‰æ„ä¹‰ã€‚åŒæ—¶éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨HTTP/2 åè®®ä¸­ï¼Œ Connection å’Œ Keep-Alive  æ˜¯è¢«å¿½ç•¥çš„ï¼›åœ¨å…¶ä¸­é‡‡ç”¨å…¶ä»–æœºåˆ¶æ¥è¿›è¡Œè¿æ¥ç®¡ç†ã€‚</p>\n</blockquote>\n<p><img src=\"http://mrrsblog.oss-cn-shanghai.aliyuncs.com/http-6.png\" alt=\"httpå¤šæ¬¡åˆ›å»ºtcp\"></p>\n<h2 id=\"http2å¤šè·¯å¤ç”¨\">http2å¤šè·¯å¤ç”¨</h2>\n<p>ä¸ºä»€ä¹ˆHTTP/2å¼•å…¥å¤šè·¯å¤ç”¨ï¼š</p>\n<p>HTTP/1.0å¼•å…¥çš„<code>Keep-Alive</code>æœ‰ä¸¤ç§å·¥ä½œæ–¹å¼ï¼š <strong>éæµæ°´çº¿<code>without pipelining</code></strong> å’Œ <strong>æµæ°´çº¿<code>with pipeling</code></strong> </p>\n<ul>\n<li><p>éæµæ°´çº¿\n  å®¢æˆ·åœ¨æ”¶åˆ°ä¸Šä¸€ä¸ªè¯·æ±‚çš„å“åº”åæ‰èƒ½å‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚å› æ­¤åœ¨TCPè¿æ¥å·²å»ºç«‹åå®¢æˆ·æ¯è®¿é—®ä¸€æ¬¡å¯¹è±¡å°±è¦ç”¨ä¸€ä¸ªRTTï¼Œç›¸è¾ƒäºéæŒç»­è¿æ¥èŠ‚çœäº†ä¸€ä¸ªRTTã€‚ä½†è¿™ä»ç„¶æœ‰ä¸€å®šçš„ç¼ºç‚¹ï¼šæœåŠ¡å™¨åœ¨å‘é€å®Œä¸€ä¸ªå¯¹è±¡åå…¶TCPè¿æ¥å°±å¤„äºç©ºé—²çŠ¶æ€ï¼Œæµªè´¹èµ„æº</p>\n</li>\n<li><p>æµæ°´çº¿\n  å®¢æˆ·åœ¨æ”¶åˆ°HTTPå“åº”æŠ¥æ–‡ä¹‹å‰å¯ä»¥ç»§ç»­å‘é€æ–°çš„æŠ¥æ–‡ã€‚äºæ˜¯ä¸€ä¸ªæ¥ä¸€ä¸ªçš„è¯·æ±‚æŠ¥æ–‡åˆ°è¾¾æœåŠ¡å™¨åï¼ŒæœåŠ¡å™¨å°±å¯ä»¥è¿ç»­å‘å›å“åº”æŠ¥æ–‡ï¼Œä½†è¿™è¦æ±‚æœåŠ¡å™¨å¿…é¡»æŒ‰ç…§è¯·æ±‚å‘é€çš„é¡ºåºè¿”å›å“åº”ï¼Œå½“é¡ºåºè¯·æ±‚å¤šä¸ªæ–‡ä»¶æ—¶ï¼Œå…¶ä¸­ä¸€ä¸ªè¯·æ±‚å› ä¸ºæŸç§åŸå› è¢«é˜»å¡æ—¶ï¼Œåœ¨åé¢æ’é˜Ÿçš„æ‰€æœ‰è¯·æ±‚ä¹Ÿä¸€å¹¶è¢«é˜»å¡ï¼Œè¿™å°±æ˜¯é˜Ÿå¤´é˜»å¡ (Head-Of-Line Blocking)</p>\n</li>\n</ul>\n<p>HTTP2çš„å¤šè·¯å¤ç”¨</p>\n<p>é¦–å…ˆå¼•å…¥å¸§(frame)å’Œæµ(stream)ï¼Œå› ä¸ºHTTP/1.xæ˜¯åŸºäºæ–‡æœ¬çš„ï¼Œå°±å¯¼è‡´åœ¨ä¼ è¾“æ—¶åªèƒ½ä¸²è¡Œå»ä¼ ã€‚HTTP/2æ˜¯åŸºäºæµçš„ï¼Œå®ƒå°±å¯ä»¥æŠŠHTTPæ¶ˆæ¯åˆ†è§£ä¸ºç‹¬ç«‹çš„å¸§ï¼Œäº¤é”™å‘é€ï¼Œç„¶ååœ¨å¦ä¸€ç«¯é€šè¿‡å¸§ä¸­çš„æ ‡ç¤ºé‡æ–°ç»„è£…ï¼Œè¿™å°±æ˜¯<strong>å¤šè·¯å¤ç”¨</strong>ã€‚å¤šè·¯å¤ç”¨å®ç°äº†åœ¨åŒä¸€ä¸ªTCPè¿æ¥ä¸­ï¼ŒåŒä¸€æ—¶åˆ»å¯ä»¥å‘é€å¤šä¸ªè¯·æ±‚å’Œå“åº”ï¼Œä¸”ä¸ç”¨æŒ‰ç…§é¡ºåºä¸€ä¸€å¯¹åº”ï¼Œå³ä½¿æŸä¸ªè¯·æ±‚ä»»åŠ¡è€—æ—¶ä¸¥é‡ï¼Œä¹Ÿä¸å½±å“å…¶ä»–è¿æ¥çš„æ­£å¸¸æ‰§è¡Œ</p>\n<p>steamæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ã€å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åœ¨HTTP/2è¿æ¥ä¸‹äº¤æ¢å¸§çš„åŒå‘åºåˆ—é›†</p>\n<p>HTTP/2åœ¨ç«¯ç‚¹ä¹‹é—´å»ºç«‹è¿æ¥åï¼Œä»¥Frameä¸ºåŸºæœ¬å•ä½äº¤æ¢æ•°æ®ã€‚streamä¸ºä¸€ç»„å…±äº«åŒä¸€streamIDçš„frameé›†åˆ</p>\n<p>Connection,Stream,Frame æ„æˆäº†è¿™æ ·çš„å…³ç³»ï¼šConnection å’Œ Stream æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ï¼ŒStream å’ŒFrameä¹Ÿæ˜¯ä¸€å¯¹å¤šçš„å…³ç³»</p>\n<p>è¿™æ ·ï¼Œå°±å¯ä»¥å…è®¸æ¥è‡ªå¤šä¸ªStream çš„å¤šä¸ªFrame äº¤é”™å‘é€ï¼Œåœ¨ä¸€ä¸ªConnectionä¸Šæ‰§è¡Œå¤šæ’­é€šä¿¡ ï¼ˆmultiplexed communicationï¼‰</p>\n<p>å¹¶ä¸”ï¼Œå®¢æˆ·ç«¯ä¹Ÿå¯ä»¥åœ¨ä¸€ä¸ªTCP Connection ä¸Šå‘é€å¤šä¸ªè¯·æ±‚ã€‚åœ¨åŒä¸€ä¸ªConnectionä¸Šçš„è¯·æ±‚ç°åœ¨å¯ä»¥ä¸æŒ‰æ¬¡åºç»™å‡ºå“åº”â€”â€”æœåŠ¡ç«¯å¯ä»¥æ ¹æ®QoSï¼ˆæœåŠ¡è´¨é‡ï¼‰è§„åˆ™æ¥å†³å®šå“åº”å†…å®¹çš„æ¬¡åº</p>\n<p><img src=\"http://mrrsblog.oss-cn-shanghai.aliyuncs.com/http-7.png\" alt=\"http2çš„å¤šè·¯å¤ç”¨\"></p>\n<h2 id=\"httpå¸¸è§é¦–éƒ¨å­—æ®µ\">httpå¸¸è§é¦–éƒ¨å­—æ®µ</h2>\n<table>\n<thead>\n<tr>\n<th>åç§°</th>\n<th>æ„ä¹‰</th>\n<th>å¤‡æ³¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Cache-Control</td>\n<td>ç¼“å­˜è®¾ç½®<code>Cache-Control: private, max-age=0, no-cache</code></td>\n<td>no-cache: no-cache æ—  å¼ºåˆ¶å‘æºæœåŠ¡å™¨å†æ¬¡éªŒè¯</br>no-store: ä¸ç¼“å­˜</br>max-age: 100: 100såå¤±æ•ˆ</td>\n</tr>\n<tr>\n<td>Connection</td>\n<td>æ§åˆ¶ä¸å†è½¬å‘ç»™ä»£ç†çš„é¦–éƒ¨å­—æ®µï¼›ç®¡ç†æŒä¹…è¿æ¥</td>\n<td><code>Connection: Upgrade/Keep-Alive</code></td>\n</tr>\n<tr>\n<td>Date</td>\n<td>åˆ›å»ºHTTPæŠ¥æ–‡çš„æ—¥æœŸå’Œæ—¶é—´</td>\n<td>Date: Tue, 03 Jul 2012 04:40:59 GMT</td>\n</tr>\n<tr>\n<td>Accept</td>\n<td>å‘ŠçŸ¥æœåŠ¡å™¨å®¢æˆ·ç«¯å¯ä»¥å¤„ç†çš„åª’ä½“ç±»å‹åŠåª’ä½“ç±»å‹çš„æƒ³å¯¹ä¼˜å…ˆçº§</td>\n<td>Accept: text/html,application/xhtml+xml,application/xml</td>\n</tr>\n<tr>\n<td>Content-Length</td>\n<td>æœ¬æ¬¡è¿”å›çš„æ•°æ®é•¿åº¦</td>\n<td></td>\n</tr>\n<tr>\n<td>Host</td>\n<td>æœåŠ¡å™¨åŸŸå/ip</td>\n<td></td>\n</tr>\n</tbody></table>\n<h2 id=\"cache-control\">cache-control</h2>\n<h3 id=\"è¯·æ±‚å¤´éƒ¨\">è¯·æ±‚å¤´éƒ¨</h3>\n<pre><code class=\"hljs language-http\"><span class=\"hljs-attribute\">Cache-Control</span><span class=\"hljs-punctuation\">: </span>max-age=&lt;seconds&gt;\n<span class=\"hljs-attribute\">Cache-Control</span><span class=\"hljs-punctuation\">: </span>max-stale[=&lt;seconds&gt;]\n<span class=\"hljs-attribute\">Cache-Control</span><span class=\"hljs-punctuation\">: </span>min-fresh=&lt;seconds&gt;\n<span class=\"hljs-attribute\">Cache-Control</span><span class=\"hljs-punctuation\">: </span>no-cache\n<span class=\"hljs-attribute\">Cache-Control</span><span class=\"hljs-punctuation\">: </span>no-store\n<span class=\"hljs-attribute\">Cache-Control</span><span class=\"hljs-punctuation\">: </span>no-transform\n<span class=\"hljs-attribute\">Cache-Control</span><span class=\"hljs-punctuation\">: </span>only-if-cached\n</code></pre>\n<h3 id=\"å“åº”å¤´éƒ¨\">å“åº”å¤´éƒ¨</h3>\n<pre><code class=\"hljs language-http\"><span class=\"hljs-attribute\">Cache-Control</span><span class=\"hljs-punctuation\">: </span>must-revalidate\n<span class=\"hljs-attribute\">Cache-Control</span><span class=\"hljs-punctuation\">: </span>no-cache\n<span class=\"hljs-attribute\">Cache-Control</span><span class=\"hljs-punctuation\">: </span>no-store\n<span class=\"hljs-attribute\">Cache-Control</span><span class=\"hljs-punctuation\">: </span>no-transform\n<span class=\"hljs-attribute\">Cache-Control</span><span class=\"hljs-punctuation\">: </span>private\n<span class=\"hljs-attribute\">Cache-Control</span><span class=\"hljs-punctuation\">: </span>public\n<span class=\"hljs-attribute\">Cache-Control</span><span class=\"hljs-punctuation\">: </span>proxy-revalidate\n<span class=\"hljs-attribute\">Cache-Control</span><span class=\"hljs-punctuation\">: </span>max-age=&lt;secnonds&gt;\n<span class=\"hljs-attribute\">Cache-Control</span><span class=\"hljs-punctuation\">: </span>s-maxage=&lt;seconds&gt;\n</code></pre>\n<p><code>public</code>: è¡¨ç¤ºå¯ä»¥è¢«ä»»ä½•å¯¹è±¡ï¼ˆæµè§ˆå™¨ã€æœåŠ¡å™¨ã€ä»£ç†æœåŠ¡å™¨ç­‰ï¼‰ç¼“å­˜</p>\n<p><code>private</code>: è¡¨ç¤ºåªèƒ½è¢«å•ä¸ªç”¨æˆ·ç¼“å­˜ï¼Œä¸èƒ½ä½œä¸ºå…±äº«ç¼“å­˜ï¼ˆå³ä»£ç†æœåŠ¡å™¨ä¸èƒ½ç¼“å­˜ï¼‰</p>\n<p><code>no-cache</code>: ä½¿ç”¨åå•†ç¼“å­˜</p>\n<p><code>no-store</code>: ä¸ä½¿ç”¨ä»»ä½•ç¼“å­˜</p>\n<p><code>max-age=&lt;seconds&gt;</code>: è®¾ç½®ç¼“å­˜å­˜å‚¨çš„æœ€å¤§å‘¨æœŸï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´ï¼ˆç›¸å¯¹äºè¯·æ±‚çš„æ—¶é—´ï¼‰ç¼“å­˜è¢«è®¤ä¸ºè¿‡æœŸ</p>\n<p><code>s-maxage=&lt;seconds&gt;</code>: é’ˆå¯¹äºç¼“å­˜æœåŠ¡å™¨</p>\n<p><code>max-stale[=&lt;seconds&gt;]</code>: è¡¨æ˜å®¢æˆ·ç«¯æ„¿æ„æ¥æ”¶ä¸€ä¸ªå·²ç»è¿‡æœŸçš„èµ„æºã€‚å¯ä»¥è®¾ç½®ä¸€ä¸ªå¯é€‰çš„ç§’æ•°ï¼Œè¡¨ç¤ºç¼“å­˜æœ€å¤§çš„è¶…æ—¶æ—¶é—´ï¼Œè¯¥æ—¶é—´å†…å¯æ­£å¸¸æ¥æ”¶</p>\n<p><code>min-fresh=&lt;seconds&gt;</code>: è¦æ±‚ç¼“å­˜æœåŠ¡å™¨è¿”å›è‡³å°‘è¿˜æœªè¿‡æŒ‡å®šæ—¶é—´çš„ç¼“å­˜èµ„æºã€‚æ¯”å¦‚å½“æŒ‡å®š<code>min-fresh</code>ä¸º60ï¼Œè¿‡äº† 60 ç§’çš„èµ„æºéƒ½æ— æ³•ä½œä¸ºå“åº”è¿”å›äº†</p>\n<h2 id=\"httpçš„æ¼”è¿›\">httpçš„æ¼”è¿›</h2>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/evo_of_http.png\" alt=\"httpçš„æ¼”è¿›\"></p>\n<p>http1.1ä½¿ç”¨æ·»åŠ äº†keep-cliveæ¥å¤ç”¨tcpè¿æ¥ï¼Œæ”¹å–„äº†http1.0é¢‘ç¹åˆ›å»ºtcpè¿æ¥çš„æ€§èƒ½å¼€é”€ã€‚æ­¤å¤–æ”¯æŒæµæ°´çº¿(with pipeling)ä¼ è¾“ï¼Œä½¿å¾—å®¢æˆ·ç«¯å¯ä»¥ä¸“æ³¨äºå‘é€è€Œä¸å¿…ç­‰å¾…ä¸Šä¸€ä¸ªè¯·æ±‚çš„å“åº”ã€‚å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡å°‘æ•´ä½“çš„å“åº”æ—¶é—´ã€‚ä½†æµæ°´çº¿ä¹Ÿå­˜åœ¨é—®é¢˜ï¼Œè™½ç„¶å®¢æˆ·ç«¯å¯ä»¥ä¸€ç›´å‘é€ï¼Œä½†æœåŠ¡å™¨éœ€è¦é¡ºåºå“åº”ï¼Œå¦‚æœæŸä¸€å“åº”è¾ƒè€—æ—¶ï¼Œé‚£ä¸ªå®¢æˆ·ç«¯ä¹Ÿä¸€ç›´æ”¶ä¸åˆ°å…¶ä»–çš„å“åº”ï¼ˆå¯¹å¤´é˜»å¡é—®é¢˜ï¼‰ã€‚æ­¤å¤–http1.1è¿˜æœ‰è¯·æ±‚ã€å“åº”å¤´éƒ¨(Header)è¾ƒå¤§(æœªç»å‹ç¼©å°±å‘é€)ã€æ²¡æœ‰è¯·æ±‚ä¼˜å…ˆçº§æ§åˆ¶ç­‰é—®é¢˜ã€‚</p>\n<p>http2.0æ˜¯åŸºäºhttpsçš„ï¼Œé¦–å…ˆå®‰å…¨æ€§æœ‰äº†ä¿éšœï¼Œæ­¤å¤–æ€§èƒ½ä¸Šè¾ƒhttp1.1ä¹Ÿæœ‰äº†ä¸å°‘æ”¹è¿›ã€‚</p>\n<ol>\n<li><p>http2.0ä¼šè¿›è¡Œå¤´éƒ¨å‹ç¼©ï¼šå¦‚æœä½ å‘å‡ºå¤šä¸ªè¯·æ±‚ï¼Œå®ƒä»¬çš„å¤´éƒ¨æ˜¯ä¸€æ ·æˆ–ç›¸ä¼¼çš„ï¼Œé‚£ä¹ˆåè®®ä¼šå¸®ä½ æ¶ˆé™¤é‡å¤çš„éƒ¨åˆ†ã€‚</p>\n</li>\n<li><p>http2ä¸å†åƒhttp1.xé‡Œçš„çº¯æ–‡æœ¬å½¢å¼çš„æŠ¥æ–‡ï¼Œhttp/2æ˜¯åŸºäºäºŒè¿›åˆ¶çš„ï¼Œå¤´éƒ¨å’Œæ•°æ®ä½“ç»Ÿç§°ä¸ºå¸§(frame)ï¼Œè¿™æ ·è™½ç„¶å¯¹äººä¸å¤ªå‹å¥½ï¼Œä½†å¯¹äºè®¡ç®—æœºæ¥è®²ä¸ç”¨å†å°†æ•°æ®ä»æ–‡æœ¬è½¬ä¸ºäºŒè¿›åˆ¶ï¼Œè€Œæ˜¯ç›´æ¥è§£æäºŒè¿›åˆ¶æŠ¥æ–‡ï¼Œå¢åŠ äº†æ•°æ®ä¼ è¾“çº¿ç‡</p>\n</li>\n<li><p>http/2çš„æ•°æ®åŒ…ä¸æ˜¯é¡ºåºå‘é€çš„ï¼Œè€Œæ˜¯åŸºäºæµçš„ï¼ŒåŒä¸€ä¸ªè¿æ¥é‡Œå¯èƒ½æœ‰ä¸åŒçš„è¯·æ±‚/å“åº”ã€‚å› æ­¤æ¯ä¸€ä¸ªæ•°æ®æµéƒ½æ ‡è®°è¿™ç‹¬ä¸€æ— äºŒçš„ç¼–å·ï¼Œå®¢æˆ·ç«¯è¿˜å¯ä»¥æŒ‡å®šæ•°æ®æµçš„ä¼˜å…ˆçº§ã€‚</p>\n</li>\n<li><p>http/2é‡‡ç”¨äº†å¤šè·¯å¤ç”¨çš„ç­–ç•¥æ¥è¿›ä¸€æ­¥æå‡æ€§èƒ½ï¼Œç§»é™¤äº†http/1.xä¸­çš„æµæ°´çº¿å¼çš„ä¸²è¡Œè¯·æ±‚/å“åº”æ–¹å¼ã€‚http/2å¯ä»¥åœ¨åŒä¸€ä¸ªè¿æ¥ä¸­å¹¶å‘å¤„ç†å¤šä¸ªè¯·æ±‚æˆ–å“åº”ï¼Œè€Œä¸ç”¨æ’é˜Ÿç­‰å¾…ï¼Œå†ä¹Ÿä¸ä¼šå‡ºç°å¯¹å¤´é˜»å¡çš„é—®é¢˜äº†</p>\n</li>\n<li><p>æœåŠ¡å™¨æ¨é€ã€‚</p>\n</li>\n</ol>\n<p>http/3æŠŠtcpæ”¹æˆäº†udp</p>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://mp.weixin.qq.com/s/194SJUQz-mZBtg-kLd9fhA\">äº†è§£ HTTP/1.x çš„ keep-alive å—ï¼Ÿå®ƒä¸ HTTP/2 å¤šè·¯å¤ç”¨çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</a>\n<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Keep-Alive\">MDN</a>\n<a href=\"https://stackoverflow.com/a/48516829/12241567\">Why HTTP/2 does multiplexing altough tcp does same thing?</a></p>\n"},{"title":"ç½‘ç»œå¤ä¹ -OSIä¸ƒå±‚æ¨¡å‹","tags":["OSI"],"categories":"2021å¤ä¹ ","description":"## OSIä¸ƒå±‚æ¨¡å‹\n\nå¼€æ”¾ç³»ç»Ÿäº’è”(Open Systems Interconncection )\n\n![OSIæ¨¡å‹](http://mrrsblog.oss-cn-shanghai.aliyuncs.com/osi.png)\n\n## TCP\n\nä¼ è¾“å±‚åè®®\n\n- é¢å‘è¿æ¥\n- æ¯ä¸€ä¸ªtcpè¿æ¥åªèƒ½æ˜¯ç‚¹å¯¹ç‚¹çš„ï¼ˆä¸€å¯¹ä¸€ï¼‰\n- æä¾›å¯é äº¤ä»˜æœåŠ¡\n- æä¾›å…¨åŒå·¥æœåŠ¡\n- é¢å‘å­—èŠ‚æµ\n\nåº”ç”¨ç¨‹åºå’ŒTC","createDate":"2021-05-17 02:39:27","updateDate":"2021-06-11 17:38:16","body":"<h2 id=\"osiä¸ƒå±‚æ¨¡å‹\">OSIä¸ƒå±‚æ¨¡å‹</h2>\n<p>å¼€æ”¾ç³»ç»Ÿäº’è”(Open Systems Interconncection )</p>\n<p><img src=\"http://mrrsblog.oss-cn-shanghai.aliyuncs.com/osi.png\" alt=\"OSIæ¨¡å‹\"></p>\n<h2 id=\"tcp\">TCP</h2>\n<p>ä¼ è¾“å±‚åè®®</p>\n<ul>\n<li>é¢å‘è¿æ¥</li>\n<li>æ¯ä¸€ä¸ªtcpè¿æ¥åªèƒ½æ˜¯ç‚¹å¯¹ç‚¹çš„ï¼ˆä¸€å¯¹ä¸€ï¼‰</li>\n<li>æä¾›å¯é äº¤ä»˜æœåŠ¡</li>\n<li>æä¾›å…¨åŒå·¥æœåŠ¡</li>\n<li>é¢å‘å­—èŠ‚æµ</li>\n</ul>\n<p>åº”ç”¨ç¨‹åºå’ŒTCPçš„äº¤äº’æ˜¯ä¸€æ¬¡ä¸€ä¸ªæ•°æ®å—ï¼ˆå¤§å°ä¸ç­‰ï¼‰ï¼Œä½†TCPæŠŠåº”ç”¨ç¨‹åºçœ‹æˆæ˜¯ä¸€è¿ä¸²çš„æ— ç»“æ„çš„å­—èŠ‚æµã€‚TCPæœ‰ä¸€ä¸ªç¼“å†²ï¼Œå½“åº”ç”¨ç¨‹åºä¼ é€çš„æ•°æ®å—å¤ªé•¿ï¼ŒTCPå°±å¯ä»¥æŠŠå®ƒåˆ’åˆ†çŸ­ä¸€äº›å†ä¼ é€</p>\n<p>å½“ç½‘ç»œé€šä¿¡é‡‡ç”¨TCPåè®®æ—¶ï¼Œåœ¨çœŸæ­£çš„è¯»å†™æ“ä½œä¹‹å‰ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ä¹‹é—´å¿…é¡»å»ºç«‹ä¸€ä¸ªè¿æ¥ï¼Œå½“è¯»å†™å®Œæˆä¹‹åï¼ŒåŒæ–¹ä¸å†éœ€è¦è¿™ä¸ªè¿æ¥æ—¶å¯ä»¥é‡Šæ”¾è¿™ä¸ªè¿æ¥ã€‚è¿æ¥çš„å»ºç«‹ä¾é <strong>ä¸‰æ¬¡æ¡æ‰‹</strong>ï¼Œè€Œé‡Šæ”¾éœ€è¦<strong>å››æ¬¡æŒ¥æ‰‹</strong>ï¼Œæ‰€ä»¥æ¯ä¸ªè¿æ¥çš„å»ºç«‹éƒ½æ˜¯éœ€è¦èµ„æºæ¶ˆè€—å’Œæ—¶é—´æ¶ˆè€—çš„</p>\n<h2 id=\"tcpè¿æ¥çš„å»ºç«‹è¿‡ç¨‹ï¼ˆä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹ï¼‰\">TCPè¿æ¥çš„å»ºç«‹è¿‡ç¨‹ï¼ˆä¸‰æ¬¡æ¡æ‰‹/å››æ¬¡æŒ¥æ‰‹ï¼‰</h2>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/three-wayHandshake.png\" alt=\"ä¸‰æ¬¡æ¡æ‰‹\"></p>\n<p>ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹ï¼š</p>\n<ol>\n<li><p>ç¬¬ä¸€æ¬¡æ¡æ‰‹</p>\n<p> å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€è¿æ¥è¯·æ±‚å»ºç«‹æŠ¥æ–‡æ®µã€‚è¯¥æŠ¥æ–‡æ®µä¸­åŒ…å«è‡ªèº«çš„æ•°æ®é€šè®¯åˆå§‹åºå·ã€‚è¯·æ±‚å‘é€åï¼Œå®¢æˆ·ç«¯ä¾¿è¿›å…¥<code>SYN-SENT</code>çŠ¶æ€</p>\n</li>\n<li><p>ç¬¬äºŒæ¬¡æ¡æ‰‹</p>\n<p> æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚æŠ¥æ–‡æ®µåï¼Œå¦‚æœåŒæ„è¿æ¥ï¼Œåˆ™ä¼šå‘é€ä¸€ä¸ªåº”ç­”ï¼Œè¯¥åº”ç­”ä¸­ä¹Ÿä¼šåŒ…å«è‡ªèº«çš„æ•°æ®é€šè®¯åˆå§‹åºå·ï¼Œå‘é€å®Œä¾¿è¿›å…¥<code>SYN-RECEIVED</code>çŠ¶æ€</p>\n</li>\n<li><p>ç¬¬ä¸‰æ¬¡æ¡æ‰‹</p>\n<p> å½“å®¢æˆ·ç«¯æ”¶åˆ°è¿æ¥åŒæ„çš„åº”ç­”åï¼Œè¿˜è¦å‘æœåŠ¡ç«¯å‘é€ä¸€ä¸ªç¡®è®¤æŠ¥æ–‡ã€‚å®¢æˆ·ç«¯å‘å®Œè¿™ä¸ªæŠ¥æ–‡æ®µåä¾¿è¿›å…¥<code>ESTABLISHED</code>çŠ¶æ€ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°è¿™ä¸ªåº”ç­”åä¹Ÿè¿›å…¥<code>ESTABLISHED</code>çŠ¶æ€ï¼Œæ­¤æ—¶è¿æ¥å»ºç«‹æˆåŠŸ</p>\n</li>\n</ol>\n<p>ä¸ºä»€ä¹ˆéœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ</p>\n<p><a href=\"https://www.zhihu.com/question/24853633/answer/63668444\">TCP ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œè€Œä¸æ˜¯ä¸¤æ¬¡æˆ–å››æ¬¡ï¼Ÿ - wuxinliuleiçš„å›ç­” - çŸ¥ä¹</a></p>\n<p>å­˜åœ¨è¿™æ ·ä¸€ç§æƒ…å†µï¼šclientå‘å‡ºçš„ç¬¬ä¸€ä¸ªè¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µå¹¶æ²¡æœ‰ä¸¢å¤±ï¼Œè€Œæ˜¯åœ¨æŸä¸ªç½‘ç»œèŠ‚ç‚¹é•¿æ—¶é—´åœ°æ»ç•™äº†ï¼Œä»¥è‡´å»¶è¯¯åˆ°è¾¾å·²ç»é‡Šæ”¾è¿æ¥åçš„serverã€‚æœ¬æ¥è¿™æ˜¯ä¸€ä¸ªæ—©å·²å¤±æ•ˆçš„æŠ¥æ–‡æ®µï¼Œä½†serveræ”¶åˆ°æ­¤å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µåï¼Œå°±è¯¯ä»¥ä¸ºè¿™æ˜¯clientå†æ¬¡å‘å‡ºçš„ä¸€ä¸ªæ–°çš„è¿æ¥è¯·æ±‚ï¼Œäºæ˜¯å°±å‘clientå‘å‡ºç¡®è®¤æŠ¥æ–‡æ®µï¼ŒåŒæ„å»ºç«‹è¿æ¥ã€‚å‡è®¾ä¸é‡‡ç”¨<em>ä¸‰æ¬¡æ¡æ‰‹</em>è€Œæ˜¯<em>ä¸¤æ¬¡æ¡æ‰‹</em>ï¼Œé‚£ä¹ˆåªè¦serverå‘å‡ºç¡®è®¤ï¼Œæ–°çš„è¿æ¥å°±å»ºç«‹äº†ï¼›ç”±äºç°åœ¨clientå¹¶æ²¡æœ‰å‘å‡ºå»å»ºç«‹è¿æ¥çš„è¯·æ±‚ï¼Œå› æ­¤ä¸ä¼šç†ç¬serverçš„ç¡®è®¤è¯·æ±‚ï¼Œä¹Ÿä¸ä¼šå‘serverå‘é€æ•°æ®ã€‚ä½†serverå´ä»¥ä¸ºæ–°çš„è¿æ¥å·²ç»å»ºç«‹ï¼Œå¹¶ä¸€ç›´ç­‰å¾…clientå‘é€æ•°æ®ã€‚è¿™æ ·ï¼Œserverçš„å¾ˆå¤šèµ„æºå°±ç™½ç™½æµªè´¹æ‰äº†ã€‚é‡‡ç”¨<strong>ä¸‰æ¬¡æ¡æ‰‹</strong>çš„æ–¹æ³•å¯ä»¥é˜²æ­¢ä¸Šè¿°ç°è±¡å‘ç”Ÿã€‚ä¾‹å¦‚åˆšæ‰é‚£ç§æƒ…å†µï¼Œclientä¸ä¼šå‘serverçš„ç¡®è®¤å‘å‡ºç¡®è®¤ï¼Œserverç”±äºæ”¶ä¸åˆ°ç¡®è®¤ï¼Œå°±çŸ¥é“clientå¹¶æ²¡æœ‰è¦æ±‚å»ºç«‹è¿æ¥ã€‚</p>\n<p>è¿™ä¸ªé—®é¢˜çš„æœ¬è´¨æ˜¯<strong>ä¿¡é“ä¸å¯é ï¼Œä½†æ˜¯é€šä¿¡åŒæ–¹éœ€è¦å°±æŸä¸ªé—®é¢˜è¾¾æˆä¸€è‡´ï¼Œè€Œè¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ— è®ºä½ åœ¨æ¶ˆæ¯ä¸­åŒ…å«ä»€ä¹ˆä¿¡æ¯ï¼Œä¸‰æ¬¡é€šä¿¡æ˜¯ç†è®ºä¸Šçš„æœ€å°å€¼</strong>ï¼Œæ‰€ä»¥<strong>ä¸‰æ¬¡æ¡æ‰‹å¹¶ä¸æ˜¯tcpæœ¬èº«çš„è¦æ±‚ï¼Œè€Œæ˜¯ä¸ºäº†æ»¡è¶³åœ¨ä¸å¯é çš„ä¿¡é“ä¸Šå¯é ä¼ è¾“ä¿¡æ¯è¿™ä¸€éœ€æ±‚æ‰€å¯¼è‡´çš„</strong>ã€‚ä¸‰æ¬¡è¾¾åˆ°äº†ï¼Œé‚£åé¢ä½ æƒ³æ¥ç€æ¡æ‰‹ä¹Ÿå¥½ï¼Œå‘æ•°æ®ä¹Ÿå¥½ï¼Œè·Ÿè¿›è¡Œå¯é ä¿¡æ¯ä¼ è¾“çš„éœ€æ±‚å°±æ²¡å…³ç³»äº†ï¼Œå› æ­¤å¦‚æœä¿¡é“æ˜¯å¯é çš„ï¼Œå³æ— è®ºä»€ä¹ˆæ—¶å€™å‘å‡ºæ¶ˆæ¯å¯¹æ–¹ä¸€å®šèƒ½æ”¶åˆ°ï¼Œæˆ–è€…ä¸å…³å¿ƒæ˜¯å¦è¦ä¿è¯å¯¹æ–¹æ”¶åˆ°ä½ çš„æ¶ˆæ¯ï¼Œé‚£æ ·å°±èƒ½åƒudpé‚£æ ·ç›´æ¥å‘é€æ¶ˆæ¯å°±å¯ä»¥äº†</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/four-wayHandshake.png\" alt=\"å››æ¬¡æŒ¥æ‰‹\"></p>\n<p>ä¸ºä»€ä¹ˆA(å‘èµ·å…³é—­çš„é‚£ä¸€ç«¯)åœ¨TIME-WAITçŠ¶æ€å¿…é¡»ç­‰å¾…2MSLçš„æ—¶é—´ï¼Ÿ</p>\n<ol>\n<li>ä¿è¯Aå‘é€çš„æœ€åä¸€ä¸ªACKæŠ¥æ–‡æ®µèƒ½å¤Ÿåˆ°è¾¾Bã€‚è¿™ä¸ªACKæŠ¥æ–‡æ®µæœ‰å¯èƒ½ä¸¢å¤±ï¼Œå› è€Œä½¿å¤„åœ¨LAST-ACKçŠ¶æ€çš„Bæ”¶ä¸åˆ°å¯¹å·²å‘é€FIN+ACKæŠ¥æ–‡æ®µçš„ç¡®è®¤ï¼ŒBä¼šè¶…æ—¶é‡ä¼ è¿™ä¸ªFIN+ACKæŠ¥æ–‡æ®µï¼Œè€ŒAå°±èƒ½åœ¨2MSLæ—¶é—´å†…æ”¶åˆ°è¿™ä¸ªé‡ä¼ çš„FIN+ACKæŠ¥æ–‡æ®µï¼Œæ¥ç€Aé‡ä¼ ä¸€æ¬¡ç¡®è®¤ï¼Œé‡æ–°å¯åŠ¨2MSLè®¡æ—¶å™¨ã€‚æœ€åï¼ŒAå’ŒBéƒ½æ­£å¸¸è¿›å…¥åˆ°CLOSEDçŠ¶æ€ã€‚å¦‚æœAåœ¨å‘é€å®ŒACKæŠ¥æ–‡æ®µåç«‹å³é‡Šæ”¾è¿æ¥ï¼Œæ²¡æœ‰ç­‰å¾…2MSLï¼Œé‚£ä¹ˆå°±æ— æ³•æ”¶åˆ°Bé‡ä¼ çš„FIN+ACKæŠ¥æ–‡æ®µï¼Œå› è€Œä¹Ÿä¸ä¼šå†å‘é€ä¸€æ¬¡ç¡®è®¤æŠ¥æ–‡æ®µï¼Œè¿™æ ·Bå°±æ— æ³•æŒ‰ç…§æ­£å¸¸æ­¥éª¤è¿›å…¥CLOSEDçŠ¶æ€</li>\n<li>é˜²æ­¢<em>å·²å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µ</em>å‡ºç°åœ¨æœ¬è¿æ¥ä¸­ï¼ŒAåœ¨å‘é€å®Œæœ€åä¸€ä¸ªACKæŠ¥æ–‡æ®µåï¼Œå†ç»è¿‡2MSLï¼Œå°±å¯ä»¥ä½¿æœ¬è¿æ¥æŒç»­çš„æ—¶é—´å†…æ‰€äº§ç”Ÿçš„æŠ¥æ–‡æ®µéƒ½ä»ç½‘ç»œä¸­æ¶ˆå¤±ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ä¸‹ä¸€ä¸ªæ–°çš„è¿æ¥ä¸­ä¸ä¼šå‡ºç°è¿™æ ·æ—§çš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µ</li>\n</ol>\n"},{"title":"æµè§ˆå™¨å¤ä¹ -æ¸²æŸ“","tags":["æµè§ˆå™¨æ¸²æŸ“","é‡ç»˜","å›æµ","åˆæˆ"],"categories":"2021å¤ä¹ ","description":"## æµè§ˆå™¨æ¸²æŸ“æµç¨‹\n\næ„å»ºDOMæ ‘ã€æ„å»ºæ¸²æŸ“æ ‘ã€å¸ƒå±€ã€ç»˜åˆ¶ã€åˆæˆ\n\n1. æ„å»ºDOMæ ‘\n    æµè§ˆå™¨å°†HTMLè§£ææˆæ ‘å½¢ç»“æ„çš„DOMæ ‘ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªè¿‡ç¨‹å‘ç”Ÿåœ¨é¡µé¢åˆæ¬¡åŠ è½½ï¼Œæˆ–é¡µé¢JavaScriptä¿®æ”¹äº†DOMèŠ‚ç‚¹ç»“æ„çš„æ—¶å€™\n2. æ„å»ºæ¸²æŸ“æ ‘\n    æµè§ˆå™¨å°†CSSè§£ææˆæ ‘å½¢ç»“æ„çš„CSSOMæ ‘ï¼Œå†å’ŒDOMæ ‘åˆå¹¶æˆæ¸²æŸ“æ ‘\n3. å¸ƒå±€ï¼ˆLayoutï¼‰\n    æµè§ˆå™¨æ ¹æ®æ¸²æŸ“æ ‘æ‰€ä½“ç°çš„èŠ‚ç‚¹ã€å„","createDate":"2021-05-21 05:30:12","updateDate":"2021-06-11 14:18:48","body":"<h2 id=\"æµè§ˆå™¨æ¸²æŸ“æµç¨‹\">æµè§ˆå™¨æ¸²æŸ“æµç¨‹</h2>\n<p>æ„å»ºDOMæ ‘ã€æ„å»ºæ¸²æŸ“æ ‘ã€å¸ƒå±€ã€ç»˜åˆ¶ã€åˆæˆ</p>\n<ol>\n<li>æ„å»ºDOMæ ‘\n æµè§ˆå™¨å°†HTMLè§£ææˆæ ‘å½¢ç»“æ„çš„DOMæ ‘ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªè¿‡ç¨‹å‘ç”Ÿåœ¨é¡µé¢åˆæ¬¡åŠ è½½ï¼Œæˆ–é¡µé¢JavaScriptä¿®æ”¹äº†DOMèŠ‚ç‚¹ç»“æ„çš„æ—¶å€™</li>\n<li>æ„å»ºæ¸²æŸ“æ ‘\n æµè§ˆå™¨å°†CSSè§£ææˆæ ‘å½¢ç»“æ„çš„CSSOMæ ‘ï¼Œå†å’ŒDOMæ ‘åˆå¹¶æˆæ¸²æŸ“æ ‘</li>\n<li>å¸ƒå±€ï¼ˆLayoutï¼‰\n æµè§ˆå™¨æ ¹æ®æ¸²æŸ“æ ‘æ‰€ä½“ç°çš„èŠ‚ç‚¹ã€å„ä¸ªèŠ‚ç‚¹çš„CSSå®šä¹‰ä»¥åŠå®ƒä»¬çš„ä»å±å…³ç³»ï¼Œè®¡ç®—å‡ºæ¯ä¸ªèŠ‚ç‚¹åœ¨å±å¹•ä¸­çš„ä½ç½®ã€‚webé¡µé¢ä¸­å…ƒç´ çš„å¸ƒå±€æ˜¯ç›¸å¯¹çš„ï¼Œåœ¨é¡µé¢å…ƒç´ ä½ç½®ã€å¤§å°å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¾€å¾€ä¼šå¯¼è‡´å…¶ä»–èŠ‚ç‚¹è”åŠ¨ï¼Œéœ€è¦é‡æ–°è®¡ç®—å¸ƒå±€ï¼Œè¿™æ—¶å€™å¸ƒå±€è¿‡ç¨‹ä¸€èˆ¬è¢«ç§°ä¸ºå›æµï¼ˆReflowï¼‰</li>\n<li>ç»˜åˆ¶ï¼ˆpaintï¼‰\n éå†æ¸²æŸ“æ ‘ï¼Œè°ƒç”¨æ¸²æŸ“å™¨çš„<code>paint()</code>æ–¹æ³•åœ¨å±å¹•ä¸Šç»˜åˆ¶å‡ºèŠ‚ç‚¹å†…å®¹ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåƒç´ å¡«å……çš„è¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡ç¨‹ä¹Ÿå‡ºç°äºå›æµæˆ–ä¸€äº›ä¸å½±å“å¸ƒå±€çš„CSSä¿®æ”¹å¼•èµ·çš„å±å¹•å±€éƒ¨é‡ç”»ï¼Œè¿™æ—¶å€™è¢«ç§°ä¸ºé‡ç»˜ï¼ˆReapintï¼‰ã€‚å®é™…ä¸Šï¼Œç»˜åˆ¶è¿‡ç¨‹æ˜¯åœ¨å¤šä¸ªå±‚ä¸Šå®Œæˆçš„ï¼Œè¿™äº›å±‚æˆ‘ä»¬ç§°ä¸ºæ¸²æŸ“å±‚ï¼ˆRenderLayerï¼‰</li>\n<li>åˆæˆï¼ˆCompositeï¼‰\n å¤šä¸ªç»˜åˆ¶åçš„æ¸²æŸ“å±‚æŒ‰ç…§æ°å½“çš„é‡å é¡ºåºè¿›è¡Œåˆå¹¶ï¼Œè€Œåç”Ÿæˆä½å›¾ï¼Œæœ€ç»ˆé€šè¿‡æ˜¾å¡å±•ç¤ºåˆ°å±å¹•ä¸Š</li>\n</ol>\n<h2 id=\"æµè§ˆå™¨æ¸²æŸ“åŸç†\">æµè§ˆå™¨æ¸²æŸ“åŸç†</h2>\n<p>ä»æµè§ˆå™¨çš„æ¸²æŸ“è¿‡ç¨‹ä¸­çŸ¥é“ï¼Œé¡µé¢HTMLä¼šè§£ææˆDOMæ ‘ï¼Œæ¯ä¸ªHTMLå…ƒç´ å¯¹åº”äº†æ ‘ç»“æ„ä¸Šçš„ä¸€ä¸ªnodeèŠ‚ç‚¹ã€‚è€Œä»DOMæ ‘è½¬åŒ–åˆ°ä¸€ä¸ªä¸ªçš„æ¸²æŸ“å±‚ï¼Œå¹¶æœ€ç»ˆæ‰§è¡Œåˆå¹¶ã€ç»˜åˆ¶çš„è¿‡ç¨‹ä¸­ï¼Œä¸­é—´å…¶å®è¿˜å­˜åœ¨ä¸€äº›è¿‡æ¸¡çš„æ•°æ®ç»“æ„ï¼Œå®ƒä»¬è®°å½•äº†DOMæ ‘åˆ°å±å¹•å›¾å½¢çš„è½¬åŒ–åŸç†ï¼Œå…¶æœ¬è´¨ä¹Ÿå°±æ˜¯æ ‘ç»“æ„åˆ°å±‚ç»“æ„çš„æ¼”åŒ–</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/render.png\" alt=\"æµè§ˆå™¨æ¸²æŸ“åŸç†\"></p>\n<h3 id=\"æ¸²æŸ“å¯¹è±¡ï¼ˆrenderobjectï¼‰\">æ¸²æŸ“å¯¹è±¡ï¼ˆRenderObjectï¼‰</h3>\n<p>ä¸€ä¸ªDOMèŠ‚ç‚¹å¯¹åº”äº†ä¸€ä¸ªæ¸²æŸ“å¯¹è±¡ï¼Œæ¸²æŸ“å¯¹è±¡ä¾ç„¶ç»´æŒç€DOMæ ‘çš„æ ‘å½¢ç»“æ„ã€‚ä¸€ä¸ªæ¸²æŸ“å¯¹è±¡çŸ¥é“å¦‚ä½•ç»˜åˆ¶ä¸€ä¸ªDOMèŠ‚ç‚¹çš„å†…å®¹ï¼Œå®ƒé€šè¿‡å‘ä¸€ä¸ªç»˜å›¾ä¸Šä¸‹æ–‡ï¼ˆGraphicsContextï¼‰å‘å‡ºå¿…è¦çš„ç»˜åˆ¶è°ƒç”¨æ¥ç»˜åˆ¶DOMèŠ‚ç‚¹</p>\n<h3 id=\"æ¸²æŸ“å±‚ï¼ˆrenderlayerï¼‰\">æ¸²æŸ“å±‚ï¼ˆRenderLayerï¼‰</h3>\n<p>è¿™æ˜¯æµè§ˆå™¨æ¸²æŸ“æœŸé—´æ„å»ºçš„ç¬¬ä¸€ä¸ªå±‚æ¨¡å‹ï¼Œå¤„äºç›¸åŒåæ ‡ç©ºé—´ï¼ˆzè½´ï¼‰çš„æ¸²æŸ“å¯¹è±¡ï¼Œéƒ½å°†å½’å¹¶åˆ°åŒä¸€ä¸ªæ¸²æŸ“å±‚ä¸­ï¼Œå› æ­¤æ ¹æ®å±‚å ä¸Šä¸‹æ–‡ï¼Œä¸åŒåæ ‡çš„æ¸²æŸ“å¯¹è±¡å°†å½¢æˆ<strong>å¤šä¸ªæ¸²æŸ“å±‚</strong>ï¼Œä»¥ä½“ç°å®ƒä»¬çš„å±‚å å…³ç³»ã€‚æ‰€ä»¥ï¼Œå¯¹äºæ»¡è¶³å½¢æˆå±‚å ä¸Šä¸‹æ–‡æ¡ä»¶çš„æ¸²æŸ“å¯¹è±¡ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨ä¸ºå…¶åˆ›å»ºæ–°çš„æ¸²æŸ“å±‚ã€‚</p>\n<p>åˆ›å»ºæ–°çš„æ¸²æŸ“å±‚çš„æƒ…å†µï¼š</p>\n<ul>\n<li>æ ¹å…ƒç´ ï¼ˆ<code>document</code>ï¼‰</li>\n<li>æœ‰æ˜ç¡®çš„å®šä½å±æ€§ï¼ˆ<code>relative</code> <code>fixed</code> <code>absolute</code> <code>sticky</code>ï¼‰</li>\n<li><code>opacity</code> &lt; 1</li>\n<li>CSS <code>filter</code> <code>mask</code> <code>transform</code>ä¸ä¸º<code>none</code> <code>overflow</code>ä¸ä¸º<code>visible</code></li>\n</ul>\n<p>DOMèŠ‚ç‚¹å’Œæ¸²æŸ“å¯¹è±¡æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œæ»¡è¶³ä»¥ä¸Šæ¡ä»¶çš„æ¸²æŸ“å¯¹è±¡å°±èƒ½æ‹¥æœ‰<strong>ç‹¬ç«‹çš„æ¸²æŸ“å±‚</strong>ã€‚æ­¤å¤–ï¼Œä¸æ»¡è¶³ä¸Šè¿°æ¡ä»¶çš„æ¸²æŸ“å¯¹è±¡å°†ä¼šä¸å…¶ç¬¬ä¸€ä¸ªæ‹¥æœ‰æ¸²æŸ“å±‚çš„çˆ¶å…ƒç´ å…±ç”¨ä¸€ä¸ªæ¸²æŸ“å±‚</p>\n<h3 id=\"å›¾å½¢å±‚ï¼ˆgraphicslayerï¼‰\">å›¾å½¢å±‚ï¼ˆGraphicsLayerï¼‰</h3>\n<p>GraphicsLayerå…¶å®æ˜¯ä¸€ä¸ªè´Ÿè´£ç”Ÿæˆæœ€ç»ˆå‡†å¤‡å‘ˆç°çš„å†…å®¹å›¾å½¢çš„å±‚æ¨¡å‹ï¼Œå®ƒæ‹¥æœ‰ä¸€ä¸ªå›¾å½¢ä¸Šä¸‹æ–‡ï¼ˆGraphicsContextï¼‰ï¼ŒGraphicsLayerä¼šè´Ÿè´£è¾“å‡ºè¯¥å±‚çš„ä½å›¾ã€‚å­˜å‚¨å†å…±äº«å†…å­˜ä¸­çš„ä½å›¾å°†ä½œä¸ºçº¹ç†ä¸Šä¼ åˆ°GPUï¼Œæœ€åæœ‰GPUå°†å¤šä¸ªä½å›¾è¿›è¡Œåˆæˆï¼Œç„¶åç»˜åˆ¶åˆ°å±å¹•ä¸Š</p>\n<h3 id=\"åˆæˆå±‚ï¼ˆcompositinglayerï¼‰\">åˆæˆå±‚ï¼ˆCompositingLayerï¼‰</h3>\n<p>æ»¡è¶³æŸäº›ç‰¹æ®Šæ¡ä»¶çš„æ¸²æŸ“å±‚ï¼Œä¼šè¢«æµè§ˆå™¨è‡ªåŠ¨æå‡ä¸ºåˆæˆå±‚ã€‚åˆæˆå±‚æ‹¥æœ‰ç‹¬ç«‹çš„GraphicsLayerï¼Œè€Œå…¶ä»–ä¸æ˜¯åˆæˆå±‚çš„æ¸²æŸ“å±‚ï¼Œåˆ™å’Œå…¶ç¬¬ä¸€ä¸ªæ‹¥æœ‰GraphicsLayerçš„å¤å±‚å…±ç”¨ä¸€ä¸ªã€‚</p>\n<h2 id=\"éšå¼åˆæˆå±‚çˆ†ç‚¸\">éšå¼åˆæˆ&amp;&amp;å±‚çˆ†ç‚¸</h2>\n<p>é™¤äº†æ˜¾å¼è®¾å®šä¸€äº›å±æ€§æ¥å°†æ¸²æŸ“å±‚æå‡åˆæˆå±‚å¤–ï¼Œè¿˜æœ‰ä¸€äº›<strong>éšå¼åˆæˆ</strong>ï¼Œéƒ¨åˆ†æ¸²æŸ“å±‚åœ¨ä¸€äº›ç‰¹å®šçš„åœºæ™¯ä¸‹ä¼šè¢«é»˜è®¤æå‡ä¸ºåˆæˆå±‚ï¼š</p>\n<p>ä¸¤ä¸ª<code>absolute</code>å®šä½çš„<code>div</code>åœ¨å±å¹•ä¸Šäº¤å äº†ï¼Œæ ¹æ®<code>z-index</code>çš„å…³ç³»ï¼Œå…¶ä¸­ä¸€ä¸ª<code>div</code>å°±ä¼šç›–åœ¨äº†å¦å¤–ä¸€ä¸ªä¸Šè¾¹ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœå¤„äºä¸‹æ–¹çš„<code>div</code>è¢«åŠ ä¸Šäº†<code>CSS</code>å±æ€§ï¼š<code>transform: translateZ(0)</code>ï¼Œå°±ä¼šè¢«æµè§ˆå™¨æå‡ä¸ºåˆæˆå±‚ã€‚æå‡åçš„åˆæˆå±‚ä½äº<code>Document</code>ä¸Šæ–¹ï¼Œå‡å¦‚æ²¡æœ‰éšå¼åˆæˆï¼ŒåŸæœ¬åº”è¯¥å¤„äºä¸Šæ–¹çš„<code>div</code>å°±ä¾ç„¶è¿˜æ˜¯è·Ÿ <code>Document</code>å…±ç”¨ä¸€ä¸ª<code>GraphicsLayer</code>ï¼Œå±‚çº§åè€Œé™äº†ï¼Œå°±å‡ºç°äº†å…ƒç´ äº¤å å…³ç³»é”™ä¹±çš„é—®é¢˜ã€‚æ‰€ä»¥ä¸ºäº†çº æ­£é”™è¯¯çš„äº¤å é¡ºåºï¼Œæµè§ˆå™¨å¿…é¡»è®©åŸæœ¬åº”è¯¥â€ç›–åœ¨â€œå®ƒä¸Šè¾¹çš„æ¸²æŸ“å±‚ä¹ŸåŒæ—¶æå‡ä¸ºåˆæˆå±‚ã€‚</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/implicitComposite.png\" alt=\"éšå¼åˆæˆ\"></p>\n<p>ä¸€äº›äº§ç”Ÿåˆæˆå±‚çš„åŸå› å¤ªè¿‡äºéšè”½äº†ï¼Œå°¤å…¶æ˜¯éšå¼åˆæˆã€‚åœ¨å¹³æ—¶çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¾ˆå°‘ä¼šå»å…³æ³¨å±‚åˆæˆçš„é—®é¢˜ï¼Œå¾ˆå®¹æ˜“å°±äº§ç”Ÿä¸€äº›ä¸åœ¨é¢„æœŸèŒƒå›´å†…çš„åˆæˆå±‚ï¼Œå½“è¿™äº›ä¸ç¬¦åˆé¢„æœŸçš„åˆæˆå±‚è¾¾åˆ°ä¸€å®šé‡çº§æ—¶ï¼Œå°±ä¼šå˜æˆ<strong>å±‚çˆ†ç‚¸</strong></p>\n<p>æ¶ˆé™¤éšå¼åˆæˆå°±æ˜¯è¦æ¶ˆé™¤å…ƒç´ äº¤å ï¼Œæ‹¿è¿™ä¸ªDEMOæ¥è¯´ï¼Œåªéœ€è¦ç»™ä¸Šå±‚<code>div</code>çš„<code>z-index</code>å±æ€§è®¾ç½®ä¸€ä¸ªè¾ƒé«˜çš„æ•°å€¼ï¼Œå°±èƒ½è®©å®ƒé«˜äºé¡µé¢ä¸­å…¶ä»–å…ƒç´ ï¼Œè‡ªç„¶ä¹Ÿå°±æ²¡æœ‰åˆæˆå±‚æå‡çš„å¿…è¦äº†</p>\n<p>å½“ç„¶äº†ï¼Œé¢å¯¹è¿™ç§é—®é¢˜ï¼Œæµè§ˆå™¨ä¹Ÿæœ‰ç›¸åº”çš„åº”å¯¹ç­–ç•¥ï¼Œ<strong>å±‚å‹ç¼©</strong>ã€‚å¦‚æœå¤šä¸ªæ¸²æŸ“å±‚åŒä¸€ä¸ªåˆæˆå±‚é‡å æ—¶ï¼Œè¿™äº›æ¸²æŸ“å±‚ä¼šè¢«å‹ç¼©åˆ°ä¸€ä¸ª<code>GraphicsLayer</code>ä¸­ï¼Œä»¥é˜²æ­¢ç”±äºé‡å åŸå› å¯¼è‡´å¯èƒ½å‡ºç°çš„å±‚çˆ†ç‚¸</p>\n<h2 id=\"å›æµ\">å›æµ</h2>\n<p>å½“å¯¹DOMçš„ä¿®æ”¹å¼•å‘DOM<strong>å‡ ä½•å°ºå¯¸</strong>å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œå°±ä¼šå‘ç”Ÿ<strong>å›æµ</strong></p>\n<p>å…·ä½“è¡¨ç°åœ¨ä»¥ä¸‹æ“ä½œï¼š</p>\n<ul>\n<li>è®¾ç½®<code>width</code>ã€<code>height</code>ã€<code>padding</code>ã€<code>margin</code>ã€<code>border</code>ã€<code>left</code>ç­‰å±æ€§</li>\n<li>æ·»åŠ æˆ–åˆ é™¤domèŠ‚ç‚¹</li>\n<li>è¯»å†™<code>offset-*</code>ã€<code>scroll-*</code>ã€<code>client-*</code>å±æ€§ã€‚æµè§ˆå™¨ä¸ºäº†è·å–è¿™äº›å€¼ï¼Œéœ€è¦è¿›è¡Œå›æµæ“ä½œ</li>\n<li>è°ƒç”¨<code>getCompoutedStyle</code>ã€<code>getBoundingClientRect</code>ã€<code>scrooTo</code>æ–¹æ³•</li>\n</ul>\n<p>å‘ç”Ÿå›æµæ—¶ï¼Œå°†é‡æ–°æ¸²æŸ“DOMæ ‘ï¼Œæ¯”è¾ƒè€—æ—¶</p>\n<h2 id=\"é‡ç»˜\">é‡ç»˜</h2>\n<p>å½“å¯¹DOMçš„ä¿®æ”¹å¯¼è‡´äº†æ ·å¼çš„å˜åŒ–ï¼Œæ¯”å¦‚ä¿®æ”¹äº†<code>color</code>ï¼Œå¹¶æ²¡æœ‰å½±å“å‡ ä½•å±æ€§ï¼Œè¿™æ—¶ä¼šè§¦å‘é‡ç»˜</p>\n<p>ç”±äºæ²¡æœ‰å¯¼è‡´DOMå‡ ä½•å±æ€§çš„å˜åŒ–ï¼Œå› æ­¤å…ƒç´ çš„ä½ç½®ä¿¡æ¯ä¸éœ€è¦æ›´æ–°ï¼Œä»è€Œçœå»å¸ƒå±€çš„è¿‡ç¨‹ï¼Œç›¸è¾ƒäºå›æµæ¯”è¾ƒèŠ‚çœèµ„æºå¼€é”€</p>\n<h2 id=\"åˆæˆ\">åˆæˆ</h2>\n<p>åˆ©ç”¨CSS3çš„<code>transform</code>ã€<code>opacity</code>ã€<code>filter</code>è¿™äº›å±æ€§å°±å¯ä»¥å®ç°<strong>åˆæˆ</strong>çš„æ•ˆæœï¼Œä¹Ÿå°±æ˜¯å¤§å®¶å¸¸è¯´çš„GPUåŠ é€Ÿ</p>\n<ol>\n<li>èƒ½å¤Ÿå……åˆ†å‘æŒ¥GPUçš„ä¼˜åŠ¿ã€‚åˆæˆçº¿ç¨‹ç”Ÿæˆä½å›¾çš„è¿‡ç¨‹ä¸­ä¼šè°ƒç”¨çº¿ç¨‹æ± ï¼Œå¹¶åœ¨å…¶ä¸­ä½¿ç”¨GPUè¿›è¡ŒåŠ é€Ÿç”Ÿæˆ</li>\n<li>ç‹¬å ä¸€ä¸ª<code>GraphicsLayer</code></li>\n</ol>\n<p>æå‡ä¸ºåˆæˆå±‚çš„æƒ…å†µï¼š</p>\n<ul>\n<li><code>translate3d</code> <code>translateZ</code></li>\n<li><code>video</code> <code>canvas</code> <code>iframe</code></li>\n<li>é€šè¿‡<code>Element.animate()</code>å®ç°çš„<code>opacity</code>åŠ¨ç”»è½¬æ¢</li>\n<li>é€šè¿‡CSSåŠ¨ç”»å®ç°çš„<code>opacity</code>åŠ¨ç”»è½¬æ¢</li>\n<li>CSS <code>will-change</code>å±æ€§</li>\n<li>å¯¹<code>opacity</code> <code>transform</code> <code>filter</code>åº”ç”¨äº†<code>animation</code>æˆ–è€…<code>transition</code></li>\n</ul>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://juejin.cn/post/6844903966573068301\">æµè§ˆå™¨å±‚åˆæˆä¸é¡µé¢æ¸²æŸ“ä¼˜åŒ–</a></p>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/Performance/How_browsers_work\">æ¸²æŸ“é¡µé¢ï¼šæµè§ˆå™¨çš„å·¥ä½œåŸç†</a></p>\n"},{"title":"æµè§ˆå™¨å¤ä¹ -ç¼“å­˜","tags":["æµè§ˆå™¨ç¼“å­˜"],"categories":"2021å¤ä¹ ","description":"å¯¹äºä¸€ä¸ªæ•°æ®è¯·æ±‚æ¥è¯´ï¼Œå¯ä»¥åˆ†ä¸ºå‘èµ·ç½‘ç»œè¯·æ±‚ã€åç«¯å¤„ç†ã€æµè§ˆå™¨å“åº”ä¸‰ä¸ªæ­¥éª¤ã€‚æµè§ˆå™¨ç¼“å­˜å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨ç¬¬ä¸€æ­¥å’Œç¬¬ä¸‰æ­¥ä¸­ä¼˜åŒ–æ€§èƒ½ã€‚ç›´æ¥ä½¿ç”¨ç¼“å­˜è€Œä¸å‘èµ·è¯·æ±‚æˆ–å‘èµ·äº†è¯·æ±‚ä½†åç«¯å­˜å‚¨çš„æ•°æ®ä¸æµè§ˆå™¨ç¼“å­˜ä¸­çš„ä¸€è‡´é‚£å°±æ²¡å¿…è¦å°†æ•°æ®ä¼ è¾“å›æ¥ï¼Œç›´æ¥è¯»å–ç¼“å­˜ä¸­çš„æ•°æ®èŠ‚çœç½‘ç»œä¼ è¾“å¼€é”€\n\nç¼“å­˜çš„æ„ä¹‰åœ¨äºå‡å°‘è¯·æ±‚ï¼Œæ›´å¤šåœ°ä½¿ç”¨æœ¬åœ°çš„èµ„æºï¼Œç»™ç”¨æˆ·æ›´å¥½çš„ä½“éªŒçš„åŒæ—¶ï¼Œä¹Ÿèƒ½å‡è½»æœåŠ¡å™¨å‹åŠ›ã€‚æ‰€ä»¥æœ€ä½³å®è·µå°±æ˜¯**å°½å¯èƒ½å‘½ä¸­å¼ºç¼“å­˜ï¼ŒåŒæ—¶èƒ½","createDate":"2021-05-16 08:10:35","updateDate":"2021-06-11 10:55:56","body":"<p>å¯¹äºä¸€ä¸ªæ•°æ®è¯·æ±‚æ¥è¯´ï¼Œå¯ä»¥åˆ†ä¸ºå‘èµ·ç½‘ç»œè¯·æ±‚ã€åç«¯å¤„ç†ã€æµè§ˆå™¨å“åº”ä¸‰ä¸ªæ­¥éª¤ã€‚æµè§ˆå™¨ç¼“å­˜å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨ç¬¬ä¸€æ­¥å’Œç¬¬ä¸‰æ­¥ä¸­ä¼˜åŒ–æ€§èƒ½ã€‚ç›´æ¥ä½¿ç”¨ç¼“å­˜è€Œä¸å‘èµ·è¯·æ±‚æˆ–å‘èµ·äº†è¯·æ±‚ä½†åç«¯å­˜å‚¨çš„æ•°æ®ä¸æµè§ˆå™¨ç¼“å­˜ä¸­çš„ä¸€è‡´é‚£å°±æ²¡å¿…è¦å°†æ•°æ®ä¼ è¾“å›æ¥ï¼Œç›´æ¥è¯»å–ç¼“å­˜ä¸­çš„æ•°æ®èŠ‚çœç½‘ç»œä¼ è¾“å¼€é”€</p>\n<p>ç¼“å­˜çš„æ„ä¹‰åœ¨äºå‡å°‘è¯·æ±‚ï¼Œæ›´å¤šåœ°ä½¿ç”¨æœ¬åœ°çš„èµ„æºï¼Œç»™ç”¨æˆ·æ›´å¥½çš„ä½“éªŒçš„åŒæ—¶ï¼Œä¹Ÿèƒ½å‡è½»æœåŠ¡å™¨å‹åŠ›ã€‚æ‰€ä»¥æœ€ä½³å®è·µå°±æ˜¯<strong>å°½å¯èƒ½å‘½ä¸­å¼ºç¼“å­˜ï¼ŒåŒæ—¶èƒ½åœ¨ç‰ˆæœ¬æ›´æ–°çš„æ—¶å€™è®©å®¢æˆ·ç«¯çš„ç¼“å­˜å¤±æ•ˆ</strong></p>\n<h2 id=\"ç¼“å­˜ä½ç½®\">ç¼“å­˜ä½ç½®</h2>\n<h3 id=\"memory-cache\">memory cache</h3>\n<p>memory cacheå°±æ˜¯å†…å­˜ä¸­çš„ç¼“å­˜ï¼Œè¯»å–æ•°æ®çš„é€Ÿåº¦æ¯”è¾ƒå¿«ã€‚è™½ç„¶å†…å­˜ç¼“å­˜é«˜æ•ˆï¼Œä½†æ˜¯ç¼“å­˜æŒç»­æ€§å¾ˆçŸ­ï¼Œä¼š<strong>éšç€è¿›ç¨‹çš„é‡Šæ”¾è€Œé‡Šæ”¾</strong>ï¼Œä¸€æ—¦æˆ‘ä»¬å…³é—­é¡µé¢ï¼Œå†…å­˜ä¸­çš„æ•°æ®ä¹Ÿå°±è¢«é‡Šæ”¾äº†ã€‚ï¼ˆåˆ·æ–°é¡µé¢ä¸ä¼šä¸¢å¤±ï¼‰</p>\n<h3 id=\"disk-cache\">disk cache</h3>\n<p>å­˜å‚¨åœ¨ç¡¬ç›˜ä¸­çš„ç¼“å­˜ï¼Œè¯»å–é€Ÿåº¦è¾ƒå†…å­˜æ…¢ï¼Œä½†å­˜å‚¨é‡å¤§ï¼Œå­˜å‚¨æ—¶é—´é•¿ã€‚è¾ƒ<code>memory cache</code>èƒœåœ¨å®¹é‡å’Œæ—¶æ•ˆæ€§ä¸Š</p>\n<p>åœ¨æ‰€æœ‰æµè§ˆå™¨ç¼“å­˜ä¸­ï¼Œdisk cacheè¦†ç›–é¢åŸºæœ¬æ˜¯æœ€å¤§çš„ã€‚å®ƒä¼šæ ¹æ® <code>http header</code>ä¸­çš„æŸäº›å­—æ®µåˆ¤æ–­å“ªäº›èµ„æºéœ€è¦è¢«ç¼“å­˜ï¼Œå“ªäº›èµ„æºå¯ä»¥ç›´æ¥ä»ç¼“å­˜å–è€Œä¸ç”¨å‘é€è¯·æ±‚å»è·å–ã€‚<strong>å³ä½¿åœ¨è·¨ç«™ç‚¹çš„æƒ…å†µä¸‹ï¼Œç›¸åŒåœ°å€çš„èµ„æºä¸€æ—¦è¢«ç¡¬ç›˜ç¼“å­˜ä¸‹æ¥å°±ä¸ä¼šå†å»è¯·æ±‚æ•°æ®</strong></p>\n<h2 id=\"push-cache\">push cache</h2>\n<p>http/2ä¸­çš„å†…å®¹ï¼Œä»…åœ¨ä¼šè¯(session)ä¸­å­˜åœ¨</p>\n<h2 id=\"ç¼“å­˜ç­–ç•¥\">ç¼“å­˜ç­–ç•¥</h2>\n<p>é€šå¸¸æµè§ˆå™¨ç¼“å­˜ç­–ç•¥åˆ†ä¸ºä¸¤ç§ï¼šå¼ºç¼“å­˜å’Œåå•†ç¼“å­˜ï¼Œå¹¶ä¸”ç¼“å­˜ç­–ç•¥éƒ½æ˜¯é€šè¿‡è®¾ç½®http headeræ¥å®ç°çš„</p>\n<ol>\n<li>æµè§ˆå™¨æ¯æ¬¡å‘èµ·è¯·æ±‚ï¼Œéƒ½ä¼šå…ˆåœ¨æµè§ˆå™¨ä¸­æŸ¥æ‰¾è¯¥è¯·æ±‚çš„ç»“æœåŠç¼“å­˜æ ‡è¯†</li>\n<li>æµè§ˆå™¨æ¯æ¬¡æ‹¿åˆ°è¿”å›çš„ç»“æœè¯·æ±‚éƒ½ä¼šå°†è¯¥ç»“æœå’Œç¼“å­˜æ ‡è¯†å­˜å…¥æµè§ˆå™¨ç¼“å­˜ä¸­</li>\n</ol>\n<p>å‘èµ·è¯·æ±‚åŠç¼“å­˜å¤„ç†æµç¨‹ï¼š</p>\n<ol>\n<li>æµè§ˆå™¨åœ¨åŠ è½½èµ„æºæ—¶ï¼Œç°æ ¹æ®è¿™ä¸ªèµ„æºçš„ä¸€äº›http headerå­—æ®µåˆ¤æ–­å®ƒæ˜¯å¦å‘½ä¸­å¼ºç¼“å­˜ï¼Œå¼ºç¼“å­˜å¦‚æœå‘½ä¸­ï¼Œæµè§ˆå™¨ä¼šç›´æ¥ä»è‡ªå·±çš„ç¼“å­˜ä¸­è¯»å–èµ„æºä¸ä¼šå‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨</li>\n<li>å½“å¼ºç¼“å­˜æ²¡æœ‰å‘½ä¸­çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šå‘é€ä¸€ä¸ªè¯·æ±‚åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨æ ¹æ®http headerä¸­çš„ä¸€äº›å­—æ®µåˆ¤æ–­è¿™ä¸ªèµ„æºæ˜¯å¦å‘½ä¸­åå•†ç¼“å­˜ï¼Œå¦‚æœåå•†ç¼“å­˜å‘½ä¸­ï¼ŒæœåŠ¡å™¨ä¼šä»¥<strong>304</strong>å“åº”è¿™ä¸ªè¯·æ±‚ï¼Œä¸ä¼šè¿”å›è¯¥èµ„æºï¼Œå‘Šè¯‰æµè§ˆå™¨å¯ä»¥ä»ç¼“å­˜ä¸­è¯»å–ï¼›å¦‚æœæ²¡å‘½ä¸­åˆ™è¿”å›è¯¥èµ„æº</li>\n</ol>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/browser_cache.png\" alt=\"æµè§ˆå™¨ç¼“å­˜ç­–ç•¥\"></p>\n<h3 id=\"å¼ºç¼“å­˜\">å¼ºç¼“å­˜</h3>\n<p>å¼ºç¼“å­˜å¯ä»¥é€šè¿‡è®¾ç½®ä¸¤ç§http headeræ¥å®ç°ï¼š<code>Expires</code>å’Œ<code>Cache-Control</code></p>\n<ul>\n<li>Expires</li>\n</ul>\n<p><code>Expires: Web, 22 Oct 2021 08:41:00 GMT</code></p>\n<p><code>Expires</code>æ˜¯http/1çš„äº§ç‰©ï¼Œè¡¨ç¤ºèµ„æºä¼šåœ¨<code>Web, 22 Oct 2021 08:41:00 GMT</code>åè¿‡æœŸï¼Œéœ€è¦å†æ¬¡è¯·æ±‚ã€‚<code>Expires</code>å—é™äºæœ¬åœ°æ—¶é—´ï¼Œå¦‚æœä¿®æ”¹äº†æœ¬åœ°æ—¶é—´å¯èƒ½ä¼šé€ æˆç¼“å­˜å¤±æ•ˆ</p>\n<ul>\n<li>Cache-Control</li>\n</ul>\n<p><code>Cache-Control: public, max-age=31536000</code></p>\n<p><code>Cache-Control</code>å‡ºç°åœ¨http/1.1ï¼Œä¼˜å…ˆçº§é«˜äºExpiresã€‚è¯¥å±æ€§è¡¨ç¤ºèµ„æºä¼šåœ¨31536000ç§’åå¤±æ•ˆéœ€è¦å†æ¬¡è¯·æ±‚</p>\n<p><code>Cache-Control</code>å¯ä»¥åœ¨è¯·æ±‚æˆ–å“åº”å¤´ä¸­è®¾ç½®ï¼Œå¹¶ä¸”å¯ä»¥ç»„åˆä½¿ç”¨å¤šç§æŒ‡ä»¤</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/cache_1.png\" alt=\"cache-control\"></p>\n<h3 id=\"åå•†ç¼“å­˜\">åå•†ç¼“å­˜</h3>\n<p>åå•†ç¼“å­˜å¯ä»¥é€šè¿‡è®¾ç½®ä¸¤ç§http headerå®ç°ï¼š<code>Last-Modified</code>å’Œ<code>ETag</code></p>\n<ul>\n<li><code>Last-Modified</code>å’Œ<code>If-Modified-Since</code></li>\n</ul>\n<p><code>Last-Modified</code>ä¼šéšç€è®¿é—®èµ„æºæ—¶è¿”å›ï¼Œè¡¨ç¤ºè¯¥èµ„æºåœ¨æµè§ˆå™¨ä¸Šæœ€åä¿®æ”¹æ—¶é—´ã€‚æµè§ˆå™¨å†æ¬¡è¯·æ±‚èµ„æºæ—¶ï¼Œ<code>If-Modified-Since</code>ä¼šå°†<code>Last-Modified</code>çš„å€¼æºå¸¦ä¸Šï¼Œè¯¢é—®æœåŠ¡å™¨åœ¨è¯¥æ—¥æœŸåèµ„æºæ˜¯å¦æœ‰æ›´æ–°ï¼Œæœ‰çš„è¯å°±ä¼šå°†æ–°çš„èµ„æºé€å›æ¥ï¼Œå¦åˆ™è¿”å›<strong>304</strong>ï¼Œå³å‘½ä¸­ç¼“å­˜</p>\n<p>å’Œ<code>Expires</code>ä¸€æ ·ï¼Œæœ¬åœ°æ‰“å¼€ç¼“å­˜æ–‡ä»¶ä¸€æ ·ä¼šå¯¼è‡´ç¼“å­˜å¤±æ•ˆã€‚æ­¤å¤–ï¼ŒLast-Modifiedä»¥ç§’è®¡æ—¶ï¼Œå¦‚æœä»¥æ›´ç»†ç²’åº¦çš„æ—¶é—´å†…ä¿®æ”¹æ–‡ä»¶ï¼ŒæœåŠ¡å™¨è¿˜æ˜¯è®¤ä¸ºæ–‡ä»¶æ²¡æœ‰æ›´æ–°å‘Šè¯‰æµè§ˆå™¨å¯ä»¥ä½¿ç”¨ç¼“å­˜ä¸­çš„æ–‡ä»¶</p>\n<ul>\n<li><code>ETag</code>å’Œ<code>If-None-Match</code></li>\n</ul>\n<p><code>ETag</code>ç±»ä¼¼æ–‡ä»¶æŒ‡çº¹ï¼Œä¹Ÿä¼šéšç€è¯·æ±‚èµ„æºæ—¶è¿”å›(æµè§ˆå™¨ç”Ÿæˆ)ã€‚æµè§ˆå™¨å†æ¬¡è¯·æ±‚èµ„æºæ—¶ï¼Œ<code>If-None-Match</code>ä¼šå°†<code>ETag</code>çš„å€¼æºå¸¦ä¸Šï¼Œè¯¢é—®è¯¥èµ„æºçš„<code>ETag</code>æ˜¯å¦æœ‰è¿‡å˜åŠ¨ï¼Œæœ‰å˜åŠ¨çš„è¯å°±å°†æœ€æ–°çš„èµ„æºè¿”å›ï¼Œå¦åˆ™è¿”å›<strong>304</strong>ï¼Œå³å‘½ä¸­ç¼“å­˜</p>\n<p><code>ETag</code>çš„ä¼˜å…ˆçº§é«˜äº<code>Last-Modified</code></p>\n<h2 id=\"å¼ºç¼“å­˜å’Œåå•†ç¼“å­˜çš„å¼‚åŒ\">å¼ºç¼“å­˜å’Œåå•†ç¼“å­˜çš„å¼‚åŒ</h2>\n<p>å¼ºç¼“å­˜å’Œåå•†ç¼“å­˜çš„å…±åŒç‚¹æ˜¯å¦‚æœå‘½ä¸­éƒ½æ˜¯ä»ç¼“å­˜ä¸­è¯»å–èµ„æºæ•°æ®ï¼›åŒºåˆ«æ˜¯åå•†ç¼“å­˜æ€»æ˜¯ä¼šå‘é€ä¸€ä¸ªè¯·æ±‚è€Œå¼ºç¼“å­˜ä¸ä¼š</p>\n"},{"title":"å‰ç«¯æ¶æ„&è½¯å®åŠ›-å·¥ç¨‹åŒ–","tags":["å·¥ç¨‹åŒ–"],"categories":"2021å¤ä¹ ","description":"> å·¥ç¨‹åŒ–ï¼šä½¿ç”¨ä¸€äº›åˆ—å…·æœ‰æ¨¡å—åŒ–ã€ä»£ç åˆ†å‰²ã€ä»£ç è½¬è¯‘ã€å¯¹éJavaScriptæ–‡ä»¶æ”¯æŒè‰¯å¥½çš„å·¥å…·ï¼Œæ„å»ºæœ‰æ•ˆçš„ã€é«˜è´¨é‡çš„ã€é«˜å¯ç»´æŠ¤æ€§ã€å®ç”¨çš„ä¸­å¤§å‹å‰ç«¯åº”ç”¨\n\nè¿™äº›å·¥å…·æ‰€è¦æ”¯æŒçš„ç‰¹æ€§ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªç»´åº¦\n\n## æ¨¡å—åŒ–\n\nå³å¯¹ESMã€CommonJSç­‰ä¸»æµæ¨¡å—åŒ–æœºåˆ¶çš„æ”¯æŒã€‚éšç€å‰ç«¯åº”ç”¨çš„æ—¥æ¸åºå¤§ï¼Œå°†åº”ç”¨æˆ–æŒ‰ä¸šåŠ¡åˆ’åˆ†æˆ–æŒ‰åŠŸèƒ½åˆ’åˆ†ä¸ºå¤šä¸ªæ¨¡å—å·²æ˜¯å¤§åŠ¿æ‰€è¶‹ï¼Œå› æ­¤è‰¯å¥½çš„æ¨¡å—åŒ–æ”¯æŒå°†æœ‰åŠ©äºå¼€å‘å‡ºå¥å£®ã€å¯ç»´æŠ¤æ€§","createDate":"2021-06-10 14:55:25","updateDate":"2021-06-10 23:18:07","body":"<blockquote>\n<p>å·¥ç¨‹åŒ–ï¼šä½¿ç”¨ä¸€äº›åˆ—å…·æœ‰æ¨¡å—åŒ–ã€ä»£ç åˆ†å‰²ã€ä»£ç è½¬è¯‘ã€å¯¹éJavaScriptæ–‡ä»¶æ”¯æŒè‰¯å¥½çš„å·¥å…·ï¼Œæ„å»ºæœ‰æ•ˆçš„ã€é«˜è´¨é‡çš„ã€é«˜å¯ç»´æŠ¤æ€§ã€å®ç”¨çš„ä¸­å¤§å‹å‰ç«¯åº”ç”¨</p>\n</blockquote>\n<p>è¿™äº›å·¥å…·æ‰€è¦æ”¯æŒçš„ç‰¹æ€§ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªç»´åº¦</p>\n<h2 id=\"æ¨¡å—åŒ–\">æ¨¡å—åŒ–</h2>\n<p>å³å¯¹ESMã€CommonJSç­‰ä¸»æµæ¨¡å—åŒ–æœºåˆ¶çš„æ”¯æŒã€‚éšç€å‰ç«¯åº”ç”¨çš„æ—¥æ¸åºå¤§ï¼Œå°†åº”ç”¨æˆ–æŒ‰ä¸šåŠ¡åˆ’åˆ†æˆ–æŒ‰åŠŸèƒ½åˆ’åˆ†ä¸ºå¤šä¸ªæ¨¡å—å·²æ˜¯å¤§åŠ¿æ‰€è¶‹ï¼Œå› æ­¤è‰¯å¥½çš„æ¨¡å—åŒ–æ”¯æŒå°†æœ‰åŠ©äºå¼€å‘å‡ºå¥å£®ã€å¯ç»´æŠ¤æ€§é«˜çš„åº”ç”¨</p>\n<h2 id=\"ä»£ç åˆ†å‰²\">ä»£ç åˆ†å‰²</h2>\n<p>åœ¨æ„å»ºæ—¶èƒ½å¤Ÿå°†é™æ€èµ„æºæ‹†åˆ†ï¼Œå› æ­¤åœ¨é¡µé¢åŠ è½½æ—¶ï¼Œå¯ä»¥å®ç°åˆç†çš„æŒ‰éœ€åŠ è½½ç­–ç•¥</p>\n<p>åŒ…æ‹¬å…¬å…±æ–‡ä»¶æå–ã€åŠ¨æ€å¯¼å…¥ç­‰</p>\n<h2 id=\"å¤„ç†éjavascriptèµ„æº\">å¤„ç†éJavaScriptèµ„æº</h2>\n<p>åœ¨å¼€å‘å‰ç«¯åº”ç”¨æ—¶ï¼Œæœ‰ç›¸å½“ä¸€éƒ¨åˆ†ä»£ç /èµ„æºä¸ºéJavaScriptï¼Œå…¶ä¸­åŒ…æ‹¬CSSã€å›¾ç‰‡ç­‰ï¼Œå¦‚ä½•å¤„ç†è¿™äº›èµ„æºä¹Ÿå˜å¾—è‡³å…³é‡è¦</p>\n<h2 id=\"ä»£ç è½¬è¯‘\">ä»£ç è½¬è¯‘</h2>\n<p>å¤„ç†ä»£ç å…¼å®¹</p>\n<h2 id=\"tree-shaking\">Tree Shaking</h2>\n<p>å‰”é™¤æ— ç”¨ä»£ç </p>\n"},{"title":"JavaScriptå¤ä¹ -2","tags":["JavaScript"],"categories":"2021å¤ä¹ ","description":"## Array.prototype.sortç®—æ³•\n\n> sort() æ–¹æ³•ç”¨åŸåœ°ç®—æ³•å¯¹æ•°ç»„çš„å…ƒç´ è¿›è¡Œæ’åºï¼Œå¹¶è¿”å›æ•°ç»„ã€‚é»˜è®¤æ’åºé¡ºåºæ˜¯åœ¨å°†å…ƒç´ è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åæ¯”è¾ƒå®ƒä»¬çš„UTF-16ä»£ç å•å…ƒå€¼åºåˆ—æ—¶æ„å»ºçš„\n\n## Symbolç”¨å¤„\n\n1. è¡¨ç¤ºä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„å˜é‡é˜²æ­¢å‘½åå†²çª\n2. æä¾›ä¸€äº›ç‰¹æ®Šçš„å±æ€§`[Symbol.itertor]`(å¯é€šè¿‡`Reflect.ownKeys(Symbol)`æŸ¥","createDate":"2021-05-31 14:58:19","updateDate":"2021-06-10 22:53:18","body":"<h2 id=\"arrayprototypesortç®—æ³•\">Array.prototype.sortç®—æ³•</h2>\n<blockquote>\n<p>sort() æ–¹æ³•ç”¨åŸåœ°ç®—æ³•å¯¹æ•°ç»„çš„å…ƒç´ è¿›è¡Œæ’åºï¼Œå¹¶è¿”å›æ•°ç»„ã€‚é»˜è®¤æ’åºé¡ºåºæ˜¯åœ¨å°†å…ƒç´ è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åæ¯”è¾ƒå®ƒä»¬çš„UTF-16ä»£ç å•å…ƒå€¼åºåˆ—æ—¶æ„å»ºçš„</p>\n</blockquote>\n<h2 id=\"symbolç”¨å¤„\">Symbolç”¨å¤„</h2>\n<ol>\n<li>è¡¨ç¤ºä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„å˜é‡é˜²æ­¢å‘½åå†²çª</li>\n<li>æä¾›ä¸€äº›ç‰¹æ®Šçš„å±æ€§<code>[Symbol.itertor]</code>(å¯é€šè¿‡<code>Reflect.ownKeys(Symbol)</code>æŸ¥çœ‹)</li>\n</ol>\n<h2 id=\"å·¥ç¨‹åŒ–\">å·¥ç¨‹åŒ–</h2>\n<p>é€šè¿‡ä¸€ç³»åˆ—å·¥å…·æ„å»ºå’Œç»´æŠ¤æœ‰æ•ˆçš„ã€å®ç”¨çš„ã€é«˜è´¨é‡çš„å‰ç«¯åº”ç”¨</p>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/sort\">MDN-Array.prototype.sort</a></p>\n"},{"title":"JavaScriptå¤ä¹ -åƒåœ¾å›æ”¶","tags":["JavaScript"],"categories":"2021å¤ä¹ ","description":"## GCåšäº†ä»€ä¹ˆï¼š\n\n1. æ‰¾åˆ°å†…å­˜ç©ºé—´ä¸­çš„åƒåœ¾\n2. å›æ”¶åƒåœ¾ï¼Œè®©ç¨‹åºèƒ½å†æ¬¡åˆ©ç”¨è¿™éƒ¨åˆ†ç©ºé—´\n\n## å¸¸ç”¨çš„å‡ ç§GCç®—æ³•\n\n### å¼•ç”¨è®¡æ•°æ³•\n\nè®°å½•å¯¹è±¡æœ‰å¤šå°‘ç¨‹åºåœ¨å¼•ç”¨å®ƒï¼Œå½“å¼•ç”¨è®¡æ•°ä¸º0æ—¶å°±ä¼šè¢«å›æ”¶\n\nä¼˜åŠ¿ï¼š\n\n- å¯å³åˆ»å›æ”¶åƒåœ¾ï¼Œå½“å¼•ç”¨è®¡æ•°ä¸º0æ—¶ï¼Œå¯¹è±¡é©¬ä¸Šä¼šæŠŠè‡ªå·±ä½œä¸ºç©ºé—²ç©ºé—´è¿åˆ°ç©ºé—²é“¾è¡¨ä¸Šã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨å˜æˆåƒåœ¾çš„æ—¶å€™å°±ç«‹åˆ»è¢«å›æ”¶\n- `GC`æ•ˆæœçŸ­ã€å¹³ã€å¿«\n\nåŠ£åŠ¿ï¼š\n\n- è®¡æ•°å™¨å¯èƒ½ä¼šå ç”¨","createDate":"2021-05-10 11:25:34","updateDate":"2021-06-10 18:38:58","body":"<h2 id=\"gcåšäº†ä»€ä¹ˆï¼š\">GCåšäº†ä»€ä¹ˆï¼š</h2>\n<ol>\n<li>æ‰¾åˆ°å†…å­˜ç©ºé—´ä¸­çš„åƒåœ¾</li>\n<li>å›æ”¶åƒåœ¾ï¼Œè®©ç¨‹åºèƒ½å†æ¬¡åˆ©ç”¨è¿™éƒ¨åˆ†ç©ºé—´</li>\n</ol>\n<h2 id=\"å¸¸ç”¨çš„å‡ ç§gcç®—æ³•\">å¸¸ç”¨çš„å‡ ç§GCç®—æ³•</h2>\n<h3 id=\"å¼•ç”¨è®¡æ•°æ³•\">å¼•ç”¨è®¡æ•°æ³•</h3>\n<p>è®°å½•å¯¹è±¡æœ‰å¤šå°‘ç¨‹åºåœ¨å¼•ç”¨å®ƒï¼Œå½“å¼•ç”¨è®¡æ•°ä¸º0æ—¶å°±ä¼šè¢«å›æ”¶</p>\n<p>ä¼˜åŠ¿ï¼š</p>\n<ul>\n<li>å¯å³åˆ»å›æ”¶åƒåœ¾ï¼Œå½“å¼•ç”¨è®¡æ•°ä¸º0æ—¶ï¼Œå¯¹è±¡é©¬ä¸Šä¼šæŠŠè‡ªå·±ä½œä¸ºç©ºé—²ç©ºé—´è¿åˆ°ç©ºé—²é“¾è¡¨ä¸Šã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨å˜æˆåƒåœ¾çš„æ—¶å€™å°±ç«‹åˆ»è¢«å›æ”¶</li>\n<li><code>GC</code>æ•ˆæœçŸ­ã€å¹³ã€å¿«</li>\n</ul>\n<p>åŠ£åŠ¿ï¼š</p>\n<ul>\n<li>è®¡æ•°å™¨å¯èƒ½ä¼šå ç”¨å¾ˆå¤§çš„ç©ºé—´</li>\n<li>æ— æ³•è§£å†³å¾ªç¯å¼•ç”¨æ— æ³•è¢«å›æ”¶çš„é—®é¢˜</li>\n</ul>\n<h3 id=\"æ ‡è®°æ¸…é™¤æ³•ğŸ‘\">æ ‡è®°æ¸…é™¤æ³•ğŸ‘</h3>\n<p>å°†<code>GC</code>è¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š</p>\n<ul>\n<li>æ ‡è®°é˜¶æ®µï¼šæŠŠæ‰€æœ‰æ´»åŠ¨å¯¹è±¡åšä¸Šæ ‡è®°</li>\n<li>æ¸…é™¤é˜¶æ®µï¼šæŠŠæ‰€æœ‰æ²¡æœ‰è¢«æ ‡è®°çš„å¯¹è±¡é”€æ¯</li>\n</ul>\n<p>ä¼˜åŠ¿ï¼š</p>\n<ul>\n<li>å®ç°ç®€å•</li>\n<li>å¯ä»¥è§£å†³å¾ªç¯å¼•ç”¨çš„é—®é¢˜</li>\n</ul>\n<p>åŠ£åŠ¿ï¼š</p>\n<ul>\n<li>é€ æˆç¢ç‰‡åŒ–</li>\n<li>ä¸èƒ½å®æ—¶å›æ”¶ï¼ˆé‡‡ç”¨å®šæ—¶ä»»åŠ¡å®šæ—¶<code>GC</code>ï¼‰</li>\n</ul>\n<h3 id=\"å¤åˆ¶ç®—æ³•\">å¤åˆ¶ç®—æ³•</h3>\n<p>å°†ä¸€ä¸ªå†…å­˜ç©ºé—´åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯Fromç©ºé—´ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯Toç©ºé—´ï¼Œå°†Fromç©ºé—´é‡Œé¢çš„æ´»åŠ¨å¯¹è±¡å¤åˆ¶åˆ°Toç©ºé—´ï¼Œç„¶åé‡Šæ”¾æ‰æ•´ä¸ªFromç©ºé—´ï¼Œç„¶åæ­¤åˆ»å°†Fromç©ºé—´å’ŒToç©ºé—´çš„èº«ä»½äº’æ¢ï¼Œé‚£ä¹ˆå°±å®Œæˆäº†ä¸€æ¬¡GCã€‚</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/copy_gc.png\" alt=\"å¤åˆ¶ç®—æ³•GC\"></p>\n"},{"title":"JavaScriptå¤ä¹ -ç»§æ‰¿","tags":["JavaScript"],"categories":"2021å¤ä¹ ","description":"ä½¿ç”¨ç»§æ‰¿çš„åŸå› ï¼š**å¤ç”¨**\n\n## åŸºäºåŸå‹é“¾\n\næ¯ä¸ªæ„é€ å‡½æ•°éƒ½æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼ŒåŸå‹æœ‰ä¸€ä¸ªå±æ€§æŒ‡å›æ„é€ å‡½æ•°ï¼Œè€Œå®ä¾‹æœ‰ä¸€ä¸ªå†…éƒ¨æŒ‡é’ˆæŒ‡å‘åŸå‹ã€‚å¦‚æœåŸå‹æ˜¯å¦ä¸€ä¸ªç±»å‹çš„å®ä¾‹å‘¢ï¼Ÿé‚£å°±æ„å‘³ç€è¿™ä¸ªåŸå‹æœ¬èº«æœ‰ä¸€ä¸ªå†…éƒ¨æŒ‡é’ˆæŒ‡å‘å¦ä¸€ä¸ªåŸå‹ï¼Œç›¸åº”åœ°å¦ä¸€ä¸ªåŸå‹ä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡...è¿™æ ·å°±åœ¨å®ä¾‹å’ŒåŸå‹ä¹‹é—´æ„é€ äº†ä¸€æ¡åŸå‹é“¾\n\n``` js\nfunction SuperType() {\n    this.property","createDate":"2021-05-10 14:17:07","updateDate":"2021-06-10 18:24:51","body":"<p>ä½¿ç”¨ç»§æ‰¿çš„åŸå› ï¼š<strong>å¤ç”¨</strong></p>\n<h2 id=\"åŸºäºåŸå‹é“¾\">åŸºäºåŸå‹é“¾</h2>\n<p>æ¯ä¸ªæ„é€ å‡½æ•°éƒ½æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼ŒåŸå‹æœ‰ä¸€ä¸ªå±æ€§æŒ‡å›æ„é€ å‡½æ•°ï¼Œè€Œå®ä¾‹æœ‰ä¸€ä¸ªå†…éƒ¨æŒ‡é’ˆæŒ‡å‘åŸå‹ã€‚å¦‚æœåŸå‹æ˜¯å¦ä¸€ä¸ªç±»å‹çš„å®ä¾‹å‘¢ï¼Ÿé‚£å°±æ„å‘³ç€è¿™ä¸ªåŸå‹æœ¬èº«æœ‰ä¸€ä¸ªå†…éƒ¨æŒ‡é’ˆæŒ‡å‘å¦ä¸€ä¸ªåŸå‹ï¼Œç›¸åº”åœ°å¦ä¸€ä¸ªåŸå‹ä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡...è¿™æ ·å°±åœ¨å®ä¾‹å’ŒåŸå‹ä¹‹é—´æ„é€ äº†ä¸€æ¡åŸå‹é“¾</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">SuperType</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">property</span> = <span class=\"hljs-literal\">true</span>;\n}\n<span class=\"hljs-title class_\">SuperType</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">getSuperValue</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">property</span>;\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">SubType</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">property</span> = <span class=\"hljs-literal\">false</span>;\n}\n<span class=\"hljs-title class_\">SubType</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">SuperType</span>();\n    <span class=\"hljs-title class_\">SubType</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">getSubValue</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">property</span>;\n}\n\n<span class=\"hljs-keyword\">const</span> instance = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">SubType</span>();\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(instance.<span class=\"hljs-title function_\">getSuperValue</span>());\n<span class=\"hljs-keyword\">const</span> instance2 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">SubType</span>();\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(instance2.<span class=\"hljs-title function_\">getSuperValue</span>());\n<span class=\"hljs-comment\">// false</span>\n<span class=\"hljs-comment\">// false</span>\n</code></pre>\n<p><code>getSuperTypeValue()</code>æ–¹æ³•è¿˜åœ¨<code>SuperType.prototype</code>ä¸Šï¼Œè€Œ<code>prototype</code>å´åœ¨<code>SubType.prototype</code>ä¸Šã€‚è¿™æ˜¯å› ä¸º<code>getSuperType()</code>æ˜¯ä¸€ä¸ªåŸå‹æ–¹æ³•ï¼Œè€Œ<code>property</code>æ˜¯ä¸€ä¸ªå®ä¾‹å±æ€§</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/extends_prototype.png\" alt=\"åŸºäºåŸå‹é“¾æ¨¡å¼çš„ç»§æ‰¿\"></p>\n<p>é—®é¢˜ï¼š</p>\n<ol>\n<li>åŸå‹ä¸­åŒ…å«çš„å¼•ç”¨å€¼ä¼šåœ¨æ‰€æœ‰å®ä¾‹ä¸­å…±äº«</li>\n<li>å­ç±»åœ¨å®ä¾‹åŒ–æ—¶ä¸èƒ½ç»™çˆ¶ç±»çš„æ„é€ å‡½æ•°ä¼ å‚</li>\n</ol>\n<h2 id=\"ç›—ç”¨æ„é€ å‡½æ•°\">ç›—ç”¨æ„é€ å‡½æ•°</h2>\n<p>åœ¨å­ç±»æ„é€ å‡½æ•°ä¸­è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°</p>\n<p>é—®é¢˜ï¼š</p>\n<p>åªç»§æ‰¿äº†çˆ¶ç±»çš„å±æ€§ï¼Œæ²¡æœ‰ç»§æ‰¿çˆ¶ç±»çš„æ–¹æ³•</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">SuperType</span>(<span class=\"hljs-params\">name</span>) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">name</span> = name;\n}\n<span class=\"hljs-title class_\">SuperType</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">getSuperValue</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">property</span>;\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">SubType</span>(<span class=\"hljs-params\">name, age</span>) {\n    <span class=\"hljs-title class_\">SuperType</span>.<span class=\"hljs-title function_\">call</span>(<span class=\"hljs-variable language_\">this</span>, name);\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">age</span> = age;\n}\n\n<span class=\"hljs-keyword\">const</span> instance = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">SubType</span>(<span class=\"hljs-string\">&#x27;tom&#x27;</span>, <span class=\"hljs-number\">21</span>);\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(instance);\n<span class=\"hljs-keyword\">const</span> instance2 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">SubType</span>(<span class=\"hljs-string\">&#x27;jerry&#x27;</span>, <span class=\"hljs-number\">22</span>);\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(instance2);\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(instance2.<span class=\"hljs-property\">getSuperValue</span>);\n<span class=\"hljs-comment\">// SubType { name: &#x27;tom&#x27;, age: 21 }  </span>\n<span class=\"hljs-comment\">// SubType { name: &#x27;jerry&#x27;, age: 22 }</span>\n<span class=\"hljs-comment\">// undefined</span>\n</code></pre>\n<h2 id=\"ç»„åˆç»§æ‰¿\">ç»„åˆç»§æ‰¿</h2>\n<p>ä½¿ç”¨åŸå‹é“¾ç»§æ‰¿æ–¹æ³•ï¼Œä½¿ç”¨æ„é€ å‡½æ•°ç»§æ‰¿å±æ€§</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">SuperType</span>(<span class=\"hljs-params\">name</span>) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">name</span> = name;\n}\n<span class=\"hljs-title class_\">SuperType</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">getSuperValue</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">name</span>;\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">SubType</span>(<span class=\"hljs-params\">name, age</span>) {\n    <span class=\"hljs-title class_\">SuperType</span>.<span class=\"hljs-title function_\">call</span>(<span class=\"hljs-variable language_\">this</span>, name);\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">age</span> = age;\n}\n<span class=\"hljs-title class_\">SubType</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">SuperType</span>();\n<span class=\"hljs-title class_\">SubType</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">getSubValue</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">age</span>;\n}\n\n<span class=\"hljs-keyword\">const</span> instance = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">SubType</span>(<span class=\"hljs-string\">&#x27;tom&#x27;</span>, <span class=\"hljs-number\">21</span>);\n<span class=\"hljs-keyword\">const</span> instance2 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">SubType</span>(<span class=\"hljs-string\">&#x27;jerry&#x27;</span>, <span class=\"hljs-number\">23</span>);\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(instance);\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(instance.<span class=\"hljs-title function_\">getSubValue</span>());\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(instance.<span class=\"hljs-title function_\">getSuperValue</span>());\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(instance2.<span class=\"hljs-property\">name</span>);\n<span class=\"hljs-comment\">// SuperType { name: &#x27;tom&#x27;, age: 21 }</span>\n<span class=\"hljs-comment\">// 21</span>\n<span class=\"hljs-comment\">// tom</span>\n<span class=\"hljs-comment\">// jerry</span>\n</code></pre>\n<h2 id=\"å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿\">å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿</h2>\n<p>ç»„åˆå¼ç»§æ‰¿çš„ç¼ºç‚¹åœ¨äºè°ƒç”¨äº†ä¸¤æ¬¡çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œé€ æˆäº†å­ç±»æ„é€ å‡½æ•°å’Œå®ä¾‹ä¸Šæœ‰ä¸€ç»„ç›¸åŒçš„å±æ€§</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/prorotype_constructor_inheritance.png\" alt=\"ç»„åˆå¼ç»§æ‰¿çš„ç¼ºç‚¹\"></p>\n<p>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿é€šè¿‡ç›—ç”¨æ„é€ å‡½æ•°ç»§æ‰¿å±æ€§ï¼Œä½¿ç”¨æ··åˆå¼åŸå‹é“¾ç»§æ‰¿æ–¹æ³•</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">inheritance</span>(<span class=\"hljs-params\">superType, subType</span>) {\n    <span class=\"hljs-keyword\">const</span> pro = <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">create</span>(superType.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>);\n    pro.<span class=\"hljs-property\">constructor</span> = subType;\n    subType.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span> = pro;\n}\n  \n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">SuperType</span>(<span class=\"hljs-params\">name, friends</span>) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">name</span> = name;\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">friends</span> = friends;\n}\n<span class=\"hljs-title class_\">SuperType</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">getSuperValue</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">name</span>;\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">SubType</span>(<span class=\"hljs-params\">name, age, friends, colors</span>) {\n    <span class=\"hljs-title class_\">SuperType</span>.<span class=\"hljs-title function_\">call</span>(<span class=\"hljs-variable language_\">this</span>, name, friends);\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">age</span> = age;\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">colors</span> = colors;\n}\n<span class=\"hljs-title function_\">inheritance</span>(<span class=\"hljs-title class_\">SuperType</span>, <span class=\"hljs-title class_\">SubType</span>);\n<span class=\"hljs-title class_\">SubType</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">getSubValue</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">age</span>;\n}\n\n<span class=\"hljs-keyword\">const</span> instance = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">SubType</span>(<span class=\"hljs-string\">&#x27;tom&#x27;</span>, <span class=\"hljs-number\">21</span>, [], []);\ninstance.<span class=\"hljs-property\">friends</span>.<span class=\"hljs-title function_\">push</span>(<span class=\"hljs-string\">&#x27;jerry&#x27;</span>);\ninstance.<span class=\"hljs-property\">colors</span>.<span class=\"hljs-title function_\">push</span>(<span class=\"hljs-string\">&#x27;pink&#x27;</span>);\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(instance.<span class=\"hljs-title function_\">getSuperValue</span>());\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(instance.<span class=\"hljs-title function_\">getSubValue</span>());\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(instance.<span class=\"hljs-property\">friends</span>);\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(instance.<span class=\"hljs-property\">colors</span>);\n\n<span class=\"hljs-keyword\">const</span> instance2 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">SubType</span>(<span class=\"hljs-string\">&#x27;jerry&#x27;</span>, <span class=\"hljs-number\">21</span>, [], []);\ninstance2.<span class=\"hljs-property\">friends</span>.<span class=\"hljs-title function_\">push</span>(<span class=\"hljs-string\">&#x27;tom&#x27;</span>);\ninstance2.<span class=\"hljs-property\">colors</span>.<span class=\"hljs-title function_\">push</span>(<span class=\"hljs-string\">&#x27;black&#x27;</span>);\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(instance2.<span class=\"hljs-property\">friends</span>);\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(instance2.<span class=\"hljs-property\">colors</span>);\n<span class=\"hljs-comment\">// tom</span>\n<span class=\"hljs-comment\">// 21</span>\n<span class=\"hljs-comment\">// [ &#x27;jerry&#x27; ]</span>\n<span class=\"hljs-comment\">// [ &#x27;pink&#x27; ]</span>\n<span class=\"hljs-comment\">// [ &#x27;tom&#x27; ]</span>\n<span class=\"hljs-comment\">// [ &#x27;black&#x27; ]</span>\n</code></pre>\n"},{"title":"JavaScriptå¤ä¹ -è¿­ä»£å™¨","tags":["JavaScript","è¿­ä»£å™¨","Iterator"],"categories":"2021å¤ä¹ ","description":"åœ¨è½¯ä»¶å¼€å‘é¢†åŸŸï¼Œè¿­ä»£çš„æ„æ€æ˜¯æŒ‰ç…§é¡ºåºåå¤å¤šæ¬¡æ‰§è¡Œä¸€æ®µç¨‹åºï¼Œé€šå¸¸ä¼šæœ‰æ˜ç¡®çš„ç»ˆæ­¢æ¡ä»¶\n\nä»»ä½•å®ç°Iterableæ¥å£çš„æ•°æ®ç»“æ„éƒ½å¯ä»¥è¢«å®ç°Iteratoræ¥å£çš„ç»“æ„æ¶ˆè´¹ã€‚è¿­ä»£å™¨æ˜¯æŒ‰éœ€åˆ›å»ºçš„ä¸€æ¬¡æ€§å¯¹è±¡ã€‚æ¯ä¸ªè¿­ä»£å™¨éƒ½ä¼šå…³è”ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œè€Œè¿­ä»£å™¨ä¼šæš´éœ²è¿­ä»£å…¶å…³è”å¯è¿­ä»£å¯¹è±¡çš„APIã€‚è¿­ä»£å™¨æ— éœ€äº†è§£ä¸å…¶å…³è”çš„å¯è¿­ä»£å¯¹è±¡çš„ç»“æ„ï¼Œåªéœ€è¦çŸ¥é“å¦‚ä½•å–å¾—è¿ç»­çš„å€¼ã€‚\n\n## å¯è¿­ä»£åè®®\n\næ•°æ®ç»“æ„å¿…é¡»æš´éœ²ä¸€ä¸ªå±æ€§ä½œä¸º","createDate":"2021-05-12 14:32:07","updateDate":"2021-06-10 11:06:19","body":"<p>åœ¨è½¯ä»¶å¼€å‘é¢†åŸŸï¼Œè¿­ä»£çš„æ„æ€æ˜¯æŒ‰ç…§é¡ºåºåå¤å¤šæ¬¡æ‰§è¡Œä¸€æ®µç¨‹åºï¼Œé€šå¸¸ä¼šæœ‰æ˜ç¡®çš„ç»ˆæ­¢æ¡ä»¶</p>\n<p>ä»»ä½•å®ç°Iterableæ¥å£çš„æ•°æ®ç»“æ„éƒ½å¯ä»¥è¢«å®ç°Iteratoræ¥å£çš„ç»“æ„æ¶ˆè´¹ã€‚è¿­ä»£å™¨æ˜¯æŒ‰éœ€åˆ›å»ºçš„ä¸€æ¬¡æ€§å¯¹è±¡ã€‚æ¯ä¸ªè¿­ä»£å™¨éƒ½ä¼šå…³è”ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œè€Œè¿­ä»£å™¨ä¼šæš´éœ²è¿­ä»£å…¶å…³è”å¯è¿­ä»£å¯¹è±¡çš„APIã€‚è¿­ä»£å™¨æ— éœ€äº†è§£ä¸å…¶å…³è”çš„å¯è¿­ä»£å¯¹è±¡çš„ç»“æ„ï¼Œåªéœ€è¦çŸ¥é“å¦‚ä½•å–å¾—è¿ç»­çš„å€¼ã€‚</p>\n<h2 id=\"å¯è¿­ä»£åè®®\">å¯è¿­ä»£åè®®</h2>\n<p>æ•°æ®ç»“æ„å¿…é¡»æš´éœ²ä¸€ä¸ªå±æ€§ä½œä¸º<strong>é»˜è®¤è¿­ä»£å™¨</strong>ï¼Œè€Œä¸”è¿™ä¸ªå±æ€§å¿…é¡»ä½¿ç”¨ç‰¹æ®Šçš„<code>Symbol.iterator</code>ä½œä¸ºé”®ï¼Œä»¥ä¸€ä¸ªè¿­ä»£å™¨å·¥å‚å‡½æ•°ä½œä¸ºå€¼ï¼ˆè°ƒç”¨å…¶ä¼šè¿”å›ä¸€ä¸ªä¸€ä¸ªæ–°è¿­ä»£å™¨ï¼‰</p>\n<p>å¯è¿­ä»£å¯¹è±¡å¯ä½¿ç”¨çš„è¯­è¨€ç‰¹æ€§åŒ…æ‹¬ï¼š</p>\n<ul>\n<li><code>for-of</code>å¾ªç¯</li>\n<li>æ•°ç»„è§£æ„</li>\n<li>æ‰©å±•æ“ä½œç¬¦</li>\n<li><code>Array.from()</code></li>\n<li>åˆ›å»ºé›†åˆ</li>\n<li>åˆ›å»ºæ˜ å°„</li>\n<li><code>Promise.all()</code>æ¥æ”¶ç”±<code>Promise</code>ç»„æˆçš„å¯è¿­ä»£å¯¹è±¡</li>\n<li><code>Promise.race()</code>æ¥æ”¶ç”±<code>Promise</code>ç»„æˆçš„å¯è¿­ä»£å¯¹è±¡</li>\n<li><code>yield* </code>æ“ä½œç¬¦ï¼Œåœ¨ç”Ÿæˆå™¨ä¸­ä½¿ç”¨</li>\n</ul>\n<h2 id=\"è¿­ä»£å™¨åè®®\">è¿­ä»£å™¨åè®®</h2>\n<ul>\n<li>è¿­ä»£å™¨æ˜¯ä¸€æ¬¡æ€§ä½¿ç”¨çš„å¯¹è±¡</li>\n<li>è¿­ä»£å™¨APIä½¿ç”¨next()æ–¹æ³•åœ¨å¯è¿­ä»£å¯¹è±¡ä¸­éå†æ•°æ®ã€‚æ¯æ¬¡æˆåŠŸè°ƒç”¨next()ï¼Œéƒ½ä¼šè¿”å›ä¸€ä¸ªIteratorResultå¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«è¿­ä»£å™¨è¿”å›çš„ä¸‹ä¸€ä¸ªå€¼ã€‚</li>\n<li>æ¯ä¸ªè¿­ä»£å™¨éƒ½è¡¨ç¤ºå¯¹å¯è¿­ä»£å¯¹è±¡çš„ä¸€æ¬¡æ€§æœ‰åºéå†ã€‚ä¸åŒè¿­ä»£å™¨çš„å®ä¾‹ç›¸äº’ä¹‹é—´æ²¡æœ‰å…³ç³»ï¼Œåªä¼šç‹¬ç«‹åœ°éå†å¯è¿­ä»£å¯¹è±¡</li>\n<li>è¿­ä»£å™¨å¹¶ä¸ä¸å¯è¿­ä»£å¯¹è±¡æŸä¸ªæ—¶åˆ»çš„å¿«ç…§ç»‘å®šï¼Œè€Œä»…ä»…æ˜¯ä½¿ç”¨æ¸¸æ ‡æ¥æ ‡è®°éå†å¯è¿­ä»£å¯¹è±¡çš„å†ç¨‹ã€‚å¦‚æœå¯è¿­ä»£å¯¹è±¡åœ¨éå†æœŸé—´è¢«ä¿®æ”¹äº†ï¼Œé‚£ä¹ˆè¿­ä»£å™¨ä¹Ÿä¼šååº”ç›¸åº”åœ°å˜åŒ–</li>\n</ul>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> iterable = {\n  [<span class=\"hljs-title class_\">Symbol</span>.<span class=\"hljs-property\">iterator</span>]: <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">let</span> count = <span class=\"hljs-number\">0</span>;\n    <span class=\"hljs-keyword\">return</span> {\n      <span class=\"hljs-title function_\">next</span>(<span class=\"hljs-params\"></span>) {\n        count += <span class=\"hljs-number\">1</span>;\n        <span class=\"hljs-keyword\">if</span> (count &lt;= <span class=\"hljs-number\">2</span>) <span class=\"hljs-keyword\">return</span> { <span class=\"hljs-attr\">done</span>: <span class=\"hljs-literal\">false</span>, <span class=\"hljs-attr\">value</span>: count };\n        <span class=\"hljs-keyword\">return</span> { <span class=\"hljs-attr\">done</span>: <span class=\"hljs-literal\">true</span>, <span class=\"hljs-attr\">value</span>: <span class=\"hljs-literal\">undefined</span> };\n      },\n      <span class=\"hljs-keyword\">return</span>() {\n        <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;exiting early&#x27;</span>);\n        <span class=\"hljs-keyword\">return</span> { <span class=\"hljs-attr\">done</span>: <span class=\"hljs-literal\">true</span>, <span class=\"hljs-attr\">value</span>: <span class=\"hljs-literal\">undefined</span> };\n      },\n    };\n  },\n};\n</code></pre>\n<h2 id=\"æå‰ç»ˆæ­¢è¿­ä»£å™¨ï¼š\">æå‰ç»ˆæ­¢è¿­ä»£å™¨ï¼š</h2>\n<ul>\n<li><code>for-of</code>å¾ªç¯é€šè¿‡<code>break</code>ã€<code>continue</code>ã€<code>return</code>ã€<code>throw</code>æå‰é€€å‡º</li>\n<li>è§£æ„æ“ä½œå¹¶æœªæ¶ˆè´¹çš„å€¼</li>\n</ul>\n<p>å¹¶éæ‰€æœ‰è¿­ä»£å™¨éƒ½æ˜¯å¯å…³é—­çš„ï¼Œæ¯”å¦‚æ•°ç»„</p>\n"},{"title":"JavaScriptå¤ä¹ -æ‰§è¡Œæœºåˆ¶","tags":["JavaScript","æ‰§è¡Œæœºåˆ¶","EventLoop"],"categories":"2021å¤ä¹ ","description":"ä¼—æ‰€å‘¨çŸ¥ï¼ŒJavaScriptæ˜¯ä¸€é—¨**å•çº¿ç¨‹**ã€**å¼‚æ­¥æ‰§è¡Œ**çš„è¯­è¨€ã€‚è™½ç„¶åœ¨HTML5ä¸­æå‡ºäº†`web worker`ï¼ˆå¯ä»¥ç†è§£ä¸º**æµè§ˆå™¨**ä¸ºJavaScriptå¼€çš„*å¤–æŒ‚*ï¼‰ï¼Œä½†JavaScriptæ˜¯å•çº¿ç¨‹è¿è¡Œçš„è¿™ä¸€æ ¸å¿ƒä»æœªæ”¹å˜ï¼Œæ‰€æœ‰å¤šçº¿ç¨‹éƒ½æ˜¯é€šè¿‡å•çº¿ç¨‹**æ¨¡æ‹Ÿ**å‡ºæ¥çš„\n\n## JavaScriptçš„æ‰§è¡Œä¸è¿è¡Œ\n\næ‰§è¡Œä¸è¿è¡Œä¸å¤ªä¸€æ ·ï¼Œåœ¨ä¸åŒç¯å¢ƒä¸‹ï¼Œæ¯”å¦‚Node.jsã€æµè§ˆå™¨ä¸‹ï¼ŒJ","createDate":"2021-05-13 10:25:45","updateDate":"2021-06-10 11:03:31","body":"<p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒJavaScriptæ˜¯ä¸€é—¨<strong>å•çº¿ç¨‹</strong>ã€<strong>å¼‚æ­¥æ‰§è¡Œ</strong>çš„è¯­è¨€ã€‚è™½ç„¶åœ¨HTML5ä¸­æå‡ºäº†<code>web worker</code>ï¼ˆå¯ä»¥ç†è§£ä¸º<strong>æµè§ˆå™¨</strong>ä¸ºJavaScriptå¼€çš„<em>å¤–æŒ‚</em>ï¼‰ï¼Œä½†JavaScriptæ˜¯å•çº¿ç¨‹è¿è¡Œçš„è¿™ä¸€æ ¸å¿ƒä»æœªæ”¹å˜ï¼Œæ‰€æœ‰å¤šçº¿ç¨‹éƒ½æ˜¯é€šè¿‡å•çº¿ç¨‹<strong>æ¨¡æ‹Ÿ</strong>å‡ºæ¥çš„</p>\n<h2 id=\"javascriptçš„æ‰§è¡Œä¸è¿è¡Œ\">JavaScriptçš„æ‰§è¡Œä¸è¿è¡Œ</h2>\n<p>æ‰§è¡Œä¸è¿è¡Œä¸å¤ªä¸€æ ·ï¼Œåœ¨ä¸åŒç¯å¢ƒä¸‹ï¼Œæ¯”å¦‚Node.jsã€æµè§ˆå™¨ä¸‹ï¼ŒJavaScriptçš„æ‰§è¡Œç»“æœæ˜¯ä¸ä¸€æ ·çš„ï¼›è€Œè¿è¡Œå¤§å¤šæ˜¯æŒ‡åŸºäºJavaScriptå¼•æ“ï¼Œå¦‚V8ï¼Œç»“æœæ˜¯ä¸€è‡´çš„</p>\n<h2 id=\"javascriptä¸­çš„å¼‚æ­¥\">JavaScriptä¸­çš„å¼‚æ­¥</h2>\n<p>JavaScriptä¸­çš„å¼‚æ­¥ä¸»è¦é€šè¿‡event loopè¿›è¡Œæ¨¡æ‹Ÿï¼Œå½“æˆ‘ä»¬æ‰§è¡ŒJavaScriptä»£ç çš„æ—¶å€™å…¶å®å°±æ˜¯å¾€æ‰§è¡Œæ ˆé‡Œæ”¾å…¥å‡½æ•°ï¼Œé‚£ä¹ˆé‡åˆ°å¼‚æ­¥ä»£ç æ€ä¹ˆåŠï¼Ÿå…¶å®å½“é‡åˆ°å¼‚æ­¥ä»£ç æ—¶ï¼Œä¼šè¢«æŒ‚èµ·å¹¶åœ¨éœ€è¦æ‰§è¡Œçš„æ—¶å€™åŠ å…¥åˆ°<strong>task</strong>ï¼ˆæœ‰å¤šç§taskï¼‰é˜Ÿåˆ—ä¸­ã€‚ä¸€æ—¦æ‰§è¡Œæ ˆä¸ºç©ºï¼Œevent loopå°±ä¼šä»taskä¸­æ‹¿åˆ°éœ€è¦æ‰§è¡Œçš„ä»£ç å¹¶æ”¾å…¥æ‰§è¡Œæ ˆä¸­æ‰§è¡Œï¼Œæ‰€ä»¥æœ¬è´¨ä¸Šè¯´JavaScriptçš„å¼‚æ­¥è¿˜æ˜¯åŒæ­¥è¡Œä¸º</p>\n<h2 id=\"æµè§ˆå™¨ä¸­çš„event-loop\">æµè§ˆå™¨ä¸­çš„event loop</h2>\n<p>æ¥è‡ªä¸åŒçš„<strong>ä»»åŠ¡æº</strong>çš„ä»»åŠ¡ä¼šè¢«åˆ†é…åˆ°ä¸åŒçš„taské˜Ÿåˆ—ä¸­ï¼Œä»»åŠ¡æºå¯ä»¥åˆ†ä¸º<strong>å¾®ä»»åŠ¡(micro task)</strong> å’Œ <strong>å®ä»»åŠ¡(macro task)<strong>ã€‚åœ¨ES6è§„èŒƒä¸­ï¼Œå¾®ä»»åŠ¡è¢«ç§°ä¸º</strong>jobs</strong>ï¼Œå®ä»»åŠ¡è¢«ç§°ä¸º<strong>task</strong></p>\n<p>å¾®ä»»åŠ¡åŒ…æ‹¬ï¼š<code>precess.nextTick</code>ã€<code>Promise</code>ã€<code>Mutation Observer</code></p>\n<p>å®ä»»åŠ¡åŒ…æ‹¬ï¼š<code>script</code>ã€<code>setTimeout</code>ã€<code>setInterval</code>ã€<code>I/O</code>ã€<code>UI Rendering</code></p>\n<p><strong>å®ä»»åŠ¡ä¸­åŒ…å«äº† <code>script</code> ï¼Œå› æ­¤æµè§ˆå™¨ä¼šå…ˆæ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼Œæ¥ä¸‹æ¥ç”±å¼‚æ­¥ä»£ç çš„è¯æ‰ä¼šå…ˆæ‰§è¡Œå¾®ä»»åŠ¡</strong></p>\n<p><strong>Promiseçš„æ„é€ å‡½æ•°æ˜¯åŒæ­¥æ‰§â¾ï¼Œ<code>then()</code>æ˜¯å¼‚æ­¥æ‰§è¡Œ</strong></p>\n<p>event loop æ‰§è¡Œé¡ºåº</p>\n<ol>\n<li>å…ˆæ‰§è¡Œå®ä»»åŠ¡</li>\n<li>å½“æ‰§è¡Œå®Œå<strong>æ‰§è¡Œæ ˆä¸ºç©º</strong>ï¼ŒæŸ¥è¯¢æ˜¯å¦æœ‰å¼‚æ­¥ä»£ç éœ€è¦æ‰§è¡Œ</li>\n<li><strong>æ‰§è¡Œæ‰€æœ‰å¾®ä»»åŠ¡</strong></li>\n<li>å½“æ‰§è¡Œå®Œæ‰€æœ‰å¾®ä»»åŠ¡ï¼Œå¦‚æœ‰éœ€è¦ä¼šæ¸²æŸ“é¡µé¢</li>\n<li>ç„¶åå¼€å§‹ä¸‹ä¸€è½®å¾ªç¯</li>\n</ol>\n<p><img src=\"http://mrrsblog.oss-cn-shanghai.aliyuncs.com/browser_event_loop.png\" alt=\"event loop\"></p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-number\">1</span>);\n<span class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-number\">2</span>);\n  <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">resolve</span>().<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-number\">3</span>);\n  });\n});\n<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve, reject</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-number\">4</span>);\n  <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">5</span>);\n}).<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">data</span> =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(data);\n});\n<span class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-number\">6</span>);\n});\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-number\">7</span>);\n\n<span class=\"hljs-comment\">// 1 4 7 5 2 3 6</span>\n</code></pre>\n<h2 id=\"nodejsä¸­çš„event-loop\">Node.jsä¸­çš„event loop</h2>\n<p><strong>v11ä¹‹åå’Œæµè§ˆå™¨ä¿æŒä¸€è‡´</strong></p>\n<p>Node.jsä¸­çš„event loopåˆ†ä¸º6ä¸ªé˜¶æ®µï¼Œå®ƒä»¬ä¼šæŒ‰ç…§å¾ªåºåå¤è¿è¡Œã€‚æ¯å½“è¿›å…¥åˆ°æŸä¸€ä¸ªé˜¶æ®µçš„æ—¶å€™éƒ½ä¼šä»å¯¹åº”çš„å›è°ƒé˜Ÿåˆ—ä¸­å–å‡ºå‡½æ•°å»æ‰§è¡Œï¼Œå½“<strong>é˜Ÿåˆ—ä¸ºç©º</strong>æˆ–è€…<strong>æ‰§è¡Œçš„å›è°ƒå‡½æ•°æ•°é‡è¾¾åˆ°ç³»ç»Ÿè®¾å®šçš„é˜ˆå€¼</strong>ï¼Œå°±ä¼šè¿›å…¥åˆ°ä¸‹ä¸€é˜¶æ®µ</p>\n<p>Node.jsçš„event loopä¸­ï¼Œæ‰§è¡Œå®é˜Ÿåˆ—çš„å›è°ƒä»»åŠ¡æœ‰6ä¸ªé˜¶æ®µï¼š</p>\n<p><img src=\"http://mrrsblog.oss-cn-shanghai.aliyuncs.com/node_event_loop.png\" alt=\"event loop\"></p>\n<ol>\n<li><p>timers</p>\n<p> <strong>timers</strong>é˜¶æ®µä¼šæ‰§è¡Œ<code>setTimeout</code>ã€<code>setInterval</code>å›è°ƒï¼Œå¹¶ä¸”æ˜¯ç”±<strong>pool</strong>é˜¶æ®µæ§åˆ¶çš„ã€‚</p>\n</li>\n<li><p>I/O</p>\n<p> <strong>I/O</strong>é˜¶æ®µä¼šå¤„ç†ä¸€äº›ä¸Šä¸€è½®å¾ªç¯ä¸­å°‘è®¸æœªæ‰§è¡Œçš„I/Oå›è°ƒ</p>\n</li>\n<li><p>idle, prepare</p>\n</li>\n<li><p>poll</p>\n<p> è®¡ç®—åº”è¯¥é˜»å¡å¹¶è½®è¯¢I / Oçš„æ—¶é—´ï¼Œç„¶åå¤„ç†è½®è¯¢é˜Ÿåˆ—ä¸­çš„äº‹ä»¶</p>\n<ul>\n<li>å¦‚æœpollé˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œéå†é˜Ÿåˆ—å¹¶åŒæ­¥æ‰§è¡Œå›è°ƒï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºæˆ–è¾¾åˆ°ç³»ç»Ÿé™åˆ¶</li>\n<li>å¦‚æœpollé˜Ÿåˆ—ä¸ºç©ºï¼Œ<ol>\n<li>å¦‚æœæœ‰setImmediateå›è°ƒéœ€è¦æ‰§è¡Œï¼Œpollé˜¶æ®µä¼šåœæ­¢å¹¶è¿›å…¥<strong>checké˜¶æ®µ</strong></li>\n<li>å¦‚æœæ²¡æœ‰ï¼Œä¼šç­‰å¾…å›è°ƒè¢«åŠ å…¥é˜Ÿåˆ—ä¸­å¹¶ç«‹å³æ‰§è¡Œå›è°ƒï¼Œè¿™é‡ŒåŒæ ·æœ‰ä¸ªè¶…æ—¶æ—¶é—´é˜²æ­¢ä¸€ç›´ç­‰å¾…ä¸‹å»</li>\n</ol>\n</li>\n</ul>\n</li>\n<li><p>check</p>\n<p> æ‰§è¡Œ<code>setImmediate</code>å›è°ƒ</p>\n</li>\n<li><p>colse callbacks</p>\n<p> æ‰§è¡Œcloseäº‹ä»¶</p>\n<p> å½“å‘ç”Ÿä»¥ä¸‹ä»»ä¸€æƒ…å†µæ—¶ä¼šè§¦å‘ &#39;close&#39; äº‹ä»¶ï¼š</p>\n<ul>\n<li>è°ƒç”¨ <code>rl.close()</code> æ–¹æ³•ï¼Œä¸” <code>readline.Interface</code> å®ä¾‹æ”¾å¼ƒå¯¹ <code>input</code> æµå’Œ <code>output</code> æµçš„æ§åˆ¶ï¼›</li>\n<li><code>input</code> æµæ¥æ”¶åˆ°å…¶ <code>end</code> äº‹ä»¶ï¼›</li>\n<li><code>input</code> æµæ¥æ”¶åˆ° <code>&lt;ctrl&gt;-D</code> ä»¥å‘ä¿¡å·ä¼ è¾“ç»“æŸ<code>ï¼ˆEOTï¼‰</code>ï¼›</li>\n<li><code>input</code> æµæ¥æ”¶åˆ° <code>&lt;ctrl&gt;-C</code> ä»¥å‘ä¿¡å· <code>SIGINT</code>ï¼Œå¹¶ä¸” <code>readline.Interface</code> å®ä¾‹ä¸Šæ²¡æœ‰æ³¨å†Œ &#39;SIGINT&#39; äº‹ä»¶ç›‘å¬å™¨ã€‚</li>\n</ul>\n</li>\n</ol>\n"},{"title":"ç®—æ³•å¤ä¹ -æ ˆ","tags":["ç®—æ³•"],"categories":"2021å¤ä¹ ","description":"## æœ€å°æ ˆ\n\n[leetcode-æœ€å°æ ˆ](https://leetcode-cn.com/problems/min-stack/)\n\n``` js\nfunction MinStack() {\n  this.storage = [];\n  this.min = null;\n}\nMinStack.prototype.push = function (val) {\n  let preMin =","createDate":"2021-06-08 15:03:02","updateDate":"2021-06-08 23:03:06","body":"<h2 id=\"æœ€å°æ ˆ\">æœ€å°æ ˆ</h2>\n<p><a href=\"https://leetcode-cn.com/problems/min-stack/\">leetcode-æœ€å°æ ˆ</a></p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">MinStack</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">storage</span> = [];\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">min</span> = <span class=\"hljs-literal\">null</span>;\n}\n<span class=\"hljs-title class_\">MinStack</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">push</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">val</span>) {\n  <span class=\"hljs-keyword\">let</span> preMin = <span class=\"hljs-literal\">null</span>;\n  <span class=\"hljs-keyword\">if</span> (val &lt;= <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">min</span> || <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">min</span> === <span class=\"hljs-literal\">null</span>) {\n    preMin = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">min</span>;\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">min</span> = val;\n  }\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">storage</span>.<span class=\"hljs-title function_\">push</span>({ val, preMin });\n};\n<span class=\"hljs-title class_\">MinStack</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">pop</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">const</span> { val, preMin } = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">storage</span>.<span class=\"hljs-title function_\">pop</span>();\n  <span class=\"hljs-keyword\">if</span> (val &lt;= <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">min</span>) <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">min</span> = preMin;\n};\n<span class=\"hljs-title class_\">MinStack</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">getMin</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">min</span>;\n};\n<span class=\"hljs-title class_\">MinStack</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">top</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">const</span> topNode = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">storage</span>[<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">storage</span>.<span class=\"hljs-property\">length</span> - <span class=\"hljs-number\">1</span>];\n  <span class=\"hljs-keyword\">return</span> topNode ? topNode.<span class=\"hljs-property\">val</span> : <span class=\"hljs-literal\">undefined</span>;\n};\n</code></pre>\n<h2 id=\"æœ‰æ•ˆçš„æ‹¬å·\">æœ‰æ•ˆçš„æ‹¬å·</h2>\n<p><a href=\"https://leetcode-cn.com/problems/valid-parentheses/\">leetcode-æœ‰æ•ˆçš„æ‹¬å·</a></p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">isValid</span>(<span class=\"hljs-params\">str</span>) {\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> str !== <span class=\"hljs-string\">&#x27;string&#x27;</span>) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n  <span class=\"hljs-keyword\">if</span> (str === <span class=\"hljs-string\">&#x27;&#x27;</span>) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n  <span class=\"hljs-keyword\">if</span> (str.<span class=\"hljs-property\">length</span> === <span class=\"hljs-number\">1</span>) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n  <span class=\"hljs-keyword\">const</span> stack = [];\n  <span class=\"hljs-keyword\">const</span> left = <span class=\"hljs-regexp\">/\\(|\\[|\\{/</span>;\n  <span class=\"hljs-keyword\">const</span> right = <span class=\"hljs-regexp\">/\\)|\\]|\\}/</span>;\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>; i &lt; str.<span class=\"hljs-property\">length</span>; i += <span class=\"hljs-number\">1</span>) {\n    <span class=\"hljs-keyword\">if</span> (left.<span class=\"hljs-title function_\">test</span>(str[i])) stack.<span class=\"hljs-title function_\">push</span>(str[i]);\n    <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (right.<span class=\"hljs-title function_\">test</span>(str[i])) {\n      <span class=\"hljs-keyword\">const</span> top = stack[stack.<span class=\"hljs-property\">length</span> - <span class=\"hljs-number\">1</span>];\n      <span class=\"hljs-keyword\">if</span> (str[i] === <span class=\"hljs-string\">&#x27;)&#x27;</span> &amp;&amp; top === <span class=\"hljs-string\">&#x27;(&#x27;</span>) stack.<span class=\"hljs-title function_\">pop</span>();\n      <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (str[i] === <span class=\"hljs-string\">&#x27;]&#x27;</span> &amp;&amp; top === <span class=\"hljs-string\">&#x27;[&#x27;</span>) stack.<span class=\"hljs-title function_\">pop</span>();\n      <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (str[i] === <span class=\"hljs-string\">&#x27;}&#x27;</span> &amp;&amp; top === <span class=\"hljs-string\">&#x27;{&#x27;</span>) stack.<span class=\"hljs-title function_\">pop</span>();\n      <span class=\"hljs-keyword\">else</span> stack.<span class=\"hljs-title function_\">push</span>(stack[i]);\n    }\n  }\n  <span class=\"hljs-keyword\">return</span> stack.<span class=\"hljs-property\">length</span> === <span class=\"hljs-number\">0</span>;\n}\n</code></pre>\n<h2 id=\"åˆ é™¤å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰ç›¸é‚»é‡å¤é¡¹\">åˆ é™¤å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰ç›¸é‚»é‡å¤é¡¹</h2>\n<p><a href=\"https://leetcode-cn.com/problems/remove-all-adjacent-duplicates-in-string/\">leetcode-åˆ é™¤å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰ç›¸é‚»é‡å¤é¡¹</a></p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">removeDuplicates</span>(<span class=\"hljs-params\">str</span>) {\n  <span class=\"hljs-keyword\">if</span> (str === <span class=\"hljs-string\">&#x27;&#x27;</span>) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&#x27;&#x27;</span>;\n  <span class=\"hljs-keyword\">if</span> (str.<span class=\"hljs-property\">length</span> === <span class=\"hljs-number\">1</span>) <span class=\"hljs-keyword\">return</span> str;\n  <span class=\"hljs-keyword\">const</span> stack = [str[<span class=\"hljs-number\">0</span>]];\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">1</span>; i &lt; str.<span class=\"hljs-property\">length</span>; i += <span class=\"hljs-number\">1</span>) {\n    <span class=\"hljs-keyword\">const</span> prev = stack.<span class=\"hljs-title function_\">pop</span>();\n    <span class=\"hljs-keyword\">if</span> (prev !== str[i]) {\n      stack.<span class=\"hljs-title function_\">push</span>(prev);\n      stack.<span class=\"hljs-title function_\">push</span>(str[i]);\n    }\n  }\n\n  <span class=\"hljs-keyword\">return</span> stack.<span class=\"hljs-title function_\">join</span>(<span class=\"hljs-string\">&#x27;&#x27;</span>);\n}\n</code></pre>\n<h2 id=\"åˆ é™¤å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰ç›¸é‚»é‡å¤é¡¹ii\">åˆ é™¤å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰ç›¸é‚»é‡å¤é¡¹II</h2>\n<p><a href=\"https://leetcode-cn.com/problems/remove-all-adjacent-duplicates-in-string-ii/\">lletcode-åˆ é™¤å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰ç›¸é‚»é‡å¤é¡¹II</a></p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">removeNDuplicates</span>(<span class=\"hljs-params\">s, k</span>) {\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">popN</span>(<span class=\"hljs-params\">stack, n</span>) {\n    <span class=\"hljs-keyword\">let</span> i = n;\n    <span class=\"hljs-keyword\">while</span> (i &gt; <span class=\"hljs-number\">0</span>) {\n      stack.<span class=\"hljs-title function_\">pop</span>();\n      i -= <span class=\"hljs-number\">1</span>;\n    }\n  }\n  <span class=\"hljs-keyword\">const</span> stack = [];\n  <span class=\"hljs-keyword\">let</span> n = <span class=\"hljs-number\">0</span>;\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>; i &lt; s.<span class=\"hljs-property\">length</span>; i += <span class=\"hljs-number\">1</span>) {\n    <span class=\"hljs-keyword\">if</span> (stack[stack.<span class=\"hljs-property\">length</span> - <span class=\"hljs-number\">1</span>] === s[i]) {\n      n += <span class=\"hljs-number\">1</span>;\n    } <span class=\"hljs-keyword\">else</span> {\n      n = <span class=\"hljs-number\">0</span>;\n    }\n    stack.<span class=\"hljs-title function_\">push</span>(s[i]);\n    <span class=\"hljs-keyword\">if</span> (n === k - <span class=\"hljs-number\">1</span>) {\n      <span class=\"hljs-title function_\">popN</span>(stack, k);\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">removeNDuplicates</span>(stack.<span class=\"hljs-title function_\">join</span>(<span class=\"hljs-string\">&#x27;&#x27;</span>) + s.<span class=\"hljs-title function_\">slice</span>(i + <span class=\"hljs-number\">1</span>), k);\n    }\n  }\n\n  <span class=\"hljs-keyword\">return</span> stack.<span class=\"hljs-title function_\">join</span>(<span class=\"hljs-string\">&#x27;&#x27;</span>);\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">removeNDuplicatesPerform</span>(<span class=\"hljs-params\">s, k</span>) {\n  <span class=\"hljs-keyword\">const</span> stack = [];\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>; i &lt; s.<span class=\"hljs-property\">length</span>; i += <span class=\"hljs-number\">1</span>) {\n    <span class=\"hljs-keyword\">const</span> pre = stack.<span class=\"hljs-title function_\">pop</span>();\n    <span class=\"hljs-keyword\">if</span> (!pre || pre[<span class=\"hljs-number\">0</span>] !== s[i]) {\n      stack.<span class=\"hljs-title function_\">push</span>(pre);\n      stack.<span class=\"hljs-title function_\">push</span>(s[i]);\n    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (pre.<span class=\"hljs-property\">length</span> &lt; k - <span class=\"hljs-number\">1</span>) {\n      stack.<span class=\"hljs-title function_\">push</span>(pre + s[i]);\n    }\n  }\n\n  <span class=\"hljs-keyword\">return</span> stack.<span class=\"hljs-title function_\">join</span>(<span class=\"hljs-string\">&#x27;&#x27;</span>);\n}\n</code></pre>\n<h2 id=\"ç¿»è½¬å­—ç¬¦ä¸²é‡Œçš„å•è¯\">ç¿»è½¬å­—ç¬¦ä¸²é‡Œçš„å•è¯</h2>\n<p><a href=\"https://leetcode-cn.com/problems/reverse-words-in-a-string/\">leetcode-ç¿»è½¬å­—ç¬¦ä¸²é‡Œçš„å•è¯</a></p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">reverseWords</span>(<span class=\"hljs-params\">s</span>) {\n  <span class=\"hljs-keyword\">if</span> (s === <span class=\"hljs-string\">&#x27;&#x27;</span>) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&#x27;&#x27;</span>;\n  <span class=\"hljs-keyword\">const</span> str = s.<span class=\"hljs-title function_\">trim</span>();\n  <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-regexp\">/ /</span>.<span class=\"hljs-title function_\">test</span>(str)) <span class=\"hljs-keyword\">return</span> str;\n  <span class=\"hljs-keyword\">const</span> tmp = str.<span class=\"hljs-title function_\">split</span>(<span class=\"hljs-string\">&#x27; &#x27;</span>).<span class=\"hljs-title function_\">filter</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">item</span>) =&gt;</span> item !== <span class=\"hljs-string\">&#x27;&#x27;</span>).<span class=\"hljs-title function_\">reverse</span>();\n  <span class=\"hljs-keyword\">return</span> tmp.<span class=\"hljs-title function_\">join</span>(<span class=\"hljs-string\">&#x27; &#x27;</span>);\n}\n</code></pre>\n"},{"title":"ç®—æ³•å¤ä¹ -é˜Ÿåˆ—","tags":["ç®—æ³•"],"categories":"2021å¤ä¹ ","description":"## â½†é‡å¤å­—ç¬¦çš„æœ€â»“â¼¦ä¸²\n\n``` js\nfunction lengthOfLongestSubstring(s) {\n  if (s === '') return 0;\n  if (s.length === 1) return 1;\n  let longestStr = '';\n  const queue = new Map();\n  for (let i = 0; i < s.lengt","createDate":"2021-06-08 14:56:29","updateDate":"2021-06-08 22:56:34","body":"<h2 id=\"â½†é‡å¤å­—ç¬¦çš„æœ€â»“â¼¦ä¸²\">â½†é‡å¤å­—ç¬¦çš„æœ€â»“â¼¦ä¸²</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">lengthOfLongestSubstring</span>(<span class=\"hljs-params\">s</span>) {\n  <span class=\"hljs-keyword\">if</span> (s === <span class=\"hljs-string\">&#x27;&#x27;</span>) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>;\n  <span class=\"hljs-keyword\">if</span> (s.<span class=\"hljs-property\">length</span> === <span class=\"hljs-number\">1</span>) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">1</span>;\n  <span class=\"hljs-keyword\">let</span> longestStr = <span class=\"hljs-string\">&#x27;&#x27;</span>;\n  <span class=\"hljs-keyword\">const</span> queue = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Map</span>();\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>; i &lt; s.<span class=\"hljs-property\">length</span>; i += <span class=\"hljs-number\">1</span>) {\n    <span class=\"hljs-keyword\">if</span> (queue.<span class=\"hljs-title function_\">has</span>(s[i])) {\n      <span class=\"hljs-keyword\">const</span> newStr = <span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">from</span>(queue.<span class=\"hljs-title function_\">keys</span>()).<span class=\"hljs-title function_\">join</span>(<span class=\"hljs-string\">&#x27;&#x27;</span>);\n      longestStr = newStr.<span class=\"hljs-property\">length</span> &gt; longestStr.<span class=\"hljs-property\">length</span> ? newStr : longestStr;\n      i = queue.<span class=\"hljs-title function_\">get</span>(s[i]) + <span class=\"hljs-number\">1</span>;\n      queue.<span class=\"hljs-title function_\">clear</span>();\n    }\n    queue.<span class=\"hljs-title function_\">set</span>(s[i], i);\n  }\n\n  <span class=\"hljs-keyword\">const</span> newStr = <span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">from</span>(queue.<span class=\"hljs-title function_\">keys</span>()).<span class=\"hljs-title function_\">join</span>(<span class=\"hljs-string\">&#x27;&#x27;</span>);\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">max</span>(newStr.<span class=\"hljs-property\">length</span>, longestStr.<span class=\"hljs-property\">length</span>);\n}\n</code></pre>\n"},{"title":"ç®—æ³•å¤ä¹ -æ ‘","tags":["ç®—æ³•","æ ‘"],"categories":"2021å¤ä¹ ","description":"## BST\n\näºŒå‰æœç´¢æ ‘\n\nåœ¨â¼†å‰æ ‘çš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†å¯¹â¼†å‰æ ‘ä¸ŠèŠ‚ç‚¹å­˜å‚¨ä½ç½®çš„é™åˆ¶ï¼š\n\n- å·¦å­èŠ‚ç‚¹å€¼å°äºçˆ¶èŠ‚ç‚¹çš„å€¼\n- å³èŠ‚ç‚¹çš„å€¼å¤§äºçˆ¶èŠ‚ç‚¹çš„å€¼\n\n![BST](https://mrrsblog.oss-cn-shanghai.aliyuncs.com/bst.png)\n\nåœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œâ¼†å‰æ ‘æ¯å¤šâ¼€å±‚ï¼Œå¯ä»¥å­˜å‚¨çš„å…ƒç´ éƒ½å¢åŠ â¼€å€ã€‚ä¹Ÿå°±æ˜¯è¯´ n ä¸ªå…ƒç´ çš„â¼†å‰æœç´¢æ ‘ï¼Œå¯¹åº”çš„æ ‘â¾¼ä¸º O(logn)ã€‚","createDate":"2021-06-13 15:12:50","updateDate":"6/8/2021, 2:52:43 PM","body":"<h2 id=\"bst\">BST</h2>\n<p>äºŒå‰æœç´¢æ ‘</p>\n<p>åœ¨â¼†å‰æ ‘çš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†å¯¹â¼†å‰æ ‘ä¸ŠèŠ‚ç‚¹å­˜å‚¨ä½ç½®çš„é™åˆ¶ï¼š</p>\n<ul>\n<li>å·¦å­èŠ‚ç‚¹å€¼å°äºçˆ¶èŠ‚ç‚¹çš„å€¼</li>\n<li>å³èŠ‚ç‚¹çš„å€¼å¤§äºçˆ¶èŠ‚ç‚¹çš„å€¼</li>\n</ul>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/bst.png\" alt=\"BST\"></p>\n<p>åœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œâ¼†å‰æ ‘æ¯å¤šâ¼€å±‚ï¼Œå¯ä»¥å­˜å‚¨çš„å…ƒç´ éƒ½å¢åŠ â¼€å€ã€‚ä¹Ÿå°±æ˜¯è¯´ n ä¸ªå…ƒç´ çš„â¼†å‰æœç´¢æ ‘ï¼Œå¯¹åº”çš„æ ‘â¾¼ä¸º O(logn)ã€‚æ‰€ä»¥æˆ‘ä»¬æŸ¥æ‰¾å…ƒç´ ã€æ’â¼Šå…ƒç´ çš„æ—¶é—´ä¹Ÿä¸º O(logn)ã€‚å½“ç„¶è¿™æ˜¯ç†æƒ³æƒ…å†µä¸‹ï¼Œä½†åœ¨å®é™…åº”â½¤ä¸­ï¼Œå¹¶ä¸æ˜¯é‚£ä¹ˆç†æƒ³ï¼Œä¾‹å¦‚â¼€ç›´é€’å¢æˆ–é€’å‡çš„ç»™â¼€ä¸ªâ¼†å‰æŸ¥æ‰¾æ ‘æ’â¼Šæ•°æ®ï¼Œé‚£ä¹ˆæ‰€æœ‰æ’â¼Šçš„å…ƒç´ å°±ä¼šâ¼€ç›´å‡ºç°åœ¨â¼€ä¸ªæ ‘çš„å·¦èŠ‚ç‚¹ä¸Šï¼Œæ•°å‹ç»“æ„å°±ä¼šé€€åŒ–ä¸ºé“¾è¡¨ç»“æ„ï¼Œæ—¶é—´å¤æ‚åº¦å°±ä¼šè¶‹äº O(n)ï¼Œè¿™æ˜¯ä¸å¥½çš„ã€‚</p>\n<p>AVLæ ‘ç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜</p>\n<h2 id=\"avl\">AVL</h2>\n<p>å¹³è¡¡æœç´¢äºŒå‰æ ‘</p>\n<p>åœ¨äºŒå‰æœç´¢æ ‘çš„åŸºç¡€ä¸Šæ»¡â¾œå·¦å³â¼¦æ ‘â¾¼åº¦ä¸â¼¤äº1</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/avl.png\" alt=\"AVL\"></p>\n<h2 id=\"çº¢é»‘æ ‘\">çº¢é»‘æ ‘</h2>\n<p>çº¢é»‘æ ‘ä¹Ÿæ˜¯ä¸€ç§ç‰¹æ®Šçš„äºŒå‰æœç´¢æ ‘</p>\n<p>åœ¨äºŒå‰æœç´¢æ ‘çš„åŸºç¡€ä¸Šæ·»åŠ ä»¥ä¸‹é™åˆ¶ï¼š</p>\n<ul>\n<li>èŠ‚ç‚¹æ˜¯çº¢â¾Šæˆ–â¿Šâ¾Š</li>\n<li>æ ¹èŠ‚ç‚¹å¿…é¡»æ˜¯â¿Šâ¾ŠèŠ‚ç‚¹</li>\n<li>æ‰€æœ‰çš„å¶â¼¦èŠ‚ç‚¹éƒ½å¿…é¡»æ˜¯å€¼ä¸º<code>NULL</code>çš„â¿ŠèŠ‚ç‚¹</li>\n<li>å¦‚æœâ¼€ä¸ªèŠ‚ç‚¹æ˜¯çº¢â¾Šçš„ï¼Œåˆ™å®ƒä¸¤ä¸ªâ¼¦èŠ‚ç‚¹éƒ½æ˜¯â¿Šâ¾Šçš„</li>\n<li>ä»ä»»â¼€èŠ‚ç‚¹åˆ°è¾¾å®ƒçš„æ¯ä¸ªå¶â¼¦èŠ‚ç‚¹çš„æ‰€æœ‰çš„è·¯å¾„ï¼Œéƒ½æœ‰ç›¸åŒæ•°â½¬çš„â¿Šâ¾ŠèŠ‚ç‚¹</li>\n</ul>\n"},{"title":"ç®—æ³•å¤ä¹ -é“¾è¡¨","tags":["ç®—æ³•"],"categories":"2021å¤ä¹ ","description":"ä¸€äº›å…¬ç”¨æ•°æ®ç»“æ„/å‡½æ•°\n\n``` js\nclass ListNode {\n  constructor(value, next) {\n    this.value = value;\n    this.next = next;\n  }\n}\nfunction list2array(list) {\n  const array = [];\n  let pointer = list;\n  while (p","createDate":"2021-06-06 05:09:34","updateDate":"2021-06-07 13:09:37","body":"<p>ä¸€äº›å…¬ç”¨æ•°æ®ç»“æ„/å‡½æ•°</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ListNode</span> {\n  <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\">value, next</span>) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">value</span> = value;\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">next</span> = next;\n  }\n}\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">list2array</span>(<span class=\"hljs-params\">list</span>) {\n  <span class=\"hljs-keyword\">const</span> array = [];\n  <span class=\"hljs-keyword\">let</span> pointer = list;\n  <span class=\"hljs-keyword\">while</span> (pointer !== <span class=\"hljs-literal\">null</span>) {\n    array.<span class=\"hljs-title function_\">push</span>(pointer.<span class=\"hljs-property\">value</span>);\n    pointer = pointer.<span class=\"hljs-property\">next</span>;\n  }\n  <span class=\"hljs-keyword\">return</span> array;\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">array2list</span>(<span class=\"hljs-params\">array</span>) {\n  <span class=\"hljs-keyword\">if</span> (array.<span class=\"hljs-property\">length</span> === <span class=\"hljs-number\">0</span>) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span>;\n  <span class=\"hljs-keyword\">const</span> list = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ListNode</span>(array[<span class=\"hljs-number\">0</span>], <span class=\"hljs-literal\">null</span>);\n  <span class=\"hljs-keyword\">let</span> pointer = list;\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">1</span>; i &lt; array.<span class=\"hljs-property\">length</span>; i += <span class=\"hljs-number\">1</span>) {\n    pointer.<span class=\"hljs-property\">next</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ListNode</span>(array[i], <span class=\"hljs-literal\">null</span>);\n    pointer = pointer.<span class=\"hljs-property\">next</span>;\n  }\n  <span class=\"hljs-keyword\">return</span> list;\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">skipNNodes</span>(<span class=\"hljs-params\">head, n</span>) {\n  <span class=\"hljs-keyword\">let</span> m = n;\n  <span class=\"hljs-keyword\">let</span> pointer = head;\n  <span class=\"hljs-keyword\">while</span> (m &gt; <span class=\"hljs-number\">0</span> &amp;&amp; pointer) {\n    m -= <span class=\"hljs-number\">1</span>;\n    pointer = pointer.<span class=\"hljs-property\">next</span>;\n  }\n\n  <span class=\"hljs-keyword\">return</span> pointer;\n}\n</code></pre>\n<h2 id=\"åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨\">åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">mergeTwoLists</span>(<span class=\"hljs-params\">l1, l2</span>) {\n  <span class=\"hljs-keyword\">const</span> arr1 = <span class=\"hljs-title function_\">list2array</span>(l1);\n  <span class=\"hljs-keyword\">const</span> arr2 = <span class=\"hljs-title function_\">list2array</span>(l2);\n  <span class=\"hljs-keyword\">const</span> res = arr1.<span class=\"hljs-title function_\">concat</span>(arr2).<span class=\"hljs-title function_\">sort</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">a, b</span>) =&gt;</span> a - b);\n\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">array2list</span>(res);\n}\n</code></pre>\n<h2 id=\"åˆ¤æ–­é“¾è¡¨æ˜¯å¦æœ‰ç¯\">åˆ¤æ–­é“¾è¡¨æ˜¯å¦æœ‰ç¯</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">hasCycle</span>(<span class=\"hljs-params\">list</span>) {\n  <span class=\"hljs-keyword\">const</span> nodeMap = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Map</span>();\n  <span class=\"hljs-keyword\">let</span> pointer = list;\n  <span class=\"hljs-keyword\">let</span> pos = <span class=\"hljs-number\">0</span>;\n  <span class=\"hljs-keyword\">if</span> (pointer === <span class=\"hljs-literal\">null</span>) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n  <span class=\"hljs-keyword\">if</span> (pointer.<span class=\"hljs-property\">next</span> === <span class=\"hljs-literal\">null</span>) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n  <span class=\"hljs-keyword\">while</span> (pointer) {\n    <span class=\"hljs-keyword\">if</span> (nodeMap.<span class=\"hljs-title function_\">has</span>(pointer) &amp;&amp; nodeMap.<span class=\"hljs-title function_\">get</span>(pointer) &lt; pos) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n    nodeMap.<span class=\"hljs-title function_\">set</span>(pointer, pos);\n    pointer = pointer.<span class=\"hljs-property\">next</span>;\n    pos += <span class=\"hljs-number\">1</span>;\n  }\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n}\n</code></pre>\n<h2 id=\"åè½¬é“¾è¡¨\">åè½¬é“¾è¡¨</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">reverseList</span>(<span class=\"hljs-params\">list</span>) {\n  <span class=\"hljs-keyword\">const</span> arr = <span class=\"hljs-title function_\">list2array</span>(list);\n  <span class=\"hljs-keyword\">const</span> reverseArr = arr.<span class=\"hljs-title function_\">reverse</span>();\n  <span class=\"hljs-keyword\">const</span> res = <span class=\"hljs-title function_\">array2list</span>(reverseArr);\n  <span class=\"hljs-keyword\">return</span> res;\n}\n</code></pre>\n<h2 id=\"è·å–é“¾è¡¨ä¸­é—´èŠ‚ç‚¹\">è·å–é“¾è¡¨ä¸­é—´èŠ‚ç‚¹</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getMiddle</span>(<span class=\"hljs-params\">list</span>) {\n  <span class=\"hljs-keyword\">let</span> pointer2 = list;\n  <span class=\"hljs-keyword\">let</span> pointer1 = list;\n\n  <span class=\"hljs-keyword\">while</span> (pointer2.<span class=\"hljs-property\">next</span> !== <span class=\"hljs-literal\">null</span> &amp;&amp; pointer2.<span class=\"hljs-property\">next</span>.<span class=\"hljs-property\">next</span> !== <span class=\"hljs-literal\">null</span>) {\n    pointer1 = pointer1.<span class=\"hljs-property\">next</span>;\n    pointer2 = pointer2.<span class=\"hljs-property\">next</span>.<span class=\"hljs-property\">next</span>;\n  }\n\n  <span class=\"hljs-keyword\">return</span> pointer2.<span class=\"hljs-property\">next</span> &amp;&amp; pointer2.<span class=\"hljs-property\">next</span>.<span class=\"hljs-property\">next</span> === <span class=\"hljs-literal\">null</span> ? pointer1.<span class=\"hljs-property\">next</span> : pointer1;\n}\n</code></pre>\n<h2 id=\"ç§»é™¤å€’æ•°ç¬¬nä¸ªèŠ‚ç‚¹\">ç§»é™¤å€’æ•°ç¬¬nä¸ªèŠ‚ç‚¹</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">removeNthFromEnd</span>(<span class=\"hljs-params\">head, n</span>) {\n  <span class=\"hljs-keyword\">const</span> arr = [];\n  <span class=\"hljs-keyword\">let</span> pointer = head;\n  <span class=\"hljs-keyword\">while</span> (pointer) {\n    arr.<span class=\"hljs-title function_\">push</span>(pointer);\n    pointer = pointer.<span class=\"hljs-property\">next</span>;\n  }\n  <span class=\"hljs-keyword\">const</span> index = arr.<span class=\"hljs-property\">length</span> - n;\n  <span class=\"hljs-keyword\">if</span> (index === <span class=\"hljs-number\">0</span>) {\n    arr[<span class=\"hljs-number\">0</span>].<span class=\"hljs-property\">next</span> = <span class=\"hljs-literal\">null</span>;\n    <span class=\"hljs-keyword\">return</span> arr[<span class=\"hljs-number\">1</span>] || [];\n  }\n  arr[index - <span class=\"hljs-number\">1</span>].<span class=\"hljs-property\">next</span> = arr[index].<span class=\"hljs-property\">next</span>;\n  arr[index].<span class=\"hljs-property\">next</span> = <span class=\"hljs-literal\">null</span>;\n\n  <span class=\"hljs-keyword\">return</span> head;\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">removeNthFromEndPreform</span>(<span class=\"hljs-params\">head, n</span>) {\n  <span class=\"hljs-keyword\">const</span> preHead = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ListNode</span>(<span class=\"hljs-number\">0</span>);\n  preHead.<span class=\"hljs-property\">next</span> = head;\n  <span class=\"hljs-keyword\">let</span> pointer1 = preHead;\n  <span class=\"hljs-keyword\">let</span> pointer2 = <span class=\"hljs-title function_\">skipNNodes</span>(head, n - <span class=\"hljs-number\">1</span>);\n\n  <span class=\"hljs-keyword\">while</span> (pointer2 &amp;&amp; pointer2.<span class=\"hljs-property\">next</span>) {\n    pointer2 = pointer2.<span class=\"hljs-property\">next</span>;\n    pointer1 = pointer1.<span class=\"hljs-property\">next</span>;\n  }\n  pointer1.<span class=\"hljs-property\">next</span> = pointer1.<span class=\"hljs-property\">next</span>.<span class=\"hljs-property\">next</span>;\n  <span class=\"hljs-keyword\">return</span> preHead.<span class=\"hljs-property\">next</span>;\n}\n</code></pre>\n<h2 id=\"è·å–ä¸¤ä¸ªé“¾è¡¨å¼€å§‹ç›¸äº¤çš„èŠ‚ç‚¹\">è·å–ä¸¤ä¸ªé“¾è¡¨å¼€å§‹ç›¸äº¤çš„èŠ‚ç‚¹</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getIntersectionNode</span>(<span class=\"hljs-params\">headA, headB</span>) {\n  <span class=\"hljs-keyword\">let</span> pointerA = headA;\n  <span class=\"hljs-keyword\">let</span> pointerB = headB;\n  <span class=\"hljs-keyword\">while</span> (pointerA || pointerB) {\n    <span class=\"hljs-keyword\">if</span> (pointerA === pointerB) <span class=\"hljs-keyword\">return</span> pointerA;\n    pointerA = pointerA === <span class=\"hljs-literal\">null</span> ? headB : pointerA.<span class=\"hljs-property\">next</span>;\n    pointerB = pointerB === <span class=\"hljs-literal\">null</span> ? headA : pointerB.<span class=\"hljs-property\">next</span>;\n  }\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span>;\n}\n</code></pre>\n"},{"title":"ç®—æ³•å¤ä¹ -å¸¸è§ç®—æ³•","tags":["ç®—æ³•"],"categories":"2021å¤ä¹ ","description":"## LRU\n\n``` js\nclass LRUCache {\n  constructor(max) {\n    this.max = max;\n    this.storage = new Map();\n  }\n\n  get(key) {\n    if (!this.storage.has(key)) return -1;\n    const tmp = this.storage.get(k","createDate":"2021-06-05 10:37:45","updateDate":"2021-06-05 18:37:53","body":"<h2 id=\"lru\">LRU</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">LRUCache</span> {\n  <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\">max</span>) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">max</span> = max;\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">storage</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Map</span>();\n  }\n\n  <span class=\"hljs-title function_\">get</span>(<span class=\"hljs-params\">key</span>) {\n    <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">storage</span>.<span class=\"hljs-title function_\">has</span>(key)) <span class=\"hljs-keyword\">return</span> -<span class=\"hljs-number\">1</span>;\n    <span class=\"hljs-keyword\">const</span> tmp = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">storage</span>.<span class=\"hljs-title function_\">get</span>(key);\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">storage</span>.<span class=\"hljs-title function_\">delete</span>(key);\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">storage</span>.<span class=\"hljs-title function_\">set</span>(key, tmp);\n    <span class=\"hljs-keyword\">return</span> tmp;\n  }\n\n  <span class=\"hljs-title function_\">put</span>(<span class=\"hljs-params\">key, value</span>) {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">storage</span>.<span class=\"hljs-title function_\">has</span>(key)) {\n      <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">storage</span>.<span class=\"hljs-title function_\">delete</span>(key);\n    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">storage</span>.<span class=\"hljs-property\">size</span> &gt;= <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">max</span>) {\n      <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">storage</span>.<span class=\"hljs-title function_\">delete</span>(<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">storage</span>.<span class=\"hljs-title function_\">keys</span>().<span class=\"hljs-title function_\">next</span>().<span class=\"hljs-property\">value</span>);\n    }\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">storage</span>.<span class=\"hljs-title function_\">set</span>(key, value);\n  }\n}\n</code></pre>\n"},{"title":"ç®—æ³•å¤ä¹ -æ•°ç»„","tags":["ç®—æ³•"],"categories":"2021å¤ä¹ ","description":"## åˆå¹¶ä¸¤æ•°ç»„\n\n``` js\nconst first = (arr) => arr[0];\nconst last = (arr) => arr[arr.length - 1];\n\nfunction combineOrderedArrays(arr1, arr2) {\n  if (!Array.isArray(arr1) || !Array.isArray(arr2)) throw new","createDate":"2021-06-05 10:37:05","updateDate":"2021-06-05 18:37:49","body":"<h2 id=\"åˆå¹¶ä¸¤æ•°ç»„\">åˆå¹¶ä¸¤æ•°ç»„</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">first</span> = (<span class=\"hljs-params\">arr</span>) =&gt; arr[<span class=\"hljs-number\">0</span>];\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">last</span> = (<span class=\"hljs-params\">arr</span>) =&gt; arr[arr.<span class=\"hljs-property\">length</span> - <span class=\"hljs-number\">1</span>];\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">combineOrderedArrays</span>(<span class=\"hljs-params\">arr1, arr2</span>) {\n  <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(arr1) || !<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(arr2)) <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TypeError</span>(<span class=\"hljs-string\">&#x27;parameter must be an array&#x27;</span>);\n  <span class=\"hljs-keyword\">if</span> (arr1.<span class=\"hljs-property\">length</span> === <span class=\"hljs-number\">0</span>) <span class=\"hljs-keyword\">return</span> arr2;\n  <span class=\"hljs-keyword\">if</span> (arr2.<span class=\"hljs-property\">length</span> === <span class=\"hljs-number\">0</span>) <span class=\"hljs-keyword\">return</span> arr1;\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">first</span>(arr1) &gt;= <span class=\"hljs-title function_\">last</span>(arr2)) <span class=\"hljs-keyword\">return</span> arr1.<span class=\"hljs-title function_\">concat</span>(arr2);\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">first</span>(arr2) &gt;= <span class=\"hljs-title function_\">last</span>(arr1)) <span class=\"hljs-keyword\">return</span> arr2.<span class=\"hljs-title function_\">concat</span>(arr1);\n\n  <span class=\"hljs-keyword\">let</span> index1 = arr1.<span class=\"hljs-property\">length</span> - <span class=\"hljs-number\">1</span>;\n  <span class=\"hljs-keyword\">let</span> index2 = arr2.<span class=\"hljs-property\">length</span> - <span class=\"hljs-number\">1</span>;\n  <span class=\"hljs-keyword\">let</span> index = arr1.<span class=\"hljs-property\">length</span> + arr2.<span class=\"hljs-property\">length</span> - <span class=\"hljs-number\">1</span>;\n  <span class=\"hljs-keyword\">const</span> res = [...arr1];\n  <span class=\"hljs-keyword\">while</span> (index2 &gt;= <span class=\"hljs-number\">0</span>) {\n    <span class=\"hljs-keyword\">if</span> (index1 &lt; <span class=\"hljs-number\">0</span>) {\n      res[index] = arr2[index2];\n      index -= <span class=\"hljs-number\">1</span>;\n      index2 -= <span class=\"hljs-number\">1</span>;\n    } <span class=\"hljs-keyword\">else</span> {\n      <span class=\"hljs-keyword\">if</span> (arr2[index2] &gt; arr1[index1]) {\n        res[index] = arr2[index2];\n        index2 -= <span class=\"hljs-number\">1</span>;\n      } <span class=\"hljs-keyword\">else</span> {\n        res[index] = arr1[index1];\n        index1 -= <span class=\"hljs-number\">1</span>;\n      }\n      index -= <span class=\"hljs-number\">1</span>;\n    }\n  }\n\n  <span class=\"hljs-keyword\">return</span> res;\n}\n</code></pre>\n<h2 id=\"æ•°ç»„ä¸¤æ•°ä¹‹å’Œ\">æ•°ç»„ä¸¤æ•°ä¹‹å’Œ</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">sumOfTwoNumbers</span>(<span class=\"hljs-params\">src, target</span>) {\n  <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(src)) <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TypeError</span>(<span class=\"hljs-string\">&#x27;src must be an Array&#x27;</span>);\n  <span class=\"hljs-keyword\">const</span> tmp = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Map</span>();\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>; i &lt; src.<span class=\"hljs-property\">length</span>; i += <span class=\"hljs-number\">1</span>) {\n    <span class=\"hljs-keyword\">const</span> abs = target - src[i];\n    <span class=\"hljs-keyword\">if</span> (tmp.<span class=\"hljs-title function_\">has</span>(abs)) <span class=\"hljs-keyword\">return</span> [tmp.<span class=\"hljs-title function_\">get</span>(abs), i];\n    tmp.<span class=\"hljs-title function_\">set</span>(src[i], i);\n  }\n  <span class=\"hljs-keyword\">return</span> [];\n}\n</code></pre>\n<h2 id=\"æ•°ç»„äº¤é›†\">æ•°ç»„äº¤é›†</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">intersection</span>(<span class=\"hljs-params\">arr1, arr2</span>) {\n  <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(arr1) || !<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(arr2)) <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TypeError</span>(<span class=\"hljs-string\">&#x27;parameters must be both of Arrays&#x27;</span>);\n  <span class=\"hljs-keyword\">const</span> tmp = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Set</span>(arr1);\n  <span class=\"hljs-keyword\">const</span> res = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Set</span>();\n  arr2.<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">item</span>) =&gt;</span> {\n    <span class=\"hljs-keyword\">if</span> (tmp.<span class=\"hljs-title function_\">has</span>(item)) res.<span class=\"hljs-title function_\">add</span>(item);\n  });\n\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">from</span>(res);\n}\n</code></pre>\n"},{"title":"webpackå¤ä¹ -æ„å»ºåŸç†","tags":["webpack"],"categories":"2021å¤ä¹ ","description":"## åˆå§‹åŒ–\n\nä»é…ç½®æ–‡ä»¶ã€é…ç½®å¯¹è±¡ã€å‘½ä»¤è¡Œå‚æ•°ã€é»˜è®¤é…ç½®ä¸­è®¡ç®—å¾—åˆ°æœ€ç»ˆçš„å‚æ•°ï¼Œåˆ›å»º`Compiler`åˆå§‹åŒ–ç¼–è¯‘ç¯å¢ƒï¼šåŒ…æ‹¬æ³¨å…¥å†…ç½®æ’ä»¶ã€æ³¨å†Œå„ç§æ¨¡å—å·¥å‚ã€åˆå§‹åŒ–`RuleSet`ç­‰\n\n## ç¡®å®šå…¥å£\n\næ ¹æ®é…ç½®ä¸­çš„`entry`æ‰¾åˆ°æ‰€æœ‰å…¥å£æ–‡ä»¶ï¼Œè°ƒç”¨`compilition.addEntry`å°†å…¥å£æ–‡ä»¶è½¬åŒ–ä¸º`dependence`å¯¹è±¡\n\n## æ„å»º\n\næ ¹æ®`entry`å¯¹åº”çš„`depend","createDate":"2021-06-04 06:58:05","updateDate":"2021-06-04 18:07:22","body":"<h2 id=\"åˆå§‹åŒ–\">åˆå§‹åŒ–</h2>\n<p>ä»é…ç½®æ–‡ä»¶ã€é…ç½®å¯¹è±¡ã€å‘½ä»¤è¡Œå‚æ•°ã€é»˜è®¤é…ç½®ä¸­è®¡ç®—å¾—åˆ°æœ€ç»ˆçš„å‚æ•°ï¼Œåˆ›å»º<code>Compiler</code>åˆå§‹åŒ–ç¼–è¯‘ç¯å¢ƒï¼šåŒ…æ‹¬æ³¨å…¥å†…ç½®æ’ä»¶ã€æ³¨å†Œå„ç§æ¨¡å—å·¥å‚ã€åˆå§‹åŒ–<code>RuleSet</code>ç­‰</p>\n<h2 id=\"ç¡®å®šå…¥å£\">ç¡®å®šå…¥å£</h2>\n<p>æ ¹æ®é…ç½®ä¸­çš„<code>entry</code>æ‰¾åˆ°æ‰€æœ‰å…¥å£æ–‡ä»¶ï¼Œè°ƒç”¨<code>compilition.addEntry</code>å°†å…¥å£æ–‡ä»¶è½¬åŒ–ä¸º<code>dependence</code>å¯¹è±¡</p>\n<h2 id=\"æ„å»º\">æ„å»º</h2>\n<p>æ ¹æ®<code>entry</code>å¯¹åº”çš„<code>dependence</code>åˆ›å»º<code>module</code>å¯¹è±¡ï¼Œè°ƒç”¨<code>loader</code>å°†æ¨¡å—è½¬è¯‘ä¸ºæ ‡å‡†JavaScriptå†…å®¹ï¼Œè°ƒç”¨JavaScriptè§£é‡Šå™¨å°†å†…å®¹è½¬æ¢ä¸ºASTå¯¹è±¡ï¼Œä»ä¸­æ‰¾å‡ºè¯¥æ¨¡å—ä¾èµ–çš„æ¨¡å—ï¼Œå†é€’å½’æœ¬æ­¥éª¤ç›´åˆ°æ‰€æœ‰å…¥å£ä¾èµ–æ–‡ä»¶éƒ½ç»è¿‡æœ¬æ­¥éª¤çš„å¤„ç†ã€‚é€’å½’å®Œæˆä¹‹åå°±å¾—åˆ°äº†æ¨¡å—é—´çš„ä¾èµ–å…³ç³»å›¾</p>\n<p>è¿™ä¸ªè¿‡ç¨‹ä¸­æ•°æ®æµå¤§è‡´æ˜¯<strong>module =&gt; ast =&gt; dependences =&gt; module</strong>ï¼Œå…ˆè½¬ AST å†ä» AST æ‰¾ä¾èµ–ã€‚è¿™å°±è¦æ±‚<code>loaders</code>å¤„ç†å®Œçš„æœ€åç»“æœå¿…é¡»æ˜¯å¯ä»¥è¢«<code>acorn</code>å¤„ç†çš„æ ‡å‡† JavaScript è¯­æ³•ï¼Œæ¯”å¦‚è¯´å¯¹äºå›¾ç‰‡ï¼Œéœ€è¦ä»å›¾åƒäºŒè¿›åˆ¶è½¬æ¢æˆç±»ä¼¼äº<code>export default &quot;data:image/png;base64,xxx&quot;</code>è¿™ç±»base64æ ¼å¼æˆ–è€…<code>export default &quot;http://xxx&quot;</code>è¿™ç±»urlæ ¼å¼</p>\n<h2 id=\"ç”Ÿæˆ\">ç”Ÿæˆ</h2>\n<p>æ„å»ºé˜¶æ®µå›´ç»•<code>module</code>å±•å¼€ï¼Œç”Ÿæˆé˜¶æ®µåˆ™å›´ç»•<code>Chunks</code>å±•å¼€ã€‚ç»è¿‡æ„å»ºé˜¶æ®µåï¼Œwebpackå·²ç»å¾—åˆ°è¶³å¤Ÿçš„æ¨¡å—å†…å®¹ä¸æ¨¡å—å…³ç³»ä¿¡æ¯ï¼Œæ ¹æ®å…¥å£å’Œæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç»„è£…æˆä¸€ä¸ªä¸ªåŒ…å«å¤šä¸ªæ¨¡å—çš„<code>Chunk</code>ï¼Œå†æŠŠæ¯ä¸ª<code>Chunk</code>è½¬æ¢æˆä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶åŠ å…¥åˆ°è¾“å‡ºåˆ—è¡¨ï¼Œè¿™æ­¥æ˜¯å¯ä»¥ä¿®æ”¹è¾“å‡ºå†…å®¹çš„æœ€åæœºä¼šã€‚åœ¨ç¡®å®šå¥½è¾“å‡ºå†…å®¹åï¼Œæ ¹æ®é…ç½®ç¡®å®šè¾“å‡ºçš„è·¯å¾„å’Œæ–‡ä»¶åï¼ŒæŠŠæ–‡ä»¶å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿ</p>\n<p>webpackå†…ç½®çš„<code>chunk</code>å°è£…è§„åˆ™ï¼š</p>\n<ul>\n<li>entryåŠentryèƒ½è§¦åŠåˆ°çš„æ¨¡å—ï¼Œç»„æˆä¸€ä¸ª<code>chunk</code></li>\n<li>ä½¿ç”¨åŠ¨æ€å¼•å…¥è¯­å¥çš„æ¨¡å—ï¼Œå„è‡ªç»„åˆæˆä¸€ä¸ª<code>chunk</code></li>\n<li>é€šè¿‡<code>optimization.splitChunks</code>æ¥å¼ºåˆ¶è®¾å®šå…¬ç”¨æ¨¡å—å¯¼å‡ºä¸ºä¸€ä¸ª<code>chunk</code></li>\n</ul>\n<h2 id=\"èµ„æºå½¢æ€æµè½¬\">èµ„æºå½¢æ€æµè½¬</h2>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/webpack-transform.png\" alt=\"webpackè½¬æ¢è¿‡ç¨‹\"></p>\n<ul>\n<li><code>compiler.make</code>ï¼Œå°†<code>entry</code>ä»¥<code>dependence</code>å¯¹è±¡å½¢å¼åŠ å…¥<code>compilation</code>çš„ä¾èµ–åˆ—è¡¨ï¼Œ<code>dependence</code>å¯¹è±¡è®°å½•æœ‰<code>entry</code>çš„ç±»å‹ã€è·¯å¾„ç­‰ä¿¡æ¯ã€‚æ ¹æ®<code>dependence</code>è°ƒç”¨å¯¹åº”çš„å·¥å‚å‡½æ•°åˆ›å»º<code>module</code>å¯¹è±¡ï¼Œä¹‹åè¯»å…¥<code>module</code>å¯¹åº”çš„æ–‡ä»¶å†…å®¹ï¼Œè°ƒç”¨<code>loader-runner</code>å¯¹å†…å®¹è½¬åŒ–ï¼Œè½¬åŒ–ç»“æœè‹¥æœ‰å…¶ä»–ä¾èµ–åˆ™ç»§ç»­è¯»å…¥ä¾èµ–èµ„æºï¼Œé‡å¤æ­¤è¿‡ç¨‹ç›´åˆ°æ‰€æœ‰ä¾èµ–å‡è¢«è½¬åŒ–ä¸º<code>module</code></li>\n<li><code>compilation.seal</code>ï¼Œéå†<code>module</code>é›†åˆï¼Œæ ¹æ®<code>entry</code>é…ç½®åŠå¼•å…¥èµ„æºçš„æ–¹å¼ï¼Œå°†<code>module</code>åˆ†é…åˆ°ä¸åŒçš„<code>chunk</code>ï¼Œéå†<code>chunk</code>é›†åˆï¼Œè°ƒç”¨<code>compilation.emitAsset</code>æ–¹æ³•æ ‡è®°<code>chunk</code>çš„è¾“å‡ºè§„åˆ™ï¼Œå³è½¬åŒ–ä¸º<code>assets</code>é›†åˆ</li>\n<li><code>compiler.emitAssets</code>ï¼Œå°†<code>assets</code>å†™å…¥æ–‡ä»¶ç³»ç»Ÿ</li>\n</ul>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://xie.infoq.cn/article/ddca4caa394241447fa0aa3c0\">[ä¸‡å­—æ€»ç»“] ä¸€æ–‡åƒé€ Webpack æ ¸å¿ƒåŸç†</a></p>\n"},{"title":"React.jså¤ä¹ -0","tags":["React.js"],"categories":"2021å¤ä¹ ","description":"## äº‹ä»¶åˆæˆ\n\n### ä»€ä¹ˆäº‹ä»¶åˆæˆ\n\nåœ¨reactä¸­ï¼Œæˆ‘ä»¬ç»‘å®šçš„äº‹ä»¶`onClick`ç­‰ï¼Œå¹¶ä¸æ˜¯åŸç”Ÿäº‹ä»¶ï¼Œè€Œæ˜¯ç”±åŸç”Ÿäº‹ä»¶åˆæˆçš„Reactäº‹ä»¶ï¼Œæ¯”å¦‚`click`äº‹ä»¶åˆæˆä¸º`onClick`äº‹ä»¶ã€‚æ¯”å¦‚`blur`, `change`, `input`, `keydown`, `keyup`ç­‰ , åˆæˆä¸º`onChange`\n\n### ä¸ºä»€ä¹ˆè¦åˆæˆäº‹ä»¶\n\nç»Ÿä¸€ç®¡ç†ï¼Œæ¶ˆé™¤æµè§ˆå™¨å·®å¼‚æ€§\n\n###","createDate":"2021-06-02 10:16:14","updateDate":"2021-06-04 14:26:03","body":"<h2 id=\"äº‹ä»¶åˆæˆ\">äº‹ä»¶åˆæˆ</h2>\n<h3 id=\"ä»€ä¹ˆäº‹ä»¶åˆæˆ\">ä»€ä¹ˆäº‹ä»¶åˆæˆ</h3>\n<p>åœ¨reactä¸­ï¼Œæˆ‘ä»¬ç»‘å®šçš„äº‹ä»¶<code>onClick</code>ç­‰ï¼Œå¹¶ä¸æ˜¯åŸç”Ÿäº‹ä»¶ï¼Œè€Œæ˜¯ç”±åŸç”Ÿäº‹ä»¶åˆæˆçš„Reactäº‹ä»¶ï¼Œæ¯”å¦‚<code>click</code>äº‹ä»¶åˆæˆä¸º<code>onClick</code>äº‹ä»¶ã€‚æ¯”å¦‚<code>blur</code>, <code>change</code>, <code>input</code>, <code>keydown</code>, <code>keyup</code>ç­‰ , åˆæˆä¸º<code>onChange</code></p>\n<h3 id=\"ä¸ºä»€ä¹ˆè¦åˆæˆäº‹ä»¶\">ä¸ºä»€ä¹ˆè¦åˆæˆäº‹ä»¶</h3>\n<p>ç»Ÿä¸€ç®¡ç†ï¼Œæ¶ˆé™¤æµè§ˆå™¨å·®å¼‚æ€§</p>\n<h3 id=\"äº‹ä»¶è§¦å‘æµç¨‹\">äº‹ä»¶è§¦å‘æµç¨‹</h3>\n<ol>\n<li>æ‰§è¡Œ<code>dispatchEvent</code></li>\n<li>åˆ›å»ºäº‹ä»¶å¯¹åº”çš„åˆæˆäº‹ä»¶<code>SyntheticEvent</code></li>\n<li>æ”¶é›†æ•è·çš„å›è°ƒå‡½æ•°å’Œå¯¹åº”çš„èŠ‚ç‚¹å®ä¾‹</li>\n<li>æ”¶é›†å†’æ³¡çš„å›è°ƒå‡½æ•°å’Œå¯¹åº”çš„èŠ‚ç‚¹å®ä¾‹</li>\n<li>æ‰§è¡Œå¯¹åº”çš„å›è°ƒå‡½æ•°ï¼ŒåŒæ—¶å°†<code>SyntheticEvent</code>ä½œä¸ºå‚æ•°ä¼ å…¥</li>\n</ol>\n<h3 id=\"æ³¨æ„\">æ³¨æ„</h3>\n<ul>\n<li>åŸç”Ÿäº‹ä»¶çš„æ‰§è¡Œå…ˆäºåˆæˆäº‹ä»¶</li>\n</ul>\n<h2 id=\"è·¯ç”±æ‡’åŠ è½½ä»£ç åˆ†å‰²\">è·¯ç”±æ‡’åŠ è½½/ä»£ç åˆ†å‰²</h2>\n<p>webpacké‡åˆ°<code>import()</code>æ—¶ä¼šå°†å¼•å…¥çš„æ¨¡å—æ‰“åŒ…æˆç‹¬ç«‹çš„bundle ï¼ˆ<code>import()</code>å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªPromiseï¼‰ï¼Œéœ€è¦æ—¶ä¼šå¼‚æ­¥åŠ è½½è¿™äº›bundle</p>\n"},{"title":"React.jså¤ä¹ -ä¸€äº›ç†å¿µ","tags":["React.js"],"categories":"2021å¤ä¹ ","description":"## æ•´ä½“æ¶æ„\n\n- schedulerï¼ˆè°ƒåº¦å™¨ï¼‰\n    è°ƒåº¦ä»»åŠ¡çš„ä¼˜å…ˆçº§ï¼Œé«˜ä¼˜ä»»åŠ¡ä¼˜å…ˆè¿›å…¥reconciler\n- reconcilerï¼ˆåè°ƒå™¨ï¼‰\n    è´Ÿè´£æ‰¾å‡ºå‘ç”Ÿå˜åŒ–çš„ç»„ä»¶\n- rendererï¼ˆæ¸²æŸ“å™¨ï¼‰\n    è´Ÿè´£å°†å˜åŒ–çš„ç»„ä»¶æ¸²æŸ“åˆ°é¡µé¢ä¸Š\n    \n## Fiber\n\nå…·æœ‰ä¸‰ç§ä¸åŒçš„å«ä¹‰\n\n1. ä¸€ç§æ¶æ„\n    ä¹‹å‰React15çš„reconcileré‡‡ç”¨é€’å½’çš„æ–¹å¼æ‰§è¡Œæ›´æ–°DO","createDate":"2021-05-30 14:41:42","updateDate":"2021-06-01 18:00:03","body":"<h2 id=\"æ•´ä½“æ¶æ„\">æ•´ä½“æ¶æ„</h2>\n<ul>\n<li>schedulerï¼ˆè°ƒåº¦å™¨ï¼‰\n  è°ƒåº¦ä»»åŠ¡çš„ä¼˜å…ˆçº§ï¼Œé«˜ä¼˜ä»»åŠ¡ä¼˜å…ˆè¿›å…¥reconciler</li>\n<li>reconcilerï¼ˆåè°ƒå™¨ï¼‰\n  è´Ÿè´£æ‰¾å‡ºå‘ç”Ÿå˜åŒ–çš„ç»„ä»¶</li>\n<li>rendererï¼ˆæ¸²æŸ“å™¨ï¼‰\n  è´Ÿè´£å°†å˜åŒ–çš„ç»„ä»¶æ¸²æŸ“åˆ°é¡µé¢ä¸Š</li>\n</ul>\n<h2 id=\"fiber\">Fiber</h2>\n<p>å…·æœ‰ä¸‰ç§ä¸åŒçš„å«ä¹‰</p>\n<ol>\n<li>ä¸€ç§æ¶æ„\n ä¹‹å‰React15çš„reconcileré‡‡ç”¨é€’å½’çš„æ–¹å¼æ‰§è¡Œæ›´æ–°DOMçš„æ“ä½œï¼Œæ•°æ®ä¿å­˜åœ¨é€’å½’è°ƒç”¨æ ˆä¸­ï¼Œæ‰€ä»¥è¢«ç§°ä¸º<strong>stack Reconciler</strong>ã€‚React16çš„reconcileråŸºäºFiberèŠ‚ç‚¹å®ç°ï¼Œè¢«ç§°ä¸º<strong>Fiber Reconciler</strong></li>\n<li>ä¸€ç§æ•°æ®ç»“æ„\n æ¯ä¸ªFiberèŠ‚ç‚¹å¯¹åº”ä¸€ä¸ªReact elementï¼Œä¿å­˜äº†è¯¥ç»„ä»¶çš„ç±»å‹ï¼ˆå‡½æ•°ç»„ä»¶/ç±»ç»„ä»¶/åŸç”Ÿç»„ä»¶...ï¼‰ã€å¯¹åº”çš„DOMèŠ‚ç‚¹ç­‰ä¿¡æ¯</li>\n<li>ä¸€ä¸ªæ‰§è¡Œä»»åŠ¡ï¼ˆå·¥ä½œå•å…ƒï¼‰\n æ¯ä¸ªFiberèŠ‚ç‚¹ä¿å­˜äº†æœ¬æ¬¡æ›´æ–°ä¸­è¯¥ç»„ä»¶æ”¹å˜çš„çŠ¶æ€ã€è¦æ‰§è¡Œçš„å·¥ä½œï¼ˆéœ€è¦è¢«åˆ é™¤/è¢«æ’å…¥é¡µé¢ä¸­/è¢«æ›´æ–°...ï¼‰</li>\n</ol>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">FiberNode</span>(<span class=\"hljs-params\">\n  tag: WorkTag,\n  pendingProps: mixed,\n  key: <span class=\"hljs-literal\">null</span> | string,\n  mode: TypeOfMode,\n</span>) {\n  <span class=\"hljs-comment\">// ä½œä¸ºé™æ€æ•°æ®ç»“æ„çš„å±æ€§</span>\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">tag</span> = tag;\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">key</span> = key;\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">elementType</span> = <span class=\"hljs-literal\">null</span>;\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">type</span> = <span class=\"hljs-literal\">null</span>;\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">stateNode</span> = <span class=\"hljs-literal\">null</span>;\n\n  <span class=\"hljs-comment\">// ç”¨äºè¿æ¥å…¶ä»–FiberèŠ‚ç‚¹å½¢æˆFiberæ ‘</span>\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">return</span> = <span class=\"hljs-literal\">null</span>;\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">child</span> = <span class=\"hljs-literal\">null</span>;\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">sibling</span> = <span class=\"hljs-literal\">null</span>;\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">index</span> = <span class=\"hljs-number\">0</span>;\n\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">ref</span> = <span class=\"hljs-literal\">null</span>;\n\n  <span class=\"hljs-comment\">// ä½œä¸ºåŠ¨æ€çš„å·¥ä½œå•å…ƒçš„å±æ€§</span>\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">pendingProps</span> = pendingProps;\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">memoizedProps</span> = <span class=\"hljs-literal\">null</span>;\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">updateQueue</span> = <span class=\"hljs-literal\">null</span>;\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">memoizedState</span> = <span class=\"hljs-literal\">null</span>;\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">dependencies</span> = <span class=\"hljs-literal\">null</span>;\n\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">mode</span> = mode;\n\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">effectTag</span> = <span class=\"hljs-title class_\">NoEffect</span>;\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">nextEffect</span> = <span class=\"hljs-literal\">null</span>;\n\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">firstEffect</span> = <span class=\"hljs-literal\">null</span>;\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">lastEffect</span> = <span class=\"hljs-literal\">null</span>;\n\n  <span class=\"hljs-comment\">// è°ƒåº¦ä¼˜å…ˆçº§ç›¸å…³</span>\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">lanes</span> = <span class=\"hljs-title class_\">NoLanes</span>;\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">childLanes</span> = <span class=\"hljs-title class_\">NoLanes</span>;\n\n  <span class=\"hljs-comment\">// æŒ‡å‘è¯¥fiberåœ¨å¦ä¸€æ¬¡æ›´æ–°æ—¶å¯¹åº”çš„fiber</span>\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">alternate</span> = <span class=\"hljs-literal\">null</span>;\n}\n</code></pre>\n<h2 id=\"fiber-reconciler\">Fiber Reconciler</h2>\n<p>åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œ<code>commit</code>å’Œ<code>render</code></p>\n<ul>\n<li><code>commit</code>\n  å¯ä¸­æ–­ï¼Œç”Ÿæˆfiberæ ‘ï¼Œæ”¶é›†effect</li>\n<li><code>render</code>\n  ä¸å¯ä¸­æ–­ï¼Œæ ¹æ®æ”¶é›†åˆ°çš„effectæ›´æ–°DOMï¼Œæ‰§è¡Œä¸€äº›ç”Ÿå‘½å‘¨æœŸå‡½æ•°å’Œhooksï¼ˆ<code>useEffect</code>åœ¨æ¸²æŸ“ä¸­ä¹‹åæ‰§è¡Œï¼‰</li>\n</ul>\n<h2 id=\"jsx-vs-fiber\">jsx vs fiber</h2>\n<p>JSXæ˜¯ä¸€ç§æè¿°å½“å‰ç»„ä»¶å†…å®¹çš„æ•°æ®ç»“æ„ï¼Œå®ƒä¸åŒ…å«ç»„ä»¶<code>schedule</code>ã€<code>reconcile</code>ã€<code>render</code>æ‰€éœ€çš„ç›¸å…³ä¿¡æ¯ã€‚</p>\n<p>åœ¨ç»„ä»¶<strong>mount</strong>æ—¶ï¼Œ<code>Reconciler</code>æ ¹æ®JSXæè¿°çš„ç»„ä»¶å†…å®¹ç”Ÿæˆç»„ä»¶å¯¹åº”çš„<code>Fiber</code>èŠ‚ç‚¹ã€‚</p>\n<p>åœ¨<strong>update</strong>æ—¶ï¼Œ<code>Reconciler</code>å°†JSXä¸<code>Fiber</code>èŠ‚ç‚¹ä¿å­˜çš„æ•°æ®å¯¹æ¯”ï¼Œç”Ÿæˆç»„ä»¶å¯¹åº”çš„<code>Fiber</code>èŠ‚ç‚¹ï¼Œå¹¶æ ¹æ®å¯¹æ¯”ç»“æœä¸º<code>Fiber</code>èŠ‚ç‚¹æ‰“ä¸Šæ ‡è®°</p>\n<h2 id=\"åˆæ¬¡æ¸²æŸ“æµç¨‹\">åˆæ¬¡æ¸²æŸ“æµç¨‹</h2>\n<h2 id=\"æ›´æ–°æµç¨‹\">æ›´æ–°æµç¨‹</h2>\n<ol>\n<li>è°ƒç”¨æ•°æ®æ›´æ–°çš„æ–¹æ³•(<code>this.setState</code>/<code>useStateè¿”å›çš„æ›´æ–°æ–¹æ³•</code>)</li>\n<li>è¿›å…¥<strong>render</strong>é˜¶æ®µ</li>\n<li>é‡‡ç”¨<strong>DFS</strong>åˆ›å»ºfiberæ ‘</li>\n<li>é‡‡ç”¨<strong>reconcileç®—æ³•</strong>æ ‡è®°å˜åŒ–</li>\n<li>è¿›å…¥<strong>commit</strong>é˜¶æ®µ</li>\n<li>æ‰§è¡Œ4ä¸­å˜åŒ–å¯¹åº”çš„è§†å›¾æ“ä½œ</li>\n</ol>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://react.iamkasong.com/\">ReactæŠ€æœ¯æ­ç§˜</a></p>\n"},{"title":"JavaScriptå¤ä¹ -JavaScriptçš„æ‰§è¡Œè¿‡ç¨‹","tags":["JavaScriptçš„æ‰§è¡Œè¿‡ç¨‹"],"categories":"2021å¤ä¹ ","description":"JavaScriptä»£ç åœ¨æ‰§è¡Œæ—¶ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ª**å…¨å±€å¯æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆ`GlobalContext`ï¼‰**ï¼Œæ¯å½“æ‰§è¡Œåˆ°ä¸€ä¸ªå‡½æ•°è°ƒç”¨æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ª**å¯æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆ`ExecutionContext`ï¼‰EC**ã€‚å½“ç„¶ç¨‹åºå¯èƒ½å­˜åœ¨å¾ˆå¤šå‡½æ•°è°ƒç”¨ï¼Œé‚£ä¹ˆå°±ä¼šåˆ›å»ºå¾ˆå¤šECï¼Œæ‰€ä»¥JavaScriptå¼•æ“åˆ›å»ºäº†**æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼ˆ`ExecutionConetxtStack`ï¼‰ECS**æ¥ç®¡ç†æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚å½“å‡½æ•°è°ƒ","createDate":"2021-05-28 02:22:06","updateDate":"2021-05-28 16:36:52","body":"<p>JavaScriptä»£ç åœ¨æ‰§è¡Œæ—¶ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ª<strong>å…¨å±€å¯æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆ<code>GlobalContext</code>ï¼‰</strong>ï¼Œæ¯å½“æ‰§è¡Œåˆ°ä¸€ä¸ªå‡½æ•°è°ƒç”¨æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ª<strong>å¯æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆ<code>ExecutionContext</code>ï¼‰EC</strong>ã€‚å½“ç„¶ç¨‹åºå¯èƒ½å­˜åœ¨å¾ˆå¤šå‡½æ•°è°ƒç”¨ï¼Œé‚£ä¹ˆå°±ä¼šåˆ›å»ºå¾ˆå¤šECï¼Œæ‰€ä»¥JavaScriptå¼•æ“åˆ›å»ºäº†<strong>æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼ˆ<code>ExecutionConetxtStack</code>ï¼‰ECS</strong>æ¥ç®¡ç†æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚å½“å‡½æ•°è°ƒç”¨å®Œæˆï¼ŒJavaScriptä¼šé€€å‡ºè¿™ä¸ªæ‰§è¡Œç¯å¢ƒå¹¶æŠŠè¿™ä¸ªç¯å¢ƒé”€æ¯ï¼Œå›åˆ°ä¸Šä¸€ä¸ªæ‰§è¡Œç¯å¢ƒ...ã€‚è¿™ä¸ªè¿‡ç¨‹åå¤æ‰§è¡Œï¼Œç›´åˆ°æ‰§è¡Œæ ˆä¸­çš„ä»£ç å…¨éƒ¨æ‰§è¡Œå®Œæ¯•ã€‚</p>\n<p>æ‰§è¡Œä¸Šä¸‹æ–‡çš„åˆ›å»ºé˜¶æ®µä¸»è¦è´Ÿè´£ä¸‰ä»¶äº‹ï¼š</p>\n<ol>\n<li><code>this</code></li>\n<li>Lexical Environment</li>\n<li>Variable Environment</li>\n</ol>\n<h2 id=\"è¯æ³•ç¯å¢ƒ\">è¯æ³•ç¯å¢ƒ</h2>\n<p>è¯æ³•ç¯å¢ƒï¼ˆLexical Environmentï¼‰ï¼šä½œç”¨äºè¯æ³•åˆ†æé˜¶æ®µã€‚åŒ…å«ä¸¤éƒ¨åˆ†ï¼š</p>\n<ol>\n<li>Environment Recordï¼ˆç¯å¢ƒè®°å½•ï¼‰æ˜¯ä¸€ä¸ªä»¥å…¨éƒ¨å±€éƒ¨å˜é‡ä¸ºå±æ€§çš„å¯¹è±¡ï¼ˆä»¥åŠå…¶ä»–å¦‚ this å€¼çš„ä¿¡æ¯ï¼‰ã€‚</li>\n<li>å¯¹ outer lexical environmentï¼ˆå¤–éƒ¨è¯æ³•ç¯å¢ƒï¼‰çš„å¼•ç”¨ï¼Œé€šå¸¸å…³è”è¯æ³•ä¸Šçš„å¤–é¢ä¸€å±‚ä»£ç ï¼ˆèŠ±æ‹¬å·å¤–ä¸€å±‚ï¼‰ã€‚</li>\n</ol>\n<p>è¯æ³•ç¯å¢ƒæ˜¯åœ¨ä»£ç å®šä¹‰çš„æ—¶å€™å†³å®šçš„ï¼Œè·Ÿä»£ç åœ¨å“ªâ¾¥è°ƒâ½¤æ²¡æœ‰å…³ç³»</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// å…¨å±€æ‰§â¾ä¸Šä¸‹â½‚</span>\n<span class=\"hljs-title class_\">GlobalExectionContext</span> = {\n  <span class=\"hljs-comment\">// è¯æ³•ç¯å¢ƒ</span>\n  <span class=\"hljs-title class_\">LexicalEnvironment</span>: {\n    <span class=\"hljs-comment\">// ç¯å¢ƒè®°å½•</span>\n    <span class=\"hljs-title class_\">EnvironmentRecord</span>: {\n      <span class=\"hljs-title class_\">Type</span>: <span class=\"hljs-string\">&quot;Object&quot;</span>, <span class=\"hljs-comment\">// å…¨å±€ç¯å¢ƒ</span>\n      <span class=\"hljs-comment\">// ... æ ‡è¯†ç¬¦ç»‘å®šåœ¨è¿™â¾¥</span>\n      <span class=\"hljs-attr\">outer</span>: &lt;<span class=\"hljs-literal\">null</span>&gt;, <span class=\"hljs-comment\">// å¯¹å¤–éƒ¨ç¯å¢ƒçš„å¼•â½¤</span>\n    }\n  }\n}\n<span class=\"hljs-comment\">// å‡½æ•°æ‰§â¾ä¸Šä¸‹â½‚</span>\n<span class=\"hljs-title class_\">FunctionExectionContext</span> = {\n  <span class=\"hljs-title class_\">LexicalEnvironment</span>: {\n    <span class=\"hljs-title class_\">EnvironmentRecord</span>: {\n      <span class=\"hljs-title class_\">Type</span>: <span class=\"hljs-string\">&quot;Declarative&quot;</span>,<span class=\"hljs-comment\">// å‡½æ•°ç¯å¢ƒ</span>\n      <span class=\"hljs-comment\">// ... æ ‡è¯†ç¬¦ç»‘å®šåœ¨è¿™â¾¥</span>\n      <span class=\"hljs-comment\">// å¯¹å…¨å±€ç¯å¢ƒæˆ–å¤–éƒ¨å‡½æ•°ç¯å¢ƒçš„å¼•â½¤</span>\n      <span class=\"hljs-attr\">outer</span>: <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Global</span> <span class=\"hljs-attr\">or</span> <span class=\"hljs-attr\">outer</span> <span class=\"hljs-attr\">function</span> <span class=\"hljs-attr\">environment</span> <span class=\"hljs-attr\">reference</span>&gt;</span>,\n    }\n  }\n}</span>\n</code></pre>\n<h2 id=\"è¯æ³•ç¯å¢ƒä¸é—­åŒ…\">è¯æ³•ç¯å¢ƒä¸é—­åŒ…</h2>\n<blockquote>\n<p>ä¸€ä¸ªå‡½æ•°å’Œå¯¹å…¶å‘¨å›´çŠ¶æ€ï¼ˆlexical environmentï¼Œè¯æ³•ç¯å¢ƒï¼‰çš„å¼•ç”¨æ†ç»‘åœ¨ä¸€èµ·ï¼ˆæˆ–è€…è¯´å‡½æ•°è¢«å¼•ç”¨åŒ…å›´ï¼‰ï¼Œè¿™æ ·çš„ç»„åˆå°±æ˜¯é—­åŒ…ï¼ˆclosureï¼‰ --MDN</p>\n</blockquote>\n<h2 id=\"å˜é‡ç¯å¢ƒ\">å˜é‡ç¯å¢ƒ</h2>\n<p>ä¸ºäº†ç»§ç»­å»é€‚é…æ—©æœŸJavaScriptçš„<code>var</code>ç­‰ï¼ŒES6å¢åŠ äº†<strong>å˜é‡ç¯å¢ƒï¼ˆVariable Environmentï¼‰</strong>ã€‚å˜é‡ç¯å¢ƒä¹Ÿæ˜¯ä¸€ä¸ªè¯æ³•ç¯å¢ƒï¼Œå…¶ç¯å¢ƒè®°å½•å™¨åŒ…å«æœ‰å˜é‡å£°æ˜è¯­å¥</p>\n<p>åœ¨ES6ä¸­ï¼Œè¯æ³•ç¯å¢ƒå’Œå˜é‡ç¯å¢ƒçš„åŒºåˆ«åœ¨äºå‰è€…ç”¨äºå­˜å‚¨å‡½æ•°å£°æ˜å’Œå˜é‡(<code>let</code>å’Œ<code>const</code>)ç»‘å®šï¼Œè€Œåè€…ä»…ç”¨äºå­˜å‚¨å˜é‡(<code>var</code>)ç»‘å®š</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">let</span> a = <span class=\"hljs-number\">20</span>;\n<span class=\"hljs-keyword\">const</span> b = <span class=\"hljs-number\">30</span>;\n<span class=\"hljs-keyword\">var</span> c;\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">multiply</span>(<span class=\"hljs-params\">e, f</span>){\n  <span class=\"hljs-keyword\">var</span> g = <span class=\"hljs-number\">20</span>;\n  <span class=\"hljs-keyword\">return</span> e*f*g;\n}\nc = <span class=\"hljs-title function_\">multiply</span>(<span class=\"hljs-number\">20</span>, <span class=\"hljs-number\">30</span>);\n</code></pre>\n<p>è¯æ³•æ„æˆ</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// å…¨å±€æ‰§â¾ä¸Šä¸‹â½‚</span>\n<span class=\"hljs-title class_\">GlobalExectionContext</span> = {\n  <span class=\"hljs-title class_\">ThisBinding</span>: &lt; <span class=\"hljs-title class_\">Global</span> <span class=\"hljs-title class_\">Object</span> &gt; ,\n  <span class=\"hljs-comment\">// è¯æ³•ç¯å¢ƒ</span>\n  <span class=\"hljs-title class_\">LexicalEnvironment</span>: {\n    <span class=\"hljs-title class_\">EnvironmentRecord</span>: {\n      <span class=\"hljs-title class_\">Type</span>: <span class=\"hljs-string\">&quot;Object&quot;</span>,\n      <span class=\"hljs-comment\">// æ ‡è¯†ç¬¦ç»‘å®šï¼Œletã€constã€å‡½æ•°å£°æ˜</span>\n      <span class=\"hljs-attr\">a</span>: &lt; uninitialized &gt; ,\n      <span class=\"hljs-attr\">b</span>: &lt; uninitialized &gt; ,\n      <span class=\"hljs-attr\">multiply</span>: &lt; func &gt;\n    }\n    <span class=\"hljs-attr\">outer</span>: &lt; <span class=\"hljs-literal\">null</span> &gt;\n  },\n  <span class=\"hljs-comment\">// å˜é‡ç¯å¢ƒ</span>\n  <span class=\"hljs-title class_\">VariableEnvironment</span>: {\n    <span class=\"hljs-title class_\">EnvironmentRecord</span>: {\n      <span class=\"hljs-title class_\">Type</span>: <span class=\"hljs-string\">&quot;Object&quot;</span>,\n      <span class=\"hljs-comment\">// æ ‡è¯†ç¬¦ç»‘å®šï¼Œvar å£°æ˜</span>\n      <span class=\"hljs-attr\">c</span>: <span class=\"hljs-literal\">undefined</span>,\n    }\n    <span class=\"hljs-attr\">outer</span>: &lt; <span class=\"hljs-literal\">null</span> &gt;\n  }\n}\n\n<span class=\"hljs-comment\">// å‡½æ•°æ‰§â¾ä¸Šä¸‹â½‚</span>\n<span class=\"hljs-title class_\">FunctionExectionContext</span> = {\n  <span class=\"hljs-title class_\">ThisBinding</span>: &lt; <span class=\"hljs-title class_\">Global</span> <span class=\"hljs-title class_\">Object</span> &gt; ,\n  <span class=\"hljs-title class_\">LexicalEnvironment</span>: {\n    <span class=\"hljs-title class_\">EnvironmentRecord</span>: {\n      <span class=\"hljs-title class_\">Type</span>: <span class=\"hljs-string\">&quot;Declarative&quot;</span>,\n      <span class=\"hljs-comment\">// æ ‡è¯†ç¬¦ç»‘å®š</span>\n      <span class=\"hljs-title class_\">Arguments</span>: {\n        <span class=\"hljs-number\">0</span>: <span class=\"hljs-number\">20</span>,\n        <span class=\"hljs-number\">1</span>: <span class=\"hljs-number\">30</span>,\n        <span class=\"hljs-attr\">length</span>: <span class=\"hljs-number\">2</span>\n      },\n    },\n    <span class=\"hljs-attr\">outer</span>: &lt; <span class=\"hljs-title class_\">GlobalLexicalEnvironment</span> &gt;\n  },\n  <span class=\"hljs-title class_\">VariableEnvironment</span>: {\n    <span class=\"hljs-title class_\">EnvironmentRecord</span>: {\n      <span class=\"hljs-title class_\">Type</span>: <span class=\"hljs-string\">&quot;Declarative&quot;</span>,\n      <span class=\"hljs-comment\">// åœ¨è¿™â¾¥ç»‘å®šæ ‡è¯†ç¬¦</span>\n      <span class=\"hljs-attr\">g</span>: <span class=\"hljs-literal\">undefined</span>\n    },\n    <span class=\"hljs-attr\">outer</span>: &lt; <span class=\"hljs-title class_\">GlobalLexicalEnvironment</span> &gt;\n  }\n}\n</code></pre>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Closures\">MDN-é—­åŒ…</a></p>\n<p><a href=\"https://hondrytravis.github.io/docs/typescript/javascript_workflow/\">JS | æ‰§è¡Œè°ƒåº¦è¿‡ç¨‹</a></p>\n"},{"title":"å‰ç«¯æ¶æ„&è½¯å®åŠ›å¤ä¹ -å›¾ç‰‡é¢„åŠ è½½&æ‡’åŠ è½½","tags":["é¢„åŠ è½½","æ‡’åŠ è½½"],"categories":"2021å¤ä¹ ","description":"## é¢„åŠ è½½\n\n`new`ä¸€ä¸ªæ–°çš„`Image`ï¼Œç»™`Image`çš„`src`èµ‹å€¼ä¸ºçœŸæ­£çš„`src`ï¼›è¯¥`Image`åœ¨åŠ è½½å®Œæ¯•åç›¸åº”çš„å›¾ç‰‡èµ„æºå°±ä¼šåœ¨æœ¬åœ°ç¼“å­˜\n\n## æ‡’åŠ è½½\n\né¦–å…ˆè®¾ç½®ä¸€ä¸ªæŠŠ`src`è®¾ç½®ä¸ºä¸´æ—¶çš„`data-src`å±æ€§ï¼Œ`src`è®¾ç½®ä¸ºä¸€ä¸ªloadingå›¾ï¼Œå¾…å½“å‰å…ƒç´ å‡ºç°åœ¨è§†å£åç”¨`data-src`æ›¿æ¢`src`\n\nå¯ä¾›å®ç°çš„æ–¹æ¡ˆï¼š\n\n- `window.onscroll","createDate":"2021-05-27 10:17:46","updateDate":"2021-05-27 18:42:04","body":"<h2 id=\"é¢„åŠ è½½\">é¢„åŠ è½½</h2>\n<p><code>new</code>ä¸€ä¸ªæ–°çš„<code>Image</code>ï¼Œç»™<code>Image</code>çš„<code>src</code>èµ‹å€¼ä¸ºçœŸæ­£çš„<code>src</code>ï¼›è¯¥<code>Image</code>åœ¨åŠ è½½å®Œæ¯•åç›¸åº”çš„å›¾ç‰‡èµ„æºå°±ä¼šåœ¨æœ¬åœ°ç¼“å­˜</p>\n<h2 id=\"æ‡’åŠ è½½\">æ‡’åŠ è½½</h2>\n<p>é¦–å…ˆè®¾ç½®ä¸€ä¸ªæŠŠ<code>src</code>è®¾ç½®ä¸ºä¸´æ—¶çš„<code>data-src</code>å±æ€§ï¼Œ<code>src</code>è®¾ç½®ä¸ºä¸€ä¸ªloadingå›¾ï¼Œå¾…å½“å‰å…ƒç´ å‡ºç°åœ¨è§†å£åç”¨<code>data-src</code>æ›¿æ¢<code>src</code></p>\n<p>å¯ä¾›å®ç°çš„æ–¹æ¡ˆï¼š</p>\n<ul>\n<li><p><code>window.onscrollï¼ˆèŠ‚æµï¼‰</code> + <code>clientTop</code> + <code>offsetTop</code> + <code>clientHieght</code> + <code>scrollTop</code></p>\n<p>  ä¸å®¹æ˜“åˆ¤æ–­å…ƒç´ ä½ç½®</p>\n</li>\n<li><p><code>widnow.onscrollï¼ˆèŠ‚æµï¼‰</code> + <code>Element.getBoundingClientRect()</code></p>\n<p>  <code>getBoundingClientRect()</code>ä¼šè§¦å‘å›æµ</p>\n</li>\n<li><p><code>IntersectionObserver</code> + <a href=\"https://github.com/Financial-Times/polyfill-library/blob/master/polyfills/IntersectionObserver/polyfill.js\">polyfill</a></p>\n</li>\n<li><p><code>img</code>çš„<code>lazy</code>å±æ€§</p>\n<p>  å…¼å®¹æ€§å·®</p>\n</li>\n</ul>\n<p>ä»¥<code>IntersectionObserver</code>ä¸ºå®ç°æ–¹æ¡ˆï¼š</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-keyword\">html</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">&quot;en&quot;</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">charset</span>=<span class=\"hljs-string\">&quot;UTF-8&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">http-equiv</span>=<span class=\"hljs-string\">&quot;X-UA-Compatible&quot;</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">&quot;IE=edge&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;viewport&quot;</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>Document<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;height: 100vh;&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">img</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;img&quot;</span> <span class=\"hljs-attr\">data-src</span>=<span class=\"hljs-string\">&quot;https://mrrsblog.oss-cn-shanghai.aliyuncs.com/avatar.jpg&quot;</span> <span class=\"hljs-attr\">alt</span>=<span class=\"hljs-string\">&quot;&quot;</span> <span class=\"hljs-attr\">srcset</span>=<span class=\"hljs-string\">&quot;&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n    <span class=\"hljs-keyword\">const</span> observer = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">IntersectionObserver</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">changes</span>) =&gt;</span> {\n      changes.<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">change</span>) =&gt;</span> {\n        <span class=\"hljs-keyword\">if</span> (change.<span class=\"hljs-property\">isIntersecting</span>) {\n          <span class=\"hljs-keyword\">const</span> img = change.<span class=\"hljs-property\">target</span>;\n          img.<span class=\"hljs-property\">src</span> = img.<span class=\"hljs-property\">dataset</span>.<span class=\"hljs-property\">src</span>;\n          <span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">deleteProperty</span>(img.<span class=\"hljs-property\">dataset</span>, <span class=\"hljs-string\">&#x27;src&#x27;</span>);\n          observer.<span class=\"hljs-title function_\">unobserve</span>(img);\n        }\n      })\n    });\n    observer.<span class=\"hljs-title function_\">observe</span>(<span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&#x27;#img&#x27;</span>));\n  </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n      <span class=\"hljs-comment\">// todo æ·»åŠ èŠ‚æµ</span>\n     <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&#x27;scroll&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n      <span class=\"hljs-keyword\">const</span> innerHeight = <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">innerHeight</span> || <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">documentElement</span>.<span class=\"hljs-property\">clientHeight</span> || <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">body</span>.<span class=\"hljs-property\">clientHeight</span>;\n      <span class=\"hljs-keyword\">const</span> img = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#img&quot;</span>);\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(img.<span class=\"hljs-property\">dataset</span>.<span class=\"hljs-property\">src</span>);\n      <span class=\"hljs-keyword\">const</span> { left, right, top, bottom } = img.<span class=\"hljs-title function_\">getBoundingClientRect</span>();\n      <span class=\"hljs-keyword\">if</span> (innerHeight &gt; top &amp;&amp; bottom &gt; -<span class=\"hljs-number\">30</span>) {\n        img.<span class=\"hljs-property\">src</span> = img.<span class=\"hljs-property\">dataset</span>.<span class=\"hljs-property\">src</span>;\n        <span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">deleteProperty</span>(img.<span class=\"hljs-property\">dataset</span>, <span class=\"hljs-string\">&#x27;src&#x27;</span>);\n      }\n    })\n  </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n</code></pre>\n"},{"title":"CSSå¤ä¹ -ç›’æ¨¡å‹","tags":["CSS"],"categories":"2021å¤ä¹ ","description":"> å¯ä»¥è®¤ä¸ºæ¯ä¸ªhtmlæ ‡ç­¾éƒ½æ˜¯ä¸€ä¸ªæ–¹å—ï¼Œç„¶åè¿™ä¸ªæ–¹å—åˆåŒ…ç€å‡ ä¸ªå°æ–¹å—ï¼Œå¦‚åŒç›’å­ä¸€å±‚å±‚çš„åŒ…è£¹ç€ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ç›’æ¨¡å‹ã€‚å®Œæ•´çš„ CSS ç›’æ¨¡å‹åº”ç”¨äºå—çº§ç›’å­ï¼Œå†…è”ç›’å­åªä½¿ç”¨ç›’æ¨¡å‹ä¸­å®šä¹‰çš„éƒ¨åˆ†å†…å®¹ã€‚æ¨¡å‹å®šä¹‰äº†ç›’çš„æ¯ä¸ªéƒ¨åˆ† â€”â€” margin, border, padding, and content â€”â€” åˆåœ¨ä¸€èµ·å°±å¯ä»¥åˆ›å»ºæˆ‘ä»¬åœ¨é¡µé¢ä¸Šçœ‹åˆ°çš„å†…å®¹ã€‚ä¸ºäº†å¢åŠ ä¸€äº›é¢å¤–çš„å¤æ‚æ€§ï¼Œæœ‰ä¸€ä¸ªæ ‡å‡†çš„å’Œæ›¿ä»£ï¼ˆIEï¼‰","createDate":"2021-05-25 02:33:01","updateDate":"2021-05-25 11:09:13","body":"<blockquote>\n<p>å¯ä»¥è®¤ä¸ºæ¯ä¸ªhtmlæ ‡ç­¾éƒ½æ˜¯ä¸€ä¸ªæ–¹å—ï¼Œç„¶åè¿™ä¸ªæ–¹å—åˆåŒ…ç€å‡ ä¸ªå°æ–¹å—ï¼Œå¦‚åŒç›’å­ä¸€å±‚å±‚çš„åŒ…è£¹ç€ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ç›’æ¨¡å‹ã€‚å®Œæ•´çš„ CSS ç›’æ¨¡å‹åº”ç”¨äºå—çº§ç›’å­ï¼Œå†…è”ç›’å­åªä½¿ç”¨ç›’æ¨¡å‹ä¸­å®šä¹‰çš„éƒ¨åˆ†å†…å®¹ã€‚æ¨¡å‹å®šä¹‰äº†ç›’çš„æ¯ä¸ªéƒ¨åˆ† â€”â€” margin, border, padding, and content â€”â€” åˆåœ¨ä¸€èµ·å°±å¯ä»¥åˆ›å»ºæˆ‘ä»¬åœ¨é¡µé¢ä¸Šçœ‹åˆ°çš„å†…å®¹ã€‚ä¸ºäº†å¢åŠ ä¸€äº›é¢å¤–çš„å¤æ‚æ€§ï¼Œæœ‰ä¸€ä¸ªæ ‡å‡†çš„å’Œæ›¿ä»£ï¼ˆIEï¼‰çš„ç›’æ¨¡å‹ã€‚</p>\n</blockquote>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/box-model.png\" alt=\"ç›’æ¨¡å‹\"></p>\n<p>ç›’æ¨¡å‹çš„å„ä¸ªéƒ¨åˆ†</p>\n<ul>\n<li>Contextï¼Œç”¨æ¥æ˜¾ç¤ºå†…å®¹ï¼Œå¯é€šè¿‡<code>width</code>å’Œ<code>height</code>æ¥è®¾ç½®å¤§å°</li>\n<li>Paddingï¼ŒåŒ…å›´åœ¨å†…å®¹åŒºåŸŸå¤–éƒ¨çš„ç©ºç™½åŒºåŸŸï¼Œå¯é€šè¿‡<code>padding</code>æ¥è®¾ç½®å¤§å°</li>\n<li>Borderï¼ŒåŒ…è£¹<code>Content</code>å’Œ<code>padding</code>ï¼Œå¯é€šè¿‡<code>border</code>æ¥è®¾ç½®</li>\n<li>Marginï¼Œæœ€å¤–é¢çš„åŒºåŸŸï¼Œæ˜¯ç›’å­å’Œå…¶ä»–å…ƒç´ ä¹‹é—´çš„ç©ºç™½åŒºåŸŸï¼Œé€šè¿‡<code>margin</code>æ¥è®¾ç½®</li>\n</ul>\n<h2 id=\"æ ‡å‡†ç›’æ¨¡å‹\">æ ‡å‡†ç›’æ¨¡å‹</h2>\n<p>åœ¨æ ‡å‡†ç›’æ¨¡å‹ä¸­ï¼Œå¦‚æœä½ ç»™ç›’è®¾ç½®<code>width</code>å’Œ<code>height</code>ï¼Œå®é™…ä¸Šè®¾ç½®çš„æ˜¯<code>Content</code>çš„å¤§å°ã€‚<code>padding</code>+<code>border</code>+<code>margin</code>å†åŠ ä¸Šè®¾ç½®çš„<code>width</code>å’Œ<code>height</code>æ‰æ˜¯ç›’å­çš„å¤§å°</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/box-model-1.png\" alt=\"æ ‡å‡†ç›’æ¨¡å‹\"></p>\n<h2 id=\"æ›¿ä»£ï¼ˆieï¼‰ç›’æ¨¡å‹\">æ›¿ä»£ï¼ˆIEï¼‰ç›’æ¨¡å‹</h2>\n<p>ä½ å¯èƒ½ä¼šè®¤ä¸ºç›’å­çš„å¤§å°è¿˜è¦åŠ ä¸Šè¾¹æ¡†å’Œå†…è¾¹è·ï¼Œè¿™æ ·å¾ˆéº»çƒ¦ï¼Œè€Œä¸”ä½ çš„æƒ³æ³•æ˜¯å¯¹çš„! å› ä¸ºè¿™ä¸ªåŸå› ï¼Œcssè¿˜æœ‰ä¸€ä¸ªæ›¿ä»£ç›’æ¨¡å‹ã€‚ä½¿ç”¨è¿™ä¸ªæ¨¡å‹ï¼Œæ‰€æœ‰å®½åº¦éƒ½æ˜¯å¯è§å®½åº¦ï¼Œæ‰€ä»¥å†…å®¹å®½åº¦æ˜¯è¯¥å®½åº¦å‡å»è¾¹æ¡†å’Œå¡«å……éƒ¨åˆ†ã€‚</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/box-model-2.png\" alt=\"æ ‡å‡†ç›’æ¨¡å‹\"></p>\n<p>é»˜è®¤æµè§ˆå™¨ä¼šä½¿ç”¨æ ‡å‡†æ¨¡å‹ã€‚å¦‚æœéœ€è¦ä½¿ç”¨æ›¿ä»£æ¨¡å‹ï¼Œæ‚¨å¯ä»¥é€šè¿‡ä¸ºå…¶è®¾ç½® <code>box-sizing: border-box</code> æ¥å®ç°ã€‚</p>\n<p>å¦‚æœä½ å¸Œæœ›æ‰€æœ‰å…ƒç´ éƒ½ä½¿ç”¨æ›¿ä»£æ¨¡å¼ï¼Œè€Œä¸”ç¡®å®å¾ˆå¸¸ç”¨ï¼Œè®¾ç½® box-sizing åœ¨<code>&lt;html&gt;</code>å…ƒç´ ä¸Šï¼Œç„¶åè®¾ç½®æ‰€æœ‰å…ƒç´ ç»§æ‰¿è¯¥å±æ€§</p>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-selector-tag\">html</span> {\n  <span class=\"hljs-attribute\">box-sizing</span>: border-box;\n}\n*, *<span class=\"hljs-selector-pseudo\">::before</span>, *<span class=\"hljs-selector-pseudo\">::after</span> {\n  <span class=\"hljs-attribute\">box-sizing</span>: inherit;\n}\n</code></pre>\n<h2 id=\"å¤–è¾¹æ¡†æŠ˜å \">å¤–è¾¹æ¡†æŠ˜å </h2>\n<p>å¦‚æœæœ‰ä¸¤ä¸ªå¤–è¾¹è·ç›¸æ¥çš„å…ƒç´ ï¼Œè¿™äº›å¤–è¾¹è·å°†åˆå¹¶ä¸ºä¸€ä¸ªå¤–è¾¹è·ï¼Œå³æœ€å¤§çš„å•ä¸ªå¤–è¾¹è·çš„å¤§å°</p>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Learn/CSS/Building_blocks/The_box_model\">ç›’æ¨¡å‹</a></p>\n<p><a href=\"https://juejin.cn/post/6844903505983963143\">CSSç›’æ¨¡å‹è¯¦è§£</a></p>\n"},{"title":"æµè§ˆå™¨å¤ä¹ -æ¶æ„","tags":["æµè§ˆå™¨æ¶æ„"],"categories":"2021å¤ä¹ ","description":"## æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„\n\næµè§ˆå™¨ä¸»è¦åŒ…å«ä»¥ä¸‹è¿›ç¨‹ï¼š\n\n- `browser`è¿›ç¨‹ï¼Œæµè§ˆå™¨çš„ä¸»è¿›ç¨‹ï¼Œè´Ÿè´£åè°ƒå„è¿›ç¨‹ï¼›æœ‰ä¸”åªæœ‰ä¸€ä¸ª\n    - è´Ÿè´£æµè§ˆå™¨ç•Œé¢çš„æ˜¾ç¤ºï¼Œä¸ç”¨æˆ·äº¤äº’ï¼ˆå‰è¿›/åé€€ç­‰ï¼‰\n    - è´Ÿè´£å„ä¸ªé¡µé¢çš„ç®¡ç†ï¼Œåˆ›å»ºå’Œé”€æ¯å…¶ä»–è¿›ç¨‹\n    - å°†`render`è¿›ç¨‹å¾—åˆ°çš„å†…å­˜ä¸­çš„ä½å›¾ç»˜åˆ¶åˆ°ç”¨æˆ·ç•Œé¢ä¸Š\n    - ç½‘ç»œèµ„æºçš„ä¸‹è½½ä¸ç®¡ç†ç­‰\n- ç¬¬ä¸‰æ–¹æ’ä»¶è¿›ç¨‹ï¼Œæ¯ç§ç±»å‹çš„æ’ä»¶å¯¹åº”ä¸€ä¸ªè¿›ç¨‹ï¼Œ","createDate":"2021-05-24 04:58:32","updateDate":"2021-05-24 22:02:57","body":"<h2 id=\"æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„\">æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„</h2>\n<p>æµè§ˆå™¨ä¸»è¦åŒ…å«ä»¥ä¸‹è¿›ç¨‹ï¼š</p>\n<ul>\n<li><code>browser</code>è¿›ç¨‹ï¼Œæµè§ˆå™¨çš„ä¸»è¿›ç¨‹ï¼Œè´Ÿè´£åè°ƒå„è¿›ç¨‹ï¼›æœ‰ä¸”åªæœ‰ä¸€ä¸ª<ul>\n<li>è´Ÿè´£æµè§ˆå™¨ç•Œé¢çš„æ˜¾ç¤ºï¼Œä¸ç”¨æˆ·äº¤äº’ï¼ˆå‰è¿›/åé€€ç­‰ï¼‰</li>\n<li>è´Ÿè´£å„ä¸ªé¡µé¢çš„ç®¡ç†ï¼Œåˆ›å»ºå’Œé”€æ¯å…¶ä»–è¿›ç¨‹</li>\n<li>å°†<code>render</code>è¿›ç¨‹å¾—åˆ°çš„å†…å­˜ä¸­çš„ä½å›¾ç»˜åˆ¶åˆ°ç”¨æˆ·ç•Œé¢ä¸Š</li>\n<li>ç½‘ç»œèµ„æºçš„ä¸‹è½½ä¸ç®¡ç†ç­‰</li>\n</ul>\n</li>\n<li>ç¬¬ä¸‰æ–¹æ’ä»¶è¿›ç¨‹ï¼Œæ¯ç§ç±»å‹çš„æ’ä»¶å¯¹åº”ä¸€ä¸ªè¿›ç¨‹ï¼Œä»…å½“ä½¿ç”¨è¯¥æ’ä»¶æ—¶åˆ›å»º</li>\n<li>GUIè¿›ç¨‹ï¼Œæœ€å¤šåªæœ‰ä¸€ä¸ªï¼Œç”¨æˆ·3Då›¾å½¢çš„ç»˜åˆ¶</li>\n<li><code>render</code>è¿›ç¨‹ï¼ˆæµè§ˆå™¨å†…æ ¸ï¼‰ï¼Œé»˜è®¤ä¸ºä¸€ä¸ªtabé¡µä¸€ä¸ªè¿›ç¨‹ï¼Œäº’ä¸å½±å“<ul>\n<li>é¡µé¢æ¸²æŸ“ï¼Œè„šæœ¬æ‰§è¡Œï¼Œäº‹ä»¶å¤„ç†ç­‰</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"æµè§ˆå™¨ä½¿ç”¨å¤šçº¿ç¨‹çš„ä¼˜åŠ¿\">æµè§ˆå™¨ä½¿ç”¨å¤šçº¿ç¨‹çš„ä¼˜åŠ¿</h2>\n<ul>\n<li>é¿å…å•ä¸ªpage crashåå½±å“åˆ°æ•´ä¸ªæµè§ˆå™¨</li>\n<li>é¿å…ç¬¬ä¸‰æ–¹æ’ä»¶crashåå½±å“åˆ°æ•´ä¸ªæµè§ˆå™¨</li>\n<li>å¤šè¿›ç¨‹å……åˆ†åˆ©ç”¨å¤šæ ¸cpuä¼˜åŠ¿</li>\n</ul>\n<h2 id=\"æµè§ˆå™¨å†…æ ¸ï¼ˆrenderè¿›ç¨‹ï¼‰\">æµè§ˆå™¨å†…æ ¸ï¼ˆrenderè¿›ç¨‹ï¼‰</h2>\n<p>æµè§ˆå™¨æ ¸å¿ƒï¼Œé¡µé¢æ¸²æŸ“ã€JavaScriptæ‰§è¡Œç­‰éƒ½åœ¨è¿™ä¸ªè¿›ç¨‹å†…æ‰§è¡Œï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹çº¿ç¨‹ï¼š</p>\n<ul>\n<li>æ¸²æŸ“çº¿ç¨‹\n  è´Ÿè´£æ¸²æŸ“é¡µé¢ã€‚è§£æhtmlæ„å»ºdomæ ‘ï¼Œè§£æcssæ„å»ºcssomæ ‘ï¼Œåˆå¹¶æˆä¸ºrenderæ ‘ï¼Œå¸ƒå±€ï¼Œç»˜åˆ¶ï¼Œåˆæˆç­‰ã€‚ä¸JavaScriptå¼•æ“äº’æ–¥</li>\n<li>JavaScriptå¼•æ“çº¿ç¨‹\n  è´Ÿè´£è§£é‡Šæ‰§è¡Œäº‹ä»¶å¾ªç¯é˜Ÿåˆ—ä¸­çš„JavaScriptä»£ç ã€‚ä¸æ¸²æŸ“çº¿ç¨‹äº’æ–¥</li>\n<li>äº‹ä»¶è§¦å‘çº¿ç¨‹\n  ä¸“æ³¨äºå¤„ç†event-loop</li>\n<li>å®šæ—¶å™¨è§¦å‘çº¿ç¨‹\n  <code>setTimeout</code>ä¸<code>setInteval</code></li>\n<li>å¼‚æ­¥httpè¯·æ±‚çº¿ç¨‹\n  å‘é€<code>http</code>è¯·æ±‚</li>\n</ul>\n<h2 id=\"ä¸€äº›é—®é¢˜\">ä¸€äº›é—®é¢˜</h2>\n<ul>\n<li><p>æ¸²æŸ“çº¿ç¨‹ä¸JavaScriptå¼•æ“çº¿ç¨‹äº’æ–¥ï¼Ÿ</p>\n<p>  ä¸ºäº†é˜²æ­¢åœ¨æ¸²æŸ“çº¿ç¨‹å·¥ä½œæ—¶JavaScriptä¿®æ”¹DOMé€ æˆæ˜¾ç¤ºå‡ºé”™çš„é—®é¢˜</p>\n</li>\n<li><p>CSSåŠ è½½ä¸ä¼šé˜»å¡DOMæ ‘æ„å»ºï¼Œä¼šé˜»å¡renderæ ‘æ„å»º</p>\n</li>\n<li></li>\n</ul>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://juejin.cn/post/6844903553795014663\">ä»æµè§ˆå™¨å¤šè¿›ç¨‹åˆ°JSå•çº¿ç¨‹ï¼ŒJSè¿è¡Œæœºåˆ¶æœ€å…¨é¢çš„ä¸€æ¬¡æ¢³ç†</a></p>\n"},{"title":"ç½‘ç»œå¤ä¹ -https","tags":["https"],"categories":"2021å¤ä¹ ","description":"> HTTPS ï¼ˆå®‰å…¨çš„HTTPï¼‰æ˜¯ HTTP åè®®çš„åŠ å¯†ç‰ˆæœ¬ã€‚å®ƒé€šå¸¸ä½¿ç”¨ SSL è€… TLS æ¥åŠ å¯†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´æ‰€æœ‰çš„é€šä¿¡ ã€‚è¿™å®‰å…¨çš„é“¾æ¥å…è®¸å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨å®‰å…¨åœ°äº¤æ¢æ•æ„Ÿçš„æ•°æ®ï¼Œä¾‹å¦‚ç½‘ä¸Šé“¶è¡Œæˆ–è€…åœ¨çº¿å•†åŸç­‰æ¶‰åŠé‡‘é’±çš„æ“ä½œã€‚\n\n![https](http://mrrsblog.oss-cn-shanghai.aliyuncs.com/https-5.png)\n\n## httpså’Œhttpçš„","createDate":"2021-05-24 06:39:38","updateDate":"2021-05-24 15:29:28","body":"<blockquote>\n<p>HTTPS ï¼ˆå®‰å…¨çš„HTTPï¼‰æ˜¯ HTTP åè®®çš„åŠ å¯†ç‰ˆæœ¬ã€‚å®ƒé€šå¸¸ä½¿ç”¨ SSL è€… TLS æ¥åŠ å¯†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´æ‰€æœ‰çš„é€šä¿¡ ã€‚è¿™å®‰å…¨çš„é“¾æ¥å…è®¸å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨å®‰å…¨åœ°äº¤æ¢æ•æ„Ÿçš„æ•°æ®ï¼Œä¾‹å¦‚ç½‘ä¸Šé“¶è¡Œæˆ–è€…åœ¨çº¿å•†åŸç­‰æ¶‰åŠé‡‘é’±çš„æ“ä½œã€‚</p>\n</blockquote>\n<p><img src=\"http://mrrsblog.oss-cn-shanghai.aliyuncs.com/https-5.png\" alt=\"https\"></p>\n<h2 id=\"httpså’Œhttpçš„åŒºåˆ«\">httpså’Œhttpçš„åŒºåˆ«</h2>\n<ul>\n<li>httpæ˜¯æ˜æ–‡ä¼ è¾“ï¼Œhttpsä½¿ç”¨ssl/tslåŠ å¯†ä¼ è¾“</li>\n<li>httpçš„ç«¯å£æ˜¯80ï¼Œhttpsçš„ç«¯å£æ˜¯443</li>\n<li>httpséœ€è¦caè¯ä¹¦</li>\n</ul>\n<h2 id=\"ä¸ºä»€ä¹ˆéœ€è¦https\">ä¸ºä»€ä¹ˆéœ€è¦https</h2>\n<p><strong>å®‰å…¨</strong></p>\n<h2 id=\"httpsçš„åŸç†\">httpsçš„åŸç†</h2>\n<p>ç®€å•æ¥è®²httpsçš„å‘å±•è¿‡ç¨‹æ˜¯ï¼šhttp -&gt; å¯¹ç§°åŠ å¯† -&gt; éå¯¹ç§°åŠ å¯† -&gt; æ··åˆåŠ å¯† -&gt; CAè¯ä¹¦</p>\n<h2 id=\"å¯¹ç§°åŠ å¯†\">å¯¹ç§°åŠ å¯†</h2>\n<p>httpçš„é€šä¿¡æ˜¯æ˜æ–‡çš„ï¼Œç›¸å½“äºåœ¨ç½‘ç»œä¸Šè£¸å¥”ï¼Œä»»ä½•äººæˆ–ç»„ç»‡éƒ½å¯ä»¥ç›‘å¬ã€çª¥æ¢æ•°æ®ï¼Œå®‰å…¨æ€§è¾ƒå·®ï¼Œæ­¤æ—¶å¯¹ç§°åŠ å¯†å‡ºç°äº†ï¼šæ¯æ¬¡ä¼ è¾“ä¹‹å‰ï¼Œå‘é€æ–¹ç”¨ä¸€ä¸ªåŠ å¯†ç®—æ³•åŠ å¯†ï¼Œç„¶åå†å‘é€ï¼›æ¥æ”¶æ–¹ä½¿ç”¨åŠ å¯†ç®—æ³•å¯¹åº”çš„å¯†é’¥è¿›è¡Œè§£å¯†ã€‚å› ä¸ºåŠ å¯†/è§£å¯†ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªå¯†é’¥ï¼Œå› æ­¤ç§°ä¸ºå¯¹ç§°åŠ å¯†</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/https-0.png\" alt=\"å¯¹ç§°åŠ å¯†\"></p>\n<p>å¼Šç«¯ï¼š<strong>å¯†é’¥å®¹æ˜“è¢«æˆªå–</strong></p>\n<h2 id=\"éå¯¹ç§°åŠ å¯†\">éå¯¹ç§°åŠ å¯†</h2>\n<p>ä½¿ç”¨éå¯¹ç§°åŠ å¯†çš„åŒæ–¹éƒ½æœ‰ä¸€å¯¹å¯†é’¥ï¼šç§é’¥ï¼ˆä¿å¯†ï¼‰ã€å…¬é’¥ï¼ˆå…¬å¼€ï¼‰ã€‚ä½¿ç”¨å…¬é’¥åŠ å¯†çš„æ•°æ®åªæœ‰å¯¹åº”çš„ç§é’¥æ‰èƒ½è§£å¯†ï¼›</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/https-1.png\" alt=\"éå¯¹ç§°åŠ å¯†\"></p>\n<p>å¼Šç«¯ï¼š<strong>é€Ÿåº¦è¾ƒæ…¢ï¼Œç›¸è¾ƒäºå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œéå¯¹ç§°åŠ å¯†ç®—æ³•çš„é€Ÿåº¦è¦æ…¢ä¸Šç™¾å€</strong></p>\n<h2 id=\"æ··åˆåŠ å¯†ï¼ˆéå¯¹ç§°åŠ å¯†å¯¹ç§°åŠ å¯†ï¼‰\">æ··åˆåŠ å¯†ï¼ˆéå¯¹ç§°åŠ å¯†+å¯¹ç§°åŠ å¯†ï¼‰</h2>\n<p>ä½¿ç”¨éå¯¹ç§°å¯†é’¥åŠ å¯†å¯¹ç§°å¯†é’¥çš„å¯†é’¥ï¼Œç„¶åä½¿ç”¨å¯¹ç§°åŠ å¯†é€šä¿¡</p>\n<p>å¼Šç«¯ï¼šè¿˜æ˜¯ä¸èƒ½ç¡®ä¿æ¥æ”¶äººçš„èº«ä»½ï¼Œå®¹æ˜“å—åˆ°<strong>ä¸­é—´äººæ”»å‡»</strong></p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/https-2.png\" alt=\"ä¸­é—´äººæ”»å‡»\"></p>\n<h2 id=\"caè¯ä¹¦\">CAè¯ä¹¦</h2>\n<p>è§£å†³ä¸­é—´äººæ”»å‡»ã€‚ç›¸å½“äºä¸€ä¸ªå…¬è¯å¤„ï¼Œæ‰€æœ‰æœåŠ¡å™¨å‡éœ€è¦åœ¨æœºæ„æ³¨å†Œå¤‡æ¡ˆï¼Œç„¶åæœºæ„ä¼šæ´¾å‘ä¸€ä¸ªCAè¯ä¹¦æ¥è¡¨ç¤ºè¯¥æœåŠ¡å™¨æ˜¯å®‰å…¨çš„</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/https-4.png\" alt=\"httpsä¼ è¾“æµç¨‹\"></p>\n<p>åœ¨ç¬¬ä¸‰æ­¥æµè§ˆå™¨æ ¡éªŒè¯ä¹¦æ—¶ï¼šæµè§ˆå™¨ä¼šæ ¹æ®è‡ªèº«ä¿å­˜çš„CAå…¬é’¥æ¥éªŒè¯æœåŠ¡å™¨çš„èº«ä»½</p>\n<p><img src=\"http://mrrsblog.oss-cn-shanghai.aliyuncs.com/https-ca.png\" alt=\"caè¯ä¹¦éªŒè¯æµç¨‹\"></p>\n"},{"title":"å‰ç«¯æ¶æ„&è½¯å®åŠ›å¤ä¹ -ç§»åŠ¨ç«¯é€‚é…","tags":["ç§»åŠ¨ç«¯é€‚é…"],"categories":"2021å¤ä¹ ","description":"## ç§»åŠ¨ç«¯é€‚é…çš„å…·ä½“å«ä¹‰\n\nä¸ºäº†åœ¨ç§»åŠ¨ç«¯è®©é¡µé¢è·å¾—æ›´å¥½çš„æ˜¾ç¤ºæ•ˆæœï¼Œæˆ‘ä»¬å¿…é¡»è®©**å¸ƒå±€è§†å£(å®½åº¦)=è§†è§‰è§†å£(å®½åº¦)=ç†æƒ³è§†å£(å®½åº¦)**ã€‚ä½†ä¸€èˆ¬æƒ…å†µä¸‹å®ƒä»¬å¹¶ä¸ä¸€è‡´ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ¡ˆ ~~(rem+vw)~~ æ¥è®©è®¾è®¡ç¨¿å¾—åˆ°æ›´å®Œç¾çš„é€‚é…ã€‚\n\n## ä¸‰ä¸ªè§†å£\n\n### å¸ƒå±€è§†å£\n\n![å¸ƒå±€è§†å£](https://mrrsblog.oss-cn-shanghai.aliyuncs.com/la","createDate":"2021-05-18 14:06:04","updateDate":"2021-05-18 23:21:35","body":"<h2 id=\"ç§»åŠ¨ç«¯é€‚é…çš„å…·ä½“å«ä¹‰\">ç§»åŠ¨ç«¯é€‚é…çš„å…·ä½“å«ä¹‰</h2>\n<p>ä¸ºäº†åœ¨ç§»åŠ¨ç«¯è®©é¡µé¢è·å¾—æ›´å¥½çš„æ˜¾ç¤ºæ•ˆæœï¼Œæˆ‘ä»¬å¿…é¡»è®©**å¸ƒå±€è§†å£(å®½åº¦)=è§†è§‰è§†å£(å®½åº¦)=ç†æƒ³è§†å£(å®½åº¦)**ã€‚ä½†ä¸€èˆ¬æƒ…å†µä¸‹å®ƒä»¬å¹¶ä¸ä¸€è‡´ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ¡ˆ <del>(rem+vw)</del> æ¥è®©è®¾è®¡ç¨¿å¾—åˆ°æ›´å®Œç¾çš„é€‚é…ã€‚</p>\n<h2 id=\"ä¸‰ä¸ªè§†å£\">ä¸‰ä¸ªè§†å£</h2>\n<h3 id=\"å¸ƒå±€è§†å£\">å¸ƒå±€è§†å£</h3>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/layout_viewport.png\" alt=\"å¸ƒå±€è§†å£\"></p>\n<p>å¸ƒå±€è§†å£(<code>layout viewport</code>):å½“æˆ‘ä»¬ä»¥ç™¾åˆ†æ¯”æ¥ä¹‹å½“ä¸€ä¸ªå…ƒç´ çš„å¤§å°æ—¶ï¼Œå®ƒçš„è®¡ç®—å€¼æ˜¯ç”±è¿™ä¸ªå…ƒç´ çš„åŒ…å«å—è®¡ç®—è€Œæ¥çš„ã€‚å½“è¿™ä¸ªå…ƒç´ æ˜¯æœ€é¡¶çº§çš„å…ƒç´ æ—¶ï¼Œå®ƒå°±æ˜¯åŸºäºå¸ƒå±€è§†å£æ¥è®¡ç®—çš„ã€‚</p>\n<p>æ‰€ä»¥ï¼Œå¸ƒå±€è§†å£æ˜¯ç½‘é¡µå¸ƒå±€çš„åŸºå‡†çª—å£ï¼Œåœ¨PCæµè§ˆå™¨ä¸Šï¼Œå¸ƒå±€è§†å£å°±ç­‰äºå½“å‰æµè§ˆå™¨çš„çª—å£å¤§å°ï¼ˆä¸åŒ…å«æ»šåŠ¨æ¡ã€æ ‡ç­¾æ ç­‰ï¼‰</p>\n<p>åœ¨ç§»åŠ¨ç«¯ï¼Œå¸ƒå±€è§†å£è¢«èµ‹äºˆä¸€ä¸ªé»˜è®¤å€¼ï¼Œå¤§éƒ¨åˆ†æ˜¯<strong>980px</strong>ï¼Œè¿™ä¿è¯PCçš„ç½‘é¡µå¯ä»¥åœ¨æ‰‹æœºæµè§ˆå™¨ä¸Šå‘ˆç°ï¼Œä½†æ˜¯éå¸¸å°ï¼Œç”¨æˆ·å¯ä»¥æ‰‹åŠ¨å¯¹ç½‘é¡µè¿›è¡Œæ”¾å¤§</p>\n<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>document.documentElement.clientWidth/clientWidth</code>æ¥è·å–å¸ƒå±€è§†å£çš„å¤§å°</p>\n<h3 id=\"è§†è§‰è§†å£\">è§†è§‰è§†å£</h3>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/visual_viewport.png\" alt=\"è§†è§‰è§†å£\"></p>\n<p>è§†è§‰è§†å£(<code>visual viewport</code>): ç”¨æˆ·é€šè¿‡å±å¹•çœŸæ˜¯çœ‹åˆ°çš„åŒºåŸŸ</p>\n<p>è§†è§‰è§†å£é»˜è®¤ç­‰äºå½“å‰æµè§ˆå™¨çš„çª—å£å¤§å°ï¼ˆåŒ…æ‹¬æ»šåŠ¨æ¡ç­‰ï¼‰</p>\n<p>å½“ç”¨æˆ·å¯¹æµè§ˆå™¨è¿›è¡Œç¼©æ”¾æ—¶ï¼Œä¸ä¼šæ”¹å˜å¸ƒå±€è§†å£çš„å¤§å°ï¼Œæ‰€ä»¥é¡µé¢å¸ƒå±€æ˜¯ä¸å˜çš„ï¼Œä½†æ˜¯<strong>ç¼©æ”¾ä¼šæ”¹å˜è§†è§‰è§†å£çš„å¤§å°</strong></p>\n<p>ä¾‹å¦‚ï¼šç”¨æˆ·å°†æµè§ˆå™¨çª—å£æ”¾å¤§äº†200%ï¼Œè¿™æ—¶æµè§ˆå™¨çª—å£ä¸­çš„CSSåƒç´ ä¼šéšç€è§†è§‰è§†å£çš„æ”¾å¤§è€Œæ”¾å¤§ï¼Œè¿™æ—¶ä¸€ä¸ªCSSåƒç´ ä¼šè·¨åŸŸæ›´å¤šçš„ç‰©ç†åƒç´ </p>\n<p>æ‰€ä»¥ï¼Œå¸ƒå±€è§†å£ä¼šé™åˆ¶ä½ çš„CSSå¸ƒå±€ï¼Œè€Œè§†è§‰è§†å£å†³å®šç€ç”¨æˆ·å…·ä½“èƒ½çœ‹åˆ°ä»€ä¹ˆ</p>\n<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>window.innerWidth/innerHeight</code>æ¥è·å–è§†è§‰è§†å£çš„å¤§å°</p>\n<h3 id=\"ç†æƒ³è§†å£\">ç†æƒ³è§†å£</h3>\n<p>å¸ƒå±€è§†å£åœ¨ç§»åŠ¨ç«¯å±•ç¤ºçš„æ•ˆæœå¹¶ä¸æ˜¯ä¸€ä¸ªç†æƒ³çš„æ•ˆæœï¼Œæ‰€ä»¥ç†æƒ³è§†å£(<code>ideal viewport</code>)å°±è¯ç”Ÿäº†ï¼šç½‘é¡µåœ¨ç§»åŠ¨ç«¯å±•ç¤ºçš„ç†æƒ³å¤§å°=è®¾å¤‡ç‹¬ç«‹åƒç´ </p>\n<p>å½“é¡µé¢ç¼©æ”¾æ¯”ä¾‹ä¸º100%æ—¶ï¼Œ<strong>CSSåƒç´ =è®¾å¤‡ç‹¬ç«‹åƒç´ ï¼Œç†æƒ³è§†å£=è§†è§‰è§†å£</strong></p>\n<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨<code>screen.width/height</code>æ¥è·å¾—ç†æƒ³è§†å£çš„å¤§å°</p>\n<h2 id=\"meta-viewport\">meta viewport</h2>\n<p><code>meta</code>å…ƒç´ å¯æä¾›ç›¸å…³é¡µé¢çš„å…ƒä¿¡æ¯ï¼ˆmeta-informationï¼‰ï¼Œæ¯”å¦‚é’ˆå¯¹æœç´¢å¼•æ“å’Œæ›´æ–°é¢‘åº¦çš„æè¿°å’Œå…³é”®è¯ã€‚</p>\n<p>æˆ‘ä»¬å¯ä»¥å€ŸåŠ©<code>meta</code>å…ƒç´ çš„<code>viewport</code>æ¥å¸®åŠ©æˆ‘ä»¬è®¾ç½®è§†å£ã€ç¼©æ”¾ç­‰ï¼Œä»è€Œè®©ç§»åŠ¨ç«¯å¾—åˆ°æ›´å¥½çš„å±•ç¤ºæ•ˆæœ</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;viewport&quot;</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">&quot;with=device-width; initial-scale=1; maxomum-scale=1; minmum-scale=1; user-scale=no;&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">meta</span>&gt;</span>\n</code></pre>\n<p><code>device-width</code>å°±æ˜¯ç†æƒ³è§†å£çš„å®½åº¦ï¼Œ<code>with=device-width</code>å°±ç›¸å½“äºè®©å¸ƒå±€è§†å£ç­‰äºç†æƒ³è§†å£</p>\n<p>ç”±äº<code>initial-scale = ç†æƒ³è§†å£å®½åº¦  / è§†è§‰è§†å£å®½åº¦</code>ï¼Œæ‰€ä»¥è®¾ç½®<code>initial-scale=1</code>å°±ç›¸å½“äºè®©è§†è§‰è§†å£ç­‰äºç†æƒ³è§†å£</p>\n<p>è¿™æ—¶ï¼Œ1ä¸ªCSSåƒç´ å°±ç­‰äºä¸€ä¸ªè®¾å¤‡ç‹¬ç«‹åƒç´ ï¼Œè€Œä¸”æˆ‘ä»¬ä¹Ÿæ˜¯åŸºäºç†æƒ³è§†å£æ¥è¿›è¡Œå¸ƒå±€çš„ï¼Œæ‰€ä»¥å‘ˆç°å‡ºæ¥çš„é¡µé¢å¸ƒå±€åœ¨å„ç§è®¾å¤‡ä¸Šéƒ½èƒ½å¤§è‡´ç›¸ä¼¼</p>\n<h2 id=\"rem--vwé€‚é…\"><del>rem + vwé€‚é…</del></h2>\n<p>çªç„¶å†™ä¸ä¸‹å»äº†ï¼Œä¸åŒå±å¹•ä¸‹åº”è¯¥æ˜¾ç¤ºä¸åŒçš„å†…å®¹ï¼Œ<strong>å±å¹•å¤§åº”è¯¥æ˜¯æ˜¾ç¤ºæ›´å¤šçš„uiè€Œä¸æ˜¯æ›´å¤§çš„ui</strong>ã€‚ç­‰çœ‹åˆ°ç‰›é€¼çš„æ–‡ç« å†å›æ¥è¡¥å……</p>\n"},{"title":"æµè§ˆå™¨ç›¸å…³-å®‰å…¨","tags":["å®‰å…¨"],"categories":"æµè§ˆå™¨","description":"## XSS\n\nXSS(cross-site scripting)ï¼Œè·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆç¼©å†™å’ŒCSSé‡å ï¼Œæ‰€ä»¥ç§°ä¹‹ä¸ºXSSï¼‰ã€‚XSSæŒ‡çš„æ˜¯é€šè¿‡å­˜åœ¨å®‰å…¨æ¼æ´çš„webç½‘ç«™æ³¨å†Œç”¨æˆ·çš„**æµè§ˆå™¨**å†…**è‡ªåŠ¨è¿è¡Œéæ³•çš„HTMLæ ‡ç­¾æˆ–JavaScript**è¿›è¡Œçš„ä¸€ç§æ”»å‡»\n\nå¦‚æœ Web åº”ç”¨ç¨‹åºæ²¡æœ‰éƒ¨ç½²è¶³å¤Ÿçš„å®‰å…¨éªŒè¯ï¼Œé‚£ä¹ˆï¼Œè¿™äº›æ”»å‡»å¾ˆå®¹æ˜“æˆåŠŸã€‚æµè§ˆå™¨æ— æ³•æ¢æµ‹åˆ°è¿™äº›æ¶æ„è„šæœ¬æ˜¯ä¸å¯ä¿¡çš„ï¼Œæ‰€ä»¥ï¼Œè¿™äº›è„šæœ¬å¯ä»¥ä»»æ„è¯»","createDate":"2020-04-08 23:15:51","updateDate":"2021-05-16 22:46:58","body":"<h2 id=\"xss\">XSS</h2>\n<p>XSS(cross-site scripting)ï¼Œè·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆç¼©å†™å’ŒCSSé‡å ï¼Œæ‰€ä»¥ç§°ä¹‹ä¸ºXSSï¼‰ã€‚XSSæŒ‡çš„æ˜¯é€šè¿‡å­˜åœ¨å®‰å…¨æ¼æ´çš„webç½‘ç«™æ³¨å†Œç”¨æˆ·çš„<strong>æµè§ˆå™¨</strong>å†…<strong>è‡ªåŠ¨è¿è¡Œéæ³•çš„HTMLæ ‡ç­¾æˆ–JavaScript</strong>è¿›è¡Œçš„ä¸€ç§æ”»å‡»</p>\n<p>å¦‚æœ Web åº”ç”¨ç¨‹åºæ²¡æœ‰éƒ¨ç½²è¶³å¤Ÿçš„å®‰å…¨éªŒè¯ï¼Œé‚£ä¹ˆï¼Œè¿™äº›æ”»å‡»å¾ˆå®¹æ˜“æˆåŠŸã€‚æµè§ˆå™¨æ— æ³•æ¢æµ‹åˆ°è¿™äº›æ¶æ„è„šæœ¬æ˜¯ä¸å¯ä¿¡çš„ï¼Œæ‰€ä»¥ï¼Œè¿™äº›è„šæœ¬å¯ä»¥ä»»æ„è¯»å– cookieï¼Œsession tokensï¼Œæˆ–è€…å…¶å®ƒæ•æ„Ÿçš„ç½‘ç«™ä¿¡æ¯ï¼Œæˆ–è€…è®©æ¶æ„è„šæœ¬é‡å†™<a href=\"https://developer.mozilla.org/en-US/docs/Glossary/HTML\">HTML</a>å†…å®¹ã€‚</p>\n<p>XSSå¯èƒ½ä¼šé€ æˆä»¥ä¸‹å½±å“ï¼š</p>\n<ul>\n<li>åˆ©ç”¨è™šå‡è¡¨å•éª—å–ç”¨æˆ·ä¸ªäººä¿¡æ¯</li>\n<li>åˆ©ç”¨è„šæœ¬çªƒå–ç”¨æˆ·çš„cookieå€¼ï¼Œè¢«å®³è€…åœ¨ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹å¸®åŠ©æ”»å‡»è€…å‘é€æ¶æ„è¯·æ±‚</li>\n<li>æ˜¾ç¤ºä¼ªé€ çš„æ–‡ç« æˆ–å›¾ç‰‡</li>\n</ul>\n<h3 id=\"å­˜å‚¨å‹xss\">å­˜å‚¨å‹XSS</h3>\n<p>æ³¨å…¥å‹è„šæœ¬æ°¸ä¹…<strong>å­˜å‚¨åœ¨ç›®æ ‡æœåŠ¡å™¨ä¸Š</strong>ã€‚å½“æµè§ˆå™¨è¯·æ±‚æ•°æ®æ—¶ï¼Œè„šæœ¬ä»æœåŠ¡å™¨ä¸Šä¼ å›å¹¶æ‰§è¡Œã€‚</p>\n<h3 id=\"åå°„æ€§xss\">åå°„æ€§XSS</h3>\n<p>å½“<strong>ç”¨æˆ·ç‚¹å‡»</strong>ä¸€ä¸ªæ¶æ„é“¾æ¥ï¼Œæˆ–è€…æäº¤ä¸€ä¸ªè¡¨å•ï¼Œæˆ–è€…è¿›å…¥ä¸€ä¸ªæ¶æ„ç½‘ç«™æ—¶ï¼Œæ³¨å…¥è„šæœ¬è¿›å…¥è¢«æ”»å‡»è€…çš„ç½‘ç«™ã€‚WebæœåŠ¡å™¨å°†æ³¨å…¥è„šæœ¬ï¼Œæ¯”å¦‚ä¸€ä¸ªé”™è¯¯ä¿¡æ¯ï¼Œæœç´¢ç»“æœç­‰ è¿”å›åˆ°ç”¨æˆ·çš„æµè§ˆå™¨ä¸Šã€‚ç”±äºæµè§ˆå™¨è®¤ä¸ºè¿™ä¸ªå“åº”æ¥è‡ª&quot;å¯ä¿¡ä»»&quot;çš„æœåŠ¡å™¨ï¼Œæ‰€ä»¥ä¼šæ‰§è¡Œè¿™æ®µè„šæœ¬ã€‚</p>\n<h3 id=\"å¦‚ä½•é˜²å¾¡\">å¦‚ä½•é˜²å¾¡</h3>\n<ul>\n<li><p>CSP</p>\n<p>å»ºç«‹ç™½åå•ï¼Œæ˜ç¡®å‘Šè¯‰æµè§ˆå™¨é‚£äº›å¤–éƒ¨èµ„æºå¯ä»¥è¿›è¡ŒåŠ è½½å’Œæ‰§è¡Œã€‚</p>\n<ol>\n<li><p>è®¾ç½®<code>HTTP Header</code>ä¸­çš„<code>Content-Security-Policy</code></p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-comment\">&lt;!-- åªå…è®¸åŠ è½½æœ¬ç«™èµ„æº --&gt;</span>\nContent-Security-Policy: default-src &#x27;self&#x27;\n\n<span class=\"hljs-comment\">&lt;!-- åªå…è®¸åŠ è½½HTTPSå›¾ç‰‡ --&gt;</span>\nContent-Security-Policy: img-src https://*\n</code></pre>\n</li>\n<li><p>è®¾ç½®<code>meta</code>æ ‡ç­¾</p>\n</li>\n</ol>\n</li>\n<li><p>è½¬ä¹‰å­—ç¬¦</p>\n<p>å¯¹å¼•å·ã€å°–æ‹¬å·ã€æ–œæ è¿›è¡Œè½¬ä¹‰</p>\n</li>\n<li><p>httponly cookie</p>\n<p>è¿™æ˜¯é¢„é˜²XSSæ”»å‡»çªƒå–ç”¨æˆ·cookieæœ€æœ‰æ•ˆçš„é˜²å¾¡æ‰‹æ®µã€‚Webåº”ç”¨ç¨‹åºåœ¨è®¾ç½®cookieæ—¶ï¼Œå°†å…¶å±æ€§è®¾ä¸ºHttpOnlyï¼Œå°±å¯ä»¥é¿å…è¯¥ç½‘é¡µçš„cookieè¢«å®¢æˆ·ç«¯æ¶æ„JavaScriptçªƒå–ï¼Œä¿æŠ¤ç”¨æˆ·cookieä¿¡æ¯</p>\n</li>\n</ul>\n<h2 id=\"csrf\">CSRF</h2>\n<p>CSRF(Cross Site Request Forgery)ï¼Œå³è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼Œæ˜¯ä¸€ç§å¸¸è§çš„Webæ”»å‡»ï¼Œå®ƒåˆ©ç”¨ç”¨æˆ·å·²ç™»å½•çš„èº«ä»½ï¼Œåœ¨ç”¨æˆ·æ¯«ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹ï¼Œä»¥ç”¨æˆ·çš„åä¹‰å®Œæˆéæ³•æ“ä½œã€‚</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/csrf.png\" alt=\"CSRFåŸç†\"></p>\n<h3 id=\"å¦‚ä½•é˜²å¾¡-1\">å¦‚ä½•é˜²å¾¡</h3>\n<p>é˜²èŒƒ CSRF æ”»å‡»å¯ä»¥éµå¾ªä»¥ä¸‹å‡ ç§è§„åˆ™ï¼š</p>\n<ul>\n<li>Get è¯·æ±‚ä¸å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹</li>\n<li>ä¸è®©ç¬¬ä¸‰æ–¹ç½‘ç«™è®¿é—®åˆ°ç”¨æˆ· Cookie</li>\n<li>é˜»æ­¢ç¬¬ä¸‰æ–¹ç½‘ç«™è¯·æ±‚æ¥å£</li>\n<li>è¯·æ±‚æ—¶é™„å¸¦éªŒè¯ä¿¡æ¯ï¼Œæ¯”å¦‚éªŒè¯ç æˆ–è€… Token</li>\n</ul>\n<ol>\n<li><p>samesite</p>\n<p>å¯ä»¥å¯¹ Cookie è®¾ç½® SameSite å±æ€§ã€‚è¯¥å±æ€§è¡¨ç¤º <strong>Cookie ä¸éšç€è·¨åŸŸè¯·æ±‚å‘é€</strong>ï¼Œå¯ä»¥å¾ˆå¤§ç¨‹åº¦å‡å°‘ CSRF çš„æ”»å‡»ï¼Œä½†æ˜¯è¯¥å±æ€§ç›®å‰å¹¶ä¸æ˜¯æ‰€æœ‰æµè§ˆå™¨éƒ½å…¼å®¹ã€‚</p>\n</li>\n<li><p>referer check</p>\n<p>HTTP Refereræ˜¯headerçš„ä¸€éƒ¨åˆ†ï¼Œå½“æµè§ˆå™¨å‘webæœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œä¸€èˆ¬ä¼šå¸¦ä¸ŠRefererä¿¡æ¯å‘Šè¯‰æœåŠ¡å™¨æ˜¯ä»å“ªä¸ªé¡µé¢é“¾æ¥è¿‡æ¥çš„ï¼ŒæœåŠ¡å™¨ç±æ­¤å¯ä»¥è·å¾—ä¸€äº›ä¿¡æ¯ç”¨äºå¤„ç†ã€‚å¯ä»¥é€šè¿‡æ£€æŸ¥è¯·æ±‚çš„æ¥æºæ¥é˜²å¾¡CSRFæ”»å‡»ã€‚æ­£å¸¸è¯·æ±‚çš„refererå…·æœ‰ä¸€å®šè§„å¾‹ï¼Œå¦‚åœ¨æäº¤è¡¨å•çš„refererå¿…å®šæ˜¯åœ¨è¯¥é¡µé¢å‘èµ·çš„è¯·æ±‚ã€‚æ‰€ä»¥<strong>é€šè¿‡æ£€æŸ¥httpåŒ…å¤´refererçš„å€¼æ˜¯ä¸æ˜¯è¿™ä¸ªé¡µé¢ï¼Œæ¥åˆ¤æ–­æ˜¯ä¸æ˜¯CSRFæ”»å‡»</strong>ã€‚</p>\n<p>ä½†åœ¨æŸäº›æƒ…å†µä¸‹å¦‚ä»httpsè·³è½¬åˆ°httpï¼Œæµè§ˆå™¨å¤„äºå®‰å…¨è€ƒè™‘ï¼Œä¸ä¼šå‘é€refererï¼ŒæœåŠ¡å™¨å°±æ— æ³•è¿›è¡Œcheckäº†ã€‚è‹¥ä¸è¯¥ç½‘ç«™åŒåŸŸçš„å…¶ä»–ç½‘ç«™æœ‰XSSæ¼æ´ï¼Œé‚£ä¹ˆæ”»å‡»è€…å¯ä»¥åœ¨å…¶ä»–ç½‘ç«™æ³¨å…¥æ¶æ„è„šæœ¬ï¼Œå—å®³è€…è¿›å…¥äº†æ­¤ç±»åŒåŸŸçš„ç½‘å€ï¼Œä¹Ÿä¼šé­å—æ”»å‡»ã€‚å‡ºäºä»¥ä¸ŠåŸå› ï¼Œæ— æ³•å®Œå…¨ä¾èµ–Referer Checkä½œä¸ºé˜²å¾¡CSRFçš„ä¸»è¦æ‰‹æ®µã€‚ä½†æ˜¯å¯ä»¥é€šè¿‡Referer Checkæ¥ç›‘æ§CSRFæ”»å‡»çš„å‘ç”Ÿã€‚</p>\n</li>\n<li><p>anti CSRF token</p>\n<p>ç›®å‰æ¯”è¾ƒå®Œå–„çš„è§£å†³æ–¹æ¡ˆæ˜¯åŠ å…¥Anti-CSRF-Tokenã€‚å³å‘é€è¯·æ±‚æ—¶åœ¨HTTP è¯·æ±‚ä¸­ä»¥å‚æ•°çš„å½¢å¼åŠ å…¥ä¸€ä¸ªéšæœºäº§ç”Ÿçš„tokenï¼Œå¹¶åœ¨æœåŠ¡å™¨å»ºç«‹ä¸€ä¸ªæ‹¦æˆªå™¨æ¥éªŒè¯è¿™ä¸ªtokenã€‚æœåŠ¡å™¨è¯»å–æµè§ˆå™¨å½“å‰åŸŸcookieä¸­è¿™ä¸ªtokenå€¼ï¼Œä¼šè¿›è¡Œæ ¡éªŒè¯¥è¯·æ±‚å½“ä¸­çš„tokenå’Œcookieå½“ä¸­çš„tokenå€¼æ˜¯å¦éƒ½å­˜åœ¨ä¸”ç›¸ç­‰ï¼Œæ‰è®¤ä¸ºè¿™æ˜¯åˆæ³•çš„è¯·æ±‚ã€‚å¦åˆ™è®¤ä¸ºè¿™æ¬¡è¯·æ±‚æ˜¯è¿æ³•çš„ï¼Œæ‹’ç»è¯¥æ¬¡æœåŠ¡ã€‚</p>\n<p><strong>è¿™ç§æ–¹æ³•ç›¸æ¯”Refereræ£€æŸ¥è¦å®‰å…¨å¾ˆå¤š</strong>ï¼Œtokenå¯ä»¥åœ¨ç”¨æˆ·ç™»é™†åäº§ç”Ÿå¹¶æ”¾äºsessionæˆ–cookieä¸­ï¼Œç„¶ååœ¨æ¯æ¬¡è¯·æ±‚æ—¶æœåŠ¡å™¨æŠŠtokenä»sessionæˆ–cookieä¸­æ‹¿å‡ºï¼Œä¸æœ¬æ¬¡è¯·æ±‚ä¸­çš„token è¿›è¡Œæ¯”å¯¹ã€‚ç”±äºtokençš„å­˜åœ¨ï¼Œæ”»å‡»è€…æ— æ³•å†æ„é€ å‡ºä¸€ä¸ªå®Œæ•´çš„URLå®æ–½CSRFæ”»å‡»ã€‚ä½†åœ¨å¤„ç†å¤šä¸ªé¡µé¢å…±å­˜é—®é¢˜æ—¶ï¼Œå½“æŸä¸ªé¡µé¢æ¶ˆè€—æ‰tokenåï¼Œå…¶ä»–é¡µé¢çš„è¡¨å•ä¿å­˜çš„è¿˜æ˜¯è¢«æ¶ˆè€—æ‰çš„é‚£ä¸ªtokenï¼Œå…¶ä»–é¡µé¢çš„è¡¨å•æäº¤æ—¶ä¼šå‡ºç°tokené”™è¯¯ã€‚</p>\n</li>\n<li><p>éªŒè¯ç </p>\n<p>åœ¨å…³é”®ä¸šåŠ¡ç‚¹è®¾ç½®éªŒè¯ç </p>\n</li>\n</ol>\n<h2 id=\"ç‚¹å‡»åŠ«æŒ\">ç‚¹å‡»åŠ«æŒ</h2>\n<p>ç‚¹å‡»åŠ«æŒæ˜¯ä¸€ç§è§†è§‰æ¬ºéª—çš„æ”»å‡»æ‰‹æ®µã€‚æ”»å‡»è€…å°†éœ€è¦æ”»å‡»çš„ç½‘ç«™é€šè¿‡ <strong>iframe</strong> åµŒå¥—çš„æ–¹å¼åµŒå…¥è‡ªå·±çš„ç½‘é¡µä¸­ï¼Œå¹¶å°† iframe è®¾ç½®ä¸ºé€æ˜ï¼Œåœ¨é¡µé¢ä¸­é€å‡ºä¸€ä¸ªæŒ‰é’®è¯±å¯¼ç”¨æˆ·ç‚¹å‡»ã€‚</p>\n<h3 id=\"å¦‚ä½•é˜²å¾¡-2\">å¦‚ä½•é˜²å¾¡</h3>\n<ul>\n<li><p>X-FRAME-OPTIONS</p>\n<p><code>X-FRAME-OPTIONS</code>æ˜¯ä¸€ä¸ª HTTP å“åº”å¤´ï¼Œä¸‰ä¸ªå€¼å¯é€‰ï¼Œåˆ†åˆ«æ˜¯</p>\n<ul>\n<li>DENYï¼Œè¡¨ç¤ºé¡µé¢ä¸å…è®¸é€šè¿‡ iframe çš„æ–¹å¼å±•ç¤º</li>\n<li>SAMEORIGINï¼Œè¡¨ç¤ºé¡µé¢å¯ä»¥åœ¨ç›¸åŒåŸŸåä¸‹é€šè¿‡ iframe çš„æ–¹å¼å±•ç¤º</li>\n<li>ALLOW-FROMï¼Œè¡¨ç¤ºé¡µé¢å¯ä»¥åœ¨æŒ‡å®šæ¥æºçš„ iframe ä¸­å±•ç¤º</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"urlè·³è½¬æ¼æ´\">URLè·³è½¬æ¼æ´</h2>\n<h2 id=\"sqlæ³¨å…¥\">SQLæ³¨å…¥</h2>\n<p>SQLæ³¨å…¥æ”»å‡»æŒ‡çš„æ˜¯é€šè¿‡æ„å»ºç‰¹æ®Šçš„è¾“å…¥ä½œä¸ºå‚æ•°ä¼ å…¥Webåº”ç”¨ç¨‹åºï¼Œè€Œè¿™äº›è¾“å…¥å¤§éƒ½æ˜¯SQLè¯­æ³•é‡Œçš„ä¸€äº›ç»„åˆï¼Œé€šè¿‡æ‰§è¡ŒSQLè¯­å¥è¿›è€Œæ‰§è¡Œæ”»å‡»è€…æ‰€è¦çš„æ“ä½œï¼Œå…¶ä¸»è¦åŸå› æ˜¯ç¨‹åºæ²¡æœ‰ç»†è‡´åœ°è¿‡æ»¤ç”¨æˆ·è¾“å…¥çš„æ•°æ®ï¼Œè‡´ä½¿éæ³•æ•°æ®ä¾µå…¥ç³»ç»Ÿã€‚</p>\n<p>SQLæ³¨å…¥å¿…å¤‡æ¡ä»¶ï¼š</p>\n<ol>\n<li>å¯ä»¥æ§åˆ¶è¾“å…¥çš„æ•°æ®</li>\n<li>æœåŠ¡å™¨è¦æ‰§è¡Œçš„ä»£ç æ‹¼æ¥äº†æ§åˆ¶çš„æ•°æ®</li>\n</ol>\n<h3 id=\"å¦‚ä½•é˜²å¾¡-3\">å¦‚ä½•é˜²å¾¡</h3>\n<ul>\n<li><p><strong>ä¸¥æ ¼é™åˆ¶Webåº”ç”¨çš„æ•°æ®åº“çš„æ“ä½œæƒé™</strong>ï¼Œç»™æ­¤ç”¨æˆ·æä¾›ä»…ä»…èƒ½å¤Ÿæ»¡è¶³å…¶å·¥ä½œçš„æœ€ä½æƒé™ï¼Œä»è€Œæœ€å¤§é™åº¦çš„å‡å°‘æ³¨å…¥æ”»å‡»å¯¹æ•°æ®åº“çš„å±å®³</p>\n</li>\n<li><p><strong>åç«¯ä»£ç æ£€æŸ¥è¾“å…¥çš„æ•°æ®æ˜¯å¦ç¬¦åˆé¢„æœŸ</strong>ï¼Œä¸¥æ ¼é™åˆ¶å˜é‡çš„ç±»å‹ï¼Œä¾‹å¦‚ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œä¸€äº›åŒ¹é…å¤„ç†ã€‚</p>\n</li>\n<li><p><strong>å¯¹è¿›å…¥æ•°æ®åº“çš„ç‰¹æ®Šå­—ç¬¦ï¼ˆ&#39;ï¼Œ&quot;ï¼Œ\\ï¼Œ&lt;ï¼Œ&gt;ï¼Œ&amp;ï¼Œ*ï¼Œ; ç­‰ï¼‰è¿›è¡Œè½¬ä¹‰å¤„ç†ï¼Œæˆ–ç¼–ç è½¬æ¢</strong>ã€‚åŸºæœ¬ä¸Šæ‰€æœ‰çš„åç«¯è¯­è¨€éƒ½æœ‰å¯¹å­—ç¬¦ä¸²è¿›è¡Œè½¬ä¹‰å¤„ç†çš„æ–¹æ³•ï¼Œæ¯”å¦‚ lodash çš„ lodash._escapehtmlchar åº“ã€‚</p>\n</li>\n<li><p><strong>æ‰€æœ‰çš„æŸ¥è¯¢è¯­å¥å»ºè®®ä½¿ç”¨æ•°æ®åº“æä¾›çš„å‚æ•°åŒ–æŸ¥è¯¢æ¥å£</strong>ï¼Œå‚æ•°åŒ–çš„è¯­å¥ä½¿ç”¨å‚æ•°è€Œä¸æ˜¯å°†ç”¨æˆ·è¾“å…¥å˜é‡åµŒå…¥åˆ° SQL è¯­å¥ä¸­ï¼Œå³ä¸è¦ç›´æ¥æ‹¼æ¥ SQL è¯­å¥ã€‚ä¾‹å¦‚ Node.js ä¸­çš„ mysqljs åº“çš„ query æ–¹æ³•ä¸­çš„ ? å ä½å‚æ•°ã€‚</p>\n</li>\n</ul>\n"},{"title":"æµè§ˆå™¨ç›¸å…³-ç¼“å­˜","tags":["ç¼“å­˜"],"categories":"æµè§ˆå™¨","description":"å¯¹äºä¸€ä¸ªæ•°æ®è¯·æ±‚æ¥è¯´ï¼Œå¯ä»¥åˆ†ä¸ºå‘èµ·ç½‘ç»œè¯·æ±‚ã€åç«¯å¤„ç†ã€æµè§ˆå™¨å“åº”ä¸‰ä¸ªæ­¥éª¤ã€‚æµè§ˆå™¨ç¼“å­˜å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨ç¬¬ä¸€å’Œç¬¬ä¸‰æ­¥éª¤ä¸­ä¼˜åŒ–æ€§èƒ½ã€‚æ¯”å¦‚è¯´ç›´æ¥ä½¿ç”¨ç¼“å­˜è€Œä¸å‘èµ·è¯·æ±‚ï¼Œæˆ–è€…å‘èµ·äº†è¯·æ±‚ä½†åç«¯å­˜å‚¨çš„æ•°æ®å’Œå‰ç«¯ä¸€è‡´ï¼Œé‚£ä¹ˆå°±æ²¡æœ‰å¿…è¦å†å°†æ•°æ®å›ä¼ å›æ¥ï¼Œè¿™æ ·å°±å‡å°‘äº†å“åº”æ•°æ®\n\nç¼“å­˜çš„æ„ä¹‰å°±åœ¨äºå‡å°‘è¯·æ±‚ï¼Œæ›´å¤šåœ°ä½¿ç”¨æœ¬åœ°çš„èµ„æºï¼Œç»™ç”¨æˆ·æ›´å¥½çš„ä½“éªŒçš„åŒæ—¶ï¼Œä¹Ÿå‡è½»æœåŠ¡å™¨å‹åŠ›ã€‚æ‰€ä»¥ï¼Œæœ€ä½³å®è·µï¼Œå°±åº”è¯¥æ˜¯å°½å¯èƒ½å‘½ä¸­å¼ºç¼“å­˜ï¼ŒåŒæ—¶ï¼Œèƒ½åœ¨","createDate":"2019-06-30 15:29:59","updateDate":"2021-05-16 15:24:15","body":"<p>å¯¹äºä¸€ä¸ªæ•°æ®è¯·æ±‚æ¥è¯´ï¼Œå¯ä»¥åˆ†ä¸ºå‘èµ·ç½‘ç»œè¯·æ±‚ã€åç«¯å¤„ç†ã€æµè§ˆå™¨å“åº”ä¸‰ä¸ªæ­¥éª¤ã€‚æµè§ˆå™¨ç¼“å­˜å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨ç¬¬ä¸€å’Œç¬¬ä¸‰æ­¥éª¤ä¸­ä¼˜åŒ–æ€§èƒ½ã€‚æ¯”å¦‚è¯´ç›´æ¥ä½¿ç”¨ç¼“å­˜è€Œä¸å‘èµ·è¯·æ±‚ï¼Œæˆ–è€…å‘èµ·äº†è¯·æ±‚ä½†åç«¯å­˜å‚¨çš„æ•°æ®å’Œå‰ç«¯ä¸€è‡´ï¼Œé‚£ä¹ˆå°±æ²¡æœ‰å¿…è¦å†å°†æ•°æ®å›ä¼ å›æ¥ï¼Œè¿™æ ·å°±å‡å°‘äº†å“åº”æ•°æ®</p>\n<p>ç¼“å­˜çš„æ„ä¹‰å°±åœ¨äºå‡å°‘è¯·æ±‚ï¼Œæ›´å¤šåœ°ä½¿ç”¨æœ¬åœ°çš„èµ„æºï¼Œç»™ç”¨æˆ·æ›´å¥½çš„ä½“éªŒçš„åŒæ—¶ï¼Œä¹Ÿå‡è½»æœåŠ¡å™¨å‹åŠ›ã€‚æ‰€ä»¥ï¼Œæœ€ä½³å®è·µï¼Œå°±åº”è¯¥æ˜¯å°½å¯èƒ½å‘½ä¸­å¼ºç¼“å­˜ï¼ŒåŒæ—¶ï¼Œèƒ½åœ¨æ›´æ–°ç‰ˆæœ¬çš„æ—¶å€™è®©å®¢æˆ·ç«¯çš„ç¼“å­˜å¤±æ•ˆã€‚</p>\n<h2 id=\"ç¼“å­˜ä½ç½®\">ç¼“å­˜ä½ç½®</h2>\n<ul>\n<li><p>Service Worker</p>\n<p>Service Worker çš„ç¼“å­˜ä¸æµè§ˆå™¨å…¶ä»–å†…å»ºçš„ç¼“å­˜æœºåˆ¶ä¸åŒï¼Œå®ƒå¯ä»¥è®©æˆ‘ä»¬è‡ªç”±æ§åˆ¶ç¼“å­˜å“ªäº›æ–‡ä»¶ã€å¦‚ä½•åŒ¹é…ç¼“å­˜ã€å¦‚ä½•è¯»å–ç¼“å­˜ï¼Œå¹¶ä¸”ç¼“å­˜æ˜¯æŒç»­æ€§çš„ã€‚</p>\n<p>å½“ Service Worker æ²¡æœ‰å‘½ä¸­ç¼“å­˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å»è°ƒç”¨ fetch å‡½æ•°è·å–æ•°æ®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰åœ¨ Service Worker å‘½ä¸­ç¼“å­˜çš„è¯ï¼Œä¼šæ ¹æ®ç¼“å­˜æŸ¥æ‰¾ä¼˜å…ˆçº§å»æŸ¥æ‰¾æ•°æ®ã€‚ä½†æ˜¯ä¸ç®¡æˆ‘ä»¬æ˜¯ä» Memory Cache ä¸­è¿˜æ˜¯ä»ç½‘ç»œè¯·æ±‚ä¸­è·å–çš„æ•°æ®ï¼Œæµè§ˆå™¨éƒ½ä¼šæ˜¾ç¤ºæˆ‘ä»¬æ˜¯ä» Service Worker ä¸­è·å–çš„å†…å®¹ã€‚</p>\n</li>\n<li><p>Memory Cache</p>\n<p>Memory Cache ä¹Ÿå°±æ˜¯å†…å­˜ä¸­çš„ç¼“å­˜ï¼Œè¯»å–å†…å­˜ä¸­çš„æ•°æ®è‚¯å®šæ¯”ç£ç›˜å¿«ã€‚ä½†æ˜¯å†…å­˜ç¼“å­˜è™½ç„¶è¯»å–é«˜æ•ˆï¼Œå¯æ˜¯ç¼“å­˜æŒç»­æ€§å¾ˆçŸ­ï¼Œä¼šéšç€è¿›ç¨‹çš„é‡Šæ”¾è€Œé‡Šæ”¾ã€‚ ä¸€æ—¦æˆ‘ä»¬å…³é—­ Tab é¡µé¢ï¼Œå†…å­˜ä¸­çš„ç¼“å­˜ä¹Ÿå°±è¢«é‡Šæ”¾äº†ã€‚</p>\n<p>å½“è®¿é—®è¿‡é¡µé¢ä»¥åï¼Œå†æ¬¡åˆ·æ–°é¡µé¢ï¼Œå¯ ä»¥å‘ç°å¾ˆå¤šæ•°æ®éƒ½æ¥è‡ªäºå†…å­˜ç¼“å­˜</p>\n</li>\n<li><p>Disk Cache</p>\n<p>Disk Cache ä¹Ÿå°±æ˜¯å­˜å‚¨åœ¨ç¡¬ç›˜ä¸­çš„ç¼“å­˜ï¼Œè¯»å–é€Ÿåº¦æ…¢ç‚¹ï¼Œä½†æ˜¯ä»€ä¹ˆéƒ½èƒ½å­˜å‚¨åˆ°ç£ç›˜ä¸­ï¼Œæ¯”ä¹‹ Memory Cache èƒœåœ¨å®¹é‡å’Œå­˜å‚¨æ—¶æ•ˆæ€§ä¸Šã€‚</p>\n<p>åœ¨æ‰€æœ‰æµè§ˆå™¨ç¼“å­˜ä¸­ï¼ŒDisk Cache è¦†ç›–é¢åŸºæœ¬æ˜¯æœ€å¤§çš„ã€‚å®ƒä¼šæ ¹æ® HTTP Herder ä¸­çš„å­—æ®µåˆ¤æ–­å“ªäº›èµ„æºéœ€è¦ç¼“å­˜ï¼Œå“ªäº›èµ„æºå¯ä»¥ä¸è¯·æ±‚ç›´æ¥ä½¿ç”¨ï¼Œå“ªäº›èµ„æºå·²ç»è¿‡æœŸéœ€è¦é‡æ–°è¯·æ±‚ã€‚<strong>å¹¶ä¸”å³ä½¿åœ¨è·¨ç«™ç‚¹çš„æƒ…å†µä¸‹ï¼Œç›¸åŒåœ°å€çš„èµ„æºä¸€æ—¦è¢«ç¡¬ç›˜ç¼“å­˜ä¸‹æ¥ï¼Œå°±ä¸ä¼šå†æ¬¡å»è¯·æ±‚æ•°æ®ã€‚</strong></p>\n</li>\n<li><p>Push Cache</p>\n<p>Push Cache æ˜¯ HTTP/2 ä¸­çš„å†…å®¹ï¼Œå½“ä»¥ä¸Šä¸‰ç§ç¼“å­˜éƒ½æ²¡æœ‰å‘½ä¸­æ—¶ï¼Œå®ƒæ‰ä¼šè¢«ä½¿ç”¨ã€‚å¹¶ä¸”ç¼“å­˜æ—¶é—´ä¹Ÿå¾ˆçŸ­æš‚ï¼Œåªåœ¨ä¼šè¯ï¼ˆSessionï¼‰ä¸­å­˜åœ¨ï¼Œä¸€æ—¦ä¼šè¯ç»“æŸå°±è¢«é‡Šæ”¾ã€‚</p>\n</li>\n</ul>\n<h2 id=\"ç¼“å­˜ç­–ç•¥\">ç¼“å­˜ç­–ç•¥</h2>\n<p>é€šå¸¸æµè§ˆå™¨ç¼“å­˜ç­–ç•¥åˆ†ä¸ºä¸¤ç§ï¼šå¼ºç¼“å­˜å’Œåå•†ç¼“å­˜ï¼Œå¹¶ä¸”ç¼“å­˜ç­–ç•¥éƒ½æ˜¯é€šè¿‡è®¾ç½® HTTP Header æ¥å®ç°çš„ã€‚</p>\n<ol>\n<li>æµè§ˆå™¨æ¯æ¬¡å‘èµ·è¯·æ±‚ï¼Œéƒ½ä¼šå…ˆåœ¨æµè§ˆå™¨ç¼“å­˜ä¸­æŸ¥æ‰¾è¯¥è¯·æ±‚çš„ç»“æœåŠç¼“å­˜æ ‡è¯†</li>\n<li>æµè§ˆå™¨æ¯æ¬¡æ‹¿åˆ°è¿”å›çš„è¯·æ±‚ç»“æœéƒ½ä¼šå°†è¯¥ç»“æœå’Œç¼“å­˜æ ‡è¯†å­˜å…¥æµè§ˆå™¨ç¼“å­˜ä¸­</li>\n</ol>\n<ul>\n<li>æµè§ˆå™¨åœ¨åŠ è½½èµ„æºæ—¶ï¼Œå…ˆæ ¹æ®è¿™ä¸ªèµ„æºçš„ä¸€äº›http  headeråˆ¤æ–­å®ƒæ˜¯å¦å‘½ä¸­å¼ºç¼“å­˜ï¼Œå¼ºç¼“å­˜å¦‚æœå‘½ä¸­ï¼Œæµè§ˆå™¨ä¼šç›´æ¥ä»è‡ªå·±çš„ç¼“å­˜ä¸­è¯»å–èµ„æºï¼Œä¸ä¼šå‘é€è¯·æ±‚åˆ°æµè§ˆå™¨</li>\n<li>å½“å¼ºç¼“å­˜æ²¡æœ‰å‘½ä¸­çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¸€å®šä¼šå‘é€ä¸€ä¸ªè¯·æ±‚åˆ°æœåŠ¡å™¨ï¼Œé€šè¿‡æœåŠ¡å™¨ä¾æ®èµ„æºçš„å¦å¤–ä¸€äº›http      headeréªŒè¯è¿™ä¸ªèµ„æºæ˜¯å¦å‘½ä¸­åå•†ç¼“å­˜ï¼Œå¦‚æœåå•†ç¼“å­˜å‘½ä¸­ï¼ŒæœåŠ¡å™¨ä¼šå°†è¿™ä¸ªè¯·æ±‚è¿”å›ï¼Œä½†æ˜¯ä¸ä¼šè¿”å›è¿™ä¸ªèµ„æºçš„æ•°æ®ï¼Œè€Œæ˜¯å‘Šè¯‰å®¢æˆ·ç«¯ç›´æ¥ä»ç¼“å­˜ä¸­åŠ è½½è¿™ä¸ªèµ„æºï¼Œäºæ˜¯æµè§ˆå™¨å°±åˆä¼šä»è‡ªå·±çš„ç¼“å­˜ä¸­å»åŠ è½½è¿™ä¸ªèµ„æº</li>\n<li>å¼ºç¼“å­˜ä¸åå•†ç¼“å­˜çš„å…±åŒç‚¹æ—¶ï¼šå¦‚æœå‘½ä¸­éƒ½æ˜¯ä»å®¢æˆ·ç«¯ç¼“å­˜ä¸­åŠ è½½èµ„æºï¼Œè€Œä¸æ˜¯ä»æœåŠ¡å™¨åŠ è½½èµ„æºæ•°æ®ï¼ŒåŒºåˆ«æ˜¯ï¼šå¼ºç¼“å­˜ä¸å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼Œåå•†ç¼“å­˜ä¼šå‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨</li>\n<li>å½“åå•†ç¼“å­˜ä¹Ÿæ²¡æœ‰å‘½ä¸­çš„æ—¶å€™ï¼Œæµè§ˆå™¨ç›´æ¥ä»æœåŠ¡å™¨åŠ è½½èµ„æºæ•°æ®</li>\n</ul>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/browser_cache.png\" alt=\"cacheæµç¨‹\"></p>\n<h3 id=\"å¼ºç¼“å­˜\"><strong>å¼ºç¼“å­˜</strong></h3>\n<p>å¼ºç¼“å­˜å¯ä»¥é€šè¿‡è®¾ç½®ä¸¤ç§ HTTP Header å®ç°ï¼š<strong>Expires</strong> <strong>å’Œ</strong> <strong>Cache-Control</strong> ã€‚å¼ºç¼“å­˜è¡¨ç¤ºåœ¨ç¼“å­˜æœŸé—´ä¸éœ€è¦è¯·æ±‚ï¼Œstate code ä¸º 200</p>\n<ul>\n<li><p>Expires</p>\n<p>Expires: Wed, 22 Oct 2018 08:41:00 GMT</p>\n<p>Expires æ˜¯ HTTP/1 çš„äº§ç‰©ï¼Œè¡¨ç¤ºèµ„æºä¼šåœ¨ Wed, 22 Oct 2018 08:41:00 GMT åè¿‡æœŸï¼Œéœ€è¦å†æ¬¡è¯·æ±‚ã€‚å¹¶ä¸” Expires å—é™äºæœ¬åœ°æ—¶é—´ï¼Œå¦‚æœä¿®æ”¹äº†æœ¬åœ°æ—¶é—´ï¼Œå¯èƒ½ä¼šé€ æˆç¼“å­˜å¤±æ•ˆã€‚</p>\n</li>\n<li><p>Cache-control</p>\n<p>Cache-control: max-age=30</p>\n<p>Cache-Control å‡ºç°äº HTTP/1.1ï¼Œä¼˜å…ˆçº§é«˜äº Expires ã€‚è¯¥å±æ€§å€¼è¡¨ç¤ºèµ„æºä¼šåœ¨ 30 ç§’åè¿‡æœŸï¼Œéœ€è¦å†æ¬¡è¯·æ±‚ã€‚</p>\n<p>Cache-Control å¯ä»¥åœ¨è¯·æ±‚å¤´æˆ–è€…å“åº”å¤´ä¸­è®¾ç½®ï¼Œå¹¶ä¸”å¯ä»¥ç»„åˆä½¿ç”¨å¤šç§æŒ‡ä»¤</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/cache_1.png\" alt=\"cache headerå­—æ®µ\"></p>\n</li>\n</ul>\n<h3 id=\"åå•†ç¼“å­˜\"><strong>åå•†ç¼“å­˜</strong></h3>\n<p>å¼ºç¼“å­˜åˆ¤æ–­æ˜¯å¦ç¼“å­˜çš„ä¾æ®æ¥è‡ªäºæ˜¯å¦è¶…å‡ºæŸä¸ªæ—¶é—´æˆ–è€…æŸä¸ªæ—¶é—´æ®µè€Œä¸å…³å¿ƒæœåŠ¡ç«¯æ–‡ä»¶æ˜¯å¦å·²ç»æ›´æ–°ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´åŠ è½½æ–‡ä»¶ä¸æ˜¯æœåŠ¡å™¨ç«¯æœ€æ–°çš„å†…å®¹ï¼Œé‚£ä¹ˆæ­¤æ—¶å°±éœ€è¦åå•†ç¼“å­˜æ¥ç¡®å®šæœåŠ¡ç«¯å†…å®¹æ˜¯å¦å‘ç”Ÿæ›´æ–°ã€‚</p>\n<p>åå•†ç¼“å­˜å°±æ˜¯åœ¨å¼ºç¼“å­˜å¤±æ•ˆåï¼Œæµè§ˆå™¨æºå¸¦æ ‡è¯†å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œç”±æœåŠ¡å™¨æ ¹æ®ç¼“å­˜ä¸ç¢äº‹å†³å®šæ˜¯å¦ä½¿ç”¨ç¼“å­˜çš„è¿‡è¿‡ç¨‹ã€‚åå•†ç¼“å­˜å¯é€šè¿‡è®¾ç½®ä¸¤ç§ HTTP Header å®ç°ï¼šLast-Modified å’Œ ETag ã€‚</p>\n<ul>\n<li><p>Last-Modified å’Œ If-Modified-Since</p>\n<p>Last-Modified ä¼šéšç€ç¬¬ä¸€æ¬¡è®¿é—®èµ„æºæ—¶è¿”å›ï¼ˆè¯¥èµ„æºåœ¨æµè§ˆå™¨ä¸Šæœ€åçš„ä¿®æ”¹æ—¥æœŸï¼‰ã€‚æµè§ˆå™¨å†æ¬¡è¯·æ±‚è¯¥èµ„æºæ—¶ï¼ŒIf-Modified-Since ä¼šå°† Last-Modified çš„å€¼å‘é€ç»™æœåŠ¡å™¨ï¼Œè¯¢é—®æœåŠ¡å™¨åœ¨è¯¥æ—¥æœŸåèµ„æºæ˜¯å¦æœ‰æ›´æ–°ï¼Œæœ‰æ›´æ–°çš„è¯å°±ä¼šå°†æ–°çš„èµ„æºå‘é€å›æ¥ï¼Œå¦åˆ™è¿”å› 304 çŠ¶æ€ç -å³å‘½ä¸­ç¼“å­˜</p>\n<p>å¼Šç«¯ï¼š</p>\n<ol>\n<li>å¦‚æœæœ¬åœ°æ‰“å¼€ç¼“å­˜æ–‡ä»¶ï¼Œå³ä½¿æ²¡æœ‰å¯¹æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œä½†è¿˜æ˜¯ä¼šé€ æˆ Last-Modified è¢«ä¿®æ”¹ï¼ŒæœåŠ¡ç«¯ä¸èƒ½å‘½ä¸­ç¼“å­˜å¯¼è‡´å‘é€ç›¸åŒçš„èµ„æº</li>\n<li>å› ä¸º Last-Modified åªèƒ½ä»¥ç§’è®¡æ—¶ï¼Œå¦‚æœåœ¨ä¸å¯æ„ŸçŸ¥çš„æ—¶é—´å†…ä¿®æ”¹å®Œæˆæ–‡ä»¶ï¼Œé‚£ä¹ˆæœåŠ¡ç«¯ä¼šè®¤ä¸ºèµ„æºè¿˜æ˜¯å‘½ä¸­äº†ï¼Œä¸ä¼šè¿”å›æ­£ç¡®çš„èµ„æº</li>\n</ol>\n</li>\n<li><p>ETag å’Œ If-None-Match</p>\n<p>ETag ç±»ä¼¼äºæ–‡ä»¶æŒ‡çº¹ï¼Œï¼Œä¼šéšç€ç¬¬ä¸€æ¬¡è®¿é—®èµ„æºæ—¶è¿”å›ï¼ˆæµè§ˆå™¨ç”Ÿæˆï¼‰ã€‚æµè§ˆå™¨å†æ¬¡è¯·æ±‚è¯¥èµ„æºæ—¶ï¼ŒIf-None-Match ä¼šå°†å½“å‰ ETag å‘é€ç»™æœåŠ¡å™¨ï¼Œè¯¢é—®è¯¥èµ„æº ETag æ˜¯å¦å˜åŠ¨ï¼Œæœ‰å˜åŠ¨çš„è¯å°±å°†æ–°çš„èµ„æºå‘é€å›æ¥ã€‚å¹¶ä¸” ETag ä¼˜å…ˆçº§æ¯” Last-Modified é«˜</p>\n</li>\n</ul>\n<h2 id=\"å®é™…ä½¿ç”¨åœºæ™¯\">å®é™…ä½¿ç”¨åœºæ™¯</h2>\n<ul>\n<li><p>é¢‘ç¹å˜åŠ¨çš„èµ„æº</p>\n<p>å¯¹äºé¢‘ç¹å˜åŠ¨çš„èµ„æºï¼Œé¦–å…ˆéœ€è¦ä½¿ç”¨ Cache-Control: no-cache ä½¿æµè§ˆå™¨æ¯æ¬¡éƒ½è¯·æ±‚æœåŠ¡å™¨ï¼Œç„¶åé…åˆ ETag æˆ–è€… Last-Modified æ¥éªŒè¯èµ„æºæ˜¯å¦æœ‰æ•ˆã€‚è¿™æ ·çš„åšæ³•è™½ç„¶ä¸èƒ½èŠ‚çœè¯·æ±‚æ•°é‡ï¼Œä½†æ˜¯èƒ½æ˜¾è‘—å‡å°‘å“åº”æ•°æ®å¤§å°ã€‚</p>\n</li>\n<li><p>ä»£ç æ–‡ä»¶</p>\n<p>ä¸€èˆ¬æ¥è¯´ï¼Œç°åœ¨éƒ½ä¼šä½¿ç”¨å·¥å…·æ¥æ‰“åŒ…ä»£ç ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å¯¹æ–‡ä»¶åè¿›è¡Œå“ˆå¸Œå¤„ç†ï¼Œåªæœ‰å½“ä»£ç ä¿®æ”¹åæ‰ä¼šç”Ÿæˆæ–°çš„æ–‡ä»¶åã€‚åŸºäºæ­¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç»™ä»£ç æ–‡ä»¶è®¾ç½®ç¼“å­˜æœ‰æ•ˆæœŸä¸€å¹´ Cache-Control: max-age=31536000ï¼Œè¿™æ ·åªæœ‰å½“ HTML æ–‡ä»¶ä¸­å¼•å…¥çš„æ–‡ä»¶åå‘ç”Ÿäº†æ”¹å˜æ‰ä¼šå»ä¸‹è½½æœ€æ–°çš„ä»£ç æ–‡ä»¶ï¼Œå¦åˆ™å°±ä¸€ç›´ä½¿ç”¨ç¼“å­˜ã€‚</p>\n</li>\n</ul>\n"},{"title":"about","tags":["about"],"categories":"other","description":"## æŠ€æœ¯æ ˆ\n\n- å‰ç«¯å‘ï¼šåŸºç¡€ã€React.jsã€å¾®ä¿¡å°ç¨‹åºã€TypeScriptã€Dockerã€webpack\n\n- åç«¯å‘ï¼šåŸºç¡€ã€Node.js\n\n## Email\n\nmrrs878@foxmail.com\n\n## Github\n\n[https://github.com/mrrs878](https://github.com/mrrs878)","createDate":"2020-11-27 06:52:03","updateDate":"2021-05-15 12:21:35","body":"<h2 id=\"æŠ€æœ¯æ ˆ\">æŠ€æœ¯æ ˆ</h2>\n<ul>\n<li><p>å‰ç«¯å‘ï¼šåŸºç¡€ã€React.jsã€å¾®ä¿¡å°ç¨‹åºã€TypeScriptã€Dockerã€webpack</p>\n</li>\n<li><p>åç«¯å‘ï¼šåŸºç¡€ã€Node.js</p>\n</li>\n</ul>\n<h2 id=\"email\">Email</h2>\n<p><a href=\"mailto:&#x6d;&#x72;&#114;&#x73;&#x38;&#x37;&#x38;&#64;&#x66;&#x6f;&#x78;&#109;&#x61;&#105;&#x6c;&#46;&#x63;&#x6f;&#x6d;\">&#x6d;&#x72;&#114;&#x73;&#x38;&#x37;&#x38;&#64;&#x66;&#x6f;&#x78;&#109;&#x61;&#105;&#x6c;&#46;&#x63;&#x6f;&#x6d;</a></p>\n<h2 id=\"github\">Github</h2>\n<p><a href=\"https://github.com/mrrs878\">https://github.com/mrrs878</a></p>\n"},{"title":"JavaScriptç›¸å…³-2","tags":["Javascript","åŸºç¡€"],"categories":"JavaScript","description":"## Promise\n\n**WHAT**\n\n**Promise** å¯¹è±¡ç”¨äºè¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå®Œæˆ (æˆ–å¤±è´¥), åŠå…¶ç»“æœå€¼.\n\nå¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆ\n\n`Promise`å¯èƒ½å¤„äºä»¥ä¸‹ä¸‰ä¸ªçŠ¶æ€ä¹‹ä¸€ï¼š`fulfilled`ã€`rejected`ã€`pending`ã€‚ç”¨æˆ·å¯ä»¥å¯¹`Promise`æ·»åŠ å›è°ƒå‡½æ•°æ¥å¤„ç†æ“ä½œæˆåŠŸçš„ç»“æœæˆ–å¤±è´¥çš„åŸå› \n\n**WHY**\n\nä¼ ç»Ÿçš„å¼‚æ­¥ç¼–ç¨‹ç¼ºç‚¹éš¾ä»¥å¿å—:","createDate":"2020-02-12 22:53:13","updateDate":"2021-05-13 17:47:54","body":"<h2 id=\"promise\">Promise</h2>\n<p><strong>WHAT</strong></p>\n<p><strong>Promise</strong> å¯¹è±¡ç”¨äºè¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå®Œæˆ (æˆ–å¤±è´¥), åŠå…¶ç»“æœå€¼.</p>\n<p>å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆ</p>\n<p><code>Promise</code>å¯èƒ½å¤„äºä»¥ä¸‹ä¸‰ä¸ªçŠ¶æ€ä¹‹ä¸€ï¼š<code>fulfilled</code>ã€<code>rejected</code>ã€<code>pending</code>ã€‚ç”¨æˆ·å¯ä»¥å¯¹<code>Promise</code>æ·»åŠ å›è°ƒå‡½æ•°æ¥å¤„ç†æ“ä½œæˆåŠŸçš„ç»“æœæˆ–å¤±è´¥çš„åŸå› </p>\n<p><strong>WHY</strong></p>\n<p>ä¼ ç»Ÿçš„å¼‚æ­¥ç¼–ç¨‹ç¼ºç‚¹éš¾ä»¥å¿å—:</p>\n<ul>\n<li>ä»£ç è‡ƒè‚¿</li>\n<li>å¯è¯»æ€§å·®</li>\n<li>è€¦åˆåº¦è¿‡é«˜ï¼Œå¯ç»´æŠ¤æ€§å·®</li>\n<li>ä»£ç å¤ç”¨æ€§å·®</li>\n<li>åªèƒ½åœ¨å›è°ƒé‡Œå¤„ç†å¼‚å¸¸</li>\n</ul>\n<pre><code class=\"hljs language-javascript\">è¯·æ±‚<span class=\"hljs-number\">1</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">è¯·æ±‚ç»“æœ<span class=\"hljs-number\">1</span></span>){\n    è¯·æ±‚<span class=\"hljs-number\">2</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">è¯·æ±‚ç»“æœ<span class=\"hljs-number\">2</span></span>){\n        è¯·æ±‚<span class=\"hljs-number\">3</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">è¯·æ±‚ç»“æœ<span class=\"hljs-number\">3</span></span>){\n            è¯·æ±‚<span class=\"hljs-number\">4</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">è¯·æ±‚ç»“æœ<span class=\"hljs-number\">4</span></span>){\n                è¯·æ±‚<span class=\"hljs-number\">5</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">è¯·æ±‚ç»“æœ<span class=\"hljs-number\">5</span></span>){\n                    è¯·æ±‚<span class=\"hljs-number\">6</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">è¯·æ±‚ç»“æœ<span class=\"hljs-number\">6</span></span>){\n                        ...\n                    })\n                })\n            })\n        })\n    })\n})\n\n<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(è¯·æ±‚<span class=\"hljs-number\">1</span>)\n    .<span class=\"hljs-title function_\">then</span>(è¯·æ±‚<span class=\"hljs-number\">2</span>(è¯·æ±‚ç»“æœ<span class=\"hljs-number\">1</span>))\n    .<span class=\"hljs-title function_\">then</span>(è¯·æ±‚<span class=\"hljs-number\">3</span>(è¯·æ±‚ç»“æœ<span class=\"hljs-number\">2</span>))\n    .<span class=\"hljs-title function_\">then</span>(è¯·æ±‚<span class=\"hljs-number\">4</span>(è¯·æ±‚ç»“æœ<span class=\"hljs-number\">3</span>))\n    .<span class=\"hljs-title function_\">then</span>(è¯·æ±‚<span class=\"hljs-number\">5</span>(è¯·æ±‚ç»“æœ<span class=\"hljs-number\">4</span>))\n    .<span class=\"hljs-title function_\">catch</span>(å¤„ç†å¼‚å¸¸(å¼‚å¸¸ä¿¡æ¯))\n</code></pre>\n<p><strong>HOW</strong></p>\n<p>å¸¸ç”¨APIï¼š</p>\n<ul>\n<li><p><code>Promise.resolve(value)</code></p>\n<p>è¿”å›ä¸€ä¸ªçŠ¶æ€ç”±ç»™å®šçš„<code>value</code>å†³å®šçš„<code>Promise</code>å¯¹è±¡ã€‚å¦‚æœè¯¥å€¼æ—¶<code>theable</code>ï¼ˆå³å¸¦æœ‰thenæ–¹æ³•çš„å¯¹è±¡ï¼‰ï¼Œè¿”å›çš„<code>Promise</code>å¯¹è±¡çš„æœ€ç»ˆçŠ¶æ€æ˜¯ç”±<code>then</code>æ–¹æ³•å†³å®šï¼›å¦åˆ™ï¼ˆè¯¥<code>value</code>ä¸ºç©ºã€åŸºæœ¬ç±»å‹æˆ–ä¸å¸¦<code>then</code>æ–¹æ³•çš„å¯¹è±¡ï¼‰è¿”å›çš„<code>Promise</code>å¯¹è±¡çŠ¶æ€ä¸º<code>fulfilled</code>ï¼Œå¹¶ä¸”å°†è¯¥<code>value    </code>ä¼ é€’ç»™å¯¹åº”çš„<code>then</code>æ–¹æ³•ã€‚é€šå¸¸ï¼Œå¦‚æœä¸çŸ¥é“ä¸€ä¸ªå€¼æ˜¯å¦æ˜¯<code>Promise</code>å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨<code>Promsie.resolve(value)</code>æ¥è¿”å›ä¸€ä¸ª<code>Promise</code>å¯¹è±¡ï¼Œè¿™æ ·å°±èƒ½å°†è¯¥<code>value</code>ä»¥<code>Promise</code>å¯¹è±¡å½¢å¼ä½¿ç”¨</p>\n</li>\n<li><p><code>Promise.reject(value)</code></p>\n<p>è¿”å›ä¸€ä¸ªçŠ¶æ€ä¸ºå¤±è´¥çš„<code>Promise</code>å¯¹è±¡ï¼Œå¹¶å°†ç»™å®šçš„å¤±è´¥ä¿¡æ¯ä¼ é€’ç»™å¯¹åº”çš„å‡ºå¤„ç†æ–¹æ³•</p>\n</li>\n<li><p><code>Promise.race(interable)</code></p>\n<p>å½“<code>interable</code>å‚æ•°é‡Œçš„ä»»æ„ä¸€ä¸ªå­<code>promise</code>è¢«æ‰§è¡Œå¤±è´¥æˆ–æˆåŠŸåï¼Œçˆ¶<code>promise</code>é©¬ä¸Šä¹Ÿä¼šç”¨å­<code>promise</code>çš„æˆåŠŸè¿”å›å€¼æˆ–å¤±è´¥è¯¦æƒ…ä½œä¸ºå‚æ•°è°ƒç”¨çˆ¶<code>promsie</code>ç»‘å®šçš„ç›¸åº”å¥æŸ„å¹¶è¿”å›è¯¥<code>promsie</code>å¯¹è±¡</p>\n</li>\n<li><p><code>Promise.all(interable)</code></p>\n<p>è¿™ä¸ªæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„<code>promise</code>å¯¹è±¡ï¼Œè¯¥<code>promise</code>å¯¹è±¡åœ¨<code>interable</code>å‚æ•°å¯¹è±¡é‡Œæ‰€æœ‰çš„<code>promise</code>å¯¹è±¡éƒ½æˆåŠŸçš„æ—¶å€™æ‰ä¼šè§¦å‘æˆåŠŸï¼Œä¸€æ—¦æœ‰ä»»ä½•ä¸€ä¸ª<code>interable</code>é‡Œçš„<code>promise</code>å¯¹è±¡å¤±è´¥åˆ™ç«‹å³è§¦å‘è¯¥<code>promise</code>å¯¹è±¡çš„å¤±è´¥ã€‚è¿™ä¸ªæ–°çš„<code>promise</code>å¯¹è±¡åœ¨è§¦å‘æˆåŠŸçŠ¶æ€ä»¥åï¼Œä¼šæŠŠä¸€ä¸ªåŒ…å«<code>interable</code>é‡Œæ‰€æœ‰<code>promise</code>è¿”å›å€¼çš„æ•°ç»„ä½œä¸ºæˆåŠŸå›è°ƒçš„è¿”å›å€¼ï¼Œé¡ºåºè·Ÿ<code>interable</code>çš„é¡ºåºä¿æŒä¸€è‡´ï¼›å¦‚æœè¿™ä¸ªæ–°çš„<code>promise</code>å¯¹è±¡å‡ºå‘äº†å¤±è´¥çŠ¶æ€ï¼Œå®ƒä¼šæŠŠ<code>interable</code>é‡Œç¬¬ä¸€ä¸ªè§¦å‘å¤±è´¥çš„<code>promise</code>å¯¹è±¡çš„é”™è¯¯ä¿¡æ¯ä½œä¸ºå®ƒçš„å¤±è´¥é”™è¯¯ä¿¡æ¯ã€‚<code>Promise.all</code>æ–¹æ³•å¸¸ç”¨äºå¤„ç†å¤šä¸ª<code>promise</code>å¯¹è±¡çš„çŠ¶æ€é›†åˆ</p>\n</li>\n</ul>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">const</span> fs = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;fs&quot;</span>)\n\nfs.<span class=\"hljs-title function_\">readFile</span>(<span class=\"hljs-string\">&quot;./index.html&quot;</span>, { <span class=\"hljs-attr\">encoding</span>: <span class=\"hljs-string\">&quot;utf8&quot;</span> }, <span class=\"hljs-function\">(<span class=\"hljs-params\">err, data</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(err, data);\n})\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">_readFile</span>(<span class=\"hljs-params\">path, options</span>) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve, reject</span>) =&gt;</span> {\n    fs.<span class=\"hljs-title function_\">readFile</span>(<span class=\"hljs-string\">&quot;./index.html&quot;</span>, options, <span class=\"hljs-function\">(<span class=\"hljs-params\">err, data</span>) =&gt;</span> {\n      <span class=\"hljs-keyword\">if</span>(err)\n        <span class=\"hljs-title function_\">reject</span>(err)\n      <span class=\"hljs-keyword\">else</span>\n        <span class=\"hljs-title function_\">resolve</span>(data)\n    })\n  })\n}\n\n(<span class=\"hljs-keyword\">async</span> () =&gt; {\n  <span class=\"hljs-keyword\">try</span> {\n    <span class=\"hljs-keyword\">const</span> data = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">_readFile</span>(<span class=\"hljs-string\">&quot;./index.html&quot;</span>, <span class=\"hljs-string\">&quot;utf8&quot;</span>)\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(data);\n  } <span class=\"hljs-keyword\">catch</span> (error) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(error);\n  }\n})()\n</code></pre>\n<h2 id=\"éå†å¯¹è±¡çš„å±æ€§å’Œæ•°ç»„å…ƒç´ çš„æ–¹æ³•\">éå†å¯¹è±¡çš„å±æ€§å’Œæ•°ç»„å…ƒç´ çš„æ–¹æ³•</h2>\n<p>å¯¹è±¡ï¼š</p>\n<ul>\n<li><p><code>for</code>å¾ªç¯ ğŸ‘</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> property <span class=\"hljs-keyword\">in</span> obj)\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(property)\n</code></pre>\n<p>ç¼ºç‚¹ï¼šä¼šéå†åˆ°å®ƒçš„ç»§æ‰¿å±æ€§ï¼Œåœ¨ä½¿ç”¨ä¹‹å‰éœ€è¦åŠ å…¥<code>obj.hasOwnProperty(property)</code></p>\n</li>\n<li><p><code>Object.keys(obj).forEach()</code> ğŸ‘</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">keys</span>(obj).<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">property</span> =&gt;</span> {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(property)\n})\n</code></pre>\n<p><code>Object.keys</code>è¿”å›ä¸€ä¸ªæœ‰ç»™å®šå¯¹è±¡çš„è‡ªèº«å¯æšä¸¾å±æ€§ç»„æˆçš„æ•°ç»„</p>\n</li>\n<li><p><code>Object.getOwnPropertyNames(obj).forEach</code> ğŸ‘</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">getOwnPropertyNames</span>(obj).<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">property</span> =&gt;</span> {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(property)\n})\n</code></pre>\n<p><code>Object.getOwnPropertyNames</code>è¿”å›ä¸€ä¸ªç”±æŒ‡å®šå¯¹è±¡çš„æ‰€æœ‰è‡ªèº«å±æ€§çš„å±æ€§åï¼ˆåŒ…æ‹¬ä¸å¯æšä¸¾å±æ€§ä½†ä¸åŒ…æ‹¬<code>Symbol</code>å€¼ä½œä¸ºåç§°çš„å±æ€§ï¼‰ç»„æˆçš„æ•°ç»„</p>\n</li>\n<li><p><code>Reflect.ownKeys(target)</code> ğŸ‘</p>\n<p>åŸºæœ¬ç­‰åŒäº<code>Object.getOwnPeopertyNames</code> + <code>Object.getOwnPropertySymbols</code></p>\n</li>\n</ul>\n<p>æ•°ç»„ï¼š<strong>å„å–æ‰€éœ€</strong></p>\n<ul>\n<li><p><code>for</code>å¾ªç¯</p>\n<p>æ™®é€šéå†æ–¹æ³•ï¼Œè¾ƒå¸¸ç”¨</p>\n</li>\n<li><p><code>arr.forEach</code></p>\n<p>ç›¸è¾ƒäº<code>for</code>ï¼Œ<code>forEach</code>ä¸å¯æå‰ç»“æŸå¾ªç¯</p>\n</li>\n<li><p><code>arr.map/reduce</code></p>\n</li>\n</ul>\n<h2 id=\"å¯å˜å¯¹è±¡å’Œä¸å¯å˜å¯¹è±¡\">å¯å˜å¯¹è±¡å’Œä¸å¯å˜å¯¹è±¡</h2>\n<p><strong>å¯å˜å¯¹è±¡</strong>åœ¨åˆ›å»ºä¹‹åæ˜¯å¯ä»¥è¢«æ”¹å˜çš„</p>\n<p><strong>ä¸å¯å˜å¯¹è±¡</strong>åœ¨åˆ›å»ºä¹‹åæ˜¯ä¸å¯ä»¥è¢«æ”¹å˜çš„</p>\n<ol>\n<li>åœ¨<code>JavaScript</code>ä¸­ï¼Œ<code>string</code>å’Œ<code>number</code>ä»è®¾è®¡ä¹‹åˆå°±æ˜¯ä¸å¯å˜çš„ï¼ˆimmediateï¼‰</li>\n<li>ä¸å¯å˜å¯¹è±¡æ˜¯ä¿æŒä¸€ä¸ªå¯¹è±¡çŠ¶æ€ä¸å˜ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯æ˜¯çš„å¼€å‘æ›´åŠ ç®€å•ã€å¯å›æº¯ã€æµ‹è¯•å‹å¥½ï¼Œå‡å°‘äº†ä»»ä½•å¯èƒ½çš„å‰¯ä½œç”¨ã€‚ä½†æ˜¯ï¼Œæ¯å½“æƒ³æ·»åŠ ç‚¹ä¸œè¥¿åˆ°ä¸€ä¸ªä¸å¯å˜å¯¹è±¡é‡Œæ—¶ï¼Œå®ƒä¸€å®šæ˜¯å…ˆæ‹·è´å·²å­˜åœ¨çš„å€¼åˆ°æ–°å®ä¾‹é‡Œï¼Œç„¶åå†ç»™æ–°å®ä¾‹æ·»åŠ å†…å®¹ï¼Œæœ€åè¿”å›æ–°å®ä¾‹ã€‚ç›¸æ¯”å¯å˜å¯¹è±¡ï¼Œè¿™åŠ¿å¿…ä¼šæœ‰æ›´å¤šå†…å­˜ã€è®¡ç®—é‡æ¶ˆè€—</li>\n</ol>\n<p>åˆ›å»ºä¸€ä¸ªçº¯å‡½æ•°ï¼ˆpure functionï¼‰</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">const</span> student = {\n    <span class=\"hljs-attr\">school</span>: <span class=\"hljs-string\">&quot;baidu&quot;</span>,\n    <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;tom&quot;</span>,\n    <span class=\"hljs-attr\">age</span>: <span class=\"hljs-number\">21</span>\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">updateStudent</span>(<span class=\"hljs-params\">student, name, age</span>) {\n    <span class=\"hljs-keyword\">return</span> {\n        ...student,\n        name,\n        age\n    }\n}\n</code></pre>\n<h2 id=\"åŒæ­¥å‡½æ•°å’Œå¼‚æ­¥å‡½æ•°\">åŒæ­¥å‡½æ•°å’Œå¼‚æ­¥å‡½æ•°</h2>\n<p>åŒæ­¥å‡½æ•°é˜»å¡ï¼Œå¼‚æ­¥å‡½æ•°ä¸é˜»å¡ã€‚åœ¨åŒæ­¥å‡½æ•°ä¸­ï¼Œè¯­å¥å®Œæˆåä¸‹ä¸€å¥æ‰æ‰§è¡Œï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¨‹åºå¯ä»¥æŒ‰ç…§è¯­å¥çš„é¡ºåºè¿›è¡Œç²¾ç¡®è¯„ä¼°ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªè¯­å¥éœ€è¦å¾ˆé•¿æ—¶é—´ï¼Œé‚£ä¹ˆç¨‹åºçš„æ‰§è¡Œä¼šåœæ»å¾ˆé•¿æ—¶é—´</p>\n<p>å¼‚æ­¥å‡½æ•°é€šå¸¸æ¥å—å›è°ƒä½œä¸ºå‚æ•°ï¼Œåœ¨è°ƒç”¨å¼‚æ­¥å‡½æ•°åç«‹å³ç»§ç»­æ‰§è¡Œä¸‹ä¸€è¡Œã€‚å›è°ƒå‡½æ•°ä»…åœ¨å¼‚æ­¥æ“ä½œå®Œæˆä¸”è°ƒç”¨å †æ ˆä¸ºç©ºæ—¶è°ƒç”¨ï¼Œè¯¸å¦‚ä»webæœåŠ¡å™¨åŠ è½½æ•°æ®æˆ–æŸ¥è¯¢æ•°æ®åº“ç­‰é‡è´Ÿè½½æ“ä½œåº”è¯¥å¼‚æ­¥å®Œæˆï¼Œä»¥ä¾¿ä¸»çº¿ç¨‹å¯ä»¥ç»§ç»­æ‰§è¡Œå…¶ä»–æ“ä½œè€Œä¸ä¼šå‡ºç°ä¸€ç›´é˜»å¡</p>\n<p>åœ¨JavaScriptä¸­å¼‚æ­¥å‡½æ•°çš„è§£å†³æ–¹æ¡ˆé€šå¸¸æœ‰callbackã€Promiseã€async/await</p>\n<h2 id=\"javascriptæ‰§è¡Œæœºåˆ¶\">JavaScriptæ‰§è¡Œæœºåˆ¶</h2>\n<ul>\n<li><p><strong>JavaScriptçš„æ‰§è¡Œä¸è¿è¡Œ</strong></p>\n<p>æ‰§è¡Œå’Œä¸è¿è¡Œä¸å¤ªç›¸åŒï¼Œåœ¨ä¸åŒç¯å¢ƒä¸‹ï¼Œæ¯”å¦‚Nodeã€æµè§ˆå™¨ä¸‹ï¼ŒJavaScriptçš„æ‰§è¡Œç»“æœæ˜¯ä¸ä¸€æ ·çš„ï¼›è€Œè¿è¡Œå¤§å¤šæ˜¯æŒ‡åŸºäºJavaScriptå¼•æ“ï¼Œå¦‚V8ï¼Œç»“æœæ˜¯ä¸€è‡´çš„ </p>\n</li>\n<li><p><strong>å…³äºJavaScript</strong></p>\n<p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒJavaScriptæ˜¯ä¸€é—¨<strong>å•çº¿ç¨‹</strong>ã€<strong>å¼‚æ­¥æ‰§è¡Œ</strong>çš„è¯­è¨€ï¼Œè™½ç„¶åœ¨HTML5ä¸­æå‡ºäº†<strong>web workers</strong>ï¼ˆå¯ä»¥ç†è§£ä¸º<strong>æµè§ˆå™¨</strong>ä¸ºJavaScriptå¼€çš„â€œå¤–æŒ‚â€ï¼‰ï¼Œä½†JavaScriptæ˜¯å•çº¿ç¨‹è¿è¡Œçš„è¿™ä¸€æ ¸å¿ƒä»æœªæ”¹å˜ï¼Œæ‰€æœ‰å¤šçº¿ç¨‹éƒ½æ˜¯é€šè¿‡å•çº¿ç¨‹<strong>æ¨¡æ‹Ÿ</strong>å‡ºæ¥çš„</p>\n</li>\n<li><p><strong>JavaScriptä¸­çš„å¼‚æ­¥</strong> <strong>event-loop</strong></p>\n<p>JavaScriptä¸­çš„å¼‚æ­¥ä¸»è¦é€šè¿‡<strong>event loop</strong>è¿›è¡Œæ¨¡æ‹Ÿå½“æˆ‘ä»¬æ‰§è¡ŒJavaScriptä»£ç çš„æ—¶å€™å…¶å®å°±æ˜¯å¾€æ‰§è¡Œæ ˆä¸­æ”¾å…¥å‡½æ•°ï¼Œé‚£ä¹ˆé‡åˆ°å¼‚æ­¥ä»£ç æ€ä¹ˆåŠï¼Ÿå…¶å®å½“é‡åˆ°å¼‚æ­¥ä»£ç æ—¶ï¼Œä¼šè¢«æŒ‚èµ·å¹¶åœ¨éœ€è¦æ‰§è¡Œçš„æ—¶å€™åŠ å…¥åˆ°<strong>Task</strong>ï¼ˆæœ‰å¤šç§Taskï¼‰é˜Ÿåˆ—ä¸­ã€‚ä¸€æ—¦æ‰§è¡Œæ ˆä¸ºç©ºï¼Œ<strong>event loop</strong>å°±ä¼šä»<strong>Task</strong>ä¸­æ‹¿å‡ºéœ€è¦æ‰§è¡Œçš„ä»£ç å¹¶æ”¾å…¥æ‰§è¡Œæ ˆä¸­æ‰§è¡Œï¼Œæ‰€ä»¥æœ¬è´¨ä¸Šè¯´JavaScriptä¸­çš„å¼‚æ­¥è¿˜æ˜¯åŒæ­¥è¡Œä¸º</p>\n</li>\n<li><p><strong>æµè§ˆå™¨ä¸­çš„event loop</strong></p>\n<p>æ¥è‡ªä¸åŒçš„<strong>ä»»åŠ¡æº</strong>çš„ä»»åŠ¡ä¼šè¢«åˆ†é…åˆ°ä¸åŒçš„Taské˜Ÿåˆ—ä¸­ï¼Œä»»åŠ¡æºå¯ä»¥åˆ†ä¸º<strong>å¾®ä»»åŠ¡ï¼ˆmicro taskï¼‰</strong>å’Œ<strong>å®ä»»åŠ¡ï¼ˆmacro taskï¼‰</strong>ã€‚åœ¨ES6è§„èŒƒä¸­ï¼Œå¾®ä»»åŠ¡è¢«ç§°ä¸ºjobsï¼Œå®ä»»åŠ¡è¢«ç§°ä¸ºtask</p>\n<p>å¾®ä»»åŠ¡åŒ…æ‹¬ï¼š<code>precess.nextTick</code>ã€<code>promise</code>ã€<code>Mutation Observer</code></p>\n<p>å®ä»»åŠ¡åŒ…æ‹¬ï¼š<code>script</code>ã€<code>setTimeout</code>ã€<code>setInterval</code>ã€<code>setImmediate</code>ã€<code>I/O</code>ã€UI Rendering</p>\n<p><strong>å®ä»»åŠ¡ä¸­åŒ…å«äº†<code>script</code>ï¼Œå› æ­¤æµè§ˆå™¨ä¼šå…ˆæ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼Œæ¥ä¸‹æ¥ç”±å¼‚æ­¥ä»£ç çš„è¯æ‰ä¼šå…ˆæ‰§è¡Œå¾®ä»»åŠ¡</strong></p>\n<p><strong>event loopæ‰§è¡Œé¡ºåº</strong>ï¼š</p>\n<ol>\n<li>å…ˆæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œè¿™å±äºå®ä»»åŠ¡</li>\n<li>å½“<strong>æ‰§è¡Œå®Œæ‰€æœ‰åŒæ­¥ä»£ç </strong>åæ‰§è¡Œæ ˆä¸ºç©ºï¼ŒæŸ¥è¯¢æ˜¯å¦æœ‰å¼‚æ­¥ä»£ç éœ€è¦æ‰§è¡Œ</li>\n<li><strong>æ‰§è¡Œæ‰€æœ‰å¾®ä»»åŠ¡</strong></li>\n<li>å½“æ‰§è¡Œå®Œæ‰€æœ‰å¾®ä»»åŠ¡ï¼Œå¦‚æœ‰å¿…è¦ä¼šæ¸²æŸ“é¡µé¢</li>\n<li>ç„¶åå¼€å§‹ä¸‹ä¸€è½®<code>event loop</code>ï¼Œæ‰§è¡Œå®ä»»åŠ¡ä¸­çš„å¼‚æ­¥ä»£ç ä¹Ÿå°±æ˜¯<code>setTimeout</code>ï¼ˆå®ä»»åŠ¡ï¼‰ä¸­çš„å›è°ƒå‡½æ•°</li>\n</ol>\n<p><img src=\"http://mrrsblog.oss-cn-shanghai.aliyuncs.com/browser_event_loop.png\" alt=\"æµè§ˆå™¨ä¸­çš„event loop\"></p>\n<p><img src=\"http://mrrsblog.oss-cn-shanghai.aliyuncs.com/browser_event_loop2.png\" alt=\"æµè§ˆå™¨ä¸­çš„event loop\"></p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-number\">1</span>);\n<span class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-number\">2</span>);\n  <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">resolve</span>().<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-number\">3</span>);\n  });\n});\n<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve, reject</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-number\">4</span>);\n  <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">5</span>);\n}).<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">data</span> =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(data);\n});\n<span class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-number\">6</span>);\n});\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-number\">7</span>);\n\n<span class=\"hljs-comment\">// 1 4 7 5 2 3 6</span>\n</code></pre>\n</li>\n<li><p><strong>Node.jsä¸­çš„event loop</strong></p>\n<p>Node.jsä¸­çš„<code>event loop</code>åˆ†ä¸º6ä¸ªé˜¶æ®µï¼Œä»–ä»¬ä¼šæŒ‰ç…§é¡ºåºåå¤è¿è¡Œã€‚æ¯å½“è¿›å…¥æŸä¸€ä¸ªé˜¶æ®µçš„æ—¶å€™éƒ½ä¼šä»å¯¹åº”çš„å›è°ƒé˜Ÿåˆ—ä¸­å–å‡ºå‡½æ•°å»æ‰§è¡Œã€‚å½“<strong>é˜Ÿåˆ—ä¸ºç©º</strong>æˆ–è€…<strong>æ‰§è¡Œçš„å›è°ƒå‡½æ•°æ•°é‡åˆ°è¾¾ç³»ç»Ÿè®¾å®šçš„é˜ˆå€¼</strong>ï¼Œå°±ä¼šè¿›å…¥ä¸‹ä¸€é˜¶æ®µ</p>\n<p><img src=\"http://mrrsblog.oss-cn-shanghai.aliyuncs.com/node_event_loop.png\" alt=\"Node.jsä¸­çš„event loop\"></p>\n<ol>\n<li><p><strong>timers</strong></p>\n<p><strong>timers</strong>é˜¶æ®µä¼šæ‰§è¡Œ<code>setTimeout</code>å’Œ<code>setinterval</code>å›è°ƒï¼Œå¹¶ä¸”æ˜¯ç”±<strong>poll</strong>é˜¶æ®µæ§åˆ¶çš„ã€‚åŒæ ·åœ¨<code>Node.js</code>ä¸­å®šæ—¶å™¨æŒ‡å®šçš„äº‹ä»¶ä¹Ÿä¸æ˜¯å‡†ç¡®æ—¶é—´ï¼Œåªæ˜¯å°½å¿«æ‰§è¡Œ</p>\n</li>\n<li><p><strong>I/O</strong></p>\n<p><strong>I/O</strong>é˜¶æ®µä¼šå¤„ç†ä¸€äº›ä¸Šä¸€è½®å¾ªç¯ä¸­å°‘è®¸æœªæ‰§è¡Œçš„<strong>I/O</strong>å›è°ƒ</p>\n</li>\n<li><p><strong>idle,prepare</strong></p>\n</li>\n<li><p><strong>poll</strong></p>\n<p><strong>poll</strong>æ˜¯ä¸€ä¸ªè‡³å…³é‡è¦çš„é˜¶æ®µï¼Œåœ¨è¿™ä¸€é˜¶æ®µä¸­ï¼Œç³»ç»Ÿä¼šåšä¸¤ä»¶äº‹æƒ…</p>\n<ol>\n<li><p>å›åˆ°<strong>timer</strong>é˜¶æ®µæ‰§è¡Œå›è°ƒ</p>\n</li>\n<li><p>æ‰§è¡Œ<strong>I/O</strong>å›è°ƒï¼Œå¹¶ä¸”åœ¨è¿›å…¥è¯¥é˜¶æ®µæ—¶å¦‚æœæ²¡æœ‰è®¾å®šäº†<strong>timer</strong>çš„è¯ï¼Œä¼šå‘ç”Ÿä»¥ä¸‹ä¸¤ä»¶äº‹æƒ…</p>\n</li>\n</ol>\n<ul>\n<li>å¦‚æœ<strong>poll</strong>é˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œä¼šéå†å›è°ƒé˜Ÿåˆ—å¹¶åŒæ­¥æ‰§è¡Œï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºæˆ–è€…è¾¾åˆ°ç³»ç»Ÿé™åˆ¶</li>\n<li>å¦‚æœ<strong>poll</strong>é˜Ÿåˆ—ä¸ºç©º<ul>\n<li>å¦‚æœæœ‰<code>setImmediate</code>å›è°ƒéœ€è¦æ‰§è¡Œï¼Œ<strong>poll</strong>é˜¶æ®µä¼šåœæ­¢å¹¶ä¸”<strong>è¿›å…¥åˆ°checké˜¶æ®µ</strong>æ‰§è¡Œå›è°ƒ</li>\n<li>å¦‚æœæ²¡æœ‰ï¼Œä¼šç­‰å¾…å›è°ƒè¢«åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­å¹¶ç«‹å³æ‰§è¡Œå›è°ƒï¼Œè¿™é‡ŒåŒæ ·ä¼šæœ‰ä¸ªè¶…æ—¶æ—¶é—´é˜²æ­¢ä¸€ç›´ç­‰å¾…ä¸‹å»</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p><strong>check</strong></p>\n<p>æ‰§è¡Œ<code>setImmediate</code></p>\n</li>\n<li><p><strong>close callbacks</strong></p>\n<p>æ‰§è¡Œcloseäº‹ä»¶</p>\n</li>\n</ol>\n<p><img src=\"http://mrrsblog.oss-cn-shanghai.aliyuncs.com/node_event_loop2.png\" alt=\"Node.jsä¸­çš„event loop\"></p>\n</li>\n</ul>\n<h2 id=\"es6çš„ç±»å’Œes6çš„æ„é€ å‡½æ•°çš„åŒºåˆ«\">ES6çš„ç±»å’ŒES6çš„æ„é€ å‡½æ•°çš„åŒºåˆ«</h2>\n<p>åœ¨æ™®é€šä½¿ç”¨ä¸­æ²¡æœ‰åŒºåˆ«ï¼š</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">Person</span>(<span class=\"hljs-params\">name</span>) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">name</span> = name\n}\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Person</span> {\n    <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\">name</span>) {\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">name</span> = name\n    }\n}\n</code></pre>\n<p>ä¸»è¦åŒºåˆ«åœ¨äºç±»ç»§æ‰¿ä¸Šï¼š</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">Student</span>(<span class=\"hljs-params\">name, id</span>) {\n    <span class=\"hljs-title class_\">Person</span>.<span class=\"hljs-title function_\">call</span>(<span class=\"hljs-variable language_\">this</span>, name)\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">id</span> = id\n}\n<span class=\"hljs-title class_\">Student</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span> = <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">create</span>(<span class=\"hljs-title class_\">Person</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>)\n<span class=\"hljs-title class_\">Student</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">constructor</span> = <span class=\"hljs-title class_\">Student</span>\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Student</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">Person</span> {\n    <span class=\"hljs-title function_\">consreuctor</span>(<span class=\"hljs-params\">name, id</span>) {\n        <span class=\"hljs-variable language_\">super</span>(name)\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">id</span> = id\n    }\n}\n</code></pre>\n<h2 id=\"æ‰©å±•è¿ç®—ç¬¦å’Œå‰©ä½™å‚æ•°è¯­å¥çš„åŒºåˆ«\">æ‰©å±•è¿ç®—ç¬¦å’Œå‰©ä½™å‚æ•°è¯­å¥çš„åŒºåˆ«</h2>\n<p>åœ¨å‡½æ•°æ³›å‹ç¼–ç æ—¶ï¼ŒES6çš„æ‰©å±•è¿ç®—ç¬¦éå¸¸æœ‰ç”¨å—ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥è½»æ¾åˆ›å»ºæ•°ç»„å’Œå¯¹è±¡çš„æ‹·è´ï¼Œè€Œæ— éœ€ä½¿ç”¨<code>Object.create</code>ã€<code>slice</code>æˆ–å…¶ä»–å‡½æ•°åº“ã€‚</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">test</span>(<span class=\"hljs-params\">arr</span>) {\n    <span class=\"hljs-keyword\">return</span> [ ...arr, <span class=\"hljs-string\">&quot;test&quot;</span> ]\n}\n\n<span class=\"hljs-keyword\">const</span> result = <span class=\"hljs-title function_\">test</span>([<span class=\"hljs-string\">&quot;hello&quot;</span>, <span class=\"hljs-string\">&quot;world&quot;</span>])\n<span class=\"hljs-comment\">// [&quot;hello&quot;, &quot;world&quot;, &quot;test&quot;]</span>\n\n<span class=\"hljs-keyword\">const</span> person = {\n    <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;tom&quot;</span>,\n    <span class=\"hljs-attr\">age</span>: <span class=\"hljs-number\">21</span>\n}\n<span class=\"hljs-keyword\">const</span> copyPerson = { ...person }\n</code></pre>\n<p>ES6çš„å‰©ä½™å‚æ•°è¯­å¥æä¾›äº†ä¸€ä¸ªç®€å†™ï¼Œå…è®¸æˆ‘ä»¬å°†ä¸å®šæ•°é‡çš„å‚æ•°è¡¨ç¤ºä¸ºä¸€ä¸ª<strong>æ•°ç»„</strong>ï¼Œå®ƒå°±åƒæ‰©å±•è¿ç®—ç¬¦è¯­æ³•çš„åé¢ï¼Œå°†æ•°æ®æ”¶é›†åˆ°æ•°ç»„ä¸­è€Œä¸æ˜¯è§£æ„æ•°ç»„ã€‚å‰©ä½™å‚æ•°è¯­å¥åœ¨å‡½æ•°å‚æ•°ã€æ•°ç»„å’Œå¯¹è±¡çš„è§£æ„èµ‹å€¼ä¸­æœ‰å¾ˆå¤§ä½œç”¨</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">test</span>(<span class=\"hljs-params\">...numbers</span>) {\n    <span class=\"hljs-keyword\">return</span> numbers.<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">x</span> =&gt;</span> x + <span class=\"hljs-number\">5</span>)\n}\n\n<span class=\"hljs-keyword\">const</span> result1 = <span class=\"hljs-title function_\">test</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>)\n<span class=\"hljs-comment\">// [6, 7, 8, 9]</span>\n<span class=\"hljs-keyword\">const</span> result2 = <span class=\"hljs-title function_\">test</span>(<span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">6</span>, <span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">9</span>)\n<span class=\"hljs-comment\">// [10, 11, 12, 13, 14]</span>\n\n<span class=\"hljs-keyword\">const</span> [ a, b, ...rest ] = [<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>]\n<span class=\"hljs-comment\">// 1 2 [ 3, 4 ]</span>\n</code></pre>\n<h2 id=\"å†…ç½®ç±»å‹\">å†…ç½®ç±»å‹</h2>\n<p>JavaScriptä¸­åˆ†ä¸º<strong>ä¸ƒç§</strong>å†…ç½®ç±»å‹ï¼Œå…¶ä¸­å†…ç½®ç±»å‹åˆåˆ†ä¸ºä¸¤å¤§ç±»å‹ï¼š<strong>åŸºæœ¬ç±»å‹</strong>å’Œ<strong>å¼•ç”¨ç±»å‹</strong>ï¼ˆå¯¹è±¡ Objectï¼‰</p>\n<p>åŸºæœ¬ç±»å‹ï¼š<code>null</code>ã€<code>undefined</code>ã€<code>boolean</code>ã€<code>number</code>ã€<code>string</code>ã€<code>symbol</code></p>\n<p>å…¶ä¸­JavaScriptçš„æ•°å­—ç±»å‹æ˜¯æµ®ç‚¹ç±»å‹çš„ï¼Œæ²¡æœ‰æ•´å½¢ã€‚å¹¶ä¸”æµ®ç‚¹ç±»å‹åŸºäº IEEE 754 æ ‡å‡†å®ç°ï¼Œåœ¨ä½¿ç”¨ä¸­ä¼šé‡åˆ°æŸäº› <a href=\"#2\">Bug </a><code>NaN</code>ä¹Ÿå±äº<code>number</code>ç±»å‹å¹¶ä¸”<code>NaN</code>å¹¶ä¸ç­‰äºè‡ªèº«</p>\n<p>å¯¹äºåŸºæœ¬ç±»å‹æ¥è¯´ï¼Œå¦‚æœä½¿ç”¨å­—é¢é‡çš„æ–¹å¼ï¼Œé‚£ä¸ªè¿™ä¸ªå˜é‡åªæ˜¯ä¸ªå­—é¢é‡ï¼Œåªæœ‰åœ¨å¿…è¦çš„æ—¶å€™æ‰ä¼šè½¬æ¢æˆå¯¹åº”çš„ç±»å‹</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">let</span> a = <span class=\"hljs-number\">111</span> <span class=\"hljs-comment\">// è¿™åªæ˜¯å­—é¢é‡ï¼Œä¸æ˜¯numberç±»å‹</span>\na.<span class=\"hljs-title function_\">toString</span>() <span class=\"hljs-comment\">// ä½¿ç”¨çš„æ—¶å€™æ‰ä¼šè½¬æ¢ä¸ºå¯¹è±¡ç±»å‹</span>\n</code></pre>\n<p>å¼•ç”¨ç±»å‹åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¼šé‡åˆ°æ·±æ‹·è´å’Œæµ…æ‹·è´é—®é¢˜</p>\n<h2 id=\"typeof\">Typeof</h2>\n<p><code>typeof</code>å¯¹äºåŸºæœ¬ç±»å‹ï¼Œé™¤äº†<code>null</code>éƒ½å¯ä»¥æ˜¾ç¤ºæ­£ç¡®çš„ç±»å‹</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">typeof</span> <span class=\"hljs-number\">1</span> <span class=\"hljs-comment\">// number</span>\n<span class=\"hljs-keyword\">typeof</span> <span class=\"hljs-string\">&#x27;1&#x27;</span> <span class=\"hljs-comment\">// string</span>\n<span class=\"hljs-keyword\">typeof</span> <span class=\"hljs-literal\">undefined</span> <span class=\"hljs-comment\">// undefined</span>\n<span class=\"hljs-keyword\">typeof</span> <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\">// boolean</span>\n<span class=\"hljs-keyword\">typeof</span> <span class=\"hljs-title class_\">Symbol</span>() <span class=\"hljs-comment\">// symbol</span>\n</code></pre>\n<p><code>typeof</code>å¯¹äºå¯¹è±¡ï¼Œé™¤äº†å‡½æ•°éƒ½ä¼šæ˜¾ç¤º<code>object</code></p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">typeof</span> [] <span class=\"hljs-comment\">// object</span>\n<span class=\"hljs-keyword\">typeof</span> {} <span class=\"hljs-comment\">// object</span>\n<span class=\"hljs-keyword\">typeof</span> <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-property\">log</span> <span class=\"hljs-comment\">// function</span>\n\n<span class=\"hljs-keyword\">typeof</span> <span class=\"hljs-literal\">null</span> <span class=\"hljs-comment\">// object</span>\n</code></pre>\n<p>å…³äºä¸ºä»€ä¹ˆ<code>typeof null == object</code>ï¼šåœ¨JavaScriptçš„æœ€åˆç‰ˆæœ¬ä¸­ï¼Œä½¿ç”¨çš„æ˜¯32ä¸ºç³»ç»Ÿï¼Œä¸ºäº†æ€§èƒ½è€ƒè™‘ä½¿ç”¨ä½ä½å­˜å‚¨äº†å˜é‡çš„ç±»å‹ä¿¡æ¯ã€‚<code>000</code>å¼€å¤´çš„ä»£è¡¨æ˜¯å¯¹è±¡ï¼Œç„¶è€Œ<code>null</code>è¡¨ç¤ºä¸ºå…¨é›¶ï¼Œæ‰€ä»¥å°†å®ƒé”™è¯¯çš„åˆ¤æ–­ä¸º<code>object</code></p>\n<p>å¦‚æœæƒ³å¾—åˆ°ä¸€ä¸ªæ­£ç¡®çš„æ•°æ®ç±»å‹ï¼Œä½¿ç”¨<code>Object.prototype.toString.call(xxx)</code></p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">toString</span>.<span class=\"hljs-title function_\">call</span>([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>])\n</code></pre>\n<h2 id=\"instanceof\">instanceof</h2>\n<p><code>instance</code>å¯ä»¥æ­£ç¡®çš„åˆ¤æ–­å¯¹è±¡çš„ç±»å‹ï¼Œå› ä¸ºå†…éƒ¨æœºåˆ¶æ˜¯é€šè¿‡åˆ¤æ–­å¯¹è±¡çš„åŸå‹é“¾ä¸­æ˜¯ä¸æ˜¯èƒ½æ­£ç¡®çš„æ‰¾åˆ°ç±»å‹çš„<code>prototype</code></p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">instanceof</span>(<span class=\"hljs-params\">left, right</span>) {\n    <span class=\"hljs-keyword\">let</span> prototype = right.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>\n    left = left.<span class=\"hljs-property\">__proto__</span>\n    <span class=\"hljs-keyword\">while</span>(<span class=\"hljs-literal\">true</span>) {\n        <span class=\"hljs-keyword\">if</span> (left === <span class=\"hljs-literal\">null</span>)\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>\n        <span class=\"hljs-keyword\">if</span> (prototypr === left)\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>\n        left = left.<span class=\"hljs-property\">__proto__</span>\n    }\n}\n</code></pre>\n<h2 id=\"new\">new</h2>\n<p>åœ¨è°ƒç”¨<code>new</code>çš„è¿‡ç¨‹ä¸­ä¼šå‘ç”Ÿä»¥ä¸‹å››ä»¶äº‹æƒ…</p>\n<ol>\n<li>æ–°ç”Ÿæˆäº†ä¸€ä¸ªå¯¹è±¡</li>\n<li>ç»‘å®šåˆ°åŸå‹</li>\n<li>ç»‘å®š<code>this</code></li>\n<li>è¿”å›æ–°å¯¹è±¡</li>\n</ol>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">create</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">let</span> obj = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Object</span>()\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-title class_\">Con</span> = [].<span class=\"hljs-property\">shift</span>.<span class=\"hljs-title function_\">call</span>(<span class=\"hljs-variable language_\">arguments</span>)\n    obj.<span class=\"hljs-property\">__proto__</span> = <span class=\"hljs-title class_\">Con</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>\n    <span class=\"hljs-keyword\">let</span> result = <span class=\"hljs-title class_\">Con</span>.<span class=\"hljs-title function_\">apply</span>(obj, <span class=\"hljs-variable language_\">arguments</span>)\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">typeof</span> result === <span class=\"hljs-string\">&#x27;object&#x27;</span> ? result : obj\n}\n</code></pre>\n"},{"title":"JavaScript-æ¨¡å—åŒ–æœºåˆ¶","tags":["JavaScriptæ¨¡å—åŒ–æœºåˆ¶"],"categories":"JavaScript","description":"# AMD\n\n## ç®€ä»‹\n\nå…¨ç§°æ˜¯Asynchronous Module Definitionï¼ˆå¼‚æ­¥æ¨¡å—åŠ è½½æœºåˆ¶ï¼‰ã€‚åæ¥ç”±è¯¥è‰æ¡ˆçš„ä½œè€…ä»¥RequireJSå®ç°äº†è¯¥è§„èŒƒï¼Œæ‰€ä»¥ä¸€èˆ¬è¯´AMDä¹Ÿæ˜¯æŒ‡RequireJSã€‚é€‚ç”¨äº**æµè§ˆå™¨ç¯å¢ƒ**\n\n## ç”¨æ³•\n\n```js\n// a.js\ndefine(function () {\n\treturn 1\n})\n\n// b.js\nrequire(['a'],","createDate":"2020-04-24 22:55:14","updateDate":"2021-05-13 14:16:51","body":"<h1 id=\"amd\">AMD</h1>\n<h2 id=\"ç®€ä»‹\">ç®€ä»‹</h2>\n<p>å…¨ç§°æ˜¯Asynchronous Module Definitionï¼ˆå¼‚æ­¥æ¨¡å—åŠ è½½æœºåˆ¶ï¼‰ã€‚åæ¥ç”±è¯¥è‰æ¡ˆçš„ä½œè€…ä»¥RequireJSå®ç°äº†è¯¥è§„èŒƒï¼Œæ‰€ä»¥ä¸€èˆ¬è¯´AMDä¹Ÿæ˜¯æŒ‡RequireJSã€‚é€‚ç”¨äº<strong>æµè§ˆå™¨ç¯å¢ƒ</strong></p>\n<h2 id=\"ç”¨æ³•\">ç”¨æ³•</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// a.js</span>\n<span class=\"hljs-title function_\">define</span>(<span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">1</span>\n})\n\n<span class=\"hljs-comment\">// b.js</span>\n<span class=\"hljs-built_in\">require</span>([<span class=\"hljs-string\">&#x27;a&#x27;</span>], <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">a</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(a)\n})\n</code></pre>\n<h2 id=\"ç‰¹ç‚¹\">ç‰¹ç‚¹</h2>\n<p>å¯¹äºä¾èµ–çš„æ¨¡å—ï¼ŒAMDæ¨å´‡<strong>ä¾èµ–å‰ç½®ï¼Œæå‰æ‰§è¡Œ</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨<code>define</code>æ–¹æ³•é‡Œä¼ å…¥çš„ä¾èµ–æ¨¡å—ï¼ˆæ•°ç»„ï¼‰ä¼šåœ¨ä¸€æ¥æ˜¯å°±ä¸‹è½½å¹¶æ‰§è¡Œ</p>\n<h1 id=\"commonjs\">CommonJS</h1>\n<h2 id=\"ç®€ä»‹-1\">ç®€ä»‹</h2>\n<p>ç”±CommonJSå°ç»„æ‰€æå‡ºï¼Œç›®çš„æ˜¯å¼¥è¡¥JavaScriptåœ¨æœåŠ¡ç«¯ç¼ºå°‘æ¨¡å—åŒ–æœºåˆ¶ã€‚<strong>Node.jsã€webpack</strong>éƒ½æ˜¯åŸºäºè¯¥è§„èŒƒå®ç°</p>\n<h2 id=\"ç”¨æ³•-1\">ç”¨æ³•</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// a.js</span>\n<span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;i am a function&quot;</span>)\n}\n\n<span class=\"hljs-comment\">// b.js</span>\n<span class=\"hljs-keyword\">const</span> a = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;./a.js&quot;</span>)\n<span class=\"hljs-title function_\">a</span>()\n<span class=\"hljs-comment\">// a.js</span>\n<span class=\"hljs-built_in\">exports</span>.<span class=\"hljs-property\">num</span> = <span class=\"hljs-number\">1</span>\n<span class=\"hljs-built_in\">exports</span>.<span class=\"hljs-property\">obj</span> = { <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&#x27;zhangsan&#x27;</span> }\n\n<span class=\"hljs-comment\">// b.js</span>\n<span class=\"hljs-keyword\">const</span> a = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;./a.js&quot;</span>)\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(a) <span class=\"hljs-comment\">// { num: 1, obj: { name: &#x27;zhangsan&#x27; } }</span>\n</code></pre>\n<h2 id=\"ç‰¹ç‚¹-1\">ç‰¹ç‚¹</h2>\n<ul>\n<li>æ‰€æœ‰ä»£ç éƒ½è¿è¡Œåœ¨æ¨¡å—ä½œç”¨åŸŸï¼Œä¸ä¼šæ±¡æŸ“å…¨å±€ç¯å¢ƒ</li>\n<li>æ¨¡å—æ˜¯åŒæ­¥åŠ è½½çš„ï¼Œå³åªæœ‰åŠ è½½å®Œæˆæ¬¡å•Šèƒ½æ‰§è¡Œåé¢çš„æ“ä½œ</li>\n<li>æ¨¡å—åœ¨é¦–æ¬¡æ‰§è¡Œåå°±ä¼š<strong>ç¼“å­˜</strong>ï¼Œå†æ¬¡åŠ è½½åªè¿”å›ç¼“å­˜ç»“æœï¼Œå¦‚æœæƒ³è¦å†æ¬¡æ‰§è¡Œï¼Œå¯æ¸…é™¤ç¼“å­˜</li>\n<li>CommonJS <strong>è¾“å‡ºçš„æ˜¯å€¼çš„æ‹·è´</strong></li>\n<li><code>this</code>æŒ‡å‘å½“å‰æ¨¡å—</li>\n</ul>\n<h1 id=\"esm\">ESM</h1>\n<h2 id=\"ç®€ä»‹-2\">ç®€ä»‹</h2>\n<p>ES6å®šä¹‰çš„æ¨¡å—åŒ–è§„èŒƒ</p>\n<h2 id=\"åŸºæœ¬ç”¨æ³•\">åŸºæœ¬ç”¨æ³•</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// a.js</span>\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> name = <span class=\"hljs-string\">&quot;zhangsan&quot;</span>\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> age = <span class=\"hljs-number\">23</span>\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> {\n    <span class=\"hljs-attr\">address</span>: <span class=\"hljs-string\">&quot;shanghai&quot;</span>\n}\n\n<span class=\"hljs-comment\">// b.js</span>\n<span class=\"hljs-keyword\">import</span> address, { name, age } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;./a.js&quot;</span>\n\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(address, name, age) <span class=\"hljs-comment\">// &quot;shanghai&quot; &quot;zhangsan&quot; 23</span>\n</code></pre>\n<h2 id=\"ç‰¹ç‚¹-2\">ç‰¹ç‚¹</h2>\n<ul>\n<li>ç¼–è¯‘æ—¶è¾“å‡ºæ¥å£</li>\n<li>å¯ä»¥å•ç‹¬åŠ è½½æ¨¡å—æŸä¸ªæ¥å£</li>\n<li>è¾“å‡ºçš„æ˜¯å¼•ç”¨</li>\n<li><code>this</code>æŒ‡å‘<code>undefined</code></li>\n</ul>\n<h1 id=\"esm-vs-commonjs\">ESM VS CommonJS</h1>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>CommonJS</th>\n<th>ESM</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>åŠ è½½æ—¶é—´</td>\n<td>è¿è¡Œæ—¶åŠ è½½</td>\n<td>ç¼–è¯‘æ—¶è¾“å‡ºæ¥å£</td>\n</tr>\n<tr>\n<td>åŠ è½½æ–¹å¼</td>\n<td>åŠ è½½æ•´ä¸ªæ¨¡å—</td>\n<td>æŒ‰éœ€åŠ è½½</td>\n</tr>\n<tr>\n<td>è¾“å‡ºæ–¹å¼</td>\n<td>å€¼çš„æ‹·è´</td>\n<td>å€¼çš„å¼•ç”¨</td>\n</tr>\n<tr>\n<td><code>this</code></td>\n<td>æŒ‡å‘å½“å‰æ¨¡å—</td>\n<td><code>undefined</code></td>\n</tr>\n</tbody></table>\n"},{"title":"ç½‘ç»œå¤ä¹ -WebSocket","tags":["WebSocket"],"categories":"2021å¤ä¹ ","description":"## WebSocketæ˜¯ä»€ä¹ˆ\n\nHTML5å¼€å§‹æä¾›çš„ä¸€ç§æµè§ˆå™¨ä¸æœåŠ¡å™¨è¿›è¡Œ**å…¨åŒå·¥é€šè®¯**çš„ç½‘ç»œæŠ€æœ¯ï¼Œå±äº**åº”ç”¨å±‚åè®®**ã€åŸºäº**TCP**ã€**å¤ç”¨HTTPçš„æ¡æ‰‹é€šé“**\n\n## å’Œé•¿è½®è®­çš„åŒºåˆ«\n\né•¿è½®è®­å°±æ˜¯å®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼ŒæœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚åï¼ŒæœåŠ¡ç«¯ä¸ä¼šç›´æ¥è¿›è¡Œå“åº”ï¼Œè€Œæ˜¯å…ˆå°†è¿™ä¸ªè¯·æ±‚æŒ‚èµ·ï¼Œç„¶ååˆ¤æ–­è¯·æ±‚çš„æ•°æ®æ˜¯å¦æœ‰æ›´æ–°ï¼Œå¦‚æœæœ‰æ›´æ–°ï¼Œåˆ™è¿›è¡Œæ›´æ–°ï¼Œå¦‚æœä¸€ç›´æ²¡æœ‰æ•°æ®ï¼Œåˆ™ç­‰å¾…ä¸€å®š","createDate":"2021-05-10 05:04:10","updateDate":"2021-05-10 18:53:03","body":"<h2 id=\"websocketæ˜¯ä»€ä¹ˆ\">WebSocketæ˜¯ä»€ä¹ˆ</h2>\n<p>HTML5å¼€å§‹æä¾›çš„ä¸€ç§æµè§ˆå™¨ä¸æœåŠ¡å™¨è¿›è¡Œ<strong>å…¨åŒå·¥é€šè®¯</strong>çš„ç½‘ç»œæŠ€æœ¯ï¼Œå±äº<strong>åº”ç”¨å±‚åè®®</strong>ã€åŸºäº<strong>TCP</strong>ã€<strong>å¤ç”¨HTTPçš„æ¡æ‰‹é€šé“</strong></p>\n<h2 id=\"å’Œé•¿è½®è®­çš„åŒºåˆ«\">å’Œé•¿è½®è®­çš„åŒºåˆ«</h2>\n<p>é•¿è½®è®­å°±æ˜¯å®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼ŒæœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚åï¼ŒæœåŠ¡ç«¯ä¸ä¼šç›´æ¥è¿›è¡Œå“åº”ï¼Œè€Œæ˜¯å…ˆå°†è¿™ä¸ªè¯·æ±‚æŒ‚èµ·ï¼Œç„¶ååˆ¤æ–­è¯·æ±‚çš„æ•°æ®æ˜¯å¦æœ‰æ›´æ–°ï¼Œå¦‚æœæœ‰æ›´æ–°ï¼Œåˆ™è¿›è¡Œæ›´æ–°ï¼Œå¦‚æœä¸€ç›´æ²¡æœ‰æ•°æ®ï¼Œåˆ™ç­‰å¾…ä¸€å®šçš„æ—¶é—´åè¿”å›</p>\n<h2 id=\"å¦‚ä½•å»ºç«‹è¿æ¥\">å¦‚ä½•å»ºç«‹è¿æ¥</h2>\n<p><code>WebSocket</code>å¤ç”¨äº†<code>HTTP</code>çš„æ¡æ‰‹é€šé“ã€‚å®¢æˆ·ç«¯é€šè¿‡<code>HTTP</code>è¯·æ±‚ä¸<code>WebSocket</code>æœåŠ¡å™¨åå•†<strong>å‡çº§åè®®</strong>ï¼Œåè®®å‡çº§å®Œæˆåï¼Œåç»­çš„æ•°æ®äº¤æ¢åˆ™æŒ‰ç…§<code>WebSocket</code>çš„åè®®ã€‚</p>\n<p>é¦–å…ˆï¼Œå®¢æˆ·ç«¯å‘èµ·åè®®å‡çº§è¯·æ±‚</p>\n<pre><code class=\"hljs language-http\"><span class=\"hljs-keyword\">GET</span> <span class=\"hljs-string\">ws://localhost:8080/</span> <span class=\"hljs-meta\">HTTP/1.1</span>\n<span class=\"hljs-attribute\">Connection</span><span class=\"hljs-punctuation\">: </span>Upgrade\n<span class=\"hljs-attribute\">Host</span><span class=\"hljs-punctuation\">: </span>localhost:8080\n<span class=\"hljs-attribute\">Origin</span><span class=\"hljs-punctuation\">: </span>http://localhost:3000\n<span class=\"hljs-attribute\">Sec-WebSocket-Extensions</span><span class=\"hljs-punctuation\">: </span>permessage-deflate; client_max_window_bits\n<span class=\"hljs-attribute\">Sec-WebSocket-Key</span><span class=\"hljs-punctuation\">: </span>wXE7gVKUV5flJWEnJLr8pw==\n<span class=\"hljs-attribute\">Sec-WebSocket-Version</span><span class=\"hljs-punctuation\">: </span>13\n<span class=\"hljs-attribute\">Upgrade</span><span class=\"hljs-punctuation\">: </span>websocket\n</code></pre>\n<p>ç„¶åæœåŠ¡ç«¯å“åº”åè®®å‡çº§</p>\n<pre><code class=\"hljs language-http\"><span class=\"hljs-meta\">HTTP/1.1</span> <span class=\"hljs-number\">101</span> Switching Protocols\n<span class=\"hljs-attribute\">Upgrade</span><span class=\"hljs-punctuation\">: </span>websocket\n<span class=\"hljs-attribute\">Connection</span><span class=\"hljs-punctuation\">: </span>Upgrade\n<span class=\"hljs-attribute\">Sec-WebSocket-Accept</span><span class=\"hljs-punctuation\">: </span>DeY5PvpKJhTquRvvA7TPBcinVBk=\n</code></pre>\n<p>ä»£ç æ¼”ç¤ºï¼š</p>\n<p>æœåŠ¡ç«¯(ä½¿ç”¨<code>ws</code>åº“)ï¼š</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> express = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;express&quot;</span>);\n<span class=\"hljs-keyword\">const</span> ws = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;ws&quot;</span>);\n\n<span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title function_\">express</span>();\n<span class=\"hljs-keyword\">const</span> wsServer = <span class=\"hljs-keyword\">new</span> ws.<span class=\"hljs-title class_\">Server</span>({ <span class=\"hljs-attr\">port</span>: <span class=\"hljs-number\">8080</span> });\n\nwsServer.<span class=\"hljs-title function_\">on</span>(<span class=\"hljs-string\">&quot;connection&quot;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">ws</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;server: connected to a client&quot;</span>);\n  ws.<span class=\"hljs-title function_\">on</span>(<span class=\"hljs-string\">&quot;message&quot;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">msg</span>) =&gt;</span> {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">`server: message receive from client--<span class=\"hljs-subst\">${msg}</span>`</span>);\n  });\n  ws.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&quot;hello client&quot;</span>);\n  ws.<span class=\"hljs-title function_\">ping</span>(<span class=\"hljs-string\">&quot;&quot;</span>, <span class=\"hljs-literal\">false</span>, <span class=\"hljs-function\">() =&gt;</span> {});\n});\n\napp.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&quot;/&quot;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> {\n  res.<span class=\"hljs-title function_\">sendFile</span>(<span class=\"hljs-string\">`<span class=\"hljs-subst\">${__dirname}</span>/index.html`</span>);\n})\n\napp.<span class=\"hljs-title function_\">listen</span>(<span class=\"hljs-number\">3000</span>);\n</code></pre>\n<p>å®¢æˆ·ç«¯ï¼š</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-keyword\">html</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">&quot;en&quot;</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">charset</span>=<span class=\"hljs-string\">&quot;UTF-8&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">http-equiv</span>=<span class=\"hljs-string\">&quot;X-UA-Compatible&quot;</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">&quot;IE=edge&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;viewport&quot;</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>Document<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">main</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;container&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onclick</span>=<span class=\"hljs-string\">&quot;sendMessage()&quot;</span>&gt;</span>sendMessage<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">main</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n    <span class=\"hljs-keyword\">const</span> wsClient = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">WebSocket</span>(<span class=\"hljs-string\">&quot;ws://localhost:8080&quot;</span>);\n    wsClient.<span class=\"hljs-property\">onopen</span> = <span class=\"hljs-function\">() =&gt;</span> {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;client: connected to server&quot;</span>);\n    }\n    wsClient.<span class=\"hljs-property\">onmessage</span> = <span class=\"hljs-function\">(<span class=\"hljs-params\">msg</span>) =&gt;</span> {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">`client: receive from server--<span class=\"hljs-subst\">${msg.data}</span>`</span>);\n    }\n\n    <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">sendMessage</span>(<span class=\"hljs-params\"></span>) {\n      wsClient.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&quot;hello server&quot;</span>);\n    }\n  </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n</code></pre>\n<p>è¿è¡Œç»“æœï¼š</p>\n<pre><code class=\"hljs language-shell\"><span class=\"hljs-meta\"># </span><span class=\"language-bash\">å®¢æˆ·ç«¯</span>\nclient: connected to server\nclient: receive from server--hello client\n<span class=\"hljs-meta\">\n# </span><span class=\"language-bash\">æœåŠ¡ç«¯</span>\nserver: connected to a client\n</code></pre>\n<h2 id=\"æ•°æ®äº¤æ¢\">æ•°æ®äº¤æ¢</h2>\n<p>ä¸€æ—¦<code>WebSocket</code>å®¢æˆ·ç«¯ã€æœåŠ¡ç«¯å»ºç«‹è¿æ¥åï¼Œåç»­çš„æ“ä½œéƒ½æ˜¯åŸºäº<strong>æ•°æ®å¸§</strong>çš„ä¼ é€’</p>\n<p><code>WebSocket</code>æ ¹æ®<code>opcode</code>æ¥åŒºåˆ†æ“ä½œçš„ç±»å‹ã€‚æ¯”å¦‚<code>0x8</code>è¡¨ç¤ºæ–­å¼€è¿æ¥ï¼Œ<code>0x0-0x2</code>è¡¨ç¤ºæ•°æ®äº¤äº’</p>\n<p>æ•°æ®åˆ†ç‰‡ï¼š</p>\n<p><code>WebSocket</code>çš„æ¯æ¡æ¶ˆæ¯å¯èƒ½è¢«åˆ‡åˆ†æˆå¤šä¸ªæ•°æ®å¸§ã€‚å½“<code>WebSocket</code>çš„æ¥æ”¶æ–¹æ¥æ”¶åˆ°ä¸€ä¸ªæ•°æ®å¸§æ—¶ï¼Œä¼šæ ¹æ®FINçš„å€¼è¿›è¡Œåˆ¤æ–­ï¼Œæ˜¯å¦å·²ç»æ”¶åˆ°æ¶ˆæ¯çš„æœ€åä¸€ä¸ªæ•°æ®å¸§</p>\n<pre><code class=\"hljs language-http\"># ä¸€ä¸ªå®Œæ•´çš„æ¶ˆæ¯(FIN=1ä¸”opcode != 0x0)\n<span class=\"hljs-attribute\">Client</span><span class=\"hljs-punctuation\">: </span>FIN=1, opcode=0x1, msg=&quot;hello&quot;\n<span class=\"hljs-attribute\">Server</span><span class=\"hljs-punctuation\">: </span>(process complete message immediately) Hi.\n\n# æ–‡æœ¬æ¶ˆæ¯ä¸”æ¶ˆæ¯è¿˜æ²¡å‘é€å®Œæˆ\n<span class=\"hljs-attribute\">Client</span><span class=\"hljs-punctuation\">: </span>FIN=0, opcode=0x1, msg=&quot;and a&quot;\n<span class=\"hljs-attribute\">Server</span><span class=\"hljs-punctuation\">: </span>(listening, new message containing text started)\n# å»¶ç»­å¸§\n<span class=\"hljs-attribute\">Client</span><span class=\"hljs-punctuation\">: </span>FIN=0, opcode=0x0, msg=&quot;happy new&quot;\n<span class=\"hljs-attribute\">Server</span><span class=\"hljs-punctuation\">: </span>(listening, payload concatenated to previous message)\n# æœ€ç»ˆå¸§\n<span class=\"hljs-attribute\">Client</span><span class=\"hljs-punctuation\">: </span>FIN=1, opcode=0x0, msg=&quot;year!&quot;\n<span class=\"hljs-attribute\">Server</span><span class=\"hljs-punctuation\">: </span>(process complete message) Happy new year to you too!\n</code></pre>\n<h2 id=\"å¿ƒè·³\">å¿ƒè·³</h2>\n<p>åœ¨Websocketä¸­å®šä¹‰äº†<strong>å¿ƒè·³ping(0x9)</strong> å’Œ <strong>å¿ƒè·³pong(0xA)</strong> çš„æ§åˆ¶å¸§</p>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://juejin.cn/post/6844903544978407431\">WebSocketï¼š5åˆ†é’Ÿä»å…¥é—¨åˆ°ç²¾é€š\n</a></p>\n"},{"title":"å‰ç«¯æ¶æ„&è½¯å®åŠ›-å‰ç«¯æ‹¾é—","tags":["å‰ç«¯æ‹¾é—"],"categories":"å‰ç«¯æ¶æ„&è½¯å®åŠ›","description":"## domäº‹ä»¶æœºåˆ¶\n\näº‹ä»¶è§¦å‘åæœ‰ä¸‰ä¸ªé˜¶æ®µ\n\n1. äº‹ä»¶æ•è·é˜¶æ®µ\n2. å‘½ä¸­ç›®æ ‡ï¼ˆè§¦å‘å…¥å£ï¼‰\n3. äº‹ä»¶å†’æ³¡é˜¶æ®µ\n\n![dom äº‹ä»¶æœºåˆ¶](https://mrrsblog.oss-cn-shanghai.aliyuncs.com/20160928221704676.png)\n\n## flexæ¯è¡Œä¸¤ä¸ªå…ƒç´ \n\n``` css\n.container {\n\tdisplay: flex;\n  \tfl","createDate":"2021-01-04 14:58:02","updateDate":"2021-05-09 10:51:11","body":"<h2 id=\"domäº‹ä»¶æœºåˆ¶\">domäº‹ä»¶æœºåˆ¶</h2>\n<p>äº‹ä»¶è§¦å‘åæœ‰ä¸‰ä¸ªé˜¶æ®µ</p>\n<ol>\n<li>äº‹ä»¶æ•è·é˜¶æ®µ</li>\n<li>å‘½ä¸­ç›®æ ‡ï¼ˆè§¦å‘å…¥å£ï¼‰</li>\n<li>äº‹ä»¶å†’æ³¡é˜¶æ®µ</li>\n</ol>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/20160928221704676.png\" alt=\"dom äº‹ä»¶æœºåˆ¶\"></p>\n<h2 id=\"flexæ¯è¡Œä¸¤ä¸ªå…ƒç´ \">flexæ¯è¡Œä¸¤ä¸ªå…ƒç´ </h2>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-selector-class\">.container</span> {\n    <span class=\"hljs-attribute\">display</span>: flex;\n      <span class=\"hljs-attribute\">flex-wrap</span>: wrap;\n}\n\n<span class=\"hljs-selector-class\">.item</span> {\n    <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">50%</span>;\n}\n</code></pre>\n<h2 id=\"eventå¯¹è±¡ä¸­-targetå’Œcurrenttarget-å±æ€§çš„åŒºåˆ«\">eventå¯¹è±¡ä¸­ targetå’ŒcurrentTarget å±æ€§çš„åŒºåˆ«</h2>\n<ul>\n<li>event.targetè¿”å›è§¦å‘äº‹ä»¶çš„å…ƒç´ </li>\n<li>event.currentTargetè¿”å›ç»‘å®šäº‹ä»¶çš„å…ƒç´ </li>\n</ul>\n<h2 id=\"cleartimeout\">clearTimeout</h2>\n<p><code>clearTimeout(tid)</code>åªæ˜¯å°†<code>tid</code>æŒ‡å‘çš„å®šæ—¶å™¨å…³é—­ï¼Œå¹¶ä¸ä¼šå°†<code>tid</code>ç½®ä¸º<code>null</code></p>\n<p>å¦‚æœä¸åœ¨é€‚å½“çš„æ—¶æœºæ¸…é™¤å®šæ—¶å™¨ï¼Œæ¯æ¬¡äº‹ä»¶è§¦å‘éƒ½ä¼šå¤šä¸€ä¸ªå»¶æ—¶å™¨ï¼Œå»¶æ—¶å™¨ä¹‹é—´äº’ç›¸å¹²æ‰°ï¼Œé€ æˆç´Šä¹±ã€‚</p>\n<h2 id=\"jsonstringify\">JSON.stringify()</h2>\n<p>åŸºæœ¬ç”¨æ³•ï¼š</p>\n<ul>\n<li><p>é»˜è®¤æƒ…å†µä¸‹JSON.stringify()ä¼šè¾“å‡ºä¸åŒ…å«ç©ºæ ¼æˆ–ç¼©è¿›çš„JSONå­—ç¬¦ä¸²</p>\n</li>\n<li><p>åœ¨åºåˆ—åŒ–JavaScriptå¯¹è±¡æ—¶ï¼Œæ‰€æœ‰å‡½æ•°å’ŒåŸå‹æˆå‘˜éƒ½ä¼šæœ‰æ„åœ°åœ¨ç»“æœä¸­çœç•¥ã€‚æ­¤å¤–ï¼Œå€¼ä¸º<code>undefined</code>å’Œ<code>Symbol</code>çš„ä»»ä½•å±æ€§ä¹Ÿä¼šè¢«è·³è¿‡ã€‚æœ€ç»ˆå¾—åˆ°çš„å°±æ˜¯æ‰€æœ‰å®ä¾‹å±æ€§å‡ä¸ºæœ‰æ•ˆJSONæ•°æ®ç±»å‹çš„è¡¨ç¤ºã€‚æ­£åˆ™åˆ™ä¼šå˜ä¸ºç©ºå¯¹è±¡</p>\n</li>\n<li><p>ä¸€å…±èƒ½æ¥å—3ä¸ªå‚æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¿‡æ»¤å™¨ï¼Œå¯ä»¥æ˜¯æ•°ç»„æˆ–å‡½æ•°ï¼›ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ç”¨äºç¼©è¿›ç»“æœJSONå­—ç¬¦ä¸²çš„é€‰é¡¹</p>\n</li>\n</ul>\n<p>ç¬¬äºŒä¸ªå‚æ•°ï¼š</p>\n<ul>\n<li><p>å¦‚æœç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé‚£ä¹ˆ<code>JSON.stringify()</code>è¿”å›çš„ç»“æœä¸­åªåŒ…å«è¯¥æ•°ç»„ä¸­åˆ—å‡ºçš„å¯¹è±¡å±æ€§ï¼š</p>\n</li>\n<li><p>å¦‚æœç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™è¡Œä¸ºåˆæœ‰ä¸åŒã€‚æä¾›çš„å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šå±æ€§åï¼ˆkeyï¼‰å’Œå±æ€§å€¼ï¼ˆvalueï¼‰ã€‚å¯ä»¥æ ¹æ®è¿™ä¸ªkeyå†³å®šè¦å¯¹ç›¸åº”å±æ€§æ‰§è¡Œä»€ä¹ˆæ“ä½œ</p>\n</li>\n</ul>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> userInfo = {\n    <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;tom&quot;</span>,\n    <span class=\"hljs-attr\">age</span>: <span class=\"hljs-number\">23</span>,\n    <span class=\"hljs-attr\">address</span>: <span class=\"hljs-string\">&quot;Shanghai&quot;</span>\n}\n\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">stringify</span>(userInfo, [<span class=\"hljs-string\">&quot;name&quot;</span>]));\n<span class=\"hljs-comment\">// {&quot;name&quot;:&quot;tom&quot;}</span>\n\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">stringify</span>(userInfo, <span class=\"hljs-function\">(<span class=\"hljs-params\">key, value</span>) =&gt;</span> key === <span class=\"hljs-string\">&quot;name&quot;</span> ? value.<span class=\"hljs-title function_\">toUpperCase</span>() : value))\n<span class=\"hljs-comment\">// {&quot;name&quot;:&quot;TOM&quot;,&quot;age&quot;:23,&quot;address&quot;:&quot;Shanghai&quot;}</span>\n</code></pre>\n<p>ç¬¬ä¸‰ä¸ªå‚æ•°ï¼š</p>\n<p>æ§åˆ¶ç¼©è¿›å’Œç©ºæ ¼</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> userInfo = {\n    <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;tom&quot;</span>,\n    <span class=\"hljs-attr\">age</span>: <span class=\"hljs-number\">23</span>,\n    <span class=\"hljs-attr\">address</span>: <span class=\"hljs-string\">&quot;Shanghai&quot;</span>\n}\n\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">stringify</span>(userInfo, <span class=\"hljs-literal\">null</span>, <span class=\"hljs-number\">4</span>))\n<span class=\"hljs-comment\">/*\n{\n    &quot;name&quot;: &quot;tom&quot;,\n    &quot;age&quot;: 23,\n    &quot;address&quot;: &quot;Shanghai&quot;\n}\n*/</span>\n</code></pre>\n<h2 id=\"git-æ’¤é”€ä¿®æ”¹\">git æ’¤é”€ä¿®æ”¹</h2>\n<p><code>git checkout .</code>æ’¤é”€æ‰€æœ‰æœª<code>git add</code>çš„ä¿®æ”¹</p>\n<p><code>git reset --soft HEAD^</code>æ’¤é”€æ‰€æœ‰<code>git commit</code></p>\n<p><code>git reset --hard HEAD^</code>æ’¤é”€æ‰€æœ‰<code>git commit + git add</code></p>\n"},{"title":"é‡å­¦å‰ç«¯(winter)é˜…è¯»ç¬”è®°-0-JavaScript","tags":["é‡å­¦å‰ç«¯","é˜…è¯»ç¬”è®°"],"categories":"é˜…è¯»ç¬”è®°","description":"## JavaScriptçŸ¥è¯†æ¶æ„\n\n![JavaScriptæ¶æ„](https://mrrsblog.oss-cn-shanghai.aliyuncs.com/JavaScript%E6%9E%B6%E6%9E%84.png)\n\nç”¨ä¸€å®šçš„**è¯æ³•**å’Œ**è¯­æ³•**è¡¨è¾¾ä¸€å®šçš„**è¯­ä¹‰**ï¼Œä»è€Œæ“ä½œ**è¿è¡Œæ—¶**\n\n## htmlæ›¿æ¢å‹æ ‡ç­¾\n\næ›¿æ¢å‹æ ‡ç­¾ï¼šå¼•å…¥å£°éŸ³ã€å›¾ç‰‡ã€è§†é¢‘ç­‰å¤–éƒ¨å…ƒç´ æ›¿æ¢è‡ªèº«çš„","createDate":"2021-04-20 02:17:40","updateDate":"2021-05-07 23:10:37","body":"<h2 id=\"javascriptçŸ¥è¯†æ¶æ„\">JavaScriptçŸ¥è¯†æ¶æ„</h2>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/JavaScript%E6%9E%B6%E6%9E%84.png\" alt=\"JavaScriptæ¶æ„\"></p>\n<p>ç”¨ä¸€å®šçš„<strong>è¯æ³•</strong>å’Œ<strong>è¯­æ³•</strong>è¡¨è¾¾ä¸€å®šçš„<strong>è¯­ä¹‰</strong>ï¼Œä»è€Œæ“ä½œ<strong>è¿è¡Œæ—¶</strong></p>\n<h2 id=\"htmlæ›¿æ¢å‹æ ‡ç­¾\">htmlæ›¿æ¢å‹æ ‡ç­¾</h2>\n<p>æ›¿æ¢å‹æ ‡ç­¾ï¼šå¼•å…¥å£°éŸ³ã€å›¾ç‰‡ã€è§†é¢‘ç­‰å¤–éƒ¨å…ƒç´ æ›¿æ¢è‡ªèº«çš„ä¸€ç±»æ ‡ç­¾</p>\n<h2 id=\"æ•°æ®å±æ€§è®¿é—®å™¨å±æ€§\">æ•°æ®å±æ€§/è®¿é—®å™¨å±æ€§</h2>\n<p>è¡¨ç¤º<em>å±æ€§</em>çš„<em>å±æ€§</em>ï¼Œç”¨äºæè¿°å±æ€§çš„è¡Œä¸ºç‰¹å¾</p>\n<h2 id=\"new-number-å’Œ-number-çš„åŒºåˆ«\">new Number() å’Œ Number() çš„åŒºåˆ«</h2>\n<p><code>Number()</code>æ‰§è¡Œç±»å‹è½¬æ¢ï¼Œå¥½äº<code>parseInt/parseFloat</code></p>\n<h2 id=\"è£…ç®±è½¬æ¢æ‹†ç®±è½¬æ¢\">è£…ç®±è½¬æ¢/æ‹†ç®±è½¬æ¢</h2>\n<p>è£…ç®±è½¬æ¢ï¼šæŠŠåŸºæœ¬ç±»å‹è½¬æ¢ä¸ºå¯¹åº”çš„å¯¹è±¡\næ‹†ç®±è½¬æ¢ï¼šå¯¹è±¡ç±»å‹åˆ°åŸºæœ¬ç±»å‹</p>\n<h2 id=\"javascriptå¯¹è±¡\">JavaScriptå¯¹è±¡</h2>\n<p>JavaScriptè¿è¡Œæ—¶æ˜¯ä¸€ä¸ª<em>å±æ€§</em>çš„é›†åˆï¼Œå±æ€§ä»¥å­—ç¬¦ä¸²æˆ–<code>Symbol</code>ä¸º<code>key</code>ï¼Œä»¥æ•°æ®å±æ€§ç‰¹å¾å€¼æˆ–è®¿é—®å™¨å±æ€§ç‰¹å¾å€¼ä¸º<code>value</code></p>\n<h2 id=\"å‡½æ•°å¯¹è±¡æ„é€ å™¨å¯¹è±¡\">å‡½æ•°å¯¹è±¡/æ„é€ å™¨å¯¹è±¡</h2>\n<ul>\n<li>å‡½æ•°å¯¹è±¡ï¼šå…·æœ‰<code>[[call]]</code>ç§æœ‰å­—æ®µçš„å¯¹è±¡</li>\n<li>æ„é€ å™¨å¯¹è±¡ï¼šå…·æœ‰<code>[[constructor]]</code>ç§æœ‰å­—æ®µçš„å¯¹è±¡</li>\n</ul>\n<p>ä»»ä½•å¯¹è±¡åªè¦å®ç°<code>[[call]]</code>ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œå¯ä»¥ä½œä¸ºå‡½æ•°è¢«è°ƒç”¨ã€‚è€Œå¦‚æœå®ƒå®ç°äº†<code>[[contructor]]</code>ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªæ„é€ å™¨å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨<code>new</code>è°ƒç”¨</p>\n<h2 id=\"å®ä»»åŠ¡å¾®ä»»åŠ¡\">å®ä»»åŠ¡/å¾®ä»»åŠ¡</h2>\n<p>å®¿ä¸»(ç¨‹åºçŒ¿)å‘èµ·çš„ä»»åŠ¡ç§°ä¸º<em>å®ä»»åŠ¡</em>ã€‚JavaScriptå¼•æ“å‘èµ·çš„ä»»åŠ¡ç§°ä¸º<em>å¾®ä»»åŠ¡</em></p>\n<p><code>Promise</code>æ°¸è¿œåœ¨é˜Ÿåˆ—å°¾éƒ¨æ·»åŠ å¾®ä»»åŠ¡(å¼•æ“)\n<code>setTimeout</code>å®¿ä¸»APIåˆ™ä¼šæ·»åŠ å®ä»»åŠ¡</p>\n<p>å¦‚æœåœ¨å¾®ä»»åŠ¡æ‰§è¡ŒæœŸé—´å¾®ä»»åŠ¡åŠ å…¥äº†æ–°çš„å¾®ä»»åŠ¡ï¼Œä¼šå°†æ–°çš„å¾®ä»»åŠ¡åŠ åˆ°é˜Ÿåˆ—å°¾éƒ¨ï¼Œä¹‹åä¹Ÿä¼šè¢«æ‰§è¡Œ</p>\n<p>ä¼šå°†<code>await</code>åçš„æ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—</p>\n<h2 id=\"é—­åŒ…\">é—­åŒ…</h2>\n<p>é—­åŒ…æŒ‡çš„æ˜¯é‚£äº›å¼•ç”¨äº†å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„<strong>å‡½æ•°</strong>ã€‚é€šå¸¸æ˜¯åœ¨åµŒå¥—å‡½æ•°ä¸­å®ç°</p>\n<p>å¤–éƒ¨å‡½æ•°çš„<strong>æ´»åŠ¨å¯¹è±¡</strong>æ˜¯å†…éƒ¨å‡½æ•°<strong>ä½œç”¨åŸŸé“¾</strong>ä¸Šçš„ç¬¬äºŒä¸ªå¯¹è±¡</p>\n<p>é—­åŒ…åªæ˜¯åœ¨å®šä¹‰åµŒå¥—å‡½æ•°æ—¶çš„å¤–åœ¨è¡¨ç°ï¼Œé—­åŒ…çš„æœ¬è´¨æ˜¯åŒ…å«å‡½æ•°çš„æ´»åŠ¨å¯¹è±¡åŠ ä¸Šäº†å…¶ä½œç”¨åŸŸé“¾</p>\n<p>æ¯ä¸ªå‡½æ•°åœ¨è¢«è°ƒç”¨æ—¶éƒ½ä¼šè‡ªåŠ¨åˆ›å»ºä¸¤ä¸ªç‰¹æ®Šå˜é‡<strong>this</strong>å’Œ<strong>arguments</strong>ã€‚å†…éƒ¨å‡½æ•°æ°¸è¿œä¸å¯èƒ½<strong>ç›´æ¥è®¿é—®</strong>å¤–éƒ¨å‡½æ•°çš„è¿™ä¸¤ä¸ªå˜é‡</p>\n"},{"title":"ç½‘ç»œ-websocket","tags":["websocket"],"categories":"ç½‘ç»œ","description":"## ä»€ä¹ˆæ˜¯websocket\n\n- HTML5æå‡ºçš„ä¸€ç§åº”ç”¨å±‚ç½‘ç»œåè®®\n\n- å…¨åŒå·¥é€šä¿¡\n\n## å¦‚ä½•å»ºç«‹è¿æ¥\n\nwebsocketæœç”¨äº†httpçš„æ¡æ‰‹é€šé“ï¼šå®¢æˆ·ç«¯é€šè¿‡httpè¯·æ±‚ä¸websocketæœåŠ¡ç«¯åå•†å‡çº§åè®®ï¼Œåè®®å‡çº§å®Œæˆåï¼Œåç»­çš„æ•°æ®äº¤æ¢åˆ™éµç…§websocketåè®®\n\n1. å®¢æˆ·ç«¯å‘é€åè®®å‡çº§è¯·æ±‚\n\né¦–å…ˆï¼Œå®¢æˆ·ç«¯å‘èµ·åè®®å‡çº§`GET`è¯·æ±‚\n\n``` http\nGET / HTTP","createDate":"2021-05-06 14:12:47","updateDate":"2021-05-07 10:49:52","body":"<h2 id=\"ä»€ä¹ˆæ˜¯websocket\">ä»€ä¹ˆæ˜¯websocket</h2>\n<ul>\n<li><p>HTML5æå‡ºçš„ä¸€ç§åº”ç”¨å±‚ç½‘ç»œåè®®</p>\n</li>\n<li><p>å…¨åŒå·¥é€šä¿¡</p>\n</li>\n</ul>\n<h2 id=\"å¦‚ä½•å»ºç«‹è¿æ¥\">å¦‚ä½•å»ºç«‹è¿æ¥</h2>\n<p>websocketæœç”¨äº†httpçš„æ¡æ‰‹é€šé“ï¼šå®¢æˆ·ç«¯é€šè¿‡httpè¯·æ±‚ä¸websocketæœåŠ¡ç«¯åå•†å‡çº§åè®®ï¼Œåè®®å‡çº§å®Œæˆåï¼Œåç»­çš„æ•°æ®äº¤æ¢åˆ™éµç…§websocketåè®®</p>\n<ol>\n<li>å®¢æˆ·ç«¯å‘é€åè®®å‡çº§è¯·æ±‚</li>\n</ol>\n<p>é¦–å…ˆï¼Œå®¢æˆ·ç«¯å‘èµ·åè®®å‡çº§<code>GET</code>è¯·æ±‚</p>\n<pre><code class=\"hljs language-http\"><span class=\"hljs-keyword\">GET</span> <span class=\"hljs-string\">/</span> <span class=\"hljs-meta\">HTTP/1.1</span>\n<span class=\"hljs-attribute\">Host</span><span class=\"hljs-punctuation\">: </span>localhost:8080\n</code></pre>\n<ol start=\"2\">\n<li>æœåŠ¡ç«¯å“åº”åè®®å‡çº§</li>\n</ol>\n<h2 id=\"æ•°æ®å¸§æ ¼å¼\">æ•°æ®å¸§æ ¼å¼</h2>\n<h2 id=\"å¦‚ä½•ç»´æŒè¿æ¥\">å¦‚ä½•ç»´æŒè¿æ¥</h2>\n"},{"title":"React.jså­¦ä¹ -åˆæˆäº‹ä»¶","tags":["React.js","åˆæˆäº‹ä»¶"],"categories":"React.js","description":"## ä»€ä¹ˆæ˜¯åˆæˆäº‹ä»¶\n\nå¦‚æœDOMä¸Šç»‘å®šäº†è¿‡å¤šçš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œæ•´ä¸ªé¡µé¢å“åº”ä»¥åŠå†…å­˜å ç”¨å¯èƒ½éƒ½ä¼šå—åˆ°å½±å“ã€‚Reactä¸ºäº†é¿å…è¿™ç±»DOMäº‹ä»¶æ»¥ç”¨ï¼ŒåŒæ—¶å±è”½åº•å±‚ä¸åŒæµè§ˆå™¨ä¹‹é—´çš„äº‹ä»¶ç³»ç»Ÿå·®å¼‚ï¼Œå®ç°äº†ä¸€ä¸ªä¸­é—´å±‚â€”â€”**SyntheticEvent**\n\n## ä¸ºä»€ä¹ˆä½¿ç”¨åˆæˆäº‹ä»¶\n\n1. å…¼å®¹æµè§ˆå™¨\n2. æ€§èƒ½ã€‚é¿å…å¤§é‡èŠ‚ç‚¹ç»‘å®šäº‹ä»¶å ç”¨å†…å­˜ï¼Œå°†äº‹ä»¶å§”æ‰˜åˆ°`document`ä¸Šï¼Œç­‰äº‹ä»¶**å†’æ³¡**åˆ°`doc","createDate":"2021-05-06 08:29:57","updateDate":"2021-05-06 16:30:04","body":"<h2 id=\"ä»€ä¹ˆæ˜¯åˆæˆäº‹ä»¶\">ä»€ä¹ˆæ˜¯åˆæˆäº‹ä»¶</h2>\n<p>å¦‚æœDOMä¸Šç»‘å®šäº†è¿‡å¤šçš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œæ•´ä¸ªé¡µé¢å“åº”ä»¥åŠå†…å­˜å ç”¨å¯èƒ½éƒ½ä¼šå—åˆ°å½±å“ã€‚Reactä¸ºäº†é¿å…è¿™ç±»DOMäº‹ä»¶æ»¥ç”¨ï¼ŒåŒæ—¶å±è”½åº•å±‚ä¸åŒæµè§ˆå™¨ä¹‹é—´çš„äº‹ä»¶ç³»ç»Ÿå·®å¼‚ï¼Œå®ç°äº†ä¸€ä¸ªä¸­é—´å±‚â€”â€”<strong>SyntheticEvent</strong></p>\n<h2 id=\"ä¸ºä»€ä¹ˆä½¿ç”¨åˆæˆäº‹ä»¶\">ä¸ºä»€ä¹ˆä½¿ç”¨åˆæˆäº‹ä»¶</h2>\n<ol>\n<li>å…¼å®¹æµè§ˆå™¨</li>\n<li>æ€§èƒ½ã€‚é¿å…å¤§é‡èŠ‚ç‚¹ç»‘å®šäº‹ä»¶å ç”¨å†…å­˜ï¼Œå°†äº‹ä»¶å§”æ‰˜åˆ°<code>document</code>ä¸Šï¼Œç­‰äº‹ä»¶<strong>å†’æ³¡</strong>åˆ°<code>document</code>ä¸Šæ—¶ï¼ŒReactå°†äº‹ä»¶å†…å®¹å°è£…äº¤ç»™ä¸­é—´å±‚<code>SyntheticEvent</code>ï¼ˆè´Ÿè´£æ‰€æœ‰äº‹ä»¶åˆæˆï¼‰</li>\n</ol>\n<h2 id=\"å’ŒåŸç”Ÿäº‹ä»¶çš„åŒºåˆ«\">å’ŒåŸç”Ÿäº‹ä»¶çš„åŒºåˆ«</h2>\n<ol>\n<li><p>Reactçš„æ‰€æœ‰äº‹ä»¶éƒ½é€šè¿‡<code>document</code>è¿›è¡Œç»Ÿä¸€åˆ†å‘ã€‚å½“çœŸå®Domè§¦å‘äº‹ä»¶åå†’æ³¡åˆ°<code>document</code>åæ‰ä¼šå¯¹Reactäº‹ä»¶è¿›è¡Œå¤„ç†</p>\n</li>\n<li><p>åŸç”Ÿäº‹ä»¶å…ˆæ‰§è¡Œ</p>\n</li>\n<li><p>ä¸è¦æ··ç”¨ï¼Œå¦‚æœåœ¨åŸç”Ÿäº‹ä»¶ä¸­æ‰§è¡Œ<code>stopPropagation</code>ä¼šå¯¼è‡´Reactäº‹ä»¶å¤±æ•ˆ</p>\n</li>\n</ol>\n"},{"title":"JavaScriptç›¸å…³-éªšæ“ä½œ","tags":["JavaScript","éªšæ“ä½œ"],"categories":"JavaScript","description":"## è‡ªå®šä¹‰äº‹ä»¶\n\n```js\nconst event = new Event('build');\n// Listen for the event.\nelem.addEventListener('build', function (e) { ... }, false);\n// Dispatch the event.\nelem.dispatchEvent(event);\n```\n\n## slee","createDate":"2020-12-02 15:08:45","updateDate":"2021-05-06 16:08:46","body":"<h2 id=\"è‡ªå®šä¹‰äº‹ä»¶\">è‡ªå®šä¹‰äº‹ä»¶</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> event = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Event</span>(<span class=\"hljs-string\">&#x27;build&#x27;</span>);\n<span class=\"hljs-comment\">// Listen for the event.</span>\nelem.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&#x27;build&#x27;</span>, <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">e</span>) { ... }, <span class=\"hljs-literal\">false</span>);\n<span class=\"hljs-comment\">// Dispatch the event.</span>\nelem.<span class=\"hljs-title function_\">dispatchEvent</span>(event);\n</code></pre>\n<h2 id=\"sleepå‡½æ•°\">sleepå‡½æ•°</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">sleep</span> = (<span class=\"hljs-params\">time</span>) =&gt; <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve</span>) =&gt;</span> <span class=\"hljs-built_in\">setTimeout</span>(resolve, time));\n\n<span class=\"hljs-comment\">// ä½¿ç”¨</span>\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">test</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">sleep</span>(<span class=\"hljs-number\">5000</span>);        <span class=\"hljs-comment\">// sleep 5s</span>\n}\n</code></pre>\n<h2 id=\"åˆ¤æ–­äº‹ä»¶è§¦å‘æº\">åˆ¤æ–­äº‹ä»¶è§¦å‘æº</h2>\n<p>ä½¿ç”¨<code>HTMLElement.contains</code>å‡½æ•°ï¼Œåˆ¤æ–­æ‰€ç»™å…ƒç´ å’ŒæŒ‡å®šå…ƒç´ æ˜¯ä¸æ˜¯çˆ¶å­å…³ç³»</p>\n<p>äº‹ä»¶ä»£ç†ä¸­éå¸¸æœ‰ç”¨</p>\n<h2 id=\"constå…³é”®å­—å®šä¹‰çš„å¸¸é‡å¯¹è±¡ä¸å¤Ÿå¸¸é‡çš„è§£å†³åŠæ³•\">constå…³é”®å­—å®šä¹‰çš„å¸¸é‡å¯¹è±¡ä¸å¤Ÿ&#39;å¸¸é‡&#39;çš„è§£å†³åŠæ³•</h2>\n<p>ä½¿ç”¨<code>Object.freeze()</code>ï¼Œè¿™æ ·è™½ç„¶å†ç»™å±æ€§è´Ÿå€¼æ—¶ä¸å›æŠ¥é”™ï¼Œä½†ä¼šé™é»˜å¤±è´¥</p>\n<h2 id=\"å–cookie\">å–cookie</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">getCookie</span> = (<span class=\"hljs-params\">name</span>) =&gt;<span class=\"hljs-string\">`; <span class=\"hljs-subst\">${<span class=\"hljs-variable language_\">document</span>.cookie}</span>`</span>.<span class=\"hljs-title function_\">split</span>(<span class=\"hljs-string\">`; <span class=\"hljs-subst\">${name}</span>=`</span>).<span class=\"hljs-title function_\">pop</span>().<span class=\"hljs-title function_\">split</span>(<span class=\"hljs-string\">&#x27;;&#x27;</span>).<span class=\"hljs-title function_\">shift</span>();\n</code></pre>\n"},{"title":"React.jså­¦ä¹ -éªšæ“ä½œ","tags":["React.jséªšæ“ä½œ"],"categories":"React.js","description":"## è·å–target\n\n``` ts\nexport type BasicTarget<T = HTMLElement> =\n  | (() => T | null)\n  | T\n  | null\n  | MutableRefObject<T | null | undefined>;\n\ntype TargetElement = HTMLElement | Element | Document","createDate":"2021-01-04 15:21:23","updateDate":"2021-04-26 16:54:30","body":"<h2 id=\"è·å–target\">è·å–target</h2>\n<pre><code class=\"hljs language-ts\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">type</span> <span class=\"hljs-title class_\">BasicTarget</span>&lt;T = <span class=\"hljs-title class_\">HTMLElement</span>&gt; =\n  | (<span class=\"hljs-function\">() =&gt;</span> T | <span class=\"hljs-literal\">null</span>)\n  | T\n  | <span class=\"hljs-literal\">null</span>\n  | <span class=\"hljs-title class_\">MutableRefObject</span>&lt;T | <span class=\"hljs-literal\">null</span> | <span class=\"hljs-literal\">undefined</span>&gt;;\n\n<span class=\"hljs-keyword\">type</span> <span class=\"hljs-title class_\">TargetElement</span> = <span class=\"hljs-title class_\">HTMLElement</span> | <span class=\"hljs-title class_\">Element</span> | <span class=\"hljs-title class_\">Document</span> | <span class=\"hljs-title class_\">Window</span>;\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getTargetElement</span>(<span class=\"hljs-params\">\n  target?: BasicTarget&lt;TargetElement&gt;,\n  defaultElement?: TargetElement,\n</span>): <span class=\"hljs-title class_\">TargetElement</span> | <span class=\"hljs-literal\">undefined</span> | <span class=\"hljs-literal\">null</span> {\n  <span class=\"hljs-keyword\">if</span> (!target) <span class=\"hljs-keyword\">return</span> defaultElement;\n  <span class=\"hljs-keyword\">let</span> <span class=\"hljs-attr\">targetElement</span>: <span class=\"hljs-title class_\">TargetElement</span> | <span class=\"hljs-literal\">undefined</span> | <span class=\"hljs-literal\">null</span>;\n\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> target === <span class=\"hljs-string\">&#x27;function&#x27;</span>) {\n    targetElement = <span class=\"hljs-title function_\">target</span>();\n  } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-string\">&#x27;current&#x27;</span> <span class=\"hljs-keyword\">in</span> target) {\n    targetElement = target.<span class=\"hljs-property\">current</span>;\n  } <span class=\"hljs-keyword\">else</span> {\n    targetElement = target;\n  }\n\n  <span class=\"hljs-keyword\">return</span> targetElement;\n}\n</code></pre>\n<h2 id=\"çˆ¶å­ç»„ä»¶é€šä¿¡\">çˆ¶å­ç»„ä»¶é€šä¿¡</h2>\n<p>çˆ¶ç»„ä»¶è¦è·å–å­ç»„ä»¶çš„å€¼ï¼šé€šè¿‡<code>props</code>ä¼ é€’å›è°ƒå‡½æ•°</p>\n<h2 id=\"react-router-domé‡å®šå‘\">react-router-domé‡å®šå‘</h2>\n<pre><code class=\"hljs language-tsx\"><span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">Redirect</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;react-router-dom&#x27;</span>;\n\n<span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Redirect</span> <span class=\"hljs-attr\">to</span>=<span class=\"hljs-string\">&quot;/auth/login&quot;</span> /&gt;</span></span>\n</code></pre>\n"},{"title":"VSCodeæ’ä»¶å¼€å‘-0-åˆå§‹åŒ–","tags":["VSCodeæ’ä»¶"],"categories":"VSCodeæ’ä»¶","description":"ç”±äºæ™šä¸Šä¸‹ç­åå…¬äº¤æ–¹ä¾¿ç‚¹ï¼Œè™½ç„¶ç§»åŠ¨ç«¯æœ‰ä¸å°‘appä¾›æŸ¥çœ‹ï¼Œä½†æ‡’å¾—æ‰“å¼€æ‰‹æœºï¼Œè€Œä¸”è‡ªå·±å¤§å¤šæ•°æ—¶é—´éƒ½åœ¨ä½¿ç”¨vscodeï¼Œå› æ­¤æ‰“ç®—å¼€å‘ä¸€ä¸ªå®æ—¶å…¬äº¤æ’ä»¶ã€‚\n\n[GitHubåœ°å€](https://github.com/mrrs878/real_time_bus_arrival)\n[æ’ä»¶å¸‚åœºåœ°å€](https://marketplace.visualstudio.com/items?itemName=Rea","createDate":"2021-03-22 15:26:01","updateDate":"2021-03-26 12:26:14","body":"<p>ç”±äºæ™šä¸Šä¸‹ç­åå…¬äº¤æ–¹ä¾¿ç‚¹ï¼Œè™½ç„¶ç§»åŠ¨ç«¯æœ‰ä¸å°‘appä¾›æŸ¥çœ‹ï¼Œä½†æ‡’å¾—æ‰“å¼€æ‰‹æœºï¼Œè€Œä¸”è‡ªå·±å¤§å¤šæ•°æ—¶é—´éƒ½åœ¨ä½¿ç”¨vscodeï¼Œå› æ­¤æ‰“ç®—å¼€å‘ä¸€ä¸ªå®æ—¶å…¬äº¤æ’ä»¶ã€‚</p>\n<p><a href=\"https://github.com/mrrs878/real_time_bus_arrival\">GitHubåœ°å€</a>\n<a href=\"https://marketplace.visualstudio.com/items?itemName=Real-timeBusArrival.real-time-bus-arrival\">æ’ä»¶å¸‚åœºåœ°å€</a></p>\n<h2 id=\"é¡¹ç›®æ­å»º\">é¡¹ç›®æ­å»º</h2>\n<ol>\n<li>å®‰è£…å®˜æ–¹ç±»ä¼¼äºè„šæ‰‹æ¶çš„å·¥å…·</li>\n</ol>\n<p><code>npm install -g yo generator-code</code></p>\n<ol start=\"2\">\n<li>ä½¿ç”¨ <code>yo code</code> åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®æ¨¡æ¿</li>\n</ol>\n<p>é€‰æ‹© <code>New Extension (TypeScript)</code> å’Œ <code>webpack</code></p>\n<h2 id=\"é¡¹ç›®ç®€å•è¿è¡Œ\">é¡¹ç›®ç®€å•è¿è¡Œ</h2>\n<p>VSCodeæ‰“å¼€é¡¹ç›®å¹¶F5ï¼Œä¼šåœ¨ä¸€ä¸ªæ–°çš„VSCodeçª—å£ä¸­è¿è¡Œæ’ä»¶</p>\n<p>åœ¨æ–°çª—å£çš„å‘½ä»¤é¢æ¿ï¼ˆCtrl+Shift+Pï¼‰ è¿è¡Œ<code>Hello World</code>å‘½ä»¤ã€‚å³ä¸‹è§’ä¼šå¼¹å‡º<code>Hello World</code>é€šçŸ¥ä¿¡æ¯</p>\n<p>æ³¨ï¼š</p>\n<p>é»˜è®¤é¡¹ç›®çš„æ¿€æ´»äº‹ä»¶è®¾ç½®çš„æ˜¯æ‰§è¡Œ<code>helloWorld</code>æŒ‡ä»¤ï¼š</p>\n<pre><code class=\"hljs language-json\"><span class=\"hljs-attr\">&quot;activationEvents&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span>\n    <span class=\"hljs-string\">&quot;onCommand:extension-template.helloWorld&quot;</span>\n<span class=\"hljs-punctuation\">]</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">&quot;contributes&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;commands&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span>\n        <span class=\"hljs-punctuation\">{</span>\n            <span class=\"hljs-attr\">&quot;command&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;extension-template.helloWorld&quot;</span><span class=\"hljs-punctuation\">,</span>\n            <span class=\"hljs-attr\">&quot;title&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;Hello World&quot;</span>\n        <span class=\"hljs-punctuation\">}</span>\n    <span class=\"hljs-punctuation\">]</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n<p>å› æ­¤åœ¨æ‰§è¡Œ<code>Hello World</code>å‘½ä»¤æ—¶ä¼šæ¿€æ´»æ’ä»¶ã€‚è€Œä¸”<code>extension.ts</code>ä¸­æ³¨å†Œäº†<code>helloWorld</code>å‘½ä»¤å›è°ƒï¼Œå› æ­¤ä¼šæ˜¾ç¤ºé€šçŸ¥ä¿¡æ¯</p>\n<pre><code class=\"hljs language-ts\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">activate</span>(<span class=\"hljs-params\">context: vscode.ExtensionContext</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;Congratulations, your extension &quot;extension-template&quot; is now active!&#x27;</span>);\n    <span class=\"hljs-keyword\">let</span> disposable = vscode.<span class=\"hljs-property\">commands</span>.<span class=\"hljs-title function_\">registerCommand</span>(<span class=\"hljs-string\">&#x27;extension-template.helloWorld&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n        vscode.<span class=\"hljs-property\">window</span>.<span class=\"hljs-title function_\">showInformationMessage</span>(<span class=\"hljs-string\">&#x27;Hello World from extension_template!&#x27;</span>);\n    });\n    context.<span class=\"hljs-property\">subscriptions</span>.<span class=\"hljs-title function_\">push</span>(disposable);\n}\n</code></pre>\n<h2 id=\"ç›®å½•ç»“æ„\">ç›®å½•ç»“æ„</h2>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/vscodeExtensionDir.png\" alt=\"vscodeæ’ä»¶ç›®å½•ç»“æ„\"></p>\n"},{"title":"VSCodeæ’ä»¶å¼€å‘-1-ç•Œé¢é…ç½®","tags":["VSCodeæ’ä»¶"],"categories":"VSCodeæ’ä»¶","description":"## ç®€ä»‹\n\nVSCodeæ’ä»¶ç•Œé¢ä¸package.jsonä¸­çš„å­—æ®µå¯¹åº”å¦‚å›¾\n\n![æ’ä»¶ç•Œé¢ä¸package.jsonä¸­çš„å­—æ®µå¯¹åº”](https://mrrsblog.oss-cn-shanghai.aliyuncs.com/vscodeExtensionView.png)\n\nå…¶ä¸­ï¼š\n\n- activityBaræ˜¯å·¦ä¾§è¾¹æ ä¸­çš„æ’ä»¶å›¾æ ‡\n\n- 'å…¬äº¤çº¿è·¯'(sidebar)ç›¸å½“äºä¸€çº§èœå•ï¼Œå¯é€šè¿‡","createDate":"2021-03-23 15:34:17","updateDate":"2021-03-26 11:28:12","body":"<h2 id=\"ç®€ä»‹\">ç®€ä»‹</h2>\n<p>VSCodeæ’ä»¶ç•Œé¢ä¸package.jsonä¸­çš„å­—æ®µå¯¹åº”å¦‚å›¾</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/vscodeExtensionView.png\" alt=\"æ’ä»¶ç•Œé¢ä¸package.jsonä¸­çš„å­—æ®µå¯¹åº”\"></p>\n<p>å…¶ä¸­ï¼š</p>\n<ul>\n<li><p>activityBaræ˜¯å·¦ä¾§è¾¹æ ä¸­çš„æ’ä»¶å›¾æ ‡</p>\n</li>\n<li><p>&#39;å…¬äº¤çº¿è·¯&#39;(sidebar)ç›¸å½“äºä¸€çº§èœå•ï¼Œå¯é€šè¿‡packa.jsonä¸­çš„<code>views.sidebar</code>é…ç½®</p>\n</li>\n<li><p>&#39;æµ¦ä¸œ25è·¯/1117è·¯&#39;ç›¸å½“äºäºŒçº§èœå•ï¼Œé€šè¿‡ä»£ç åˆ›å»º</p>\n<pre><code class=\"hljs language-js\">vscode.<span class=\"hljs-property\">window</span>.<span class=\"hljs-title function_\">registerTreeDataProvider</span>(<span class=\"hljs-string\">&#x27;sidebar_id&#x27;</span>, <span class=\"hljs-title class_\">TreeDataProvider</span>);\n</code></pre>\n</li>\n<li><p>èœå•é¡¹ä¸­çš„å›¾æ ‡åœ¨<code>commands</code>å’Œ<code>menus</code>ä¸­é…ç½®ï¼Œ<code>view/title</code>å¯¹åº”çš„æ˜¯ä¸€çº§èœå•ï¼›<code>view/item/context</code>å¯¹åº”çš„æ˜¯äºŒçº§èœå•</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// 1. å…ˆæ·»åŠ command</span>\n<span class=\"hljs-string\">&quot;commands&quot;</span>: [\n    {\n        <span class=\"hljs-string\">&quot;command&quot;</span>: <span class=\"hljs-string\">&quot;realTimeBus.refreshLines&quot;</span>,\n        <span class=\"hljs-string\">&quot;icon&quot;</span>: <span class=\"hljs-string\">&quot;$(refresh)&quot;</span>,\n        <span class=\"hljs-string\">&quot;title&quot;</span>: <span class=\"hljs-string\">&quot;åˆ·æ–°çº¿è·¯&quot;</span>\n    },\n    {\n        <span class=\"hljs-string\">&quot;command&quot;</span>: <span class=\"hljs-string\">&quot;realTimeBus.addLine&quot;</span>,\n        <span class=\"hljs-string\">&quot;icon&quot;</span>: <span class=\"hljs-string\">&quot;$(add)&quot;</span>,\n        <span class=\"hljs-string\">&quot;title&quot;</span>: <span class=\"hljs-string\">&quot;æ·»åŠ çº¿è·¯&quot;</span>\n    },\n    {\n        <span class=\"hljs-string\">&quot;command&quot;</span>: <span class=\"hljs-string\">&quot;realTimeBus.removeLine&quot;</span>,\n        <span class=\"hljs-string\">&quot;icon&quot;</span>: <span class=\"hljs-string\">&quot;$(remove)&quot;</span>,\n        <span class=\"hljs-string\">&quot;title&quot;</span>: <span class=\"hljs-string\">&quot;åˆ é™¤çº¿è·¯&quot;</span>\n    },\n]\n\n<span class=\"hljs-comment\">// 2. è®¾ç½®å›¾æ ‡ä½ç½®</span>\n<span class=\"hljs-string\">&quot;menus&quot;</span>: {\n  <span class=\"hljs-string\">&quot;view/title&quot;</span>: [\n    {\n      <span class=\"hljs-string\">&quot;command&quot;</span>: <span class=\"hljs-string\">&quot;realTimeBus.refreshLines&quot;</span>,\n      <span class=\"hljs-string\">&quot;group&quot;</span>: <span class=\"hljs-string\">&quot;navigation&quot;</span>,  <span class=\"hljs-comment\">// å’Œæ–‡å­—ä¸€è¡Œæ˜¾ç¤º</span>\n      <span class=\"hljs-string\">&quot;when&quot;</span>: <span class=\"hljs-string\">&quot;view == realTimeBusLine&quot;</span>\n    }\n  ],\n  <span class=\"hljs-string\">&quot;view/item/context&quot;</span>: [\n    {\n      <span class=\"hljs-string\">&quot;command&quot;</span>: <span class=\"hljs-string\">&quot;realTimeBus.revertLine&quot;</span>,\n      <span class=\"hljs-string\">&quot;group&quot;</span>: <span class=\"hljs-string\">&quot;inline&quot;</span>,  <span class=\"hljs-comment\">// å’Œæ–‡å­—ä¸€è¡Œæ˜¾ç¤º</span>\n      <span class=\"hljs-string\">&quot;when&quot;</span>: <span class=\"hljs-string\">&quot;view == realTimeBusLine &amp;&amp; viewItem == BusLineItem&quot;</span>\n    }\n  ]\n}\n\n<span class=\"hljs-comment\">// é…ç½®viewItem == BusLineItemåcommandå›è°ƒå‡½æ•°å¯ä»¥æ¥æ”¶åˆ°è¢«ç‚¹å‡»çš„èœå•é¡¹</span>\ncommands.<span class=\"hljs-title function_\">registerCommand</span>(<span class=\"hljs-string\">&#x27;realTimeBus.revertLine&#x27;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">params</span>) =&gt;</span> {\n<span class=\"hljs-title class_\">BusLineProvider</span>.<span class=\"hljs-title function_\">revertLine</span>(params);\n});\n</code></pre>\n</li>\n</ul>\n<h2 id=\"treeview\">treeView</h2>\n<p>ä¸€çº§èœå•å¯åœ¨<code>package.json</code>ä¸­é…ç½®ï¼ŒäºŒçº§èœå•éœ€è¦ä½¿ç”¨<code>TreeDataProvider</code></p>\n<pre><code class=\"hljs language-ts\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">BusLineProvider</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">TreeDataProvider</span>&lt;<span class=\"hljs-title class_\">BusLineTreeItem</span>|<span class=\"hljs-title class_\">BusStopTreeItem</span>&gt;{\n  <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-attr\">instance</span>: <span class=\"hljs-title class_\">BusLineProvider</span>;\n\n  <span class=\"hljs-keyword\">private</span> <span class=\"hljs-attr\">_onDidChangeTreeData</span>: <span class=\"hljs-title class_\">EventEmitter</span>&lt;<span class=\"hljs-title class_\">BusLineTreeItem</span> | <span class=\"hljs-literal\">undefined</span> | <span class=\"hljs-built_in\">void</span>&gt; \n    = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">EventEmitter</span>&lt;<span class=\"hljs-title class_\">BusLineTreeItem</span> | <span class=\"hljs-literal\">undefined</span> | <span class=\"hljs-built_in\">void</span>&gt;();\n    <span class=\"hljs-keyword\">readonly</span> <span class=\"hljs-attr\">onDidChangeTreeData</span>: <span class=\"hljs-title class_\">Event</span>&lt;<span class=\"hljs-title class_\">BusLineTreeItem</span> | <span class=\"hljs-literal\">undefined</span> | <span class=\"hljs-built_in\">void</span>&gt;\n    = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">_onDidChangeTreeData</span>.<span class=\"hljs-property\">event</span>;\n  \n  <span class=\"hljs-title function_\">getTreeItem</span>(<span class=\"hljs-params\">element: BusLineTreeItem</span>) {\n    <span class=\"hljs-keyword\">return</span> element;\n  }\n\n  <span class=\"hljs-comment\">// æ ¸å¿ƒæ–¹æ³•</span>\n  <span class=\"hljs-keyword\">async</span> <span class=\"hljs-title function_\">getChildren</span>(<span class=\"hljs-params\">item: BusLineTreeItem|BusStopTreeItem</span>) {\n    <span class=\"hljs-keyword\">return</span> [];\n  }\n  \n  <span class=\"hljs-keyword\">static</span> <span class=\"hljs-title function_\">getInstance</span>(): <span class=\"hljs-title class_\">BusLineProvider</span> {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">instance</span> || (<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">instance</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BusLineProvider</span>());\n  }\n  \n  <span class=\"hljs-keyword\">static</span> <span class=\"hljs-title function_\">refreshLines</span>(<span class=\"hljs-params\">action: () =&gt; <span class=\"hljs-built_in\">void</span> = () =&gt; {}</span>) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">instance</span>.<span class=\"hljs-property\">_onDidChangeTreeData</span>.<span class=\"hljs-title function_\">fire</span>();\n  }\n}\n</code></pre>\n<p>åˆ›å»ºåæ³¨å†Œå³å¯<code>vscode.window.registerTreeDataProvider(&#39;realTimeBusLine&#39;, BusLineProvider.getInstance());</code></p>\n<p>å…³é”®åœ¨äº<code>getChildren</code>æ–¹æ³•</p>\n<p><code>getChildren</code>ä¼šåœ¨ä»¥ä¸‹æƒ…å½¢è°ƒç”¨:</p>\n<ol>\n<li><p>è°ƒç”¨<code>vscode.window.registerTreeDataProvider</code>æ³¨å†ŒTreeDataProvideræ—¶</p>\n</li>\n<li><p>è°ƒç”¨<code>this.instance._onDidChangeTreeData.fire()</code>æ—¶</p>\n</li>\n<li><p>ç‚¹å‡»å¯æŠ˜å <code>TreeItem</code></p>\n</li>\n</ol>\n<h2 id=\"å¯æŠ˜å èœå•\">å¯æŠ˜å èœå•</h2>\n<p>è®¾ç½®<code>TreeItem</code>çš„<code>collapse</code>å±æ€§ä¸º<code>TreeItemCollapsibleState.Collapsed</code></p>\n<p>ç‚¹å‡»è¯¥èœå•æ—¶ä¼šè°ƒç”¨<code>getChildren</code>ï¼Œè¯¥èœå•ä¹Ÿå›ä½œä¸ºå‚æ•°ä¼ é€’ç»™<code>getChildren</code></p>\n"},{"title":"Babel7å­¦ä¹ -0","tags":["Babel"],"categories":"Babel","description":"## WHAT\n\nä¸€ä¸ªJSåº“ï¼Œè½¬åŒ–JS**é«˜çº§è¯­æ³•**ï¼Œå¤„ç†æµè§ˆå™¨é—´çš„å…¼å®¹æ€§ã€‚\n\né»˜è®¤æ˜¯**åªä¼šå»è½¬åŒ–jsè¯­æ³•**çš„ï¼Œ**ä¸ä¼šå»è½¬æ¢æ–°çš„API**ï¼Œæ¯”å¦‚åƒPromiseã€Generatorã€Symbolè¿™ç§å…¨å±€APIå¯¹è±¡ï¼Œbabelæ˜¯ä¸ä¼šå»ç¼–è¯‘çš„ã€‚\n\nå…±æœ‰ä¸‰ä¸ªå¿…å¤‡åº“ï¼š\n\n- `@babel/core`ï¼Œå¯¹ä»£ç è¿›è¡Œè½¬æ¢çš„æ ¸å¿ƒæ–¹æ³•\n- `@babel/cli`ï¼Œbabelå¸¦æœ‰çš„å†…ç½®cliï¼Œå¯ä»¥ç”¨æ¥","createDate":"2021-01-25 15:00:40","updateDate":"2021-03-24 22:06:07","body":"<h2 id=\"what\">WHAT</h2>\n<p>ä¸€ä¸ªJSåº“ï¼Œè½¬åŒ–JS<strong>é«˜çº§è¯­æ³•</strong>ï¼Œå¤„ç†æµè§ˆå™¨é—´çš„å…¼å®¹æ€§ã€‚</p>\n<p>é»˜è®¤æ˜¯<strong>åªä¼šå»è½¬åŒ–jsè¯­æ³•</strong>çš„ï¼Œ<strong>ä¸ä¼šå»è½¬æ¢æ–°çš„API</strong>ï¼Œæ¯”å¦‚åƒPromiseã€Generatorã€Symbolè¿™ç§å…¨å±€APIå¯¹è±¡ï¼Œbabelæ˜¯ä¸ä¼šå»ç¼–è¯‘çš„ã€‚</p>\n<p>å…±æœ‰ä¸‰ä¸ªå¿…å¤‡åº“ï¼š</p>\n<ul>\n<li><code>@babel/core</code>ï¼Œå¯¹ä»£ç è¿›è¡Œè½¬æ¢çš„æ ¸å¿ƒæ–¹æ³•</li>\n<li><code>@babel/cli</code>ï¼Œbabelå¸¦æœ‰çš„å†…ç½®cliï¼Œå¯ä»¥ç”¨æ¥è®©æˆ‘ä»¬ä»å‘½ä»¤è¡Œæ¥ç¼–è¯‘æˆ‘ä»¬çš„æ–‡ä»¶</li>\n<li><code>@babel/plugin*</code>/<code>@babel/preset-env</code>ï¼Œéœ€è¦å·¥ä½œçš„babelæ’ä»¶</li>\n</ul>\n<h2 id=\"why\">WHY</h2>\n<p>å…¼å®¹æ€§</p>\n<h2 id=\"how\">HOW</h2>\n<ul>\n<li>å®‰è£…å¿…å¤‡åº“ï¼š</li>\n</ul>\n<p><code>yarn add @babel/core @babel/cli @babel/preser-env -D</code></p>\n<p><code>yarn add </code></p>\n<ul>\n<li>æ ¹ç›®å½•åˆ›å»º<code>babel.config.js</code></li>\n</ul>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {\n  <span class=\"hljs-attr\">presets</span>: [\n    [\n      <span class=\"hljs-string\">&quot;@babel/preset-env&quot;</span>,\n    ]\n  ],\n  <span class=\"hljs-string\">&quot;plugins&quot;</span>: [\n    [\n      <span class=\"hljs-string\">&quot;@babel/plugin-transform-runtime&quot;</span>,\n      {\n        <span class=\"hljs-string\">&quot;corejs&quot;</span>: <span class=\"hljs-number\">3</span>\n      }\n    ],\n  ]\n};\n</code></pre>\n<ul>\n<li>å…¥å£æ–‡ä»¶å¼•å…¥</li>\n</ul>\n"},{"title":"typescriptå­¦ä¹ -Utility Types","tags":["typescript","UtilityTypes"],"categories":"typescript","description":"## Partial<Type>\n\nè¿”å›ä¸€ä¸ªæ‰€æœ‰ property éƒ½å¯é€‰çš„ type\n  \n``` ts\ntype Partial<T> = {\n    [P in keyof T]?: T[P]\n}\n// ä½¿ç”¨\ninterface Todo {\n  title: string;\n  description: string;\n}\nconst newTodo: Partial<Todo> =","createDate":"2021-02-25 15:22:38","updateDate":"2021-02-25 23:22:43","body":"<h2 id=\"partial\">Partial<Type></h2>\n<p>è¿”å›ä¸€ä¸ªæ‰€æœ‰ property éƒ½å¯é€‰çš„ type</p>\n<pre><code class=\"hljs language-ts\"><span class=\"hljs-keyword\">type</span> <span class=\"hljs-title class_\">Partial</span>&lt;T&gt; = {\n    [P <span class=\"hljs-keyword\">in</span> keyof T]?: T[P]\n}\n<span class=\"hljs-comment\">// ä½¿ç”¨</span>\n<span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title class_\">Todo</span> {\n  <span class=\"hljs-attr\">title</span>: <span class=\"hljs-built_in\">string</span>;\n  <span class=\"hljs-attr\">description</span>: <span class=\"hljs-built_in\">string</span>;\n}\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-attr\">newTodo</span>: <span class=\"hljs-title class_\">Partial</span>&lt;<span class=\"hljs-title class_\">Todo</span>&gt; = {\n    <span class=\"hljs-attr\">title</span>: <span class=\"hljs-string\">&#x27;title&#x27;</span>\n}\n</code></pre>\n<h2 id=\"required-type\">Required&lt; Type &gt;</h2>\n<p>ä½¿ Type ä¸­æ‰€æœ‰å±æ€§å¿…é€‰ã€‚</p>\n<h2 id=\"picktype-keys\">Pick&lt;Type, Keys&gt;</h2>\n<p>ä» Type ä¸­æŒ‘é€‰å‡º Keys ä¸­æŒ‡å®š key åœ¨ Type ä¸­å­˜åœ¨çš„ç±»å‹ï¼Œç»„æˆä¸€ä¸ªæ–°ç±»å‹</p>\n<pre><code class=\"hljs language-ts\"><span class=\"hljs-keyword\">type</span> <span class=\"hljs-title class_\">Pick</span>&lt;T, K <span class=\"hljs-keyword\">extends</span> keyof T&gt; = {\n    [P <span class=\"hljs-keyword\">in</span> K]: T[P]\n}\n</code></pre>\n<h2 id=\"omittype-keys\">Omit&lt;Type, Keys&gt;</h2>\n<p>ä»æ’é™¤ Type çš„ property ä¸­æ’é™¤ keys ä¸­æŒ‡å®šçš„ propertyã€‚Type ä¸­å‰©ä¸‹çš„ properties å½¢æˆä¸€ä¸ªæ–°ç±»å‹ã€‚</p>\n<h2 id=\"extracttype-union\">Extract&lt;Type, Union&gt;</h2>\n<p>å–ä¸¤ä¸ªè”åˆç±»å‹çš„äº¤é›†</p>\n<h2 id=\"parameters-type\">Parameters&lt; Type &gt;</h2>\n<p>è¿”å›ä¸€ä¸ªå‡½æ•°ç±»å‹çš„å‚æ•°çš„ç±»å‹ï¼Œå€¼ä¸ºå…ƒç¥–ç±»å‹</p>\n"},{"title":"python-urllibåº“çš„ä½¿ç”¨","tags":["python","urllib"],"categories":"Python","description":"# Python urllibåº“çš„ä»‹ç»åŠä½¿ç”¨\n\n@(python)[urllib]\n\n**urllib**åº“ï¼Œæ˜¯ Python å†…ç½®çš„ HTTP è¯·æ±‚åº“ ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸éœ€è¦é¢å¤–å®‰è£…å³å¯ä½¿ç”¨ã€‚å®ƒåŒ…å«å¦‚ä¸‹ 4 ä¸ªæ¨¡å—ï¼š\n- **request** ï¼šæœ€åŸºæœ¬çš„ HTTP è¯·æ±‚æ¨¡å—ï¼Œå¯ä»¥ç”¨æ¥æ¨¡æ‹Ÿå‘é€è¯·æ±‚ ã€‚ å°±åƒåœ¨æµè§ˆå™¨é‡Œè¾“å…¥ç½‘å€ç„¶åå›è½¦ä¸€æ ·ï¼Œåªéœ€è¦ç»™åº“æ–¹æ³•ä¼ å…¥ URL ä»¥åŠé¢å¤–çš„å‚æ•°ï¼Œå°±å¯ä»¥æ¨¡æ‹Ÿå®ç°è¿™ä¸ª","createDate":"2018-11-13 12:14:43","updateDate":"2021-02-20 17:21:39","body":"<h1 id=\"python-urllibåº“çš„ä»‹ç»åŠä½¿ç”¨\">Python urllibåº“çš„ä»‹ç»åŠä½¿ç”¨</h1>\n<p>@(python)[urllib]</p>\n<p><strong>urllib</strong>åº“ï¼Œæ˜¯ Python å†…ç½®çš„ HTTP è¯·æ±‚åº“ ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸éœ€è¦é¢å¤–å®‰è£…å³å¯ä½¿ç”¨ã€‚å®ƒåŒ…å«å¦‚ä¸‹ 4 ä¸ªæ¨¡å—ï¼š</p>\n<ul>\n<li><strong>request</strong> ï¼šæœ€åŸºæœ¬çš„ HTTP è¯·æ±‚æ¨¡å—ï¼Œå¯ä»¥ç”¨æ¥æ¨¡æ‹Ÿå‘é€è¯·æ±‚ ã€‚ å°±åƒåœ¨æµè§ˆå™¨é‡Œè¾“å…¥ç½‘å€ç„¶åå›è½¦ä¸€æ ·ï¼Œåªéœ€è¦ç»™åº“æ–¹æ³•ä¼ å…¥ URL ä»¥åŠé¢å¤–çš„å‚æ•°ï¼Œå°±å¯ä»¥æ¨¡æ‹Ÿå®ç°è¿™ä¸ªè¿‡ç¨‹ï¼›</li>\n<li><strong>error</strong> ï¼šå¼‚å¸¸å¤„ç†æ¨¡å—ï¼Œå¦‚æœå‡ºç°è¯·æ±‚é”™è¯¯ ï¼Œ æˆ‘ä»¬å¯ä»¥æ•è·è¿™äº›å¼‚å¸¸ï¼Œç„¶åè¿›è¡Œé‡è¯•æˆ–å…¶ä»–æ“ä½œä»¥ä¿è¯ç¨‹åºä¸ä¼šæ„å¤–ç»ˆæ­¢ï¼›</li>\n<li><strong>parse</strong> ï¼šä¸€ä¸ªå·¥å…·æ¨¡å—ï¼Œæä¾›äº†è®¸å¤š URL å¤„ç†æ–¹æ³•ï¼Œæ¯”å¦‚æ‹†åˆ†ã€è§£æ ã€ åˆå¹¶ç­‰ã€‚</li>\n<li><strong>robotparse</strong>ï¼šä¸»è¦æ˜¯ç”¨æ¥è¯†åˆ«ç½‘ç«™çš„ robots.txt æ–‡ä»¶ï¼Œç„¶ååˆ¤æ–­å“ªäº›ç½‘ç«™å¯ä»¥çˆ¬ï¼Œå“ªäº›ç½‘ç«™ä¸å¯ä»¥çˆ¬ï¼Œå®ƒå…¶å®ç”¨å¾—æ¯”è¾ƒå°‘ï¼›</li>\n</ul>\n<p>æ¥ä¸‹æ¥ä¸»è¦ä»‹ç»å‰ä¸‰ä¸ªæ¨¡å—ï¼š<strong>request</strong>/<strong>error</strong>/<strong>parse</strong></p>\n"},{"title":"Python-æ­£åˆ™è¡¨è¾¾å¼","tags":["Python","æ­£åˆ™è¡¨è¾¾å¼"],"categories":"Python","description":"# æ­£åˆ™è¡¨è¾¾å¼\n\n- æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œå°±æ˜¯æŒ‰ç…§ä¸€å®šçš„è§„åˆ™å°†ç‰¹å®šçš„æ–‡æœ¬æå–å‡ºæ¥ã€‚\n  ![enter image description here](https://t1.picb.cc/uploads/2018/11/15/JXfxNi.jpg)\n\n## match\n\n- match(0)æ³•ä¼šå°è¯•ä»å­—ç¬¦ä¸²çš„**èµ·å§‹ä½ç½®**åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¦‚æœåŒ¹é…ï¼Œå°±è¿”å›åŒ¹é…æˆåŠŸçš„ç»“æœï¼›å¦‚æœä¸åŒ¹é…ï¼Œå°±è¿”å› fa","createDate":"2018-11-15 19:55:58","updateDate":"2021-02-20 17:21:17","body":"<h1 id=\"æ­£åˆ™è¡¨è¾¾å¼\">æ­£åˆ™è¡¨è¾¾å¼</h1>\n<ul>\n<li>æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œå°±æ˜¯æŒ‰ç…§ä¸€å®šçš„è§„åˆ™å°†ç‰¹å®šçš„æ–‡æœ¬æå–å‡ºæ¥ã€‚\n<img src=\"https://t1.picb.cc/uploads/2018/11/15/JXfxNi.jpg\" alt=\"enter image description here\"></li>\n</ul>\n<h2 id=\"match\">match</h2>\n<ul>\n<li>match(0)æ³•ä¼šå°è¯•ä»å­—ç¬¦ä¸²çš„<strong>èµ·å§‹ä½ç½®</strong>åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¦‚æœåŒ¹é…ï¼Œå°±è¿”å›åŒ¹é…æˆåŠŸçš„ç»“æœï¼›å¦‚æœä¸åŒ¹é…ï¼Œå°±è¿”å› falseã€‚</li>\n</ul>\n<h2 id=\"match-ç¤ºä¾‹\">match ç¤ºä¾‹</h2>\n<h3 id=\"åŒ¹é…ç›®æ ‡\">åŒ¹é…ç›®æ ‡</h3>\n<ul>\n<li>å¯ä»¥ä½¿ç”¨&quot;ï¼ˆï¼‰&quot;å°†æƒ³æå–çš„å­å­—ç¬¦ä¸²æ‹¬èµ·æ¥ï¼Œ&quot;ï¼ˆï¼‰&quot;å®é™…ä¸Šæ ‡è®°äº†ä¸€ä¸ªå­è¡¨è¾¾å¼çš„å¼€å§‹å’Œç»“æŸä½ç½®ï¼Œè¢«æ ‡è®°çš„æ¯ä¸ªå­è¡¨è¾¾å¼ä¼šä¾æ¬¡å¯¹åº”æ¯ä¸€ä¸ªåˆ†ç»„ï¼Œè°ƒç”¨ group()æ³•ä¼ å…¥åˆ†ç»„çš„ç´¢å¼•å³å¯è·å–æå–çš„ç»“æœã€‚</li>\n</ul>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> re\n\ncontent = <span class=\"hljs-string\">&#x27;Hello 123 4567 World_This is a Regex Demo&#x27;</span>\nresult0 = re.match(<span class=\"hljs-string\">&#x27;^Hello\\s\\d\\d\\d\\s\\d{4}\\s\\w{10}&#x27;</span>, content)\nresult1 = re.match(<span class=\"hljs-string\">&#x27;^Hello\\s(\\d+)\\s(\\d+)\\sWorld&#x27;</span>, content)\n<span class=\"hljs-built_in\">print</span>(result0)\n<span class=\"hljs-built_in\">print</span>(result1)\n<span class=\"hljs-built_in\">print</span>(result1.group(<span class=\"hljs-number\">1</span>), result1.group(<span class=\"hljs-number\">2</span>))\n\n\n<span class=\"hljs-comment\"># è¾“å‡º</span>\n&lt;re.Match <span class=\"hljs-built_in\">object</span>; span=(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">25</span>), match=<span class=\"hljs-string\">&#x27;Hello 123 4567 World_This&#x27;</span>&gt;\n&lt;re.Match <span class=\"hljs-built_in\">object</span>; span=(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">20</span>), match=<span class=\"hljs-string\">&#x27;Hello 123 4567 World&#x27;</span>&gt;\n<span class=\"hljs-number\">123</span> <span class=\"hljs-number\">4567</span>\n</code></pre>\n<h3 id=\"é€šç”¨åŒ¹é…\">é€šç”¨åŒ¹é…</h3>\n<ul>\n<li>â€.*â€œå¯ä»¥åŒ¹é…ä»»æ„é•¿åº¦å­—ç¬¦ä¸²(æ¢è¡Œç¬¦é™¤å¤–)ã€‚</li>\n<li>â€.â€œå¯ä»¥åŒ¹é…ä»»æ„å­—ç¬¦(æ¢è¡Œç¬¦é™¤å¤–)</li>\n<li>â€*â€œä»£è¡¨åŒ¹é…å‰é¢çš„å­—ç¬¦æ— é™æ¬¡</li>\n</ul>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> re\n\ncontent = <span class=\"hljs-string\">&#x27;Hello 123 4567 World_This is a Regex Demo&#x27;</span>\nresult = re.match(<span class=\"hljs-string\">&#x27;^Hello\\s(\\d+)\\s(\\d+)\\s(.*?)Demo$&#x27;</span>, content)\n<span class=\"hljs-built_in\">print</span>(result)\n<span class=\"hljs-built_in\">print</span>(result.group(<span class=\"hljs-number\">3</span>))\n\n\n<span class=\"hljs-comment\"># è¾“å‡º</span>\n&lt;re.Match <span class=\"hljs-built_in\">object</span>; span=(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">41</span>), match=<span class=\"hljs-string\">&#x27;Hello 123 4567 World_This is a Regex Demo&#x27;</span>&gt;\nWorld_This <span class=\"hljs-keyword\">is</span> a Regex\n</code></pre>\n<h3 id=\"è´ªå©ªåŒ¹é…\">è´ªå©ªåŒ¹é…</h3>\n<p>ä½¿ç”¨â€.*â€œé€šç”¨åŒ¹é…æ—¶ï¼Œå¯èƒ½ä¼šå¾—ä¸åˆ°æƒ³è¦çš„ç»“æœï¼š</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> re\n\ncontent = <span class=\"hljs-string\">&#x27;Hello 1234567 World_This is a Regex Demo&#x27;</span>\n\nresult = re.match(<span class=\"hljs-string\">&#x27;^He.*(\\d+).*Demo$&#x27;</span>, content)\n<span class=\"hljs-built_in\">print</span>(result.group(<span class=\"hljs-number\">1</span>))\n\n\n<span class=\"hljs-comment\"># è¾“å‡º</span>\n<span class=\"hljs-number\">7</span>\n</code></pre>\n<p>æƒ³è¦çš„ç»“æœæ˜¯ 123ï¼Œå´è¾“å‡ºäº† 7ã€‚è¿™å°±æ¶‰åŠåˆ°è´ªå©ªä¸éè´ªå©ªåŒ¹é…äº†ã€‚</p>\n<ul>\n<li>åœ¨è´ªå©ªåŒ¹é…ä¸‹ï¼Œ &quot;._&quot;ä¼šåŒ¹é…å°½å¯èƒ½å¤šçš„å­—ç¬¦ã€‚\næ‰€ä»¥åœ¨ä¸Šé¢çš„æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œâ€._â€œç›´æ¥åŒ¹é…åˆ°äº†&#39;Hello 123 456&#39;ï¼Œ&#39;\\d&#39;åŒ¹é…åˆ°äº†&#39;7&#39;ã€‚</li>\n<li>åœ¨éè´ªå©ªåŒ¹é…ä¸‹ï¼Œ &quot;.<em>&quot;ä¼šåŒ¹é…å°½å¯èƒ½å°‘çš„å­—ç¬¦ã€‚éè´ªå©ªåŒ¹é…çš„å†™æ³•æ˜¯&quot;.</em>?&quot;ã€‚</li>\n</ul>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> re\n\ncontent = <span class=\"hljs-string\">&#x27;Hello 123 4567 World_This is a Regex Demo&#x27;</span>\nresult = re.match(<span class=\"hljs-string\">&#x27;^He.*?(\\d+).*Demo$&#x27;</span>, content)\n<span class=\"hljs-built_in\">print</span>(result.group(<span class=\"hljs-number\">1</span>))\n\n\n<span class=\"hljs-comment\"># è¾“å‡º</span>\n<span class=\"hljs-number\">123</span>\n</code></pre>\n<p>åœ¨åšåŒ¹é…çš„æ—¶å€™ï¼Œå­—ç¬¦ä¸²<strong>ä¸­é—´å°½é‡ä½¿ç”¨éè´ªå©ªåŒ¹é…</strong>ï¼Œä½†éœ€è¦æ³¨æ„ï¼Œå¦‚æœåŒ¹é…çš„ç»“æœåœ¨å­—ç¬¦ä¸²ç»“å°¾ï¼Œ&quot;.*?&quot;å°±æœ‰å¯èƒ½åŒ¹é…ä¸åˆ°ä»»ä½•å†…å®¹äº†ã€‚</p>\n<h3 id=\"ä¿®é¥°ç¬¦\">ä¿®é¥°ç¬¦</h3>\n<p>æ­£åˆ™è¡¨è¾¾å¼å¯ä»¥åŒ…å«ä¸€äº›<strong>å¯é€‰æ ‡å¿—ä¿®é¥°ç¬¦æ¥æ§åˆ¶åŒ¹é…çš„æ¨¡å¼</strong> ã€‚\n<img src=\"https://t1.picb.cc/uploads/2018/11/15/JX62zc.png\" alt=\"enter image description here\"></p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> re\n\ncontent = <span class=\"hljs-string\">&#x27;&#x27;&#x27;Hello 123 4567 World_This\n          is a Regex Demo&#x27;&#x27;&#x27;</span>\nresult_none = re.match(<span class=\"hljs-string\">&#x27;^He.*?(\\d+).*Demo$&#x27;</span>, content)\n<span class=\"hljs-built_in\">print</span>(result_none)\n\nresult = re.match(<span class=\"hljs-string\">&#x27;^He.*?(\\d+).*Demo$&#x27;</span>, content, re.S)\n<span class=\"hljs-built_in\">print</span>(result)\n\n\n<span class=\"hljs-comment\"># è¾“å‡º</span>\n<span class=\"hljs-literal\">None</span>\n&lt;re.Match <span class=\"hljs-built_in\">object</span>; span=(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">52</span>), match=<span class=\"hljs-string\">&#x27;Hello 123 4567 World_This \\n          is a Regex &gt;</span>\n</code></pre>\n<h3 id=\"è½¬ä¹‰åŒ¹é…\">è½¬ä¹‰åŒ¹é…</h3>\n<p>å½“é‡åˆ°ç”¨äºæ­£åˆ™åŒ¹é…æ¨¡å¼çš„ç‰¹æ®Šå­—ç¬¦æ—¶ï¼Œåœ¨å‰é¢åŠ åæ–œçº¿è½¬ä¹‰ä¸€ä¸‹å³å¯ ã€‚</p>\n<h2 id=\"search\">search</h2>\n<p>search ()ï¼Œå®ƒåœ¨åŒ¹é…æ—¶ä¼šæ‰«ææ•´ä¸ªå­—ç¬¦ä¸²ï¼Œç„¶åè¿”å›ç¬¬ä¸€ä¸ªæˆåŠŸåŒ¹é…çš„ç»“æœ ã€‚</p>\n<h3 id=\"search-ç¤ºä¾‹\">search ç¤ºä¾‹</h3>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> re\n\nhtml = <span class=\"hljs-string\">&#x27;&#x27;&#x27;&lt;div id=&quot;songs-list&quot;&gt;\n    &lt;h2 class=&quot;title&quot;&gt;ç»å…¸è€æ­Œ&lt;/h2&gt;\n    &lt;p class=&quot;introduction&quot;&gt;\n        ç»å…¸è€æ­Œåˆ—è¡¨\n    &lt;/p&gt;\n    &lt;ul id=&quot;list&quot; class=&quot;list-group&quot;&gt;\n        &lt;li data-view=&quot;2&quot;&gt;ä¸€è·¯ä¸Šæœ‰ä½ &lt;/li&gt;\n        &lt;li data-view=&quot;7&quot;&gt;\n            &lt;a href=&quot;/2.mp3&quot; singer=&quot;ä»»è´¤é½&quot;&gt;æ²§æµ·ä¸€å£°ç¬‘&lt;/a&gt;\n        &lt;/li&gt;\n        &lt;li data-view=&quot;4&quot; class=&quot;active&quot;&gt;\n            &lt;a href=&quot;/3.mp3&quot; singer=&quot;é½ç§¦&quot;&gt;å¾€äº‹éšé£&lt;/a&gt;\n        &lt;/li&gt;\n        &lt;li data-view=&quot;6&quot;&gt;&lt;a href=&quot;/4.mp3&quot; singer=&quot;beyond&quot;&gt;å…‰è¾‰å²æœˆ&lt;/a&gt;&lt;/li&gt;\n        &lt;li data-view=&quot;5&quot;&gt;&lt;a href=&quot;/5.mp3&quot; singer=&quot;é™ˆæ…§ç³&quot;&gt;è®°äº‹æœ¬&lt;/a&gt;&lt;/li&gt;\n    &lt;/ul&gt;\n&lt;/div&gt;&#x27;&#x27;&#x27;</span>\n\nresult = re.search(<span class=\"hljs-string\">&#x27;&lt;li.*?singer=&quot;(.*?)&quot;&gt;(.*?)&lt;/a&gt;&#x27;</span>, html, re.S)\n<span class=\"hljs-built_in\">print</span>(result.group(<span class=\"hljs-number\">1</span>), result.group(<span class=\"hljs-number\">2</span>))\nresult = re.search(<span class=\"hljs-string\">&#x27;&lt;li.*?href=&quot;(.*?)&quot;\\ssinger=&quot;(.*?)&quot;&gt;(.*?)&lt;/a&gt;&#x27;</span>, html, re.S)\n<span class=\"hljs-comment\">#print(result)</span>\n<span class=\"hljs-built_in\">print</span>(result.group(<span class=\"hljs-number\">1</span>), result.group(<span class=\"hljs-number\">2</span>), result.group(<span class=\"hljs-number\">3</span>))\n\n\n<span class=\"hljs-comment\"># è¾“å‡º</span>\nä»»è´¤é½ æ²§æµ·ä¸€å£°ç¬‘\n/<span class=\"hljs-number\">2.</span>mp3 ä»»è´¤é½ æ²§æµ·ä¸€å£°ç¬‘\n</code></pre>\n<h2 id=\"findall\">findall</h2>\n<p>findall()æ–¹æ³•ä¼šæœç´¢æ•´ä¸ªå­—ç¬¦ä¸²ç„¶åè¿”å›åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„æ‰€æœ‰å†…å®¹ã€‚</p>\n<h3 id=\"findall-ç¤ºä¾‹\">findall ç¤ºä¾‹</h3>\n<pre><code class=\"hljs language-python\">...\n...\nresult = re.search(<span class=\"hljs-string\">&#x27;&lt;li.*?singer=&quot;(.*?)&quot;&gt;(.*?)&lt;/a&gt;&#x27;</span>, html, re.S)\n<span class=\"hljs-built_in\">print</span>(result.group(<span class=\"hljs-number\">1</span>), result.group(<span class=\"hljs-number\">2</span>))\nresult = re.search(<span class=\"hljs-string\">&#x27;&lt;li.*?href=&quot;(.*?)&quot;\\ssinger=&quot;(.*?)&quot;&gt;(.*?)&lt;/a&gt;&#x27;</span>, html, re.S)\n\n\n<span class=\"hljs-comment\"># è¾“å‡º</span>\nä»»è´¤é½ æ²§æµ·ä¸€å£°ç¬‘\n/<span class=\"hljs-number\">2.</span>mp3 ä»»è´¤é½ æ²§æµ·ä¸€å£°ç¬‘\n/<span class=\"hljs-number\">2.</span>mp3 ä»»è´¤é½ æ²§æµ·ä¸€å£°ç¬‘\n/<span class=\"hljs-number\">3.</span>mp3 é½ç§¦ å¾€äº‹éšé£\n/<span class=\"hljs-number\">4.</span>mp3 beyond å…‰è¾‰å²æœˆ\n/<span class=\"hljs-number\">5.</span>mp3 é™ˆæ…§ç³ è®°äº‹æœ¬\n</code></pre>\n<h2 id=\"sub\">sub</h2>\n<p>ç”¨æ¥ä¿®æ”¹/æ›¿æ¢æ–‡æœ¬</p>\n<h3 id=\"sub-ä½¿ç”¨ç¤ºä¾‹\">sub ä½¿ç”¨ç¤ºä¾‹</h3>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> re\n\n<span class=\"hljs-keyword\">import</span> re\n\ncontent = <span class=\"hljs-string\">&#x27;54ak54yr50ir54ix5L2g&#x27;</span>\ncontent = re.sub(<span class=\"hljs-string\">&#x27;\\d&#x27;</span>, <span class=\"hljs-string\">&#x27;&#x27;</span>, content)\n<span class=\"hljs-built_in\">print</span>(content)\n\n\n<span class=\"hljs-comment\"># è¾“å‡º</span>\nakyririxLg\n</code></pre>\n<h2 id=\"compile\">compile</h2>\n<p>compile()å¯ä»¥å°†æ­£åˆ™å­—ç¬¦ä¸²ç¼–è¯‘æˆæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œä»¥ä¾¿åœ¨ä»¥åçš„åŒ¹é…ä¸­å¤ç”¨(ä¹Ÿå¯ä»¥ä¼ å…¥ä¿®é¥°ç¬¦)ã€‚</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> re\n\ncontent0 = <span class=\"hljs-string\">&#x27;2016-12-15 12:00&#x27;</span>\ncontent1 = <span class=\"hljs-string\">&#x27;2016-12-17 12:55&#x27;</span>\ncontent2 = <span class=\"hljs-string\">&#x27;2016-12-22 13:21&#x27;</span>\n\npattern = re.<span class=\"hljs-built_in\">compile</span>(<span class=\"hljs-string\">&#x27;\\d{2}:\\d{2}&#x27;</span>)\nresult0 = re.sub(pattern, <span class=\"hljs-string\">&#x27;&#x27;</span>, content1)\nresult1 = re.sub(pattern, <span class=\"hljs-string\">&#x27;&#x27;</span>, content1)\nresult2 = re.sub(pattern, <span class=\"hljs-string\">&#x27;&#x27;</span>, content2)\n\n<span class=\"hljs-built_in\">print</span>(result0, result1, result2)\n\n\n<span class=\"hljs-comment\"># è¾“å‡º</span>\n<span class=\"hljs-number\">2016</span>-<span class=\"hljs-number\">12</span>-<span class=\"hljs-number\">17</span>  <span class=\"hljs-number\">2016</span>-<span class=\"hljs-number\">12</span>-<span class=\"hljs-number\">17</span>  <span class=\"hljs-number\">2016</span>-<span class=\"hljs-number\">12</span>-<span class=\"hljs-number\">22</span>\n</code></pre>\n"},{"title":"Python-BeautifulSoup","tags":["Python","BeautifulSoup"],"categories":"Python","description":"# Python-BeautifulSoupçš„ä½¿ç”¨\nBeautiSoupï¼Œæ˜¯å€ŸåŠ©ç½‘é¡µçš„ç»“æ„å’Œå±æ€§ç­‰ç‰¹æ€§æ¥è§£æç½‘é¡µçš„å·¥å…·ï¼Œæœ‰äº†å®ƒæˆ‘ä»¬ä¸ç”¨å†å»å†™ä¸€äº›å¤æ‚çš„æ­£åˆ™ï¼Œåªéœ€è¦ç®€å•çš„å‡ æ¡è¯­å¥å°±å¯ä»¥å®Œæˆç½‘é¡µä¸­æŸä¸ªå…ƒç´ çš„æå–ã€‚\n## BeautifulSoupç®€ä»‹\nå®˜æ–¹è§£é‡Šå¦‚ä¸‹ï¼š\nBeautifulSoupæä¾›ä¸€äº›ç®€å•çš„ã€Pythonå¼çš„å‡½æ•°ç”¨æ¥å¤„ç†å¯¼èˆªã€æœç´¢ã€ä¿®æ”¹åˆ†ææ ‘ç­‰åŠŸèƒ½ã€‚å®ƒæ˜¯ä¸€ä¸ªå·¥å…·ç®±ï¼Œé€šè¿‡è§£ææ–‡æ¡£ä¸ºç”¨æˆ·","createDate":"2018-11-16 14:50:41","updateDate":"2021-02-20 17:20:24","body":"<h1 id=\"python-beautifulsoupçš„ä½¿ç”¨\">Python-BeautifulSoupçš„ä½¿ç”¨</h1>\n<p>BeautiSoupï¼Œæ˜¯å€ŸåŠ©ç½‘é¡µçš„ç»“æ„å’Œå±æ€§ç­‰ç‰¹æ€§æ¥è§£æç½‘é¡µçš„å·¥å…·ï¼Œæœ‰äº†å®ƒæˆ‘ä»¬ä¸ç”¨å†å»å†™ä¸€äº›å¤æ‚çš„æ­£åˆ™ï¼Œåªéœ€è¦ç®€å•çš„å‡ æ¡è¯­å¥å°±å¯ä»¥å®Œæˆç½‘é¡µä¸­æŸä¸ªå…ƒç´ çš„æå–ã€‚</p>\n<h2 id=\"beautifulsoupç®€ä»‹\">BeautifulSoupç®€ä»‹</h2>\n<p>å®˜æ–¹è§£é‡Šå¦‚ä¸‹ï¼š\nBeautifulSoupæä¾›ä¸€äº›ç®€å•çš„ã€Pythonå¼çš„å‡½æ•°ç”¨æ¥å¤„ç†å¯¼èˆªã€æœç´¢ã€ä¿®æ”¹åˆ†ææ ‘ç­‰åŠŸèƒ½ã€‚å®ƒæ˜¯ä¸€ä¸ªå·¥å…·ç®±ï¼Œé€šè¿‡è§£ææ–‡æ¡£ä¸ºç”¨æˆ·æä¾›éœ€è¦æŠ“å–çš„æ•°æ®ï¼Œå› ä¸ºç®€å•ï¼Œæ‰€ä»¥ä¸éœ€è¦å¤šå°‘ä»£ç å°±å¯ä»¥å†™å‡ºä¸€ä¸ªå®Œæ•´çš„åº”ç”¨ç¨‹åºã€‚ BeautifulSoup è‡ªåŠ¨å°†è¾“å…¥æ–‡æ¡£è½¬æ¢ä¸º Unicode ç¼–ç ï¼Œè¾“å‡ºæ–‡æ¡£è½¬æ¢ä¸º utf-8 ç¼–ç ã€‚ä½ ä¸éœ€è¦è€ƒè™‘ç¼–ç æ–¹å¼ï¼Œé™¤éæ–‡æ¡£æ²¡æœ‰æŒ‡å®šä¸€ä¸ªç¼–ç æ–¹å¼ï¼Œè¿™æ—¶ä½ ä»…ä»…éœ€è¦è¯´æ˜ä¸€ä¸‹åŸå§‹ç¼–ç æ–¹å¼å°±å¯ä»¥äº†ã€‚ BeautifulSoup å·²æˆä¸ºå’Œ lxmlã€html6lib ä¸€æ ·å‡ºè‰²çš„ Python è§£é‡Šå™¨ï¼Œä¸ºç”¨æˆ·çµæ´»åœ°æä¾›ä¸åŒçš„è§£æç­–ç•¥æˆ–å¼ºåŠ²çš„é€Ÿåº¦ã€‚</p>\n<h2 id=\"è§£æå™¨\">è§£æå™¨</h2>\n<p>BeautifulSoup åœ¨è§£æçš„æ—¶å€™å®é™…ä¸Šæ˜¯ä¾èµ–äºè§£æå™¨çš„ï¼Œå®ƒé™¤äº†æ”¯æŒ Python æ ‡å‡†åº“ä¸­çš„ HTML è§£æå™¨ï¼Œè¿˜æ”¯æŒä¸€äº›ç¬¬ä¸‰æ–¹çš„è§£æå™¨æ¯”å¦‚ LXMLï¼Œä¸‹é¢æˆ‘ä»¬å¯¹ BeautifulSoup æ”¯æŒçš„è§£æå™¨åŠå®ƒä»¬çš„ä¸€äº›ä¼˜ç¼ºç‚¹åšä¸€ä¸ªç®€å•çš„å¯¹æ¯”ã€‚\n<img src=\"https://t1.picb.cc/uploads/2018/11/16/JXuhZc.png\" alt=\"enter image description here\"></p>\n<h2 id=\"åŸºæœ¬ä½¿ç”¨\">åŸºæœ¬ä½¿ç”¨</h2>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">from</span> bs4 <span class=\"hljs-keyword\">import</span> BeautifulSoup\n\nhtml = <span class=\"hljs-string\">&#x27;&#x27;&#x27;\n&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;&lt;/head&gt;\n&lt;body&gt;\n&lt;p class=&quot;title&quot; name=&quot;dromouse&quot;&gt;&lt;b&gt;The Dormouse&#x27;s story&lt;/b&gt;&lt;/p&gt;\n&lt;p class=&quot;story&quot;&gt;Once upon a time there were three little sisters; and their names were\n&lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&gt;&lt;!-- Elsie --&gt;&lt;/a&gt;,\n&lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; and\n&lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;;\nand they lived at the bottom of a well.&lt;/p&gt;\n&lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;\n&#x27;&#x27;&#x27;</span>\n\nsoup = BeautifulSoup(html, <span class=\"hljs-string\">&#x27;lxml&#x27;</span>) \n<span class=\"hljs-built_in\">print</span>(soup.prettify())  <span class=\"hljs-comment\"># æŠŠè¦è§£æçš„å­—ç¬¦ä¸²ä»¥æ ‡å‡†çš„ç¼©è¿›æ ¼å¼è¾“å‡º(è‡ªåŠ¨æ›´æ­£æ ¼å¼)</span>\n<span class=\"hljs-built_in\">print</span>(soup.title.string)\n\n\n<span class=\"hljs-comment\"># è¾“å‡º</span>\n&lt;html&gt;\n &lt;head&gt;\n  &lt;title&gt;\n   The Dormouse<span class=\"hljs-string\">&#x27;s story\n  &lt;/title&gt;\n &lt;/head&gt;\n &lt;body&gt;\n  &lt;p class=&quot;title&quot; name=&quot;dromouse&quot;&gt;\n   &lt;b&gt;\n    The Dormouse&#x27;</span>s story\n   &lt;/b&gt;\n  &lt;/p&gt;\n  &lt;p <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;story&quot;</span>&gt;\n   Once upon a time there were three little sisters; <span class=\"hljs-keyword\">and</span> their names were\n   &lt;a <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;sister&quot;</span> href=<span class=\"hljs-string\">&quot;http://example.com/elsie&quot;</span> <span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;link1&quot;</span>&gt;\n    &lt;!-- Elsie --&gt;\n   &lt;/a&gt;\n   ,\n   &lt;a <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;sister&quot;</span> href=<span class=\"hljs-string\">&quot;http://example.com/lacie&quot;</span> <span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;link2&quot;</span>&gt;\n    Lacie\n   &lt;/a&gt;\n   <span class=\"hljs-keyword\">and</span>\n   &lt;a <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;sister&quot;</span> href=<span class=\"hljs-string\">&quot;http://example.com/tillie&quot;</span> <span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;link3&quot;</span>&gt;\n    Tillie\n   &lt;/a&gt;\n   ;\n<span class=\"hljs-keyword\">and</span> they lived at the bottom of a well.\n  &lt;/p&gt;\n  &lt;p <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;story&quot;</span>&gt;\n   ...\n  &lt;/p&gt;\n &lt;/body&gt;\n&lt;/html&gt;\nThe Dormouse<span class=\"hljs-string\">&#x27;s story</span>\n</code></pre>\n<h2 id=\"èŠ‚ç‚¹é€‰æ‹©å™¨\">èŠ‚ç‚¹é€‰æ‹©å™¨</h2>\n<h3 id=\"é€‰æ‹©å…ƒç´ \">é€‰æ‹©å…ƒç´ </h3>\n<pre><code class=\"hljs language-python\">soup = BeautifulSoup(html, <span class=\"hljs-string\">&#x27;lxml&#x27;</span>)\n<span class=\"hljs-built_in\">print</span>(soup.title)\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-built_in\">type</span>(soup.title.string))\n<span class=\"hljs-built_in\">print</span>(soup.title.string)\n<span class=\"hljs-built_in\">print</span>(soup.head)\n<span class=\"hljs-built_in\">print</span>(soup.p)  <span class=\"hljs-comment\"># åªé€‰æ‹©ç¬¬ä¸€ä¸ªå‡ºç°çš„pæ ‡ç­¾</span>\n\n\n<span class=\"hljs-comment\"># è¾“å‡º</span>\n&lt;title&gt;The Dormouse<span class=\"hljs-string\">&#x27;s story&lt;/title&gt;\n&lt;class &#x27;</span>bs4.element.NavigableString<span class=\"hljs-string\">&#x27;&gt;\nThe Dormouse&#x27;</span>s story\n&lt;head&gt;&lt;title&gt;The Dormouse<span class=\"hljs-string\">&#x27;s story&lt;/title&gt;&lt;/head&gt;\n&lt;p class=&quot;title&quot; name=&quot;dromouse&quot;&gt;&lt;b&gt;The Dormouse&#x27;</span>s story&lt;/b&gt;&lt;/p&gt;\n</code></pre>\n<h2 id=\"æå–ä¿¡æ¯\">æå–ä¿¡æ¯</h2>\n<h4 id=\"è·å–åç§°\">è·å–åç§°</h4>\n<p>å¯ä»¥åˆ©ç”¨ name å±æ€§æ¥è·å–èŠ‚ç‚¹çš„åç§°ã€‚è¿˜æ˜¯ä»¥ä¸Šé¢çš„æ–‡æœ¬ä¸ºä¾‹ï¼Œæˆ‘ä»¬é€‰å– title èŠ‚ç‚¹ï¼Œç„¶åè°ƒç”¨ name å±æ€§å°±å¯ä»¥å¾—åˆ°èŠ‚ç‚¹åç§°ã€‚</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-built_in\">print</span>(soup.title.name)\n\n<span class=\"hljs-comment\"># è¾“å‡º</span>\ntitle\n</code></pre>\n<h4 id=\"è·å–å±æ€§\">è·å–å±æ€§</h4>\n<p>æ¯ä¸ªèŠ‚ç‚¹å¯èƒ½æœ‰å¤šä¸ªå±æ€§ï¼Œæ¯”å¦‚ idï¼Œclass ç­‰ç­‰ï¼Œæˆ‘ä»¬é€‰æ‹©åˆ°è¿™ä¸ªèŠ‚ç‚¹å…ƒç´ ä¹‹åï¼Œå¯ä»¥è°ƒç”¨ attrs è·å–æ‰€æœ‰å±æ€§ã€‚</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-built_in\">print</span>(soup.p.attrs)\n<span class=\"hljs-built_in\">print</span>(soup.p.attrs[<span class=\"hljs-string\">&#x27;name&#x27;</span>])\n<span class=\"hljs-comment\">#æ›´åŠ ç®€ä¾¿çš„å†™æ³•</span>\n<span class=\"hljs-built_in\">print</span>(soup.p[<span class=\"hljs-string\">&#x27;name&#x27;</span>])\n<span class=\"hljs-built_in\">print</span>(soup.p[<span class=\"hljs-string\">&#x27;class&#x27;</span>])\n\n<span class=\"hljs-comment\"># è¾“å‡º</span>\n{<span class=\"hljs-string\">&#x27;class&#x27;</span>: [<span class=\"hljs-string\">&#x27;title&#x27;</span>], <span class=\"hljs-string\">&#x27;name&#x27;</span>: <span class=\"hljs-string\">&#x27;dromouse&#x27;</span>}\ndromouse\ndromouse\n[<span class=\"hljs-string\">&#x27;title&#x27;</span>]\n</code></pre>\n<h4 id=\"è·å–å†…å®¹\">è·å–å†…å®¹</h4>\n<p>å¯ä»¥åˆ©ç”¨ string å±æ€§è·å–èŠ‚ç‚¹å…ƒç´ åŒ…å«çš„æ–‡æœ¬å†…å®¹ã€‚</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-built_in\">print</span>(soup.p.string)\n\n<span class=\"hljs-comment\"># è¾“å‡º</span>\nThe Dormouse<span class=\"hljs-string\">&#x27;s story</span>\n</code></pre>\n<h3 id=\"åµŒå¥—é€‰æ‹©\">åµŒå¥—é€‰æ‹©</h3>\n<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­æˆ‘ä»¬çŸ¥é“æ¯ä¸€ä¸ªè¿”å›ç»“æœéƒ½æ˜¯ bs4.element.Tag ç±»å‹ï¼Œå®ƒåŒæ ·å¯ä»¥ç»§ç»­è°ƒç”¨èŠ‚ç‚¹è¿›è¡Œä¸‹ä¸€æ­¥çš„é€‰æ‹©ï¼Œæ¯”å¦‚æˆ‘ä»¬è·å–äº† head èŠ‚ç‚¹å…ƒç´ ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­è°ƒç”¨ head æ¥é€‰å–å…¶å†…éƒ¨çš„ head èŠ‚ç‚¹å…ƒç´ ã€‚</p>\n<pre><code class=\"hljs language-python\">html = <span class=\"hljs-string\">&quot;&quot;&quot;\n&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;&lt;/head&gt;\n&lt;body&gt;\n&quot;&quot;&quot;</span>\n\n<span class=\"hljs-keyword\">from</span> bs4 <span class=\"hljs-keyword\">import</span> BeautifulSoup\nsoup = BeautifulSoup(html, <span class=\"hljs-string\">&#x27;lxml&#x27;</span>)\n<span class=\"hljs-built_in\">print</span>(soup.head.title)\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-built_in\">type</span>(soup.head.title))\n<span class=\"hljs-built_in\">print</span>(soup.head.title.string)\n\n\n<span class=\"hljs-comment\"># è¾“å‡º</span>\n&lt;title&gt;The Dormouse<span class=\"hljs-string\">&#x27;s story&lt;/title&gt;\n&lt;class &#x27;</span>bs4.element.Tag<span class=\"hljs-string\">&#x27;&gt;\nThe Dormouse&#x27;</span>s story\n</code></pre>\n<h3 id=\"å…³è”é€‰æ‹©\">å…³è”é€‰æ‹©</h3>\n<p>æˆ‘ä»¬åœ¨åšé€‰æ‹©çš„æ—¶å€™æœ‰æ—¶å€™ä¸èƒ½åšåˆ°ä¸€æ­¥å°±å¯ä»¥é€‰æ‹©åˆ°æƒ³è¦çš„èŠ‚ç‚¹å…ƒç´ ï¼Œæœ‰æ—¶å€™åœ¨é€‰æ‹©çš„æ—¶å€™éœ€è¦å…ˆé€‰ä¸­æŸä¸€ä¸ªèŠ‚ç‚¹å…ƒç´ ï¼Œç„¶åä»¥å®ƒä¸ºåŸºå‡†å†é€‰æ‹©å®ƒçš„å­èŠ‚ç‚¹ã€çˆ¶èŠ‚ç‚¹ã€å…„å¼ŸèŠ‚ç‚¹ç­‰ç­‰ã€‚</p>\n<h4 id=\"å­èŠ‚ç‚¹å’Œå­å­™èŠ‚ç‚¹\">å­èŠ‚ç‚¹å’Œå­å­™èŠ‚ç‚¹</h4>\n<p>é€‰å–åˆ°äº†ä¸€ä¸ªèŠ‚ç‚¹å…ƒç´ ä¹‹åï¼Œå¦‚æœæƒ³è¦è·å–å®ƒçš„<strong>ç›´æ¥å­èŠ‚ç‚¹</strong>å¯ä»¥è°ƒç”¨ contents å±æ€§ã€‚ contents è¿”å›çš„æ˜¯åˆ—è¡¨ç±»å‹ï¼Œ children è¿”å›çš„æ˜¯ç”Ÿæˆå™¨ç±»å‹ã€‚</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-built_in\">print</span>(soup.p.contents)\n<span class=\"hljs-built_in\">print</span>(soup.p.children)\n<span class=\"hljs-built_in\">print</span>(soup.p.contents)\n\n<span class=\"hljs-built_in\">print</span>(soup.p.children)\n<span class=\"hljs-keyword\">for</span> i, child <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">enumerate</span>(soup.p.children):\n    <span class=\"hljs-built_in\">print</span>(i, child)\n\n\n<span class=\"hljs-comment\"># è¾“å‡º</span>\n[<span class=\"hljs-string\">&#x27;Once upon a time there were three little sisters; and their names were\\n&#x27;</span>, &lt;a <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;sister&quot;</span> href=<span class=\"hljs-string\">&quot;http://example.com/elsie&quot;</span> <span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;link1&quot;</span>&gt;&lt;!-- Elsie --&gt;&lt;/a&gt;, <span class=\"hljs-string\">&#x27;,\\n&#x27;</span>, &lt;a <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;sister&quot;</span> href=<span class=\"hljs-string\">&quot;http://example.com/lacie&quot;</span> <span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;link2&quot;</span>&gt;Lacie&lt;/a&gt;, <span class=\"hljs-string\">&#x27; and\\n&#x27;</span>, &lt;a <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;sister&quot;</span> href=<span class=\"hljs-string\">&quot;http://example.com/tillie&quot;</span> <span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;link3&quot;</span>&gt;Tillie&lt;/a&gt;, <span class=\"hljs-string\">&#x27;;\\nand they lived at the bottom of a well.&#x27;</span>]\n\n<span class=\"hljs-number\">0</span> Once upon a time there were three little sisters; <span class=\"hljs-keyword\">and</span> their names were\n\n<span class=\"hljs-number\">1</span> &lt;a <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;sister&quot;</span> href=<span class=\"hljs-string\">&quot;http://example.com/elsie&quot;</span> <span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;link1&quot;</span>&gt;&lt;!-- Elsie --&gt;&lt;/a&gt;\n<span class=\"hljs-number\">2</span> ,\n\n<span class=\"hljs-number\">3</span> &lt;a <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;sister&quot;</span> href=<span class=\"hljs-string\">&quot;http://example.com/lacie&quot;</span> <span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;link2&quot;</span>&gt;Lacie&lt;/a&gt;\n<span class=\"hljs-number\">4</span>  <span class=\"hljs-keyword\">and</span>\n\n<span class=\"hljs-number\">5</span> &lt;a <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;sister&quot;</span> href=<span class=\"hljs-string\">&quot;http://example.com/tillie&quot;</span> <span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;link3&quot;</span>&gt;Tillie&lt;/a&gt;\n<span class=\"hljs-number\">6</span> ;\n<span class=\"hljs-keyword\">and</span> they lived at the bottom of a well.\n</code></pre>\n<h4 id=\"çˆ¶èŠ‚ç‚¹å’Œç¥–å…ˆèŠ‚ç‚¹\">çˆ¶èŠ‚ç‚¹å’Œç¥–å…ˆèŠ‚ç‚¹</h4>\n<p>å¦‚æœè¦è·å–æŸä¸ªèŠ‚ç‚¹å…ƒç´ çš„ç›´æ¥çˆ¶èŠ‚ç‚¹ï¼Œå¯ä»¥è°ƒç”¨ parent å±æ€§ï¼Œè¦æƒ³è·å–æ‰€æœ‰çš„ç¥–å…ˆèŠ‚ç‚¹ï¼Œå¯ä»¥è°ƒç”¨ parents ã€‚</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-built_in\">print</span>(soup.a.parent)\n<span class=\"hljs-built_in\">print</span>(soup.a.parents)\n\n<span class=\"hljs-comment\"># è¾“å‡º</span>\n&lt;p <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;story&quot;</span>&gt;Once upon a time there were three little sisters; <span class=\"hljs-keyword\">and</span> their names were\n&lt;a <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;sister&quot;</span> href=<span class=\"hljs-string\">&quot;http://example.com/elsie&quot;</span> <span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;link1&quot;</span>&gt;&lt;!-- Elsie --&gt;&lt;/a&gt;,\n&lt;a <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;sister&quot;</span> href=<span class=\"hljs-string\">&quot;http://example.com/lacie&quot;</span> <span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;link2&quot;</span>&gt;Lacie&lt;/a&gt; <span class=\"hljs-keyword\">and</span>\n&lt;a <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;sister&quot;</span> href=<span class=\"hljs-string\">&quot;http://example.com/tillie&quot;</span> <span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;link3&quot;</span>&gt;Tillie&lt;/a&gt;;\n<span class=\"hljs-keyword\">and</span> they lived at the bottom of a well.&lt;/p&gt;\n\n[(<span class=\"hljs-number\">0</span>, &lt;p <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;story&quot;</span>&gt;Once upon a time there were three little sisters; <span class=\"hljs-keyword\">and</span> their names were\n&lt;a <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;sister&quot;</span> href=<span class=\"hljs-string\">&quot;http://example.com/elsie&quot;</span> <span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;link1&quot;</span>&gt;&lt;!-- Elsie --&gt;&lt;/a&gt;,\n&lt;a <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;sister&quot;</span> href=<span class=\"hljs-string\">&quot;http://example.com/lacie&quot;</span> <span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;link2&quot;</span>&gt;Lacie&lt;/a&gt; <span class=\"hljs-keyword\">and</span>\n&lt;a <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;sister&quot;</span> href=<span class=\"hljs-string\">&quot;http://example.com/tillie&quot;</span> <span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;link3&quot;</span>&gt;Tillie&lt;/a&gt;;\n<span class=\"hljs-keyword\">and</span> they lived at the bottom of a well.&lt;/p&gt;), (<span class=\"hljs-number\">1</span>, &lt;body&gt;\n&lt;p <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;story&quot;</span>&gt;Once upon a time there were three little sisters; <span class=\"hljs-keyword\">and</span> their names were\n&lt;a <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;sister&quot;</span> href=<span class=\"hljs-string\">&quot;http://example.com/elsie&quot;</span> <span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;link1&quot;</span>&gt;&lt;!-- Elsie --&gt;&lt;/a&gt;,\n&lt;a <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;sister&quot;</span> href=<span class=\"hljs-string\">&quot;http://example.com/lacie&quot;</span> <span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;link2&quot;</span>&gt;Lacie&lt;/a&gt; <span class=\"hljs-keyword\">and</span>\n&lt;a <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;sister&quot;</span> href=<span class=\"hljs-string\">&quot;http://example.com/tillie&quot;</span> <span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;link3&quot;</span>&gt;Tillie&lt;/a&gt;;\n<span class=\"hljs-keyword\">and</span> they lived at the bottom of a well.&lt;/p&gt;\n&lt;p <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;story&quot;</span>&gt;...&lt;/p&gt;\n&lt;/body&gt;), (<span class=\"hljs-number\">2</span>, &lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse<span class=\"hljs-string\">&#x27;s story&lt;/title&gt;&lt;/head&gt;\n&lt;body&gt;\n&lt;p class=&quot;story&quot;&gt;Once upon a time there were three little sisters; and their names were\n&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;&lt;!-- Elsie --&gt;&lt;/a&gt;,\n&lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; and\n&lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;;\nand they lived at the bottom of a well.&lt;/p&gt;\n&lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;\n&lt;/body&gt;&lt;/html&gt;), (3, &lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse&#x27;</span>s story&lt;/title&gt;&lt;/head&gt;\n&lt;body&gt;\n&lt;p <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;story&quot;</span>&gt;Once upon a time there were three little sisters; <span class=\"hljs-keyword\">and</span> their names were\n&lt;a <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;sister&quot;</span> href=<span class=\"hljs-string\">&quot;http://example.com/elsie&quot;</span> <span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;link1&quot;</span>&gt;&lt;!-- Elsie --&gt;&lt;/a&gt;,\n&lt;a <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;sister&quot;</span> href=<span class=\"hljs-string\">&quot;http://example.com/lacie&quot;</span> <span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;link2&quot;</span>&gt;Lacie&lt;/a&gt; <span class=\"hljs-keyword\">and</span>\n&lt;a <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;sister&quot;</span> href=<span class=\"hljs-string\">&quot;http://example.com/tillie&quot;</span> <span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;link3&quot;</span>&gt;Tillie&lt;/a&gt;;\n<span class=\"hljs-keyword\">and</span> they lived at the bottom of a well.&lt;/p&gt;\n&lt;p <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;story&quot;</span>&gt;...&lt;/p&gt;\n&lt;/body&gt;&lt;/html&gt;)]\n</code></pre>\n<h4 id=\"å…„å¼ŸèŠ‚ç‚¹\">å…„å¼ŸèŠ‚ç‚¹</h4>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">from</span> bs4 <span class=\"hljs-keyword\">import</span> BeautifulSoup\nhtml = <span class=\"hljs-string\">&quot;&quot;&quot;\n&lt;html&gt;\n    &lt;body&gt;\n        &lt;p class=&quot;story&quot;&gt;\n            Once upon a time there were three little sisters; and their names were\n            &lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&gt;\n                &lt;span&gt;Elsie&lt;/span&gt;\n            &lt;/a&gt;\n            Hello\n            &lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; \n            and\n            &lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;\n            and they lived at the bottom of a well.\n        &lt;/p&gt;\n&quot;&quot;&quot;</span>\nsoup = BeautifulSoup(html, <span class=\"hljs-string\">&#x27;lxml&#x27;</span>)\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&#x27;next_sibling&#x27;</span>, soup.a.next_sibling)\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&#x27;prev_sibling&#x27;</span>, soup.a.previous_sibling)\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&#x27;next_siblings&#x27;</span>, <span class=\"hljs-built_in\">list</span>(<span class=\"hljs-built_in\">enumerate</span>(soup.a.next_sibling)))\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&#x27;prev_siblings&#x27;</span>, <span class=\"hljs-built_in\">list</span>(<span class=\"hljs-built_in\">enumerate</span>(soup.a.previous_sibling)))\n\n\n<span class=\"hljs-comment\"># è¾“å‡º</span>\nnext_sibling \n            Hello\n            \nprev_sibling \n            Once upon a time there were three little sisters; <span class=\"hljs-keyword\">and</span> their names were\n            \nnext_siblings [(<span class=\"hljs-number\">0</span>, <span class=\"hljs-string\">&#x27;\\n            Hello\\n            &#x27;</span>), (<span class=\"hljs-number\">1</span>, &lt;a <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;sister&quot;</span> href=<span class=\"hljs-string\">&quot;http://example.com/lacie&quot;</span> <span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;link2&quot;</span>&gt;Lacie&lt;/a&gt;), (<span class=\"hljs-number\">2</span>, <span class=\"hljs-string\">&#x27; \\n            and\\n            &#x27;</span>), (<span class=\"hljs-number\">3</span>, &lt;a <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;sister&quot;</span> href=<span class=\"hljs-string\">&quot;http://example.com/tillie&quot;</span> <span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;link3&quot;</span>&gt;Tillie&lt;/a&gt;), (<span class=\"hljs-number\">4</span>, <span class=\"hljs-string\">&#x27;\\n            and they lived at the bottom of a well.\\n        &#x27;</span>)]\nprev_siblings [(<span class=\"hljs-number\">0</span>, <span class=\"hljs-string\">&#x27;\\n            Once upon a time there were three little sisters; and their names were\\n            &#x27;</span>)]\n</code></pre>\n<h2 id=\"æ–¹æ³•é€‰æ‹©å™¨\">æ–¹æ³•é€‰æ‹©å™¨</h2>\n<p>å‰é¢è®²çš„é€‰æ‹©æ–¹æ³•éƒ½æ˜¯é€šè¿‡å±æ€§æ¥é€‰æ‹©å…ƒç´ çš„ï¼Œè¿™ç§é€‰æ‹©æ–¹æ³•éå¸¸å¿«ï¼Œä½†æ˜¯å¦‚æœè¦è¿›è¡Œæ¯”è¾ƒå¤æ‚çš„é€‰æ‹©çš„è¯åˆ™ä¼šæ¯”è¾ƒç¹çï¼Œä¸å¤Ÿçµæ´»ã€‚æ‰€ä»¥ BeautifulSoup è¿˜æä¾›äº†ä¸€äº›æŸ¥è¯¢çš„æ–¹æ³•ï¼Œæ¯”å¦‚ find_all()ã€find() ç­‰æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨æ–¹æ³•ç„¶åä¼ å…¥ç›¸åº”ç­‰å‚æ•°å°±å¯ä»¥çµæ´»åœ°è¿›è¡ŒæŸ¥è¯¢ã€‚</p>\n<h3 id=\"find_all--æŸ¥æ‰¾æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„å…ƒç´ \">find_all--æŸ¥æ‰¾æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„å…ƒç´ </h3>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">from</span> bs4 <span class=\"hljs-keyword\">import</span> BeautifulSoup\nhtml=<span class=\"hljs-string\">&#x27;&#x27;&#x27;\n&lt;div class=&quot;panel&quot;&gt;\n    &lt;div class=&quot;panel-heading&quot;&gt;\n        &lt;h4&gt;Hello&lt;/h4&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;panel-body&quot;&gt;\n        &lt;ul class=&quot;list&quot; id=&quot;list-1&quot;&gt;\n            &lt;li class=&quot;element&quot;&gt;Foo&lt;/li&gt;\n            &lt;li class=&quot;element&quot;&gt;Bar&lt;/li&gt;\n            &lt;li class=&quot;element&quot;&gt;Jay&lt;/li&gt;\n        &lt;/ul&gt;\n        &lt;ul class=&quot;list list-small&quot; id=&quot;list-2&quot;&gt;\n            &lt;li class=&quot;element&quot;&gt;Foo&lt;/li&gt;\n            &lt;li class=&quot;element&quot;&gt;Bar&lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&#x27;&#x27;&#x27;</span>\nsoup = BeautifulSoup(html, <span class=\"hljs-string\">&#x27;lxml&#x27;</span>)\n<span class=\"hljs-built_in\">print</span>(soup.find_all(name = <span class=\"hljs-string\">&#x27;ul&#x27;</span>))\n<span class=\"hljs-keyword\">for</span> ul <span class=\"hljs-keyword\">in</span> soup.find_all(name = <span class=\"hljs-string\">&#x27;ul&#x27;</span>):\n    <span class=\"hljs-built_in\">print</span>(ul.find_all(name = <span class=\"hljs-string\">&#x27;li&#x27;</span>))\n    <span class=\"hljs-keyword\">for</span> li <span class=\"hljs-keyword\">in</span> ul.find_all(name = <span class=\"hljs-string\">&#x27;li&#x27;</span>):\n        <span class=\"hljs-built_in\">print</span>(li.string)\n\n<span class=\"hljs-comment\"># è¾“å‡º</span>\n[&lt;ul <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;list&quot;</span> <span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;list-1&quot;</span>&gt;\n&lt;li <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;element&quot;</span>&gt;Foo&lt;/li&gt;\n&lt;li <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;element&quot;</span>&gt;Bar&lt;/li&gt;\n&lt;li <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;element&quot;</span>&gt;Jay&lt;/li&gt;\n&lt;/ul&gt;, &lt;ul <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;list list-small&quot;</span> <span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;list-2&quot;</span>&gt;\n&lt;li <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;element&quot;</span>&gt;Foo&lt;/li&gt;\n&lt;li <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;element&quot;</span>&gt;Bar&lt;/li&gt;\n&lt;/ul&gt;]\n[&lt;li <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;element&quot;</span>&gt;Foo&lt;/li&gt;, &lt;li <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;element&quot;</span>&gt;Bar&lt;/li&gt;, &lt;li <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;element&quot;</span>&gt;Jay&lt;/li&gt;]\nFoo\nBar\nJay\n[&lt;li <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;element&quot;</span>&gt;Foo&lt;/li&gt;, &lt;li <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;element&quot;</span>&gt;Bar&lt;/li&gt;]\nFoo\nBar\n</code></pre>\n<h3 id=\"attrs\">attrs</h3>\n<p>æ ¹æ®å±æ€§è¿›è¡ŒæŸ¥è¯¢</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-built_in\">print</span>(soup.find_all(attrs = {<span class=\"hljs-string\">&#x27;id&#x27;</span>: <span class=\"hljs-string\">&#x27;list-1&#x27;</span>}))\n\n<span class=\"hljs-comment\"># è¾“å‡º</span>\n[&lt;ul <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;list&quot;</span> <span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;list-1&quot;</span>&gt;\n&lt;li <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;element&quot;</span>&gt;Foo&lt;/li&gt;\n&lt;li <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;element&quot;</span>&gt;Bar&lt;/li&gt;\n&lt;li <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;element&quot;</span>&gt;Jay&lt;/li&gt;\n&lt;/ul&gt;]\n</code></pre>\n<h3 id=\"text\">text</h3>\n<p>text å‚æ•°å¯ä»¥ç”¨æ¥åŒ¹é…èŠ‚ç‚¹çš„æ–‡æœ¬ï¼Œä¼ å…¥çš„å½¢å¼å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œå¯ä»¥æ˜¯æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ã€‚</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> re\nhtml=<span class=\"hljs-string\">&#x27;&#x27;&#x27;\n&lt;div class=&quot;panel&quot;&gt;\n    &lt;div class=&quot;panel-body&quot;&gt;\n        &lt;a&gt;Hello, this is a link&lt;/a&gt;\n        &lt;a&gt;Hello, this is a link, too&lt;/a&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&#x27;&#x27;&#x27;</span>\n<span class=\"hljs-keyword\">from</span> bs4 <span class=\"hljs-keyword\">import</span> BeautifulSoup\nsoup = BeautifulSoup(html, <span class=\"hljs-string\">&#x27;lxml&#x27;</span>)\n<span class=\"hljs-built_in\">print</span>(soup.find_all(text=re.<span class=\"hljs-built_in\">compile</span>(<span class=\"hljs-string\">&#x27;link&#x27;</span>)))\n\n<span class=\"hljs-comment\"># è¾“å‡º</span>\n[<span class=\"hljs-string\">&#x27;Hello, this is a link&#x27;</span>, <span class=\"hljs-string\">&#x27;Hello, this is a link, too&#x27;</span>]\n</code></pre>\n<h3 id=\"find\">find()</h3>\n<p>findæ–¹æ³•å’Œfind_allç±»ä¼¼ï¼Œåªæ˜¯è¿”å›çš„æ˜¯ç¬¬ä¸€ä¸ªåŒ¹é…çš„å…ƒç´ </p>\n<h3 id=\"othres-api\">othres API</h3>\n<ul>\n<li><p>find_parents() find_parent()\nfind_parents() è¿”å›æ‰€æœ‰ç¥–å…ˆèŠ‚ç‚¹ï¼Œfind_parent() è¿”å›ç›´æ¥çˆ¶èŠ‚ç‚¹ã€‚</p>\n</li>\n<li><p>find_next_siblings() find_next_sibling()\nfind_next_siblings() è¿”å›åé¢æ‰€æœ‰å…„å¼ŸèŠ‚ç‚¹ï¼Œfind_next_sibling() è¿”å›åé¢ç¬¬ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹ã€‚</p>\n</li>\n<li><p>find_previous_siblings() find_previous_sibling()\nfind_previous_siblings() è¿”å›å‰é¢æ‰€æœ‰å…„å¼ŸèŠ‚ç‚¹ï¼Œfind_previous_sibling() è¿”å›å‰é¢ç¬¬ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹ã€‚</p>\n</li>\n<li><p>find_all_next() find_next()\nfind_all_next() è¿”å›èŠ‚ç‚¹åæ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹, find_next() è¿”å›ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹ã€‚</p>\n</li>\n<li><p>find_all_previous() å’Œ find_previous()\nfind_all_previous() è¿”å›èŠ‚ç‚¹åæ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹, find_previous() è¿”å›ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹</p>\n</li>\n</ul>\n<h2 id=\"cssé€‰æ‹©å™¨\">CSSé€‰æ‹©å™¨</h2>\n<p>BeautifulSoup è¿˜æä¾›äº†å¦å¤–ä¸€ç§é€‰æ‹©å™¨ï¼Œé‚£å°±æ˜¯ CSS é€‰æ‹©å™¨ã€‚ä½¿ç”¨ CSS é€‰æ‹©å™¨ï¼Œåªéœ€è¦è°ƒç”¨ select() æ–¹æ³•ï¼Œä¼ å…¥ç›¸åº”çš„ CSS é€‰æ‹©å™¨å³å¯ã€‚</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">from</span> bs4 <span class=\"hljs-keyword\">import</span> BeautifulSoup\nhtml=<span class=\"hljs-string\">&#x27;&#x27;&#x27;\n&lt;div class=&quot;panel&quot;&gt;\n    &lt;div class=&quot;panel-heading&quot;&gt;\n        &lt;h4&gt;Hello&lt;/h4&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;panel-body&quot;&gt;\n        &lt;ul class=&quot;list&quot; id=&quot;list-1&quot;&gt;\n            &lt;li class=&quot;element&quot;&gt;Foo&lt;/li&gt;\n            &lt;li class=&quot;element&quot;&gt;Bar&lt;/li&gt;\n            &lt;li class=&quot;element&quot;&gt;Jay&lt;/li&gt;\n        &lt;/ul&gt;\n        &lt;ul class=&quot;list list-small&quot; id=&quot;list-2&quot;&gt;\n            &lt;li class=&quot;element&quot;&gt;Foo&lt;/li&gt;\n            &lt;li class=&quot;element&quot;&gt;Bar&lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&#x27;&#x27;&#x27;</span>\nsoup = BeautifulSoup(html, <span class=\"hljs-string\">&#x27;lxml&#x27;</span>)\n<span class=\"hljs-built_in\">print</span>(soup.select(<span class=\"hljs-string\">&#x27;.panel .panel-heading&#x27;</span>))\n<span class=\"hljs-built_in\">print</span>(soup.select(<span class=\"hljs-string\">&#x27;ul li&#x27;</span>))\n<span class=\"hljs-built_in\">print</span>(soup.select(<span class=\"hljs-string\">&#x27;#list-2 .element&#x27;</span>))\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-built_in\">type</span>(soup.select(<span class=\"hljs-string\">&#x27;ul&#x27;</span>)[<span class=\"hljs-number\">0</span>]))\n\n\n<span class=\"hljs-comment\"># è¾“å‡º</span>\n[&lt;div <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;panel-heading&quot;</span>&gt;\n&lt;h4&gt;Hello&lt;/h4&gt;\n&lt;/div&gt;]\n[&lt;li <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;element&quot;</span>&gt;Foo&lt;/li&gt;, &lt;li <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;element&quot;</span>&gt;Bar&lt;/li&gt;, &lt;li <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;element&quot;</span>&gt;Jay&lt;/li&gt;, &lt;li <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;element&quot;</span>&gt;Foo&lt;/li&gt;, &lt;li <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;element&quot;</span>&gt;Bar&lt;/li&gt;]\n[&lt;li <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;element&quot;</span>&gt;Foo&lt;/li&gt;, &lt;li <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;element&quot;</span>&gt;Bar&lt;/li&gt;]\n&lt;<span class=\"hljs-keyword\">class</span> <span class=\"hljs-string\">&#x27;bs4.element.Tag&#x27;</span>&gt;\n</code></pre>\n<h3 id=\"åµŒå¥—é€‰æ‹©-1\">åµŒå¥—é€‰æ‹©</h3>\n<p>select() æ–¹æ³•åŒæ ·æ”¯æŒåµŒå¥—é€‰æ‹©ï¼Œä¾‹å¦‚æˆ‘ä»¬å…ˆé€‰æ‹©æ‰€æœ‰ ul èŠ‚ç‚¹ï¼Œå†éå†æ¯ä¸ª ul èŠ‚ç‚¹é€‰æ‹©å…¶ li èŠ‚ç‚¹ã€‚</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">for</span> ul <span class=\"hljs-keyword\">in</span> soup.select(<span class=\"hljs-string\">&#x27;ul&#x27;</span>):\n    <span class=\"hljs-built_in\">print</span>(ul.select(<span class=\"hljs-string\">&#x27;li&#x27;</span>))\n\n<span class=\"hljs-comment\"># è¾“å‡º</span>\n[&lt;li <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;element&quot;</span>&gt;Foo&lt;/li&gt;, &lt;li <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;element&quot;</span>&gt;Bar&lt;/li&gt;, &lt;li <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;element&quot;</span>&gt;Jay&lt;/li&gt;]\n[&lt;li <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;element&quot;</span>&gt;Foo&lt;/li&gt;, &lt;li <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;element&quot;</span>&gt;Bar&lt;/li&gt;]\n</code></pre>\n<h3 id=\"è·å–å±æ€§-1\">è·å–å±æ€§</h3>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">for</span> ul <span class=\"hljs-keyword\">in</span> soup.select(<span class=\"hljs-string\">&#x27;ul&#x27;</span>):\n    <span class=\"hljs-built_in\">print</span>(ul[<span class=\"hljs-string\">&#x27;id&#x27;</span>])\n    <span class=\"hljs-built_in\">print</span>(ul.attrs[<span class=\"hljs-string\">&#x27;id&#x27;</span>])\n\n<span class=\"hljs-comment\"># è¾“å‡º</span>\n<span class=\"hljs-built_in\">list</span>-<span class=\"hljs-number\">1</span>\n<span class=\"hljs-built_in\">list</span>-<span class=\"hljs-number\">1</span>\n<span class=\"hljs-built_in\">list</span>-<span class=\"hljs-number\">2</span>\n<span class=\"hljs-built_in\">list</span>-<span class=\"hljs-number\">2</span>\n</code></pre>\n<h3 id=\"è·å–æ–‡æœ¬\">è·å–æ–‡æœ¬</h3>\n<p>è·å–æ–‡æœ¬å¯ä»¥ç”¨å‰é¢æ‰€è®²çš„ string å±æ€§ï¼Œè¿˜æœ‰ä¸€ä¸ªæ–¹æ³•é‚£å°±æ˜¯ get_text()ã€‚</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">for</span> li <span class=\"hljs-keyword\">in</span> soup.select(<span class=\"hljs-string\">&#x27;li&#x27;</span>):\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&#x27;Get Text:&#x27;</span>, li.get_text())\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&#x27;String:&#x27;</span>, li.string)\n\n<span class=\"hljs-comment\"># è¾“å‡º</span>\nGet Text: Foo\nString: Foo\nGet Text: Bar\nString: Bar\nGet Text: Jay\nString: Jay\nGet Text: Foo\nString: Foo\nGet Text: Bar\nString: Bar\n</code></pre>\n"},{"title":"å‰ç«¯æ¶æ„&è½¯å®åŠ›-ç§»åŠ¨ç«¯é€‚é…","tags":["ç§»åŠ¨ç«¯é€‚é…"],"categories":"å‰ç«¯æ¶æ„&è½¯å®åŠ›","description":"# ç§»åŠ¨ç«¯é€‚é…å…·ä½“å«ä¹‰\n\nä¸ºäº†åœ¨ç§»åŠ¨ç«¯è®©é¡µé¢è·å¾—æ›´å¥½çš„æ˜¾ç¤ºæ•ˆæœï¼Œæˆ‘ä»¬å¿…é¡»è®©**å¸ƒå±€è§†å£ã€è§†è§‰è§†å£éƒ½å°½å¯èƒ½ç­‰äºç†æƒ³è§†å£**ï¼Œä½†è¿™å¹¶ä¸èƒ½ä¿è¯å®ƒä»¬æ˜¾ç¤ºå®Œå…¨ä¸€è‡´ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ¡ˆï¼ˆrem + vwé€‚é…ï¼‰æ¥è®©è®¾è®¡ç¨¿å¾—åˆ°æ›´å®Œç¾çš„é€‚é…ã€‚\n\n# ä¸‰ä¸ªè§†å£\n\n1. å¸ƒå±€è§†å£\n\n   ![å¸ƒå±€è§†å£](https://user-gold-cdn.xitu.io/2019/5/17/16ac3a666e96ff01?","createDate":"2020-04-21 22:33:00","updateDate":"2021-02-20 17:16:39","body":"<h1 id=\"ç§»åŠ¨ç«¯é€‚é…å…·ä½“å«ä¹‰\">ç§»åŠ¨ç«¯é€‚é…å…·ä½“å«ä¹‰</h1>\n<p>ä¸ºäº†åœ¨ç§»åŠ¨ç«¯è®©é¡µé¢è·å¾—æ›´å¥½çš„æ˜¾ç¤ºæ•ˆæœï¼Œæˆ‘ä»¬å¿…é¡»è®©<strong>å¸ƒå±€è§†å£ã€è§†è§‰è§†å£éƒ½å°½å¯èƒ½ç­‰äºç†æƒ³è§†å£</strong>ï¼Œä½†è¿™å¹¶ä¸èƒ½ä¿è¯å®ƒä»¬æ˜¾ç¤ºå®Œå…¨ä¸€è‡´ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ¡ˆï¼ˆrem + vwé€‚é…ï¼‰æ¥è®©è®¾è®¡ç¨¿å¾—åˆ°æ›´å®Œç¾çš„é€‚é…ã€‚</p>\n<h1 id=\"ä¸‰ä¸ªè§†å£\">ä¸‰ä¸ªè§†å£</h1>\n<ol>\n<li><p>å¸ƒå±€è§†å£</p>\n<p><img src=\"https://user-gold-cdn.xitu.io/2019/5/17/16ac3a666e96ff01?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"å¸ƒå±€è§†å£\">\nå¸ƒå±€è§†å£(<code>layout viewport</code>)ï¼šå½“æˆ‘ä»¬ä»¥ç™¾åˆ†æ¯”æ¥æŒ‡å®šä¸€ä¸ªå…ƒç´ çš„å¤§å°æ—¶ï¼Œå®ƒçš„è®¡ç®—å€¼æ˜¯ç”±è¿™ä¸ªå…ƒç´ çš„åŒ…å«å—è®¡ç®—è€Œæ¥çš„ã€‚å½“è¿™ä¸ªå…ƒç´ æ˜¯æœ€é¡¶çº§çš„å…ƒç´ æ—¶ï¼Œå®ƒå°±æ˜¯åŸºäºå¸ƒå±€è§†å£æ¥è®¡ç®—çš„ã€‚</p>\n<p>æ‰€ä»¥ï¼Œå¸ƒå±€è§†å£æ˜¯ç½‘é¡µå¸ƒå±€çš„åŸºå‡†çª—å£ï¼Œåœ¨<code>PC</code>æµè§ˆå™¨ä¸Šï¼Œå¸ƒå±€è§†å£å°±ç­‰äºå½“å‰æµè§ˆå™¨çš„çª—å£å¤§å°ï¼ˆä¸åŒ…æ‹¬<code>borders</code> ã€<code>margins</code>ã€æ»šåŠ¨æ¡ï¼‰ã€‚</p>\n<p>åœ¨ç§»åŠ¨ç«¯ï¼Œå¸ƒå±€è§†å£è¢«èµ‹äºˆä¸€ä¸ªé»˜è®¤å€¼ï¼Œå¤§éƒ¨åˆ†ä¸º<code>980px</code>ï¼Œè¿™ä¿è¯<code>PC</code>çš„ç½‘é¡µå¯ä»¥åœ¨æ‰‹æœºæµè§ˆå™¨ä¸Šå‘ˆç°ï¼Œä½†æ˜¯éå¸¸å°ï¼Œç”¨æˆ·å¯ä»¥æ‰‹åŠ¨å¯¹ç½‘é¡µè¿›è¡Œæ”¾å¤§ã€‚</p>\n<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨<code>document.documentElement.clientWidth / clientHeight</code>æ¥è·å–å¸ƒå±€è§†å£å¤§å°ã€‚</p>\n</li>\n<li><p>è§†è§‰è§†å£</p>\n<p><img src=\"https://user-gold-cdn.xitu.io/2019/5/17/16ac3a66924ef751?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"è§†è§‰è§†å£\">\nè§†è§‰è§†å£(<code>visual viewport</code>)ï¼šç”¨æˆ·é€šè¿‡å±å¹•çœŸå®çœ‹åˆ°çš„åŒºåŸŸã€‚</p>\n<p>è§†è§‰è§†å£é»˜è®¤ç­‰äºå½“å‰æµè§ˆå™¨çš„çª—å£å¤§å°ï¼ˆåŒ…æ‹¬æ»šåŠ¨æ¡å®½åº¦ï¼‰ã€‚</p>\n<p>å½“ç”¨æˆ·å¯¹æµè§ˆå™¨è¿›è¡Œç¼©æ”¾æ—¶ï¼Œä¸ä¼šæ”¹å˜å¸ƒå±€è§†å£çš„å¤§å°ï¼Œæ‰€ä»¥é¡µé¢å¸ƒå±€æ˜¯ä¸å˜çš„ï¼Œä½†æ˜¯<strong>ç¼©æ”¾ä¼šæ”¹å˜è§†è§‰è§†å£</strong>çš„å¤§å°ã€‚</p>\n<p>ä¾‹å¦‚ï¼šç”¨æˆ·å°†æµè§ˆå™¨çª—å£æ”¾å¤§äº†<code>200%</code>ï¼Œè¿™æ—¶æµè§ˆå™¨çª—å£ä¸­çš„<code>CSSåƒç´ </code>ä¼šéšç€è§†è§‰è§†å£çš„æ”¾å¤§è€Œæ”¾å¤§ï¼Œè¿™æ—¶ä¸€ä¸ª<code>CSS</code>åƒç´ ä¼šè·¨è¶Šæ›´å¤šçš„ç‰©ç†åƒç´ ã€‚</p>\n<p>æ‰€ä»¥ï¼Œå¸ƒå±€è§†å£ä¼šé™åˆ¶ä½ çš„<code>CSS</code>å¸ƒå±€ï¼Œè€Œè§†è§‰è§†å£å†³å®šç”¨æˆ·å…·ä½“èƒ½çœ‹åˆ°ä»€ä¹ˆã€‚</p>\n<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨<code>window.innerWidth / innerHeight</code>æ¥è·å–è§†è§‰è§†å£å¤§å°ã€‚</p>\n</li>\n<li><p>ç†æƒ³è§†å£</p>\n<p>å¸ƒå±€è§†å£åœ¨ç§»åŠ¨ç«¯å±•ç¤ºçš„æ•ˆæœå¹¶ä¸æ˜¯ä¸€ä¸ªç†æƒ³çš„æ•ˆæœï¼Œæ‰€ä»¥ç†æƒ³è§†å£(<code>ideal viewport</code>)å°±è¯ç”Ÿäº†ï¼šç½‘ç«™é¡µé¢åœ¨ç§»åŠ¨ç«¯å±•ç¤ºçš„ç†æƒ³å¤§å° === è®¾å¤‡ç‹¬ç«‹åƒç´ </p>\n<p>å½“é¡µé¢ç¼©æ”¾æ¯”ä¾‹ä¸º<code>100%</code>æ—¶ï¼Œ<code>CSSåƒç´  = è®¾å¤‡ç‹¬ç«‹åƒç´ </code>ï¼Œ<code>ç†æƒ³è§†å£ = è§†è§‰è§†å£</code>ã€‚</p>\n<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨<code>screen.width / height</code>æ¥è·å–ç†æƒ³è§†å£å¤§å°ã€‚</p>\n</li>\n</ol>\n<h1 id=\"meta-viewport\">Meta viewport</h1>\n<meta> å…ƒç´ è¡¨ç¤ºé‚£äº›ä¸èƒ½ç”±å…¶å®ƒHTMLå…ƒç›¸å…³å…ƒç´ ä¹‹ä¸€è¡¨ç¤ºçš„ä»»ä½•å…ƒæ•°æ®ä¿¡æ¯ï¼Œå®ƒå¯ä»¥å‘Šè¯‰æµè§ˆå™¨å¦‚ä½•è§£æé¡µé¢\n\n<p>æˆ‘ä»¬å¯ä»¥å€ŸåŠ©``å…ƒç´ çš„<code>viewport</code>æ¥å¸®åŠ©æˆ‘ä»¬è®¾ç½®è§†å£ã€ç¼©æ”¾ç­‰ï¼Œä»è€Œè®©ç§»åŠ¨ç«¯å¾—åˆ°æ›´å¥½çš„å±•ç¤ºæ•ˆæœã€‚</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span>  <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;viewport&quot;</span>  <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">&quot;width=device-width; initial-scale=1; maximum-scale=1; minimum-scale=1; user-scalable=no;&quot;</span>&gt;</span>\n</code></pre>\n<p><code>device-width</code>å°±ç­‰äºç†æƒ³è§†å£çš„å®½åº¦ï¼Œæ‰€ä»¥è®¾ç½®<code>width=device-width</code>å°±ç›¸å½“äºè®©å¸ƒå±€è§†å£ç­‰äºç†æƒ³è§†å£ã€‚</p>\n<p>ç”±äº<code>initial-scale = ç†æƒ³è§†å£å®½åº¦ / è§†è§‰è§†å£å®½åº¦</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬è®¾ç½®<code>initial-scale=1;</code>å°±ç›¸å½“äºè®©è§†è§‰è§†å£ç­‰äºç†æƒ³è§†å£ã€‚</p>\n<p>è¿™æ—¶ï¼Œ1ä¸ª<code>CSS</code>åƒç´ å°±ç­‰äº1ä¸ªè®¾å¤‡ç‹¬ç«‹åƒç´ ï¼Œè€Œä¸”æˆ‘ä»¬ä¹Ÿæ˜¯åŸºäºç†æƒ³è§†å£æ¥è¿›è¡Œå¸ƒå±€çš„ï¼Œæ‰€ä»¥å‘ˆç°å‡ºæ¥çš„é¡µé¢å¸ƒå±€åœ¨å„ç§è®¾å¤‡ä¸Šéƒ½èƒ½å¤§è‡´ç›¸ä¼¼ã€‚</p>\n<h1 id=\"rem--vwé€‚é…\">rem + vwé€‚é…</h1>\n<ul>\n<li><p>remæ˜¯ç›¸å¯¹äºæ ¹å…ƒç´ çš„å­—ä½“å¤§å°çš„å•ä½ï¼Œä¹Ÿå°±æ˜¯htmlçš„font-sizeå¤§å°ï¼Œæµè§ˆå™¨é»˜è®¤çš„å­—ä½“å¤§å°æ˜¯16pxï¼Œæ‰€ä»¥é»˜è®¤çš„1rem=16pxï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è®¾å¤‡å®½åº¦åŠ¨æ€è®¾ç½®æ ¹å…ƒç´ çš„font-sizeï¼Œä½¿å¾—ä»¥remä¸ºå•ä½çš„å…ƒç´ åœ¨ä¸åŒç»ˆç«¯ä¸Šä»¥ç›¸å¯¹ä¸€è‡´çš„è§†è§‰æ•ˆæœå‘ˆç°ã€‚</p>\n</li>\n<li><p><code>vhã€vw</code>åˆ†åˆ«å¯¹åº”äºè§†è§‰è§†å£å®½åº¦ <code>window.innerHeight</code>å’Œè§†è§‰è§†å£é«˜åº¦ <code>window.innerWidth</code></p>\n<p><code>100vh === window.innerHeight</code>ï¼Œ<code>100vw === window.innerWidth</code></p>\n</li>\n</ul>\n<ol>\n<li><p>è®¾ç½®metaæ ‡ç­¾</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span>  <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;viewport&quot;</span>  <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">&quot;width=device-width; initial-scale=1; maximum-scale=1; minimum-scale=1; user-scalable=no;&quot;</span>&gt;</span>\n</code></pre>\n</li>\n<li><p>è®¾ç½®æ ¹<code>font-size</code>ï¼ˆå¯¹åº”äº750pxè®¾è®¡ç¨¿ï¼‰</p>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-selector-tag\">html</span> {\n    <span class=\"hljs-attribute\">font-size</span>: <span class=\"hljs-number\">13.3333vw</span>\n}\n\n<span class=\"hljs-comment\">/*\n750px = 100vw\n1px = 0.13333vw\n\nå‡å®š1rem = 100px\nåˆ™1rem = 13.333vw\n*/</span>\n</code></pre>\n</li>\n</ol>\n"},{"title":"å‰ç«¯æ¶æ„&è½¯å®åŠ›-é¢„åŠ è½½&æ‡’åŠ è½½","tags":["é¢„åŠ è½½&æ‡’åŠ è½½"],"categories":"å‰ç«¯æ¶æ„&è½¯å®åŠ›","description":"# é¢„åŠ è½½\n\n## å®ç°æ€è·¯\n\n`new`ä¸€ä¸ªæ–°çš„`Imgnode`ï¼Œç»™`Imgnode`çš„`src`èµ‹å€¼ä¸ºçœŸæ­£çš„`src`ï¼›è¯¥`Imgnode`åœ¨åŠ è½½å®Œæ¯•åç›¸åº”çš„å›¾ç‰‡èµ„æºå°±ä¼šåœ¨æœ¬åœ°ç¼“å­˜ã€‚\n\n```js\nfunction  preLoad (...src) {\n\tsrc.forEach(item  => {\n\t\tconst  imgNode = new Image()\n\t\timgNode.sr","createDate":"2020-04-24 21:17:04","updateDate":"2021-02-20 17:16:23","body":"<h1 id=\"é¢„åŠ è½½\">é¢„åŠ è½½</h1>\n<h2 id=\"å®ç°æ€è·¯\">å®ç°æ€è·¯</h2>\n<p><code>new</code>ä¸€ä¸ªæ–°çš„<code>Imgnode</code>ï¼Œç»™<code>Imgnode</code>çš„<code>src</code>èµ‹å€¼ä¸ºçœŸæ­£çš„<code>src</code>ï¼›è¯¥<code>Imgnode</code>åœ¨åŠ è½½å®Œæ¯•åç›¸åº”çš„å›¾ç‰‡èµ„æºå°±ä¼šåœ¨æœ¬åœ°ç¼“å­˜ã€‚</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span>  <span class=\"hljs-title function_\">preLoad</span> (...src) {\n    src.<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">item</span>  =&gt;</span> {\n        <span class=\"hljs-keyword\">const</span>  imgNode = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Image</span>()\n        imgNode.<span class=\"hljs-property\">src</span> = realSrc\n    })\n}\n</code></pre>\n<h1 id=\"æ‡’åŠ è½½\">æ‡’åŠ è½½</h1>\n<h2 id=\"å®ç°æ€è·¯-1\">å®ç°æ€è·¯</h2>\n<p>é¦–å…ˆè®¾ç½®ä¸€ä¸ªä¸´æ—¶å±æ€§ <code>data-src</code>ï¼Œå½“å‰å…ƒç´ æ˜¯å¦å‡ºç°åœ¨è§†å£æ—¶ä½¿ç”¨ <code>src</code> ä»£æ›¿ <code>data-src</code>ã€‚</p>\n<ol>\n<li><p><code>window.onscroll</code> + <code>clientTop</code>ï¼Œ<code>offsetTop</code>ï¼Œ<code>clientHeight</code> <code>scrollTop</code> + èŠ‚æµ ğŸ‘</p>\n<p>ä¸å®¹æ˜“åˆ¤æ–­å…ƒç´ çš„ä½ç½®</p>\n</li>\n<li><p><code>window.onscroll</code> + <code>Element.getBoundingClientRect()</code> + èŠ‚æµğŸ‘</p>\n<p><code>getBoundingClientRect</code>ä¼šè§¦å‘å›æµ</p>\n</li>\n<li><p><code>IntersectionObserver</code>ğŸ‘</p>\n<pre><code class=\"hljs language-js\">&lt;img  style=<span class=\"hljs-string\">&quot;width: 200px;&quot;</span>  id=<span class=\"hljs-string\">&quot;img&quot;</span>  data-src=<span class=\"hljs-string\">&quot;./assets/yoda.jpg&quot;</span>  alt=<span class=\"hljs-string\">&quot;&quot;</span>  srcset=<span class=\"hljs-string\">&quot;&quot;</span>&gt;\n\n<span class=\"hljs-keyword\">const</span>  observer = <span class=\"hljs-keyword\">new</span>  <span class=\"hljs-title class_\">IntersectionObserver</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">changes</span>=&gt;</span> {\n    changes.<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">change</span>  =&gt;</span> {\n        <span class=\"hljs-comment\">// change.isIntersecting åˆ¤æ–­å½“å‰å…ƒç´ æ˜¯å¦å‡ºç°åœ¨è§†å£ä¸­</span>\n        <span class=\"hljs-keyword\">if</span> (change.<span class=\"hljs-property\">isIntersecting</span>) {\n            <span class=\"hljs-keyword\">const</span>  img = change.<span class=\"hljs-property\">target</span>\n            img.<span class=\"hljs-property\">src</span> = img.<span class=\"hljs-property\">dataset</span>.<span class=\"hljs-property\">src</span>\n            <span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">deleteProperty</span>(img.<span class=\"hljs-property\">dataset</span>, <span class=\"hljs-string\">&quot;src&quot;</span>)\n            observer.<span class=\"hljs-title function_\">unobserve</span>(img)\n        }\n    })\n})\nobserver.<span class=\"hljs-title function_\">observe</span>(<span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#img&quot;</span>))\n</code></pre>\n</li>\n<li><p><code>img</code>çš„<code>lazy</code>å±æ€§ ğŸ‘</p>\n<p>å…¼å®¹æ€§å·®ï¼Œ<a href=\"https://www.jianguoyun.com/static/stackedit/%5Bhttps://www.zhangxinxu.com/wordpress/2019/09/native-img-loading-lazy/%5D(https://www.zhangxinxu.com/wordpress/2019/09/native-img-loading-lazy/)\">å…·ä½“å®è·µ</a></p>\n<p><code>&lt;img loading=&quot;lazy&quot; src=&quot;http://blog.p18c.top/imgs/avatar.png&quot; alt=&quot;&quot; srcset=&quot;&quot;&gt;</code></p>\n</li>\n</ol>\n<h1 id=\"é¢„åŠ è½½-vs-æ‡’åŠ è½½\">é¢„åŠ è½½ VS æ‡’åŠ è½½</h1>\n<p>|      | é¢„åŠ è½½                             | æ‡’åŠ è½½                                      |\n| </p>\n"},{"title":"å‰ç«¯æ¶æ„&è½¯å®åŠ›-JSBridgeåŸç†","tags":["JSBridge"],"categories":"å‰ç«¯æ¶æ„&è½¯å®åŠ›","description":"# ä»€ä¹ˆæ˜¯JSBridge\n\nJSBridgeæ˜¯ä¸€ç§JavaScriptå®ç°çš„Bridgeï¼Œè¿æ¥ç€æ¡¥ä¸¤ç«¯çš„nativeå’ŒH5ã€‚å®ƒåœ¨APPé‡Œæ–¹ä¾¿åœ°è®©nativeè°ƒç”¨JavaScriptï¼ŒJavaScriptè°ƒç”¨nativeï¼Œæ˜¯åŒå‘é€šä¿¡çš„é€šé“ã€‚\n\n# JSBridgeåŒå‘é€šä¿¡åŸç†\n\n## JavaScriptè°ƒç”¨native\n\nJavaScriptè°ƒç”¨nativeçš„å®ç°æ–¹å¼è¾ƒå¤šï¼Œä¸»è¦æœ‰ï¼š\n\n- æ‹¦","createDate":"2020-04-25 23:01:48","updateDate":"2021-02-20 17:16:05","body":"<h1 id=\"ä»€ä¹ˆæ˜¯jsbridge\">ä»€ä¹ˆæ˜¯JSBridge</h1>\n<p>JSBridgeæ˜¯ä¸€ç§JavaScriptå®ç°çš„Bridgeï¼Œè¿æ¥ç€æ¡¥ä¸¤ç«¯çš„nativeå’ŒH5ã€‚å®ƒåœ¨APPé‡Œæ–¹ä¾¿åœ°è®©nativeè°ƒç”¨JavaScriptï¼ŒJavaScriptè°ƒç”¨nativeï¼Œæ˜¯åŒå‘é€šä¿¡çš„é€šé“ã€‚</p>\n<h1 id=\"jsbridgeåŒå‘é€šä¿¡åŸç†\">JSBridgeåŒå‘é€šä¿¡åŸç†</h1>\n<h2 id=\"javascriptè°ƒç”¨native\">JavaScriptè°ƒç”¨native</h2>\n<p>JavaScriptè°ƒç”¨nativeçš„å®ç°æ–¹å¼è¾ƒå¤šï¼Œä¸»è¦æœ‰ï¼š</p>\n<ul>\n<li>æ‹¦æˆª<code>URL Scheme</code></li>\n<li>é‡å†™<code>prompt</code></li>\n<li>æ³¨å…¥API</li>\n</ul>\n<h3 id=\"æ‹¦æˆªurl-scheme\">æ‹¦æˆª<code>URL Scheme</code></h3>\n<p>Androidå’ŒiOSéƒ½å¯ä»¥é€šè¿‡æ‹¦æˆª<code>URL Scheme</code>å¹¶è§£æ<code>Scheme</code>æ¥å†³å®šæ˜¯å¦è¿›è¡Œå¯¹åº”çš„nativeä»£ç é€»è¾‘å¤„ç†ã€‚</p>\n<p>Android çš„è¯ï¼Œ<code>Webview</code> æä¾›äº† <code>shouldOverrideUrlLoading</code> æ–¹æ³•æ¥æä¾›ç»™ Native æ‹¦æˆª H5 å‘é€çš„ <code>URL Scheme</code> è¯·æ±‚ã€‚</p>\n<p>iOS çš„ <code>WKWebview</code> å¯ä»¥æ ¹æ®æ‹¦æˆªåˆ°çš„ <code>URL Scheme</code> å’Œå¯¹åº”çš„å‚æ•°æ‰§è¡Œç›¸å…³çš„æ“ä½œã€‚</p>\n<p>è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯ä¸å­˜åœ¨æ¼æ´é—®é¢˜ã€ä½¿ç”¨çµæ´»ï¼Œå¯ä»¥å®ç° H5 å’Œ Native é¡µé¢çš„æ— ç¼åˆ‡æ¢ã€‚ä¾‹å¦‚åœ¨æŸä¸€é¡µé¢éœ€è¦å¿«é€Ÿä¸Šçº¿çš„æƒ…å†µä¸‹ï¼Œå…ˆå¼€å‘å‡º H5 é¡µé¢ã€‚æŸä¸€é“¾æ¥å¡«å†™çš„æ˜¯ H5 é“¾æ¥ï¼Œåœ¨å¯¹åº”çš„ Native é¡µé¢å¼€å‘å®Œæˆå‰å…ˆè·³è½¬è‡³ H5 é¡µé¢ï¼Œå¾… Native é¡µé¢å¼€å‘å®Œåå†è¿›è¡Œæ‹¦æˆªï¼Œè·³è½¬è‡³ Native é¡µé¢ï¼Œæ­¤æ—¶ H5 çš„é“¾æ¥æ— éœ€è¿›è¡Œä¿®æ”¹ã€‚ä½†æ˜¯ä½¿ç”¨ iframe.src æ¥å‘é€ <code>URL Scheme</code> éœ€è¦å¯¹ URL çš„é•¿åº¦ä½œæ§åˆ¶ï¼Œä½¿ç”¨å¤æ‚ï¼Œé€Ÿåº¦è¾ƒæ…¢ã€‚</p>\n<h3 id=\"é‡å†™-prompt-ç­‰åŸç”Ÿ-js-æ–¹æ³•\">é‡å†™ prompt ç­‰åŸç”Ÿ JS æ–¹æ³•</h3>\n<p>Android 4.2 ä¹‹å‰æ³¨å…¥å¯¹è±¡çš„æ¥å£æ˜¯ <code>addJavascriptInterface</code> ï¼Œä½†æ˜¯ç”±äºå®‰å…¨åŸå› æ…¢æ…¢ä¸è¢«ä½¿ç”¨ã€‚ä¸€èˆ¬ä¼šé€šè¿‡ä¿®æ”¹æµè§ˆå™¨çš„éƒ¨åˆ† <code>Window</code> å¯¹è±¡çš„æ–¹æ³•æ¥å®Œæˆæ“ä½œã€‚ä¸»è¦æ˜¯æ‹¦æˆª <code>alert</code>ã€<code>confirm</code>ã€<code>prompt</code>ã€<code>console.log</code> å››ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«è¢« <code>Webview</code> çš„ <code>onJsAlert</code>ã€<code>onJsConfirm</code>ã€<code>onConsoleMessage</code>ã€<code>onJsPrompt</code> ç›‘å¬ã€‚</p>\n<p>iOS ç”±äºå®‰å…¨æœºåˆ¶ï¼Œ<code>WKWebView</code> å¯¹ <code>alert</code>ã€<code>confirm</code>ã€<code>prompt</code> ç­‰æ–¹æ³•åšäº†æ‹¦æˆªï¼Œå¦‚æœé€šè¿‡æ­¤æ–¹å¼è¿›è¡Œ Native ä¸ JS äº¤äº’ï¼Œéœ€è¦å®ç° <code>WKWebView</code> çš„ä¸‰ä¸ª <code>WKUIDelegate</code> ä»£ç†æ–¹æ³•ã€‚</p>\n<p>ä½¿ç”¨è¯¥æ–¹å¼æ—¶ï¼Œå¯ä»¥ä¸ Android å’Œ iOS çº¦å®šå¥½ä½¿ç”¨ä¼ å‚çš„æ ¼å¼ï¼Œè¿™æ · H5 å¯ä»¥æ— éœ€è¯†åˆ«å®¢æˆ·ç«¯ï¼Œä¼ å…¥ä¸åŒå‚æ•°ç›´æ¥è°ƒç”¨ Native å³å¯ã€‚å‰©ä¸‹çš„äº¤ç»™å®¢æˆ·ç«¯è‡ªå·±å»æ‹¦æˆªç›¸åŒçš„æ–¹æ³•ï¼Œè¯†åˆ«ç›¸åŒçš„å‚æ•°ï¼Œè¿›è¡Œè‡ªå·±çš„å¤„ç†é€»è¾‘å³å¯å®ç°å¤šç«¯è¡¨ç°ä¸€è‡´ã€‚å¦å¤–ï¼Œå¦‚æœèƒ½ä¸ Native ç¡®å®šå¥½æ–¹æ³•åã€ä¼ å‚ç­‰è°ƒç”¨çš„åè®®è§„èŒƒï¼Œè¿™æ ·å…¶å®ƒæ ¼å¼çš„ <code>prompt</code> ç­‰æ–¹æ³•æ˜¯ä¸ä¼šè¢«è¯†åˆ«çš„ï¼Œèƒ½èµ·åˆ°éš”ç¦»çš„ä½œç”¨ã€‚</p>\n<h3 id=\"æ³¨å…¥api\">æ³¨å…¥API</h3>\n<p>åŸºäº <code>Webview</code> æä¾›çš„èƒ½åŠ›ï¼Œå¯ä»¥å‘ <code>Window</code> ä¸Šæ³¨å…¥å¯¹è±¡æˆ–æ–¹æ³•ã€‚JavaScript é€šè¿‡è¿™ä¸ªå¯¹è±¡æˆ–æ–¹æ³•è¿›è¡Œè°ƒç”¨æ—¶ï¼Œæ‰§è¡Œå¯¹åº”çš„é€»è¾‘æ“ä½œï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨ Native çš„æ–¹æ³•ã€‚ä½¿ç”¨è¯¥æ–¹å¼æ—¶ï¼ŒJavaScript éœ€è¦ç­‰åˆ° Native æ‰§è¡Œå®Œå¯¹åº”çš„é€»è¾‘åæ‰èƒ½è¿›è¡Œå›è°ƒé‡Œé¢çš„æ“ä½œã€‚</p>\n<p>Android çš„ <code>Webview</code> æä¾›äº† <code>addJavascriptInterface</code> æ–¹æ³•ï¼Œæ”¯æŒ Android 4.2 åŠä»¥ä¸Šç³»ç»Ÿã€‚</p>\n<p>iOS çš„ <code>UIWebview</code> æä¾›äº† <code>JavaScriptScore</code> æ–¹æ³•ï¼Œæ”¯æŒ iOS 7.0 åŠä»¥ä¸Šç³»ç»Ÿã€‚<code>WKWebview</code> æä¾›äº† <code>window.webkit.messageHandlers</code> æ–¹æ³•ï¼Œæ”¯æŒ iOS 8.0 åŠä»¥ä¸Šç³»ç»Ÿã€‚<code>UIWebview</code> åœ¨å‡ å¹´å‰å¸¸ç”¨ï¼Œç›®å‰å·²ä¸å¸¸è§ã€‚</p>\n<h2 id=\"nativeè°ƒç”¨javascript\">nativeè°ƒç”¨JavaScript</h2>\n<p>nativeè°ƒç”¨JavaScriptåªéœ€H5å°†JavaScriptæ–¹æ³•æš´éœ²åœ¨<code>window</code>ä¸Šç»™nativeè°ƒç”¨å³å¯</p>\n<p>Androidä¸­ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼å®ç°ã€‚åœ¨4.4ä¹‹å‰ï¼Œé€šè¿‡loadUrlæ–¹æ³•ï¼Œæ‰§è¡Œä¸€æ®µJavaScriptä»£ç æ¥å®ç°ã€‚åœ¨4.4ä¹‹åï¼Œå¯ä»¥ä½¿ç”¨<code>evaluateJavascript</code>æ–¹æ³•å®ç°ã€‚loadUrlæ–¹æ³•ä½¿ç”¨èµ·æ¥æ–¹ä¾¿ç®€æ´ï¼Œä½†æ˜¯æ•ˆç‡ä½æ— æ³•è·å¾—è¿”å›ç»“æœä¸”è°ƒç”¨çš„æ—¶å€™ä¼šåˆ·æ–°webviewã€‚evaluateJavascriptæ–¹æ³•æ•ˆç‡é«˜ä¸”è·å–è¿”å›å€¼æ–¹ä¾¿ï¼Œè°ƒç”¨æ—¶ä¸åˆ·æ–°<code>webview</code>ï¼Œæ”¯æŒ4.4+</p>\n<p>iOSåœ¨<code>WKWebview</code>ä¸­å¯ä»¥é€šè¿‡<code>evaluateJavascript:javascriptString</code>æ¥å®ç°ï¼Œæ”¯æŒ8.0+</p>\n"},{"title":"å‰ç«¯æ¶æ„&è½¯å®åŠ›-æ€§èƒ½ä¼˜åŒ–","tags":["æ€§èƒ½ä¼˜åŒ–"],"categories":"å‰ç«¯æ¶æ„&è½¯å®åŠ›","description":"# ä»é—®é¢˜å‡ºå‘\n\nä»è¾“å…¥URLåˆ°é¡µé¢åŠ è½½å®Œæˆï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ\n\n1. DNSè§£æ\n2. TCPè¿æ¥\n3. å‘é€HTTPè¯·æ±‚\n4. æœåŠ¡ç«¯å¤„ç†è¯·æ±‚ï¼Œè¿”å›HTTPå“åº”\n5. æµè§ˆå™¨æ‹¿åˆ°æ•°æ®ï¼Œè§£æå“åº”å†…å®¹ï¼ŒæŠŠè§£æçš„ç»“æœå±•ç¤ºç»™ç”¨æˆ·\n\nå‰ç«¯å¯ä»¥åšçš„ï¼š\n\n1. å‘é€HTTPè¯·æ±‚é˜¶æ®µ\n2. æ¸²æŸ“æœåŠ¡ç«¯å“åº”é˜¶æ®µ\n\n# ç½‘ç»œå±‚é¢-ä¼˜åŒ–HTTPè¯·æ±‚\n\n## å‡å°‘è¯·æ±‚æ¬¡æ•°\n\n- ç²¾çµå›¾\n- æ‡’åŠ è½½\n\n## å‡å°‘å•æ¬¡è¯·","createDate":"2020-04-28 21:21:05","updateDate":"2021-02-20 17:15:50","body":"<h1 id=\"ä»é—®é¢˜å‡ºå‘\">ä»é—®é¢˜å‡ºå‘</h1>\n<p>ä»è¾“å…¥URLåˆ°é¡µé¢åŠ è½½å®Œæˆï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p>\n<ol>\n<li>DNSè§£æ</li>\n<li>TCPè¿æ¥</li>\n<li>å‘é€HTTPè¯·æ±‚</li>\n<li>æœåŠ¡ç«¯å¤„ç†è¯·æ±‚ï¼Œè¿”å›HTTPå“åº”</li>\n<li>æµè§ˆå™¨æ‹¿åˆ°æ•°æ®ï¼Œè§£æå“åº”å†…å®¹ï¼ŒæŠŠè§£æçš„ç»“æœå±•ç¤ºç»™ç”¨æˆ·</li>\n</ol>\n<p>å‰ç«¯å¯ä»¥åšçš„ï¼š</p>\n<ol>\n<li>å‘é€HTTPè¯·æ±‚é˜¶æ®µ</li>\n<li>æ¸²æŸ“æœåŠ¡ç«¯å“åº”é˜¶æ®µ</li>\n</ol>\n<h1 id=\"ç½‘ç»œå±‚é¢-ä¼˜åŒ–httpè¯·æ±‚\">ç½‘ç»œå±‚é¢-ä¼˜åŒ–HTTPè¯·æ±‚</h1>\n<h2 id=\"å‡å°‘è¯·æ±‚æ¬¡æ•°\">å‡å°‘è¯·æ±‚æ¬¡æ•°</h2>\n<ul>\n<li>ç²¾çµå›¾</li>\n<li>æ‡’åŠ è½½</li>\n</ul>\n<h2 id=\"å‡å°‘å•æ¬¡è¯·æ±‚æ‰€èŠ±è´¹çš„æ—¶é—´\">å‡å°‘å•æ¬¡è¯·æ±‚æ‰€èŠ±è´¹çš„æ—¶é—´</h2>\n<ul>\n<li>æŒ‰éœ€åŠ è½½</li>\n<li>gzipå‹ç¼©</li>\n</ul>\n<h2 id=\"é€‰ç”¨æ­£ç¡®çš„å›¾ç‰‡æ ¼å¼\">é€‰ç”¨æ­£ç¡®çš„å›¾ç‰‡æ ¼å¼</h2>\n<ul>\n<li><p>JPEGï¼Œæœ‰æŸå‹ç¼©ã€ä½“ç§¯å°ã€åŠ è½½å¿«ã€ä¸æ”¯æŒé€æ˜</p>\n<p>é€‚ç”¨äºå‘ˆç°è‰²å½©ä¸°å¯Œçš„å›¾ç‰‡ï¼ŒJPGé€šå¸¸ä½œä¸ºå¤§çš„èƒŒæ™¯å›¾ã€è½®æ’­å›¾æˆ–bannerå›¾</p>\n</li>\n<li><p>PNGï¼Œæ— æŸå‹ç¼©ã€è´¨é‡é«˜ã€ä½“ç§¯å¤§ã€æ”¯æŒé€æ˜</p>\n<p>å°çš„logoã€é¢œè‰²ç®€å•ä¸”å¯¹æ¯”å¼ºçƒˆçš„å›¾ç‰‡</p>\n</li>\n<li><p>SVGï¼Œæ–‡æœ¬æ–‡ä»¶ã€ä½“ç§¯å°ã€ä¸å¤±çœŸã€å…¼å®¹æ€§å¥½</p>\n<p>å›¾æ ‡</p>\n</li>\n<li><p>webPï¼Œå…¨èƒ½å‹é€‰æ‰‹ï¼Œå…¼å®¹æ€§å·®</p>\n</li>\n</ul>\n<h2 id=\"åˆç†ä½¿ç”¨ç¼“å­˜\"><a href=\"http://blog.p18c.top/2019/06/30/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9B%B8%E5%85%B3-%E7%BC%93%E5%AD%98/\">åˆç†ä½¿ç”¨ç¼“å­˜</a></h2>\n<p>é€šè¿‡ç½‘ç»œè·å–å†…å®¹æ—¢é€Ÿåº¦ç¼“æ…¢åˆå¼€é”€å·¨å¤§ã€‚è¾ƒå¤§çš„å“åº”éœ€è¦åœ¨å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œå¤šæ¬¡å¾€è¿”é€šä¿¡ï¼Œè¿™ä¼šå»¶è¿Ÿæµè§ˆå™¨è·å¾—å’Œå¤„ç†å†…å®¹çš„æ—¶é—´ï¼Œè¿˜ä¼šå¢åŠ è®¿é—®è€…çš„æµé‡è´¹ç”¨ã€‚å› æ­¤ï¼Œç¼“å­˜å¹¶é‡å¤åˆ©ç”¨ä¹‹å‰è·å–çš„èµ„æºçš„èƒ½åŠ›æˆä¸ºæ€§èƒ½ä¼˜åŒ–çš„ä¸€ä¸ªå…³é”®æ–¹é¢ã€‚</p>\n<h1 id=\"æ¸²æŸ“é˜¶æ®µ\">æ¸²æŸ“é˜¶æ®µ</h1>\n<h2 id=\"æ³¨æ„scriptæ ‡ç­¾æ”¾ç½®çš„ä½ç½®\">æ³¨æ„<code>script</code>æ ‡ç­¾æ”¾ç½®çš„ä½ç½®</h2>\n<h2 id=\"ä½¿ç”¨linkçš„relå±æ€§\">ä½¿ç”¨<code>link</code>çš„<code>rel</code>å±æ€§</h2>\n<ul>\n<li><p><code>preload</code></p>\n<p>å‘Šè¯‰æµè§ˆå™¨ä¸‹è½½èµ„æºï¼Œå› ä¸ºåœ¨å½“å‰å¯¼èˆªæœŸé—´ç¨åå°†éœ€è¦è¯¥èµ„æºã€‚</p>\n</li>\n<li><p><code>prefetch</code></p>\n<p>æç¤ºæµè§ˆå™¨ï¼Œç”¨æˆ·æœªæ¥çš„æµè§ˆæœ‰å¯èƒ½éœ€è¦åŠ è½½ç›®æ ‡èµ„æºï¼Œæ‰€ä»¥æµè§ˆå™¨æœ‰å¯èƒ½é€šè¿‡äº‹å…ˆè·å–å’Œç¼“å­˜å¯¹åº”èµ„æºï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒã€‚</p>\n</li>\n</ul>\n<h2 id=\"æ‰å¹³åŒ–cssé€‰æ‹©å™¨ï¼Œé¿å…åµŒå¥—è¿‡æ·±\">æ‰å¹³åŒ–CSSé€‰æ‹©å™¨ï¼Œé¿å…åµŒå¥—è¿‡æ·±</h2>\n<h2 id=\"å‡å°‘é‡ç»˜ä¸å›æµ\">å‡å°‘é‡ç»˜ä¸å›æµ</h2>\n<ul>\n<li>ä½¿ç”¨<code>transform</code>ä»£æ›¿<code>top</code></li>\n<li>ä½¿ç”¨<code>visiblity</code>ä»£æ›¿<code>display:none</code></li>\n<li>ç›´æ¥æ”¹å˜<code>clsaaName</code>ï¼ˆæŠŠè¦ä¿®æ”¹çš„æ ·å¼é›†ä¸­åˆ°ä¸€ä¸ª<code>class</code>å†…ç»Ÿä¸€ä¿®æ”¹ï¼‰</li>\n<li>é¿å…ä½¿ç”¨tableå¸ƒå±€ï¼ˆå°½é‡ä¸è¦ä½¿ç”¨tableå¸ƒå±€ã€‚å¦‚æœæ²¡æœ‰å®šå®½ï¼Œè¡¨æ ¼ä¸€åˆ—çš„å®½åº¦åˆ™ç”±æœ€å®½çš„ä¸€åˆ—å†³å®šï¼Œé‚£ä¸ªå¾ˆå¯èƒ½åœ¨æœ€åä¸€è¡Œçš„å®½åº¦è¶…å‡ºä¹‹å‰çš„åˆ—å®½ï¼Œå¼•èµ·æ•´ä½“å›æµé€ æˆtableå¯èƒ½éœ€è¦å¤šæ¬¡è®¡ç®—æ‰èƒ½ç¡®å®šå¥½å…¶åœ¨æ¸²æŸ“æ ‘ä¸­èŠ‚ç‚¹çš„å±æ€§ï¼‰</li>\n</ul>\n<h2 id=\"äº‹ä»¶å§”æ‰˜\">äº‹ä»¶å§”æ‰˜</h2>\n<h2 id=\"é¿å…æ“ä½œé¢‘ç¹dom\">é¿å…æ“ä½œé¢‘ç¹DOM</h2>\n<h2 id=\"å¼‚æ­¥æ›´æ–°dom-ï¼ˆåŒ…è£…æˆ-micro-ä»»åŠ¡ï¼‰\">å¼‚æ­¥æ›´æ–°DOM ï¼ˆåŒ…è£…æˆ micro ä»»åŠ¡ï¼‰</h2>\n<p>ç»“æŸ<code>script</code>è„šæœ¬çš„æ‰§è¡Œ ğŸ‘‰ å¤„ç†microé˜Ÿåˆ— ğŸ‘‰ render</p>\n"},{"title":"å‰ç«¯æ¶æ„&è½¯å®åŠ›-React.jså¯¹æ¯”Vue.js","tags":["React.jså¯¹æ¯”Vue.js"],"categories":"å‰ç«¯æ¶æ„&è½¯å®åŠ›","description":"# è®¾è®¡æ€æƒ³\n\n## Vue.js\n\næ¸è¿›å¼æ¡†æ¶ï¼Œé‡‡ç”¨è‡ªåº•å‘ä¸Šå¢é‡å¼€å‘çš„æ¨¡å¼ã€‚\n\næ‰€è°“æ¸è¿›å¼å°±æ˜¯æŠŠæ¡†æ¶åˆ†å±‚ã€‚\n\næœ€æ ¸å¿ƒçš„éƒ¨åˆ†æ˜¯è§†å›¾å±‚æ¸²æŸ“ï¼Œç„¶åå¾€å¤–æ˜¯ç»„ä»¶ç³»ç»Ÿï¼Œåœ¨è¿™ä¸ªåŸºç¡€ä¸Šå†åŠ å…¥è·¯ç”±æœºåˆ¶ï¼Œå†åŠ å…¥çŠ¶æ€ç®¡ç†ï¼Œæœ€å¤–å±‚æ˜¯æ„å»ºå·¥å…·ã€‚\n\n![æ¸è¿›å¼](https://mrrsblog.oss-cn-shanghai.aliyuncs.com/vue-5.png)\n\næ‰€è°“åˆ†å±‚ï¼Œå°±æ˜¯è¯´æ—¢å¯ä»¥åªç”¨æœ€æ ¸å¿ƒçš„è§†å›¾å±‚æ¸²","createDate":"2020-04-28 23:09:43","updateDate":"2021-02-20 17:15:36","body":"<h1 id=\"è®¾è®¡æ€æƒ³\">è®¾è®¡æ€æƒ³</h1>\n<h2 id=\"vuejs\">Vue.js</h2>\n<p>æ¸è¿›å¼æ¡†æ¶ï¼Œé‡‡ç”¨è‡ªåº•å‘ä¸Šå¢é‡å¼€å‘çš„æ¨¡å¼ã€‚</p>\n<p>æ‰€è°“æ¸è¿›å¼å°±æ˜¯æŠŠæ¡†æ¶åˆ†å±‚ã€‚</p>\n<p>æœ€æ ¸å¿ƒçš„éƒ¨åˆ†æ˜¯è§†å›¾å±‚æ¸²æŸ“ï¼Œç„¶åå¾€å¤–æ˜¯ç»„ä»¶ç³»ç»Ÿï¼Œåœ¨è¿™ä¸ªåŸºç¡€ä¸Šå†åŠ å…¥è·¯ç”±æœºåˆ¶ï¼Œå†åŠ å…¥çŠ¶æ€ç®¡ç†ï¼Œæœ€å¤–å±‚æ˜¯æ„å»ºå·¥å…·ã€‚</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/vue-5.png\" alt=\"æ¸è¿›å¼\"></p>\n<p>æ‰€è°“åˆ†å±‚ï¼Œå°±æ˜¯è¯´æ—¢å¯ä»¥åªç”¨æœ€æ ¸å¿ƒçš„è§†å›¾å±‚æ¸²æŸ“åŠŸèƒ½å¿«é€Ÿå¼€å‘ä¸€äº›éœ€æ±‚ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€æ•´å¥—å…¨å®¶æ¡¶æ¥å¼€å‘å¤§å‹åº”ç”¨ã€‚Vue.jsç”±è¶³å¤Ÿçš„çµæ´»æ€§æ¥é€‚åº”ä¸åŒçš„éœ€æ±‚ï¼Œæ‰€ä»¥å¼€å‘è€…å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚é€‰æ‹©ä¸åŒçš„å±‚çº§ã€‚</p>\n<h2 id=\"reactjs\">React.js</h2>\n<p>å£°æ˜å¼ã€ç»„ä»¶åŒ–</p>\n<p>React.jsä½¿åˆ›å»ºäº¤äº’å¼UIå˜å¾—è½»è€Œæ˜“ä¸¾ã€‚ä¸ºåº”ç”¨çš„æ¯ä¸€ä¸ªçŠ¶æ€è®¾è®¡ç®€ä»‹åœ°è¯•å›¾ï¼Œå½“æ•°æ®æ”¹å˜æ—¶React.jså¯ä»¥æœ‰æ•ˆåœ°æ›´æ–°å¹¶æ¸²æŸ“ç»„ä»¶ã€‚æ­¤å¤–ï¼ŒReact.jså¯ä»¥åˆ›å»ºæ‹¥æœ‰å„è‡ªçŠ¶æ€çš„ç»„ä»¶ï¼Œå†ç”±è¿™äº›ç»„ä»¶æ„æˆæ›´åŠ å¤æ‚çš„ UI</p>\n<h1 id=\"ç»„ä»¶é—´æ•°æ®äº¤äº’\">ç»„ä»¶é—´æ•°æ®äº¤äº’</h1>\n<h2 id=\"çˆ¶å­ç»„ä»¶\">çˆ¶å­ç»„ä»¶</h2>\n<h3 id=\"vuejs-1\">Vue.js</h3>\n<p>Vue.jsä¸­çˆ¶ç»„ä»¶é€šè¿‡<code>props</code>ä¼ é€’æ•°æ®ç»™å­ç»„ä»¶ï¼Œå­ç»„ä»¶ä½¿ç”¨<code>$emit</code>è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼Œçˆ¶ç»„ä»¶ä¸­ç›‘å¬å­ç»„ä»¶çš„è‡ªå®šä¹‰äº‹ä»¶è·å–å­ç»„ä»¶ä¼ é€’æ¥çš„æ•°æ®ã€‚</p>\n<h3 id=\"reactjs-1\">React.js</h3>\n<p>React.jsä¸­çˆ¶ç»„ä»¶ä½¿ç”¨<code>props</code>ä¼ é€’æ•°æ®å’Œå›è°ƒå‡½æ•°ç»™å­ç»„ä»¶ï¼Œå­ç»„ä»¶é€šè¿‡<code>props</code>ä¼ ä¸‹æ¥çš„å›è°ƒå‡½æ•°è¿”å›æ•°æ®ï¼Œçˆ¶ç»„ä»¶é€šè¿‡å›è°ƒå‡½æ•°è·å–å­ç»„ä»¶ä¼ é€’ä¸Šæ¥çš„æ•°æ®ã€‚</p>\n<h2 id=\"è·¨çº§ç»„ä»¶\">è·¨çº§ç»„ä»¶</h2>\n<h3 id=\"vuejs-2\">Vue.js</h3>\n<p>Vue.jsä¸­é€šè¿‡<code>provide / inject</code>åœ¨ç¥–å…ˆç»„ä»¶å‘æ‰€æœ‰å­å­™åä»£æ³¨å…¥ä¸€ä¸ªä¾èµ–ï¼Œä¸è®ºç»„ä»¶å±‚æ¬¡æœ‰å¤šæ·±ï¼Œå¹¶åœ¨èµ·ä¸Šä¸‹æ¸¸å…³ç³»æˆç«‹çš„æ—¶é—´é‡Œå§‹ç»ˆç”Ÿæ•ˆã€‚</p>\n<h3 id=\"reactjs-2\">React.js</h3>\n<p>React.jsçš„<code>Context</code> æä¾›äº†ä¸€ä¸ªæ— éœ€ä¸ºæ¯å±‚ç»„ä»¶æ‰‹åŠ¨æ·»åŠ  <code>props</code>å°±èƒ½åœ¨ç»„ä»¶æ ‘é—´è¿›è¡Œæ•°æ®ä¼ é€’çš„æ–¹æ³•ã€‚åœ¨çˆ¶ç»„ä»¶åˆ›å»ºä¸€ä¸ª<code>Context</code>å¯¹è±¡ï¼Œé€šè¿‡<code>Context.provider</code>çš„<code>value</code>å±æ€§å‘æ¶ˆè´¹ç»„ä»¶ä¼ å€¼ã€‚</p>\n<h1 id=\"å“åº”å¼åŸç†\">å“åº”å¼åŸç†</h1>\n<h2 id=\"vuejs-3\">Vue.js</h2>\n<p>Vue.jsé‡‡ç”¨æ•°æ®åŠ«æŒ&amp;å‘å¸ƒ-è®¢é˜…æ¨¡å¼æ¥å®ç°å“åº”å¼ï¼ŒVue.jsåœ¨åˆ›å»º<code>vm</code>çš„æ—¶å€™ï¼Œä¼šå°†æ•°æ®é…ç½®åœ¨å®ä¾‹å½“ä¸­ï¼Œç„¶åé€šè¿‡<code>Object.defineProperty</code>å¯¹æ•°æ®è¿›è¡Œæ“ä½œï¼Œä¸ºæ•°æ®åŠ¨æ€æ·»åŠ äº†<code>getter</code>ä¸<code>setter</code>æ–¹æ³•ï¼Œå½“è·å–æ•°æ®çš„æ—¶å€™ä¼šè§¦å‘å¯¹åº”çš„<code>getter</code>æ–¹æ³•ï¼Œå½“è®¾ç½®æ•°æ®çš„æ—¶å€™ä¼šè§¦å‘å¯¹åº”çš„<code>setter</code>æ–¹æ³•ï¼Œä»è€Œè¿›ä¸€æ­¥è§¦å‘<code>vm</code>çš„<code>watcher</code>æ–¹æ³•ï¼Œç„¶åæ•°æ®æ›´æ”¹ï¼Œ<code>vm</code>åˆ™ä¼šè¿›ä¸€æ­¥è§¦å‘è§†å›¾æ›´æ–°æ“ä½œã€‚</p>\n<h2 id=\"reactjs-3\">React.js</h2>\n<p>React.jsä¸­ç»„ä»¶ä¸å…è®¸é€šè¿‡<code>this.state</code>è¿™ç§æ–¹å¼ç›´æ¥æ›´æ”¹ç»„ä»¶çš„çŠ¶æ€ã€‚è‡ªèº«è®¾ç½®çš„çŠ¶æ€ï¼Œå¯ä»¥é€šè¿‡<code>setState</code>æ¥è¿›è¡Œæ›´æ”¹ã€‚åœ¨<code>setState</code>ä¸­ï¼Œä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œå°±ä¼šå°†ç»„ä»¶çš„çŠ¶æ€ä¸­é”®å€¼å¯¹çš„éƒ¨åˆ†æ›´æ”¹ï¼Œè¿˜å¯ä»¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°å¿…é¡»å‘ä¸Šé¢æ–¹å¼ä¸€æ ·çš„ä¸€ä¸ªå¯¹è±¡å‡½æ•°å¯ä»¥æ¥å—<code>prevState</code>å’Œ<code>props</code>ã€‚React.jsåœ¨æ¥æ”¶åˆ°ç”¨æˆ·çŠ¶æ€æ”¹å˜é€šçŸ¥åï¼Œä¼šæ ¹æ®å½“å‰æ¸²æŸ“æ ‘ï¼Œç»“åˆæœ€æ–°çš„çŠ¶æ€æ”¹å˜ï¼Œé€šè¿‡Diffç®—æ³•ï¼Œè®¡ç®—å‡ºæ ‘ä¸­å˜åŒ–çš„éƒ¨åˆ†ï¼Œç„¶ååªæ›´æ–°å˜åŒ–çš„éƒ¨åˆ†ï¼ˆDOMæ“ä½œï¼‰ï¼Œä»è€Œé¿å…æ•´æ£µæ ‘é‡æ„ï¼Œæé«˜æ€§èƒ½ã€‚</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/reactSetData.png\" alt=\"Reactæ›´æ–°è¿‡ç¨‹\"></p>\n<h1 id=\"diffç®—æ³•\">Diffç®—æ³•</h1>\n<h2 id=\"vuejs-4\">Vue.js</h2>\n<ol>\n<li>åŒçº§æ¯”è¾ƒï¼Œå†æ¯”è¾ƒå­èŠ‚ç‚¹</li>\n<li>å…ˆåˆ¤æ–­ä¸€æ–¹æœ‰å­èŠ‚ç‚¹è€Œå¦ä¸€æ–¹æ²¡æœ‰å­èŠ‚ç‚¹çš„æƒ…å†µ</li>\n<li>æ¯”è¾ƒåŒæ–¹éƒ½æœ‰å­èŠ‚ç‚¹çš„æƒ…å†µï¼ˆ<a href=\"https://www.jianguoyun.com/static/stackedit/%5Bhttp://blog.p18c.top/2020/03/04/Vue.js%E7%A0%94%E8%AF%BB-%E8%99%9A%E6%8B%9FDOM/%5D(http://blog.p18c.top/2020/03/04/Vue.js%E7%A0%94%E8%AF%BB-%E8%99%9A%E6%8B%9FDOM/)\">æ ¸å¿ƒdiffç®—æ³•</a>ï¼‰</li>\n<li>é€’å½’æ¯”è¾ƒå­èŠ‚ç‚¹</li>\n</ol>\n<h2 id=\"reactjsï¼ˆdiffè¯¦è§£ï¼‰\">React.jsï¼ˆ<a href=\"https://www.jianguoyun.com/static/stackedit/%5Bhttps://zhuanlan.zhihu.com/p/20346379%5D(https://zhuanlan.zhihu.com/p/20346379)\">Diffè¯¦è§£</a>ï¼‰</h2>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/reactDomDiff.png\" alt=\"React.js DOM Diff\"></p>\n<h1 id=\"ç”Ÿå‘½å‘¨æœŸ\">ç”Ÿå‘½å‘¨æœŸ</h1>\n<h2 id=\"vuejs-5\">Vue.js</h2>\n<ol>\n<li>beforeCreate</li>\n</ol>\n<p><code>new Vue()</code>åè§¦å‘çš„ç¬¬ä¸€ä¸ªé’©å­ï¼Œåœ¨å½“å‰é˜¶æ®µ<code>data</code>ã€<code>methods</code>ã€<code>computed</code>ä»¥åŠ<code>watch</code>ä¸Šçš„æ•°æ®å’Œæ–¹æ³•å‡ä¸èƒ½è¢«è®¿é—®</p>\n<ol>\n<li>created</li>\n</ol>\n<p>åœ¨å®ä¾‹åˆ›å»ºå®Œæˆä¹‹åè§¦å‘ï¼Œå½“å‰é˜¶æ®µå·²å®Œæˆäº†æ•°æ®è§‚æµ‹ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥ä½¿ç”¨æ•°æ®ï¼Œæ›´æ”¹æ•°æ®ï¼Œè¿™æ—¶æ›´æ–°ä¸ä¼šè§¦å‘<code>updated</code>é’©å­ã€‚å¯ä»¥<strong>åšä¸€äº›åˆå§‹æ•°æ®çš„è·å–</strong>ï¼Œåœ¨å½“å‰é˜¶æ®µ<strong>æ— æ³•è®¿é—®DOM</strong>ï¼ˆå¯ä½¿ç”¨vm.$nextTickï¼‰</p>\n<ol>\n<li>beforeMount</li>\n</ol>\n<p>å‘ç”Ÿåœ¨æŒ‚è½½ä¹‹å‰ï¼Œåœ¨è¿™ä¹‹å‰templateå·²å¯¼å…¥æ¸²æŸ“å‡½æ•°ç¼–è¯‘ï¼Œè€Œä¸”å½“å‰é˜¶æ®µè™šæ‹ŸDOMå·²åˆ›å»ºå®Œæˆï¼Œå³å°†å¼€å§‹æ¸²æŸ“ã€‚åœ¨æ­¤æ—¶ä¹Ÿå¯ä»¥å¯¹æ•°æ®è¿›è¡Œæ›´æ”¹ï¼Œä¸ä¼šè§¦å‘<code>updated</code></p>\n<ol>\n<li>mounted</li>\n</ol>\n<p>åœ¨æŒ‚è½½ä¹‹åè¢«è§¦å‘ã€‚åœ¨å½“å‰é˜¶æ®µï¼ŒçœŸå®çš„DOMè¢«æŒ‚è½½å®Œæ¯•ï¼Œæ•°æ®å®ŒæˆåŒå‘ç»‘å®šï¼Œå¯ä»¥è®¿é—®åˆ°DOMï¼Œå¯ä»¥ä½¿ç”¨<code>$ref</code>å±æ€§å¯¹DOMè¿›è¡Œæ“ä½œ</p>\n<ol>\n<li>beforeUpdate</li>\n</ol>\n<p>åœ¨ç•Œé¢å‘ç”Ÿæ›´æ–°ä¹‹å‰è¢«è§¦å‘ã€‚ä¹Ÿå°±æ˜¯å“åº”å¼æ•°æ®å‘ç”Ÿæ”¹å˜ä¹‹å‰ã€è™šæ‹ŸDOMé‡æ–°æ¸²æŸ“ä¹‹å‰è¢«è§¦å‘ï¼Œå¯ä»¥åœ¨æ­¤é˜¶æ®µå¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œä¸ä¼šé€ æˆé‡æ¸²æŸ“</p>\n<ol>\n<li>updated</li>\n</ol>\n<p>æ—©å‘ç”Ÿæ›´æ–°ä¹‹å‰è¢«è§¦å‘ã€‚å½“å‰é˜¶æ®µDOMå·²å®Œæˆæ›´æ–°ã€‚è¦æ³¨æ„çš„æ˜¯é¿å…åœ¨æ­¤æœŸé—´æ›´æ–°æ•°æ®ï¼Œå› ä¸ºè¿™æ ·å¯èƒ½ä¼šé€ æˆæ— é™å¾ªç¯çš„æ›´æ–°</p>\n<ol>\n<li>beforeDestory</li>\n</ol>\n<p>åœ¨å®ä¾‹é”€æ¯ä¹‹å‰è§¦å‘ã€‚åœ¨å½“å‰é˜¶æ®µå®ä¾‹å®Œå…¨å¯ä»¥è¢«ä½¿ç”¨ï¼Œå¯ä»¥åœ¨æ­¤é˜¶æ®µåšäº›å–„åå·¥ä½œï¼Œå¦‚æ¸…é™¤å®šæ—¶å™¨</p>\n<ol>\n<li>destoryed</li>\n</ol>\n<p>åœ¨å®ä¾‹é”€æ¯ä¹‹åè§¦å‘ã€‚è¿™æ—¶å€™åªå‰©ä¸‹DOMï¼Œç»„ä»¶å·²è¢«æ‹†è§£ã€æ•°æ®ç»‘å®šè¢«å¸è½½ã€ç›‘å¬è¢«ç§»é™¤ã€å­å®ä¾‹ä¹Ÿç»Ÿç»Ÿè¢«é”€æ¯</p>\n<h2 id=\"reactjsï¼ˆç”Ÿå‘½å‘¨æœŸè¯¦è§£ï¼‰\">React.jsï¼ˆ<a href=\"https://www.jianguoyun.com/static/stackedit/%5Bhttps://www.jianshu.com/p/b331d0e4b398%5D(https://www.jianshu.com/p/b331d0e4b398)\">ç”Ÿå‘½å‘¨æœŸè¯¦è§£</a>ï¼‰</h2>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/reactLifeCycle.png\" alt=\"React.jsç”Ÿå‘½å‘¨æœŸ\"></p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/reactLifeCycle-1.png\" alt=\"React.jsç”Ÿå‘½å‘¨æœŸ1\"></p>\n"},{"title":"å‰ç«¯æ¶æ„&è½¯å®åŠ›-å‰ç«¯åŸ‹ç‚¹","tags":["åŸ‹ç‚¹"],"categories":"å‰ç«¯æ¶æ„&è½¯å®åŠ›","description":"# WHAT\n\nåœ¨çº¿ä¸Šé¡¹ç›®ä¸­ï¼Œéœ€è¦ç»Ÿè®¡äº§å“ä¸­ç”¨æˆ·è¡Œä¸ºå’Œä½¿ç”¨æƒ…å†µï¼Œä»è€Œå¯ä»¥ä»ç”¨æˆ·å’Œäº§å“çš„è§’åº¦å»äº†è§£ç”¨æˆ·ç¾¤ä½“ï¼Œä»è€Œå‡çº§å’Œè¿­ä»£äº§å“ï¼Œä½¿å…¶æ›´åŠ è´´è¿‘ç”¨æˆ·ã€‚ç”¨æˆ·è¡Œä¸ºæ•°æ®å¯ä»¥é€šè¿‡å‰ç«¯**æ•°æ®ç›‘æ§**çš„æ–¹å¼è·å¾—ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå‰ç«¯è¿˜éœ€è¦å®ç°**æ€§èƒ½ç›‘æ§**å’Œ**å¼‚å¸¸ç›‘æ§**ã€‚\n\n**å®ç°å‰ç«¯ç›‘æ§**æœ‰ä¸‰ä¸ªæ­¥éª¤ï¼š**å‰ç«¯åŸ‹ç‚¹**å’Œä¸ŠæŠ¥ã€æ•°æ®å¤„ç†å’Œæ•°æ®åˆ†æã€‚\n\n## æ•°æ®ç›‘æ§\n\næ•°æ®ç›‘æ§å°±æ˜¯ç›‘å¬ç”¨æˆ·ä¿¡æ¯å’Œè¡Œä¸ºï¼Œå¸¸è§çš„","createDate":"2020-06-04 22:35:12","updateDate":"2021-02-20 17:15:22","body":"<h1 id=\"what\">WHAT</h1>\n<p>åœ¨çº¿ä¸Šé¡¹ç›®ä¸­ï¼Œéœ€è¦ç»Ÿè®¡äº§å“ä¸­ç”¨æˆ·è¡Œä¸ºå’Œä½¿ç”¨æƒ…å†µï¼Œä»è€Œå¯ä»¥ä»ç”¨æˆ·å’Œäº§å“çš„è§’åº¦å»äº†è§£ç”¨æˆ·ç¾¤ä½“ï¼Œä»è€Œå‡çº§å’Œè¿­ä»£äº§å“ï¼Œä½¿å…¶æ›´åŠ è´´è¿‘ç”¨æˆ·ã€‚ç”¨æˆ·è¡Œä¸ºæ•°æ®å¯ä»¥é€šè¿‡å‰ç«¯<strong>æ•°æ®ç›‘æ§</strong>çš„æ–¹å¼è·å¾—ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå‰ç«¯è¿˜éœ€è¦å®ç°<strong>æ€§èƒ½ç›‘æ§</strong>å’Œ<strong>å¼‚å¸¸ç›‘æ§</strong>ã€‚</p>\n<p><strong>å®ç°å‰ç«¯ç›‘æ§</strong>æœ‰ä¸‰ä¸ªæ­¥éª¤ï¼š<strong>å‰ç«¯åŸ‹ç‚¹</strong>å’Œä¸ŠæŠ¥ã€æ•°æ®å¤„ç†å’Œæ•°æ®åˆ†æã€‚</p>\n<h2 id=\"æ•°æ®ç›‘æ§\">æ•°æ®ç›‘æ§</h2>\n<p>æ•°æ®ç›‘æ§å°±æ˜¯ç›‘å¬ç”¨æˆ·ä¿¡æ¯å’Œè¡Œä¸ºï¼Œå¸¸è§çš„ç›‘æ§é¡¹æœ‰ï¼š</p>\n<ul>\n<li>PVï¼ˆpage viewï¼Œé¡µé¢è®¿é—®é‡ï¼‰</li>\n<li>UVï¼ˆunique viewï¼Œç‹¬ç«‹è®¿å®¢ï¼‰</li>\n<li>ç”¨æˆ·åœ¨æ¯ä¸€ä¸ªé¡µé¢åœç•™çš„æ—¶é—´</li>\n<li>ç”¨æˆ·é€šè¿‡ä»€ä¹ˆå…¥å£è®¿é—®è¯¥é¡µé¢</li>\n<li>ç”¨æˆ·åœ¨ç›¸åº”é¡µé¢è§¦å‘çš„è¡Œä¸º</li>\n</ul>\n<h2 id=\"æ€§èƒ½ç›‘æ§\">æ€§èƒ½ç›‘æ§</h2>\n<p>æ€§èƒ½ç›‘æ§æŒ‡ç›‘å¬å‰ç«¯çš„æ€§èƒ½ï¼Œä¸»è¦åŒ…æ‹¬ç›‘å¬ç½‘é¡µæˆ–è€…äº§å“åœ¨ç”¨æˆ·ç«¯çš„ä½“éªŒã€‚å¸¸è§çš„æ€§èƒ½ç›‘æ§é¡¹åŒ…æ‹¬ï¼š</p>\n<ul>\n<li>ä¸åŒç”¨æˆ·ã€ä¸åŒæœºå‹å’Œä¸åŒç³»ç»Ÿä¸‹çš„é¦–å±åŠ è½½æ—¶é—´</li>\n<li>httpç­‰è¯·æ±‚çš„å“åº”æ—¶é—´</li>\n<li>é™æ€èµ„æºæ•´ä½“ä¸‹è½½æ—¶é—´</li>\n<li>é¡µé¢æ¸²æŸ“æ—¶é—´</li>\n<li>é¡µé¢äº¤äº’åŠ¨ç”»å®Œæˆæ—¶é—´</li>\n</ul>\n<h2 id=\"å¼‚å¸¸ç›‘æ§\">å¼‚å¸¸ç›‘æ§</h2>\n<p>ç”±äºäº§å“çš„å‰ç«¯ä»£ç åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¹Ÿä¼šå‘ç”Ÿå¼‚å¸¸ï¼Œå› æ­¤éœ€è¦å¼•å…¥å¼‚å¸¸ç›‘æ§ã€‚åŠæ—¶çš„ä¸ŠæŠ¥å¼‚å¸¸æƒ…å†µï¼Œå¯ä»¥é¿å…çº¿ä¸Šæ•…éšœçš„å‘ä¸Šã€‚è™½ç„¶å¤§éƒ¨åˆ†å¼‚å¸¸å¯ä»¥é€šè¿‡ try catch çš„æ–¹å¼æ•è·ï¼Œä½†æ˜¯æ¯”å¦‚å†…å­˜æ³„æ¼ä»¥åŠå…¶ä»–å¶ç°çš„å¼‚å¸¸éš¾ä»¥æ•è·ã€‚å¸¸è§çš„éœ€è¦ç›‘æ§çš„å¼‚å¸¸åŒ…æ‹¬ï¼š</p>\n<ul>\n<li>Javascript çš„å¼‚å¸¸ç›‘æ§</li>\n<li>æ ·å¼ä¸¢å¤±çš„å¼‚å¸¸ç›‘æ§</li>\n<li>æœåŠ¡å™¨è¯·æ±‚çš„å¼‚å¸¸ç›‘æ§</li>\n</ul>\n<h1 id=\"why\">WHY</h1>\n<p>è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ã€è¡Œä¸ºä»¥åŠè·Ÿè¸ªäº§å“åœ¨å®¢æˆ·ç«¯çš„ä½¿ç”¨æƒ…å†µï¼Œå¹¶ä»¥ç›‘æ§æ•°æ®ä¸ºåŸºç¡€ï¼ŒæŒ‡æ˜äº§å“ä¼˜åŒ–çš„æ–¹å‘ã€‚</p>\n<h1 id=\"how\">HOW</h1>\n<h2 id=\"æ‰‹åŠ¨åŸ‹ç‚¹\">æ‰‹åŠ¨åŸ‹ç‚¹</h2>\n<p>ä¹Ÿç§°ä»£ç åŸ‹ç‚¹ï¼Œå³çº¯æ‰‹åŠ¨å†™ä»£ç ï¼Œè°ƒç”¨åŸ‹ç‚¹SDKçš„å‡½æ•°ï¼Œåœ¨éœ€è¦åŸ‹ç‚¹çš„ä¸šåŠ¡é€»è¾‘åŠŸèƒ½ä½ç½®è°ƒç”¨æ¥å£ä¸ŠæŠ¥åŸ‹ç‚¹æ•°æ®ï¼Œåƒ<a href=\"https://links.jianshu.com/go?to=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%3A%2F%2Fwww.umeng.com%2F\">å‹ç›Ÿ</a>ã€<a href=\"https://links.jianshu.com/go?to=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%3A%2F%2Ftongji.baidu.com%2Fweb%2Fwelcome%2Flogin\">ç™¾åº¦ç»Ÿè®¡</a>ç­‰ç¬¬ä¸‰æ–¹æ•°æ®ç»Ÿè®¡æœåŠ¡å•†å¤§éƒ½é‡‡ç”¨è¿™ç§æ–¹æ¡ˆã€‚</p>\n<p>ä¼˜åŠ¿ï¼š</p>\n<ul>\n<li>å¯è‡ªå®šä¹‰å±æ€§ï¼Œè‡ªå®šä¹‰äº‹ä»¶</li>\n<li>å¯ä»¥ç»†åŒ–éœ€æ±‚</li>\n<li>ç›¸æ¯”å…¶ä»–åŸ‹ç‚¹æ–¹å¼å‡å°‘æœåŠ¡å™¨å‹åŠ›</li>\n</ul>\n<p>åŠ£åŠ¿ï¼š</p>\n<ul>\n<li>å·¥ç¨‹é‡å¤§çš„è¯ï¼Œæ‰‹åŠ¨åŸ‹ç‚¹ä¼šå‡ºç¿”æ¼æ´ï¼Œä¸æ–¹ä¾¿å®¡æŸ¥</li>\n<li>éœ€æ±‚å˜æ›´éœ€é‡æ–°åŸ‹ç‚¹ï¼Œæˆæœ¬é«˜</li>\n</ul>\n<h2 id=\"å¯è§†åŒ–åŸ‹ç‚¹\">å¯è§†åŒ–åŸ‹ç‚¹</h2>\n<p>é€šè¿‡å¯è§†åŒ–äº¤äº’çš„æ‰‹æ®µï¼Œä»£æ›¿ä¸Šè¿°çš„ä»£ç åŸ‹ç‚¹ã€‚å°†ä¸šåŠ¡ä»£ç å’ŒåŸ‹ç‚¹ä»£ç åˆ†ç¦»ï¼Œæä¾›ä¸€ä¸ªå¯è§†åŒ–äº¤äº’çš„é¡µé¢ï¼Œè¾“å…¥ä¸ºä¸šåŠ¡ä»£ç ï¼Œé€šè¿‡è¿™ä¸ªå¯è§†åŒ–ç³»ç»Ÿï¼Œå¯ä»¥åœ¨ä¸šåŠ¡ä»£ç ä¸­è‡ªå®šä¹‰çš„å¢åŠ åŸ‹ç‚¹äº‹ä»¶ç­‰ç­‰ï¼Œæœ€åè¾“å‡ºçš„ä»£ç è€¦åˆäº†ä¸šåŠ¡ä»£ç å’ŒåŸ‹ç‚¹ä»£ç ã€‚ç¼ºç‚¹å°±æ˜¯å¯ä»¥åŸ‹ç‚¹çš„æ§ä»¶æœ‰é™ï¼Œä¸èƒ½æ‰‹åŠ¨å®šåˆ¶ã€‚</p>\n<p>å¯è§†åŒ–åŸ‹ç‚¹å¬èµ·æ¥æ¯”è¾ƒé«˜å¤§ä¸Šï¼Œå®é™…ä¸Šè·Ÿä»£ç åŸ‹ç‚¹è¿˜æ˜¯åŒºåˆ«ä¸å¤§ã€‚ä¹Ÿå°±æ˜¯ç”¨ä¸€ä¸ªç³»ç»Ÿæ¥å®ç°æ‰‹åŠ¨æ’å…¥ä»£ç åŸ‹ç‚¹çš„è¿‡ç¨‹ã€‚æ¯”å¦‚å›½å¤–æ¯”è¾ƒæ—©åšå¯è§†åŒ–çš„æ˜¯ <a href=\"https://links.jianshu.com/go?to=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%3A%2F%2Fmixpanel.com%2F\">Mixpanel</a>ï¼Œå›½å†…è¾ƒæ—©æ”¯æŒå¯è§†åŒ–åŸ‹ç‚¹çš„æœ‰<a href=\"https://links.jianshu.com/go?to=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%3A%2F%2Fwww.talkingdata.com%2F\">TalkingData</a>ã€<a href=\"https://links.jianshu.com/go?to=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%3A%2F%2Fzhugeio.com%2F\">è¯¸è‘› IO</a>ï¼Œ2017å¹´è…¾è®¯çš„ <a href=\"https://links.jianshu.com/go?to=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%3A%2F%2Fmta.qq.com%2F\">MTA</a> ä¹Ÿå®£å¸ƒæ”¯æŒå¯è§†åŒ–åŸ‹ç‚¹ï¼›ç›¸æ¯”äºæ‰‹åŠ¨åŸ‹ç‚¹æ›´æ–°å›°éš¾ï¼ŒåŸ‹ç‚¹æˆæœ¬é«˜çš„é—®é¢˜ï¼Œå¯è§†åŒ–åŸ‹ç‚¹ä¼˜åŒ–äº†ç§»åŠ¨è¿è¥ä¸­æ•°æ®é‡‡é›†çš„æµç¨‹ï¼Œèƒ½å¤Ÿæ”¯æŒäº§å“è¿è¥éšæ—¶è°ƒæ•´åŸ‹ç‚¹ï¼Œæ— éœ€å†èµ°å‘ç‰ˆæµç¨‹ï¼Œç›´æ¥æŠŠé…ç½®ç»“æœæ¨å…¥åˆ°å‰ç«¯ï¼Œæ•°æ®é‡‡é›†æµç¨‹æ›´ç®€åŒ–ï¼Œä¹Ÿæ›´æ–¹ä¾¿äº§å“çš„è¿­ä»£ã€‚</p>\n<p>å¯è§†åŒ–åŸ‹ç‚¹ä¸­å¤šæ•°åŸºäºXpathçš„æ–¹æ¡ˆï¼ŒXPath æ˜¯ä¸€é—¨åœ¨ XML æ–‡æ¡£ä¸­æŸ¥æ‰¾ä¿¡æ¯çš„è¯­è¨€ï¼ŒXPath å¯ç”¨æ¥åœ¨ XML æ–‡æ¡£ä¸­å¯¹å…ƒç´ å’Œå±æ€§è¿›è¡Œéå†ã€‚</p>\n<h2 id=\"æ— åŸ‹ç‚¹\">æ— åŸ‹ç‚¹</h2>\n<p>æ— åŸ‹ç‚¹åˆ™æ˜¯å‰ç«¯è‡ªåŠ¨é‡‡é›†å…¨éƒ¨äº‹ä»¶ï¼Œä¸ŠæŠ¥åŸ‹ç‚¹æ•°æ®ï¼Œç”±åç«¯æ¥è¿‡æ»¤å’Œè®¡ç®—å‡ºæœ‰ç”¨çš„æ•°æ®ã€‚</p>\n<p>ä¼˜ç‚¹:</p>\n<ol>\n<li>å‰ç«¯åªè¦ä¸€æ¬¡åŠ è½½åŸ‹ç‚¹è„šæœ¬</li>\n</ol>\n<p>ç¼ºç‚¹:</p>\n<ol>\n<li>æœåŠ¡å™¨æ€§èƒ½å‹åŠ›å±±å¤§</li>\n</ol>\n<p>é‡‡ç”¨æ— åŸ‹ç‚¹æŠ€æœ¯çš„æœ‰ä¸»æµçš„ <a href=\"https://links.jianshu.com/go?to=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%3A%2F%2Fwww.growingio.com%2F\">GrowingIO</a>ã€<a href=\"https://links.jianshu.com/go?to=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%3A%2F%2Fwww.sensorsdata.cn%2F\">ç¥ç­–</a>ã€‚</p>\n<p>å‚è€ƒï¼š</p>\n<p><a href=\"https://segmentfault.com/a/1190000015864670\">å‰ç«¯ç›‘æ§å’Œå‰ç«¯åŸ‹ç‚¹æ–¹æ¡ˆè®¾è®¡</a></p>\n<p><a href=\"https://www.jianshu.com/p/645a26619508\">å°è°ˆå‰ç«¯åŸ‹ç‚¹</a></p>\n"},{"title":"å‰ç«¯æ¶æ„&è½¯å®åŠ›-å¼‚å¸¸ç›‘æ§","tags":["å¼‚å¸¸ç›‘æ§"],"categories":"å‰ç«¯æ¶æ„&è½¯å®åŠ›","description":"# JavaScriptä¸­çš„å¼‚å¸¸å¤„ç†æ–¹å¼\n\nå¯¹äºJavaScriptè€Œè¨€ï¼Œæˆ‘ä»¬é¢å¯¹çš„ä»…ä»…åªæ˜¯å¼‚å¸¸ï¼Œå¼‚å¸¸çš„å‡ºç°å¹¶ä¸ä¼šç›´æ¥å¯¼è‡´JavaScriptå¼•æ“å´©æºƒï¼Œæœ€å¤šåªä¼šä½¿å½“å‰æ‰§è¡Œçš„ä»»åŠ¡ç»ˆæ­¢\n\n1. å½“å‰ä»£ç å—å°†ä½œä¸ºä¸€ä¸ªä»»åŠ¡å‹å…¥ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼ŒJavaScriptå¼•æ“çº¿ç¨‹ä¼šä¸æ–­åœ°ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­æå–ä»»åŠ¡æ‰§è¡Œ\n2. å½“ä»»åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸ï¼Œä¸”å¼‚å¸¸æ²¡æœ‰æ•è·å¤„ç†ï¼Œåˆ™ä¼šä¸€ç›´æ²¿ç€è°ƒç”¨æ ˆä¸€å±‚å±‚å‘å¤–æŠ›å‡ºï¼Œæœ€ç»ˆç»ˆæ­¢å½“å‰ä»»åŠ¡åœ°","createDate":"2020-06-08 22:33:01","updateDate":"2021-02-20 17:15:07","body":"<h1 id=\"javascriptä¸­çš„å¼‚å¸¸å¤„ç†æ–¹å¼\">JavaScriptä¸­çš„å¼‚å¸¸å¤„ç†æ–¹å¼</h1>\n<p>å¯¹äºJavaScriptè€Œè¨€ï¼Œæˆ‘ä»¬é¢å¯¹çš„ä»…ä»…åªæ˜¯å¼‚å¸¸ï¼Œå¼‚å¸¸çš„å‡ºç°å¹¶ä¸ä¼šç›´æ¥å¯¼è‡´JavaScriptå¼•æ“å´©æºƒï¼Œæœ€å¤šåªä¼šä½¿å½“å‰æ‰§è¡Œçš„ä»»åŠ¡ç»ˆæ­¢</p>\n<ol>\n<li>å½“å‰ä»£ç å—å°†ä½œä¸ºä¸€ä¸ªä»»åŠ¡å‹å…¥ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼ŒJavaScriptå¼•æ“çº¿ç¨‹ä¼šä¸æ–­åœ°ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­æå–ä»»åŠ¡æ‰§è¡Œ</li>\n<li>å½“ä»»åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸ï¼Œä¸”å¼‚å¸¸æ²¡æœ‰æ•è·å¤„ç†ï¼Œåˆ™ä¼šä¸€ç›´æ²¿ç€è°ƒç”¨æ ˆä¸€å±‚å±‚å‘å¤–æŠ›å‡ºï¼Œæœ€ç»ˆç»ˆæ­¢å½“å‰ä»»åŠ¡åœ°æ‰§è¡Œ</li>\n<li>JavaScriptå¼•æ“çº¿ç¨‹ç»§ç»­ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºä¸‹ä¸€ä¸ªä»»åŠ¡ç»§ç»­æ‰§è¡Œ</li>\n</ol>\n<p>å¼‚å¸¸ä¸»è¦åˆ†ä¸ºä¸¤å¤§ä¸­ï¼š<strong>è¿è¡Œæ—¶é”™è¯¯</strong>å’Œè¯­<strong>æ³•é”™è¯¯</strong>ã€‚è¯­æ³•é”™è¯¯åœ¨ç¼–å†™ä»£ç æœŸé—´å¾ˆå®¹æ˜“è¢«å‘ç°ï¼Œè¿è¡Œæ—¶é”™è¯¯ä¸»è¦ç”±å–å€¼/èµ‹å€¼å¼‚å¸¸ã€å‡½æ•°æ‰§è¡Œå‡ºé”™ç­‰</p>\n<h1 id=\"å¦‚ä½•æ•è·å¼‚å¸¸\">å¦‚ä½•æ•è·å¼‚å¸¸</h1>\n<h2 id=\"æ•è·æ™®é€šjavascriptå¼‚å¸¸\">æ•è·æ™®é€šJavaScriptå¼‚å¸¸</h2>\n<p>å¯¹äºæ™®é€šçš„JavaScriptå¼‚å¸¸ï¼Œå¸¸è§çš„åšæ³•æ˜¯ä½¿ç”¨<code>try-catch</code>è¿›è¡ŒåŒ…è£¹ï¼Œå½“<code>try</code>ä¸­çš„ä»£ç å—æ‰§è¡Œå‡ºé”™åï¼Œ<code>catch</code>å°†èƒ½æ•æ‰åˆ°å¼‚å¸¸ï¼Œä»£ç ä¹Ÿå¯ä»¥ç»§ç»­æ‰§è¡Œä¸‹å»</p>\n<p>ä½†<code>try-catch</code>å¤„ç†å¼‚å¸¸çš„èƒ½åŠ›æœ‰é™ï¼Œ<strong>åªèƒ½æ•æ‰åˆ°è¿è¡Œæ—¶éå¼‚æ­¥é”™è¯¯</strong>ï¼Œå¯¹äºè¯­æ³•é”™è¯¯å’Œå¼‚æ­¥é”™è¯¯å°±æ˜¾å¾—æ— èƒ½ä¸ºåŠ›ï¼Œæ•æ‰ä¸åˆ°</p>\n<h2 id=\"æ•è·å¼‚æ­¥javascriptå¼‚å¸¸\">æ•è·å¼‚æ­¥JavaScriptå¼‚å¸¸</h2>\n<p><code>window.onerror</code>æ•è·å¼‚å¸¸èƒ½åŠ›æ¯”<code>try-catch</code>ç¨å¾®å¼ºç‚¹ï¼Œæ— è®ºæ˜¯å¼‚æ­¥è¿˜æ˜¯éå¼‚æ­¥è¿è¡Œæ—¶é”™è¯¯ï¼Œ<code>onerror</code>éƒ½èƒ½æ•è·åˆ°</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">onerror</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">msg, url, row, col, error</span>) {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;æˆ‘çŸ¥é“é”™è¯¯äº†&#x27;</span>);\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>({\n    msg,  url,  row, col, error\n  })\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n};\n</code></pre>\n<p>ä½¿ç”¨æ³¨æ„ï¼š</p>\n<ul>\n<li>åœ¨å®é™…çš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œ<code>windows.onerror</code> ä¸»è¦æ˜¯æ¥æ•è·é¢„æ–™ä¹‹å¤–çš„é”™è¯¯ï¼Œè€Œ <code>try-catch</code> åˆ™æ˜¯ç”¨æ¥åœ¨å¯é¢„è§æƒ…å†µä¸‹ç›‘æ§ç‰¹å®šçš„é”™è¯¯ï¼Œä¸¤è€…ç»“åˆä½¿ç”¨æ›´åŠ é«˜æ•ˆã€‚</li>\n<li><code>window.onerror</code> å‡½æ•°åªæœ‰åœ¨è¿”å› true çš„æ—¶å€™ï¼Œå¼‚å¸¸æ‰ä¸ä¼šå‘ä¸ŠæŠ›å‡ºï¼Œå¦åˆ™å³ä½¿æ˜¯çŸ¥é“å¼‚å¸¸çš„å‘ç”Ÿæ§åˆ¶å°è¿˜æ˜¯ä¼šæ˜¾ç¤º</li>\n<li><code>window.onerror</code>æ— æ³•æ•è·åˆ°ç½‘ç»œå¼‚å¸¸çš„é”™è¯¯</li>\n<li>æ— æ³•æ•è·<code>Promise</code>å¼‚å¸¸</li>\n</ul>\n<h2 id=\"æ•è·promise-å¼‚å¸¸\">æ•è·<strong>Promise</strong> å¼‚å¸¸</h2>\n<p>é€šè¿‡ <code>Promise</code> å¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£å†³å¼‚æ­¥å›è°ƒåœ°ç‹±çš„é—®é¢˜ï¼Œä½†æ˜¯ä¸€æ—¦ ~å®ä¾‹æŠ›å‡ºå¼‚å¸¸è€Œä½ æ²¡æœ‰ç”¨ <code>catch</code> å»æ•è·çš„è¯ï¼Œ<code>onerror</code> æˆ– <code>try-catch</code> ä¹Ÿæ— èƒ½ä¸ºåŠ›ï¼Œæ— æ³•æ•æ‰åˆ°é”™è¯¯</p>\n<p>å¯¹æ­¤å¯ä»¥æ·»åŠ ä¸€ä¸ª <strong><code>Promise</code> å…¨å±€å¼‚å¸¸æ•è·äº‹ä»¶</strong> <code>unhandledrejection</code></p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&quot;unhandledrejection&quot;</span>, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">e</span>){\n  e.<span class=\"hljs-title function_\">preventDefault</span>()\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;æˆ‘çŸ¥é“ promise çš„é”™è¯¯äº†&#x27;</span>);\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(e.<span class=\"hljs-property\">reason</span>);\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n});\n</code></pre>\n<p>|                    | åŒæ­¥æ–¹æ³• | å¼‚æ­¥æ–¹æ³• | èµ„æºåŠ è½½ | Promise | async/await |\n| </p>\n"},{"title":"å¼‚å¸¸ç›‘æ§-å·¥ç¨‹åŒ–","tags":["å¼‚å¸¸ç›‘æ§"],"categories":"å‰ç«¯æ¶æ„&è½¯å®åŠ›","description":"// todo","createDate":"2020-07-28 11:15:28","updateDate":"2021-02-20 17:14:53","body":"<p>// todo</p>\n"},{"title":"å¼‚å¸¸ç›‘æ§-å¼‚å¸¸ä¸ŠæŠ¥","tags":["å¼‚å¸¸ç›‘æ§"],"categories":"å‰ç«¯æ¶æ„&è½¯å®åŠ›","description":"# ä¸ŠæŠ¥æ•°æ®ç»“æ„è®¾è®¡\n\n## å…¬å…±ä¿¡æ¯\n\n```js\ninterface BaseinfoI {\n  title: string;        // é¡µé¢åç§°\n  location: string;     // é¡µé¢url\n  message: string;      // æŠ¥é”™ä¿¡æ¯\n  kind: string;         // æŠ¥é”™å¤§ç±»\n  type: string;","createDate":"2020-07-28 11:15:28","updateDate":"2021-02-20 17:14:37","body":"<h1 id=\"ä¸ŠæŠ¥æ•°æ®ç»“æ„è®¾è®¡\">ä¸ŠæŠ¥æ•°æ®ç»“æ„è®¾è®¡</h1>\n<h2 id=\"å…¬å…±ä¿¡æ¯\">å…¬å…±ä¿¡æ¯</h2>\n<pre><code class=\"hljs language-js\">interface <span class=\"hljs-title class_\">BaseinfoI</span> {\n  <span class=\"hljs-attr\">title</span>: string;        <span class=\"hljs-comment\">// é¡µé¢åç§°</span>\n  <span class=\"hljs-attr\">location</span>: string;     <span class=\"hljs-comment\">// é¡µé¢url</span>\n  <span class=\"hljs-attr\">message</span>: string;      <span class=\"hljs-comment\">// æŠ¥é”™ä¿¡æ¯</span>\n  <span class=\"hljs-attr\">kind</span>: string;         <span class=\"hljs-comment\">// æŠ¥é”™å¤§ç±»</span>\n  <span class=\"hljs-attr\">type</span>: string;         <span class=\"hljs-comment\">// æŠ¥é”™å°ç±»</span>\n  <span class=\"hljs-attr\">errorType</span>: string;    <span class=\"hljs-comment\">// æŠ¥é”™ç±»å‹</span>\n  <span class=\"hljs-attr\">userAgent</span>: string;    <span class=\"hljs-comment\">// æµè§ˆå™¨ä¿¡æ¯</span>\n}\n</code></pre>\n<h2 id=\"jsé”™è¯¯\">JSé”™è¯¯</h2>\n<pre><code class=\"hljs language-js\">interface <span class=\"hljs-title class_\">JSRunTimeErrorEventI</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">BaseinfoI</span> {\n  <span class=\"hljs-attr\">filename</span>: string;     <span class=\"hljs-comment\">// æŠ¥é”™jsæ–‡ä»¶å</span>\n  <span class=\"hljs-attr\">position</span>: string;     <span class=\"hljs-comment\">// æŠ¥é”™ä½ç½®(è¡Œå·:åˆ—å·)</span>\n  <span class=\"hljs-attr\">stack</span>: string;        <span class=\"hljs-comment\">// å †æ ˆä¿¡æ¯</span>\n  <span class=\"hljs-attr\">selector</span>: string;     <span class=\"hljs-comment\">// è§¦å‘é”™è¯¯çš„DOM</span>\n}\n</code></pre>\n<h2 id=\"é™æ€èµ„æºåŠ è½½é”™è¯¯\">é™æ€èµ„æºåŠ è½½é”™è¯¯</h2>\n<pre><code class=\"hljs language-js\">interface <span class=\"hljs-title class_\">AssetsErrorI</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">BaseinfoI</span> {\n  <span class=\"hljs-attr\">url</span>: string;          <span class=\"hljs-comment\">// æŠ¥é”™èµ„æºurl</span>\n  <span class=\"hljs-attr\">nodeName</span>: string;     <span class=\"hljs-comment\">// èµ„æºç±»å‹</span>\n}\n</code></pre>\n<h2 id=\"promiseé”™è¯¯\">Promiseé”™è¯¯</h2>\n<h2 id=\"ajaxé”™è¯¯\">Ajaxé”™è¯¯</h2>\n<pre><code class=\"hljs language-js\">interface <span class=\"hljs-title class_\">AjaxErrorEventI</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">BaseinfoI</span> {\n  <span class=\"hljs-attr\">response</span>: string;     <span class=\"hljs-comment\">// åç«¯å“åº”</span>\n  <span class=\"hljs-attr\">status</span>: number;       <span class=\"hljs-comment\">// è¯·æ±‚çŠ¶æ€ç </span>\n  <span class=\"hljs-attr\">method</span>: string;       <span class=\"hljs-comment\">// è¯·æ±‚æ–¹æ³•</span>\n  <span class=\"hljs-attr\">url</span>: string;          <span class=\"hljs-comment\">// è¯·æ±‚åœ°å€</span>\n  <span class=\"hljs-attr\">params</span>: string;       <span class=\"hljs-comment\">// è¯·æ±‚å‚æ•°</span>\n}\n</code></pre>\n<h1 id=\"ä¸ŠæŠ¥æ–¹å¼\">ä¸ŠæŠ¥æ–¹å¼</h1>\n<h2 id=\"img\">img</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Img</span>(<span class=\"hljs-string\">`http://xxx/report?info=<span class=\"hljs-subst\">${xxx}</span>`</span>)\n</code></pre>\n<h2 id=\"navigatorsendbeacon\">navigator.sendBeacon</h2>\n<p>MDN:<code>navigator.sendBeacon()</code>æ–¹æ³•å¯ç”¨äºé€šè¿‡HTTPå°†å°‘é‡æ•°æ®å¼‚æ­¥ä¼ è¾“åˆ°WebæœåŠ¡å™¨ã€‚ä½¿ç”¨<code>sendBeacon()</code>æ–¹æ³•ä¼šä½¿ç”¨æˆ·ä»£ç†åœ¨æœ‰æœºä¼šæ—¶å¼‚æ­¥åœ°å‘æœåŠ¡å™¨å‘é€æ•°æ®ï¼ŒåŒæ—¶ä¸ä¼šå»¶è¿Ÿé¡µé¢çš„å¸è½½æˆ–å½±å“ä¸‹ä¸€å¯¼èˆªçš„è½½å…¥æ€§èƒ½ã€‚è¿™å°±è§£å†³äº†æäº¤åˆ†ææ•°æ®æ—¶çš„æ‰€æœ‰çš„é—®é¢˜ï¼šæ•°æ®å¯é ï¼Œä¼ è¾“å¼‚æ­¥å¹¶ä¸”ä¸ä¼šå½±å“ä¸‹ä¸€é¡µé¢çš„åŠ è½½ã€‚æ­¤å¤–ï¼Œä»£ç å®é™…ä¸Šè¿˜è¦æ¯”å…¶ä»–æŠ€æœ¯ç®€å•è®¸å¤šï¼</p>\n<pre><code class=\"hljs language-js\">navigator.<span class=\"hljs-title function_\">sendBeacon</span>(<span class=\"hljs-string\">&quot;/log&quot;</span>, analyticsData)\n</code></pre>\n<h2 id=\"è¯·æ±‚æ¥å£\">è¯·æ±‚æ¥å£</h2>\n<h1 id=\"åç«¯å¤„ç†\">åç«¯å¤„ç†</h1>\n<p>// todo</p>\n"},{"title":"å¼‚å¸¸ç›‘æ§-å¼‚å¸¸æ•è·","tags":["å¼‚å¸¸ç›‘æ§"],"categories":"å‰ç«¯æ¶æ„&è½¯å®åŠ›","description":"## å¼‚å¸¸åˆ†ç±»\n\n- ç¼–è¯‘æ—¶å¼‚å¸¸/è¿è¡Œæ—¶å¼‚å¸¸\n\n**ç€é‡å¤„ç†è¿è¡Œæ—¶å¼‚å¸¸**\n\n## è¦å¤„ç†çš„å¼‚å¸¸\n\n- jsè¿è¡Œæ—¶å¼‚å¸¸\n- é™æ€èµ„æºåŠ è½½å¼‚å¸¸\n- Promiseå¼‚å¸¸\n- ajaxè¯·æ±‚å¼‚å¸¸\n- å´©æºƒå’Œå¡é¡¿\n\n## æ•è·å¼‚å¸¸\n\n### æ™®é€šå‰ç«¯é¡¹ç›®\n\n```js\n// monitor.ts\n\ninterface ConfigI {\n  reportUrl: string;\n}\n\ninterface","createDate":"2020-07-28 11:15:28","updateDate":"2021-02-20 17:14:19","body":"<h2 id=\"å¼‚å¸¸åˆ†ç±»\">å¼‚å¸¸åˆ†ç±»</h2>\n<ul>\n<li>ç¼–è¯‘æ—¶å¼‚å¸¸/è¿è¡Œæ—¶å¼‚å¸¸</li>\n</ul>\n<p><strong>ç€é‡å¤„ç†è¿è¡Œæ—¶å¼‚å¸¸</strong></p>\n<h2 id=\"è¦å¤„ç†çš„å¼‚å¸¸\">è¦å¤„ç†çš„å¼‚å¸¸</h2>\n<ul>\n<li>jsè¿è¡Œæ—¶å¼‚å¸¸</li>\n<li>é™æ€èµ„æºåŠ è½½å¼‚å¸¸</li>\n<li>Promiseå¼‚å¸¸</li>\n<li>ajaxè¯·æ±‚å¼‚å¸¸</li>\n<li>å´©æºƒå’Œå¡é¡¿</li>\n</ul>\n<h2 id=\"æ•è·å¼‚å¸¸\">æ•è·å¼‚å¸¸</h2>\n<h3 id=\"æ™®é€šå‰ç«¯é¡¹ç›®\">æ™®é€šå‰ç«¯é¡¹ç›®</h3>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// monitor.ts</span>\n\ninterface <span class=\"hljs-title class_\">ConfigI</span> {\n  <span class=\"hljs-attr\">reportUrl</span>: string;\n}\n\ninterface <span class=\"hljs-title class_\">BaseinfoI</span> {\n  <span class=\"hljs-attr\">title</span>: string;\n  <span class=\"hljs-attr\">location</span>: string;\n  <span class=\"hljs-attr\">message</span>: string;\n  <span class=\"hljs-attr\">kind</span>: string;\n  <span class=\"hljs-attr\">type</span>: string;\n  <span class=\"hljs-attr\">errorType</span>: string;\n}\n\ninterface <span class=\"hljs-title class_\">JSRunTimeErrorEventI</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">BaseinfoI</span> {\n  <span class=\"hljs-attr\">filename</span>: string;\n  <span class=\"hljs-attr\">position</span>: string;\n  <span class=\"hljs-attr\">stack</span>: string;\n  <span class=\"hljs-attr\">selector</span>: string;\n}\n\ninterface <span class=\"hljs-title class_\">AssetsErrorI</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">BaseinfoI</span> {\n  <span class=\"hljs-attr\">url</span>: string;\n  <span class=\"hljs-attr\">nodeName</span>: string;\n}\n\ninterface <span class=\"hljs-title class_\">AjaxErrorEventI</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">BaseinfoI</span> {\n  <span class=\"hljs-attr\">response</span>: string;\n  <span class=\"hljs-attr\">status</span>: number;\n  <span class=\"hljs-attr\">method</span>: string;\n  <span class=\"hljs-attr\">url</span>: string;\n}\n\ninterface <span class=\"hljs-title class_\">PromiseErrorI</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">BaseinfoI</span> {\n  <span class=\"hljs-attr\">message</span>: string;\n  <span class=\"hljs-attr\">stack</span>: string;\n}\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-attr\">config</span>: <span class=\"hljs-title class_\">ConfigI</span> = { <span class=\"hljs-attr\">reportUrl</span>: <span class=\"hljs-string\">&#x27;/&#x27;</span> };\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getLastEvent</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-literal\">undefined</span> | <span class=\"hljs-title class_\">Event</span> {\n  <span class=\"hljs-keyword\">let</span> lastEvent;\n  [<span class=\"hljs-string\">&#x27;click&#x27;</span>, <span class=\"hljs-string\">&#x27;touchstart&#x27;</span>, <span class=\"hljs-string\">&#x27;mousedown&#x27;</span>, <span class=\"hljs-string\">&#x27;keydown&#x27;</span>, <span class=\"hljs-string\">&#x27;mouseover&#x27;</span>].<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">eventType</span>) =&gt;</span> <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">addEventListener</span>(eventType, <span class=\"hljs-function\">(<span class=\"hljs-params\">event</span>) =&gt;</span> {\n    lastEvent = event;\n  }, {\n    <span class=\"hljs-attr\">capture</span>: <span class=\"hljs-literal\">true</span>,\n    <span class=\"hljs-attr\">passive</span>: <span class=\"hljs-literal\">true</span>,\n  }));\n  <span class=\"hljs-keyword\">return</span> lastEvent;\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getSelector</span>(<span class=\"hljs-params\">path: <span class=\"hljs-built_in\">Array</span>&lt;EventTarget&gt;</span>) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&#x27;&#x27;</span>;\n}\n\n<span class=\"hljs-keyword\">function</span> report&lt;T&gt;(<span class=\"hljs-attr\">data</span>: { <span class=\"hljs-attr\">type</span>: <span class=\"hljs-string\">&#x27;JSRunTimeErrorI&#x27;</span> | <span class=\"hljs-string\">&#x27;PromiseErrorT&#x27;</span> | <span class=\"hljs-string\">&#x27;AssetsErrorI&#x27;</span> | <span class=\"hljs-string\">&#x27;AjaxErrorEventI&#x27;</span>; <span class=\"hljs-attr\">info</span>: T }) {\n  <span class=\"hljs-keyword\">const</span> image = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Image</span>();\n  image.<span class=\"hljs-property\">src</span> = <span class=\"hljs-string\">`<span class=\"hljs-subst\">${config.reportUrl}</span>?error=<span class=\"hljs-subst\">${<span class=\"hljs-built_in\">JSON</span>.stringify(data.info)}</span>`</span>;\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getCommonInfoFromEvent</span>(<span class=\"hljs-params\">event?: Event</span>) {\n  <span class=\"hljs-keyword\">return</span> {\n    <span class=\"hljs-attr\">title</span>: <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">title</span>.<span class=\"hljs-title function_\">replace</span>(<span class=\"hljs-regexp\">/&amp;/</span>, <span class=\"hljs-string\">&#x27;&#x27;</span>),\n    <span class=\"hljs-attr\">location</span>: <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">location</span>.<span class=\"hljs-property\">href</span>.<span class=\"hljs-title function_\">replace</span>(<span class=\"hljs-regexp\">/&amp;/</span>, <span class=\"hljs-string\">&#x27;&#x27;</span>),\n    <span class=\"hljs-attr\">kind</span>: <span class=\"hljs-string\">&#x27;stability&#x27;</span>,\n    <span class=\"hljs-attr\">type</span>: <span class=\"hljs-string\">&#x27;error&#x27;</span>,\n  };\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getLines</span>(<span class=\"hljs-params\">stack: string | <span class=\"hljs-literal\">undefined</span></span>) {\n  <span class=\"hljs-keyword\">return</span> stack?.<span class=\"hljs-title function_\">split</span>(<span class=\"hljs-string\">&#x27;\\n&#x27;</span>).<span class=\"hljs-title function_\">slice</span>(<span class=\"hljs-number\">1</span>).<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">item</span>) =&gt;</span> item.<span class=\"hljs-title function_\">replace</span>(<span class=\"hljs-regexp\">/^\\s+at\\s+/g</span>, <span class=\"hljs-string\">&#x27;&#x27;</span>)).<span class=\"hljs-title function_\">join</span>(<span class=\"hljs-string\">&#x27;&#x27;</span>) || <span class=\"hljs-string\">&#x27;&#x27;</span>;\n}\n\n<span class=\"hljs-comment\">// Promiseå¼‚å¸¸</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">promiseError</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&#x27;unhandledrejection&#x27;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">event: PromiseRejectionEvent</span>) =&gt;</span> {\n    event.<span class=\"hljs-title function_\">preventDefault</span>();\n    <span class=\"hljs-keyword\">let</span> message = <span class=\"hljs-string\">&#x27;&#x27;</span>;\n    <span class=\"hljs-keyword\">let</span> stack = <span class=\"hljs-string\">&#x27;&#x27;</span>;\n    message = event.<span class=\"hljs-property\">reason</span>;\n    <span class=\"hljs-keyword\">const</span> { reason } = event;\n    <span class=\"hljs-keyword\">if</span> (reason <span class=\"hljs-keyword\">instanceof</span> <span class=\"hljs-title class_\">Error</span>) {\n      message = reason.<span class=\"hljs-property\">message</span>;\n      stack = <span class=\"hljs-title function_\">getLines</span>(reason.<span class=\"hljs-property\">stack</span>);\n    }\n\n    report&lt;<span class=\"hljs-title class_\">PromiseErrorI</span>&gt;({ <span class=\"hljs-attr\">type</span>: <span class=\"hljs-string\">&#x27;PromiseErrorT&#x27;</span>, <span class=\"hljs-attr\">info</span>: { <span class=\"hljs-attr\">errorType</span>: event.<span class=\"hljs-property\">type</span>, message, stack, ...<span class=\"hljs-title function_\">getCommonInfoFromEvent</span>() } });\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n  }, <span class=\"hljs-literal\">true</span>);\n}\n\n<span class=\"hljs-comment\">// é™æ€èµ„æºåŠ è½½å¼‚å¸¸&amp;JSRuntimeå¼‚å¸¸</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">assetsError</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&#x27;error&#x27;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">event: ErrorEvent</span>) =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> { target } = event;\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(event);\n    <span class=\"hljs-keyword\">const</span> isElementTarget = target <span class=\"hljs-keyword\">instanceof</span> <span class=\"hljs-title class_\">HTMLScriptElement</span> || target <span class=\"hljs-keyword\">instanceof</span> <span class=\"hljs-title class_\">HTMLLinkElement</span> || target <span class=\"hljs-keyword\">instanceof</span> <span class=\"hljs-title class_\">HTMLImageElement</span>;\n    <span class=\"hljs-keyword\">if</span> (!isElementTarget) {\n      <span class=\"hljs-keyword\">const</span> { message, filename, lineno, colno, error, type } = event;\n      <span class=\"hljs-keyword\">const</span> position = <span class=\"hljs-string\">`<span class=\"hljs-subst\">${lineno}</span>:<span class=\"hljs-subst\">${colno}</span>`</span>;\n      <span class=\"hljs-keyword\">const</span> stack = <span class=\"hljs-title function_\">getLines</span>(error <span class=\"hljs-keyword\">instanceof</span> <span class=\"hljs-title class_\">Error</span> ? error.<span class=\"hljs-property\">stack</span> : <span class=\"hljs-string\">&#x27;&#x27;</span>);\n      <span class=\"hljs-keyword\">const</span> lastEvent = <span class=\"hljs-title function_\">getLastEvent</span>();\n      <span class=\"hljs-keyword\">const</span> selector = lastEvent ? <span class=\"hljs-title function_\">getSelector</span>(lastEvent.<span class=\"hljs-title function_\">composedPath</span>()) : <span class=\"hljs-string\">&#x27;&#x27;</span>;\n      report&lt;<span class=\"hljs-title class_\">JSRunTimeErrorEventI</span>&gt;({\n        <span class=\"hljs-attr\">type</span>: <span class=\"hljs-string\">&#x27;JSRunTimeErrorI&#x27;</span>,\n        <span class=\"hljs-attr\">info</span>: { ...<span class=\"hljs-title function_\">getCommonInfoFromEvent</span>(), message, <span class=\"hljs-attr\">errorType</span>: type, filename, position, stack, selector },\n      });\n    } <span class=\"hljs-keyword\">else</span> {\n      <span class=\"hljs-keyword\">let</span> url = <span class=\"hljs-string\">&#x27;&#x27;</span>;\n      <span class=\"hljs-keyword\">let</span> nodeName = <span class=\"hljs-string\">&#x27;&#x27;</span>;\n      <span class=\"hljs-keyword\">if</span> (target <span class=\"hljs-keyword\">instanceof</span> <span class=\"hljs-title class_\">HTMLImageElement</span> || target <span class=\"hljs-keyword\">instanceof</span> <span class=\"hljs-title class_\">HTMLScriptElement</span>) {\n        url = target.<span class=\"hljs-property\">src</span>;\n        nodeName = target.<span class=\"hljs-property\">nodeName</span>;\n      }\n      <span class=\"hljs-keyword\">if</span> (target <span class=\"hljs-keyword\">instanceof</span> <span class=\"hljs-title class_\">HTMLLinkElement</span>) {\n        url = target.<span class=\"hljs-property\">href</span>;\n        nodeName = target.<span class=\"hljs-property\">nodeName</span>;\n      }\n\n      report&lt;<span class=\"hljs-title class_\">AssetsErrorI</span>&gt;({ <span class=\"hljs-attr\">type</span>: <span class=\"hljs-string\">&#x27;AssetsErrorI&#x27;</span>,\n        <span class=\"hljs-attr\">info</span>: {\n          url,\n          <span class=\"hljs-attr\">errorType</span>: event.<span class=\"hljs-property\">type</span>,\n          nodeName,\n          <span class=\"hljs-attr\">message</span>: <span class=\"hljs-string\">&#x27;&#x27;</span>,\n          ...<span class=\"hljs-title function_\">getCommonInfoFromEvent</span>() } });\n    }\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n  }, <span class=\"hljs-literal\">true</span>);\n}\n\n<span class=\"hljs-comment\">// ajaxè¯·æ±‚å¼‚å¸¸</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">ajaxError</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">const</span> { protocol } = <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">location</span>;\n  <span class=\"hljs-keyword\">if</span> (protocol === <span class=\"hljs-string\">&#x27;file:&#x27;</span>) <span class=\"hljs-keyword\">return</span>;\n  <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">XMLHttpRequest</span>) <span class=\"hljs-keyword\">return</span>;\n  <span class=\"hljs-keyword\">const</span> xmlReq = <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">XMLHttpRequest</span>;\n  <span class=\"hljs-keyword\">const</span> oldSend = xmlReq.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">send</span>;\n  <span class=\"hljs-keyword\">const</span> oldOpen = xmlReq.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">open</span>;\n  <span class=\"hljs-keyword\">const</span> oldArgs = { <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">&#x27;&#x27;</span>, <span class=\"hljs-attr\">url</span>: <span class=\"hljs-string\">&#x27;&#x27;</span> };\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">handleEvent</span>(<span class=\"hljs-params\">event: any</span>) {\n    <span class=\"hljs-keyword\">try</span> {\n      <span class=\"hljs-keyword\">if</span> (event &amp;&amp; event.<span class=\"hljs-property\">currentTarget</span> &amp;&amp; event.<span class=\"hljs-property\">currentTarget</span>.<span class=\"hljs-property\">status</span> !== <span class=\"hljs-number\">200</span>) {\n        <span class=\"hljs-keyword\">const</span> { response, status, statusText } = event.<span class=\"hljs-property\">currentTarget</span>;\n        <span class=\"hljs-keyword\">const</span> { method, url } = oldArgs;\n        <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(event);\n\n        report&lt;<span class=\"hljs-title class_\">AjaxErrorEventI</span>&gt;({\n          <span class=\"hljs-attr\">type</span>: <span class=\"hljs-string\">&#x27;AjaxErrorEventI&#x27;</span>,\n          <span class=\"hljs-attr\">info</span>: {\n            <span class=\"hljs-attr\">response</span>: <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">parse</span>(response),\n            status,\n            method,\n            url,\n            <span class=\"hljs-attr\">message</span>: statusText,\n            <span class=\"hljs-attr\">errorType</span>: event.<span class=\"hljs-property\">type</span>,\n            ...<span class=\"hljs-title function_\">getCommonInfoFromEvent</span>(),\n          },\n        });\n      }\n    } <span class=\"hljs-keyword\">catch</span> (e) {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">`Tool&#x27;s error: <span class=\"hljs-subst\">${e}</span>`</span>);\n    }\n  }\n  xmlReq.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">send</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">...args</span>) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&#x27;error&#x27;</span>, handleEvent);\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&#x27;load&#x27;</span>, handleEvent);\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&#x27;abort&#x27;</span>, handleEvent);\n    <span class=\"hljs-keyword\">return</span> oldSend.<span class=\"hljs-title function_\">apply</span>(<span class=\"hljs-variable language_\">this</span>, args);\n  };\n  xmlReq.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">open</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">...args: any</span>) {\n    <span class=\"hljs-keyword\">const</span> [method, url] = args;\n    <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">assign</span>(oldArgs, { method, url });\n    oldOpen.<span class=\"hljs-title function_\">apply</span>(<span class=\"hljs-variable language_\">this</span>, args);\n  };\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">init</span>(<span class=\"hljs-params\">_config: ConfigI</span>) {\n  <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">assign</span>(config, _config);\n  <span class=\"hljs-title function_\">promiseError</span>();\n  <span class=\"hljs-title function_\">assetsError</span>();\n  <span class=\"hljs-title function_\">ajaxError</span>();\n}\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> init;\n</code></pre>\n<h3 id=\"åŸºäºvuejsçš„é¡¹ç›®\">åŸºäºVue.jsçš„é¡¹ç›®</h3>\n<p>é’ˆå¯¹äºVue.jsé¡¹ç›®ï¼Œè™½ç„¶å®˜æ–¹æä¾›æœ‰<code>Vue.config.errorHandler</code>æ¥æ‹¦æˆªå†…éƒ¨é”™è¯¯(ç”Ÿå‘½å‘¨æœŸã€äº‹ä»¶ç»‘å®šç­‰)ã€‚ä½†å¤„ç†èƒ½åŠ›æœ‰é™ï¼Œæ— æ³•å¤„ç†jsè¿è¡Œæ—¶å¼‚æ­¥å¼‚å¸¸(å¦‚setTimeout)å’Œèµ„æºåŠ è½½å¼‚å¸¸ç­‰ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨<code>mointor.js</code> + <code>Vue.config.errorHandler</code>æ¥å…±åŒå¤„ç†</p>\n<h3 id=\"åŸºäºreactjsçš„é¡¹ç›®\">åŸºäºReact.jsçš„é¡¹ç›®</h3>\n<ol>\n<li><p>å¼•å…¥<code>monitor.ts</code></p>\n</li>\n<li><p>æ·»åŠ <code>MErrorBoundary</code>ç»„ä»¶ç”¨æˆ·å‡ºç°å¼‚å¸¸åä¼˜é›…é™çº§æ˜¾ç¤ºå’Œæ”¶é›†å‡ºé”™ç»„ä»¶</p>\n</li>\n</ol>\n<pre><code class=\"hljs language-tsx\"><span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">React</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;react&#x27;</span>;\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MErrorBoundary</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">React.Component</span>&lt;<span class=\"hljs-built_in\">any</span>, <span class=\"hljs-built_in\">any</span>&gt; {\n  <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\">props: <span class=\"hljs-built_in\">any</span></span>) {\n    <span class=\"hljs-variable language_\">super</span>(props);\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">state</span> = { <span class=\"hljs-attr\">hasError</span>: <span class=\"hljs-literal\">false</span> };\n  }\n\n  <span class=\"hljs-keyword\">static</span> <span class=\"hljs-title function_\">getDerivedStateFromError</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;MErrorBoundary&#x27;</span>);\n    <span class=\"hljs-keyword\">return</span> { <span class=\"hljs-attr\">hasError</span>: <span class=\"hljs-literal\">true</span> };\n  }\n\n  <span class=\"hljs-title function_\">componentDidCatch</span>(<span class=\"hljs-params\">error: <span class=\"hljs-built_in\">any</span>, errorInfo: <span class=\"hljs-built_in\">any</span></span>) {\n    <span class=\"hljs-comment\">// logErrorToMyService(error, errorInfo);</span>\n  }\n\n  <span class=\"hljs-title function_\">render</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">state</span>.<span class=\"hljs-property\">hasError</span>) {\n      <span class=\"hljs-keyword\">return</span> (\n        <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span>&gt;</span>Something went wrong.<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n      );\n    }\n\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">props</span>.<span class=\"hljs-property\">children</span>;\n  }\n}\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-title class_\">MErrorBoundary</span>;\n</code></pre>\n<h2 id=\"ç™½å±å’Œå¡é¡¿\">ç™½å±å’Œå¡é¡¿</h2>\n<p>// todo</p>\n"},{"title":"å‰ç«¯æ¶æ„&è½¯å®åŠ›-å‘å¸ƒè‡ªå·±çš„npmåŒ…","tags":["npm"],"categories":"å‰ç«¯æ¶æ„&è½¯å®åŠ›","description":"# å‘å¸ƒå‰å‡†å¤‡\n\n- å®‰è£…npm\n\n- æ³¨å†Œnpmè´¦å·\n\n- package.jsonç›¸å…³é…ç½®\n\n```json\n{\n    \"name\": \"@mrrs878/blog\",\n    \"version\": \"0.0.1\",\n    \"private\": false,\n    \"repository\": \"https://github.com/mrrs878/blog\"\n}\n```\n\n- æ›´æ”¹ä»“","createDate":"2020-08-23 22:24:12","updateDate":"2021-02-20 17:13:58","body":"<h1 id=\"å‘å¸ƒå‰å‡†å¤‡\">å‘å¸ƒå‰å‡†å¤‡</h1>\n<ul>\n<li><p>å®‰è£…npm</p>\n</li>\n<li><p>æ³¨å†Œnpmè´¦å·</p>\n</li>\n<li><p>package.jsonç›¸å…³é…ç½®</p>\n</li>\n</ul>\n<pre><code class=\"hljs language-json\"><span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;@mrrs878/blog&quot;</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;version&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;0.0.1&quot;</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;private&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-keyword\">false</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;repository&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;https://github.com/mrrs878/blog&quot;</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n<ul>\n<li>æ›´æ”¹ä»“åº“åœ°å€(ä¹‹å‰æ›´æ”¹è¿‡ä¸ºæ·˜å®é•œåƒ)</li>\n</ul>\n<pre><code class=\"hljs language-shell\"><span class=\"hljs-meta\"># </span><span class=\"language-bash\">æŸ¥çœ‹</span>\nnpm config get registry\n<span class=\"hljs-meta\">\n# </span><span class=\"language-bash\">è®¾ç½®</span>\nnpm config set registry https://registry.npmjs.org\n</code></pre>\n<h1 id=\"å‘å¸ƒ\">å‘å¸ƒ</h1>\n<pre><code class=\"hljs language-shell\">\nnpm login\n\nnpm publish --access publish\n</code></pre>\n<p>å¯èƒ½é‡åˆ°çš„é”™è¯¯ï¼š</p>\n<pre><code class=\"hljs language-shell\">npm ERR! path c:\\Temp\\npm-20936-b98f84c8\\tmp\\fromDir-02dd5394\\package.tgz\nnpm ERR! code EPERM\nnpm ERR! errno -4048\nnpm ERR! syscall unlink\nnpm ERR! Error: EPERM: operation not permitted, unlink &#x27;c:\\Temp\\npm-20936-b98f84c8\\tmp\\fromDir-02dd5394\\package.tgz&#x27;\nnpm ERR!     at Error (native)\nnpm ERR!  { Error: EPERM: operation not permitted, unlink &#x27;c:\\Temp\\npm-20936-b98f84c8\\tmp\\fromDir-02dd5394\\package.tgz&#x27;\nnpm ERR!     at Error (native)\nnpm ERR!   cause:\nnpm ERR!    { Error: EPERM: operation not permitted, unlink &#x27;c:\\Temp\\npm-20936-b98f84c8\\tmp\\fromDir-02dd5394\\package.tgz&#x27;\nnpm ERR!        at Error (native)\nnpm ERR!      errno: -4048,\nnpm ERR!      code: &#x27;EPERM&#x27;,\nnpm ERR!      syscall: &#x27;unlink&#x27;,\nnpm ERR!      path: &#x27;c:\\\\Temp\\\\npm-20936-b98f84c8\\\\tmp\\\\fromDir-02dd5394\\\\package.tgz&#x27; },\nnpm ERR!   isOperational: true,\nnpm ERR!   stack: &#x27;Error: EPERM: operation not permitted, unlink \\&#x27;c:\\\\Temp\\\\npm-20936-b98f84c8\\\\tmp\\\\fromDir-02dd5394\\\\package.tgz\\&#x27;\\n    at Error (native)&#x27;,\nnpm ERR!   errno: -4048,\nnpm ERR!   code: &#x27;EPERM&#x27;,\nnpm ERR!   syscall: &#x27;unlink&#x27;,\nnpm ERR!   path: &#x27;c:\\\\Temp\\\\npm-20936-b98f84c8\\\\tmp\\\\fromDir-02dd5394\\\\package.tgz&#x27; }\nnpm ERR!\nnpm ERR! Please try running this command again as root/Administrator.\n</code></pre>\n<p>æˆ–ï¼š</p>\n<p><img src=\"https://img-blog.csdn.net/20180112190805599?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY3ZwZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"npmæŠ¥é”™\"></p>\n<p><strong>é‡æ–°ç™»å½•npm</strong></p>\n<h1 id=\"æ›´æ–°\">æ›´æ–°</h1>\n<p>æ›´æ”¹<code>package.json</code>ä¸­çš„<code>version</code>ï¼Œé‡æ–°è¿è¡Œ<code>npm publish --access public</code></p>\n"},{"title":"JavaScript-æ‰§è¡Œæœºåˆ¶","tags":["JavaScript","æ‰§è¡Œæœºåˆ¶","EventLoop"],"categories":"JavaScript","description":"# **JavaScript æ‰§è¡Œä¸è¿è¡Œ**\n\næ‰§è¡Œå’Œè¿è¡Œä¸å¤ªç›¸åŒï¼Œåœ¨ä¸åŒç¯å¢ƒä¸‹ï¼Œæ¯”å¦‚ Nodeã€æµè§ˆå™¨ä¸‹ï¼ŒJavaScript çš„æ‰§è¡Œç»“æœæ˜¯ä¸ä¸€æ ·çš„ï¼›è€Œè¿è¡Œå¤§å¤šæŒ‡çš„æ˜¯åŸºäº JavaScript å¼•æ“ï¼Œå¦‚ V8ï¼Œç»“æœæ˜¯ä¸€è‡´çš„\n\n# **å…³äº JavaScript**\n\nä¼—æ‰€å‘¨çŸ¥ï¼ŒJavaScript æ˜¯ä¸€é—¨**å•çº¿ç¨‹**ã€**å¼‚æ­¥æ‰§è¡Œ**çš„è¯­è¨€ï¼Œè™½ç„¶åœ¨ HTML5 ä¸­æå‡ºäº† **web wor","createDate":"2019-06-30 11:15:28","updateDate":"2021-02-05 10:30:04","body":"<h1 id=\"javascript-æ‰§è¡Œä¸è¿è¡Œ\"><strong>JavaScript æ‰§è¡Œä¸è¿è¡Œ</strong></h1>\n<p>æ‰§è¡Œå’Œè¿è¡Œä¸å¤ªç›¸åŒï¼Œåœ¨ä¸åŒç¯å¢ƒä¸‹ï¼Œæ¯”å¦‚ Nodeã€æµè§ˆå™¨ä¸‹ï¼ŒJavaScript çš„æ‰§è¡Œç»“æœæ˜¯ä¸ä¸€æ ·çš„ï¼›è€Œè¿è¡Œå¤§å¤šæŒ‡çš„æ˜¯åŸºäº JavaScript å¼•æ“ï¼Œå¦‚ V8ï¼Œç»“æœæ˜¯ä¸€è‡´çš„</p>\n<h1 id=\"å…³äº-javascript\"><strong>å…³äº JavaScript</strong></h1>\n<p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒJavaScript æ˜¯ä¸€é—¨<strong>å•çº¿ç¨‹</strong>ã€<strong>å¼‚æ­¥æ‰§è¡Œ</strong>çš„è¯­è¨€ï¼Œè™½ç„¶åœ¨ HTML5 ä¸­æå‡ºäº† <strong>web workers</strong>(å¯ä»¥ç†è§£ä¸º<strong>æµè§ˆå™¨</strong>ä¸º JavaScript å¼€çš„â€œå¤–æŒ‚â€ï¼Œä¸‹ä¸€ç¯‡ä¼šè°ˆ)ï¼Œä½† JavaScript æ˜¯å•çº¿ç¨‹è¿è¡Œçš„è¿™ä¸€æ ¸å¿ƒä»æœªæ”¹å˜ï¼Œæ‰€æœ‰<strong>å¤šçº¿ç¨‹</strong>éƒ½æ˜¯é€šè¿‡å•çº¿ç¨‹æ¨¡æ‹Ÿå‡ºæ¥çš„ï¼Œéƒ½æ˜¯â€œçº¸è€è™â€</p>\n<h1 id=\"javascript-ä¸­çš„å¼‚æ­¥--event-loop\">JavaScript ä¸­çš„å¼‚æ­¥--event loop</h1>\n<p>JavaScript ä¸­çš„å¼‚æ­¥ä¸»è¦é€šè¿‡ event loop è¿›è¡Œæ¨¡æ‹Ÿï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯ event loop å‘¢ï¼Ÿå½“æˆ‘ä»¬æ‰§è¡Œ JS ä»£ç çš„æ—¶å€™å…¶å®å°±æ˜¯å¾€æ‰§è¡Œæ ˆä¸­æ”¾å…¥å‡½æ•°ï¼Œé‚£ä¹ˆé‡åˆ°å¼‚æ­¥ä»£ç çš„æ—¶å€™è¯¥æ€ä¹ˆåŠï¼Ÿå…¶å®å½“é‡åˆ°å¼‚æ­¥çš„ä»£ç æ—¶ï¼Œä¼šè¢«æŒ‚èµ·å¹¶åœ¨éœ€è¦æ‰§è¡Œçš„æ—¶å€™åŠ å…¥åˆ° Taskï¼ˆæœ‰å¤šç§ Taskï¼‰ é˜Ÿåˆ—ä¸­ã€‚ä¸€æ—¦æ‰§è¡Œæ ˆä¸ºç©ºï¼ŒEvent Loop å°±ä¼šä» Task é˜Ÿåˆ—ä¸­æ‹¿å‡ºéœ€è¦æ‰§è¡Œçš„ä»£ç å¹¶æ”¾å…¥æ‰§è¡Œæ ˆä¸­æ‰§è¡Œï¼Œæ‰€ä»¥æœ¬è´¨ä¸Šæ¥è¯´ JS ä¸­çš„å¼‚æ­¥è¿˜æ˜¯åŒæ­¥è¡Œä¸ºã€‚</p>\n<h2 id=\"æµè§ˆå™¨ä¸­çš„-event-loop\">æµè§ˆå™¨ä¸­çš„ event loop</h2>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/browser_event_loop.png\" alt=\"æµè§ˆå™¨ä¸­çš„event loop\"></p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/browser_event_loop2.png\" alt=\"æµè§ˆå™¨ä¸­çš„event loop\">\nä¸åŒçš„ä»»åŠ¡æºä¼šè¢«åˆ†é…åˆ°ä¸åŒçš„ Task é˜Ÿåˆ—ä¸­ï¼Œä»»åŠ¡æºå¯ä»¥åˆ†ä¸º å¾®ä»»åŠ¡ï¼ˆmicrotaskï¼‰ å’Œ å®ä»»åŠ¡ï¼ˆmacrotaskï¼‰ã€‚åœ¨ ES6 è§„èŒƒä¸­ï¼Œmicrotask ç§°ä¸º jobsï¼Œmacrotask ç§°ä¸º taskã€‚\nå¾®ä»»åŠ¡åŒ…æ‹¬ process.nextTick ï¼Œpromise ï¼ŒMutationObserverã€‚\nå®ä»»åŠ¡åŒ…æ‹¬ script ï¼ŒsetTimeout ï¼ŒsetInterval ï¼ŒsetImmediate ï¼ŒI/O ï¼ŒUI renderingã€‚</p>\n<p><strong>å®ä»»åŠ¡ä¸­åŒ…æ‹¬äº† script ï¼Œæµè§ˆå™¨ä¼šå…ˆæ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼Œæ¥ä¸‹æ¥æœ‰å¼‚æ­¥ä»£ç çš„è¯æ‰ä¼šå…ˆæ‰§è¡Œå¾®ä»»åŠ¡ã€‚</strong></p>\n<p>Event Loop æ‰§è¡Œé¡ºåºå¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<ul>\n<li>é¦–å…ˆæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œè¿™å±äºå®ä»»åŠ¡</li>\n<li>å½“æ‰§è¡Œå®Œæ‰€æœ‰åŒæ­¥ä»£ç åï¼Œæ‰§è¡Œæ ˆä¸ºç©ºï¼ŒæŸ¥è¯¢æ˜¯å¦æœ‰å¼‚æ­¥ä»£ç éœ€è¦æ‰§è¡Œ</li>\n<li>æ‰§è¡Œæ‰€æœ‰å¾®ä»»åŠ¡</li>\n<li>å½“æ‰§è¡Œå®Œæ‰€æœ‰å¾®ä»»åŠ¡åï¼Œå¦‚æœ‰å¿…è¦ä¼šæ¸²æŸ“é¡µé¢</li>\n<li>ç„¶åå¼€å§‹ä¸‹ä¸€è½® Event Loopï¼Œæ‰§è¡Œå®ä»»åŠ¡ä¸­çš„å¼‚æ­¥ä»£ç ï¼Œä¹Ÿå°±æ˜¯ setTimeout(å®ä»»åŠ¡) ä¸­çš„å›è°ƒå‡½æ•°</li>\n</ul>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-number\">1</span>);\n<span class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-number\">2</span>);\n  <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">resolve</span>().<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-number\">3</span>);\n  });\n});\n<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve, reject</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-number\">4</span>);\n  <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">5</span>);\n}).<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">data</span> =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(data);\n});\n<span class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-number\">6</span>);\n});\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-number\">7</span>);\n\n<span class=\"hljs-comment\">// æ‰§è¡Œç»“æœï¼š1 4 7 5 2 3 6</span>\n</code></pre>\n<h2 id=\"nodejs-ä¸­çš„-event-loop\">Node.js ä¸­çš„ event loop</h2>\n<p>Node çš„ Event Loop åˆ†ä¸º 6 ä¸ªé˜¶æ®µï¼Œå®ƒä»¬ä¼šæŒ‰ç…§é¡ºåºåå¤è¿è¡Œã€‚æ¯å½“è¿›å…¥æŸä¸€ä¸ªé˜¶æ®µçš„æ—¶å€™ï¼Œéƒ½ä¼šä»å¯¹åº”çš„å›è°ƒé˜Ÿåˆ—ä¸­å–å‡ºå‡½æ•°å»æ‰§è¡Œã€‚å½“<strong>é˜Ÿåˆ—ä¸ºç©º</strong>æˆ–è€…<strong>æ‰§è¡Œçš„å›è°ƒå‡½æ•°æ•°é‡åˆ°è¾¾ç³»ç»Ÿè®¾å®šçš„é˜ˆå€¼</strong>ï¼Œå°±ä¼šè¿›å…¥ä¸‹ä¸€é˜¶æ®µã€‚\n<img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/node_event_loop.png\" alt=\"Node.jsä¸­çš„event loop\"></p>\n<ul>\n<li>timer\ntimers é˜¶æ®µä¼šæ‰§è¡Œ setTimeout å’Œ setInterval å›è°ƒï¼Œå¹¶ä¸”æ˜¯ç”± <strong>poll</strong> é˜¶æ®µæ§åˆ¶çš„ã€‚\nåŒæ ·ï¼Œåœ¨ Node ä¸­å®šæ—¶å™¨æŒ‡å®šçš„æ—¶é—´ä¹Ÿä¸æ˜¯å‡†ç¡®æ—¶é—´ï¼Œåªèƒ½æ˜¯å°½å¿«æ‰§è¡Œã€‚</li>\n<li>I/O\nI/O é˜¶æ®µä¼šå¤„ç†ä¸€äº›ä¸Šä¸€è½®å¾ªç¯ä¸­çš„å°‘æ•°æœªæ‰§è¡Œçš„ I/O å›è°ƒ</li>\n<li>idle, prepare\nidle, prepare é˜¶æ®µå†…éƒ¨å®ç°ï¼Œè¿™é‡Œå°±å¿½ç•¥ä¸è®²äº†ã€‚</li>\n<li>poll\npoll æ˜¯ä¸€ä¸ªè‡³å…³é‡è¦çš„é˜¶æ®µï¼Œè¿™ä¸€é˜¶æ®µä¸­ï¼Œç³»ç»Ÿä¼šåšä¸¤ä»¶äº‹æƒ…<ul>\n<li>å›åˆ° timer é˜¶æ®µæ‰§è¡Œå›è°ƒ</li>\n<li>æ‰§è¡Œ I/O å›è°ƒ\nå¹¶ä¸”åœ¨è¿›å…¥è¯¥é˜¶æ®µæ—¶å¦‚æœæ²¡æœ‰è®¾å®šäº† timer çš„è¯ï¼Œä¼šå‘ç”Ÿä»¥ä¸‹ä¸¤ä»¶äº‹æƒ…</li>\n<li>å¦‚æœ poll é˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œä¼šéå†å›è°ƒé˜Ÿåˆ—å¹¶åŒæ­¥æ‰§è¡Œï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºæˆ–è€…è¾¾åˆ°ç³»ç»Ÿé™åˆ¶</li>\n<li>å¦‚æœ poll é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œä¼šæœ‰ä¸¤ä»¶äº‹å‘ç”Ÿ<ul>\n<li>å¦‚æœæœ‰ setImmediate å›è°ƒéœ€è¦æ‰§è¡Œï¼Œpoll é˜¶æ®µä¼šåœæ­¢å¹¶ä¸”è¿›å…¥åˆ° check é˜¶æ®µæ‰§è¡Œå›è°ƒ</li>\n<li>å¦‚æœæ²¡æœ‰ setImmediate å›è°ƒéœ€è¦æ‰§è¡Œï¼Œä¼šç­‰å¾…å›è°ƒè¢«åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­å¹¶ç«‹å³æ‰§è¡Œå›è°ƒï¼Œè¿™é‡ŒåŒæ ·ä¼šæœ‰ä¸ªè¶…æ—¶æ—¶é—´è®¾ç½®é˜²æ­¢ä¸€ç›´ç­‰å¾…ä¸‹å»\nå½“ç„¶è®¾å®šäº† timer çš„è¯ä¸” poll é˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™ä¼šåˆ¤æ–­æ˜¯å¦æœ‰ timer è¶…æ—¶ï¼Œå¦‚æœæœ‰çš„è¯ä¼šå›åˆ° timer é˜¶æ®µæ‰§è¡Œå›è°ƒã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>check\ncheck é˜¶æ®µæ‰§è¡Œ setImmediate</li>\n<li>close callbacks\nclose callbacks é˜¶æ®µæ‰§è¡Œ close äº‹ä»¶\nå¯¹äº microtask æ¥è¯´ï¼Œå®ƒä¼šåœ¨ä»¥ä¸Šæ¯ä¸ªé˜¶æ®µå®Œæˆå‰æ¸…ç©º microtask é˜Ÿåˆ—ï¼Œä¸‹å›¾ä¸­çš„ Tick å°±ä»£è¡¨äº† microtask\n<img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/node_event_loop2.png\" alt=\"Nodeä¸­çš„event loop\"></li>\n</ul>\n"},{"title":"webpackå­¦ä¹ -2","tags":["webpackä¼˜åŒ–"],"categories":"webpack","description":"# ä¼˜åŒ–\n\n## æå–å…¬å…±çš„jsæ–‡ä»¶-splitChunks.cacheGroups.commons\n\n```js\nconst path = require(\"path\")\n\nmodule.exports = {\n    entry: \"./src/app.js\",\n    output: {\n        path: path.resolve(__dirname, \"dist\"),","createDate":"2020-04-14 23:04:37","updateDate":"2021-01-19 09:48:05","body":"<h1 id=\"ä¼˜åŒ–\">ä¼˜åŒ–</h1>\n<h2 id=\"æå–å…¬å…±çš„jsæ–‡ä»¶-splitchunkscachegroupscommons\">æå–å…¬å…±çš„jsæ–‡ä»¶-splitChunks.cacheGroups.commons</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> path = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;path&quot;</span>)\n\n<span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {\n    <span class=\"hljs-attr\">entry</span>: <span class=\"hljs-string\">&quot;./src/app.js&quot;</span>,\n    <span class=\"hljs-attr\">output</span>: {\n        <span class=\"hljs-attr\">path</span>: path.<span class=\"hljs-title function_\">resolve</span>(__dirname, <span class=\"hljs-string\">&quot;dist&quot;</span>),\n        <span class=\"hljs-attr\">filname</span>: <span class=\"hljs-string\">&quot;bundle.[hash:6].js&quot;</span>\n    },\n    <span class=\"hljs-attr\">optimization</span>: {\n        <span class=\"hljs-attr\">splitChunks</span>: {\n            <span class=\"hljs-attr\">cacheGroups</span>: {\n                <span class=\"hljs-attr\">commons</span>: {\n                    <span class=\"hljs-attr\">chunks</span>: <span class=\"hljs-string\">&quot;initial&quot;</span>,\n                    <span class=\"hljs-attr\">minChunks</span>: <span class=\"hljs-number\">2</span>,\n                    <span class=\"hljs-attr\">maxInitialRequests</span>: <span class=\"hljs-number\">5</span>,\n                    <span class=\"hljs-attr\">minSize</span>: <span class=\"hljs-number\">2</span>,\n                    <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;common.[hash:6]&quot;</span>\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<h2 id=\"å‹ç¼©å›¾ç‰‡-image-webpack-loader\">å‹ç¼©å›¾ç‰‡-image-webpack-loader</h2>\n<p><a href=\"https://www.webpackjs.com/loaders/url-loader/\">url-loader</a>æ¥å¤„ç†å›¾ç‰‡æ–‡ä»¶è§£æï¼Œå¯ä»¥å†ä½¿ç”¨ <a href=\"https://github.com/tcoopman/image-webpack-loader\">image-webpack-loader</a>æ¥å‹ç¼©å›¾ç‰‡</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> path = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;path&quot;</span>)\n\n<span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {\n    <span class=\"hljs-attr\">enter</span>: <span class=\"hljs-string\">&quot;./src/app.js&quot;</span>,\n    <span class=\"hljs-attr\">output</span>: {\n        <span class=\"hljs-attr\">path</span>: path.<span class=\"hljs-title function_\">resolve</span>(__dirname, <span class=\"hljs-string\">&quot;dist&quot;</span>),\n        <span class=\"hljs-attr\">filename</span>: <span class=\"hljs-string\">&quot;bundle.[hash:6].js&quot;</span>\n    },\n    <span class=\"hljs-attr\">modules</span>: {\n        <span class=\"hljs-attr\">rules</span>: [\n            {\n                <span class=\"hljs-attr\">test</span>: <span class=\"hljs-regexp\">/\\.*\\.(gif|png|jpe?g|svg|webp)$/i</span>,\n                <span class=\"hljs-attr\">use</span>: [\n                    {\n                        <span class=\"hljs-attr\">laoder</span>: <span class=\"hljs-string\">&quot;url-loader&quot;</span>,\n                        <span class=\"hljs-attr\">options</span>: {\n                            <span class=\"hljs-attr\">limit</span>: <span class=\"hljs-number\">8192</span>\n                        }\n                    }\n                    {\n                        <span class=\"hljs-attr\">laoder</span>: <span class=\"hljs-string\">&quot;image-webpack-loader&quot;</span>,\n                        <span class=\"hljs-attr\">options</span>: {\n                            <span class=\"hljs-attr\">mozjpeg</span>: {\n                                <span class=\"hljs-attr\">progress</span>: <span class=\"hljs-literal\">true</span>,\n                                <span class=\"hljs-attr\">quality</span>: <span class=\"hljs-number\">65</span>\n                            },\n                            <span class=\"hljs-attr\">optipng</span>: {\n                                <span class=\"hljs-attr\">enable</span>: <span class=\"hljs-literal\">false</span>\n                            },\n                            <span class=\"hljs-attr\">pngquant</span>: {\n                                <span class=\"hljs-attr\">quality</span>: <span class=\"hljs-string\">&#x27;65-90&#x27;</span>,\n                                <span class=\"hljs-attr\">speed</span>: <span class=\"hljs-number\">4</span>\n                            },\n                            <span class=\"hljs-attr\">gifsicle</span>: {\n                                <span class=\"hljs-attr\">interlaced</span>: <span class=\"hljs-literal\">false</span>\n                            },\n                            <span class=\"hljs-attr\">webp</span>: { <span class=\"hljs-comment\">// å¼€å¯webpä¼šæŠŠjpgã€pngå‹ç¼©ä¸ºwebpæ ¼å¼</span>\n                                <span class=\"hljs-attr\">quality</span>: <span class=\"hljs-number\">65</span>\n                            }\n                        }\n                    }\n                ]\n            }\n        ]\n    }\n}\n</code></pre>\n<h2 id=\"å¤šçº¿ç¨‹æ‰“åŒ…-happypack\">å¤šçº¿ç¨‹æ‰“åŒ…-happypack</h2>\n<p>åœ¨webpackè¿è¡Œåœ¨nodeä¸­æ‰“åŒ…æ—¶æ˜¯å•çº¿ç¨‹å»ä¸€ä»¶ä¸€ä»¶äº‹æƒ…åšï¼Œ<a href=\"https://github.com/amireh/happypack#readme\">happypack</a>å¯ä»¥å¼€å¯å¤šä¸ªå­è¿›ç¨‹å»å¹¶å‘æ‰§è¡Œï¼Œå­è¿›ç¨‹å¤„ç†å®Œæˆä¹‹åæŠŠç»“æœäº¤ç»™ä¸»è¿›ç¨‹</p>\n<pre><code class=\"hljs language-js\">yarn add happypack -D\n\n<span class=\"hljs-keyword\">const</span> path = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;path&quot;</span>)\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title class_\">HappyPack</span> = <span class=\"hljs-title function_\">reruire</span>(<span class=\"hljs-string\">&quot;happypack&quot;</span>)\n\n<span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {\n    <span class=\"hljs-attr\">entry</span>: <span class=\"hljs-string\">&quot;./src/app.js&quot;</span>,\n    <span class=\"hljs-attr\">output</span>: {\n        <span class=\"hljs-attr\">path</span>: path.<span class=\"hljs-title function_\">reaolve</span>(__dirname, <span class=\"hljs-string\">&quot;dist&quot;</span>),\n        <span class=\"hljs-attr\">filename</span>: <span class=\"hljs-string\">&quot;bundle_[hash:6].js&quot;</span>\n    },\n    <span class=\"hljs-attr\">module</span>: {\n        <span class=\"hljs-attr\">rules</span>: [\n            {\n                <span class=\"hljs-attr\">text</span>: <span class=\"hljs-regexp\">/\\.jsx?$/</span>,\n                <span class=\"hljs-attr\">exclude</span>: <span class=\"hljs-regexp\">/node_modules/</span>,\n                <span class=\"hljs-attr\">use</span>: <span class=\"hljs-string\">&quot;happypack/loader?id=babel&quot;</span>\n            }\n        ]\n    },\n    <span class=\"hljs-attr\">plugins</span>: [\n        <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">HappyPack</span>({\n            <span class=\"hljs-attr\">id</span>: <span class=\"hljs-string\">&quot;babel&quot;</span>,\n            <span class=\"hljs-attr\">threads</span>: <span class=\"hljs-number\">4</span>,\n            <span class=\"hljs-attr\">loaders</span>: [<span class=\"hljs-string\">&quot;babel-loader&quot;</span>]\n        })\n    ]\n}\n</code></pre>\n<h2 id=\"ä½œç”¨åŸŸæå‡-moduleconcatenationplugin\">ä½œç”¨åŸŸæå‡-ModuleConcatenationPlugin</h2>\n<p>å¦‚æœé¡¹ç›®é‡Œä½¿ç”¨çš„æ˜¯ES6çš„è¯­æ³•ï¼Œå¹¶ä¸”webpack3+ï¼Œé‚£ä¹ˆå»ºè®®å¯ç”¨è¿™ä¸€æ’ä»¶ï¼ŒæŠŠæ‰€æœ‰çš„æ¨¡å—æ”¾åˆ°ä¸€ä¸ªå‡½æ•°é‡Œï¼š</p>\n<ul>\n<li>å‡å°‘äº†å‡½æ•°å£°æ˜</li>\n<li>æ–‡ä»¶ä½“ç§¯å˜å°</li>\n<li>å‡½æ•°ä½œç”¨åŸŸå˜å°‘</li>\n</ul>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> path = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;path&quot;</span>)\n<span class=\"hljs-keyword\">const</span> webpack = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;webpack&quot;</span>)\n\n<span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {\n    <span class=\"hljs-attr\">entry</span>: <span class=\"hljs-string\">&quot;./src/app.js&quot;</span>,\n    <span class=\"hljs-attr\">output</span>: {\n        <span class=\"hljs-attr\">path</span>: path.<span class=\"hljs-title function_\">resolve</span>(__dirname, <span class=\"hljs-string\">&quot;dist&quot;</span>),\n        <span class=\"hljs-attr\">filename</span>: <span class=\"hljs-string\">&quot;bundle_[hash:6].js&quot;</span>\n    },\n    <span class=\"hljs-attr\">plugins</span>: [\n        <span class=\"hljs-keyword\">new</span> webpack.<span class=\"hljs-property\">optimize</span>.<span class=\"hljs-title class_\">ModuleConcatenationPlugin</span>()\n    ]\n}\n</code></pre>\n<h2 id=\"æå–ç¬¬ä¸‰æ–¹åº“-entervendor\">æå–ç¬¬ä¸‰æ–¹åº“-enter.vendor</h2>\n<p>æ–¹ä¾¿é•¿æœŸç¼“å­˜ç¬¬ä¸‰æ–¹çš„åº“ï¼Œæ–°å»ºä¸€ä¸ªå…¥å£ï¼Œå°†ç¬¬ä¸‰æ–¹åº“ä½œä¸ºä¸€ä¸ª<code>chunk</code>ï¼Œç”Ÿæˆ<code>vendor.js</code></p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> path = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;path&quot;</span>)\n\n<span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {\n    <span class=\"hljs-attr\">entry</span>: {\n        <span class=\"hljs-attr\">main</span>: <span class=\"hljs-string\">&quot;./src/app.js&quot;</span>,\n        <span class=\"hljs-attr\">vendor</span>: [<span class=\"hljs-string\">&#x27;react&#x27;</span>, <span class=\"hljs-string\">&#x27;react-dom&#x27;</span>]\n    }\n}\n</code></pre>\n<h2 id=\"dllåŠ¨æ€é“¾æ¥-webpackdllplugin\">DLLåŠ¨æ€é“¾æ¥-webpack.DllPlugin</h2>\n<p>å¦‚æœç¬¬ä¸‰æ–¹åº“ä¸æ˜¯ç»å¸¸æ›´æ–°ï¼Œæ‰“åŒ…çš„æ—¶å€™å¸Œæœ›åˆ†å¼€æ‰“åŒ…æ¥æå‡æ‰“åŒ…é€Ÿåº¦ã€‚æ‰“åŒ…dlléœ€è¦æ–°å»ºä¸€ä¸ªwebpacké…ç½®æ–‡ä»¶ï¼Œåœ¨æ‰“åŒ…dllçš„æ—¶å€™ï¼Œwebpackåšä¸€ä¸ªç´¢å¼•ï¼Œç°åœ¨manifestæ–‡ä»¶ä¸­ã€‚ç„¶åæ‰“åŒ…é¡¹ç›®çš„æ—¶å€™åªéœ€è¦è¯»å–manifestæ–‡ä»¶</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// webpack.vendor.js</span>\n\n<span class=\"hljs-keyword\">const</span> webpack = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;webpack&quot;</span>)\n<span class=\"hljs-keyword\">const</span> path = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;path&quot;</span>)\n\n<span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {\n    <span class=\"hljs-attr\">entry</span>: {\n        <span class=\"hljs-attr\">vendor</span>: [<span class=\"hljs-string\">&quot;react&quot;</span>, <span class=\"hljs-string\">&quot;react-dom&quot;</span>]\n    },\n    <span class=\"hljs-attr\">output</span>: {\n        <span class=\"hljs-attr\">path</span>: path.<span class=\"hljs-title function_\">reaolve</span>(__dirname, <span class=\"hljs-string\">&quot;dist&quot;</span>),\n        <span class=\"hljs-attr\">filename</span>: <span class=\"hljs-string\">&quot;dll/[name]_dll.js&quot;</span>,\n        <span class=\"hljs-attr\">library</span>: <span class=\"hljs-string\">&quot;_dll_[name]&quot;</span>\n    },\n    <span class=\"hljs-attr\">plugins</span>: [\n        <span class=\"hljs-keyword\">new</span> webpack.<span class=\"hljs-title class_\">DllPlugin</span>({\n            <span class=\"hljs-attr\">path</span>: path.<span class=\"hljs-title function_\">resolve</span>(__dirname, <span class=\"hljs-string\">&quot;dist/sll&quot;</span>, <span class=\"hljs-string\">&quot;manifest.json&quot;</span>),\n            <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;_dll_[name]&quot;</span>\n        })\n    ]\n}\n</code></pre>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// webpack.config.js</span>\n\n<span class=\"hljs-keyword\">const</span> path = <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-string\">&quot;path&quot;</span>)\n\n<span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {\n    <span class=\"hljs-attr\">enter</span>: {\n        <span class=\"hljs-attr\">main</span>: <span class=\"hljs-string\">&quot;./src/app.js&quot;</span>,\n        <span class=\"hljs-attr\">vendor</span>: [<span class=\"hljs-string\">&quot;react&quot;</span>, <span class=\"hljs-string\">&quot;react-dom&quot;</span>]\n    },\n    <span class=\"hljs-attr\">plugins</span>: [\n        <span class=\"hljs-keyword\">new</span> webpack.<span class=\"hljs-title class_\">DllReferencePlugin</span>({\n            <span class=\"hljs-attr\">manifest</span>: path.<span class=\"hljs-title function_\">resolve</span>(__dirname, <span class=\"hljs-string\">&quot;dist/dll&quot;</span>, <span class=\"hljs-string\">&quot;manifest.json&quot;</span>)\n        })\n    ]\n}\n</code></pre>\n<h1 id=\"å¤šç¯å¢ƒé…ç½®\">å¤šç¯å¢ƒé…ç½®</h1>\n<p>åˆ›å»ºå¤šä¸ªé…ç½®æ–‡ä»¶ï¼š</p>\n<ul>\n<li><code>webpack.base.js</code>ï¼Œå…±åŒçš„ä¸ªé…ç½®</li>\n<li><code>webpack.dev.js</code>ï¼Œåœ¨å¼€å‘ç¯å¢ƒä¸‹çš„é…ç½®</li>\n<li><code>webpack.prod.js</code>ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹çš„é…ç½®</li>\n</ul>\n<h2 id=\"å¼€å‘ç¯å¢ƒ\">å¼€å‘ç¯å¢ƒ</h2>\n<p>é…ç½®æµ‹è¯•æœåŠ¡å™¨ç›¸å…³ã€HMR</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// webpack.dev.js</span>\n\n<span class=\"hljs-keyword\">const</span> path = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;path&quot;</span>)\n<span class=\"hljs-keyword\">const</span> webpack = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;webpack&quot;</span>)\n<span class=\"hljs-keyword\">const</span> merge = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;webpack-merge&quot;</span>)\n<span class=\"hljs-keyword\">const</span> abse = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;./webpack.base.js&quot;</span>)\n\n<span class=\"hljs-keyword\">const</span> dev = {\n    <span class=\"hljs-attr\">devServer</span>: {\n        <span class=\"hljs-attr\">contentNase</span>: path.<span class=\"hljs-title function_\">resolve</span>(__dirname, <span class=\"hljs-string\">&quot;dist&quot;</span>),\n        <span class=\"hljs-attr\">port</span>: <span class=\"hljs-number\">8080</span>,\n        <span class=\"hljs-attr\">host</span>: <span class=\"hljs-string\">&quot;localhost&quot;</span>,\n        <span class=\"hljs-attr\">overlay</span>: <span class=\"hljs-literal\">true</span>,\n        <span class=\"hljs-attr\">compress</span>: <span class=\"hljs-literal\">true</span>,\n        <span class=\"hljs-attr\">open</span>: <span class=\"hljs-literal\">false</span>,\n        <span class=\"hljs-attr\">hot</span>: <span class=\"hljs-literal\">true</span>,\n        <span class=\"hljs-attr\">inline</span>: <span class=\"hljs-literal\">true</span>,\n        <span class=\"hljs-attr\">progress</span>: <span class=\"hljs-literal\">true</span>\n    },\n    <span class=\"hljs-attr\">devtool</span>: <span class=\"hljs-string\">&quot;inline-source-map&quot;</span>,\n    <span class=\"hljs-attr\">plugins</span>: [\n        <span class=\"hljs-keyword\">new</span> webpack.<span class=\"hljs-title class_\">HotModuleReplacementPlugin</span>(),\n        <span class=\"hljs-keyword\">new</span> webpack.<span class=\"hljs-title class_\">NamedModulesPlugin</span>()\n    ]\n}\n\n<span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = <span class=\"hljs-title function_\">merge</span>(base, dev)\n</code></pre>\n<h2 id=\"ç”Ÿäº§ç¯å¢ƒ\">ç”Ÿäº§ç¯å¢ƒ</h2>\n<p>ç”Ÿäº§ç¯å¢ƒæœ€é‡è¦çš„æ˜¯å¼€å¯ä»£ç å‹ç¼©ã€æ··æ·†</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">//webpack.prod.js</span>\n\n<span class=\"hljs-keyword\">const</span> path = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;path&quot;</span>)\n<span class=\"hljs-keyword\">const</span> merge = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;webpack-merge&quot;</span>)\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title class_\">WebpackParallUglifyPlugin</span> = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;webpack-parallel-uglify-plugin&quot;</span>)\n<span class=\"hljs-keyword\">const</span> base = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;./webpack.base.js&quot;</span>)\n\n<span class=\"hljs-keyword\">const</span> prod = {\n    <span class=\"hljs-attr\">plugins</span>: [\n        <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">WebpackParallUglifyPlugin</span>({\n            <span class=\"hljs-attr\">uglifyJS</span>: {\n                <span class=\"hljs-attr\">mangle</span>: <span class=\"hljs-literal\">true</span>,\n                <span class=\"hljs-attr\">output</span>: {\n                    <span class=\"hljs-attr\">beautify</span>: <span class=\"hljs-literal\">false</span>,\n                    <span class=\"hljs-attr\">comments</span>: <span class=\"hljs-literal\">false</span>\n                },\n                <span class=\"hljs-attr\">compress</span>: {\n                    <span class=\"hljs-attr\">warnings</span>: <span class=\"hljs-literal\">false</span>,\n                    <span class=\"hljs-attr\">drop_console</span>: <span class=\"hljs-literal\">true</span>,\n                    <span class=\"hljs-attr\">collpase_vars</span>: <span class=\"hljs-literal\">true</span>,\n                    <span class=\"hljs-attr\">reduce_vars</span>: <span class=\"hljs-literal\">true</span>\n                }\n            }\n        })\n    ]\n}\n\n<span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = <span class=\"hljs-title function_\">marge</span>(base, prod)\n</code></pre>\n<h1 id=\"ä½¿ç”¨ç¯å¢ƒå˜é‡\">ä½¿ç”¨ç¯å¢ƒå˜é‡</h1>\n<ul>\n<li><p>å®‰è£…ä¾èµ–: <code>yarn add dotenv-cli -D</code></p>\n</li>\n<li><p><code>webpack.config.js</code>æ·»åŠ é…ç½®ï¼š</p>\n</li>\n</ul>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> { <span class=\"hljs-title class_\">DefinePlugin</span> } = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;webpack&#x27;</span>);\n<span class=\"hljs-keyword\">const</span> { <span class=\"hljs-variable constant_\">MODE</span> } = process.<span class=\"hljs-property\">env</span>;\n\n<span class=\"hljs-attr\">plugins</span>: [\n      <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">DefinePlugin</span>({\n        <span class=\"hljs-string\">&#x27;process.env&#x27;</span>: {\n            <span class=\"hljs-attr\">MODE</span>: <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">strinfy</span>(<span class=\"hljs-variable constant_\">MODE</span>)\n        }\n    })\n]\n</code></pre>\n<ul>\n<li>æ ¹ç›®å½•åˆ›å»º<code>.env.development</code></li>\n</ul>\n<pre><code class=\"hljs language-shell\">MODE=&#x27;development&#x27;\n</code></pre>\n<ul>\n<li>ä¿®æ”¹<code>package.json</code></li>\n</ul>\n<pre><code class=\"hljs language-json\"><span class=\"hljs-attr\">&quot;scripts&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;start:dev&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;dotenv -e .env.development webpack-dev-server&quot;</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n"},{"title":"CSSç›¸å…³-éªšæ“ä½œ","tags":["CSS","éªšæ“ä½œ"],"categories":"CSS","description":"## ç»™ç¬¬ä¸€ä¸ªå­—åŠ ä¸Šç‰¹æ®Šæ ·å¼\n\nä½¿ç”¨CSSä¼ªé€‰æ‹©å™¨`::first-letter`ï¼Œ**è¡Œå†…å…ƒç´ æ— æ³•ä½¿ç”¨**\n\n## ç»™tableçš„td/tråŠ æ ·border\n\nå…ˆè®¾ç½®`table`çš„`border-collapse: collapse`ï¼Œç„¶åè®¾ç½®`td/tr`çš„`border`","createDate":"2020-12-12 07:35:21","updateDate":"2021-01-06 15:37:00","body":"<h2 id=\"ç»™ç¬¬ä¸€ä¸ªå­—åŠ ä¸Šç‰¹æ®Šæ ·å¼\">ç»™ç¬¬ä¸€ä¸ªå­—åŠ ä¸Šç‰¹æ®Šæ ·å¼</h2>\n<p>ä½¿ç”¨CSSä¼ªé€‰æ‹©å™¨<code>::first-letter</code>ï¼Œ<strong>è¡Œå†…å…ƒç´ æ— æ³•ä½¿ç”¨</strong></p>\n<h2 id=\"ç»™tableçš„tdtråŠ æ ·border\">ç»™tableçš„td/tråŠ æ ·border</h2>\n<p>å…ˆè®¾ç½®<code>table</code>çš„<code>border-collapse: collapse</code>ï¼Œç„¶åè®¾ç½®<code>td/tr</code>çš„<code>border</code></p>\n"},{"title":"rollup.jså­¦ä¹ -åŸºç¡€","tags":["æ‰“åŒ…","rollup.js"],"categories":"rollup.js","description":"## WHAT\n\nä¸€æ¬¾æ‰“åŒ…å·¥å…·\n\n## WHY\n\n- è½»é‡ï¼Œé€‚åˆæ‰“åŒ…åº“\n\n- æ”¯æŒè¾“å‡ºesm\n\n## HOW\n\n> æ‰“åŒ… typescriptï¼Œå•å…¥å£ï¼Œå¤šè¾“å‡ºæ ¼å¼\n\n###  å®‰è£…\n\n- `rollup`\n\n- `rollup-plugin-typescript2`\n\n- `@rollup/plugin-node-resolve`\n\n- `@rollup/plugin-commonjs`\n\n-","createDate":"2020-12-11 03:43:07","updateDate":"2020-12-11 11:02:22","body":"<h2 id=\"what\">WHAT</h2>\n<p>ä¸€æ¬¾æ‰“åŒ…å·¥å…·</p>\n<h2 id=\"why\">WHY</h2>\n<ul>\n<li><p>è½»é‡ï¼Œé€‚åˆæ‰“åŒ…åº“</p>\n</li>\n<li><p>æ”¯æŒè¾“å‡ºesm</p>\n</li>\n</ul>\n<h2 id=\"how\">HOW</h2>\n<blockquote>\n<p>æ‰“åŒ… typescriptï¼Œå•å…¥å£ï¼Œå¤šè¾“å‡ºæ ¼å¼</p>\n</blockquote>\n<h3 id=\"å®‰è£…\">å®‰è£…</h3>\n<ul>\n<li><p><code>rollup</code></p>\n</li>\n<li><p><code>rollup-plugin-typescript2</code></p>\n</li>\n<li><p><code>@rollup/plugin-node-resolve</code></p>\n</li>\n<li><p><code>@rollup/plugin-commonjs</code></p>\n</li>\n<li><p><code>rollup-plugin-cleaner</code></p>\n</li>\n</ul>\n<h3 id=\"é…ç½®\">é…ç½®</h3>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> resolve <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@rollup/plugin-node-resolve&#x27;</span>;\n<span class=\"hljs-keyword\">import</span> commonjs <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@rollup/plugin-commonjs&#x27;</span>;\n<span class=\"hljs-keyword\">import</span> path <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;path&#x27;</span>;\n<span class=\"hljs-keyword\">import</span> ts <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;rollup-plugin-typescript2&#x27;</span>;\n<span class=\"hljs-keyword\">import</span> cleaner <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;rollup-plugin-cleaner&#x27;</span>;\n\n<span class=\"hljs-keyword\">const</span> extensions = [<span class=\"hljs-string\">&#x27;.ts&#x27;</span>, <span class=\"hljs-string\">&#x27;.tsx&#x27;</span>, <span class=\"hljs-string\">&#x27;.js&#x27;</span>, <span class=\"hljs-string\">&#x27;.jsx&#x27;</span>];\n<span class=\"hljs-keyword\">const</span> tsconfig = path.<span class=\"hljs-title function_\">resolve</span>(__dirname, <span class=\"hljs-string\">&#x27;tsconfig.json&#x27;</span>);\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> [\n  {\n    <span class=\"hljs-attr\">input</span>: <span class=\"hljs-string\">&#x27;./src/index.ts&#x27;</span>,\n    <span class=\"hljs-attr\">output</span>: {\n      <span class=\"hljs-attr\">dir</span>: <span class=\"hljs-string\">&#x27;dist/esm&#x27;</span>,\n      <span class=\"hljs-attr\">format</span>: <span class=\"hljs-string\">&#x27;esm&#x27;</span>,\n    },\n    <span class=\"hljs-attr\">plugins</span>: [\n      <span class=\"hljs-title function_\">cleaner</span>({ <span class=\"hljs-attr\">targets</span>: [<span class=\"hljs-string\">&#x27;./dist/&#x27;</span>] }),\n      <span class=\"hljs-title function_\">resolve</span>({ extensions }),\n      <span class=\"hljs-title function_\">commonjs</span>(),\n      <span class=\"hljs-title function_\">ts</span>({ tsconfig }),\n    ],\n    <span class=\"hljs-attr\">external</span>: [<span class=\"hljs-string\">&#x27;react&#x27;</span>]\n  },\n  {\n    <span class=\"hljs-attr\">input</span>: <span class=\"hljs-string\">&#x27;./src/index.ts&#x27;</span>,\n    <span class=\"hljs-attr\">output</span>: {\n      <span class=\"hljs-attr\">dir</span>: <span class=\"hljs-string\">&#x27;dist/umd&#x27;</span>,\n      <span class=\"hljs-attr\">format</span>: <span class=\"hljs-string\">&#x27;umd&#x27;</span>,\n      <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&#x27;MJSLibrary&#x27;</span>,\n      <span class=\"hljs-attr\">globals</span>: {\n        <span class=\"hljs-attr\">react</span>: <span class=\"hljs-string\">&#x27;React&#x27;</span>\n      }\n    },\n    <span class=\"hljs-attr\">plugins</span>: [\n      <span class=\"hljs-title function_\">resolve</span>({ \n        extensions\n      }),\n      <span class=\"hljs-title function_\">commonjs</span>(),\n      <span class=\"hljs-title function_\">ts</span>({ \n        <span class=\"hljs-attr\">tsconfigOverride</span>: { <span class=\"hljs-attr\">compilerOptions</span>: { <span class=\"hljs-attr\">declaration</span>: <span class=\"hljs-literal\">false</span> } }, \n        tsconfig\n      }),\n    ],\n    <span class=\"hljs-attr\">external</span>: [<span class=\"hljs-string\">&#x27;react&#x27;</span>]\n  }\n]\n</code></pre>\n<h3 id=\"æ‰“åŒ…\">æ‰“åŒ…</h3>\n<pre><code class=\"hljs language-json\"><span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;scripts&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n        <span class=\"hljs-attr\">&quot;build&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;rollup -c&quot;</span>\n    <span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n"},{"title":"React.jså­¦ä¹ -åŸºç¡€","tags":["React.js"],"categories":"React.js","description":"## reactå’Œreact-dom\n\n- react\n\n ä¸“é—¨ç”¨æ¥åˆ›å»º`React`ç»„ä»¶ã€ç»„ä»¶ç”Ÿå‘½å‘¨æœŸç­‰\n\n- react-dom\n\n å°è£…äº†`DOM`æ“ä½œç›¸å…³çš„å‡½æ•°ï¼Œæ¯”å¦‚`render`","createDate":"2020-12-02 10:41:44","updateDate":"2020-12-02 10:41:51","body":"<h2 id=\"reactå’Œreact-dom\">reactå’Œreact-dom</h2>\n<ul>\n<li>react</li>\n</ul>\n<p> ä¸“é—¨ç”¨æ¥åˆ›å»º<code>React</code>ç»„ä»¶ã€ç»„ä»¶ç”Ÿå‘½å‘¨æœŸç­‰</p>\n<ul>\n<li>react-dom</li>\n</ul>\n<p> å°è£…äº†<code>DOM</code>æ“ä½œç›¸å…³çš„å‡½æ•°ï¼Œæ¯”å¦‚<code>render</code></p>\n"},{"title":"Docker-åŸºäºGitHub Actionsæ­å»ºCI&CD","tags":["GithubActions","CI/CD"],"categories":"Docker","description":"# todo","createDate":"2020-10-22 16:35:23","updateDate":"2020-11-29 03:57:27","body":"<h1 id=\"todo\">todo</h1>\n"},{"title":"(ç¿»è¯‘)åˆ›å»ºä½ è‡ªå·±çš„React","tags":["React.js"],"categories":"React.js","description":"> åŸæ–‡é“¾æ¥:https://pomb.us/build-your-own-react/\n\n# Build your own React\n\næˆ‘ä»¬å°†ä»å¤´å¼€å§‹é‡å†™Reactã€‚ ä¸€æ­¥æ­¥ã€‚ éµå¾ªçœŸå®çš„Reactä»£ç ä¸­çš„æ¶æ„ï¼Œä½†æ²¡æœ‰æ‰€æœ‰çš„ä¼˜åŒ–å’Œéå¿…è¦çš„åŠŸèƒ½ã€‚\n\nå¦‚æœæ‚¨é˜…è¯»è¿‡[æˆ‘ä»¥å‰çš„ä»»ä½•â€œæ„å»ºè‡ªå·±çš„Reactâ€æ–‡ç« ](https://engineering.hexacta.com/didact-lear","createDate":"2020-11-02 14:25:18","updateDate":"2020-11-11 15:00:53","body":"<blockquote>\n<p>åŸæ–‡é“¾æ¥:<a href=\"https://pomb.us/build-your-own-react/\">https://pomb.us/build-your-own-react/</a></p>\n</blockquote>\n<h1 id=\"build-your-own-react\">Build your own React</h1>\n<p>æˆ‘ä»¬å°†ä»å¤´å¼€å§‹é‡å†™Reactã€‚ ä¸€æ­¥æ­¥ã€‚ éµå¾ªçœŸå®çš„Reactä»£ç ä¸­çš„æ¶æ„ï¼Œä½†æ²¡æœ‰æ‰€æœ‰çš„ä¼˜åŒ–å’Œéå¿…è¦çš„åŠŸèƒ½ã€‚</p>\n<p>å¦‚æœæ‚¨é˜…è¯»è¿‡<a href=\"https://engineering.hexacta.com/didact-learning-how-react-works-by-building-it-from-scratch-51007984e5c5\">æˆ‘ä»¥å‰çš„ä»»ä½•â€œæ„å»ºè‡ªå·±çš„Reactâ€æ–‡ç« </a>ï¼Œä¸åŒä¹‹å¤„åœ¨äºè¯¥æ–‡ç« åŸºäºReact 16.8ï¼Œå› æ­¤æˆ‘ä»¬ç°åœ¨å¯ä»¥ä½¿ç”¨<code>hook</code>å¹¶åˆ é™¤æ‰€æœ‰ä¸<code>class</code>ç›¸å…³çš„ä»£ç ã€‚</p>\n<p>æ‚¨å¯ä»¥åœ¨æ—§åšå®¢æ–‡ç« ä¸­æ‰¾åˆ°å†å²è®°å½•ï¼Œå¹¶åœ¨<a href=\"https://github.com/pomber/didact\">Didactä»“åº“</a>ä¸­æ‰¾åˆ°ä»£ç ã€‚ è¿˜æœ‰ä¸€ä¸ªæ¼”è®²æ¶‰åŠç›¸åŒçš„å†…å®¹ã€‚</p>\n<p>ä»¥ä¸‹è¿™äº›éƒ½æ˜¯æˆ‘ä»¬å°†ä¸€ä¸€æ·»åŠ åˆ°æˆ‘ä»¬çš„Reactç‰ˆæœ¬ä¸­çš„å†…å®¹ï¼š</p>\n<ul>\n<li>ç¬¬ä¸€æ­¥: <code>createElement</code> å‡½æ•°</li>\n<li>ç¬¬äºŒæ­¥: <code>render</code> å‡½æ•°</li>\n<li>ç¬¬ä¸‰æ­¥: Concurrent Mode</li>\n<li>ç¬¬å››æ­¥: Fibers</li>\n<li>ç¬¬äº”æ­¥: Render and Commit Phases</li>\n<li>ç¬¬å…­æ­¥: Reconciliation</li>\n<li>ç¬¬ä¸ƒæ­¥: å‡½æ•°å¼ç»„ä»¶</li>\n<li>ç¬¬å…«æ­¥: Hooks</li>\n</ul>\n<h2 id=\"ç¬¬é›¶æ­¥\">ç¬¬é›¶æ­¥</h2>\n<p>å¦‚æœæ‚¨å·²ç»å¯¹Reactï¼ŒJSXå’ŒDOMèŠ‚ç‚¹çš„å·¥ä½œæ–¹å¼æœ‰äº†å¾ˆå¥½çš„äº†è§£ï¼Œåˆ™å¯ä»¥è·³è¿‡æ­¤æ­¥éª¤ã€‚é¦–å…ˆè®©æˆ‘ä»¬å›é¡¾ä¸€äº›åŸºæœ¬æ¦‚å¿µï¼Œæˆ‘ä»¬å°†ä½¿ç”¨åªæœ‰ä¸‰è¡Œä»£ç çš„Reactåº”ç”¨ç¨‹åºï¼šç¬¬ä¸€ä¸ªå®šä¹‰ä¸€ä¸ªReactèŠ‚ç‚¹ï¼Œä¸‹ä¸€ä¸ªä»DOMè·å–ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæœ€åä¸€ä¸ªå°†ReactèŠ‚ç‚¹æ¸²æŸ“åˆ°å®¹å™¨ä¸­ã€‚ç„¶åï¼Œæˆ‘ä»¬ä¼šåˆ é™¤æ‰€æœ‰ç‰¹å®šäºReactçš„ä»£ç å°†å…¶æ›¿æ¢ä¸ºåŸå§‹JavaScriptã€‚</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> element = <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;foo&quot;</span>&gt;</span>Hello<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span></span>\n<span class=\"hljs-keyword\">const</span> container = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&quot;root&quot;</span>)\n<span class=\"hljs-title class_\">ReactDOM</span>.<span class=\"hljs-title function_\">render</span>(element, container)\n</code></pre>\n<p>åœ¨ç¬¬ä¸€è¡Œä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨JSXå®šä¹‰äº†èŠ‚ç‚¹ã€‚ å®ƒä¸æ˜¯æœ‰æ•ˆçš„JavaScriptï¼Œå› æ­¤è¦ç”¨åŸç”ŸJSå–ä»£å®ƒã€‚é€šè¿‡Babelç­‰æ„å»ºå·¥å…·ï¼ŒJSXè½¬æ¢ä¸ºJSã€‚ è½¬æ¢é€šå¸¸å¾ˆç®€å•ï¼šä½¿ç”¨å¯¹<code>createElement</code>çš„è°ƒç”¨æ¥æ›¿æ¢æ ‡ç­¾å†…çš„ä»£ç ï¼Œå¹¶å°†æ ‡ç­¾<code>type</code>ã€<code>props</code>ã€<code>children</code>ä½œä¸ºå‚æ•°ä¼ é€’ã€‚<code>React.createElement</code>æ ¹æ®å…¶å‚æ•°åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œé™¤äº†ä¸€äº›éªŒè¯ä¹‹å¤–ï¼Œè¿™å°±æ˜¯å…¨éƒ¨ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å®‰å…¨åœ°å°†å‡½æ•°è°ƒç”¨æ›¿æ¢ä¸ºå…¶è¾“å‡ºã€‚</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> element = <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;foo&quot;</span>&gt;</span>Hello<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span></span>\n\nğŸ‘‡\n\n<span class=\"hljs-keyword\">const</span> element = <span class=\"hljs-title class_\">React</span>.<span class=\"hljs-title function_\">createElement</span>(\n  <span class=\"hljs-string\">&quot;h1&quot;</span>,\n  { <span class=\"hljs-attr\">title</span>: <span class=\"hljs-string\">&quot;foo&quot;</span> },\n  <span class=\"hljs-string\">&quot;Hello&quot;</span>\n)\n</code></pre>\n<p>è¿™å°±æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸€ä¸ªå…·æœ‰ä¸¤ä¸ªå±æ€§çš„å¯¹è±¡ï¼š<code>type</code>å’Œ<code>props</code>ï¼ˆå—¯ï¼Œ<a href=\"https://github.com/facebook/react/blob/f4cc45ce962adc9f307690e1d5cfa28a288418eb/packages/react/src/ReactElement.js#L111\">å®ƒæœ‰æ›´å¤šçš„å±æ€§</a>ï¼Œä½†æ˜¯æˆ‘ä»¬åªå…³å¿ƒè¿™ä¸¤ä¸ªå±æ€§ï¼‰ã€‚<code>type</code>æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”¨äºæŒ‡å®šæˆ‘ä»¬è¦åˆ›å»ºçš„DOMèŠ‚ç‚¹çš„ç±»å‹ï¼Œå®ƒæ˜¯æ‚¨è¦åˆ›å»ºHTMLèŠ‚ç‚¹æ—¶ä¼ é€’ç»™<code>document.createElement</code>çš„<code>tagName</code>ã€‚ å®ƒä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä½†æˆ‘ä»¬å°†å…¶ç•™ç»™æ­¥éª¤VIIã€‚<code>props</code>æ˜¯å¦ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒå…·æœ‰JSXå±æ€§ä¸­çš„æ‰€æœ‰é”®å’Œå€¼ã€‚ å®ƒè¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§ï¼š<code>children</code>ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>children</code>æ˜¯å­—ç¬¦ä¸²ï¼Œä½†é€šå¸¸æ˜¯åŒ…å«æ›´å¤šèŠ‚ç‚¹çš„æ•°ç»„ï¼ˆè¿™å°±æ˜¯ä¸ºä»€ä¹ˆèŠ‚ç‚¹ä¹Ÿæ˜¯æ ‘çš„åŸå› ï¼‰ã€‚</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> element = {\n  <span class=\"hljs-attr\">type</span>: <span class=\"hljs-string\">&quot;h1&quot;</span>,\n  <span class=\"hljs-attr\">props</span>: {\n    <span class=\"hljs-attr\">title</span>: <span class=\"hljs-string\">&quot;foo&quot;</span>,\n    <span class=\"hljs-attr\">children</span>: <span class=\"hljs-string\">&quot;Hello&quot;</span>,\n  },\n}\n</code></pre>\n<p>æˆ‘ä»¬éœ€è¦æ›¿æ¢çš„å¦ä¸€éƒ¨åˆ†Reactä»£ç æ˜¯å¯¹<code>ReactDOM.render</code>çš„è°ƒç”¨ã€‚<code>render</code>æ˜¯Reactæ›´æ–°DOMçš„åœ°æ–¹ï¼Œç°åœ¨ç”¨æˆ‘ä»¬è‡ªå·±çš„ä»£ç è¿›è¡Œæ“ä½œã€‚</p>\n<p>é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨èŠ‚ç‚¹<code>type</code>ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º<code>h1</code>ï¼‰åˆ›å»ºä¸€ä¸ª<code>node*</code>ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†æ‰€æœ‰èŠ‚ç‚¹å±æ€§åˆ†é…ç»™è¯¥èŠ‚ç‚¹ã€‚ è¿™é‡Œåªæœ‰ä¸€ä¸ª<code>title</code>ã€‚*ä¸ºé¿å…æ··æ·†ï¼Œæˆ‘å°†ä½¿ç”¨<code>element</code>æ¥æŒ‡ä»£ReactèŠ‚ç‚¹ï¼Œå¹¶ä½¿ç”¨<code>node</code>æ¥æŒ‡ä»£DOMèŠ‚ç‚¹ã€‚</p>\n<p>ç„¶åï¼Œæˆ‘ä»¬ä¸º<code>children</code>åˆ›å»ºèŠ‚ç‚¹ã€‚ æˆ‘ä»¬åªæœ‰ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸º<code>children</code>ï¼Œå› æ­¤æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹ã€‚ä½¿ç”¨<code>textNode</code>è€Œä¸æ˜¯è®¾ç½®<code>innerText</code>å°†å…è®¸æˆ‘ä»¬ä»¥åä»¥ç›¸åŒçš„æ–¹å¼å¯¹å¾…æ‰€æœ‰èŠ‚ç‚¹ã€‚å¦è¯·æ³¨æ„ï¼Œæˆ‘ä»¬åƒè®¾ç½®<code>h1</code>æ ‡é¢˜ä¸€æ ·è®¾ç½®<code>nodeValue</code>ï¼Œå°±åƒå­—ç¬¦ä¸²ä¸­å¸¦æœ‰<code>props: {nodeValue: &quot;hello&quot;}</code>ã€‚æœ€åï¼Œæˆ‘ä»¬å°†<code>textNode</code>æ·»åŠ åˆ°<code>h1</code>å¹¶å°†<code>h1</code>æ·»åŠ åˆ°<code>container</code>ã€‚</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> element = {\n  <span class=\"hljs-attr\">type</span>: <span class=\"hljs-string\">&quot;h1&quot;</span>,\n  <span class=\"hljs-attr\">props</span>: {\n    <span class=\"hljs-attr\">title</span>: <span class=\"hljs-string\">&quot;foo&quot;</span>,\n    <span class=\"hljs-attr\">children</span>: <span class=\"hljs-string\">&quot;Hello&quot;</span>,\n  },\n}\n\n<span class=\"hljs-keyword\">const</span> container = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&quot;root&quot;</span>)\n\n<span class=\"hljs-keyword\">const</span> node = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createElement</span>(element.<span class=\"hljs-property\">type</span>)\nnode[<span class=\"hljs-string\">&quot;title&quot;</span>] = element.<span class=\"hljs-property\">props</span>.<span class=\"hljs-property\">title</span>\n\n<span class=\"hljs-keyword\">const</span> text = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createTextNode</span>(<span class=\"hljs-string\">&quot;&quot;</span>)\ntext[<span class=\"hljs-string\">&quot;nodeValue&quot;</span>] = element.<span class=\"hljs-property\">props</span>.<span class=\"hljs-property\">children</span>\n\nnode.<span class=\"hljs-title function_\">appendChild</span>(text)\ncontainer.<span class=\"hljs-title function_\">appendChild</span>(node)\n</code></pre>\n<h2 id=\"ç¬¬ä¸€æ­¥-createelement-å‡½æ•°\">ç¬¬ä¸€æ­¥: createElement å‡½æ•°</h2>\n<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬åˆ‡æ¢åˆ°å¦ä¸€ä¸ªAppï¼šè‡ªå·±å®ç°çš„ç®€æ˜“Reactã€‚</p>\n<p>é¦–å…ˆï¼Œä»ç¼–å†™<code>createElement</code>å¼€å§‹ï¼Œå°†JSXè½¬æ¢ä¸ºJSã€‚æ­£å¦‚åœ¨ä¸Šä¸€æ­¥ä¸­çœ‹åˆ°çš„ï¼Œ<code>element</code>æ˜¯å…·æœ‰ç±»å‹å’Œå±æ€§çš„å¯¹è±¡ã€‚<code>createElement</code>å”¯ä¸€éœ€è¦åšçš„å°±æ˜¯åˆ›å»ºè¯¥å¯¹è±¡ã€‚</p>\n<p>å› ä¸º<code>children</code>ä¹Ÿå¯ä»¥åŒ…å«åŸå§‹æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²æˆ–æ•°å­—ï¼Œæ‰€ä»¥å¯¹ä¸æ˜¯<code>object</code>çš„<code>child</code>åˆ›å»ºç‰¹æ®ŠèŠ‚ç‚¹ç±»å‹ï¼š<code>TEXT_ELEMENT</code>ã€‚è¿™æ ·åšæ˜¯å› ä¸ºå¯ä»¥ç®€åŒ–ä»£ç ã€‚å¯¹äºæˆ‘ä»¬çš„åº“ï¼Œæˆ‘æ›´å–œæ¬¢ç®€å•è€Œä¸æ˜¯é«˜æ€§èƒ½ä»£ç ã€‚</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">createTextElement</span>(<span class=\"hljs-params\">text</span>) {\n  <span class=\"hljs-keyword\">return</span> {\n    <span class=\"hljs-attr\">type</span>: <span class=\"hljs-string\">&quot;TEXT_ELEMENT&quot;</span>,\n    <span class=\"hljs-attr\">props</span>: {\n      <span class=\"hljs-attr\">nodeValue</span>: text,\n      <span class=\"hljs-attr\">children</span>: [],\n    },\n  }\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">createElement</span>(<span class=\"hljs-params\">type, props, ...children</span>) {\n  <span class=\"hljs-keyword\">return</span> {\n    type,\n    <span class=\"hljs-attr\">props</span>: {\n      ...props,\n      <span class=\"hljs-attr\">children</span>: children.<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">child</span>) =&gt;</span> <span class=\"hljs-keyword\">typeof</span> child === <span class=\"hljs-string\">&quot;object&quot;</span>\n        ? child\n        : <span class=\"hljs-title function_\">createTextElement</span>(child)\n      ),\n    },\n  }\n}\n</code></pre>\n<p>ç›®å‰Babelä»ç„¶ä½¿ç”¨<code>React.createElement</code>ï¼Œä¸ºäº†æ›¿æ¢å®ƒï¼Œè®©æˆ‘ä»¬ç»™è‡ªå·±çš„åº“èµ·ä¸ªåå­—ã€‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¬èµ·æ¥åƒReactçš„åå­—ï¼Œä½†ä¹Ÿæš—ç¤ºäº†å®ƒçš„æ•™å­¦ç›®çš„ï¼Œæˆ‘ä»¬å«å®ƒ<code>Didact</code>ã€‚</p>\n<p>è®©æˆ‘ä»¬ä½¿ç”¨<code>/** @jsx Didact.createElement */</code>æ¥å‘Šè¯‰Babelä½¿ç”¨æˆ‘ä»¬è‡ªå·±çš„<code>createElement</code>æ¥è½¬æ¢jsxä»£ç ï¼š</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">/** <span class=\"hljs-doctag\">@jsx</span> Didact.createElement */</span>\n<span class=\"hljs-keyword\">const</span> element = (\n  <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;foo&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span>&gt;</span>bar<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">b</span> /&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n)\n</code></pre>\n<h2 id=\"ç¬¬äºŒæ­¥ï¼šredner-å‡½æ•°\">ç¬¬äºŒæ­¥ï¼šredner å‡½æ•°</h2>\n<p>é¦–å…ˆä½¿ç”¨elementçš„<code>type</code>åˆ›å»ºDOMèŠ‚ç‚¹ï¼Œç„¶åå°†æ–°elementæ·»åŠ åˆ°<code>container</code>ä¸­ã€‚ç„¶åå¯¹æ¯ä¸ª<code>child</code>é€’å½’è°ƒç”¨<code>render</code>ï¼š</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">render</span>(<span class=\"hljs-params\">element, container</span>) {\n  <span class=\"hljs-keyword\">const</span> dom = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createElement</span>(element.<span class=\"hljs-property\">type</span>);\n\n  element.<span class=\"hljs-property\">props</span>.<span class=\"hljs-property\">children</span>.<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">child</span>) =&gt;</span> <span class=\"hljs-title function_\">render</span>(child, dom))\n\n  container.<span class=\"hljs-title function_\">appendChild</span>(dom);\n}\n</code></pre>\n<p>å…¶æ¬¡ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¤„ç†æ–‡æœ¬èŠ‚ç‚¹ï¼Œå¦‚æœelementç±»å‹ä¸º<code>TEXT_ELEMENT</code>ï¼Œæˆ‘ä»¬å°†åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹è€Œä¸æ˜¯æ™®é€šèŠ‚ç‚¹ï¼š</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">render</span>(<span class=\"hljs-params\">element, container</span>) {\n  <span class=\"hljs-comment\">// ...</span>\n  <span class=\"hljs-keyword\">const</span> dom = element.<span class=\"hljs-property\">type</span> === <span class=\"hljs-string\">&quot;TEXT_ELEMENT&quot;</span>\n    ? <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createTextNode</span>(<span class=\"hljs-string\">&quot;&quot;</span>)\n    : <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createElmenet</span>(element.<span class=\"hljs-property\">type</span>);\n  <span class=\"hljs-comment\">//...</span>\n}\n</code></pre>\n<p>æœ€åï¼Œå°†<code>props</code>åˆ†é…ç»™elementï¼š</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">render</span>(<span class=\"hljs-params\">element, container</span>) {\n  <span class=\"hljs-comment\">// ...</span>\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">isProperty</span> = key =&gt; key === <span class=\"hljs-string\">&quot;children&quot;</span>;\n  <span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">ownkeys</span>(element.<span class=\"hljs-property\">props</span>)\n    .<span class=\"hljs-title function_\">filter</span>(isProperty)\n    .<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">name</span>) =&gt;</span> dom[name] = element.<span class=\"hljs-property\">props</span>[name]);\n  <span class=\"hljs-comment\">// ...</span>\n}\n</code></pre>\n<p>è¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å°±æœ‰äº†ä¸€ä¸ªå¯ä»¥å°†JSXå‘ˆç°åˆ°DOMçš„åº“ï¼š</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">createTextElement</span>(<span class=\"hljs-params\">text</span>) {\n  <span class=\"hljs-keyword\">return</span> {\n    <span class=\"hljs-attr\">type</span>: <span class=\"hljs-string\">&quot;TEXT_ELEMENT&quot;</span>,\n    <span class=\"hljs-attr\">props</span>: {\n      <span class=\"hljs-attr\">nodeValue</span>: text,\n      <span class=\"hljs-attr\">children</span>: []\n    }\n  };\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">createElement</span>(<span class=\"hljs-params\">type, props, ...children</span>) {\n  <span class=\"hljs-keyword\">return</span> {\n    type,\n    <span class=\"hljs-attr\">props</span>: {\n      ...props,\n      <span class=\"hljs-attr\">children</span>: children.<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">child</span>) =&gt;</span>\n        <span class=\"hljs-keyword\">typeof</span> child === <span class=\"hljs-string\">&quot;object&quot;</span> ? child : <span class=\"hljs-title function_\">createTextElement</span>(child)\n      )\n    }\n  };\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">render</span>(<span class=\"hljs-params\">element, container</span>) {\n  <span class=\"hljs-keyword\">const</span> dom =\n    element.<span class=\"hljs-property\">type</span> === <span class=\"hljs-string\">&quot;TEXT_ELEMENT&quot;</span>\n      ? <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createTextNode</span>(<span class=\"hljs-string\">&quot;&quot;</span>)\n      : <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createElement</span>(element.<span class=\"hljs-property\">type</span>);\n\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">isProperty</span> = (<span class=\"hljs-params\">key</span>) =&gt; key !== <span class=\"hljs-string\">&quot;children&quot;</span>;\n  <span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">ownKeys</span>(element.<span class=\"hljs-property\">props</span>)\n    .<span class=\"hljs-title function_\">filter</span>(isProperty)\n    .<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">name</span>) =&gt;</span> (dom[name] = element.<span class=\"hljs-property\">props</span>[name]));\n\n  element.<span class=\"hljs-property\">props</span>.<span class=\"hljs-property\">children</span>.<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">child</span>) =&gt;</span> <span class=\"hljs-title function_\">render</span>(child, dom));\n\n  container.<span class=\"hljs-title function_\">appendChild</span>(dom);\n}\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title class_\">Didact</span> = {\n  createElement,\n  render\n};\n\n<span class=\"hljs-comment\">/** <span class=\"hljs-doctag\">@jsx</span> Didact.createElement */</span>\n<span class=\"hljs-keyword\">const</span> element = (\n  <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;foo&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span>&gt;</span>Hello STEP1-STEP2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n);\n\n<span class=\"hljs-keyword\">const</span> container = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#step1&quot;</span>);\n\n<span class=\"hljs-title class_\">Didact</span>.<span class=\"hljs-title function_\">render</span>(element, container);\n</code></pre>\n<h2 id=\"ç¬¬ä¸‰æ­¥concurrent-mode\">ç¬¬ä¸‰æ­¥Concurrent Mode</h2>\n<p>åœ¨å¼€å§‹æ·»åŠ æ›´å¤šä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦é‡æ„ã€‚</p>\n<p>ä¸Šé¢çš„é€’å½’è°ƒç”¨å­˜åœ¨é—®é¢˜ã€‚å¼€å§‹æ¸²æŸ“åï¼Œç›´åˆ°æ¸²æŸ“å®Œå®Œæ•´çš„elementæ ‘ï¼Œæˆ‘ä»¬æ‰ä¼šåœæ­¢ã€‚ å¦‚æœelementæ ‘å¾ˆå¤§ï¼Œåˆ™å¯èƒ½ä¼šé˜»å¡ä¸»çº¿ç¨‹å¤ªé•¿æ—¶é—´ã€‚ é‚£ä¹ˆå¦‚æœæµè§ˆå™¨éœ€è¦æ‰§è¡Œé«˜ä¼˜å…ˆçº§çš„æ“ä½œï¼ˆä¾‹å¦‚å¤„ç†ç”¨æˆ·è¾“å…¥æˆ–ä¿æŒåŠ¨ç”»æµç•…ï¼‰ï¼Œåˆ™å®ƒå¿…é¡»ç­‰åˆ°æ¸²æŸ“å®Œæˆä¸ºæ­¢ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†å·¥ä½œåˆ†æˆå‡ ä¸ªå°éƒ¨åˆ†ï¼Œåœ¨å®Œæˆæ¯ä¸ªå•å…ƒåï¼Œå¦‚æœéœ€è¦æ‰§è¡Œå…¶ä»–ä»»ä½•æ“ä½œï¼Œæˆ‘ä»¬å°†è®©æµè§ˆå™¨ä¸­æ–­æ¸²æŸ“ã€‚</p>\n<p>æˆ‘ä»¬ä½¿ç”¨<code>requestIdleCallback</code>è¿›è¡Œå¾ªç¯ã€‚ æ‚¨å¯ä»¥å°†<code>requestIdleCallback</code>çœ‹ä½œ<code>setTimeout</code>ï¼Œä½†æ˜¯æµè§ˆå™¨å°†åœ¨ä¸»çº¿ç¨‹ç©ºé—²æ—¶è¿è¡Œå›è°ƒï¼Œè€Œä¸æ˜¯å‘Šè¯‰å®ƒä½•æ—¶è¿è¡Œã€‚Reactä¸å†ä½¿ç”¨<code>requestIdleCallback</code>ï¼Œç°åœ¨å®ƒä½¿ç”¨scheduler packageã€‚ ä½†æ˜¯å¯¹äºæ­¤ç”¨ä¾‹ï¼Œå®ƒåœ¨æ¦‚å¿µä¸Šæ˜¯ç›¸åŒçš„ã€‚<code>requestIdleCallback</code>è¿˜ä¸ºæˆ‘ä»¬æä¾›äº†<code>deadline</code>å‚æ•°ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥æ£€æŸ¥æµè§ˆå™¨éœ€è¦å†æ¬¡æ§åˆ¶ä¹‹å‰æœ‰å¤šå°‘æ—¶é—´ã€‚</p>\n<p>è¦å¼€å§‹ä½¿ç”¨å¾ªç¯ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ç¬¬ä¸€ä¸ªå·¥ä½œå•å…ƒï¼Œç„¶åç¼–å†™ä¸€ä¸ª<code>performUnitOfWork</code>å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¸ä»…æ‰§è¡Œå·¥ä½œï¼Œè¿˜è¿”å›ä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒã€‚</p>\n<h2 id=\"ç¬¬å››æ­¥fiber\">ç¬¬å››æ­¥Fiber</h2>\n<p>è¦ç»„ç»‡å·¥ä½œå•å…ƒï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ•°æ®ç»“æ„--Fiberæ ‘ã€‚æˆ‘ä»¬å°†ä¸ºæ¯ä¸ªå…ƒç´ åˆ†é…ä¸€æ ¹Fiberï¼Œå¹¶ä¸”æ¯ä¸ªFiberå°†æˆä¸ºä¸€ä¸ªå·¥ä½œå•å…ƒã€‚</p>\n<p>å‡å¦‚æˆ‘ä»¬è¦æ¸²æŸ“å¦‚ä¸‹çš„elementæ ‘ï¼Œé‚£ä¹ˆFiberæ ‘å°±å¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-title class_\">Didact</span>.<span class=\"hljs-title function_\">render</span>(\n  <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span> /&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span> /&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>,\n  container\n)\n</code></pre>\n<p><img src=\"https://pomb.us/static/a88a3ec01855349c14302f6da28e2b0c/ac667/fiber1.png\" alt=\"\"></p>\n<p>åœ¨renderå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºroot Fiberå¹¶å°†å…¶è®¾ç½®ä¸º<code>nextUnitOfWork</code>ã€‚ å‰©ä¸‹çš„å·¥ä½œå°†åœ¨<code>performUnitOfWork</code>å‡½æ•°ä¸Šè¿›è¡Œï¼Œæˆ‘ä»¬å°†ä¸ºæ¯ä¸ªFiberåšä¸‰ä»¶äº‹ï¼š</p>\n<ol>\n<li>å°†elementæ·»åŠ åˆ°DOM</li>\n<li>ä¸ºelementçš„å­ä»£åˆ›å»ºFilber</li>\n<li>é€‰æ‹©ä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒ</li>\n</ol>\n<p>è¯¥æ•°æ®ç»“æ„çš„ç›®æ ‡ä¹‹ä¸€æ˜¯ä½¿æŸ¥æ‰¾ä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒå˜å¾—å®¹æ˜“ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ¯ä¸ªFiberéƒ½é“¾æ¥åˆ°å…¶ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ã€ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹å’Œçˆ¶èŠ‚ç‚¹ã€‚</p>\n<ul>\n<li>å½“æˆ‘ä»¬å®Œæˆå¯¹å½“å‰Fiberçš„å·¥ä½œæ—¶ï¼Œå¦‚æœæœ‰childï¼Œé‚£ä¹ˆè¯¥childå¯¹åº”çš„Fiberå°†æ˜¯ä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒã€‚åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œå½“æˆ‘ä»¬å®Œæˆdiv Fiberçš„å·¥ä½œæ—¶ï¼Œä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒå°†æ˜¯h1 Fiberã€‚</li>\n<li>å¦‚æœå½“å‰Fiberæ²¡æœ‰childï¼Œæˆ‘ä»¬å°†å…¶siblingä½œä¸ºä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒã€‚ä¾‹å¦‚ï¼Œp Fiberæ²¡æœ‰childï¼Œå› æ­¤æˆ‘ä»¬åœ¨å®Œæˆå½“å‰ä¹‹åä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒå°†æ˜¯h1ã€‚</li>\n<li>å¦‚æœå½“å‰Fiberæ—¢æ²¡æœ‰childä¹Ÿæ²¡æœ‰siblingï¼Œé‚£ä¹ˆæˆ‘ä»¬å»â€œuncleâ€ï¼šçˆ¶æ¯çš„å…„å¼ŸèŠ‚ç‚¹ã€‚ å°±åƒç¤ºä¾‹ä¸­çš„aå’Œh2 Fiberä¸€æ ·ã€‚</li>\n<li>å¦‚æœparentæ²¡æœ‰siblingï¼Œæˆ‘ä»¬ä¼šä¸æ–­æ£€æŸ¥parentï¼Œç›´åˆ°æ‰¾åˆ°æœ‰siblingçš„parentï¼Œæˆ–è€…ç›´åˆ°æ‰¾åˆ°rootã€‚ å¦‚æœåˆ°è¾¾rootï¼Œåˆ™æ„å‘³ç€æˆ‘ä»¬å·²ç»å®Œæˆäº†æ­¤æ¸²æŸ“çš„æ‰€æœ‰å·¥ä½œã€‚</li>\n</ul>\n<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬å¼€å§‹å†™ä»£ç ã€‚</p>\n<p>é¦–å…ˆï¼Œæ›´æ”¹<code>render</code>å‡½æ•°å¹¶åˆ›å»º<code>createDom</code>å‡½æ•°</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">render</span>(<span class=\"hljs-params\">element, container</span>) {\n  nextUnitOfWork = {\n    <span class=\"hljs-attr\">dom</span>: container,\n    <span class=\"hljs-attr\">props</span>: {\n      <span class=\"hljs-attr\">children</span>: [element],\n    },\n  }\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">createDom</span>(<span class=\"hljs-params\">fiber</span>) {\n  <span class=\"hljs-keyword\">const</span> dom =\n    fiber.<span class=\"hljs-property\">type</span> == <span class=\"hljs-string\">&quot;TEXT_ELEMENT&quot;</span>\n      ? <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createTextNode</span>(<span class=\"hljs-string\">&quot;&quot;</span>)\n      : <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createElement</span>(fiber.<span class=\"hljs-property\">type</span>)\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">isProperty</span> = key =&gt; key !== <span class=\"hljs-string\">&quot;children&quot;</span>\n  <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">keys</span>(fiber.<span class=\"hljs-property\">props</span>)\n    .<span class=\"hljs-title function_\">filter</span>(isProperty)\n    .<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">name</span> =&gt;</span> {\n      dom[name] = fiber.<span class=\"hljs-property\">props</span>[name]\n    })\n  <span class=\"hljs-keyword\">return</span> dom\n}\n</code></pre>\n<p>ç„¶åï¼Œå½“æµè§ˆå™¨å‡†å¤‡å°±ç»ªæ—¶ï¼Œå®ƒå°†è°ƒç”¨æˆ‘ä»¬çš„<code>workLoop</code>ï¼Œæˆ‘ä»¬å°†ä»<code>root</code>å¼€å§‹æ‰§è¡Œæ¸²æŸ“ã€‚</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">workLoop</span>(<span class=\"hljs-params\">deadline</span>) {\n  <span class=\"hljs-keyword\">let</span> shouldYield = <span class=\"hljs-literal\">false</span>\n  <span class=\"hljs-keyword\">while</span> (nextUnitOfWork &amp;&amp; !shouldYield) {\n    nextUnitOfWork = <span class=\"hljs-title function_\">performUnitOfWork</span>(\n      nextUnitOfWork\n    )\n    shouldYield = deadline.<span class=\"hljs-title function_\">timeRemaining</span>() &lt; <span class=\"hljs-number\">1</span>\n  }\n  <span class=\"hljs-title function_\">requestIdleCallback</span>(workLoop)\n}\n</code></pre>\n<p>é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°nodeå¹¶å°†å…¶æ·»åŠ åˆ°DOMã€‚æˆ‘ä»¬åœ¨<code>fibre.dom</code>å±æ€§ä¸­è·Ÿè¸ªDOMèŠ‚ç‚¹ã€‚</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">performUnitOfWork</span>(<span class=\"hljs-params\">fiber</span>) {\n  <span class=\"hljs-keyword\">if</span> (!fiber.<span class=\"hljs-property\">dom</span>) {\n    fiber.<span class=\"hljs-property\">dom</span> = <span class=\"hljs-title function_\">createDom</span>(fiber)\n  }\n  <span class=\"hljs-keyword\">if</span> (fiber.<span class=\"hljs-property\">parent</span>) {\n    fiber.<span class=\"hljs-property\">parent</span>.<span class=\"hljs-property\">dom</span>.<span class=\"hljs-title function_\">appendChild</span>(fiber.<span class=\"hljs-property\">dom</span>)\n  }\n  <span class=\"hljs-comment\">// TODO create new fibers</span>\n  <span class=\"hljs-comment\">// TODO return next unit of work</span>\n}\n</code></pre>\n<p>ç„¶åå¯¹æ¯ä¸ª<code>child</code>åˆ›å»ºFiber</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> elements = fiber.<span class=\"hljs-property\">props</span>.<span class=\"hljs-property\">children</span>\n  <span class=\"hljs-keyword\">let</span> index = <span class=\"hljs-number\">0</span>\n  <span class=\"hljs-keyword\">let</span> prevSibling = <span class=\"hljs-literal\">null</span>\n  <span class=\"hljs-keyword\">while</span> (index &lt; elements.<span class=\"hljs-property\">length</span>) {\n    <span class=\"hljs-keyword\">const</span> element = elements[index]\n    <span class=\"hljs-keyword\">const</span> newFiber = {\n      <span class=\"hljs-attr\">type</span>: element.<span class=\"hljs-property\">type</span>,\n      <span class=\"hljs-attr\">props</span>: element.<span class=\"hljs-property\">props</span>,\n      <span class=\"hljs-attr\">parent</span>: fiber,\n      <span class=\"hljs-attr\">dom</span>: <span class=\"hljs-literal\">null</span>,\n    }\n  }\n</code></pre>\n<p>ç„¶åå°†å…¶æ·»åŠ åˆ°Fiberæ ‘ä¸­ï¼Œå°†å…¶è®¾ç½®ä¸º<code>child</code>è¿˜æ˜¯<code>sibing</code>ï¼Œå…·ä½“å–å†³äºå®ƒæ˜¯å¦æ˜¯ç¬¬ä¸€ä¸ªchildã€‚</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">if</span> (index === <span class=\"hljs-number\">0</span>) {\n      fiber.<span class=\"hljs-property\">child</span> = newFiber\n    } <span class=\"hljs-keyword\">else</span> {\n      prevSibling.<span class=\"hljs-property\">sibling</span> = newFiber\n    }\n}\nprevSibling = newFiber\nindex++\n</code></pre>\n<p>æœ€åï¼Œæˆ‘ä»¬æŒ‰ç…§child â˜ sibling â˜ uncleæ¥é€‰æ‹©ä¸‹ä¸€å·¥ä½œå•å…ƒã€‚</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">if</span> (fiber.<span class=\"hljs-property\">child</span>) {\n  <span class=\"hljs-keyword\">return</span> fiber.<span class=\"hljs-property\">child</span>\n}\n<span class=\"hljs-keyword\">let</span> nextFiber = fiber\n<span class=\"hljs-keyword\">while</span> (nextFiber) {\n  <span class=\"hljs-keyword\">if</span> (nextFiber.<span class=\"hljs-property\">sibling</span>) {\n    <span class=\"hljs-keyword\">return</span> nextFiber.<span class=\"hljs-property\">sibling</span>\n  }\n  nextFiber = nextFiber.<span class=\"hljs-property\">parent</span>\n}\n</code></pre>\n<p>å®Œæ•´çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">performUnitOfWork</span>(<span class=\"hljs-params\">fiber</span>) {\n  <span class=\"hljs-keyword\">if</span> (!fiber.<span class=\"hljs-property\">dom</span>) {\n    fiber.<span class=\"hljs-property\">dom</span> = <span class=\"hljs-title function_\">createDom</span>(fiber)\n  }\n\n  <span class=\"hljs-keyword\">if</span> (fiber.<span class=\"hljs-property\">parent</span>) {\n    fiber.<span class=\"hljs-property\">parent</span>.<span class=\"hljs-property\">dom</span>.<span class=\"hljs-title function_\">appendChild</span>(fiber.<span class=\"hljs-property\">dom</span>)\n  }\n\n  <span class=\"hljs-keyword\">const</span> elements = fiber.<span class=\"hljs-property\">props</span>.<span class=\"hljs-property\">children</span>\n  <span class=\"hljs-keyword\">let</span> index = <span class=\"hljs-number\">0</span>\n  <span class=\"hljs-keyword\">let</span> prevSibling = <span class=\"hljs-literal\">null</span>\n\n  <span class=\"hljs-keyword\">while</span> (index &lt; elements.<span class=\"hljs-property\">length</span>) {\n    <span class=\"hljs-keyword\">const</span> element = elements[index]\n\n    <span class=\"hljs-keyword\">const</span> newFiber = {\n      <span class=\"hljs-attr\">type</span>: element.<span class=\"hljs-property\">type</span>,\n      <span class=\"hljs-attr\">props</span>: element.<span class=\"hljs-property\">props</span>,\n      <span class=\"hljs-attr\">parent</span>: fiber,\n      <span class=\"hljs-attr\">dom</span>: <span class=\"hljs-literal\">null</span>,\n    }\n\n    <span class=\"hljs-keyword\">if</span> (index === <span class=\"hljs-number\">0</span>) {\n      fiber.<span class=\"hljs-property\">child</span> = newFiber\n    } <span class=\"hljs-keyword\">else</span> {\n      prevSibling.<span class=\"hljs-property\">sibling</span> = newFiber\n    }\n\n    prevSibling = newFiber\n    index++\n  }\n\n  <span class=\"hljs-keyword\">if</span> (fiber.<span class=\"hljs-property\">child</span>) {\n    <span class=\"hljs-keyword\">return</span> fiber.<span class=\"hljs-property\">child</span>\n  }\n  <span class=\"hljs-keyword\">let</span> nextFiber = fiber\n  <span class=\"hljs-keyword\">while</span> (nextFiber) {\n    <span class=\"hljs-keyword\">if</span> (nextFiber.<span class=\"hljs-property\">sibling</span>) {\n      <span class=\"hljs-keyword\">return</span> nextFiber.<span class=\"hljs-property\">sibling</span>\n    }\n    nextFiber = nextFiber.<span class=\"hljs-property\">parent</span>\n  }\n}\n</code></pre>\n<h2 id=\"æäº¤æ›´æ”¹\">æäº¤æ›´æ”¹</h2>\n<p>æˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ã€‚æ¯æ¬¡å¤„ç†ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œæˆ‘ä»¬éƒ½ä¼šå‘DOMæ·»åŠ ä¸€ä¸ªæ–°èŠ‚ç‚¹ã€‚è€Œä¸”ï¼Œè¯·è®°ä½ï¼Œæµè§ˆå™¨å¯èƒ½ä¼šåœ¨æˆ‘ä»¬å®Œæˆæ•´ä¸ªæ ‘çš„æ¸²æŸ“ä¹‹å‰ä¸­æ–­æˆ‘ä»¬çš„å·¥ä½œã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç”¨æˆ·å°†çœ‹åˆ°ä¸€ä¸ªä¸å®Œæ•´çš„UIã€‚æˆ‘ä»¬ä¸æƒ³è¿™æ ·ã€‚</p>\n<p>å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä»<code>performUnitOfWork</code>é‡Œåˆ é™¤æ”¹å˜DOMçš„éƒ¨åˆ†ã€‚ç›¸åï¼Œæˆ‘ä»¬å°†è·Ÿè¸ªFiber treeã€‚æˆ‘ä»¬ç§°å®ƒä¸º<code>wipRoot</code>ã€‚ä¸€æ—¦æˆ‘ä»¬å®Œæˆäº†æ‰€æœ‰çš„å·¥ä½œ(æˆ‘ä»¬çŸ¥é“å®ƒæ˜¯å› ä¸ºæ²¡æœ‰ä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒ)ï¼Œæˆ‘ä»¬å°±å°†æ•´ä¸ªFiber treeæäº¤ç»™DOMã€‚æˆ‘ä»¬åœ¨<code>commitRoot</code>å‡½æ•°ä¸­å®Œæˆã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬é€’å½’åœ°å°†æ‰€æœ‰èŠ‚ç‚¹è¿½åŠ åˆ°domã€‚</p>\n<h2 id=\"reconciliation\">Reconciliation</h2>\n<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åªå‘DOMæ·»åŠ äº†ä¸€äº›ä¸œè¥¿ï¼Œé‚£ä¹ˆæ›´æ–°æˆ–åˆ é™¤èŠ‚ç‚¹å‘¢? </p>\n<p>è¿™å°±æ˜¯æˆ‘ä»¬ç°åœ¨è¦åšçš„ï¼Œæˆ‘ä»¬éœ€è¦å°†<code>render</code>å‡½æ•°æ¥æ”¶åˆ°çš„å…ƒç´ ä¸æäº¤ç»™DOMçš„æœ€åä¸€ä¸ªFiber treeè¿›è¡Œæ¯”è¾ƒã€‚å› æ­¤ï¼Œåœ¨å®Œæˆ<code>commit</code>ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦ä¿å­˜å¯¹<strong>æœ€åä¸€ä¸ªæäº¤åˆ°DOMçš„Fiber tree</strong>çš„å¼•ç”¨ã€‚æˆ‘ä»¬ç§°ä¹‹ä¸º<code>currentRoot</code>ã€‚æˆ‘ä»¬è¿˜åœ¨æ¯Fiberä¸­åŠ å…¥äº†<code>alternate</code>, æ­¤å±æ€§æ˜¯åˆ°æ—§Fiberçš„é“¾æ¥ï¼Œå³æˆ‘ä»¬åœ¨ä¸Šä¸€ä¸ªæäº¤é˜¶æ®µæäº¤ç»™DOMçš„Fiberã€‚</p>\n<p>ç°åœ¨è®©æˆ‘ä»¬ä»åˆ›å»ºæ–°Fiberçš„<code>performUnitOfWork</code>å‡½æ•°ä¸­æå–ä»£ç åˆ°<code>reconcileChildren</code> ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†<code>reconcile</code>æ—§çš„fiberså’Œæ–°å…ƒç´ ã€‚æˆ‘ä»¬åŒæ—¶éå†æ—§Fiber tree(<code>wipFiber.alternate</code>)çš„å­å…ƒç´ å’Œæˆ‘ä»¬æƒ³è¦reconciliationçš„å…ƒç´ æ•°ç»„ã€‚å¦‚æœæˆ‘ä»¬å¿½ç•¥åŒæ—¶éå†æ•°ç»„å’Œé“¾è¡¨æ‰€éœ€çš„æ‰€æœ‰æ ·æ¿æ–‡ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªå‰©ä¸‹whileä¸­æœ€é‡è¦çš„éƒ¨åˆ†:oldFiberå’Œelementã€‚å…ƒç´ æ˜¯æˆ‘ä»¬æƒ³è¦æ¸²æŸ“åˆ°DOMçš„ä¸œè¥¿ï¼Œè€ŒoldFiberæ˜¯æˆ‘ä»¬ä¸Šæ¬¡æ¸²æŸ“çš„ä¸œè¥¿ã€‚æˆ‘ä»¬éœ€è¦æ¯”è¾ƒå®ƒä»¬ï¼Œçœ‹çœ‹æ˜¯å¦éœ€è¦å¯¹DOMè¿›è¡Œæ›´æ”¹ã€‚</p>\n<p>ä¸ºäº†æ¯”è¾ƒå®ƒä»¬ï¼Œæˆ‘ä»¬ä½¿ç”¨ç±»å‹:</p>\n<ul>\n<li>å¦‚æœæ—§çš„Fiberå’Œæ–°å…ƒç´ å…·æœ‰ç›¸åŒçš„ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥ä¿ç•™DOMèŠ‚ç‚¹ï¼Œå¹¶ä½¿ç”¨æ–°çš„é“å…·æ›´æ–°å®ƒ</li>\n<li>å¦‚æœç±»å‹ä¸åŒï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªæ–°å…ƒç´ ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„DOMèŠ‚ç‚¹</li>\n<li>å¦‚æœç±»å‹ä¸åŒï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªæ—§çš„å…‰çº¤ï¼Œæˆ‘ä»¬éœ€è¦åˆ é™¤æ—§çš„èŠ‚ç‚¹</li>\n</ul>\n<p>è¿™é‡ŒReactä¹Ÿä½¿ç”¨keyï¼Œè¿™æ ·å¯ä»¥æ›´å¥½çš„<code>reconcile</code>ã€‚ä¾‹å¦‚ï¼Œå®ƒæ£€æµ‹å­å…ƒç´ åœ¨å…ƒç´ æ•°ç»„ä¸­çš„ä½ç½®å‘ç”Ÿäº†å˜åŒ–ã€‚</p>\n<p>å½“æ—§Fiberå’Œå…ƒç´ å…·æœ‰ç›¸åŒçš„ç±»å‹æ—¶ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°Fiberï¼Œä½¿DOMèŠ‚ç‚¹ä¸æ—§Fiberä¿æŒä¸€è‡´ï¼Œä½¿propsä¸elementä¿æŒä¸€è‡´ã€‚æˆ‘ä»¬è¿˜å‘Fiber æ·»åŠ äº†ä¸€ä¸ªæ–°å±æ€§:<code>effectTag</code>ã€‚æˆ‘ä»¬å°†åœ¨ç¨åçš„<code>commit</code>é˜¶æ®µä½¿ç”¨æ­¤å±æ€§ã€‚</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> sameType =\n      oldFiber &amp;&amp;\n      element &amp;&amp;\n      element.<span class=\"hljs-property\">type</span> == oldFiber.<span class=\"hljs-property\">type</span>\n<span class=\"hljs-keyword\">if</span> (sameType) {\n  newFiber = {\n    <span class=\"hljs-attr\">type</span>: oldFiber.<span class=\"hljs-property\">type</span>,\n    <span class=\"hljs-attr\">props</span>: element.<span class=\"hljs-property\">props</span>,\n    <span class=\"hljs-attr\">dom</span>: oldFiber.<span class=\"hljs-property\">dom</span>,\n    <span class=\"hljs-attr\">parent</span>: wipFiber,\n    <span class=\"hljs-attr\">alternate</span>: oldFiber,\n    <span class=\"hljs-attr\">effectTag</span>: <span class=\"hljs-string\">&quot;UPDATE&quot;</span>,\n  }\n}\n</code></pre>\n<p>å¯¹äºelementéœ€è¦ä¸€ä¸ªæ–°DOMèŠ‚ç‚¹çš„æƒ…å†µï¼Œæˆ‘ä»¬ç”¨<code>PLACEMENT</code>æ ‡è®°æ ‡è®°æ–°Fiberã€‚</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">if</span> (element &amp;&amp; !sameType) {\n  newFiber = {\n    <span class=\"hljs-attr\">type</span>: element.<span class=\"hljs-property\">type</span>,\n    <span class=\"hljs-attr\">props</span>: element.<span class=\"hljs-property\">props</span>,\n    <span class=\"hljs-attr\">dom</span>: <span class=\"hljs-literal\">null</span>,\n    <span class=\"hljs-attr\">parent</span>: wipFiber,\n    <span class=\"hljs-attr\">alternate</span>: <span class=\"hljs-literal\">null</span>,\n    <span class=\"hljs-attr\">effectTag</span>: <span class=\"hljs-string\">&quot;PLACEMENT&quot;</span>,\n  }\n}\n</code></pre>\n<p>å¯¹äºéœ€è¦åˆ é™¤èŠ‚ç‚¹çš„æƒ…å†µï¼Œæˆ‘ä»¬æ²¡æœ‰æ–°çš„Fiberï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æ—§Fiberä¸Šæ·»åŠ effectæ ‡ç­¾ã€‚ä½†æ˜¯å½“æˆ‘ä»¬å°†Fiberæ ‘æäº¤åˆ°DOMæ—¶ï¼Œæˆ‘ä»¬ä»æ­£åœ¨è¿›è¡Œçš„æ ¹ç›®å½•æ‰§è¡Œï¼Œå®ƒæ²¡æœ‰æ—§çš„Fiber ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ•°ç»„æ¥è·Ÿè¸ªè¦åˆ é™¤çš„èŠ‚ç‚¹ã€‚ç„¶åï¼Œå½“æˆ‘ä»¬å°†æ›´æ”¹æäº¤åˆ°DOMæ—¶ï¼Œæˆ‘ä»¬è¿˜ä½¿ç”¨äº†æ¥è‡ªè¯¥æ•°ç»„çš„Fiberã€‚</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">if</span> (oldFiber &amp;&amp; !sameType) {\n  oldFiber.<span class=\"hljs-property\">effectTag</span> = <span class=\"hljs-string\">&quot;DELETION&quot;</span>\n  deletions.<span class=\"hljs-title function_\">push</span>(oldFiber)\n}\n</code></pre>\n<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä¿®æ”¹<code>commitWork</code>å‡½æ•°æ¥å¤„ç†æ–°çš„<code>effectTags</code>ã€‚</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">commitWork</span>(<span class=\"hljs-params\">fiber</span>) {\n  <span class=\"hljs-keyword\">if</span> (!fiber) {\n    <span class=\"hljs-keyword\">return</span>\n  }\n  <span class=\"hljs-keyword\">if</span> (\n    fiber.<span class=\"hljs-property\">effectTag</span> === <span class=\"hljs-string\">&quot;PLACEMENT&quot;</span> &amp;&amp;\n    fiber.<span class=\"hljs-property\">dom</span> != <span class=\"hljs-literal\">null</span>\n  ) {\n    domParent.<span class=\"hljs-title function_\">appendChild</span>(fiber.<span class=\"hljs-property\">dom</span>)\n  } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (\n      fiber.<span class=\"hljs-property\">effectTag</span> === <span class=\"hljs-string\">&quot;UPDATE&quot;</span> &amp;&amp;\n      fiber.<span class=\"hljs-property\">dom</span> != <span class=\"hljs-literal\">null</span>\n    ) {\n      <span class=\"hljs-title function_\">updateDom</span>(\n        fiber.<span class=\"hljs-property\">dom</span>,\n        fiber.<span class=\"hljs-property\">alternate</span>.<span class=\"hljs-property\">props</span>,\n        fiber.<span class=\"hljs-property\">props</span>\n      )\n    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (fiber.<span class=\"hljs-property\">effectTag</span> === <span class=\"hljs-string\">&quot;DELETION&quot;</span>) {\n      domParent.<span class=\"hljs-title function_\">removeChild</span>(fiber.<span class=\"hljs-property\">dom</span>)\n  }\n  <span class=\"hljs-keyword\">const</span> domParent = fiber.<span class=\"hljs-property\">parent</span>.<span class=\"hljs-property\">dom</span>\n  domParent.<span class=\"hljs-title function_\">appendChild</span>(fiber.<span class=\"hljs-property\">dom</span>)\n  <span class=\"hljs-title function_\">commitWork</span>(fiber.<span class=\"hljs-property\">child</span>)\n  <span class=\"hljs-title function_\">commitWork</span>(fiber.<span class=\"hljs-property\">sibling</span>)\n}\n</code></pre>\n<ul>\n<li><p>å¦‚æœFiberæœ‰ä¸€ä¸ª<code>PLACEMENT</code>æ ‡ç­¾ï¼Œä»çˆ¶Fiberå°†DOMèŠ‚ç‚¹é™„åŠ åˆ°èŠ‚ç‚¹ã€‚</p>\n</li>\n<li><p>å¦‚æœæ˜¯<code>DELETION</code>ï¼Œåˆ™åšç›¸åçš„æ“ä½œï¼Œåˆ é™¤å­å…ƒç´ ã€‚</p>\n</li>\n<li><p>å¦‚æœæ˜¯<code>UPDATE</code>ï¼Œåˆ™éœ€è¦ä½¿ç”¨æ›´æ”¹åçš„propsæ›´æ–°ç°æœ‰DOMèŠ‚ç‚¹ã€‚æˆ‘ä»¬å°†åœ¨è¿™ä¸ª<code>updateDom</code>å‡½æ•°ä¸­å®Œæˆè¿™äº›æ“ä½œã€‚å°†æ—§Fiberä¸­çš„propsä¸æ–°Fiberä¸­çš„propsè¿›è¡Œæ¯”è¾ƒï¼Œå»æ‰ä¸å­˜åœ¨çš„propï¼Œè®¾ç½®æ–°çš„æˆ–æ›´æ¢çš„propã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœpropä»¥<code>on</code>å‰ç¼€å¼€å¤´ï¼Œæˆ‘ä»¬å°†ä»¥ä¸åŒçš„æ–¹å¼å¤„ç†å®ƒï¼šå¦‚æœevent handlerå‘ç”Ÿäº†æ›´æ”¹ï¼Œæˆ‘ä»¬å°†å…¶ä»èŠ‚ç‚¹ä¸­åˆ é™¤ï¼Œç„¶åå†æ·»åŠ æ–°çš„handlerã€‚</p>\n</li>\n</ul>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">isEvent</span> = key =&gt; key.<span class=\"hljs-title function_\">startsWith</span>(<span class=\"hljs-string\">&quot;on&quot;</span>)\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">isProperty</span> = key =&gt;\n      key !== <span class=\"hljs-string\">&quot;children&quot;</span> &amp;&amp; !<span class=\"hljs-title function_\">isEvent</span>(key)\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">isNew</span> = (<span class=\"hljs-params\">prev, next</span>) =&gt; <span class=\"hljs-function\"><span class=\"hljs-params\">key</span> =&gt;</span>\n    prev[key] !== next[key]\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">isGone</span> = (<span class=\"hljs-params\">prev, next</span>) =&gt; <span class=\"hljs-function\"><span class=\"hljs-params\">key</span> =&gt;</span> !(key <span class=\"hljs-keyword\">in</span> next)\n  \n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">updateDom</span>(<span class=\"hljs-params\">dom, prevProps, nextProps</span>) {\n  <span class=\"hljs-comment\">// Remove old properties</span>\n  <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">keys</span>(prevProps)\n    .<span class=\"hljs-title function_\">filter</span>(isProperty)\n    .<span class=\"hljs-title function_\">filter</span>(<span class=\"hljs-title function_\">isGone</span>(prevProps, nextProps))\n    .<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">name</span> =&gt;</span> {\n      dom[name] = <span class=\"hljs-string\">&quot;&quot;</span>\n  })\n\n  <span class=\"hljs-comment\">// Set new or changed properties</span>\n  <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">keys</span>(nextProps)\n    .<span class=\"hljs-title function_\">filter</span>(isProperty)\n    .<span class=\"hljs-title function_\">filter</span>(<span class=\"hljs-title function_\">isNew</span>(prevProps, nextProps))\n    .<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">name</span> =&gt;</span> {\n      dom[name] = nextProps[name]\n  })\n  \n  <span class=\"hljs-comment\">// Add event listeners</span>\n  <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">keys</span>(nextProps)\n    .<span class=\"hljs-title function_\">filter</span>(isEvent)\n    .<span class=\"hljs-title function_\">filter</span>(<span class=\"hljs-title function_\">isNew</span>(prevProps, nextProps))\n    .<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">name</span> =&gt;</span> {\n      <span class=\"hljs-keyword\">const</span> eventType = name\n        .<span class=\"hljs-title function_\">toLowerCase</span>()\n        .<span class=\"hljs-title function_\">substring</span>(<span class=\"hljs-number\">2</span>)\n      dom.<span class=\"hljs-title function_\">addEventListener</span>(\n        eventType,\n        nextProps[name]\n      )\n  })\n}\n</code></pre>\n"},{"title":"React.jså­¦ä¹ -useEffectå®Œæ•´æŒ‡å—","tags":["React.js","Hooks"],"categories":"React.js","description":"> åŸæ–‡é“¾æ¥ï¼šhttps://overreacted.io/zh-hans/a-complete-guide-to-useeffect/\n\n# æ¯ä¸€æ¬¡æ¸²æŸ“éƒ½æœ‰å®ƒè‡ªå·±çš„...\n\n``` jsx\nconst Counter = () => {\n\tconst [count, setCount] = useState(0)\n    \n    return (\n    \t<button onClick=","createDate":"2020-10-27 15:21:38","updateDate":"2020-10-30 18:03:54","body":"<blockquote>\n<p>åŸæ–‡é“¾æ¥ï¼š<a href=\"https://overreacted.io/zh-hans/a-complete-guide-to-useeffect/\">https://overreacted.io/zh-hans/a-complete-guide-to-useeffect/</a></p>\n</blockquote>\n<h1 id=\"æ¯ä¸€æ¬¡æ¸²æŸ“éƒ½æœ‰å®ƒè‡ªå·±çš„\">æ¯ä¸€æ¬¡æ¸²æŸ“éƒ½æœ‰å®ƒè‡ªå·±çš„...</h1>\n<pre><code class=\"hljs language-jsx\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Counter</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n    <span class=\"hljs-keyword\">const</span> [count, setCount] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-number\">0</span>)\n    \n    <span class=\"hljs-keyword\">return</span> (\n        <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{()</span> =&gt;</span> setCount(count+1)}&gt;click me<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span></span>\n        <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span>&gt;</span>${ count }<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span></span>\n        <span class=\"hljs-comment\">// æ²¡åšä»»ä½•ç‰¹æ®Šäº‹ä»¶ç»‘å®šï¼Œåªæ˜¯åœ¨æ¸²æŸ“æ—¶æ‹¿å–ç‹¬ç«‹çš„countçŠ¶æ€</span>\n    )\n}\n</code></pre>\n<ul>\n<li>æ¯ä¸€æ¬¡æ¸²æŸ“éƒ½æœ‰å®ƒè‡ªå·±çš„<code>data</code>å’Œ<code>props</code></li>\n<li>æ¯ä¸€æ¬¡æ¸²æŸ“éƒ½æœ‰å®ƒè‡ªå·±çš„äº‹ä»¶å¤„ç†å‡½æ•°</li>\n<li>æ¯ä¸€æ¬¡æ¸²æŸ“éƒ½æœ‰å®ƒè‡ªå·±çš„Effects</li>\n<li>æ¯ä¸€ä¸ªç»„ä»¶å†…çš„å‡½æ•°ï¼ˆåŒ…æ‹¬äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œeffectsï¼Œå®šæ—¶å™¨æˆ–è€…APIè°ƒç”¨ç­‰ç­‰ï¼‰ä¼šæ•è·æŸæ¬¡æ¸²æŸ“ä¸­å®šä¹‰çš„<code>props</code>å’Œ<code>state</code></li>\n<li>å½“æ›´æ–°çŠ¶æ€æ—¶ï¼ŒReactä¼šé‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚æ¯ä¸€æ¬¡æ¸²æŸ“éƒ½èƒ½æ‹¿åˆ°ç‹¬ç«‹çš„<code>count</code>çŠ¶æ€ï¼Œè¿™ä¸ªçŠ¶æ€å€¼æ˜¯å‡½æ•°ä¸­çš„ä¸€ä¸ªå¸¸é‡</li>\n<li>åœ¨å•æ¬¡æ¸²æŸ“çš„èŒƒå›´å†…ï¼Œ<code>props</code>å’Œ<code>state</code>å§‹ç»ˆä¿æŒä¸å˜</li>\n</ul>\n<blockquote>\n<p>å¦‚æœ<code>props</code>å’Œ<code>state</code>åœ¨ä¸åŒçš„æ¸²æŸ“ä¸­æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œé‚£ä¹ˆä½¿ç”¨åˆ°å®ƒä»¬çš„ä»»ä½•å€¼ä¹Ÿæ˜¯ç‹¬ç«‹çš„ï¼ˆåŒ…æ‹¬äº‹ä»¶å¤„ç†å‡½æ•°ï¼‰ã€‚å®ƒä»¬éƒ½â€œå±äºâ€ä¸€æ¬¡ç‰¹å®šçš„æ¸²æŸ“ã€‚å³ä¾¿æ˜¯äº‹ä»¶å¤„ç†ä¸­çš„å¼‚æ­¥å‡½æ•°è°ƒç”¨â€œçœ‹åˆ°â€çš„ä¹Ÿæ˜¯è¿™æ¬¡æ¸²æŸ“ä¸­çš„<code>count</code>å€¼ã€‚</p>\n</blockquote>\n<h1 id=\"ç»„ä»¶ä¸è¦å°†æ¥æ”¶åˆ°çš„å‚æ•°æœ¬åœ°åŒ–ï¼Œæˆ–è€…è¯´ä½¿ç»„ä»¶å®Œå…¨å—æ§\">ç»„ä»¶ä¸è¦å°†æ¥æ”¶åˆ°çš„å‚æ•°æœ¬åœ°åŒ–ï¼Œæˆ–è€…è¯´ä½¿ç»„ä»¶å®Œå…¨å—æ§</h1>\n<p>å¦‚æœéœ€è¦å¯¹ props è¿›è¡ŒåŠ å·¥ï¼Œå¯ä»¥åˆ©ç”¨ useMemo å¯¹åŠ å·¥è¿‡ç¨‹è¿›è¡Œç¼“å­˜ï¼Œä»…å½“ä¾èµ–å˜åŒ–æ—¶æ‰é‡æ–°æ‰§è¡Œ</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> textColor = <span class=\"hljs-title function_\">useMemo</span>(\n  <span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-title function_\">slowlyCalculateTextColor</span>(color),\n  [color] <span class=\"hljs-comment\">// âœ… Donâ€™t recalculate until `color` changes</span>\n);\n</code></pre>\n"},{"title":"React.jså­¦ä¹ -è‡ªå®šä¹‰hook-1","tags":["React.jså­¦ä¹ ","hook"],"categories":"React.js","description":"# è‡ªå®šä¹‰hookçš„å¥½å¤„\n\nå¯ä»¥æŠŠç»„ä»¶é€»è¾‘æŠ½åˆ°**å¯å¤ç”¨**çš„æ–¹æ³•é‡Œ\n\n# useRequest\n\n```ts\nfunction useRequest<P, T>(api: (params: P) => Promise<T>, params?: P, visiable = true)\n  :[boolean, T|undefined, (params?: P) => void, () => v","createDate":"2020-09-03 09:23:54","updateDate":"2020-10-20 16:48:58","body":"<h1 id=\"è‡ªå®šä¹‰hookçš„å¥½å¤„\">è‡ªå®šä¹‰hookçš„å¥½å¤„</h1>\n<p>å¯ä»¥æŠŠç»„ä»¶é€»è¾‘æŠ½åˆ°<strong>å¯å¤ç”¨</strong>çš„æ–¹æ³•é‡Œ</p>\n<h1 id=\"userequest\">useRequest</h1>\n<pre><code class=\"hljs language-ts\"><span class=\"hljs-keyword\">function</span> useRequest&lt;P, T&gt;(<span class=\"hljs-attr\">api</span>: <span class=\"hljs-function\">(<span class=\"hljs-params\">params: P</span>) =&gt;</span> <span class=\"hljs-title class_\">Promise</span>&lt;T&gt;, params?: P, visiable = <span class=\"hljs-literal\">true</span>)\n  :[<span class=\"hljs-built_in\">boolean</span>, T|<span class=\"hljs-literal\">undefined</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">params?: P</span>) =&gt;</span> <span class=\"hljs-built_in\">void</span>, <span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-built_in\">void</span>] {\n  <span class=\"hljs-keyword\">const</span> [res, setRes] = useState&lt;T&gt;();\n  <span class=\"hljs-keyword\">const</span> [loading, setLoading] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-literal\">false</span>);\n  <span class=\"hljs-keyword\">const</span> [newParams, setNewParams] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-function\">() =&gt;</span> params);\n  <span class=\"hljs-keyword\">const</span> [autoFetch, setAutoFetch] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-function\">() =&gt;</span> visiable);\n\n  <span class=\"hljs-keyword\">const</span> fetch = <span class=\"hljs-title function_\">useCallback</span>(<span class=\"hljs-keyword\">async</span> () =&gt; {\n    <span class=\"hljs-keyword\">if</span> (!newParams &amp;&amp; autoFetch === <span class=\"hljs-literal\">false</span>) <span class=\"hljs-keyword\">return</span>;\n    <span class=\"hljs-keyword\">if</span> (autoFetch) {\n      <span class=\"hljs-keyword\">const</span> _params = (newParams || {}) <span class=\"hljs-keyword\">as</span> P;\n      <span class=\"hljs-title function_\">setLoading</span>(<span class=\"hljs-literal\">true</span>);\n      <span class=\"hljs-keyword\">const</span> tmp = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">api</span>(_params);\n      <span class=\"hljs-title function_\">setRes</span>(tmp);\n      <span class=\"hljs-title function_\">setLoading</span>(<span class=\"hljs-literal\">false</span>);\n    }\n  }, [api, autoFetch, newParams]);\n\n  <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title function_\">fetch</span>();\n  }, [fetch]);\n\n  <span class=\"hljs-keyword\">const</span> doFetch = <span class=\"hljs-title function_\">useCallback</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">rest = <span class=\"hljs-literal\">null</span></span>) =&gt;</span> {\n    <span class=\"hljs-title function_\">setNewParams</span>(rest);\n    <span class=\"hljs-title function_\">setAutoFetch</span>(<span class=\"hljs-literal\">true</span>);\n  }, []);\n\n  <span class=\"hljs-keyword\">return</span> [loading, res, doFetch, fetch];\n}\n</code></pre>\n<h1 id=\"useslider\">useSlider</h1>\n<p>å¦‚æœä½¿ç”¨ä¼ ç»Ÿæ–¹å¼å¼€å‘ï¼ŒUIç•Œé¢ä¸é€»è¾‘å¼ºè€¦åˆåœ¨ä¸€èµ·ï¼Œè‹¥è¦å¼€å‘ä¸€ä¸ªæ¨ªå‘å’Œä¸€ä¸ªç«–å‘åˆ™ä»£ç è¿‡äºå†—ä½™ã€‚äºæ˜¯å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰<code>hook-useSlider</code>å°†æ»‘åŠ¨é€»è¾‘å¤ç”¨</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// ä¼ ç»Ÿæ–¹å¼å¼€å‘</span>\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">React</span>, { useRef, useEffect, useState } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;react&quot;</span>\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Slider</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n    <span class=\"hljs-keyword\">const</span> drag = <span class=\"hljs-title function_\">useRef</span>()\n    <span class=\"hljs-keyword\">const</span> [percent, setPercent] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-number\">0</span>)\n\n    <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n        drag.<span class=\"hljs-property\">current</span>.<span class=\"hljs-property\">style</span>.<span class=\"hljs-property\">left</span> = percent * <span class=\"hljs-number\">300</span> - <span class=\"hljs-number\">12</span> + <span class=\"hljs-string\">&#x27;px&#x27;</span>\n    }, [percent])\n\n    <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">onMouseDown</span>(<span class=\"hljs-params\">e</span>) {\n        e.<span class=\"hljs-title function_\">persist</span>()\n        <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&#x27;mousemove&#x27;</span>, onMouseMove)\n        <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&#x27;mouseup&#x27;</span>, onMouseUp)\n    }\n    <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">onMouseMove</span>(<span class=\"hljs-params\">e</span>) {\n        <span class=\"hljs-keyword\">if</span> (e.<span class=\"hljs-property\">pageX</span> &lt; <span class=\"hljs-number\">0</span> || e.<span class=\"hljs-property\">pageX</span> &gt; <span class=\"hljs-number\">300</span>) <span class=\"hljs-keyword\">return</span>\n        <span class=\"hljs-title function_\">setPercent</span>((e.<span class=\"hljs-property\">pageX</span> / <span class=\"hljs-number\">300</span>))\n        drag.<span class=\"hljs-property\">current</span>.<span class=\"hljs-property\">style</span>.<span class=\"hljs-property\">left</span> = e.<span class=\"hljs-property\">pageX</span> - <span class=\"hljs-number\">12</span> + <span class=\"hljs-string\">&#x27;px&#x27;</span>\n    }\n    <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">onMouseUp</span>(<span class=\"hljs-params\"></span>) {\n        <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">removeEventListener</span>(<span class=\"hljs-string\">&#x27;mousemove&#x27;</span>, onMouseMove)\n        <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">removeEventListener</span>(<span class=\"hljs-string\">&#x27;mouseup&#x27;</span>, onMouseUp)\n    }\n    <span class=\"hljs-keyword\">return</span> (\n        <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{()</span> =&gt;</span> setPercent(0)}&gt;0<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{()</span> =&gt;</span> setPercent(0.5)}&gt;0.5<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{()</span> =&gt;</span> setPercent(1)}&gt;1<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span> \n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>{ percent }<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">position:</span> &#x27;<span class=\"hljs-attr\">relative</span>&#x27; }}&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">height:</span> &#x27;<span class=\"hljs-attr\">15px</span>&#x27;, <span class=\"hljs-attr\">width:</span> &#x27;<span class=\"hljs-attr\">300px</span>&#x27;, <span class=\"hljs-attr\">backgroundColor:</span> &#x27;#<span class=\"hljs-attr\">ccc</span>&#x27; }}&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">{drag}</span> <span class=\"hljs-attr\">onMouseDown</span>=<span class=\"hljs-string\">{</span> <span class=\"hljs-attr\">onMouseDown</span> } <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">width:</span> &#x27;<span class=\"hljs-attr\">35px</span>&#x27;, <span class=\"hljs-attr\">height:</span> &#x27;<span class=\"hljs-attr\">35px</span>&#x27;, <span class=\"hljs-attr\">borderRadius:</span> &#x27;<span class=\"hljs-attr\">50</span>%&#x27;, <span class=\"hljs-attr\">position:</span> &#x27;<span class=\"hljs-attr\">absolute</span>&#x27;, <span class=\"hljs-attr\">backgroundColor:</span> &#x27;#<span class=\"hljs-attr\">aaa</span>&#x27;, <span class=\"hljs-attr\">top:</span> &#x27;<span class=\"hljs-attr\">-10px</span>&#x27;, <span class=\"hljs-attr\">left:</span> <span class=\"hljs-attr\">0</span> }}&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n    )\n}\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-title class_\">Slider</span>\n</code></pre>\n<pre><code class=\"hljs language-jsx\"><span class=\"hljs-comment\">// ä½¿ç”¨è‡ªå®šä¹‰hookå¼€å‘</span>\n\n<span class=\"hljs-comment\">// slider2.0.js</span>\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">React</span>, { useRef, useEffect, useState } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;react&quot;</span>\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">useSlider</span> = (<span class=\"hljs-params\">{ dragWidth, slideWidth, direction =<span class=\"hljs-string\">&#x27;horizontal&#x27;</span> }</span>) =&gt; {\n    <span class=\"hljs-keyword\">const</span> drag = <span class=\"hljs-title function_\">useRef</span>()\n    <span class=\"hljs-keyword\">const</span> [percent, setPercent] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-number\">0</span>)\n    <span class=\"hljs-keyword\">const</span> [originPosition, setOriginPosition] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-function\">() =&gt;</span> ({ <span class=\"hljs-attr\">x</span>: <span class=\"hljs-number\">0</span> ,<span class=\"hljs-attr\">y</span>: <span class=\"hljs-number\">0</span> }))\n\n    <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n        <span class=\"hljs-keyword\">if</span> (direction === <span class=\"hljs-string\">&#x27;horizontal&#x27;</span>) drag.<span class=\"hljs-property\">current</span>.<span class=\"hljs-property\">style</span>.<span class=\"hljs-property\">left</span> = percent * slideWidth - (dragWidth&gt;&gt;<span class=\"hljs-number\">1</span>) + <span class=\"hljs-string\">&#x27;px&#x27;</span>\n        <span class=\"hljs-keyword\">else</span> drag.<span class=\"hljs-property\">current</span>.<span class=\"hljs-property\">style</span>.<span class=\"hljs-property\">top</span> = percent * slideWidth - (dragWidth&gt;&gt;<span class=\"hljs-number\">1</span>) + <span class=\"hljs-string\">&#x27;px&#x27;</span>\n    }, [percent])\n\n    <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n        <span class=\"hljs-keyword\">const</span> { left, top } = drag.<span class=\"hljs-property\">current</span>.<span class=\"hljs-title function_\">getBoundingClientRect</span>()\n        <span class=\"hljs-title function_\">setOriginPosition</span>({ <span class=\"hljs-attr\">x</span>: left, <span class=\"hljs-attr\">y</span>: top })\n        <span class=\"hljs-keyword\">return</span> onMouseUp\n    }, [drag])\n    \n    <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">onMouseDown</span>(<span class=\"hljs-params\"></span>) {\n        <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&#x27;mousemove&#x27;</span>, onMouseMove)\n        <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&#x27;mouseup&#x27;</span>, onMouseUp)\n    }\n\n    <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">onMouseMove</span>(<span class=\"hljs-params\">e</span>) {\n        <span class=\"hljs-keyword\">if</span> (direction === <span class=\"hljs-string\">&#x27;horizontal&#x27;</span>) {\n            <span class=\"hljs-keyword\">const</span> pos = e.<span class=\"hljs-property\">pageX</span> - originPosition.<span class=\"hljs-property\">x</span> - (dragWidth&gt;&gt;<span class=\"hljs-number\">1</span>)\n            <span class=\"hljs-keyword\">if</span> (pos &lt; <span class=\"hljs-number\">0</span> || pos &gt; slideWidth) <span class=\"hljs-keyword\">return</span>\n            <span class=\"hljs-title function_\">setPercent</span>(pos / slideWidth)\n            drag.<span class=\"hljs-property\">current</span>.<span class=\"hljs-property\">style</span>.<span class=\"hljs-property\">left</span> = pos - (dragWidth&gt;&gt;<span class=\"hljs-number\">1</span>) + <span class=\"hljs-string\">&#x27;px&#x27;</span>\n        } <span class=\"hljs-keyword\">else</span> {\n            <span class=\"hljs-keyword\">const</span> pos = e.<span class=\"hljs-property\">pageY</span> - originPosition.<span class=\"hljs-property\">y</span> - (dragWidth&gt;&gt;<span class=\"hljs-number\">1</span>)\n            <span class=\"hljs-keyword\">if</span> (pos &lt; <span class=\"hljs-number\">0</span> || pos &gt; slideWidth) <span class=\"hljs-keyword\">return</span>\n            <span class=\"hljs-title function_\">setPercent</span>(pos / slideWidth)\n            drag.<span class=\"hljs-property\">current</span>.<span class=\"hljs-property\">style</span>.<span class=\"hljs-property\">top</span> = pos - (dragWidth&gt;&gt;<span class=\"hljs-number\">1</span>) + <span class=\"hljs-string\">&#x27;px&#x27;</span>\n        }\n    }\n    <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">onMouseUp</span>(<span class=\"hljs-params\"></span>) {\n        <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">removeEventListener</span>(<span class=\"hljs-string\">&#x27;mousemove&#x27;</span>, onMouseMove)\n        <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">removeEventListener</span>(<span class=\"hljs-string\">&#x27;mouseup&#x27;</span>, onMouseUp)\n    }\n\n    <span class=\"hljs-keyword\">return</span> [\n        drag,\n        percent,\n        onMouseDown,\n        setPercent\n    ]\n}\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Slider</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n    <span class=\"hljs-keyword\">const</span> [ dragH, percentH, onDragMouseDownH, setPercentH ] = <span class=\"hljs-title function_\">useSlider</span>({ <span class=\"hljs-attr\">dragWidth</span>: <span class=\"hljs-number\">35</span>, <span class=\"hljs-attr\">slideWidth</span>: <span class=\"hljs-number\">300</span> })\n    <span class=\"hljs-keyword\">const</span> [ dragV, percentV, onDragMouseDownV, setPercentV ] = <span class=\"hljs-title function_\">useSlider</span>({ <span class=\"hljs-attr\">dragWidth</span>: <span class=\"hljs-number\">35</span>, <span class=\"hljs-attr\">slideWidth</span>: <span class=\"hljs-number\">300</span>, <span class=\"hljs-attr\">direction</span>: <span class=\"hljs-string\">&#x27;vertical&#x27;</span> })\n    <span class=\"hljs-keyword\">return</span> (\n        <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;&gt;</span>\n        {/* å¯ä»¥åˆ†åˆ«åˆ›å»ºä¸€ä¸ªSliderV.jså’ŒSliderH.js */}\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">marginLeft:</span> &#x27;<span class=\"hljs-attr\">20px</span>&#x27; }}&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>æ¨ªå‘<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>            \n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{()</span> =&gt;</span> setPercentH(0)}&gt;0<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{()</span> =&gt;</span> setPercentH(0.5)}&gt;0.5<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{()</span> =&gt;</span> setPercentH(1)}&gt;1<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span> \n                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>{ percentH }<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">position:</span> &#x27;<span class=\"hljs-attr\">relative</span>&#x27; }}&gt;</span>\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">height:</span> &#x27;<span class=\"hljs-attr\">15px</span>&#x27;, <span class=\"hljs-attr\">width:</span> &#x27;<span class=\"hljs-attr\">300px</span>&#x27;, <span class=\"hljs-attr\">backgroundColor:</span> &#x27;#<span class=\"hljs-attr\">ccc</span>&#x27; }}&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">width:</span> `${<span class=\"hljs-attr\">percentH</span> * <span class=\"hljs-attr\">300</span>}<span class=\"hljs-attr\">px</span>`, <span class=\"hljs-attr\">height:</span> &#x27;<span class=\"hljs-attr\">15px</span>&#x27;, <span class=\"hljs-attr\">position:</span> &#x27;<span class=\"hljs-attr\">absolute</span>&#x27;, <span class=\"hljs-attr\">top:</span> &#x27;<span class=\"hljs-attr\">0</span>&#x27;, <span class=\"hljs-attr\">backgroundColor:</span> &#x27;#<span class=\"hljs-attr\">f00</span>&#x27; }}&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">{dragH}</span> <span class=\"hljs-attr\">onMouseDown</span>=<span class=\"hljs-string\">{onDragMouseDownH}</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">width:</span> &#x27;<span class=\"hljs-attr\">35px</span>&#x27;, <span class=\"hljs-attr\">height:</span> &#x27;<span class=\"hljs-attr\">35px</span>&#x27;, <span class=\"hljs-attr\">borderRadius:</span> &#x27;<span class=\"hljs-attr\">50</span>%&#x27;, <span class=\"hljs-attr\">position:</span> &#x27;<span class=\"hljs-attr\">absolute</span>&#x27;, <span class=\"hljs-attr\">backgroundColor:</span> &#x27;#<span class=\"hljs-attr\">aaa</span>&#x27;, <span class=\"hljs-attr\">left:</span> <span class=\"hljs-attr\">0</span>, <span class=\"hljs-attr\">top:</span> &#x27;<span class=\"hljs-attr\">-10px</span>&#x27; }}&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">marginLeft:</span> &#x27;<span class=\"hljs-attr\">20px</span>&#x27; }}&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>ç«–å‘<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>            \n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{()</span> =&gt;</span> setPercentV(0)}&gt;0<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{()</span> =&gt;</span> setPercentV(0.5)}&gt;0.5<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{()</span> =&gt;</span> setPercentV(1)}&gt;1<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span> \n                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>{ percentV }<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">position:</span> &#x27;<span class=\"hljs-attr\">relative</span>&#x27; }}&gt;</span>\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">height:</span> &#x27;<span class=\"hljs-attr\">300px</span>&#x27;, <span class=\"hljs-attr\">width:</span> &#x27;<span class=\"hljs-attr\">15px</span>&#x27;, <span class=\"hljs-attr\">backgroundColor:</span> &#x27;#<span class=\"hljs-attr\">ccc</span>&#x27; }}&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">height:</span> `${<span class=\"hljs-attr\">percentV</span> * <span class=\"hljs-attr\">300</span>}<span class=\"hljs-attr\">px</span>`, <span class=\"hljs-attr\">width:</span> &#x27;<span class=\"hljs-attr\">15px</span>&#x27;, <span class=\"hljs-attr\">position:</span> &#x27;<span class=\"hljs-attr\">absolute</span>&#x27;, <span class=\"hljs-attr\">left:</span> &#x27;<span class=\"hljs-attr\">0</span>&#x27;, <span class=\"hljs-attr\">top:</span> &#x27;<span class=\"hljs-attr\">0</span>&#x27;, <span class=\"hljs-attr\">backgroundColor:</span> &#x27;#<span class=\"hljs-attr\">f00</span>&#x27; }}&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">{dragV}</span> <span class=\"hljs-attr\">onMouseDown</span>=<span class=\"hljs-string\">{onDragMouseDownV}</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">width:</span> &#x27;<span class=\"hljs-attr\">35px</span>&#x27;, <span class=\"hljs-attr\">height:</span> &#x27;<span class=\"hljs-attr\">35px</span>&#x27;, <span class=\"hljs-attr\">borderRadius:</span> &#x27;<span class=\"hljs-attr\">50</span>%&#x27;, <span class=\"hljs-attr\">position:</span> &#x27;<span class=\"hljs-attr\">absolute</span>&#x27;, <span class=\"hljs-attr\">backgroundColor:</span> &#x27;#<span class=\"hljs-attr\">aaa</span>&#x27;, <span class=\"hljs-attr\">top:</span> <span class=\"hljs-attr\">0</span>, <span class=\"hljs-attr\">left:</span> &#x27;<span class=\"hljs-attr\">-10px</span>&#x27; }}&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/&gt;</span></span>\n    )\n}\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-title class_\">Slider</span>\n</code></pre>\n<h1 id=\"ref\">Ref:</h1>\n<p><a href=\"https://juejin.im/post/6844904021984018439\">React Hook ç³»åˆ—ï¼ˆäºŒï¼‰ï¼šè‡ªå®šä¹‰hookçš„ä¸€äº›å®è·µ</a></p>\n"},{"title":"React.jså­¦ä¹ -è‡ªå®šä¹‰hook-2","tags":["React.jså­¦ä¹ ","hook"],"categories":"React.js","description":"# DOM å‰¯ä½œç”¨ä¿®æ”¹ / ç›‘å¬\n\n## ä¿®æ”¹é¡µé¢ title\n\nåœ¨ç»„ä»¶é‡Œè°ƒç”¨`useDocumentTitle`å³å¯è®¾ç½®é¡µé¢æ ‡é¢˜ï¼Œä¸”åˆ‡æ¢é¡µé¢æ—¶ï¼Œé¡µé¢æ ‡é¢˜é‡ç½®ä¸ºé»˜è®¤æ ‡é¢˜ â€œReact.jså­¦ä¹ â€\n\n```js\nconst useDocumentTitle = (newTitle: string) => {\n\tuseEffect(() => {\n  \tdocument.title = title","createDate":"2020-10-19 15:11:13","updateDate":"2020-10-20 03:22:35","body":"<h1 id=\"dom-å‰¯ä½œç”¨ä¿®æ”¹--ç›‘å¬\">DOM å‰¯ä½œç”¨ä¿®æ”¹ / ç›‘å¬</h1>\n<h2 id=\"ä¿®æ”¹é¡µé¢-title\">ä¿®æ”¹é¡µé¢ title</h2>\n<p>åœ¨ç»„ä»¶é‡Œè°ƒç”¨<code>useDocumentTitle</code>å³å¯è®¾ç½®é¡µé¢æ ‡é¢˜ï¼Œä¸”åˆ‡æ¢é¡µé¢æ—¶ï¼Œé¡µé¢æ ‡é¢˜é‡ç½®ä¸ºé»˜è®¤æ ‡é¢˜ â€œReact.jså­¦ä¹ â€</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">useDocumentTitle</span> = (<span class=\"hljs-params\">newTitle: string</span>) =&gt; {\n    <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n      <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">title</span> = title\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-function\">() =&gt;</span> {\n        <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">title</span> = <span class=\"hljs-string\">&quot;React.jså­¦ä¹ &quot;</span>\n    }\n  }, [newTitle])\n}\n</code></pre>\n<h2 id=\"ç›‘å¬é¡µé¢å¤§å°å‘ç”Ÿæ”¹å˜ï¼ˆç½‘ç»œçŠ¶å†µå‘ç”Ÿæ”¹å˜ï¼‰ï¼Œé‡æ–°æ¸²æŸ“ç•Œé¢\">ç›‘å¬é¡µé¢å¤§å°å‘ç”Ÿæ”¹å˜ï¼ˆç½‘ç»œçŠ¶å†µå‘ç”Ÿæ”¹å˜ï¼‰ï¼Œé‡æ–°æ¸²æŸ“ç•Œé¢</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getSize</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">const</span> { innerWidth, innerHeight, outerHeight, outerWidth } = <span class=\"hljs-variable language_\">window</span>\n  <span class=\"hljs-keyword\">return</span> {\n    innerWidth,\n    innerHeight,\n    outerHeight,\n    outerWidth\n  };\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">useWindowSizeChange</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">const</span> [windowSize, setWindowSize] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-title function_\">getSize</span>());\n\n  <span class=\"hljs-keyword\">const</span> onWindowSizeChange = <span class=\"hljs-title function_\">useCallback</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title function_\">setWindowSize</span>(<span class=\"hljs-title function_\">getSize</span>());\n  }, [])\n\n  <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&#x27;resize&#x27;</span>, onWindowSizeChange);\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-function\">() =&gt;</span> {\n      <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">removeEventListener</span>(<span class=\"hljs-string\">&#x27;resize&#x27;</span>, onWindowSizeChange);\n    }\n  }, [onWindowSizeChange])\n\n  <span class=\"hljs-keyword\">return</span> windowSize;\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getInternetState</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">const</span> { onLine } = navigator\n  <span class=\"hljs-keyword\">return</span> onLine ? <span class=\"hljs-string\">&#x27;online&#x27;</span> : <span class=\"hljs-string\">&#x27;offline&#x27;</span>\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">useInternetStateChange</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">const</span> [internetState, setInternetState] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-title function_\">getInternetState</span>())\n\n  <span class=\"hljs-keyword\">const</span> onInternetStateChange = <span class=\"hljs-title function_\">useCallback</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title function_\">setInternetState</span>(<span class=\"hljs-title function_\">getInternetState</span>())\n  }, [])\n\n  <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&quot;online&quot;</span>, onInternetStateChange)\n    <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&quot;offline&quot;</span>, onInternetStateChange)\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-function\">() =&gt;</span> {\n      <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">removeEventListener</span>(<span class=\"hljs-string\">&quot;online&quot;</span>, onInternetStateChange)\n      <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">removeEventListener</span>(<span class=\"hljs-string\">&quot;offline&quot;</span>, onInternetStateChange)\n    }\n  }, [onInternetStateChange])\n\n  <span class=\"hljs-keyword\">return</span> internetState\n}\n</code></pre>\n"},{"title":"Vue.jså­¦ä¹ -$nextTick","tags":["$nextTick"],"categories":"Vue.js","description":"# [å¼‚æ­¥æ›´æ–°]([https://cn.vuejs.org/v2/guide/reactivity.html#%E5%BC%82%E6%AD%A5%E6%9B%B4%E6%96%B0%E9%98%9F%E5%88%97](https://cn.vuejs.org/v2/guide/reactivity.html#%E5%BC%82%E6%AD%A5%E6%9B%B4%E6%96%B0%E9%","createDate":"2020-05-07 23:20:25","updateDate":"2020-10-16 17:33:23","body":"<h1 id=\"å¼‚æ­¥æ›´æ–°\"><a href=\"%5Bhttps://cn.vuejs.org/v2/guide/reactivity.html#%E5%BC%82%E6%AD%A5%E6%9B%B4%E6%96%B0%E9%98%9F%E5%88%97%5D(https://cn.vuejs.org/v2/guide/reactivity.html#%E5%BC%82%E6%AD%A5%E6%9B%B4%E6%96%B0%E9%98%9F%E5%88%97)\">å¼‚æ­¥æ›´æ–°</a></h1>\n<p>Vue åœ¨æ›´æ–° DOM æ—¶æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ã€‚åªè¦ä¾¦å¬åˆ°æ•°æ®å˜åŒ–ï¼ŒVue å°†å¼€å¯ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå¹¶ç¼“å†²åœ¨åŒä¸€äº‹ä»¶å¾ªç¯ä¸­å‘ç”Ÿçš„æ‰€æœ‰æ•°æ®å˜æ›´ã€‚å¦‚æœåŒä¸€ä¸ª watcher è¢«å¤šæ¬¡è§¦å‘ï¼Œåªä¼šè¢«æ¨å…¥åˆ°é˜Ÿåˆ—ä¸­ä¸€æ¬¡ã€‚è¿™ç§åœ¨ç¼“å†²æ—¶å»é™¤é‡å¤æ•°æ®å¯¹äºé¿å…ä¸å¿…è¦çš„è®¡ç®—å’Œ DOM æ“ä½œæ˜¯éå¸¸é‡è¦çš„ã€‚ç„¶åï¼Œåœ¨ä¸‹ä¸€ä¸ªçš„äº‹ä»¶å¾ªç¯â€œtickâ€ä¸­ï¼ŒVue åˆ·æ–°é˜Ÿåˆ—å¹¶æ‰§è¡Œå®é™… (å·²å»é‡çš„) å·¥ä½œã€‚Vue åœ¨å†…éƒ¨å¯¹å¼‚æ­¥é˜Ÿåˆ—å°è¯•ä½¿ç”¨åŸç”Ÿçš„ Promise.thenã€MutationObserver å’Œ setImmediateï¼Œå¦‚æœæ‰§è¡Œç¯å¢ƒä¸æ”¯æŒï¼Œåˆ™ä¼šé‡‡ç”¨ setTimeout(fn, 0) ä»£æ›¿ã€‚</p>\n<p>è¿™æ ·åšä¸»è¦æ˜¯ä¸ºäº†æå‡æ€§èƒ½ï¼Œå› ä¸ºå¦‚æœåœ¨ä¸»çº¿ç¨‹ä¸­æ›´æ–°DOMï¼Œå¾ªç¯100æ¬¡å°±è¦æ›´æ–°100æ¬¡DOMï¼›ä½†æ˜¯å¦‚æœç­‰å¾…äº‹ä»¶å¾ªç¯å®Œæˆä¹‹åå†æ›´æ–°DOMï¼Œåªéœ€è¦æ›´æ–°ä¸€æ¬¡ã€‚ä¸ºäº†åœ¨æ•°æ®æ›´æ–°æ“ä½œä¹‹åæ“ä½œDOMï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ•°æ®å˜åŒ–ä¹‹åç«‹å³ä½¿ç”¨<code>Vue.nextTick(callback)</code>ï¼›è¿™æ ·å›è°ƒå‡½æ•°ä¼šåœ¨DOMæ›´æ–°å®Œæˆåè¢«è°ƒç”¨ï¼Œå°±å¯ä»¥æ‹¿åˆ°æœ€æ–°çš„DOMå…ƒç´ äº†ã€‚</p>\n<h1 id=\"nexttickæºç åˆ†æ\"><code>$nextTick</code>æºç åˆ†æ</h1>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// /src/core/util/next-tick.js</span>\n<span class=\"hljs-keyword\">const</span> callbacks = []\n<span class=\"hljs-keyword\">let</span> pending = <span class=\"hljs-literal\">false</span>\n<span class=\"hljs-keyword\">let</span> timerFunc\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">nextTick</span> (cb?: <span class=\"hljs-title class_\">Function</span>, ctx?: <span class=\"hljs-title class_\">Object</span>) {\n  <span class=\"hljs-keyword\">let</span> _resolve\n  callbacks.<span class=\"hljs-title function_\">push</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">if</span> (cb) {\n      <span class=\"hljs-keyword\">try</span> {\n        cb.<span class=\"hljs-title function_\">call</span>(ctx)\n      } <span class=\"hljs-keyword\">catch</span> (e) {\n        <span class=\"hljs-title function_\">handleError</span>(e, ctx, <span class=\"hljs-string\">&#x27;nextTick&#x27;</span>)\n      }\n    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (_resolve) {\n      <span class=\"hljs-title function_\">_resolve</span>(ctx)\n    }\n  })\n  <span class=\"hljs-keyword\">if</span> (!pending) {\n    pending = <span class=\"hljs-literal\">true</span>\n    <span class=\"hljs-title function_\">timerFunc</span>()\n  }\n  <span class=\"hljs-comment\">// $flow-disable-line</span>\n  <span class=\"hljs-keyword\">if</span> (!cb &amp;&amp; <span class=\"hljs-keyword\">typeof</span> <span class=\"hljs-title class_\">Promise</span> !== <span class=\"hljs-string\">&#x27;undefined&#x27;</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">resolve</span> =&gt;</span> {\n      _resolve = resolve\n    })\n  }\n}\n</code></pre>\n<p>æ¯æ¬¡è°ƒç”¨$nextTickå°±æ˜¯åœ¨å‘callbacksæ–°å¢å›è°ƒå‡½æ•°.callbacksæ–°å¢å›è°ƒå‡½æ•°ååˆæ‰§è¡Œäº†timerFuncå‡½æ•°ï¼Œ<code>pending</code>ç”¨æ¥æ ‡è¯†åŒä¸€ä¸ªæ—¶é—´åªèƒ½æ‰§è¡Œä¸€æ¬¡ã€‚</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">let</span> isUsingMicroTask = <span class=\"hljs-literal\">false</span>\n<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> <span class=\"hljs-title class_\">Promise</span> !== <span class=\"hljs-string\">&#x27;undefined&#x27;</span> &amp;&amp; <span class=\"hljs-title function_\">isNative</span>(<span class=\"hljs-title class_\">Promise</span>)) {\n  <span class=\"hljs-comment\">//åˆ¤æ–­1ï¼šæ˜¯å¦åŸç”Ÿæ”¯æŒPromise</span>\n  <span class=\"hljs-keyword\">const</span> p = <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">resolve</span>()\n  timerFunc = <span class=\"hljs-function\">() =&gt;</span> {\n    p.<span class=\"hljs-title function_\">then</span>(flushCallbacks)\n    <span class=\"hljs-keyword\">if</span> (isIOS) <span class=\"hljs-built_in\">setTimeout</span>(noop)\n  }\n  isUsingMicroTask = <span class=\"hljs-literal\">true</span>\n} <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (!isIE &amp;&amp; <span class=\"hljs-keyword\">typeof</span> <span class=\"hljs-title class_\">MutationObserver</span> !== <span class=\"hljs-string\">&#x27;undefined&#x27;</span> &amp;&amp; (\n  <span class=\"hljs-title function_\">isNative</span>(<span class=\"hljs-title class_\">MutationObserver</span>) ||\n  <span class=\"hljs-title class_\">MutationObserver</span>.<span class=\"hljs-title function_\">toString</span>() === <span class=\"hljs-string\">&#x27;[object MutationObserverConstructor]&#x27;</span>\n)) {\n  <span class=\"hljs-comment\">//åˆ¤æ–­2ï¼šæ˜¯å¦åŸç”Ÿæ”¯æŒMutationObserver</span>\n  <span class=\"hljs-keyword\">let</span> counter = <span class=\"hljs-number\">1</span>\n  <span class=\"hljs-keyword\">const</span> observer = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">MutationObserver</span>(flushCallbacks)\n  <span class=\"hljs-keyword\">const</span> textNode = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createTextNode</span>(<span class=\"hljs-title class_\">String</span>(counter))\n  observer.<span class=\"hljs-title function_\">observe</span>(textNode, {\n    <span class=\"hljs-attr\">characterData</span>: <span class=\"hljs-literal\">true</span>\n  })\n  timerFunc = <span class=\"hljs-function\">() =&gt;</span> {\n    counter = (counter + <span class=\"hljs-number\">1</span>) % <span class=\"hljs-number\">2</span>\n    textNode.<span class=\"hljs-property\">data</span> = <span class=\"hljs-title class_\">String</span>(counter)\n  }\n  isUsingMicroTask = <span class=\"hljs-literal\">true</span>\n} <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> setImmediate !== <span class=\"hljs-string\">&#x27;undefined&#x27;</span> &amp;&amp; <span class=\"hljs-title function_\">isNative</span>(setImmediate)) {\n  <span class=\"hljs-comment\">//åˆ¤æ–­3ï¼šæ˜¯å¦åŸç”Ÿæ”¯æŒsetImmediate</span>\n  timerFunc = <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title function_\">setImmediate</span>(flushCallbacks)\n  }\n} <span class=\"hljs-keyword\">else</span> {\n  <span class=\"hljs-comment\">//åˆ¤æ–­4ï¼šä¸Šé¢éƒ½ä¸è¡Œï¼Œç›´æ¥ç”¨setTimeout</span>\n  timerFunc = <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-built_in\">setTimeout</span>(flushCallbacks, <span class=\"hljs-number\">0</span>)\n  }\n}\n</code></pre>\n<p><code>timerFunc</code>åšäº†å››ä¸ªåˆ¤æ–­ï¼Œå¯¹å½“å‰ç¯å¢ƒè¿›è¡Œä¸æ–­çš„é™çº§å¤„ç†ï¼Œå°è¯•ä½¿ç”¨åŸç”Ÿçš„<code>Promise.then</code>ã€<code>MutationObserver</code>å’Œ<code>setImmediate</code>ï¼Œä¸Šè¿°ä¸‰ä¸ªéƒ½ä¸æ”¯æŒæœ€åä½¿ç”¨setTimeoutï¼›é™çº§å¤„ç†çš„ç›®çš„éƒ½æ˜¯å°†<code>flushCallbacks</code>å‡½æ•°æ”¾å…¥å¾®ä»»åŠ¡(åˆ¤æ–­1å’Œåˆ¤æ–­2)æˆ–è€…å®ä»»åŠ¡(åˆ¤æ–­3å’Œåˆ¤æ–­4)ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡äº‹ä»¶å¾ªç¯æ—¶æ¥æ‰§è¡Œã€‚<code>MutationObserver</code>æ˜¯Html5çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œç”¨æ¥ç›‘å¬ç›®æ ‡DOMç»“æ„æ˜¯å¦æ”¹å˜ï¼Œä¹Ÿå°±æ˜¯ä»£ç ä¸­æ–°å»ºçš„textNodeï¼›å¦‚æœæ”¹å˜äº†å°±æ‰§è¡Œ<code>MutationObserver</code>æ„é€ å‡½æ•°ä¸­çš„å›è°ƒå‡½æ•°ï¼Œä¸è¿‡æ˜¯å®ƒæ˜¯åœ¨å¾®ä»»åŠ¡ä¸­æ‰§è¡Œçš„ã€‚</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">flushCallbacks</span> () {\n  pending = <span class=\"hljs-literal\">false</span>\n  <span class=\"hljs-keyword\">const</span> copies = callbacks.<span class=\"hljs-title function_\">slice</span>(<span class=\"hljs-number\">0</span>)\n  callbacks.<span class=\"hljs-property\">length</span> = <span class=\"hljs-number\">0</span>\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>; i &lt; copies.<span class=\"hljs-property\">length</span>; i++) {\n    copies[i]()\n  }\n}\n</code></pre>\n<p><code>flushCallbacks</code>æŠŠ<code>callbacks</code>æ•°ç»„å¤åˆ¶ä¸€ä»½ï¼Œç„¶åæŠŠ<code>callbacks</code>ç½®ä¸ºç©ºï¼Œæœ€åæŠŠå¤åˆ¶å‡ºæ¥çš„æ•°ç»„ä¸­çš„æ¯ä¸ªå‡½æ•°ä¾æ¬¡æ‰§è¡Œä¸€éï¼›æ‰€ä»¥å®ƒçš„ä½œç”¨ä»…ä»…æ˜¯ç”¨æ¥æ‰§è¡Œ<code>callbacksä¸­</code>çš„å›è°ƒå‡½æ•°ã€‚</p>\n<h1 id=\"æ€»ç»“\">æ€»ç»“</h1>\n<p><code>$nextTick</code>çš„æ€»ä½“æµç¨‹å¤§è‡´æ˜¯ï¼š</p>\n<ol>\n<li>æŠŠå›è°ƒå‡½æ•°æ”¾å…¥<code>callbacks</code>ä¸­æ‰§è¡Œï¼Œ<code>callpacks.push</code></li>\n<li>å°†æ‰§è¡Œå‡½æ•°æ”¾åˆ°å¾®ä»»åŠ¡ä¼šå®ä»»åŠ¡ä¸­ï¼Œ<code>timerFunc</code></li>\n<li>äº‹ä»¶å¾ªç¯åˆ°äº†å¾®ä»»åŠ¡æˆ–å®ä»»åŠ¡ï¼Œæ‰§è¡Œå‡½æ•°ä¾æ¬¡æ‰§è¡Œ<code>callbacks</code>ä¸­çš„å›è°ƒï¼Œ<code>flushCallbacks</code></li>\n</ol>\n"},{"title":"React.jså­¦ä¹ -å›¾ç‰‡æ‡’åŠ è½½ï¼ˆé«˜é˜¶ç»„ä»¶å®ç°ï¼‰","tags":["React.jså­¦ä¹ ","HOC"],"categories":"React.js","description":"# æ‡’åŠ è½½å®ç°æ–¹å¼\n\nHTML5æ–°APIï¼š`new IntersectionObserver(callback)`\n\nè§‚å¯Ÿä¸€ä¸ªå…ƒç´ åï¼Œå½“å…ƒç´ å‡ºç°åœ¨è§†å£å†…ï¼Œä¼šè§¦å‘å›è°ƒ\n\n[å…¶ä»–å®ç°æ–¹å¼]([http://blog.p18c.top/2020/04/24/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84&%E8%BD%AF%E5%AE%9E%E5%8A%9B-%E9%A2%","createDate":"2020-05-12 23:03:54","updateDate":"2020-10-16 17:33:00","body":"<h1 id=\"æ‡’åŠ è½½å®ç°æ–¹å¼\">æ‡’åŠ è½½å®ç°æ–¹å¼</h1>\n<p>HTML5æ–°APIï¼š<code>new IntersectionObserver(callback)</code></p>\n<p>è§‚å¯Ÿä¸€ä¸ªå…ƒç´ åï¼Œå½“å…ƒç´ å‡ºç°åœ¨è§†å£å†…ï¼Œä¼šè§¦å‘å›è°ƒ</p>\n<p><a href=\"%5Bhttp://blog.p18c.top/2020/04/24/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84&amp;%E8%BD%AF%E5%AE%9E%E5%8A%9B-%E9%A2%84%E5%8A%A0%E8%BD%BD&amp;%E6%87%92%E5%8A%A0%E8%BD%BD/%5D(http://blog.p18c.top/2020/04/24/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84&amp;%E8%BD%AF%E5%AE%9E%E5%8A%9B-%E9%A2%84%E5%8A%A0%E8%BD%BD&amp;%E6%87%92%E5%8A%A0%E8%BD%BD/)\">å…¶ä»–å®ç°æ–¹å¼</a></p>\n<h1 id=\"ä»£ç å®ç°\">ä»£ç å®ç°</h1>\n<pre><code class=\"hljs language-tsx\"><span class=\"hljs-comment\">// MLazyLoad.tsx</span>\n\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">React</span>, { useEffect, useRef, useState } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;react&#x27;</span>;\n<span class=\"hljs-keyword\">import</span> { clone } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;ramda&#x27;</span>;\n\n\n<span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title class_\">PropsI</span> {\n  <span class=\"hljs-attr\">element</span>: <span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-variable constant_\">JSX</span>.<span class=\"hljs-property\">Element</span>,\n}\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title class_\">LazyLoad</span>: <span class=\"hljs-title class_\">React</span>.<span class=\"hljs-property\">FC</span>&lt;<span class=\"hljs-title class_\">PropsI</span>&gt; = <span class=\"hljs-function\">(<span class=\"hljs-params\">props: PropsI</span>) =&gt;</span> {\n  <span class=\"hljs-keyword\">const</span> [<span class=\"hljs-title class_\">Element</span>, setElement] = useState&lt;<span class=\"hljs-variable constant_\">JSX</span>.<span class=\"hljs-property\">Element</span>&gt;(props.<span class=\"hljs-title function_\">element</span>());\n  <span class=\"hljs-keyword\">const</span> elementRef = useRef&lt;<span class=\"hljs-title class_\">HTMLDivElement</span>&gt;(<span class=\"hljs-literal\">null</span>);\n  <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    (<span class=\"hljs-keyword\">async</span> () =&gt; {\n      <span class=\"hljs-keyword\">if</span> (!elementRef || !elementRef.<span class=\"hljs-property\">current</span>) <span class=\"hljs-keyword\">return</span>;\n      <span class=\"hljs-keyword\">const</span> observer = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">IntersectionObserver</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">changes</span>) =&gt;</span> {\n        changes.<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">change</span>) =&gt;</span> {\n          <span class=\"hljs-keyword\">if</span> (change.<span class=\"hljs-property\">isIntersecting</span>) {\n            <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title class_\">Com</span> = <span class=\"hljs-title function_\">clone</span>(<span class=\"hljs-title class_\">Element</span>);\n            <span class=\"hljs-title class_\">Com</span>.<span class=\"hljs-property\">props</span>.<span class=\"hljs-property\">src</span> = <span class=\"hljs-title class_\">Com</span>.<span class=\"hljs-property\">props</span>[<span class=\"hljs-string\">&#x27;data-src&#x27;</span>];\n            <span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">deleteProperty</span>(<span class=\"hljs-title class_\">Com</span>.<span class=\"hljs-property\">props</span>, <span class=\"hljs-string\">&#x27;data-src&#x27;</span>);\n            <span class=\"hljs-title function_\">setElement</span>(<span class=\"hljs-title class_\">Com</span>);\n            observer.<span class=\"hljs-title function_\">unobserve</span>(change.<span class=\"hljs-property\">target</span>);\n          }\n        });\n      });\n      observer.<span class=\"hljs-title function_\">observe</span>(elementRef.<span class=\"hljs-property\">current</span>);\n    })();\n  }, []);\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">{elementRef}</span>&gt;</span>\n      {\n        Element\n      }\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n  );\n};\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">element: () =&gt; JSX.Element</span>) {\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">LazyLoad</span> <span class=\"hljs-attr\">element</span>=<span class=\"hljs-string\">{element}</span> /&gt;</span></span>\n  );\n}\n</code></pre>\n<h1 id=\"ä½¿ç”¨æ–¹å¼\">ä½¿ç”¨æ–¹å¼</h1>\n<pre><code class=\"hljs language-tsx\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">ImageNode</span> = (<span class=\"hljs-params\"></span>) =&gt; <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">img</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">{style.itemImg}</span> <span class=\"hljs-attr\">data-src</span>=<span class=\"hljs-string\">&quot;xxx&quot;</span> <span class=\"hljs-attr\">alt</span>=<span class=\"hljs-string\">&quot;&quot;</span> /&gt;</span></span>;\n\n<span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n    {\n        lazyLoad(ImageNode)\n    }\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n</code></pre>\n<h1 id=\"æ•ˆæœ\">æ•ˆæœ</h1>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/lazyload.gif\" alt=\"lazyload\"></p>\n"},{"title":"æœåŠ¡ç«¯æ¸²æŸ“-ç®€ä»‹","tags":["SSR"],"categories":"æœåŠ¡ç«¯æ¸²æŸ“","description":"# ä»€ä¹ˆæ˜¯SSR\r\n\r\n`SSR`(server side rendering)ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“ã€‚å½“åç«¯/æœåŠ¡å™¨æ¥æ”¶åˆ°ç½‘ç»œè¯·æ±‚åï¼Œç”Ÿæˆ(æ¸²æŸ“)`HTML`å­—ç¬¦ä¸²ï¼Œå°†å®ƒä»¬ç›´æ¥å‘é€åˆ°æµè§ˆå™¨\r\n\r\nä¸ä¹‹å¯¹ç«‹çš„åˆ™æ˜¯`CSR`(client side rendering)ï¼Œå®¢æˆ·ç«¯æ¸²æŸ“ã€‚åç«¯ä¸æä¾›å®Œæ•´çš„`html`é¡µé¢ï¼Œè€Œæ˜¯æä¾›ä¸€äº›`api`ä½¿å¾—å‰ç«¯å¯ä»¥è·å–`json`æ•°æ®ï¼Œç„¶åå‰ç«¯æ‹¿åˆ°`json`æ•°æ®ä¹‹","createDate":"2020-07-28 11:15:28","updateDate":"2020-10-16 17:32:50","body":"<h1 id=\"ä»€ä¹ˆæ˜¯ssr\">ä»€ä¹ˆæ˜¯SSR</h1>\n<p><code>SSR</code>(server side rendering)ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“ã€‚å½“åç«¯/æœåŠ¡å™¨æ¥æ”¶åˆ°ç½‘ç»œè¯·æ±‚åï¼Œç”Ÿæˆ(æ¸²æŸ“)<code>HTML</code>å­—ç¬¦ä¸²ï¼Œå°†å®ƒä»¬ç›´æ¥å‘é€åˆ°æµè§ˆå™¨</p>\n<p>ä¸ä¹‹å¯¹ç«‹çš„åˆ™æ˜¯<code>CSR</code>(client side rendering)ï¼Œå®¢æˆ·ç«¯æ¸²æŸ“ã€‚åç«¯ä¸æä¾›å®Œæ•´çš„<code>html</code>é¡µé¢ï¼Œè€Œæ˜¯æä¾›ä¸€äº›<code>api</code>ä½¿å¾—å‰ç«¯å¯ä»¥è·å–<code>json</code>æ•°æ®ï¼Œç„¶åå‰ç«¯æ‹¿åˆ°<code>json</code>æ•°æ®ä¹‹åå†åœ¨å‰ç«¯è¿›è¡Œ<code>html</code>é¡µé¢æ‹¼æ¥ï¼Œç„¶åå±•ç¤ºåœ¨æµè§ˆå™¨ä¸Šã€‚è¿™ç§æ˜¯å®¢æˆ·ç«¯æ¸²æŸ“ã€‚è¿™æ ·å‰ç«¯å°±å¯ä»¥ä¸“æ³¨<code>UI</code>çš„å¼€å‘ï¼Œåç«¯ä¸“æ³¨é€»è¾‘å¼€å‘ã€‚å…¸å‹çš„åº”ç”¨æ˜¯<code>SPA</code></p>\n<p><code>CSR</code>å’Œ<code>SSR</code>æœ€å¤§çš„åŒºåˆ«åœ¨äºå‰è€…çš„é¡µé¢æ¸²æŸ“æ˜¯<code>JS</code>è´Ÿè´£è¿›è¡Œçš„ï¼Œè€Œåè€…æ˜¯æœåŠ¡å™¨ç«¯ç›´æ¥è¿”å›HTMLè®©æµè§ˆå™¨ç›´æ¥æ¸²æŸ“</p>\n<h1 id=\"ä¸ºä»€ä¹ˆè¦æœ‰ssr\">ä¸ºä»€ä¹ˆè¦æœ‰SSR</h1>\n<p>ä¼ ç»ŸCSRçš„å¼Šç«¯ä¸å®¹å°è§‘ï¼š</p>\n<ul>\n<li>é¦–å±åŠ è½½ç¼“æ…¢</li>\n<li>å¯¹äºSEOæ— èƒ½ä¸ºåŠ›</li>\n</ul>\n<h1 id=\"æ€ä¹ˆåšssr\">æ€ä¹ˆåšSSR</h1>\n<h2 id=\"åŸç†åŸºäºreactjs\">åŸç†(åŸºäºReact.js)</h2>\n<ol>\n<li><p>ç¼–å†™ä¸€ä¸ªç®€å•çš„<code>React</code>ç»„ä»¶</p>\n</li>\n<li><p>ä½¿ç”¨<code>react-dom/server</code>ä¸­çš„<code>renderToString</code>ç¼–è¯‘è™šæ‹Ÿ<code>DOM</code></p>\n</li>\n<li><p>å°†è½¬æ¢åçš„<code>DOM</code>æ’å…¥<code>html</code>ä¸­è¿”å›ç»™å‰ç«¯</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// containers/Home.js</span>\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">React</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;react&#x27;</span>;\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Home</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>This is sanyuan<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n  )\n}\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-title class_\">Home</span>\n\n<span class=\"hljs-comment\">// server/index.js</span>\n<span class=\"hljs-keyword\">import</span> express <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;express&#x27;</span>;\n<span class=\"hljs-keyword\">import</span> { renderToString } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;react-dom/server&#x27;</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">Home</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;./containers/Home&#x27;</span>;\n\n<span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title function_\">express</span>();\n<span class=\"hljs-keyword\">const</span> content = <span class=\"hljs-title function_\">renderToString</span>(<span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Home</span> /&gt;</span></span>);\n\napp.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&#x27;/&#x27;</span>, <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">req, res</span>) {\n  res.<span class=\"hljs-title function_\">send</span>(\n  <span class=\"hljs-string\">`\n    &lt;html&gt;\n      &lt;head&gt;\n        &lt;title&gt;ssr&lt;/title&gt;\n      &lt;/head&gt;\n      &lt;body&gt;\n        &lt;div id=&quot;root&quot;&gt;<span class=\"hljs-subst\">${content}</span>&lt;/div&gt;\n      &lt;/body&gt;\n    &lt;/html&gt;\n  `</span>\n  );\n})\napp.<span class=\"hljs-title function_\">listen</span>(<span class=\"hljs-number\">3001</span>, <span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;listen:3001&#x27;</span>)\n})\n</code></pre>\n</li>\n</ol>\n<p>æ­¤æ—¶å·²å®ç°ä¸€ä¸ªç®€å•çš„SSRï¼Œä½†å¯¹äºä¸€äº›å¸¸è§çš„åœºæ™¯å¦‚äº‹ä»¶ç»‘å®šæ— æ•ˆï¼Œè¿™æ—¶å°±éœ€è¦è¿›è¡Œäº†åŒæ„ã€‚æ‰€è°“åŒæ„ï¼Œé€šä¿—çš„è®²ï¼Œå°±æ˜¯ä¸€å¥—<code>React</code>ä»£ç åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œä¸€éï¼Œåˆ°è¾¾æµè§ˆå™¨åˆè¿è¡Œä¸€éã€‚<strong>æœåŠ¡ç«¯æ¸²æŸ“å®Œæˆé¡µé¢ç»“æ„ï¼Œæµè§ˆå™¨ç«¯æ¸²æŸ“å®Œæˆäº‹ä»¶ç»‘å®š</strong>ã€‚è¿™æ ·çš„è¯å°±éœ€è¦æµè§ˆå™¨å»æ‹‰å–é¢å¤–çš„JSæ–‡ä»¶ï¼Œç”±JSæ¥å®Œæˆä¸€äº›å¤æ‚çš„äº‹æƒ…</p>\n<ol start=\"4\">\n<li><p>ä½¿ç”¨<code>react-dom</code>å…³è”<code>DOM</code>ä¸<code>JS</code></p>\n</li>\n<li><p>ä½¿ç”¨<code>webpack</code>æ‰“åŒ…<code>JS</code></p>\n</li>\n<li><p>å¼€å¯<code>express</code>çš„é™æ€æœåŠ¡</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// client/index. js</span>\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">React</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;react&#x27;</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">ReactDom</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;react-dom&#x27;</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">Home</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;../containers/Home&#x27;</span>;\n\n<span class=\"hljs-title class_\">ReactDom</span>.<span class=\"hljs-title function_\">hydrate</span>(<span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Home</span> /&gt;</span></span>, <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&#x27;root&#x27;</span>))\n\n<span class=\"hljs-comment\">// webpack.client.js</span>\n<span class=\"hljs-keyword\">const</span> path = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;path&#x27;</span>);\n<span class=\"hljs-keyword\">const</span> merge = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;webpack-merge&#x27;</span>);\n<span class=\"hljs-keyword\">const</span> config = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;./webpack.base&#x27;</span>);\n\n<span class=\"hljs-keyword\">const</span> clientConfig = {\n  <span class=\"hljs-attr\">mode</span>: <span class=\"hljs-string\">&#x27;development&#x27;</span>,\n  <span class=\"hljs-attr\">entry</span>: <span class=\"hljs-string\">&#x27;./src/client/index.js&#x27;</span>,\n  <span class=\"hljs-attr\">output</span>: {\n    <span class=\"hljs-attr\">filename</span>: <span class=\"hljs-string\">&#x27;index.js&#x27;</span>,\n    <span class=\"hljs-attr\">path</span>: path.<span class=\"hljs-title function_\">resolve</span>(__dirname, <span class=\"hljs-string\">&#x27;public&#x27;</span>)\n  },\n}\n\n<span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = <span class=\"hljs-title function_\">merge</span>(config, clientConfig);\n\n<span class=\"hljs-comment\">//webpack.base.js</span>\n<span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {\n  <span class=\"hljs-attr\">module</span>: {\n    <span class=\"hljs-attr\">rules</span>: [{\n      <span class=\"hljs-attr\">test</span>: <span class=\"hljs-regexp\">/\\.js$/</span>,\n      <span class=\"hljs-attr\">loader</span>: <span class=\"hljs-string\">&#x27;babel-loader&#x27;</span>,\n      <span class=\"hljs-attr\">exclude</span>: <span class=\"hljs-regexp\">/node_modules/</span>,\n      <span class=\"hljs-attr\">options</span>: {\n        <span class=\"hljs-attr\">presets</span>: [<span class=\"hljs-string\">&#x27;@babel/preset-react&#x27;</span>,  [<span class=\"hljs-string\">&#x27;@babel/preset-env&#x27;</span>, {\n          <span class=\"hljs-attr\">targets</span>: {\n            <span class=\"hljs-attr\">browsers</span>: [<span class=\"hljs-string\">&#x27;last 2 versions&#x27;</span>]\n          }\n        }]]\n      }\n    }]\n  }\n}\n\n<span class=\"hljs-comment\">// package.json</span>\n<span class=\"hljs-string\">&quot;scripts&quot;</span>: {\n  <span class=\"hljs-string\">&quot;dev&quot;</span>: <span class=\"hljs-string\">&quot;npm-run-all --parallel dev:**&quot;</span>,\n  <span class=\"hljs-string\">&quot;dev:start&quot;</span>: <span class=\"hljs-string\">&quot;nodemon --watch build --exec node \\&quot;./build/bundle.js\\&quot;&quot;</span>,\n  <span class=\"hljs-string\">&quot;dev:build:server&quot;</span>: <span class=\"hljs-string\">&quot;webpack --config webpack.server.js --watch&quot;</span>,\n  <span class=\"hljs-string\">&quot;dev:build:client&quot;</span>: <span class=\"hljs-string\">&quot;webpack --config webpack.client.js --watch&quot;</span>\n}\n\n<span class=\"hljs-comment\">// server/index.js</span>\n<span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title function_\">express</span>();\napp.<span class=\"hljs-title function_\">use</span>(express.<span class=\"hljs-title function_\">static</span>(<span class=\"hljs-string\">&#x27;public&#x27;</span>));\n</code></pre>\n</li>\n</ol>\n<h2 id=\"ä¸‰æ–¹æ¡†æ¶\">ä¸‰æ–¹æ¡†æ¶</h2>\n<ul>\n<li><p><a href=\"https://nuxtjs.org/\">Nuxt.js</a>(åŸºäº<a href=\"https://cn.vuejs.org/index.html\">Vue.js</a>)</p>\n</li>\n<li><p><a href=\"https://nextjs.frontendx.cn/\">Next.js</a>(åŸºäº<a href=\"https://react.docschina.org\">React.js</a>)</p>\n</li>\n</ul>\n<p>Ref:</p>\n<p><a href=\"https://segmentfault.com/a/1190000020029159?utm_source=tag-newest\">ä»å¤´å¼€å§‹ï¼Œå½»åº•ç†è§£æœåŠ¡ç«¯æ¸²æŸ“åŸç†(8åƒå­—æ±‡æ€»é•¿æ–‡)</a></p>\n"},{"title":"Nest.jså­¦ä¹ -åŸºæœ¬æ¦‚å¿µ","tags":["Nest.js"],"categories":"Nest.js","description":"# æ ¸å¿ƒæ¶æ„\n\n## æ¨¡å—\n\næ¨¡å—æ˜¯æŒ‰ä¸šåŠ¡é€»è¾‘åŒ–åˆ†åŸºæœ¬å•å…ƒï¼ŒåŒ…å«æ§åˆ¶å™¨å’ŒæœåŠ¡ã€‚æ§åˆ¶å™¨æ˜¯å¤„ç†è¯·æ±‚å’Œå“åº”æ•°æ®çš„æ¡ä»¶ï¼ŒæœåŠ¡æ˜¯å¤„ç†å®é™…ä¸šåŠ¡é€»è¾‘çš„éƒ¨ä»¶\n\n## ä¸­é—´ä»¶\n\nä¸­é—´ä»¶æ˜¯è·¯ç”±å¤„ç†handlerå‰çš„æ•°æ®å¤„ç†å±‚ï¼Œåªèƒ½åœ¨æ¨¡å—æˆ–è€…å…¨å±€æ³¨å†Œï¼Œå¯ä»¥åš**æ—¥å¿—å¤„ç†ä¸­é—´ä»¶**ï¼›ä¸­é—´ä»¶å¯ä»¥è®¿é—®æ•´ä¸ª`request`ã€`response`çš„ä¸Šä¸‹æ–‡ï¼Œæ¨¡å—ä½œç”¨åŸŸå¯ä»¥ä¾èµ–æ³¨å…¥æœåŠ¡ã€‚å…¨å±€æ³¨å†Œåªèƒ½æ˜¯ä¸€ä¸ªçº¯å‡½æ•°æˆ–è€…ä¸€ä¸ªé«˜é˜¶å‡½æ•°","createDate":"2020-09-22 22:35:38","updateDate":"2020-10-16 17:22:32","body":"<h1 id=\"æ ¸å¿ƒæ¶æ„\">æ ¸å¿ƒæ¶æ„</h1>\n<h2 id=\"æ¨¡å—\">æ¨¡å—</h2>\n<p>æ¨¡å—æ˜¯æŒ‰ä¸šåŠ¡é€»è¾‘åŒ–åˆ†åŸºæœ¬å•å…ƒï¼ŒåŒ…å«æ§åˆ¶å™¨å’ŒæœåŠ¡ã€‚æ§åˆ¶å™¨æ˜¯å¤„ç†è¯·æ±‚å’Œå“åº”æ•°æ®çš„æ¡ä»¶ï¼ŒæœåŠ¡æ˜¯å¤„ç†å®é™…ä¸šåŠ¡é€»è¾‘çš„éƒ¨ä»¶</p>\n<h2 id=\"ä¸­é—´ä»¶\">ä¸­é—´ä»¶</h2>\n<p>ä¸­é—´ä»¶æ˜¯è·¯ç”±å¤„ç†handlerå‰çš„æ•°æ®å¤„ç†å±‚ï¼Œåªèƒ½åœ¨æ¨¡å—æˆ–è€…å…¨å±€æ³¨å†Œï¼Œå¯ä»¥åš<strong>æ—¥å¿—å¤„ç†ä¸­é—´ä»¶</strong>ï¼›ä¸­é—´ä»¶å¯ä»¥è®¿é—®æ•´ä¸ª<code>request</code>ã€<code>response</code>çš„ä¸Šä¸‹æ–‡ï¼Œæ¨¡å—ä½œç”¨åŸŸå¯ä»¥ä¾èµ–æ³¨å…¥æœåŠ¡ã€‚å…¨å±€æ³¨å†Œåªèƒ½æ˜¯ä¸€ä¸ªçº¯å‡½æ•°æˆ–è€…ä¸€ä¸ªé«˜é˜¶å‡½æ•°</p>\n<h2 id=\"ç®¡é“\">ç®¡é“</h2>\n<p>ç®¡é“æ˜¯æ•°æ®æµå¤„ç†ï¼Œåœ¨ä¸­é—´ä»¶åè·¯ç”±å¤„ç†å‰åšæ•°æ®å¤„ç†ï¼Œå¯ä»¥åœ¨æ§åˆ¶å™¨ä¸­çš„ç±»ã€æ–¹æ³•ã€æ–¹æ³•å‚æ•°åŠå…¨å±€æ³¨å†Œä½¿ç”¨ï¼Œåªèƒ½æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ã€‚å¯ä»¥åš<strong>æ•°æ®éªŒè¯ï¼Œæ•°æ®è½¬æ¢</strong></p>\n<h2 id=\"å®ˆå«\">å®ˆå«</h2>\n<p>å®ˆå«å†³å®šè¯·æ±‚æ˜¯å¦å¯ä»¥åˆ°è¾¾å¯¹åº”çš„è·¯ç”±å¤„ç†å™¨ï¼Œèƒ½å¤ŸçŸ¥é“å½“å‰è·¯ç”±çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå¯ä»¥åœ¨æ§åˆ¶å™¨ä¸­çš„ç±»ã€æ–¹æ³•åŠå…¨å±€æ³¨å†Œä½¿ç”¨ã€‚å¯ä»¥åš<code>RABC</code></p>\n<h2 id=\"å¼‚å¸¸è¿‡æ»¤å™¨\">å¼‚å¸¸è¿‡æ»¤å™¨</h2>\n<p>å†…ç½®çš„å¼‚å¸¸å±‚è´Ÿè´£å¤„ç†æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­æ‰€æœ‰æŠ›å‡ºçš„å¼‚å¸¸ã€‚å½“æ•è·åˆ°æœªå¤„ç†çš„å¼‚å¸¸æ—¶ï¼Œæœ€ç»ˆç”¨æˆ·å°†æ”¶åˆ°å‹å¥½çš„å“åº”ã€‚å¯ä»¥åš<strong>å¼‚å¸¸å¤„ç†</strong></p>\n<h2 id=\"æ‹¦æˆªå™¨\">æ‹¦æˆªå™¨</h2>\n<p>æ‹¦æˆªå™¨æ˜¯è¿›å…¥æ§åˆ¶å™¨ä¹‹å‰å’Œä¹‹åå¤„ç†ç›¸å…³é€»è¾‘ï¼Œèƒ½å¤ŸçŸ¥é“å½“å‰è·¯ç”±çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå¯ä»¥æ§åˆ¶å™¨ä¸­çš„ç±»ã€æ–¹æ³•ã€å…¨å±€æ³¨å†Œä½¿ç”¨ã€‚å¯ä»¥åš<strong>æ¥å£å“åº”è®°å½•</strong></p>\n<h1 id=\"æ¨¡å—åˆ’åˆ†\">æ¨¡å—åˆ’åˆ†</h1>\n<p>AppModuleåº”ç”¨æ ¹æ¨¡å—</p>\n<ul>\n<li>CoreModule æ ¸å¿ƒæ¨¡å—ï¼ˆæ³¨å†Œä¸­é—´ä»¶ã€è¿‡æ»¤å™¨ã€ç®¡é“ã€å®ˆå«ã€æ‹¦æˆªå™¨ã€è£…é¥°å™¨ç­‰ï¼‰</li>\n<li>SharedModule å…±äº«æ¨¡å—ï¼ˆæ³¨å†ŒæœåŠ¡ï¼Œå¦‚DBã€redisç­‰ï¼‰</li>\n<li>ConfigureModule é…ç½®æ¨¡å—ï¼ˆç³»ç»Ÿé…ç½®ï¼‰</li>\n<li>FeatureModule ç‰¹æ€§æ¨¡å—ï¼ˆä¸šåŠ¡æ¨¡å—ï¼‰</li>\n</ul>\n"},{"title":"Docker-å…¥é—¨","tags":["Dockerå…¥é—¨"],"categories":"Docker","description":"# ä»€ä¹ˆæ˜¯Docker\n\n## ç®€ä»‹\n\n[ç™¾ç§‘](https://baike.baidu.com/item/docker/13344470)ï¼šDocker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„é•œåƒä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linuxæˆ–Windows æœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–ã€‚å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ã€‚\n\n## æ ¸å¿ƒæ¦‚å¿µ\n\n- é•œåƒ","createDate":"2020-08-10 22:16:00","updateDate":"2020-10-16 15:19:50","body":"<h1 id=\"ä»€ä¹ˆæ˜¯docker\">ä»€ä¹ˆæ˜¯Docker</h1>\n<h2 id=\"ç®€ä»‹\">ç®€ä»‹</h2>\n<p><a href=\"https://baike.baidu.com/item/docker/13344470\">ç™¾ç§‘</a>ï¼šDocker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„é•œåƒä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linuxæˆ–Windows æœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–ã€‚å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ã€‚</p>\n<h2 id=\"æ ¸å¿ƒæ¦‚å¿µ\">æ ¸å¿ƒæ¦‚å¿µ</h2>\n<ul>\n<li>é•œåƒ</li>\n</ul>\n<p>é•œåƒæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œå®ƒæ˜¯ç”¨æ¥åˆ›å»ºå®¹å™¨çš„ã€‚Dockeré•œå°±å¥½æ¯”â€œWin7çº¯å‡€ç‰ˆ.isoâ€æ–‡ä»¶</p>\n<ul>\n<li>å®¹å™¨</li>\n</ul>\n<p>åƒä¸€ä¸ªè™šæ‹Ÿæœºï¼Œå®¹å™¨ä¸­è¿è¡Œç€ä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿã€‚å¯ä»¥åœ¨å®¹å™¨ä¸­è£…Nodejsï¼Œå¯ä»¥æ‰§è¡Œ<code>npm install</code>ï¼Œå¯ä»¥åšä¸€åˆ‡ä½ å½“å‰æ“ä½œç³»ç»Ÿèƒ½åšçš„äº‹æƒ…</p>\n<h1 id=\"dockerèƒ½ç”¨æ¥åšä»€ä¹ˆ\">Dockerèƒ½ç”¨æ¥åšä»€ä¹ˆ</h1>\n<p>å¿«é€Ÿéƒ¨ç½²åº”ç”¨ï¼ˆDevOpsï¼‰ï¼Œè¾ƒè™šæ‹Ÿæœºç³»ç»Ÿæ€§èƒ½æ¶ˆè€—ä½ã€åº”ç”¨å¯åœé«˜æ•ˆ</p>\n<p><a href=\"/article/Docker-%E5%AE%9E%E6%88%98%E4%B9%8B%E5%9F%BA%E4%BA%8ETravis%E3%80%81Github%E6%90%AD%E5%BB%BACI&amp;CD%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2\">Docker-å®æˆ˜ä¹‹åŸºäºTravisã€Githubæ­å»ºCI/CDè‡ªåŠ¨åŒ–éƒ¨ç½²</a></p>\n<h1 id=\"æ€ä¹ˆä½¿ç”¨docker\">æ€ä¹ˆä½¿ç”¨Docker</h1>\n<ol>\n<li><a href=\"https://www.cnblogs.com/sky-k/p/11507441.html\">å®‰è£…docker(CentOS)</a></li>\n<li>æ‹‰å–/æ‰“åŒ…é•œåƒ</li>\n</ol>\n<pre><code class=\"hljs language-shell\"><span class=\"hljs-meta\"># </span><span class=\"language-bash\">æ‹‰å–é•œåƒ</span>\ndocker pull mrrs878/blog:latest\n<span class=\"hljs-meta\">\n# </span><span class=\"language-bash\">æ‰“åŒ…é•œåƒ</span>\ndocker build -t mrrs878/blog:latest .\n</code></pre>\n<ol start=\"3\">\n<li>æ ¹æ®é•œåƒåˆ›å»ºå®¹å™¨</li>\n</ol>\n<pre><code class=\"hljs language-shell\">docker container create --name blog -p 8081:80 mrrs878/blog:latest\n<span class=\"hljs-meta\"># </span><span class=\"language-bash\">container <span class=\"hljs-built_in\">id</span></span>\n</code></pre>\n<ol start=\"4\">\n<li>å¯åŠ¨å®¹å™¨</li>\n</ol>\n<pre><code class=\"hljs language-shell\">docker container start xxx(container id)\n</code></pre>\n<h1 id=\"docker-compose\">docker-compose</h1>\n<h2 id=\"service-nameå’Œcontainer-nameçš„å…³ç³»\">service nameå’Œcontainer nameçš„å…³ç³»</h2>\n<p>å¦‚æœ<code>container_name</code>æ²¡æœ‰å®šä¹‰ï¼Œè¿è¡Œ<code>docker-cmpose up -d</code>åï¼Œdocker-composeè‡ªåŠ¨ç»™containeråˆ†é…äº†ä¸€ä¸ªåå­—ï¼Œå…¶æ ¼å¼ä¸ºï¼š<code>&lt;å½“å‰å·¥ä½œè·¯å¾„å&gt;/&lt;servicename&gt;_&lt;sequencenumber&gt;</code></p>\n"},{"title":"æœåŠ¡ç«¯æ¸²æŸ“-Nuxt.js","tags":["SSR"],"categories":"æœåŠ¡ç«¯æ¸²æŸ“","description":"> Nuxt.js@2.13.6\n\n# å®‰è£…\n\næ¨èä½¿ç”¨å®˜æ–¹è„šæ‰‹æ¶\n\n`yarn create nuxt-app <project name>`\n\n# ä½¿ç”¨\n\n## å¦‚ä½•å¼•å…¥ä¸‰æ–¹UIåº“/æ¡†æ¶\n\n[vant](https://youzan.github.io/vant/#/zh-CN/) ä¸ºä¾‹\n\n1. `~/plugins/`ä¸‹æ–°å»º`vant-ui.js`\n\n    ```js\n    // ~","createDate":"2020-07-28 11:15:28","updateDate":"2020-10-16 15:18:28","body":"<blockquote>\n<p><a href=\"mailto:&#78;&#x75;&#120;&#x74;&#46;&#x6a;&#115;&#64;&#x32;&#x2e;&#x31;&#51;&#46;&#x36;\">&#78;&#x75;&#120;&#x74;&#46;&#x6a;&#115;&#64;&#x32;&#x2e;&#x31;&#51;&#46;&#x36;</a></p>\n</blockquote>\n<h1 id=\"å®‰è£…\">å®‰è£…</h1>\n<p>æ¨èä½¿ç”¨å®˜æ–¹è„šæ‰‹æ¶</p>\n<p><code>yarn create nuxt-app &lt;project name&gt;</code></p>\n<h1 id=\"ä½¿ç”¨\">ä½¿ç”¨</h1>\n<h2 id=\"å¦‚ä½•å¼•å…¥ä¸‰æ–¹uiåº“æ¡†æ¶\">å¦‚ä½•å¼•å…¥ä¸‰æ–¹UIåº“/æ¡†æ¶</h2>\n<p><a href=\"https://youzan.github.io/vant/#/zh-CN/\">vant</a> ä¸ºä¾‹</p>\n<ol>\n<li><p><code>~/plugins/</code>ä¸‹æ–°å»º<code>vant-ui.js</code></p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// ~/plugins/vant-ui.js</span>\n\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">Vue</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;vue&#x27;</span>\n<span class=\"hljs-keyword\">import</span> { xxx } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;vant&#x27;</span>\n\n<span class=\"hljs-comment\">// åªèƒ½å…¨å±€æ³¨å†Œç»„ä»¶ï¼Œå±€éƒ¨æ³¨å†Œä¼šä¸¢å¤±æ ·å¼ï¼ï¼ï¼</span>\n<span class=\"hljs-title class_\">Vue</span>.<span class=\"hljs-title function_\">use</span>(xxx)\n</code></pre>\n</li>\n<li><p>å®‰è£…<code>vantã€lessã€less-loader</code></p>\n<pre><code class=\"hljs language-shell\">yarn add vant -S\nyarn add less less-loader -D\n</code></pre>\n</li>\n<li><p>é…ç½®<code>nuxt.config.js</code></p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// nuxt.config.js</span>\n{\n    <span class=\"hljs-comment\">// ...</span>\n    <span class=\"hljs-attr\">build</span>: {\n        <span class=\"hljs-comment\">// ...</span>\n        <span class=\"hljs-attr\">transpile</span>: [<span class=\"hljs-regexp\">/vant.*?less/</span>],\n        <span class=\"hljs-attr\">babel</span>: {\n          <span class=\"hljs-attr\">plugins</span>: [\n            [<span class=\"hljs-string\">&#x27;import&#x27;</span>, {\n              <span class=\"hljs-attr\">libraryName</span>: <span class=\"hljs-string\">&#x27;vant&#x27;</span>,\n              <span class=\"hljs-attr\">style</span>: <span class=\"hljs-function\"><span class=\"hljs-params\">name</span> =&gt;</span> <span class=\"hljs-string\">`<span class=\"hljs-subst\">${name}</span>/style/less`</span>\n            }, <span class=\"hljs-string\">&#x27;vant&#x27;</span>]\n          ]\n        },\n        <span class=\"hljs-attr\">loaders</span>: {\n          <span class=\"hljs-comment\">// ä¿®æ”¹é»˜è®¤æ ·å¼</span>\n          <span class=\"hljs-attr\">less</span>: {\n            <span class=\"hljs-attr\">javascriptEnabled</span>: <span class=\"hljs-literal\">true</span>,\n            <span class=\"hljs-attr\">modifyVars</span>: {\n              <span class=\"hljs-string\">&#x27;button-primary-background-color&#x27;</span>: <span class=\"hljs-string\">&#x27;#ff6008&#x27;</span>,\n              <span class=\"hljs-string\">&#x27;button-primary-border-color&#x27;</span>: <span class=\"hljs-string\">&#x27;#ff6008&#x27;</span>,\n              <span class=\"hljs-string\">&#x27;nav-bar-text-color&#x27;</span>: <span class=\"hljs-string\">&#x27;#ff6008&#x27;</span>,\n              <span class=\"hljs-string\">&#x27;nav-bar-icon-color&#x27;</span>: <span class=\"hljs-string\">&#x27;#ff6008&#x27;</span>,\n            }\n          }\n        }\n    },\n    <span class=\"hljs-comment\">// ...</span>\n}\n</code></pre>\n</li>\n</ol>\n<h2 id=\"å¦‚ä½•é…ç½®axiosæ‹¦æˆªå™¨\">å¦‚ä½•é…ç½®axiosæ‹¦æˆªå™¨</h2>\n<p><code>~/plugins/</code>ä¸‹æ–°å»º<code>axios.js</code></p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// ~/plugins/axios.js</span>\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">{ $axios }</span>) {\n  $axios.<span class=\"hljs-property\">interceptors</span>.<span class=\"hljs-property\">request</span>.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">config</span>) =&gt;</span> {\n    <span class=\"hljs-comment\">// todo</span>\n    <span class=\"hljs-keyword\">return</span> config\n  })\n  $axios.<span class=\"hljs-property\">interceptors</span>.<span class=\"hljs-property\">response</span>.<span class=\"hljs-title function_\">use</span>(\n    <span class=\"hljs-function\"><span class=\"hljs-params\">response</span> =&gt;</span> response.<span class=\"hljs-property\">data</span>,\n    <span class=\"hljs-function\"><span class=\"hljs-params\">err</span> =&gt;</span> {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(err)\n    }\n  )\n}\n</code></pre>\n<h2 id=\"æ·»åŠ nodejsä¸­é—´ä»¶ï¼ˆä»¥æ—¥å¿—ä¸­é—´ä»¶ä¸ºä¾‹ï¼‰\">æ·»åŠ Node.jsä¸­é—´ä»¶ï¼ˆä»¥æ—¥å¿—ä¸­é—´ä»¶ä¸ºä¾‹ï¼‰</h2>\n<ol>\n<li><p>æ ¹ç›®å½•ä¸‹æ–°å»º<code>serverMiddleware</code>æ–‡ä»¶å¤¹</p>\n</li>\n<li><p>å®‰è£…ç›¸å…³ä¾èµ–<code>log4js</code>ç­‰</p>\n</li>\n<li><p>æ–°å»º<code>logger.js</code></p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> { join } = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;path&#x27;</span>)\n<span class=\"hljs-keyword\">const</span> { configure, getLogger, connectLogger } = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;log4js&#x27;</span>)\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">LOG_PATH</span> = <span class=\"hljs-string\">&#x27;/opt/logs/gmm-node-h5ssrrelease/&#x27;</span>\n<span class=\"hljs-title function_\">configure</span>({\n  <span class=\"hljs-attr\">appenders</span>: {\n    <span class=\"hljs-attr\">ajaxError</span>: {\n      <span class=\"hljs-attr\">type</span>: <span class=\"hljs-string\">&#x27;dateFile&#x27;</span>,\n      <span class=\"hljs-attr\">pattern</span>: <span class=\"hljs-string\">&#x27;yyyy-MM-dd.log&#x27;</span>,\n      <span class=\"hljs-attr\">filename</span>: <span class=\"hljs-title function_\">join</span>(<span class=\"hljs-variable constant_\">LOG_PATH</span>, <span class=\"hljs-string\">&#x27;ajaxError&#x27;</span>),\n      <span class=\"hljs-attr\">maxLogSize</span>: <span class=\"hljs-number\">10</span> * <span class=\"hljs-number\">1000</span> * <span class=\"hljs-number\">1000</span>,\n      <span class=\"hljs-attr\">numBackups</span>: <span class=\"hljs-number\">3</span>,\n      <span class=\"hljs-attr\">alwaysIncludePattern</span>: <span class=\"hljs-literal\">true</span>\n    },\n    <span class=\"hljs-comment\">// ...</span>\n  },\n  <span class=\"hljs-attr\">categories</span>: {\n    <span class=\"hljs-attr\">default</span>: { <span class=\"hljs-attr\">appenders</span>: [<span class=\"hljs-string\">&#x27;console&#x27;</span>], <span class=\"hljs-attr\">level</span>: <span class=\"hljs-string\">&#x27;info&#x27;</span> },\n    <span class=\"hljs-comment\">// ...</span>\n  }\n})\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-title function_\">connectLogger</span>(<span class=\"hljs-title function_\">getLogger</span>(<span class=\"hljs-string\">&#x27;application&#x27;</span>), { <span class=\"hljs-attr\">level</span>: <span class=\"hljs-string\">&#x27;info&#x27;</span> })\n</code></pre>\n</li>\n<li><p>ä¿®æ”¹<code>nuxt.config.js</code>é…ç½®</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> {\n  <span class=\"hljs-comment\">// ...</span>\n  <span class=\"hljs-attr\">serverMiddleware</span>: [\n    <span class=\"hljs-string\">&#x27;~/serverMiddleware/bodyParser&#x27;</span>,\n    <span class=\"hljs-comment\">// ...</span>\n  ],\n  <span class=\"hljs-comment\">// ...</span>\n}\n</code></pre>\n</li>\n</ol>\n<h1 id=\"æ³¨æ„ç‚¹\">æ³¨æ„ç‚¹</h1>\n<ol>\n<li>æœåŠ¡ç«¯åªæ¸²æŸ“éœ€è¦åšSEOçš„éƒ¨åˆ†æ¥åŠ å¿«è®¿é—®é€Ÿåº¦</li>\n</ol>\n<h1 id=\"æ€§èƒ½ä¼˜åŒ–\">æ€§èƒ½ä¼˜åŒ–</h1>\n<ol>\n<li><p>å¦‚æœç½‘å…³å·²å¯ç”¨gzipåˆ™å…³é—­æ¡†æ¶è‡ªå¸¦å‹ç¼©</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// nuxt.config.js</span>\n<span class=\"hljs-attr\">render</span>: {\n  <span class=\"hljs-attr\">compressor</span>: <span class=\"hljs-literal\">false</span>\n}\n</code></pre>\n</li>\n<li><p>ç¼“å­˜é¡µé¢(<code>lru-cache</code>)</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// serverMiddleware/pageCache.js</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">LRU</span> = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;lru-cache&#x27;</span>)\n<span class=\"hljs-keyword\">const</span> cachePage = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title function_\">LRU</span>({\n  <span class=\"hljs-attr\">max</span>: <span class=\"hljs-number\">100</span>,\n  <span class=\"hljs-attr\">maxAge</span>: <span class=\"hljs-number\">1000</span> * <span class=\"hljs-number\">60</span>\n})\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">req, res, next</span>) {\n  <span class=\"hljs-keyword\">const</span> url = req.<span class=\"hljs-property\">_parsedOriginalUrl</span>\n  <span class=\"hljs-keyword\">const</span> pathname = url.<span class=\"hljs-property\">pathname</span>\n  <span class=\"hljs-keyword\">if</span> ([<span class=\"hljs-string\">&#x27;/selectGame/1&#x27;</span>].<span class=\"hljs-title function_\">includes</span>(pathname)) {\n    <span class=\"hljs-keyword\">const</span> existsHtml = cachePage.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&#x27;selectGameData&#x27;</span>)\n    <span class=\"hljs-keyword\">if</span> (existsHtml) {\n      <span class=\"hljs-keyword\">return</span> res.<span class=\"hljs-title function_\">end</span>(existsHtml.<span class=\"hljs-property\">html</span>, <span class=\"hljs-string\">&#x27;utf-8&#x27;</span>)\n    } <span class=\"hljs-keyword\">else</span> {\n      res.<span class=\"hljs-property\">original_end</span> = res.<span class=\"hljs-property\">end</span>\n      res.<span class=\"hljs-property\">end</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">data</span>) {\n        <span class=\"hljs-keyword\">if</span> (res.<span class=\"hljs-property\">statusCode</span> === <span class=\"hljs-number\">200</span>) {\n          cachePage.<span class=\"hljs-title function_\">set</span>(<span class=\"hljs-string\">&#x27;selectGameData&#x27;</span>, { <span class=\"hljs-attr\">html</span>: data })\n        }\n        res.<span class=\"hljs-title function_\">original_end</span>(data, <span class=\"hljs-string\">&#x27;utf-8&#x27;</span>)\n      }\n    }\n  }\n  <span class=\"hljs-title function_\">next</span>()\n}\n</code></pre>\n</li>\n</ol>\n<h1 id=\"å‘\">å‘</h1>\n<h2 id=\"åŒä¸€åŸŸåå¦‚ä½•éƒ¨ç½²å¤šä¸ªnuxtjsæœåŠ¡\">åŒä¸€åŸŸåå¦‚ä½•éƒ¨ç½²å¤šä¸ªNuxt.jsæœåŠ¡</h2>\n<p>åœ¨<code>https://gmmsj.com/h5ssr</code>ä¸‹éƒ¨ç½²Nuxt.jsé¡¹ç›®æ­¥éª¤ï¼š</p>\n<ol>\n<li><p>å¤åˆ¶<code>nuxt_dist/serverMiddleware/static/nuxt.config.js/package.json</code>ç›®å½•/æ–‡ä»¶è‡³éƒ¨ç½²æœº</p>\n</li>\n<li><p>nuxt.config.jsæ·»åŠ routeré…ç½®</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// nuxt.config.js</span>\n{\n  <span class=\"hljs-comment\">// ...</span>\n  <span class=\"hljs-attr\">router</span>: {\n    <span class=\"hljs-attr\">base</span>: <span class=\"hljs-string\">&#x27;/h5ssr/&#x27;</span>\n  }\n  <span class=\"hljs-comment\">// ...</span>\n}\n</code></pre>\n</li>\n<li><p>Nginxæ·»åŠ é…ç½®</p>\n<pre><code class=\"hljs language-shell\"><span class=\"hljs-meta\"># </span><span class=\"language-bash\">nginx.conf</span>\nlocation /h5ssr {\n  proxy_pass http://127.0.0.1:8005/h5ssr ;\n  proxy_set_header Host $host;\n  proxy_set_header X-Forwarded-For $remote_addr;  \n}\n</code></pre>\n</li>\n</ol>\n"},{"title":"Docker-åŸºäºTravisã€Githubæ­å»ºCI&CDè‡ªåŠ¨åŒ–éƒ¨ç½²ä¹‹è‡ªåŠ¨æ„å»º","tags":["Dockerå®æˆ˜","è‡ªåŠ¨æ„å»º"],"categories":"Docker","description":"> CentOS@7.5\n\n# æµç¨‹\n\n1. `git push`åˆ°ä»“åº“\n2. CIæ£€æµ‹åˆ°GitHubä»£ç æœ‰æ›´æ–°ï¼Œè‡ªåŠ¨æ‰“åŒ…å‡ºä¸€ä¸ªdockeré•œåƒæ›´æ–°è‡³docker hub\n3. CIç¼–è¯‘å®Œæˆåç™»å½•æœåŠ¡å™¨ï¼Œåˆ æ‰åŸæœ‰å®¹å™¨ï¼Œæ‹‰å–æ–°é•œåƒå¹¶åˆ›å»ºä¸€ä¸ªæ–°å®¹å™¨\n\n# åˆå§‹åŒ–é¡¹ç›®\n\n1. åˆ›å»ºä»“åº“\n2. åˆ›å»º[Travis](https://www.travis-ci.org)è´¦å·å¹¶å…³è”ä»“åº“\n3. åˆ°[dock","createDate":"2020-08-10 22:32:00","updateDate":"2020-10-16 15:07:18","body":"<blockquote>\n<p><a href=\"mailto:&#67;&#x65;&#110;&#x74;&#x4f;&#83;&#64;&#55;&#x2e;&#53;\">&#67;&#x65;&#110;&#x74;&#x4f;&#83;&#64;&#55;&#x2e;&#53;</a></p>\n</blockquote>\n<h1 id=\"æµç¨‹\">æµç¨‹</h1>\n<ol>\n<li><code>git push</code>åˆ°ä»“åº“</li>\n<li>CIæ£€æµ‹åˆ°GitHubä»£ç æœ‰æ›´æ–°ï¼Œè‡ªåŠ¨æ‰“åŒ…å‡ºä¸€ä¸ªdockeré•œåƒæ›´æ–°è‡³docker hub</li>\n<li>CIç¼–è¯‘å®Œæˆåç™»å½•æœåŠ¡å™¨ï¼Œåˆ æ‰åŸæœ‰å®¹å™¨ï¼Œæ‹‰å–æ–°é•œåƒå¹¶åˆ›å»ºä¸€ä¸ªæ–°å®¹å™¨</li>\n</ol>\n<h1 id=\"åˆå§‹åŒ–é¡¹ç›®\">åˆå§‹åŒ–é¡¹ç›®</h1>\n<ol>\n<li>åˆ›å»ºä»“åº“</li>\n<li>åˆ›å»º<a href=\"https://www.travis-ci.org\">Travis</a>è´¦å·å¹¶å…³è”ä»“åº“</li>\n<li>åˆ°<a href=\"https://hub.docker.com\">docker hub</a>æ³¨å†Œè´¦å·å¹¶åˆ›å»ºé•œåƒä»“åº“</li>\n<li>Travisä¸ªäººä¸­å¿ƒæ·»åŠ ç¯å¢ƒå˜é‡<code>DOCKER_USERNAME</code>å’Œ<code>DOCKER_PASSWORD</code>æ–¹ä¾¿æ›´æ–°é•œåƒ\n<img src=\"https://user-gold-cdn.xitu.io/2019/9/20/16d4c9d76dc4f557?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"æ·»åŠ ç¯å¢ƒå˜é‡\"></li>\n<li>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º<code>.travis.yml</code>\n```yaml\nlanguage: node_js\nnode_js:</li>\n</ol>\n<ul>\n<li>&quot;12&quot;\nservices:</li>\n<li>docker</li>\n</ul>\n<p>before_install:</p>\n<ul>\n<li>npm install</li>\n</ul>\n<p>script:</p>\n<ul>\n<li>npm run build</li>\n<li>echo &quot;$DOCKER_PASSWORD&quot; | docker login -u &quot;$DOCKER_USERNAME&quot; --password-stdin</li>\n<li>docker build -t mrrs878/blog:latest .</li>\n<li>docker push mrrs878/blog:latest\n```</li>\n</ul>\n<ol start=\"6\">\n<li>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º<code>nginx.conf</code>\n```shell script\nserver {\n listen       80;\n server_name  localhost;\n\n location / {\n     try_files $uri $uri/ /index.html;\n     root /usr/share/nginx/html;\n     index  index.html index.htm;\n }</li>\n</ol>\n<p>}</p>\n<pre><code>7. åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º`Dockerfile`\n```shell script\nFROM nginx\n\nCOPY ./build/ /usr/share/nginx/html/\n\nRUN rm /etc/nginx/conf.d/default.conf\n\nADD nginx.conf /etc/nginx/conf.d/\n\nEXPOSE 80\n</code></pre>\n<ol start=\"8\">\n<li>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º<code>.dockerignore</code>åŠ å¿«æ‰“åŒ…é€Ÿåº¦\n```shell script\n/.idea\n/node_modules\n/.pnp\n.pnp.js</li>\n</ol>\n<p>/coverage</p>\n<p>.DS_Store\n.env.local\n.env.development.local\n.env.test.local\n.env.production.local</p>\n<p>npm-debug.log*\nyarn-debug.log*\nyarn-error.log*</p>\n<pre><code>\n# ç¼–å†™ä»£ç pushåˆ°ä»“åº“ï¼ŒTravisè‡ªåŠ¨ç¼–è¯‘ï¼Œç­‰å¾…ç¼–è¯‘å®Œæˆ\n\n# åˆ°[docker hub](https://hub.docker.com)æŸ¥çœ‹é•œåƒçŠ¶æ€\n\n# æœåŠ¡å™¨é…ç½®\n\n1. `nginx`æ·»åŠ åå‘ä»£ç†\n\n```shell script\nserver {\n        listen       80;\n        server_name  blog.p18c.top;\n\n        location / {\n                proxy_pass   http://127.0.0.1:8081;\n        }\n}\n</code></pre>\n<ol start=\"2\">\n<li>æ›´æ–°é•œåƒå¹¶åˆ›å»ºå®¹å™¨</li>\n</ol>\n<pre><code class=\"hljs language-shell\">docker pull mrrs878/blog:latest\ndocker container stop blog\ndocker container rm blog\ndocker container create --name blog -p 8081:80 mrrs878/blog:latest\ndocker container start blog\n</code></pre>\n<h1 id=\"ref\">Ref</h1>\n<p><a href=\"https://juejin.im/post/6844903946234904583\">å†™ç»™å‰ç«¯çš„Dockerå®æˆ˜æ•™ç¨‹</a></p>\n"},{"title":"Docker-åŸºäºTravisã€Githubæ­å»ºCI&CDè‡ªåŠ¨åŒ–éƒ¨ç½²ä¹‹è‡ªåŠ¨éƒ¨ç½²","tags":["Dockerå®æˆ˜","è‡ªåŠ¨éƒ¨ç½²"],"categories":"Docker","description":"> CentOS@7.5\n\n# åˆ›å»ºtravisç”¨æˆ·ï¼Œé…ç½®å…å¯†ç™»å½•\n\n```shell script\nuseradd travis\n\npasswd travis\n\nvim /etc/sudoers\n# æ‰¾åˆ°#Allow root to run any commands anywhereè¿™ä¸€æ®µæ³¨é‡Šï¼Œåœ¨ä¸‹é¢æ–°å¢ä¸€è¡Œï¼š\ntravis  ALL=(ALL)   ALL\n\nsu travis\n\ncd ~","createDate":"2020-08-11 10:32:00","updateDate":"2020-10-16 15:07:00","body":"<blockquote>\n<p><a href=\"mailto:&#67;&#101;&#110;&#x74;&#79;&#83;&#x40;&#x37;&#x2e;&#53;\">&#67;&#101;&#110;&#x74;&#79;&#83;&#x40;&#x37;&#x2e;&#53;</a></p>\n</blockquote>\n<h1 id=\"åˆ›å»ºtravisç”¨æˆ·ï¼Œé…ç½®å…å¯†ç™»å½•\">åˆ›å»ºtravisç”¨æˆ·ï¼Œé…ç½®å…å¯†ç™»å½•</h1>\n<pre><code class=\"hljs language-shell\">useradd travis\n\npasswd travis\n\nvim /etc/sudoers\n<span class=\"hljs-meta\"># </span><span class=\"language-bash\">æ‰¾åˆ°<span class=\"hljs-comment\">#Allow root to run any commands anywhereè¿™ä¸€æ®µæ³¨é‡Šï¼Œåœ¨ä¸‹é¢æ–°å¢ä¸€è¡Œï¼š</span></span>\ntravis  ALL=(ALL)   ALL\n\nsu travis\n\ncd ~\n\nssh-keygen -t rsa\n<span class=\"hljs-meta\"># </span><span class=\"language-bash\">passphaseä¸€å®šè¦ä¸ºç©º</span>\n\nchmod 700 ~/.ssh/\nchmod 600 ~/.ssh/*\n\ncd .ssh/\ncat id_rsa.pub &gt;&gt; authorized_keys\ncat authorized_keys\n</code></pre>\n<h1 id=\"å®‰è£…ruby\">å®‰è£…Ruby</h1>\n<pre><code class=\"hljs language-shell\">yum install gcc-c++ patch readline readline-devel zlib zlib-devel \\\n   libyaml-devel libffi-devel openssl-devel make \\\n   bzip2 autoconf automake libtool bison iconv-devel sqlite-devel\n\ncurl -sSL https://rvm.io/mpapis.asc | gpg --import -\ncurl -L get.rvm.io | bash -s stable\n\nsource /etc/profile.d/rvm.sh\nrvm reload\n\nrvm install 2.4.4\n\nrvm use 2.4.2 --default\n</code></pre>\n<h2 id=\"å®‰è£…travis\">å®‰è£…Travis</h2>\n<pre><code class=\"hljs language-shell\">gem install travis\n</code></pre>\n<h2 id=\"æ·»åŠ åŠ å¯†çš„ç§é’¥è‡³ä»£ç ä»“åº“\">æ·»åŠ åŠ å¯†çš„ç§é’¥è‡³ä»£ç ä»“åº“</h2>\n<p><strong>åˆ‡æ¢è‡³travisç”¨æˆ·ï¼Œåœ¨~ç›®å½•ä¸‹æ‹‰å–ä»£ç </strong></p>\n<pre><code class=\"hljs language-shell\">su travis\n\ntravis login\n\ntravis encrypt-file ~/.ssh/id_rsa --add\n</code></pre>\n<p>æ­¤æ—¶<code>.travis.yml</code>ä¼šæ·»åŠ é…ç½®é¡¹</p>\n<pre><code class=\"hljs language-yaml\"><span class=\"hljs-attr\">before_install:</span>\n\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">openssl</span> <span class=\"hljs-string\">aes-256-cbc</span> <span class=\"hljs-string\">-K</span> <span class=\"hljs-string\">$encrypted_f91baf41390f_key</span> <span class=\"hljs-string\">-iv</span> <span class=\"hljs-string\">$encrypted_f91baf41390f_iv</span>\n\n  <span class=\"hljs-string\">-in</span> <span class=\"hljs-string\">id_ras_deploy.enc</span> <span class=\"hljs-string\">-out</span> <span class=\"hljs-string\">~/.ssh/id_ras_deploy</span> <span class=\"hljs-string\">-d</span>\n</code></pre>\n<p>*<em>æ³¨æ„<del>/.sshæœ‰å¯èƒ½ä¸º</del>/.sshéœ€è¦å»æ‰\\*</em></p>\n<p>è§£é‡Šä¸‹è§£å¯†å‘½ä»¤ä¸­<code>-in</code>å’Œ<code>-out</code>å‚æ•°:</p>\n<ul>\n<li>in å‚æ•°æŒ‡å®šå¾…è§£å¯†çš„æ–‡ä»¶ï¼Œä½äºä»“åº“çš„æ ¹ç›®å½•(Travisæ‰§è¡Œä»»åŠ¡æ—¶ä¼šå…ˆæŠŠä»£ç æ‹‰åˆ°Travisè‡ªå·±çš„æœåŠ¡å™¨ä¸Šï¼Œå¹¶è¿›å…¥ä»“åº“æ›´ç›®å½•)</li>\n<li>out å‚æ•°æŒ‡å®šè§£å¯†åçš„å¯†é’¥å­˜æ”¾åœ¨<strong>TravisæœåŠ¡å™¨</strong>çš„~/.ssh/id_rsa</li>\n</ul>\n<h2 id=\"é…ç½®after_successé’©å­\">é…ç½®after_successé’©å­</h2>\n<p>é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º<code>update.sh</code></p>\n<pre><code class=\"hljs language-shell\"><span class=\"hljs-meta\">#</span><span class=\"language-bash\">!/bin/bash</span>\n\necho &quot;pulling image...&quot;\ndocker pull mrrs878/blog:latest\n\necho &quot;stopping old app&quot;\ndocker container stop blog\n\necho &quot;remove old container&quot;\ndocker container rm blog\n\necho &quot;crete new container&quot;\ndocker container create --name blog -p 8081:80 mrrs878/blog:latest\n\necho &quot;starting new app&quot;\ndocker container start blog\n\necho &quot;awesome, you succeeded!&quot;\n</code></pre>\n<p><code>.travis.yml</code>æ·»åŠ <code>after_success</code>é…ç½®é¡¹</p>\n<pre><code class=\"hljs language-yaml\"><span class=\"hljs-attr\">after_success:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">chmod</span> <span class=\"hljs-number\">600</span> <span class=\"hljs-string\">~/.ssh/id_rsa</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">ssh</span> <span class=\"hljs-string\">travis@æœåŠ¡å™¨ip</span> <span class=\"hljs-string\">-o</span> <span class=\"hljs-string\">StrictHostKeyChecking=no</span> <span class=\"hljs-string\">&#x27;cd ~/blog &amp;&amp; sh ./update.sh&#x27;</span>\n</code></pre>\n<h2 id=\"å·²å­˜é¡¹ç›®è¿ç§»\">å·²å­˜é¡¹ç›®è¿ç§»</h2>\n<ol>\n<li>docker hubæ–°å»ºä»“åº“</li>\n<li>å¤åˆ¶<code>.dockerignore/.travis.yml/Dockerfile/nginx.conf/update.sh</code>åˆ°é¡¹ç›®æ ¹ç›®å½•</li>\n<li>ä¿®æ”¹<code>.travis.yml</code>ç›¸å…³é…ç½®ï¼ˆé¡¹ç›®åç§°ï¼‰</li>\n<li>ä¿®æ”¹<code>update.sh</code>ç›¸å…³é…ç½®ï¼ˆé¡¹ç›®ç›®å½•ï¼‰</li>\n<li>æäº¤ä»£ç </li>\n<li>ç™»å½•æœåŠ¡å™¨ï¼Œåˆ‡æ¢è‡³Travisè´¦æˆ·</li>\n<li>åˆ‡æ¢è‡³<code>~</code>ç›®å½•æ‹‰å–é¡¹ç›®ä»£ç </li>\n<li>ä½¿ç”¨<code>travis encrypt-file ~/.ssh/id_rsa --add</code>ç”Ÿæˆå¯†é’¥ã€‚*<em>æ³¨æ„<del>/.sshæœ‰å¯èƒ½ä¸º</del>/.sshéœ€è¦å»æ‰\\*</em></li>\n<li>å‰å¾€Travisæ§åˆ¶å°å¼€å¯ç›‘æ§</li>\n<li>æ‰‹åŠ¨è§¦å‘ç¬¬ä¸€æ¬¡æ„å»º</li>\n</ol>\n<h1 id=\"ref\">Ref</h1>\n<p><a href=\"https://blog.csdn.net/zzzcl112/article/details/80531792\">centos7 å®‰è£…rvmåŠruby</a></p>\n<p><a href=\"https://segmentfault.com/a/1190000018687703\">æ‰‹æ‘¸æ‰‹æ•™ä½ æ­å»º Travis CI æŒç»­é›†æˆå’Œè‡ªåŠ¨åŒ–éƒ¨ç½²</a></p>\n<p><a href=\"https://blog.csdn.net/weixin_34088838/article/details/91367043\">Travis-CIè‡ªåŠ¨åŒ–æµ‹è¯•å¹¶éƒ¨ç½²è‡³è‡ªå·±çš„CentOSæœåŠ¡å™¨</a></p>\n"},{"title":"Docker-è¿›é˜¶","tags":["Dockerä¼˜åŒ–"],"categories":"Docker","description":"# æ‰“åŒ…ä¼˜åŒ–\n\n- ç¼“å­˜ä¾èµ–\n\n  1. å…ˆ `COPY` è¯¥å‘½ä»¤çš„ä¾èµ–æ–‡ä»¶ï¼Œè€Œä¸æ˜¯æ‰€æœ‰æ–‡ä»¶\n  2. æ‰§è¡Œè¯¥å‘½ä»¤\n\n  å¦‚ï¼š\n\n  ```shell\n  FROM node\n  \n  RUN rm -rf /app\n  RUN mkdir /app\n  WORKDIR /app\n  \n  # 1. å…ˆ COPY è¯¥å‘½ä»¤çš„ä¾èµ–æ–‡ä»¶ï¼Œè€Œä¸æ˜¯æ‰€æœ‰æ–‡ä»¶\n  COPY package.json yar","createDate":"2020-08-17 14:16:00","updateDate":"2020-10-16 12:59:40","body":"<h1 id=\"æ‰“åŒ…ä¼˜åŒ–\">æ‰“åŒ…ä¼˜åŒ–</h1>\n<ul>\n<li><p>ç¼“å­˜ä¾èµ–</p>\n<ol>\n<li>å…ˆ <code>COPY</code> è¯¥å‘½ä»¤çš„ä¾èµ–æ–‡ä»¶ï¼Œè€Œä¸æ˜¯æ‰€æœ‰æ–‡ä»¶</li>\n<li>æ‰§è¡Œè¯¥å‘½ä»¤</li>\n</ol>\n<p>å¦‚ï¼š</p>\n<pre><code class=\"hljs language-shell\">FROM node\n\nRUN rm -rf /app\nRUN mkdir /app\nWORKDIR /app\n<span class=\"hljs-meta\">\n# </span><span class=\"language-bash\">1. å…ˆ COPY è¯¥å‘½ä»¤çš„ä¾èµ–æ–‡ä»¶ï¼Œè€Œä¸æ˜¯æ‰€æœ‰æ–‡ä»¶</span>\nCOPY package.json yarn.lock ./\n<span class=\"hljs-meta\"># </span><span class=\"language-bash\">2. æ‰§è¡Œè¯¥å‘½ä»¤</span>\nRUN yarn install\n\nCOPY . .\nRUN yarn build\n\nEXPOSE 3000\n\nCMD [ &quot;node&quot;, &quot;dist/main&quot; ]\n</code></pre>\n<p>æ•ˆæœï¼š</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/docker_build_0.png\" alt=\"Docker buildä¼˜åŒ–\"></p>\n</li>\n</ul>\n<h1 id=\"åˆ é™¤ä¸ç”¨çš„é•œåƒ\">åˆ é™¤ä¸ç”¨çš„é•œåƒ</h1>\n<ul>\n<li>åˆ é™¤æ‚¬ç©ºçš„é•œåƒï¼Œ <code>docker image prune -a -f</code></li>\n<li>åˆ é™¤æ‚¬ç©ºçš„å®¹å™¨ï¼Œ<code>docker container prune -f</code></li>\n</ul>\n"},{"title":"React.jså­¦ä¹ -Fiber","tags":["React.jså­¦ä¹ ","Fiber"],"categories":"React.js","description":"# WHAT\n\n- ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®ƒå¯ä»¥ç”¨ä¸€ä¸ªçº¯ JS å¯¹è±¡æ¥è¡¨ç¤º\n\n```js\nconst fiber = {\n    stateNode,  // èŠ‚ç‚¹å®ä¾‹\n    child,      // ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹\n    sibling,    // ç¬¬ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹\n    return,     // çˆ¶èŠ‚ç‚¹\n}\n```\n\n- ä¸€ç§åŸºäº`requestIdleCallback`çš„è°ƒåº¦ç®—æ³•","createDate":"2020-09-10 9:48:54","updateDate":"2020-09-22 23:15:01","body":"<h1 id=\"what\">WHAT</h1>\n<ul>\n<li>ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®ƒå¯ä»¥ç”¨ä¸€ä¸ªçº¯ JS å¯¹è±¡æ¥è¡¨ç¤º</li>\n</ul>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> fiber = {\n    stateNode,  <span class=\"hljs-comment\">// èŠ‚ç‚¹å®ä¾‹</span>\n    child,      <span class=\"hljs-comment\">// ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹</span>\n    sibling,    <span class=\"hljs-comment\">// ç¬¬ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹</span>\n    <span class=\"hljs-keyword\">return</span>,     <span class=\"hljs-comment\">// çˆ¶èŠ‚ç‚¹</span>\n}\n</code></pre>\n<ul>\n<li>ä¸€ç§åŸºäº<code>requestIdleCallback</code>çš„è°ƒåº¦ç®—æ³•</li>\n</ul>\n<p>Fiberæ˜¯ä¸€ç§å°†recocilationï¼ˆé€’å½’diffï¼‰æ‹†åˆ†æˆæ— æ•°ä¸ªå°ä»»åŠ¡çš„ç®—æ³•ï¼›å®ƒéšæ—¶èƒ½å¤Ÿåœæ­¢ã€æ¢å¤ã€‚åœæ­¢æ¢å¤çš„æ—¶æœºå–å†³äºå½“å‰çš„ä¸€å¸§ï¼ˆ16msï¼‰å†…ï¼Œè¿˜æœ‰æ²¡æœ‰è¶³å¤Ÿçš„äº‹ä»¶å…è®¸è®¡ç®—</p>\n<h1 id=\"why\">WHY</h1>\n<p>React15åœ¨é¡µé¢å…ƒç´ å¾ˆå¤šï¼Œä¸”éœ€è¦é¢‘ç¹åˆ·æ–°çš„åœºæ™¯ä¸‹ä¼šå‡ºç°æ‰å¸§çš„ç°è±¡ï¼š</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/react15.gif\" alt=\"React15æ¸²æŸ“å¾ˆå¤šç»„ä»¶ä¼šå‡ºç°æ‰å¸§\"></p>\n<p>å…¶æ ¹æœ¬åŸå› å°±æ˜¯å¤§é‡çš„åŒæ­¥è®¡ç®—é˜»å¡äº†æµè§ˆå™¨çš„UIæ¸²æŸ“ã€‚å½“æˆ‘ä»¬è°ƒç”¨<code>setState</code>æ›´æ–°é¡µé¢çš„æ—¶å€™ï¼ŒReactä¼šéå†åº”ç”¨çš„æ‰€æœ‰èŠ‚ç‚¹è®¡ç®—å‡ºå·®å¼‚ç„¶åæ›´æ–°UIã€‚æ•´ä¸ªè¿‡ç¨‹æ˜¯<strong>ä¸€æ°”å‘µæˆï¼Œä¸èƒ½è¢«æ‰“æ–­</strong>ã€‚å¦‚æœé¡µé¢å…ƒç´ å¾ˆå¤šï¼Œæ•´ä¸ªè¿‡ç¨‹å ç”¨çš„æ—¶é—´å°±å¯èƒ½è¶…è¿‡16msï¼Œå°±å®¹æ˜“å‡ºç°æ‰å¸§çš„ç°è±¡</p>\n<p>é’ˆå¯¹è¿™ä¸€é—®é¢˜ï¼ŒReactå›¢é˜Ÿä»æ¡†æ¶å±‚é¢å¯¹webé¡µé¢çš„æ¸²æŸ“æœºåˆ¶åšäº†ä¼˜åŒ–ï¼š</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/react16.gif\" alt=\"React16ä¼˜åŒ–åçš„æ•ˆæœ\"></p>\n<h1 id=\"how\">HOW</h1>\n<p><strong>é€’å½’æ”¹å¾ªç¯</strong></p>\n<p>æ—§ç‰ˆReacté€šè¿‡é€’å½’çš„æ–¹å¼è¿›è¡Œæ¸²æŸ“ï¼Œä½¿ç”¨çš„æ˜¯JSå¼•æ“è‡ªèº«çš„å‡½æ•°è°ƒç”¨æ ˆï¼Œå®ƒä¼šä¸€ç›´æ‰§è¡Œåˆ°æ ˆç©ºä¸ºæ­¢ã€‚è€ŒFiberå®ç°äº†è‡ªå·±ç»„ä»¶è°ƒç”¨æ ˆï¼Œå®ƒä»¥<strong>é“¾è¡¨</strong>çš„å½¢å¼éå†ç»„ä»¶æ ‘ï¼Œå¯ä»¥çµæ´»çš„æš‚åœã€ç»§ç»­å’Œä¸¢å¼ƒæ‰§è¡Œçš„ä»»åŠ¡ã€‚å®ç°çš„æ–¹å¼æ˜¯ä½¿ç”¨äº†æµè§ˆå™¨çš„<code>requestIdleCallback</code></p>\n<blockquote>\n<p>window.requestIdleCallback()ä¼šåœ¨æµè§ˆå™¨ç©ºé—²æ—¶æœŸä¾æ¬¡è°ƒç”¨å‡½æ•°ï¼Œè¿™å°±å¯ä»¥è®©å¼€å‘è€…åœ¨ä¸»äº‹ä»¶å¾ªç¯ä¸­æ‰§è¡Œåå°æˆ–ä½ä¼˜å…ˆçº§çš„ä»»åŠ¡ï¼Œè€Œä¸”ä¸ä¼šå¯¹åƒåŠ¨ç”»å’Œç”¨æˆ·äº¤äº’è¿™äº›å»¶è¿Ÿè§¦å‘ä½†å…³é”®çš„äº‹ä»¶äº§ç”Ÿå½±å“ã€‚å‡½æ•°ä¸€èˆ¬ä¼šæŒ‰å…ˆè¿›å…ˆè°ƒç”¨çš„é¡ºåºæ‰§è¡Œï¼Œé™¤éå‡½æ•°åœ¨æµè§ˆå™¨è°ƒç”¨å®ƒä¹‹å‰å°±åˆ°äº†å®ƒçš„è¶…æ—¶æ—¶é—´</p>\n</blockquote>\n<p>Reactå†…éƒ¨è¿ä½œå¯åˆ†ä¸º3å±‚ï¼š</p>\n<ul>\n<li>virtual DOMï¼Œæè¿°é¡µé¢é•¿ä»€ä¹ˆæ ·</li>\n<li>reconcilerï¼Œè´Ÿè´£è°ƒç”¨ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œè¿›è¡ŒDiffè¿ç®—</li>\n<li>renderï¼Œæ ¹æ®ä¸åŒçš„å¹³å°ï¼Œæ¸²æŸ“å‡ºç›¸åº”çš„ç•Œé¢</li>\n</ul>\n<h2 id=\"reconciler\">reconciler</h2>\n<p>ä¹‹å‰çš„<code>reconciler</code>è¢«å‘½åä¸º<code>stack reconciler</code>ï¼Œè¿è¡Œè¿‡ç¨‹ä¸èƒ½è¢«æ‰“æ–­ï¼š</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/stackReconciler.png\" alt=\"stackReconciler\"></p>\n<p>è€Œ<code>fiber reconciler</code>æ¯æ‰§è¡Œä¸€æ®µæ—¶é—´éƒ½ä¼šå°†æ‰§è¡Œæƒäº¤å›æµè§ˆå™¨ï¼Œå¯ä»¥åˆ†æ®µæ‰§è¡Œï¼š</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/fiberReconciler.png\" alt=\"fiberReconclier\"></p>\n<p><code>fiber reconciler</code>åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¼šåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/fiberReconcilerPhase.png\" alt=\"fiberReconcilerPhase\"></p>\n<ul>\n<li>é˜¶æ®µä¸€ï¼Œç”Ÿæˆ<code>fiber</code>æ ‘ï¼Œå¾—å‡ºéœ€è¦æ›´æ–°çš„èŠ‚ç‚¹ä¿¡æ¯ã€‚<strong>å¯ä»¥è¢«æ‰“æ–­</strong></li>\n<li>é˜¶æ®µäºŒï¼Œå°†éœ€è¦æ›´æ–°çš„èŠ‚ç‚¹ä¾æ¬¡æ‰¹é‡æ›´æ–°ï¼Œ<strong>è¿™ä¸ªè¿‡ç¨‹ä¸èƒ½è¢«æ‰“æ–­</strong></li>\n</ul>\n<h2 id=\"fiberæ ‘\">fiberæ ‘</h2>\n<p><code>fiber reconciler</code>åœ¨é˜¶æ®µä¸€è¿›è¡Œ<code>diff</code>è®¡ç®—çš„æ—¶å€™ä¼šç”Ÿæˆä¸€é¢—<code>fiber</code>æ ‘ã€‚è¿™æ£µæ ‘æ˜¯åœ¨<code>virtual DOM</code>æ ‘çš„åŸºç¡€ä¸Šå¢åŠ é¢å¤–çš„ä¿¡æ¯æ¥ç”Ÿæˆçš„ï¼Œæœ¬è´¨æ¥è¯´æ˜¯ä¸€ä¸ªé“¾è¡¨</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/fiberTree.png\" alt=\"fiberTree\"></p>\n<p><code>Fiber</code>æ ‘åœ¨é¦–æ¬¡æ¸²æŸ“çš„æ—¶å€™ä¼šä¸€æ¬¡æ€§ç”Ÿæˆã€‚åœ¨åç»­éœ€è¦<code>diff</code>çš„æ—¶å€™ä¼šæ ¹æ®å·²æœ‰æ ‘å’Œæœ€æ–°<code>virtual DOM</code>çš„ä¿¡æ¯ç”Ÿæˆä¸€é¢—æ–°çš„æ ‘ã€‚è¿™æ£µæ ‘æ¯ç”Ÿæˆä¸€ä¸ªæ–°çš„èŠ‚ç‚¹éƒ½ä¼šå°†æ§åˆ¶æƒäº¤å›ä¸»çº¿ç¨‹ï¼Œå»æ£€æŸ¥æœ‰æ²¡æœ‰ä¼˜å…ˆçº§æ›´é«˜çš„ä»»åŠ¡éœ€è¦æ‰§è¡Œï¼Œå¦‚æœæ²¡æœ‰åˆ™ç»§ç»­æ„å»ºæ ‘çš„è¿‡ç¨‹ï¼š</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/fiberBuild.png\" alt=\"fiberTreeBuild\"></p>\n<p>åœ¨æ„å»ºè¿‡ç¨‹ä¸­å¦‚æœæœ‰ä¼˜å…ˆçº§æ›´é«˜çš„ä»»åŠ¡éœ€è¦æ‰§è¡Œï¼Œåˆ™<code>fiber reconciler</code>ä¼šå°†éœ€è¦æ›´æ–°çš„èŠ‚ç‚¹ä¿¡æ¯ä¿å­˜åœ¨<code>effect listä¸­</code>ï¼Œåœ¨é˜¶æ®µäºŒæ‰§è¡Œçš„æ—¶å€™ä¼šæ‰¹é‡æ›´æ–°ç›¸åº”çš„èŠ‚ç‚¹</p>\n<h1 id=\"ref\">Ref</h1>\n<ul>\n<li><p><a href=\"https://segmentfault.com/a/1190000018250127\">React Fiber åŸç†ä»‹ç»</a></p>\n</li>\n<li><p><a href=\"https://segmentfault.com/a/1190000015057505\">React é‡æ¸©ä¹‹ React Fiber</a></p>\n</li>\n</ul>\n"}]},"__N_SSG":true}