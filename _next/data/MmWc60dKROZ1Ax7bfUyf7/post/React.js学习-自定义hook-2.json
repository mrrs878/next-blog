{"pageProps":{"post":{"title":"React.js学习-自定义hook-2","tags":["React.js学习","hook"],"categories":"React.js","description":"# DOM 副作用修改 / 监听\n\n## 修改页面 title\n\n在组件里调用`useDocumentTitle`即可设置页面标题，且切换页面时，页面标题重置为默认标题 “React.js学习”\n\n```js\nconst useDocumentTitle = (newTitle: string) => {\n\tuseEffect(() => {\n  \tdocument.title = title","createDate":"2020-10-19 15:11:13","updateDate":"2020-10-20 03:22:35","body":"<h1 id=\"dom-副作用修改--监听\">DOM 副作用修改 / 监听</h1>\n<h2 id=\"修改页面-title\">修改页面 title</h2>\n<p>在组件里调用<code>useDocumentTitle</code>即可设置页面标题，且切换页面时，页面标题重置为默认标题 “React.js学习”</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">useDocumentTitle</span> = (<span class=\"hljs-params\">newTitle: string</span>) =&gt; {\n    <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n      <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">title</span> = title\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-function\">() =&gt;</span> {\n        <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">title</span> = <span class=\"hljs-string\">&quot;React.js学习&quot;</span>\n    }\n  }, [newTitle])\n}\n</code></pre>\n<h2 id=\"监听页面大小发生改变（网络状况发生改变），重新渲染界面\">监听页面大小发生改变（网络状况发生改变），重新渲染界面</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getSize</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">const</span> { innerWidth, innerHeight, outerHeight, outerWidth } = <span class=\"hljs-variable language_\">window</span>\n  <span class=\"hljs-keyword\">return</span> {\n    innerWidth,\n    innerHeight,\n    outerHeight,\n    outerWidth\n  };\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">useWindowSizeChange</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">const</span> [windowSize, setWindowSize] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-title function_\">getSize</span>());\n\n  <span class=\"hljs-keyword\">const</span> onWindowSizeChange = <span class=\"hljs-title function_\">useCallback</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title function_\">setWindowSize</span>(<span class=\"hljs-title function_\">getSize</span>());\n  }, [])\n\n  <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&#x27;resize&#x27;</span>, onWindowSizeChange);\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-function\">() =&gt;</span> {\n      <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">removeEventListener</span>(<span class=\"hljs-string\">&#x27;resize&#x27;</span>, onWindowSizeChange);\n    }\n  }, [onWindowSizeChange])\n\n  <span class=\"hljs-keyword\">return</span> windowSize;\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getInternetState</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">const</span> { onLine } = navigator\n  <span class=\"hljs-keyword\">return</span> onLine ? <span class=\"hljs-string\">&#x27;online&#x27;</span> : <span class=\"hljs-string\">&#x27;offline&#x27;</span>\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">useInternetStateChange</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">const</span> [internetState, setInternetState] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-title function_\">getInternetState</span>())\n\n  <span class=\"hljs-keyword\">const</span> onInternetStateChange = <span class=\"hljs-title function_\">useCallback</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title function_\">setInternetState</span>(<span class=\"hljs-title function_\">getInternetState</span>())\n  }, [])\n\n  <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&quot;online&quot;</span>, onInternetStateChange)\n    <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&quot;offline&quot;</span>, onInternetStateChange)\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-function\">() =&gt;</span> {\n      <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">removeEventListener</span>(<span class=\"hljs-string\">&quot;online&quot;</span>, onInternetStateChange)\n      <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">removeEventListener</span>(<span class=\"hljs-string\">&quot;offline&quot;</span>, onInternetStateChange)\n    }\n  }, [onInternetStateChange])\n\n  <span class=\"hljs-keyword\">return</span> internetState\n}\n</code></pre>\n"}},"__N_SSG":true}