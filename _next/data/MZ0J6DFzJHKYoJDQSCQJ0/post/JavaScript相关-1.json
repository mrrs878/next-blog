{"pageProps":{"post":{"title":"JavaScriptç›¸å…³-1","tags":["JavaScript"],"categories":"JavaScript","description":"## document.write\n\n`document.write()` æ–¹æ³•å°†ä¸€ä¸ªæ–‡æœ¬å­—ç¬¦ä¸²å†™å…¥ä¸€ä¸ªç”± [`document.open()`](https://developer.mozilla.org/zh-CN/docs/Web/API/Document/open) æ‰“å¼€çš„æ–‡æ¡£æµï¼ˆdocument streamï¼‰ã€‚ï¼ˆ[MDN](https://developer.mozilla.org","createDate":"2020-02-11 23:33:22","updateDate":"10/1/2021, 3:34:43 AM","body":"<h2 id=\"documentwrite\">document.write</h2>\n<p><code>document.write()</code> æ–¹æ³•å°†ä¸€ä¸ªæ–‡æœ¬å­—ç¬¦ä¸²å†™å…¥ä¸€ä¸ªç”± <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Document/open\"><code>document.open()</code></a> æ‰“å¼€çš„æ–‡æ¡£æµï¼ˆdocument streamï¼‰ã€‚ï¼ˆ<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Document/write\">MDN</a>ï¼‰</p>\n<p>ä½œç”¨ï¼š</p>\n<p>åŠ è½½åªæœ‰å¯ç”¨JavaScriptåçš„æ ·å¼æ–‡ä»¶</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n    <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">open</span>()\n    docuemnt.<span class=\"hljs-title function_\">write</span>(<span class=\"hljs-string\">&#x27;&lt;link rel=&quot;stylesheet&quot; href=&quot;style_neads_js.css&quot; /&gt;&#x27;</span>)\n    <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">close</span>()\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n</code></pre>\n<p>å¼Šç«¯ï¼š</p>\n<ul>\n<li>åœ¨éloadingé˜¶æ®µä½¿ç”¨<code>docuemnt.write</code>ä¼šæ¸…é™¤å·²åŠ è½½çš„é¡µé¢</li>\n<li><code>docuemnt.write</code>ä¸èƒ½å¤Ÿåœ¨XHTMLä¸­ä½¿ç”¨</li>\n<li>åµŒå…¥scriptä¸­çš„<code>docuemnt.write</code>ä¸èƒ½ç»™ä»»æ„èŠ‚ç‚¹æ·»åŠ å­èŠ‚ç‚¹ï¼Œå› ä¸ºå®ƒæ˜¯éšç€DOMçš„æ„å»ºæ‰§è¡Œçš„</li>\n<li>åˆ©ç”¨<code>docuemnt.write</code>å†™å…¥HTMLå­—ç¬¦æµå¹¶ä¸æ˜¯ä¸€ä¸ªå¥½æ–¹æ³•ï¼Œå®ƒæœ‰è¿DOMæ“ä½œçš„æ¦‚å¿µ</li>\n<li>åˆ©ç”¨<code>docuemnt.write</code>æ·»åŠ scriptåŠ è½½å¤–éƒ¨è„šæœ¬æ—¶ï¼Œæµè§ˆå™¨çš„HTMLè§£æä¼šè¢«scriptçš„åŠ è½½æ‰€é˜»å¡</li>\n</ul>\n<h2 id=\"åŠŸèƒ½æ£€æµ‹ï¼ˆfeature-detectionï¼‰ã€åŠŸèƒ½æ¨æ–­ï¼ˆfeature-inferenceï¼‰ã€å’Œä½¿ç”¨uaå­—ç¬¦ä¸²ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«\">åŠŸèƒ½æ£€æµ‹ï¼ˆfeature detectionï¼‰ã€åŠŸèƒ½æ¨æ–­ï¼ˆfeature inferenceï¼‰ã€å’Œä½¿ç”¨UAå­—ç¬¦ä¸²ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«</h2>\n<p>åŠŸèƒ½æ£€æµ‹ï¼ˆfeature detectionï¼‰ ğŸ‘</p>\n<p>åŠŸèƒ½æ£€æµ‹åŒ…æ‹¬ç¡®å®šæµè§ˆå™¨æ˜¯å¦æ”¯æŒæŸæ®µä»£ç ï¼Œä»¥åŠæ˜¯å¦èƒ½è¿è¡Œä¸åŒçš„ä»£ç ï¼ˆå–å†³äºå®ƒæ˜¯å¦æ‰§è¡Œï¼‰ï¼Œä¸€è¾¹æµè§ˆå™¨èƒ½å§‹ç»ˆæ­£ç¡®è¿è¡Œä»£ç åŠŸèƒ½ï¼Œè€Œä¸ä¼šåœ¨æŸäº›æµè§ˆå™¨ä¸­å‡ºç°å´©æºƒå’Œé”™è¯¯</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">if</span> (<span class=\"hljs-string\">&quot;geolocation&quot;</span> <span class=\"hljs-keyword\">in</span> navigator) {\n    <span class=\"hljs-comment\">// å¯ä»¥ä½¿ç”¨ navigator.geolocation</span>\n} <span class=\"hljs-keyword\">else</span> {\n    <span class=\"hljs-comment\">// å¤„ç† navigator.geolocation åŠŸèƒ½ç¼ºå¤±</span>\n}\n</code></pre>\n<p>åŠŸèƒ½æ¨æ–­ï¼ˆfeature inferenceï¼‰ğŸ‘</p>\n<p>åŠŸèƒ½æ¨æ–­ä¸åŠŸèƒ½æ£€æµ‹ä¸€æ ·ï¼Œä¼šå¯¹åŠŸèƒ½å¯ç”¨æ€§è¿›è¡Œæ£€æŸ¥ï¼Œä½†æ˜¯åœ¨åˆ¤æ–­é€šè¿‡åè¿˜ä¼šä½¿ç”¨å…¶ä»–åŠŸèƒ½ï¼Œå› ä¸ºå®ƒå‡è®¾å…¶ä»–åŠŸèƒ½ä¹Ÿå¯ç”¨</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">getElementsByTagName</span>) {\n  element = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(id);\n}\n</code></pre>\n<p>UA ğŸ‘</p>\n<p>è¿™æ˜¯ä¸€ä¸ªæµè§ˆå™¨æŠ¥å‘Šçš„å­—ç¬¦ä¸²ï¼Œå®ƒå…è®¸ç½‘ç»œåè®®å¯¹ç­‰æ–¹ï¼ˆnetwork protocol peersï¼‰è¯†åˆ«è¯·æ±‚ç”¨æˆ·ä»£ç†çš„åº”ç”¨ç±»å‹ã€æ“ä½œç³»ç»Ÿã€åº”ç”¨ä¾›åº”å•†å’Œåº”ç”¨ç‰ˆæœ¬ã€‚å®ƒå¯ä»¥é€šè¿‡<code>navigator.userAgent</code>è®¿é—®ã€‚ç„¶è€Œï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å¾ˆå¯èƒ½å­˜åœ¨æ¬ºéª—æ€§ï¼Œä¾‹å¦‚ï¼Œchromeä¼šåŒæ—¶ä½œä¸ºchromeå’Œsafariè¿›è¡ŒæŠ¥å‘Šï¼Œå› æ­¤ï¼Œè¦æ£€æµ‹safariï¼Œé™¤äº†æ£€æŸ¥safariå­—ç¬¦ä¸²ï¼Œè¿˜è¦æ£€æŸ¥æ˜¯å¦åŒæ—¶å­˜åœ¨chromeå­—ç¬¦ä¸²ã€‚</p>\n<h2 id=\"ajax\">Ajax</h2>\n<p><strong>WHAT</strong></p>\n<p>Ajaxï¼ˆasynchronous JavaScript and XMLï¼‰æ˜¯ä½¿ç”¨å®¢æˆ·ç«¯ä¸Šçš„è®¸å¤šwebæŠ€æœ¯ï¼Œåˆ›å»ºå¼‚æ­¥webåº”ç”¨çš„ä¸€ç§<strong>æŠ€æœ¯ç»“åˆä½“</strong>ã€‚å€ŸåŠ©Ajaxï¼Œwebåº”ç”¨å¯ä»¥<strong>å¼‚æ­¥</strong>ï¼ˆåœ¨åå°ï¼‰å‘æœåŠ¡å™¨å‘é€æ•°æ®å¯ä»æœåŠ¡å™¨æ£€ç´¢æ•°æ®è€Œä¸ä¼šå¹²æ‰°ç°æœ‰é¡µé¢çš„æ˜¾ç¤ºå’Œè¡Œä¸ºã€‚é€šè¿‡å°†<strong>æ•°æ®äº¤äº’å±‚ä¸è¡¨ç¤ºå±‚åˆ†ç¦»</strong>ï¼ŒAjaxå…è®¸ç½‘é¡µå’Œæ‰©å±•webåº”ç”¨ç¨‹åºåŠ¨æ€æ›´æ”¹å†…å®¹è€Œ<strong>ä¸éœ€é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢</strong>ï¼Œå®é™…ä¸Šï¼Œç°åœ¨é€šå¸¸å°†XMLæ›¿æ¢ä¸ºJSONï¼Œå› ä¸ºJavaScriptå¯¹JSONæœ‰åŸç”Ÿæ”¯æŒä¼˜åŠ¿</p>\n<p><strong>WHY</strong></p>\n<p>ä¼˜ç‚¹ï¼š</p>\n<ul>\n<li>äº¤äº’æ€§æ›´å¥½ï¼Œæ¥è‡ªæœåŠ¡å™¨çš„æ–°å†…å®¹å¯ä»¥åŠ¨æ€æ›´æ”¹ï¼Œæ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢</li>\n<li>å‡å°‘ä¸æœåŠ¡å™¨çš„è¿æ¥ï¼Œå› ä¸ºè„šæœ¬å’Œæ ·å¼åªéœ€è¦è¢«è¯·æ±‚ä¸€æ¬¡</li>\n<li>çŠ¶æ€å¯ä»¥ç»´æŠ¤åœ¨ä¸€ä¸ªé¡µé¢ä¸Šï¼ŒJavaScriptå˜é‡å’ŒDOMçŠ¶æ€å°†çš„åˆ°ä¿æŒï¼Œå› ä¸ºä¸»å®¹å™¨é¡µé¢æœªè¢«é‡æ–°åŠ è½½</li>\n<li>åŸºæœ¬ä¸ŠåŒ…å«å¤§éƒ¨åˆ†SPAçš„ä¼˜ç‚¹</li>\n</ul>\n<p>ç¼ºç‚¹</p>\n<ul>\n<li>åŠ¨æ€ç½‘é¡µå¾ˆéš¾æ”¶è—</li>\n<li>å¦‚æœJavaScriptåœ¨æµè§ˆå™¨ä¸­è¢«ç¦ç”¨åˆ™ä¸èµ·ä½œç”¨</li>\n<li>æœ‰äº›ç½‘ç»œçˆ¬è™«ä¸æ‰§è¡ŒJavaScriptï¼Œä¹Ÿä¸ä¼šçœ‹åˆ°JavaScriptåŠ è½½çš„å†…å®¹</li>\n</ul>\n<p><strong>HOW</strong></p>\n<ul>\n<li>ä½¿ç”¨<code>CSS</code>å’Œ<code>XHTML</code>æ¥è¡¨ç¤º</li>\n<li>ä½¿ç”¨<code>DOM</code>æ¨¡å‹æ¥äº¤äº’å’ŒåŠ¨æ€æ˜¾ç¤º</li>\n<li>ä½¿ç”¨<code>XMLHttpRequest</code>æ¥å’ŒæœåŠ¡å™¨è¿›è¡Œå¼‚æ­¥é€šä¿¡</li>\n<li>ä½¿ç”¨<code>JavaScript </code>æ¥ç»‘å®šå’Œè°ƒç”¨</li>\n</ul>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">var</span> ajax = {};\najax.<span class=\"hljs-property\">httpRequest</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">XMLHttpRequest</span>) {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">XMLHttpRequest</span>();\n    }\n    <span class=\"hljs-keyword\">var</span> versions = [\n        <span class=\"hljs-string\">&quot;MSXML2.XmlHttp.6.0&quot;</span>,\n        <span class=\"hljs-string\">&quot;MSXML2.XmlHttp.5.0&quot;</span>,\n        <span class=\"hljs-string\">&quot;MSXML2.XmlHttp.4.0&quot;</span>,\n        <span class=\"hljs-string\">&quot;MSXML2.XmlHttp.3.0&quot;</span>,\n        <span class=\"hljs-string\">&quot;MSXML2.XmlHttp.2.0&quot;</span>,\n        <span class=\"hljs-string\">&quot;Microsoft.XmlHttp&quot;</span>\n    ];\n    <span class=\"hljs-keyword\">let</span> xhr;\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>; i &lt; versions.<span class=\"hljs-property\">length</span>; i++) {\n        <span class=\"hljs-keyword\">try</span> {\n            xhr = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ActiveXObject</span>(versions[i]);\n            <span class=\"hljs-keyword\">break</span>;\n        } <span class=\"hljs-keyword\">catch</span> (e) {\n        }\n    }\n    <span class=\"hljs-keyword\">return</span> xhr;\n};\n\najax.<span class=\"hljs-property\">send</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">url, callback, method, data, <span class=\"hljs-keyword\">async</span></span>) {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">async</span> === <span class=\"hljs-literal\">undefined</span>) {\n        <span class=\"hljs-keyword\">async</span> = <span class=\"hljs-literal\">true</span>;\n    }\n    <span class=\"hljs-keyword\">let</span> httpRequest = ajax.<span class=\"hljs-title function_\">httpRequest</span>();\n    httpRequest.<span class=\"hljs-title function_\">open</span>(method, url, <span class=\"hljs-keyword\">async</span>);\n    httpRequest.<span class=\"hljs-property\">onreadystatechange</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n        <span class=\"hljs-keyword\">if</span> (httpRequest.<span class=\"hljs-property\">readyState</span> == <span class=\"hljs-number\">4</span>) {\n            <span class=\"hljs-title function_\">callback</span>(httpRequest.<span class=\"hljs-property\">responseText</span>)\n        }\n    };\n    <span class=\"hljs-keyword\">if</span> (method == <span class=\"hljs-string\">&#x27;POST&#x27;</span>) {\n        httpRequest.<span class=\"hljs-title function_\">setRequestHeader</span>(<span class=\"hljs-string\">&#x27;Content-type&#x27;</span>, <span class=\"hljs-string\">&#x27;application/x-www-form-urlencoded&#x27;</span>);\n    }\n    httpRequest.<span class=\"hljs-title function_\">send</span>(data);\n};\n\najax.<span class=\"hljs-property\">get</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">url, data, callback, <span class=\"hljs-keyword\">async</span></span>) {\n    <span class=\"hljs-keyword\">let</span> query = [];\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> key <span class=\"hljs-keyword\">in</span> data) {\n        query.<span class=\"hljs-title function_\">push</span>(<span class=\"hljs-built_in\">encodeURIComponent</span>(key) + <span class=\"hljs-string\">&#x27;=&#x27;</span> + <span class=\"hljs-built_in\">encodeURIComponent</span>(data[key]));\n    }\n    ajax.<span class=\"hljs-title function_\">send</span>(url + (query.<span class=\"hljs-property\">length</span> ? <span class=\"hljs-string\">&#x27;?&#x27;</span> + query.<span class=\"hljs-title function_\">join</span>(<span class=\"hljs-string\">&#x27;&amp;&#x27;</span>) : <span class=\"hljs-string\">&#x27;&#x27;</span>), callback, <span class=\"hljs-string\">&#x27;GET&#x27;</span>, <span class=\"hljs-literal\">null</span>, <span class=\"hljs-keyword\">async</span>)\n};\n\najax.<span class=\"hljs-property\">post</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">url, data, callback, <span class=\"hljs-keyword\">async</span></span>) {\n    <span class=\"hljs-keyword\">let</span> query = [];\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> key <span class=\"hljs-keyword\">in</span> data) {\n        query.<span class=\"hljs-title function_\">push</span>(<span class=\"hljs-built_in\">encodeURIComponent</span>(key) + <span class=\"hljs-string\">&#x27;=&#x27;</span> + <span class=\"hljs-built_in\">encodeURIComponent</span>(data[key]));\n    }\n    ajax.<span class=\"hljs-title function_\">send</span>(url, callback, <span class=\"hljs-string\">&#x27;POST&#x27;</span>, query.<span class=\"hljs-title function_\">join</span>(<span class=\"hljs-string\">&#x27;&amp;&#x27;</span>), <span class=\"hljs-keyword\">async</span>)\n};\n</code></pre>\n<h2 id=\"jsonp\">JSONP</h2>\n<p><strong>WHAT</strong></p>\n<p>å¸¦å¡«å……çš„jsonï¼ˆp for paddingï¼‰ï¼Œæ˜¯ä¸€ç§é€šå¸¸ç”¨äºç»•è¿‡æµè§ˆå™¨ä¸­çš„è·¨åŸŸé€‰å€çš„æ–¹æ³•ï¼Œå› ä¸ºAjaxä¸å…è®¸è·¨åŸŸè¯·æ±‚ã€‚</p>\n<p>åŸç†ï¼šåˆ©ç”¨ <code>&lt;script&gt;</code> æ ‡ç­¾æ²¡æœ‰è·¨åŸŸé™åˆ¶çš„æ¼æ´ã€‚é€šè¿‡ <code>&lt;script&gt;</code> æ ‡ç­¾æŒ‡å‘ä¸€ä¸ªéœ€è¦è®¿é—®çš„åœ°å€å¹¶æä¾›ä¸€ä¸ªå›è°ƒå‡½æ•°æ¥æ¥æ”¶æ•°æ®ã€‚</p>\n<p><strong>WHY</strong></p>\n<p>è§£å†³è·¨åŸŸï¼ˆåªé€‚ç”¨äºGETè¯·æ±‚ï¼‰</p>\n<p><strong>HOW</strong></p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jsonp.js</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">jsonp</span>(<span class=\"hljs-params\">{ url, params, cb }</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve, reject</span>) =&gt;</span> {\n        <span class=\"hljs-keyword\">let</span> script = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createElement</span>(<span class=\"hljs-string\">&quot;script&quot;</span>)\n        <span class=\"hljs-variable language_\">window</span>[cb] = <span class=\"hljs-function\"><span class=\"hljs-params\">data</span> =&gt;</span> {\n            <span class=\"hljs-title function_\">resolve</span>(data)\n            <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">body</span>.<span class=\"hljs-title function_\">removeChild</span>(script)\n        }\n        params = { ...params, cb }\n        <span class=\"hljs-keyword\">let</span> tmp = []\n        <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">let</span> key <span class=\"hljs-keyword\">in</span> params)\n            tmp.<span class=\"hljs-title function_\">push</span>(<span class=\"hljs-string\">`<span class=\"hljs-subst\">${ key }</span>=<span class=\"hljs-subst\">${ params[key] }</span>`</span>)\n        script.<span class=\"hljs-property\">src</span> = <span class=\"hljs-string\">`<span class=\"hljs-subst\">${ url }</span>?<span class=\"hljs-subst\">${ tmp.join(<span class=\"hljs-string\">&quot;&amp;&quot;</span>) }</span>`</span>\n    })\n}\n\n<span class=\"hljs-title function_\">jsonp</span>({ \n    <span class=\"hljs-attr\">url</span>: <span class=\"hljs-string\">&quot;http://localhost:3000/say&quot;</span>,\n    <span class=\"hljs-attr\">params</span>: { <span class=\"hljs-attr\">wd</span>: <span class=\"hljs-string\">&quot;hello jsonp&quot;</span> },\n    <span class=\"hljs-attr\">cb</span>: <span class=\"hljs-string\">&quot;show&quot;</span>\n}).<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">data</span> =&gt;</span> {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(data);\n})\n\n<span class=\"hljs-comment\">// server.js</span>\n<span class=\"hljs-keyword\">let</span> express = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;express&quot;</span>)\n<span class=\"hljs-keyword\">let</span> app = <span class=\"hljs-title function_\">express</span>()\napp.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&quot;/say&quot;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">res, res</span>) =&gt;</span> {\n    <span class=\"hljs-keyword\">let</span> { wd, cb } = req.<span class=\"hljs-property\">query</span>\n    res.<span class=\"hljs-title function_\">end</span>(<span class=\"hljs-string\">`<span class=\"hljs-subst\">${cb}</span>(&#x27;i am fine, and you?&#x27;)`</span>)\n})\napp.<span class=\"hljs-title function_\">listen</span>(<span class=\"hljs-number\">3000</span>)\n</code></pre>\n<h2 id=\"å˜é‡æå‡\">å˜é‡æå‡</h2>\n<p>å˜é‡æå‡ï¼ˆhoistingï¼‰ç”¨äºè§£é‡Šä»£ç ä¸­å˜é‡å£°æ˜è¡Œä¸ºçš„æœ¯è¯­ã€‚ä½¿ç”¨<code>var</code>å…³é”®å­—å£°æ˜æˆ–åˆå§‹åŒ–çš„å˜é‡ä¼šå°†å£°æ˜è¯­å¥â€œæå‡â€åˆ°å½“å‰ä½œç”¨åŸŸçš„é¡¶éƒ¨ã€‚ä½†æ˜¯åªæœ‰å£°æ˜æ‰ä¼šè§¦å‘æå‡ï¼Œèµ‹å€¼è¯­å¥å°†ä¿æŒåŸæ ·ã€‚</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(foo) <span class=\"hljs-comment\">// undefined</span>\n<span class=\"hljs-keyword\">var</span> foo = <span class=\"hljs-number\">1</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(foo) <span class=\"hljs-comment\">// 1</span>\n\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(foo) <span class=\"hljs-comment\">// ReferenceError: bar is not defined</span>\n<span class=\"hljs-keyword\">let</span> foo = <span class=\"hljs-number\">1</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(foo) <span class=\"hljs-comment\">// 1</span>\n</code></pre>\n<p>å‡½æ•°å£°æ˜ä¼šä½¿å‡½æ•°ä½“æå‡ï¼Œä½†å‡½æ•°è¡¨è¾¾å¼ï¼ˆä»¥å£°æ˜å˜é‡çš„å½¢å¼ä¹¦å†™ï¼‰åªæœ‰å˜é‡å£°æ˜ä¼šæå‡</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// å‡½æ•°å£°æ˜</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(foo)\n<span class=\"hljs-title function_\">foo</span>(); <span class=\"hljs-comment\">// &#x27;foo&#x27;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">foo</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;foo&#x27;</span>)\n}\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(foo); <span class=\"hljs-comment\">// [Function: foo]</span>\n\n<span class=\"hljs-comment\">// å‡½æ•°è¡¨è¾¾å¼</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(bar) <span class=\"hljs-comment\">// undefined</span>\n<span class=\"hljs-title function_\">bar</span>(); <span class=\"hljs-comment\">// Uncaught TypeError: bar is not a function</span>\n<span class=\"hljs-keyword\">var</span> bar = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;bar&#x27;</span>)\n}\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(bar) <span class=\"hljs-comment\">// [Function: bar]</span>\n</code></pre>\n<h2 id=\"äº‹ä»¶å†’æ³¡\">äº‹ä»¶å†’æ³¡</h2>\n<p>å½“ä¸€ä¸ªäº‹ä»¶åœ¨DOMå…ƒç´ ä¸Šè§¦å‘æ—¶ï¼Œå¦‚æœæœ‰æ—¶é—´ç›‘å¬å™¨ï¼Œå®ƒå°è¯•å¤„ç†è¯¥äº‹ä»¶ï¼Œç„¶åäº‹ä»¶å†’æ³¡åˆ°å…¶çˆ¶çº§å…ƒç´ ï¼Œå¹¶å‘ç”ŸåŒæ ·çš„äº‹æƒ…ï¼Œæœ€åç›´è‡³åˆ°è¾¾ç¥–å…ˆå…ƒç´ ã€‚æ—¶é—´å†’æ³¡æœºåˆ¶æ˜¯å®ç°äº‹ä»¶å§”æ‰˜ï¼ˆevent delegationï¼‰çš„åŸç†</p>\n<h2 id=\"attributeå’Œproperty\">attributeå’Œproperty</h2>\n<p>attributeæ˜¯åœ¨HTMLä¸­å®šä¹‰çš„ï¼Œè€Œpropertyå®åœ¨DOMä¸Šå®šä¹‰çš„ã€‚</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;input1&quot;</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;text&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;hello&quot;</span> /&gt;</span>\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n    <span class=\"hljs-keyword\">const</span> input = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&quot;input1&quot;</span>)\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(input.<span class=\"hljs-title function_\">getAttribute</span>(<span class=\"hljs-string\">&quot;value&quot;</span>)) <span class=\"hljs-comment\">// hello</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(input.<span class=\"hljs-property\">value</span>) <span class=\"hljs-comment\">// hello</span>\n    \n    <span class=\"hljs-comment\">// å½“åœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥ â€˜worldâ€™ å</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(input.<span class=\"hljs-title function_\">getAttribute</span>(<span class=\"hljs-string\">&quot;value&quot;</span>)) <span class=\"hljs-comment\">// hello</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(input.<span class=\"hljs-property\">value</span>) <span class=\"hljs-comment\">// world</span>\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n</code></pre>\n<h2 id=\"documentçš„loadäº‹ä»¶å’Œdomcontentloadedäº‹ä»¶ä¹‹é—´çš„åŒºåˆ«\">documentçš„loadäº‹ä»¶å’ŒDOMContentLoadedäº‹ä»¶ä¹‹é—´çš„åŒºåˆ«</h2>\n<p>DOMContentLoadedï¼šğŸ‘</p>\n<p>å½“åˆå§‹çš„HTMLæ–‡æ¡£æœ¬å®Œå…¨åŠ è½½å’Œè§£æå®Œæˆä¹‹åï¼ŒDOMContentLoadedäº‹ä»¶è¢«è§¦å‘è€Œæ— éœ€ç­‰å¾…æ ·å¼è¡¨ã€å›¾åƒå’Œå­æ¡†æ¶çš„å®ŒæˆåŠ è½½</p>\n<p>loadï¼š</p>\n<p>windowçš„loadäº‹ä»¶ä»…åœ¨DOMå’Œæ‰€æœ‰ç›¸å…³èµ„æºå…¨éƒ¨å®ŒæˆåŠ è½½åæ‰ä¼šè§¦å‘</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&quot;DOMContentLoaded&quot;</span>, <span class=\"hljs-function\"><span class=\"hljs-params\">event</span> =&gt;</span> {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;DOMContentLoaded&quot;</span>);\n})\n<span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&quot;load&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;window loaded&quot;</span>);\n})\n\n<span class=\"hljs-comment\">// DOMContentLoaded</span>\n<span class=\"hljs-comment\">// window loaded</span>\n</code></pre>\n<h2 id=\"åŒæºç­–ç•¥\">åŒæºç­–ç•¥</h2>\n<p>åŒæºç­–ç•¥æ˜¯ç”±Netscapeæå‡ºçš„ä¸€ä¸ªè‘—åçš„å®‰å…¨ç­–ç•¥ï¼Œæµè§ˆå™¨å‡ºäºå®‰å…¨æ–¹é¢çš„è€ƒè™‘ï¼Œåªå…è®¸æœ¬åŸŸåä¸‹çš„æ¥å£äº¤äº’ï¼Œä¸åŒæºçš„å®¢æˆ·ç«¯è„šæœ¬ï¼Œåœ¨æ²¡æœ‰æ˜ç¡®æˆæƒçš„æƒ…å†µä¸‹ï¼Œä¸èƒ½è¯»å–å¯¹æ–¹çš„èµ„æºã€‚</p>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy\">åŒæºçš„å®šä¹‰:</a></p>\n<p>å¦‚æœä¸¤ä¸ªé¡µé¢çš„åè®®ï¼Œç«¯å£ï¼ˆå¦‚æœæœ‰æŒ‡å®šï¼‰å’Œä¸»æœºéƒ½ç›¸åŒï¼Œåˆ™ä¸¤ä¸ªé¡µé¢å…·æœ‰ç›¸åŒçš„<strong>æº</strong>ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠå®ƒç§°ä¸ºâ€œåè®®/ä¸»æœº/ç«¯å£ tupleâ€ï¼Œæˆ–ç®€å•åœ°å«åšâ€œtuple&quot;. (&quot;tuple&quot; ï¼Œâ€œå…ƒâ€ï¼Œæ˜¯æŒ‡ä¸€äº›äº‹ç‰©ç»„åˆåœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªæ•´ä½“ï¼Œæ¯”å¦‚ï¼ˆ1ï¼Œ2ï¼‰å«äºŒå…ƒï¼Œï¼ˆ1ï¼Œ2ï¼Œ3ï¼‰å«ä¸‰å…ƒ)</p>\n<p>ä¸‹è¡¨ç»™å‡ºäº†ç›¸å¯¹<code>http://store.company.com/dir/page.html</code>åŒæºæ£€æµ‹çš„ç¤ºä¾‹:</p>\n<p>| URL                                               | ç»“æœ | åŸå›          |\n| </p>\n"}},"__N_SSG":true}