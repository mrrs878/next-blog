{"pageProps":{"post":{"title":"å‰ç«¯æ¶æ„&è½¯å®åŠ›-é¢„åŠ è½½&æ‡’åŠ è½½","tags":["é¢„åŠ è½½&æ‡’åŠ è½½"],"categories":"å‰ç«¯æ¶æ„&è½¯å®åŠ›","description":"# é¢„åŠ è½½\n\n## å®ç°æ€è·¯\n\n`new`ä¸€ä¸ªæ–°çš„`Imgnode`ï¼Œç»™`Imgnode`çš„`src`èµ‹å€¼ä¸ºçœŸæ­£çš„`src`ï¼›è¯¥`Imgnode`åœ¨åŠ è½½å®Œæ¯•åç›¸åº”çš„å›¾ç‰‡èµ„æºå°±ä¼šåœ¨æœ¬åœ°ç¼“å­˜ã€‚\n\n```js\nfunction  preLoad (...src) {\n\tsrc.forEach(item  => {\n\t\tconst  imgNode = new Image()\n\t\timgNode.sr","createDate":"2020-04-24 21:17:04","updateDate":"2021-02-20 17:16:23","body":"<h1 id=\"é¢„åŠ è½½\">é¢„åŠ è½½</h1>\n<h2 id=\"å®ç°æ€è·¯\">å®ç°æ€è·¯</h2>\n<p><code>new</code>ä¸€ä¸ªæ–°çš„<code>Imgnode</code>ï¼Œç»™<code>Imgnode</code>çš„<code>src</code>èµ‹å€¼ä¸ºçœŸæ­£çš„<code>src</code>ï¼›è¯¥<code>Imgnode</code>åœ¨åŠ è½½å®Œæ¯•åç›¸åº”çš„å›¾ç‰‡èµ„æºå°±ä¼šåœ¨æœ¬åœ°ç¼“å­˜ã€‚</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span>  <span class=\"hljs-title function_\">preLoad</span> (...src) {\n    src.<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">item</span>  =&gt;</span> {\n        <span class=\"hljs-keyword\">const</span>  imgNode = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Image</span>()\n        imgNode.<span class=\"hljs-property\">src</span> = realSrc\n    })\n}\n</code></pre>\n<h1 id=\"æ‡’åŠ è½½\">æ‡’åŠ è½½</h1>\n<h2 id=\"å®ç°æ€è·¯-1\">å®ç°æ€è·¯</h2>\n<p>é¦–å…ˆè®¾ç½®ä¸€ä¸ªä¸´æ—¶å±æ€§ <code>data-src</code>ï¼Œå½“å‰å…ƒç´ æ˜¯å¦å‡ºç°åœ¨è§†å£æ—¶ä½¿ç”¨ <code>src</code> ä»£æ›¿ <code>data-src</code>ã€‚</p>\n<ol>\n<li><p><code>window.onscroll</code> + <code>clientTop</code>ï¼Œ<code>offsetTop</code>ï¼Œ<code>clientHeight</code> <code>scrollTop</code> + èŠ‚æµ ğŸ‘</p>\n<p>ä¸å®¹æ˜“åˆ¤æ–­å…ƒç´ çš„ä½ç½®</p>\n</li>\n<li><p><code>window.onscroll</code> + <code>Element.getBoundingClientRect()</code> + èŠ‚æµğŸ‘</p>\n<p><code>getBoundingClientRect</code>ä¼šè§¦å‘å›æµ</p>\n</li>\n<li><p><code>IntersectionObserver</code>ğŸ‘</p>\n<pre><code class=\"hljs language-js\">&lt;img  style=<span class=\"hljs-string\">&quot;width: 200px;&quot;</span>  id=<span class=\"hljs-string\">&quot;img&quot;</span>  data-src=<span class=\"hljs-string\">&quot;./assets/yoda.jpg&quot;</span>  alt=<span class=\"hljs-string\">&quot;&quot;</span>  srcset=<span class=\"hljs-string\">&quot;&quot;</span>&gt;\n\n<span class=\"hljs-keyword\">const</span>  observer = <span class=\"hljs-keyword\">new</span>  <span class=\"hljs-title class_\">IntersectionObserver</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">changes</span>=&gt;</span> {\n    changes.<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">change</span>  =&gt;</span> {\n        <span class=\"hljs-comment\">// change.isIntersecting åˆ¤æ–­å½“å‰å…ƒç´ æ˜¯å¦å‡ºç°åœ¨è§†å£ä¸­</span>\n        <span class=\"hljs-keyword\">if</span> (change.<span class=\"hljs-property\">isIntersecting</span>) {\n            <span class=\"hljs-keyword\">const</span>  img = change.<span class=\"hljs-property\">target</span>\n            img.<span class=\"hljs-property\">src</span> = img.<span class=\"hljs-property\">dataset</span>.<span class=\"hljs-property\">src</span>\n            <span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">deleteProperty</span>(img.<span class=\"hljs-property\">dataset</span>, <span class=\"hljs-string\">&quot;src&quot;</span>)\n            observer.<span class=\"hljs-title function_\">unobserve</span>(img)\n        }\n    })\n})\nobserver.<span class=\"hljs-title function_\">observe</span>(<span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;#img&quot;</span>))\n</code></pre>\n</li>\n<li><p><code>img</code>çš„<code>lazy</code>å±æ€§ ğŸ‘</p>\n<p>å…¼å®¹æ€§å·®ï¼Œ<a href=\"https://www.jianguoyun.com/static/stackedit/%5Bhttps://www.zhangxinxu.com/wordpress/2019/09/native-img-loading-lazy/%5D(https://www.zhangxinxu.com/wordpress/2019/09/native-img-loading-lazy/)\">å…·ä½“å®è·µ</a></p>\n<p><code>&lt;img loading=&quot;lazy&quot; src=&quot;http://blog.p18c.top/imgs/avatar.png&quot; alt=&quot;&quot; srcset=&quot;&quot;&gt;</code></p>\n</li>\n</ol>\n<h1 id=\"é¢„åŠ è½½-vs-æ‡’åŠ è½½\">é¢„åŠ è½½ VS æ‡’åŠ è½½</h1>\n<p>|      | é¢„åŠ è½½                             | æ‡’åŠ è½½                                      |\n| </p>\n"}},"__N_SSG":true}