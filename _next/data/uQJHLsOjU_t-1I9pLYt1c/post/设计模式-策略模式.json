{"pageProps":{"post":{"title":"设计模式-策略模式","tags":["tags"],"categories":"设计模式","description":"# WHAT\n\n定义一系列的算法，把它们一个个封装起来，并且使它们可以相互替换。\n\n一个基于策略模式的程序至少由两部分组成，第一部分是一组策略类，策略类封装了具体的算法，并负责具体的计算过程。第二部分是环境类 Context,Context 接受客户的请求随后把请求委托给某一个策略类。要做到这一点，说明 Context 中要维持对某个策略类的引用。\n\n# WHY\n\n- 策略模式使用组合、委托和","createDate":"2019-10-20 10:43:35","updateDate":"10/1/2021, 3:34:43 AM","body":"<h1 id=\"what\">WHAT</h1>\n<p>定义一系列的算法，把它们一个个封装起来，并且使它们可以相互替换。</p>\n<p>一个基于策略模式的程序至少由两部分组成，第一部分是一组策略类，策略类封装了具体的算法，并负责具体的计算过程。第二部分是环境类 Context,Context 接受客户的请求随后把请求委托给某一个策略类。要做到这一点，说明 Context 中要维持对某个策略类的引用。</p>\n<h1 id=\"why\">WHY</h1>\n<ul>\n<li>策略模式使用组合、委托和多态等技术和思想，可以避免多重条件选择语句</li>\n<li>策略模式提供了对<strong>开放-封闭原则</strong>的完美支持，将算法封装在独立的 strategy 中，使得它们易于替换、理解、<strong>扩展</strong></li>\n<li>在策略模式中利用组合和委托让 context 拥有执行算法的能力，这也是继承的一种更轻便的替代方案</li>\n</ul>\n<h1 id=\"how\">HOW</h1>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">/* 计算奖金：绩效为S有四倍工资，绩效为A有3倍工资，绩效为B有2倍工资 */</span>\n\n<span class=\"hljs-comment\">// common  缺乏扩展性</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">calcBouns</span>(<span class=\"hljs-params\">type, salary</span>) {\n  <span class=\"hljs-keyword\">if</span>(type === <span class=\"hljs-string\">&#x27;S&#x27;</span>) <span class=\"hljs-keyword\">return</span> salary * <span class=\"hljs-number\">4</span>\n  <span class=\"hljs-keyword\">if</span>(type === <span class=\"hljs-string\">&#x27;A&#x27;</span>) <span class=\"hljs-keyword\">return</span> salary * <span class=\"hljs-number\">3</span>\n  <span class=\"hljs-keyword\">if</span>(type === <span class=\"hljs-string\">&#x27;B&#x27;</span>) <span class=\"hljs-keyword\">return</span> salary * <span class=\"hljs-number\">2</span>\n}\n<span class=\"hljs-title function_\">calcBouns</span>(<span class=\"hljs-string\">&#x27;S&#x27;</span>, <span class=\"hljs-number\">20000</span>)\n<span class=\"hljs-title function_\">calcBouns</span>(<span class=\"hljs-string\">&#x27;A&#x27;</span>, <span class=\"hljs-number\">10000</span>)\n\n<span class=\"hljs-comment\">// stratety pattern</span>\n<span class=\"hljs-keyword\">const</span> strategy {\n  <span class=\"hljs-attr\">S</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">salary</span>) {\n    <span class=\"hljs-keyword\">return</span> salary * <span class=\"hljs-number\">4</span>\n  },\n  <span class=\"hljs-attr\">A</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">salary</span>) {\n    <span class=\"hljs-keyword\">return</span> salary * <span class=\"hljs-number\">3</span>\n  },\n  <span class=\"hljs-attr\">B</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">salary</span>) {\n    <span class=\"hljs-keyword\">return</span> salary * <span class=\"hljs-number\">2</span>\n  }\n}\n\n<span class=\"hljs-keyword\">const</span> calcBouns = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">type, salary</span>) {\n  <span class=\"hljs-keyword\">return</span> strategy[type](salary)\n}\n\n<span class=\"hljs-title function_\">calcBouns</span>(<span class=\"hljs-string\">&#x27;S&#x27;</span>, <span class=\"hljs-number\">20000</span>)\n<span class=\"hljs-title function_\">calcBouns</span>(<span class=\"hljs-string\">&#x27;A&#x27;</span>, <span class=\"hljs-number\">10000</span>)\n\n<span class=\"hljs-comment\">// functional programing</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">S</span>(<span class=\"hljs-params\">salary</span>) {\n  <span class=\"hljs-keyword\">return</span> salary * <span class=\"hljs-number\">4</span>\n}\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">A</span>(<span class=\"hljs-params\">salary</span>) {\n  <span class=\"hljs-keyword\">return</span> salary * <span class=\"hljs-number\">3</span>\n}\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">B</span>(<span class=\"hljs-params\">salary</span>) {\n  <span class=\"hljs-keyword\">return</span> salary * <span class=\"hljs-number\">2</span>\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">calcBouns</span>(<span class=\"hljs-params\">fn, salary</span>) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">fn</span>(salary)\n}\n\n<span class=\"hljs-title function_\">calcBouns</span>(S, <span class=\"hljs-number\">20000</span>)\n<span class=\"hljs-title function_\">calcBouns</span>(B, <span class=\"hljs-number\">10000</span>)\n</code></pre>\n"}},"__N_SSG":true}