{"pageProps":{"post":{"title":"Web Component-å¤„ç†æ•°æ®","tags":["å¾®å‰ç«¯","WebComponent","Attribute","Property"],"categories":"å¾®å‰ç«¯","description":"åœ¨å‰ä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ª`Reply`ç»„ä»¶ï¼Œå¤§æ¦‚é•¿è¿™æ ·\n\n![web component reply](https://mrrsblog.oss-cn-shanghai.aliyuncs.com/reply.gif)\n\nåŠŸèƒ½æ˜¯å®Œæˆäº†ï¼Œä¸è¿‡ä»Šå¤©æµè§ˆçœ‹åˆ°ä¸€ç¯‡æ–‡ç« [Handling data with Web Components](https://itnext.io/handling-data-w","createDate":"2022-04-24 22:00:47","updateDate":"2022-04-23 22:54:37","body":"<p>åœ¨å‰ä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ª<code>Reply</code>ç»„ä»¶ï¼Œå¤§æ¦‚é•¿è¿™æ ·</p>\n<p><img src=\"https://mrrsblog.oss-cn-shanghai.aliyuncs.com/reply.gif\" alt=\"web component reply\"></p>\n<p>åŠŸèƒ½æ˜¯å®Œæˆäº†ï¼Œä¸è¿‡ä»Šå¤©æµè§ˆçœ‹åˆ°ä¸€ç¯‡æ–‡ç« <a href=\"https://itnext.io/handling-data-with-web-components-9e7e4a452e6e\">Handling data with Web Components</a>ï¼Œå¤§æ¦‚æ˜¯ä»‹ç»äº† Web Component ä¸­æ•°æ®äº¤äº’çš„å‡ ç§æ–¹å¼ï¼Œæœ‰ä¸å°‘æ”¶è·ï¼Œç‰¹æ­¤æ€»ç»“è®°å½•ä¸€ä¸‹</p>\n<h2 id=\"attribute-vs-property\">attribute VS property</h2>\n<p>é¦–å…ˆæ˜¯<code>attribute</code>å’Œ<code>property</code>ï¼Œæˆ‘ä»¬ä¹‹å‰çš„ä»£ç ä¸­ä½¿ç”¨çš„æ˜¯<code>attribute</code>æ¥å°†<code>comments</code>ä¼ é€’åˆ°ç»„ä»¶ä¸­ï¼Œç»„ä»¶æ‹¿åˆ°åå¼€å§‹æ¸²æŸ“æ•°æ®ã€‚è¿™ç§æ–¹æ¡ˆæœ‰ä¸€ä¸ªå¼Šç«¯ï¼š<code>attribute</code>åªæ¥æ”¶å­—ç¬¦ä¸²ç±»å‹çš„æ•°æ®ï¼Œç”±äº<code>comments</code>æ˜¯ä¸€ä¸ªæ•°ç»„ç±»å‹ï¼Œå› æ­¤æˆ‘ä»¬åœ¨ä¼ é€’ä¹‹å‰éœ€è¦ä½¿ç”¨<code>JSON.stringify</code>ä¸€ä¸‹ä»¥åŠä½¿ç”¨æ•°æ®æ—¶éœ€è¦<code>JSON.parse</code>ä¸€ä¸‹ï¼Œä½¿ç”¨èµ·æ¥æœ‰ä¸€äº›ä¸å¤Ÿæ–¹ä¾¿</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// æ›´æ–°commentsæ—¶éœ€è¦å¤„ç†æˆå­—ç¬¦ä¸²</span>\nreply.<span class=\"hljs-title function_\">setAttribute</span>(<span class=\"hljs-string\">&quot;comments&quot;</span>, <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">stringify</span>(comments));\n\n<span class=\"hljs-comment\">// ä½¿ç”¨æ—¶éœ€è¦è§£ææˆæ•°ç»„</span>\n<span class=\"hljs-keyword\">if</span> (name === <span class=\"hljs-string\">&quot;comments&quot;</span>) {\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">renderComments</span>(<span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">parse</span>(newValue));\n}\n</code></pre>\n<p>é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§æ›´å¥½çš„æ–¹å¼æ¥å–ä»£è¿™ç§æ–¹å¼å‘¢ï¼Ÿæœ‰çš„ï¼Œå¯ä»¥ä½¿ç”¨<code>property</code>æ¥ä¼ é€’æ•°æ®</p>\n<p><code>property</code>å’Œ<code>attribute</code>ä¸­æ–‡ç¿»è¯‘è¿‡æ¥æ„æ€å¾ˆæ¥è¿‘ï¼Œä½†å®é™…ä¸Šæ˜¯æœ‰ä¸å°çš„åŒºåˆ«</p>\n<p>è€ƒè™‘ä¸‹é¢è¿™ä¸€è¡Œä»£ç </p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;text&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;Age:&quot;</span> /&gt;</span>\n</code></pre>\n<p><code>type</code>å’Œ<code>value</code>å°±æ˜¯<code>input</code>æ ‡ç­¾çš„*<code>attribute</code>*</p>\n<p>å½“æµè§ˆå™¨ç¼–è¯‘å®Œ HTML ä»£ç ï¼Œä¼šç”Ÿæˆä¸ä¹‹å¯¹åº”çš„ä¸€ä¸ªä¸ª DOM èŠ‚ç‚¹ï¼Œæ¯ä¸ª DOM èŠ‚ç‚¹æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ­¤æ—¶å®ƒåˆæ‹¥æœ‰å¾ˆå¤š*<code>property</code>*ï¼Œä¾‹å¦‚<code>height</code>ã€<code>alt</code>ã€<code>checked</code>ç­‰</p>\n<p>å¯¹äºä¸€ä¸ª DOM èŠ‚ç‚¹å¯¹è±¡æ¥è®²ï¼Œ<code>property</code>å°±æ˜¯è¿™ä¸ªå¯¹è±¡ä¸Šçš„å±æ€§ï¼›<code>attribute</code>æ˜¯è¯¥å¯¹è±¡å¯¹åº”çš„ HTML æ ‡ç­¾å…ƒç´ ä¸Šçš„å±æ€§</p>\n<p><code>property</code>å’Œ<code>attribute</code>å¤§è‡´ä¸Šä¸€ä¸€å¯¹åº”ï¼Œä½†ä¹Ÿæœ‰äº›ç‰¹ä¾‹ï¼Œæ¯”å¦‚ä¸Šè¿°<code>input</code>æ ‡ç­¾çš„<code>value</code>ï¼šDOM èŠ‚ç‚¹å¯¹è±¡ä¸Šçš„<code>value</code>ä¼šåœ¨è¾“å…¥ä¹‹åå‘ç”Ÿå˜åŒ–ï¼Œå‡å¦‚ç”¨æˆ·è¾“å…¥çš„æ˜¯<code>John</code>ï¼Œé‚£ä¹ˆæ­¤æ—¶<code>Input.value</code>çš„è¿”å›å€¼æ˜¯<code>John</code>ï¼Œè€Œ<code>Input.getAttribute(&#39;value&#39;)</code>çš„è¿”å›å€¼åˆ™æ˜¯<code>Name:</code>ã€‚æ­¤å¤–è¿˜æœ‰å…¶ä»–çš„ä¸€äº›ç‰¹ä¾‹ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å»è¿™é‡Œ<a href=\"https://stackoverflow.com/questions/6003819/what-is-the-difference-between-properties-and-attributes-in-html/6004028#6004028\">What is the difference between properties and attributes in HTML</a>çœ‹çœ‹åŸæ–‡</p>\n<p>æ—¢ç„¶<code>property</code>æ˜¯å¯¹è±¡ä¸Šçš„ä¸€ä¸ªå±æ€§ï¼Œé‚£ä¸ªè‚¯å®šä¹Ÿå¯ä»¥ç»™å®ƒèµ‹ä¸€ä¸ªå¯¹è±¡ç±»å‹çš„å€¼ï¼æ¥ä¸‹æ¥å°±ä½¿ç”¨<code>property</code>æ¥é‡æ„<code>Reply</code>ç»„ä»¶</p>\n<h2 id=\"ä½¿ç”¨-property-é‡æ„ç»„ä»¶\">ä½¿ç”¨ property é‡æ„ç»„ä»¶</h2>\n<p>å…¶å®ä¿®æ”¹èµ·æ¥éå¸¸æ–¹ä¾¿ï¼Œä»£ç æ”¹åŠ¨æ¯”è¾ƒå°‘</p>\n<p>é¦–å…ˆæ˜¯æœ€ä¸‹é¢ç»™ç»„ä»¶æ›´æ–°å€¼çš„ä»£ç éœ€è¦å˜åŠ¨ï¼šä¸å†ä½¿ç”¨<code>setAttribute</code>ï¼Œè€Œæ˜¯ç›´æ¥è®¾ç½®<code>comments</code>å±æ€§</p>\n<pre><code class=\"hljs language-js\">reply.<span class=\"hljs-title function_\">setAttribute</span>(<span class=\"hljs-string\">&quot;comments&quot;</span>, <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">stringify</span>(comments));\n\n<span class=\"hljs-comment\">// ä¿®æ”¹ä¸º â¬‡ï¸</span>\nreply.<span class=\"hljs-property\">comments</span> = comments;\n</code></pre>\n<p>å…¶æ¬¡ï¼Œæˆ‘ä»¬éœ€è¦ä¸€å¯¹<code>getter</code>å’Œ<code>setter</code>æ¥ç›‘å¬æ•°æ®å˜åŒ–ä»è€Œæ¸²æŸ“æ–°çš„å€¼</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Reply</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">HTMLElement</span> {\n  <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-comment\">// åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨_commentsæ¥ä¿å­˜commentsæ•°æ®</span>\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">_comments</span> = [];\n  }\n  <span class=\"hljs-keyword\">get</span> <span class=\"hljs-title function_\">comments</span>() {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">_comments</span>;\n  }\n\n  <span class=\"hljs-keyword\">set</span> <span class=\"hljs-title function_\">comments</span>(<span class=\"hljs-params\">newValue</span>) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">_comments</span> = newValue;\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">renderComments</span>(newValue);\n  }\n}\n</code></pre>\n<p>åŒæ—¶ï¼Œåˆ é™¤ç›‘å¬<code>comments</code>å±æ€§ç›¸å…³çš„ä»£ç ï¼Œå› ä¸ºæˆ‘ä»¬è¿™ä¸ªå·²ç»é€šè¿‡<code>setter</code>å®ç°æ•°æ®ç›‘å¬äº†</p>\n<p>æ›´æ–°ä¸€æ­¥ï¼</p>\n<p>æ—¢ç„¶æˆ‘ä»¬éƒ½èƒ½ä¼ é€’æ•°ç»„è¿›å»äº†ï¼Œé‚£ä¹ˆåœ¨å¤§èƒ†ç‚¹ï¼Œå¯ä¸å¯ä»¥ä¼ é€’ä¸€ä¸ªå‡½æ•°å‘¢ï¼Ÿ</p>\n<p>å½“ç„¶å¯ä»¥ï¼ï¼ï¼</p>\n<p>æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨<code>reply</code>ä¸ŠæŒ‚è½½ä¸€ä¸ª<code>onSubmitComment</code>å‡½æ•°ï¼Œåœ¨<code>Reply</code>å†…éƒ¨æŒ‰é’®ç‚¹å‡»æ—¶è°ƒç”¨è¯¥å›è°ƒï¼Œå¹¶å°†æ•°æ®ä¼ é€’å‡ºæ¥</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// ç›´æ¥åœ¨ç»„ä»¶å®ä¾‹ä¸ŠæŒ‚è½½ä¸€ä¸ªå›è°ƒå‡½æ•°</span>\nreply.<span class=\"hljs-property\">onSubmitComment</span> = <span class=\"hljs-function\">(<span class=\"hljs-params\">e</span>) =&gt;</span> {\n  comments.<span class=\"hljs-title function_\">push</span>({\n    <span class=\"hljs-attr\">comment</span>: e,\n    nickName,\n    avatar,\n  });\n  reply.<span class=\"hljs-property\">comments</span> = comments;\n};\n\n<span class=\"hljs-comment\">// ç»„ä»¶å†…éƒ¨ï¼Œç‚¹å‡»æŒ‰é’®æ—¶è°ƒç”¨è¯¥å‡½æ•°</span>\nsubmitBtn.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&quot;click&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">onSubmitComment</span>?.(commentInput.<span class=\"hljs-property\">value</span>);\n  commentInput.<span class=\"hljs-property\">value</span> = <span class=\"hljs-string\">&quot;&quot;</span>;\n});\n</code></pre>\n<p>ğŸ‰</p>\n<p>å®Œæ•´ä»£ç <a href=\"https://github.com/mrrs878/web-components/blob/main/reply-property.html\">åœ¨è¿™é‡Œ</a></p>\n<h2 id=\"æ€»ç»“\">æ€»ç»“</h2>\n<p><code>attribute</code>åªèƒ½ä¼ é€’å­—ç¬¦ä¸²æ•°æ®ï¼Œ<code>property</code>ç”±äºæ˜¯ DOM å¯¹è±¡ä¸Šçš„å±æ€§ï¼Œå› æ­¤å¯ä»¥ä¼ é€’è¯¸å¦‚å¯¹è±¡ã€å‡½æ•°ç­‰å¤æ‚ç±»å‹çš„æ•°æ®ã€‚æ®æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>property</code>æ¥å°†æ•°æ®ç›´æ¥è®¾ç½®åˆ°ç»„ä»¶å®ä¾‹ä¸Šï¼Œç»„ä»¶å†…éƒ¨æ–°å¢ä¸€å¯¹<code>getter</code>å’Œ<code>setter</code>æ¥æ¥æ”¶æ•°æ®ï¼Œè€Œä¸”æˆ‘ä»¬è¿˜å¯ä»¥ç›´æ¥åœ¨ç»„ä»¶å®ä¾‹ä¸ŠæŒ‚è½½ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œåœ¨ç»„ä»¶å†…éƒ¨å¯ä»¥ç›´æ¥è°ƒç”¨è¯¥å›è°ƒã€‚æ­¤å¤–åœ¨å¤„ç†ç±»ä¼¼äº<code>disable</code>è¿™ç§ç±»å‹çš„<code>attribute</code>æ—¶ä¹Ÿå¯ä»¥ä½¿ç”¨<code>property</code>+<code>getter</code>å’Œ<code>setter</code>æ¥å®ç°å¸ƒå°”ç±»å‹å±æ€§çš„è®¾ç½®</p>\n<p>æ€»ä¹‹ï¼Œ<code>attribute</code>å’Œ<code>property</code>æ­é…ä½¿ç”¨å°†æå¤§æé«˜å¼€å‘æ•ˆç‡</p>\n<h2 id=\"å‚è€ƒ\">å‚è€ƒ</h2>\n<p><a href=\"https://stackoverflow.com/questions/6003819/what-is-the-difference-between-properties-and-attributes-in-html/6004028#6004028\">What is the difference between properties and attributes in HTML</a></p>\n"}},"__N_SSG":true}